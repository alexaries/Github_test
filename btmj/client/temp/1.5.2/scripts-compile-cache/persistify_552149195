{"persistifyArgs":{"cache":{"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/39/39329d2f-3dcd-4821-87e1-f05ae6c5c359.js":{"source":"(function (global){\n\"use strict\";\ncc._RF.push(module, '393290vPc1IIYfh8FrmxcNZ', 'socket-io');\n// scripts/3rdparty/socket-io.js\n\n\"use strict\";\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nif (!CC_JSB && !cc.sys.isNative) {\n\t(function (f) {\n\t\tif ((typeof exports === \"undefined\" ? \"undefined\" : _typeof(exports)) === \"object\" && typeof module !== \"undefined\") {\n\t\t\tmodule.exports = f();\n\t\t} else if (typeof define === \"function\" && define.amd) {\n\t\t\tdefine([], f);\n\t\t} else {\n\t\t\tvar g;\n\t\t\tif (typeof window !== \"undefined\") {\n\t\t\t\tg = window;\n\t\t\t} else if (typeof global !== \"undefined\") {\n\t\t\t\tg = global;\n\t\t\t} else if (typeof self !== \"undefined\") {\n\t\t\t\tg = self;\n\t\t\t} else {\n\t\t\t\tg = this;\n\t\t\t}\n\t\t\tg.io = f();\n\t\t}\n\t})(function () {\n\t\tvar define, module, exports;\n\t\treturn function e(t, n, r) {\n\t\t\tfunction s(o, u) {\n\t\t\t\tif (!n[o]) {\n\t\t\t\t\tif (!t[o]) {\n\t\t\t\t\t\tvar a = typeof require == \"function\" && require;\n\t\t\t\t\t\tif (!u && a) return a(o, !0);\n\t\t\t\t\t\tif (i) return i(o, !0);\n\t\t\t\t\t\tvar f = new Error(\"Cannot find module '\" + o + \"'\");\n\t\t\t\t\t\tthrow f.code = \"MODULE_NOT_FOUND\", f;\n\t\t\t\t\t}\n\t\t\t\t\tvar l = n[o] = {\n\t\t\t\t\t\texports: {}\n\t\t\t\t\t};\n\t\t\t\t\tt[o][0].call(l.exports, function (e) {\n\t\t\t\t\t\tvar n = t[o][1][e];\n\t\t\t\t\t\treturn s(n ? n : e);\n\t\t\t\t\t}, l, l.exports, e, t, n, r);\n\t\t\t\t}\n\t\t\t\treturn n[o].exports;\n\t\t\t}\n\t\t\tvar i = typeof require == \"function\" && require;\n\t\t\tfor (var o = 0; o < r.length; o++) {\n\t\t\t\ts(r[o]);\n\t\t\t}return s;\n\t\t}({\n\t\t\t1: [function (_dereq_, module, exports) {\n\n\t\t\t\tmodule.exports = _dereq_('./lib/');\n\t\t\t}, {\n\t\t\t\t\"./lib/\": 2\n\t\t\t}],\n\t\t\t2: [function (_dereq_, module, exports) {\n\n\t\t\t\tmodule.exports = _dereq_('./socket');\n\n\t\t\t\t/**\n     * Exports parser\n     *\n     * @api public\n     *\n     */\n\t\t\t\tmodule.exports.parser = _dereq_('engine.io-parser');\n\t\t\t}, {\n\t\t\t\t\"./socket\": 3,\n\t\t\t\t\"engine.io-parser\": 19\n\t\t\t}],\n\t\t\t3: [function (_dereq_, module, exports) {\n\t\t\t\t(function (global) {\n\t\t\t\t\t/**\n      * Module dependencies.\n      */\n\n\t\t\t\t\tvar transports = _dereq_('./transports');\n\t\t\t\t\tvar Emitter = _dereq_('component-emitter');\n\t\t\t\t\tvar debug = _dereq_('debug')('engine.io-client:socket');\n\t\t\t\t\tvar index = _dereq_('indexof');\n\t\t\t\t\tvar parser = _dereq_('engine.io-parser');\n\t\t\t\t\tvar parseuri = _dereq_('parseuri');\n\t\t\t\t\tvar parsejson = _dereq_('parsejson');\n\t\t\t\t\tvar parseqs = _dereq_('parseqs');\n\n\t\t\t\t\t/**\n      * Module exports.\n      */\n\n\t\t\t\t\tmodule.exports = Socket;\n\n\t\t\t\t\t/**\n      * Noop function.\n      *\n      * @api private\n      */\n\n\t\t\t\t\tfunction noop() {}\n\n\t\t\t\t\t/**\n      * Socket constructor.\n      *\n      * @param {String|Object} uri or options\n      * @param {Object} options\n      * @api public\n      */\n\n\t\t\t\t\tfunction Socket(uri, opts) {\n\t\t\t\t\t\tif (!(this instanceof Socket)) return new Socket(uri, opts);\n\n\t\t\t\t\t\topts = opts || {};\n\n\t\t\t\t\t\tif (uri && 'object' == (typeof uri === \"undefined\" ? \"undefined\" : _typeof(uri))) {\n\t\t\t\t\t\t\topts = uri;\n\t\t\t\t\t\t\turi = null;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (uri) {\n\t\t\t\t\t\t\turi = parseuri(uri);\n\t\t\t\t\t\t\topts.hostname = uri.host;\n\t\t\t\t\t\t\topts.secure = uri.protocol == 'https' || uri.protocol == 'wss';\n\t\t\t\t\t\t\topts.port = uri.port;\n\t\t\t\t\t\t\tif (uri.query) opts.query = uri.query;\n\t\t\t\t\t\t} else if (opts.host) {\n\t\t\t\t\t\t\topts.hostname = parseuri(opts.host).host;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.secure = null != opts.secure ? opts.secure : global.location && 'https:' == location.protocol;\n\n\t\t\t\t\t\tif (opts.hostname && !opts.port) {\n\t\t\t\t\t\t\t// if no port is specified manually, use the protocol default\n\t\t\t\t\t\t\topts.port = this.secure ? '443' : '80';\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.agent = opts.agent || false;\n\t\t\t\t\t\tthis.hostname = opts.hostname || (global.location ? location.hostname : 'localhost');\n\t\t\t\t\t\tthis.port = opts.port || (global.location && location.port ? location.port : this.secure ? 443 : 80);\n\t\t\t\t\t\tthis.query = opts.query || {};\n\t\t\t\t\t\tif ('string' == typeof this.query) this.query = parseqs.decode(this.query);\n\t\t\t\t\t\tthis.upgrade = false !== opts.upgrade;\n\t\t\t\t\t\tthis.path = (opts.path || '/engine.io').replace(/\\/$/, '') + '/';\n\t\t\t\t\t\tthis.forceJSONP = !!opts.forceJSONP;\n\t\t\t\t\t\tthis.jsonp = false !== opts.jsonp;\n\t\t\t\t\t\tthis.forceBase64 = !!opts.forceBase64;\n\t\t\t\t\t\tthis.enablesXDR = !!opts.enablesXDR;\n\t\t\t\t\t\tthis.timestampParam = opts.timestampParam || 't';\n\t\t\t\t\t\tthis.timestampRequests = opts.timestampRequests;\n\t\t\t\t\t\tthis.transports = opts.transports || ['polling', 'websocket'];\n\t\t\t\t\t\tthis.readyState = '';\n\t\t\t\t\t\tthis.writeBuffer = [];\n\t\t\t\t\t\tthis.policyPort = opts.policyPort || 843;\n\t\t\t\t\t\tthis.rememberUpgrade = opts.rememberUpgrade || false;\n\t\t\t\t\t\tthis.binaryType = null;\n\t\t\t\t\t\tthis.onlyBinaryUpgrades = opts.onlyBinaryUpgrades;\n\t\t\t\t\t\tthis.perMessageDeflate = false !== opts.perMessageDeflate ? opts.perMessageDeflate || {} : false;\n\n\t\t\t\t\t\tif (true === this.perMessageDeflate) this.perMessageDeflate = {};\n\t\t\t\t\t\tif (this.perMessageDeflate && null == this.perMessageDeflate.threshold) {\n\t\t\t\t\t\t\tthis.perMessageDeflate.threshold = 1024;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// SSL options for Node.js client\n\t\t\t\t\t\tthis.pfx = opts.pfx || null;\n\t\t\t\t\t\tthis.key = opts.key || null;\n\t\t\t\t\t\tthis.passphrase = opts.passphrase || null;\n\t\t\t\t\t\tthis.cert = opts.cert || null;\n\t\t\t\t\t\tthis.ca = opts.ca || null;\n\t\t\t\t\t\tthis.ciphers = opts.ciphers || null;\n\t\t\t\t\t\tthis.rejectUnauthorized = opts.rejectUnauthorized === undefined ? true : opts.rejectUnauthorized;\n\n\t\t\t\t\t\t// other options for Node.js client\n\t\t\t\t\t\tvar freeGlobal = (typeof global === \"undefined\" ? \"undefined\" : _typeof(global)) == 'object' && global;\n\t\t\t\t\t\tif (freeGlobal.global === freeGlobal) {\n\t\t\t\t\t\t\tif (opts.extraHeaders && Object.keys(opts.extraHeaders).length > 0) {\n\t\t\t\t\t\t\t\tthis.extraHeaders = opts.extraHeaders;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.open();\n\t\t\t\t\t}\n\n\t\t\t\t\tSocket.priorWebsocketSuccess = false;\n\n\t\t\t\t\t/**\n      * Mix in `Emitter`.\n      */\n\n\t\t\t\t\tEmitter(Socket.prototype);\n\n\t\t\t\t\t/**\n      * Protocol version.\n      *\n      * @api public\n      */\n\n\t\t\t\t\tSocket.protocol = parser.protocol; // this is an int\n\n\t\t\t\t\t/**\n      * Expose deps for legacy compatibility\n      * and standalone browser access.\n      */\n\n\t\t\t\t\tSocket.Socket = Socket;\n\t\t\t\t\tSocket.Transport = _dereq_('./transport');\n\t\t\t\t\tSocket.transports = _dereq_('./transports');\n\t\t\t\t\tSocket.parser = _dereq_('engine.io-parser');\n\n\t\t\t\t\t/**\n      * Creates transport of the given type.\n      *\n      * @param {String} transport name\n      * @return {Transport}\n      * @api private\n      */\n\n\t\t\t\t\tSocket.prototype.createTransport = function (name) {\n\t\t\t\t\t\tdebug('creating transport \"%s\"', name);\n\t\t\t\t\t\tvar query = clone(this.query);\n\n\t\t\t\t\t\t// append engine.io protocol identifier\n\t\t\t\t\t\tquery.EIO = parser.protocol;\n\n\t\t\t\t\t\t// transport name\n\t\t\t\t\t\tquery.transport = name;\n\n\t\t\t\t\t\t// session id if we already have one\n\t\t\t\t\t\tif (this.id) query.sid = this.id;\n\n\t\t\t\t\t\tvar transport = new transports[name]({\n\t\t\t\t\t\t\tagent: this.agent,\n\t\t\t\t\t\t\thostname: this.hostname,\n\t\t\t\t\t\t\tport: this.port,\n\t\t\t\t\t\t\tsecure: this.secure,\n\t\t\t\t\t\t\tpath: this.path,\n\t\t\t\t\t\t\tquery: query,\n\t\t\t\t\t\t\tforceJSONP: this.forceJSONP,\n\t\t\t\t\t\t\tjsonp: this.jsonp,\n\t\t\t\t\t\t\tforceBase64: this.forceBase64,\n\t\t\t\t\t\t\tenablesXDR: this.enablesXDR,\n\t\t\t\t\t\t\ttimestampRequests: this.timestampRequests,\n\t\t\t\t\t\t\ttimestampParam: this.timestampParam,\n\t\t\t\t\t\t\tpolicyPort: this.policyPort,\n\t\t\t\t\t\t\tsocket: this,\n\t\t\t\t\t\t\tpfx: this.pfx,\n\t\t\t\t\t\t\tkey: this.key,\n\t\t\t\t\t\t\tpassphrase: this.passphrase,\n\t\t\t\t\t\t\tcert: this.cert,\n\t\t\t\t\t\t\tca: this.ca,\n\t\t\t\t\t\t\tciphers: this.ciphers,\n\t\t\t\t\t\t\trejectUnauthorized: this.rejectUnauthorized,\n\t\t\t\t\t\t\tperMessageDeflate: this.perMessageDeflate,\n\t\t\t\t\t\t\textraHeaders: this.extraHeaders\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\treturn transport;\n\t\t\t\t\t};\n\n\t\t\t\t\tfunction clone(obj) {\n\t\t\t\t\t\tvar o = {};\n\t\t\t\t\t\tfor (var i in obj) {\n\t\t\t\t\t\t\tif (obj.hasOwnProperty(i)) {\n\t\t\t\t\t\t\t\to[i] = obj[i];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn o;\n\t\t\t\t\t}\n\n\t\t\t\t\t/**\n      * Initializes transport to use and starts probe.\n      *\n      * @api private\n      */\n\t\t\t\t\tSocket.prototype.open = function () {\n\t\t\t\t\t\tvar transport;\n\t\t\t\t\t\tif (this.rememberUpgrade && Socket.priorWebsocketSuccess && this.transports.indexOf('websocket') != -1) {\n\t\t\t\t\t\t\ttransport = 'websocket';\n\t\t\t\t\t\t} else if (0 === this.transports.length) {\n\t\t\t\t\t\t\t// Emit error on next tick so it can be listened to\n\t\t\t\t\t\t\tvar self = this;\n\t\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\t\tself.emit('error', 'No transports available');\n\t\t\t\t\t\t\t}, 0);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttransport = this.transports[0];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.readyState = 'opening';\n\n\t\t\t\t\t\t// Retry with the next transport if the transport is disabled (jsonp: false)\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\ttransport = this.createTransport(transport);\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\tthis.transports.shift();\n\t\t\t\t\t\t\tthis.open();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttransport.open();\n\t\t\t\t\t\tthis.setTransport(transport);\n\t\t\t\t\t};\n\n\t\t\t\t\t/**\n      * Sets the current transport. Disables the existing one (if any).\n      *\n      * @api private\n      */\n\n\t\t\t\t\tSocket.prototype.setTransport = function (transport) {\n\t\t\t\t\t\tdebug('setting transport %s', transport.name);\n\t\t\t\t\t\tvar self = this;\n\n\t\t\t\t\t\tif (this.transport) {\n\t\t\t\t\t\t\tdebug('clearing existing transport %s', this.transport.name);\n\t\t\t\t\t\t\tthis.transport.removeAllListeners();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// set up transport\n\t\t\t\t\t\tthis.transport = transport;\n\n\t\t\t\t\t\t// set up transport listeners\n\t\t\t\t\t\ttransport.on('drain', function () {\n\t\t\t\t\t\t\tself.onDrain();\n\t\t\t\t\t\t}).on('packet', function (packet) {\n\t\t\t\t\t\t\tself.onPacket(packet);\n\t\t\t\t\t\t}).on('error', function (e) {\n\t\t\t\t\t\t\tself.onError(e);\n\t\t\t\t\t\t}).on('close', function () {\n\t\t\t\t\t\t\tself.onClose('transport close');\n\t\t\t\t\t\t});\n\t\t\t\t\t};\n\n\t\t\t\t\t/**\n      * Probes a transport.\n      *\n      * @param {String} transport name\n      * @api private\n      */\n\n\t\t\t\t\tSocket.prototype.probe = function (name) {\n\t\t\t\t\t\tdebug('probing transport \"%s\"', name);\n\t\t\t\t\t\tvar transport = this.createTransport(name, {\n\t\t\t\t\t\t\tprobe: 1\n\t\t\t\t\t\t}),\n\t\t\t\t\t\t    failed = false,\n\t\t\t\t\t\t    self = this;\n\n\t\t\t\t\t\tSocket.priorWebsocketSuccess = false;\n\n\t\t\t\t\t\tfunction onTransportOpen() {\n\t\t\t\t\t\t\tif (self.onlyBinaryUpgrades) {\n\t\t\t\t\t\t\t\tvar upgradeLosesBinary = !this.supportsBinary && self.transport.supportsBinary;\n\t\t\t\t\t\t\t\tfailed = failed || upgradeLosesBinary;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (failed) return;\n\n\t\t\t\t\t\t\tdebug('probe transport \"%s\" opened', name);\n\t\t\t\t\t\t\ttransport.send([{\n\t\t\t\t\t\t\t\ttype: 'ping',\n\t\t\t\t\t\t\t\tdata: 'probe'\n\t\t\t\t\t\t\t}]);\n\t\t\t\t\t\t\ttransport.once('packet', function (msg) {\n\t\t\t\t\t\t\t\tif (failed) return;\n\t\t\t\t\t\t\t\tif ('pong' == msg.type && 'probe' == msg.data) {\n\t\t\t\t\t\t\t\t\tdebug('probe transport \"%s\" pong', name);\n\t\t\t\t\t\t\t\t\tself.upgrading = true;\n\t\t\t\t\t\t\t\t\tself.emit('upgrading', transport);\n\t\t\t\t\t\t\t\t\tif (!transport) return;\n\t\t\t\t\t\t\t\t\tSocket.priorWebsocketSuccess = 'websocket' == transport.name;\n\n\t\t\t\t\t\t\t\t\tdebug('pausing current transport \"%s\"', self.transport.name);\n\t\t\t\t\t\t\t\t\tself.transport.pause(function () {\n\t\t\t\t\t\t\t\t\t\tif (failed) return;\n\t\t\t\t\t\t\t\t\t\tif ('closed' == self.readyState) return;\n\t\t\t\t\t\t\t\t\t\tdebug('changing transport and sending upgrade packet');\n\n\t\t\t\t\t\t\t\t\t\tcleanup();\n\n\t\t\t\t\t\t\t\t\t\tself.setTransport(transport);\n\t\t\t\t\t\t\t\t\t\ttransport.send([{\n\t\t\t\t\t\t\t\t\t\t\ttype: 'upgrade'\n\t\t\t\t\t\t\t\t\t\t}]);\n\t\t\t\t\t\t\t\t\t\tself.emit('upgrade', transport);\n\t\t\t\t\t\t\t\t\t\ttransport = null;\n\t\t\t\t\t\t\t\t\t\tself.upgrading = false;\n\t\t\t\t\t\t\t\t\t\tself.flush();\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tdebug('probe transport \"%s\" failed', name);\n\t\t\t\t\t\t\t\t\tvar err = new Error('probe error');\n\t\t\t\t\t\t\t\t\terr.transport = transport.name;\n\t\t\t\t\t\t\t\t\tself.emit('upgradeError', err);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction freezeTransport() {\n\t\t\t\t\t\t\tif (failed) return;\n\n\t\t\t\t\t\t\t// Any callback called by transport should be ignored since now\n\t\t\t\t\t\t\tfailed = true;\n\n\t\t\t\t\t\t\tcleanup();\n\n\t\t\t\t\t\t\ttransport.close();\n\t\t\t\t\t\t\ttransport = null;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//Handle any error that happens while probing\n\t\t\t\t\t\tfunction onerror(err) {\n\t\t\t\t\t\t\tvar error = new Error('probe error: ' + err);\n\t\t\t\t\t\t\terror.transport = transport.name;\n\n\t\t\t\t\t\t\tfreezeTransport();\n\n\t\t\t\t\t\t\tdebug('probe transport \"%s\" failed because of error: %s', name, err);\n\n\t\t\t\t\t\t\tself.emit('upgradeError', error);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction onTransportClose() {\n\t\t\t\t\t\t\tonerror(\"transport closed\");\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//When the socket is closed while we're probing\n\t\t\t\t\t\tfunction onclose() {\n\t\t\t\t\t\t\tonerror(\"socket closed\");\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//When the socket is upgraded while we're probing\n\t\t\t\t\t\tfunction onupgrade(to) {\n\t\t\t\t\t\t\tif (transport && to.name != transport.name) {\n\t\t\t\t\t\t\t\tdebug('\"%s\" works - aborting \"%s\"', to.name, transport.name);\n\t\t\t\t\t\t\t\tfreezeTransport();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//Remove all listeners on the transport and on self\n\t\t\t\t\t\tfunction cleanup() {\n\t\t\t\t\t\t\ttransport.removeListener('open', onTransportOpen);\n\t\t\t\t\t\t\ttransport.removeListener('error', onerror);\n\t\t\t\t\t\t\ttransport.removeListener('close', onTransportClose);\n\t\t\t\t\t\t\tself.removeListener('close', onclose);\n\t\t\t\t\t\t\tself.removeListener('upgrading', onupgrade);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttransport.once('open', onTransportOpen);\n\t\t\t\t\t\ttransport.once('error', onerror);\n\t\t\t\t\t\ttransport.once('close', onTransportClose);\n\n\t\t\t\t\t\tthis.once('close', onclose);\n\t\t\t\t\t\tthis.once('upgrading', onupgrade);\n\n\t\t\t\t\t\ttransport.open();\n\t\t\t\t\t};\n\n\t\t\t\t\t/**\n      * Called when connection is deemed open.\n      *\n      * @api public\n      */\n\n\t\t\t\t\tSocket.prototype.onOpen = function () {\n\t\t\t\t\t\tdebug('socket open');\n\t\t\t\t\t\tthis.readyState = 'open';\n\t\t\t\t\t\tSocket.priorWebsocketSuccess = 'websocket' == this.transport.name;\n\t\t\t\t\t\tthis.emit('open');\n\t\t\t\t\t\tthis.flush();\n\n\t\t\t\t\t\t// we check for `readyState` in case an `open`\n\t\t\t\t\t\t// listener already closed the socket\n\t\t\t\t\t\tif ('open' == this.readyState && this.upgrade && this.transport.pause) {\n\t\t\t\t\t\t\tdebug('starting upgrade probes');\n\t\t\t\t\t\t\tfor (var i = 0, l = this.upgrades.length; i < l; i++) {\n\t\t\t\t\t\t\t\tthis.probe(this.upgrades[i]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\t/**\n      * Handles a packet.\n      *\n      * @api private\n      */\n\n\t\t\t\t\tSocket.prototype.onPacket = function (packet) {\n\t\t\t\t\t\tif ('opening' == this.readyState || 'open' == this.readyState) {\n\t\t\t\t\t\t\tdebug('socket receive: type \"%s\", data \"%s\"', packet.type, packet.data);\n\n\t\t\t\t\t\t\tthis.emit('packet', packet);\n\n\t\t\t\t\t\t\t// Socket is live - any packet counts\n\t\t\t\t\t\t\tthis.emit('heartbeat');\n\n\t\t\t\t\t\t\tswitch (packet.type) {\n\t\t\t\t\t\t\t\tcase 'open':\n\t\t\t\t\t\t\t\t\tthis.onHandshake(parsejson(packet.data));\n\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'pong':\n\t\t\t\t\t\t\t\t\tthis.setPing();\n\t\t\t\t\t\t\t\t\tthis.emit('pong');\n\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'error':\n\t\t\t\t\t\t\t\t\tvar err = new Error('server error');\n\t\t\t\t\t\t\t\t\terr.code = packet.data;\n\t\t\t\t\t\t\t\t\tthis.onError(err);\n\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'message':\n\t\t\t\t\t\t\t\t\tthis.emit('data', packet.data);\n\t\t\t\t\t\t\t\t\tthis.emit('message', packet.data);\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdebug('packet received with socket readyState \"%s\"', this.readyState);\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\t/**\n      * Called upon handshake completion.\n      *\n      * @param {Object} handshake obj\n      * @api private\n      */\n\n\t\t\t\t\tSocket.prototype.onHandshake = function (data) {\n\t\t\t\t\t\tthis.emit('handshake', data);\n\t\t\t\t\t\tthis.id = data.sid;\n\t\t\t\t\t\tthis.transport.query.sid = data.sid;\n\t\t\t\t\t\tthis.upgrades = this.filterUpgrades(data.upgrades);\n\t\t\t\t\t\tthis.pingInterval = data.pingInterval;\n\t\t\t\t\t\tthis.pingTimeout = data.pingTimeout;\n\t\t\t\t\t\tthis.onOpen();\n\t\t\t\t\t\t// In case open handler closes socket\n\t\t\t\t\t\tif ('closed' == this.readyState) return;\n\t\t\t\t\t\tthis.setPing();\n\n\t\t\t\t\t\t// Prolong liveness of socket on heartbeat\n\t\t\t\t\t\tthis.removeListener('heartbeat', this.onHeartbeat);\n\t\t\t\t\t\tthis.on('heartbeat', this.onHeartbeat);\n\t\t\t\t\t};\n\n\t\t\t\t\t/**\n      * Resets ping timeout.\n      *\n      * @api private\n      */\n\n\t\t\t\t\tSocket.prototype.onHeartbeat = function (timeout) {\n\t\t\t\t\t\tclearTimeout(this.pingTimeoutTimer);\n\t\t\t\t\t\tvar self = this;\n\t\t\t\t\t\tself.pingTimeoutTimer = setTimeout(function () {\n\t\t\t\t\t\t\tif ('closed' == self.readyState) return;\n\t\t\t\t\t\t\tself.onClose('ping timeout');\n\t\t\t\t\t\t}, timeout || self.pingInterval + self.pingTimeout);\n\t\t\t\t\t};\n\n\t\t\t\t\t/**\n      * Pings server every `this.pingInterval` and expects response\n      * within `this.pingTimeout` or closes connection.\n      *\n      * @api private\n      */\n\n\t\t\t\t\tSocket.prototype.setPing = function () {\n\t\t\t\t\t\tvar self = this;\n\t\t\t\t\t\tclearTimeout(self.pingIntervalTimer);\n\t\t\t\t\t\tself.pingIntervalTimer = setTimeout(function () {\n\t\t\t\t\t\t\tdebug('writing ping packet - expecting pong within %sms', self.pingTimeout);\n\t\t\t\t\t\t\tself.ping();\n\t\t\t\t\t\t\tself.onHeartbeat(self.pingTimeout);\n\t\t\t\t\t\t}, self.pingInterval);\n\t\t\t\t\t};\n\n\t\t\t\t\t/**\n      * Sends a ping packet.\n      *\n      * @api private\n      */\n\n\t\t\t\t\tSocket.prototype.ping = function () {\n\t\t\t\t\t\tvar self = this;\n\t\t\t\t\t\tthis.sendPacket('ping', function () {\n\t\t\t\t\t\t\tself.emit('ping');\n\t\t\t\t\t\t});\n\t\t\t\t\t};\n\n\t\t\t\t\t/**\n      * Called on `drain` event\n      *\n      * @api private\n      */\n\n\t\t\t\t\tSocket.prototype.onDrain = function () {\n\t\t\t\t\t\tthis.writeBuffer.splice(0, this.prevBufferLen);\n\n\t\t\t\t\t\t// setting prevBufferLen = 0 is very important\n\t\t\t\t\t\t// for example, when upgrading, upgrade packet is sent over,\n\t\t\t\t\t\t// and a nonzero prevBufferLen could cause problems on `drain`\n\t\t\t\t\t\tthis.prevBufferLen = 0;\n\n\t\t\t\t\t\tif (0 === this.writeBuffer.length) {\n\t\t\t\t\t\t\tthis.emit('drain');\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.flush();\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\t/**\n      * Flush write buffers.\n      *\n      * @api private\n      */\n\n\t\t\t\t\tSocket.prototype.flush = function () {\n\t\t\t\t\t\tif ('closed' != this.readyState && this.transport.writable && !this.upgrading && this.writeBuffer.length) {\n\t\t\t\t\t\t\tdebug('flushing %d packets in socket', this.writeBuffer.length);\n\t\t\t\t\t\t\tthis.transport.send(this.writeBuffer);\n\t\t\t\t\t\t\t// keep track of current length of writeBuffer\n\t\t\t\t\t\t\t// splice writeBuffer and callbackBuffer on `drain`\n\t\t\t\t\t\t\tthis.prevBufferLen = this.writeBuffer.length;\n\t\t\t\t\t\t\tthis.emit('flush');\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\t/**\n      * Sends a message.\n      *\n      * @param {String} message.\n      * @param {Function} callback function.\n      * @param {Object} options.\n      * @return {Socket} for chaining.\n      * @api public\n      */\n\n\t\t\t\t\tSocket.prototype.write = Socket.prototype.send = function (msg, options, fn) {\n\t\t\t\t\t\tthis.sendPacket('message', msg, options, fn);\n\t\t\t\t\t\treturn this;\n\t\t\t\t\t};\n\n\t\t\t\t\t/**\n      * Sends a packet.\n      *\n      * @param {String} packet type.\n      * @param {String} data.\n      * @param {Object} options.\n      * @param {Function} callback function.\n      * @api private\n      */\n\n\t\t\t\t\tSocket.prototype.sendPacket = function (type, data, options, fn) {\n\t\t\t\t\t\tif ('function' == typeof data) {\n\t\t\t\t\t\t\tfn = data;\n\t\t\t\t\t\t\tdata = undefined;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ('function' == typeof options) {\n\t\t\t\t\t\t\tfn = options;\n\t\t\t\t\t\t\toptions = null;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ('closing' == this.readyState || 'closed' == this.readyState) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\toptions = options || {};\n\t\t\t\t\t\toptions.compress = false !== options.compress;\n\n\t\t\t\t\t\tvar packet = {\n\t\t\t\t\t\t\ttype: type,\n\t\t\t\t\t\t\tdata: data,\n\t\t\t\t\t\t\toptions: options\n\t\t\t\t\t\t};\n\t\t\t\t\t\tthis.emit('packetCreate', packet);\n\t\t\t\t\t\tthis.writeBuffer.push(packet);\n\t\t\t\t\t\tif (fn) this.once('flush', fn);\n\t\t\t\t\t\tthis.flush();\n\t\t\t\t\t};\n\n\t\t\t\t\t/**\n      * Closes the connection.\n      *\n      * @api private\n      */\n\n\t\t\t\t\tSocket.prototype.close = function () {\n\t\t\t\t\t\tif ('opening' == this.readyState || 'open' == this.readyState) {\n\t\t\t\t\t\t\tthis.readyState = 'closing';\n\n\t\t\t\t\t\t\tvar self = this;\n\n\t\t\t\t\t\t\tif (this.writeBuffer.length) {\n\t\t\t\t\t\t\t\tthis.once('drain', function () {\n\t\t\t\t\t\t\t\t\tif (this.upgrading) {\n\t\t\t\t\t\t\t\t\t\twaitForUpgrade();\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tclose();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else if (this.upgrading) {\n\t\t\t\t\t\t\t\twaitForUpgrade();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tclose();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction close() {\n\t\t\t\t\t\t\tself.onClose('forced close');\n\t\t\t\t\t\t\tdebug('socket closing - telling transport to close');\n\t\t\t\t\t\t\tself.transport.close();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction cleanupAndClose() {\n\t\t\t\t\t\t\tself.removeListener('upgrade', cleanupAndClose);\n\t\t\t\t\t\t\tself.removeListener('upgradeError', cleanupAndClose);\n\t\t\t\t\t\t\tclose();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction waitForUpgrade() {\n\t\t\t\t\t\t\t// wait for upgrade to finish since we can't send packets while pausing a transport\n\t\t\t\t\t\t\tself.once('upgrade', cleanupAndClose);\n\t\t\t\t\t\t\tself.once('upgradeError', cleanupAndClose);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn this;\n\t\t\t\t\t};\n\n\t\t\t\t\t/**\n      * Called upon transport error\n      *\n      * @api private\n      */\n\n\t\t\t\t\tSocket.prototype.onError = function (err) {\n\t\t\t\t\t\tdebug('socket error %j', err);\n\t\t\t\t\t\tSocket.priorWebsocketSuccess = false;\n\t\t\t\t\t\tthis.emit('error', err);\n\t\t\t\t\t\tthis.onClose('transport error', err);\n\t\t\t\t\t};\n\n\t\t\t\t\t/**\n      * Called upon transport close.\n      *\n      * @api private\n      */\n\n\t\t\t\t\tSocket.prototype.onClose = function (reason, desc) {\n\t\t\t\t\t\tif ('opening' == this.readyState || 'open' == this.readyState || 'closing' == this.readyState) {\n\t\t\t\t\t\t\tdebug('socket close with reason: \"%s\"', reason);\n\t\t\t\t\t\t\tvar self = this;\n\n\t\t\t\t\t\t\t// clear timers\n\t\t\t\t\t\t\tclearTimeout(this.pingIntervalTimer);\n\t\t\t\t\t\t\tclearTimeout(this.pingTimeoutTimer);\n\n\t\t\t\t\t\t\t// stop event from firing again for transport\n\t\t\t\t\t\t\tthis.transport.removeAllListeners('close');\n\n\t\t\t\t\t\t\t// ensure transport won't stay open\n\t\t\t\t\t\t\tthis.transport.close();\n\n\t\t\t\t\t\t\t// ignore further transport communication\n\t\t\t\t\t\t\tthis.transport.removeAllListeners();\n\n\t\t\t\t\t\t\t// set ready state\n\t\t\t\t\t\t\tthis.readyState = 'closed';\n\n\t\t\t\t\t\t\t// clear session id\n\t\t\t\t\t\t\tthis.id = null;\n\n\t\t\t\t\t\t\t// emit close event\n\t\t\t\t\t\t\tthis.emit('close', reason, desc);\n\n\t\t\t\t\t\t\t// clean buffers after, so users can still\n\t\t\t\t\t\t\t// grab the buffers on `close` event\n\t\t\t\t\t\t\tself.writeBuffer = [];\n\t\t\t\t\t\t\tself.prevBufferLen = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\t/**\n      * Filters upgrades, returning only those matching client transports.\n      *\n      * @param {Array} server upgrades\n      * @api private\n      *\n      */\n\n\t\t\t\t\tSocket.prototype.filterUpgrades = function (upgrades) {\n\t\t\t\t\t\tvar filteredUpgrades = [];\n\t\t\t\t\t\tfor (var i = 0, j = upgrades.length; i < j; i++) {\n\t\t\t\t\t\t\tif (\\x7eindex(this.transports, upgrades[i])) filteredUpgrades.push(upgrades[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn filteredUpgrades;\n\t\t\t\t\t};\n\t\t\t\t}).call(this, typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {});\n\t\t\t}, {\n\t\t\t\t\"./transport\": 4,\n\t\t\t\t\"./transports\": 5,\n\t\t\t\t\"component-emitter\": 15,\n\t\t\t\t\"debug\": 17,\n\t\t\t\t\"engine.io-parser\": 19,\n\t\t\t\t\"indexof\": 23,\n\t\t\t\t\"parsejson\": 26,\n\t\t\t\t\"parseqs\": 27,\n\t\t\t\t\"parseuri\": 28\n\t\t\t}],\n\t\t\t4: [function (_dereq_, module, exports) {\n\t\t\t\t/**\n     * Module dependencies.\n     */\n\n\t\t\t\tvar parser = _dereq_('engine.io-parser');\n\t\t\t\tvar Emitter = _dereq_('component-emitter');\n\n\t\t\t\t/**\n     * Module exports.\n     */\n\n\t\t\t\tmodule.exports = Transport;\n\n\t\t\t\t/**\n     * Transport abstract constructor.\n     *\n     * @param {Object} options.\n     * @api private\n     */\n\n\t\t\t\tfunction Transport(opts) {\n\t\t\t\t\tthis.path = opts.path;\n\t\t\t\t\tthis.hostname = opts.hostname;\n\t\t\t\t\tthis.port = opts.port;\n\t\t\t\t\tthis.secure = opts.secure;\n\t\t\t\t\tthis.query = opts.query;\n\t\t\t\t\tthis.timestampParam = opts.timestampParam;\n\t\t\t\t\tthis.timestampRequests = opts.timestampRequests;\n\t\t\t\t\tthis.readyState = '';\n\t\t\t\t\tthis.agent = opts.agent || false;\n\t\t\t\t\tthis.socket = opts.socket;\n\t\t\t\t\tthis.enablesXDR = opts.enablesXDR;\n\n\t\t\t\t\t// SSL options for Node.js client\n\t\t\t\t\tthis.pfx = opts.pfx;\n\t\t\t\t\tthis.key = opts.key;\n\t\t\t\t\tthis.passphrase = opts.passphrase;\n\t\t\t\t\tthis.cert = opts.cert;\n\t\t\t\t\tthis.ca = opts.ca;\n\t\t\t\t\tthis.ciphers = opts.ciphers;\n\t\t\t\t\tthis.rejectUnauthorized = opts.rejectUnauthorized;\n\n\t\t\t\t\t// other options for Node.js client\n\t\t\t\t\tthis.extraHeaders = opts.extraHeaders;\n\t\t\t\t}\n\n\t\t\t\t/**\n     * Mix in `Emitter`.\n     */\n\n\t\t\t\tEmitter(Transport.prototype);\n\n\t\t\t\t/**\n     * Emits an error.\n     *\n     * @param {String} str\n     * @return {Transport} for chaining\n     * @api public\n     */\n\n\t\t\t\tTransport.prototype.onError = function (msg, desc) {\n\t\t\t\t\tvar err = new Error(msg);\n\t\t\t\t\terr.type = 'TransportError';\n\t\t\t\t\terr.description = desc;\n\t\t\t\t\tthis.emit('error', err);\n\t\t\t\t\treturn this;\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Opens the transport.\n     *\n     * @api public\n     */\n\n\t\t\t\tTransport.prototype.open = function () {\n\t\t\t\t\tif ('closed' == this.readyState || '' == this.readyState) {\n\t\t\t\t\t\tthis.readyState = 'opening';\n\t\t\t\t\t\tthis.doOpen();\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this;\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Closes the transport.\n     *\n     * @api private\n     */\n\n\t\t\t\tTransport.prototype.close = function () {\n\t\t\t\t\tif ('opening' == this.readyState || 'open' == this.readyState) {\n\t\t\t\t\t\tthis.doClose();\n\t\t\t\t\t\tthis.onClose();\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this;\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Sends multiple packets.\n     *\n     * @param {Array} packets\n     * @api private\n     */\n\n\t\t\t\tTransport.prototype.send = function (packets) {\n\t\t\t\t\tif ('open' == this.readyState) {\n\t\t\t\t\t\tthis.write(packets);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow new Error('Transport not open');\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Called upon open\n     *\n     * @api private\n     */\n\n\t\t\t\tTransport.prototype.onOpen = function () {\n\t\t\t\t\tthis.readyState = 'open';\n\t\t\t\t\tthis.writable = true;\n\t\t\t\t\tthis.emit('open');\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Called with data.\n     *\n     * @param {String} data\n     * @api private\n     */\n\n\t\t\t\tTransport.prototype.onData = function (data) {\n\t\t\t\t\tvar packet = parser.decodePacket(data, this.socket.binaryType);\n\t\t\t\t\tthis.onPacket(packet);\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Called with a decoded packet.\n     */\n\n\t\t\t\tTransport.prototype.onPacket = function (packet) {\n\t\t\t\t\tthis.emit('packet', packet);\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Called upon close.\n     *\n     * @api private\n     */\n\n\t\t\t\tTransport.prototype.onClose = function () {\n\t\t\t\t\tthis.readyState = 'closed';\n\t\t\t\t\tthis.emit('close');\n\t\t\t\t};\n\t\t\t}, {\n\t\t\t\t\"component-emitter\": 15,\n\t\t\t\t\"engine.io-parser\": 19\n\t\t\t}],\n\t\t\t5: [function (_dereq_, module, exports) {\n\t\t\t\t(function (global) {\n\t\t\t\t\t/**\n      * Module dependencies\n      */\n\n\t\t\t\t\tvar XMLHttpRequest = _dereq_('xmlhttprequest-ssl');\n\t\t\t\t\tvar XHR = _dereq_('./polling-xhr');\n\t\t\t\t\tvar JSONP = _dereq_('./polling-jsonp');\n\t\t\t\t\tvar websocket = _dereq_('./websocket');\n\n\t\t\t\t\t/**\n      * Export transports.\n      */\n\n\t\t\t\t\texports.polling = polling;\n\t\t\t\t\texports.websocket = websocket;\n\n\t\t\t\t\t/**\n      * Polling transport polymorphic constructor.\n      * Decides on xhr vs jsonp based on feature detection.\n      *\n      * @api private\n      */\n\n\t\t\t\t\tfunction polling(opts) {\n\t\t\t\t\t\tvar xhr;\n\t\t\t\t\t\tvar xd = false;\n\t\t\t\t\t\tvar xs = false;\n\t\t\t\t\t\tvar jsonp = false !== opts.jsonp;\n\n\t\t\t\t\t\tif (global.location) {\n\t\t\t\t\t\t\tvar isSSL = 'https:' == location.protocol;\n\t\t\t\t\t\t\tvar port = location.port;\n\n\t\t\t\t\t\t\t// some user agents have empty `location.port`\n\t\t\t\t\t\t\tif (!port) {\n\t\t\t\t\t\t\t\tport = isSSL ? 443 : 80;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\txd = opts.hostname != location.hostname || port != opts.port;\n\t\t\t\t\t\t\txs = opts.secure != isSSL;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\topts.xdomain = xd;\n\t\t\t\t\t\topts.xscheme = xs;\n\t\t\t\t\t\txhr = new XMLHttpRequest(opts);\n\n\t\t\t\t\t\tif ('open' in xhr && !opts.forceJSONP) {\n\t\t\t\t\t\t\treturn new XHR(opts);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (!jsonp) throw new Error('JSONP disabled');\n\t\t\t\t\t\t\treturn new JSONP(opts);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}).call(this, typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {});\n\t\t\t}, {\n\t\t\t\t\"./polling-jsonp\": 6,\n\t\t\t\t\"./polling-xhr\": 7,\n\t\t\t\t\"./websocket\": 9,\n\t\t\t\t\"xmlhttprequest-ssl\": 10\n\t\t\t}],\n\t\t\t6: [function (_dereq_, module, exports) {\n\t\t\t\t(function (global) {\n\n\t\t\t\t\t/**\n      * Module requirements.\n      */\n\n\t\t\t\t\tvar Polling = _dereq_('./polling');\n\t\t\t\t\tvar inherit = _dereq_('component-inherit');\n\n\t\t\t\t\t/**\n      * Module exports.\n      */\n\n\t\t\t\t\tmodule.exports = JSONPPolling;\n\n\t\t\t\t\t/**\n      * Cached regular expressions.\n      */\n\n\t\t\t\t\tvar rNewline = /\\n/g;\n\t\t\t\t\tvar rEscapedNewline = /\\\\n/g;\n\n\t\t\t\t\t/**\n      * Global JSONP callbacks.\n      */\n\n\t\t\t\t\tvar callbacks;\n\n\t\t\t\t\t/**\n      * Callbacks count.\n      */\n\n\t\t\t\t\tvar index = 0;\n\n\t\t\t\t\t/**\n      * Noop.\n      */\n\n\t\t\t\t\tfunction empty() {}\n\n\t\t\t\t\t/**\n      * JSONP Polling constructor.\n      *\n      * @param {Object} opts.\n      * @api public\n      */\n\n\t\t\t\t\tfunction JSONPPolling(opts) {\n\t\t\t\t\t\tPolling.call(this, opts);\n\n\t\t\t\t\t\tthis.query = this.query || {};\n\n\t\t\t\t\t\t// define global callbacks array if not present\n\t\t\t\t\t\t// we do this here (lazily) to avoid unneeded global pollution\n\t\t\t\t\t\tif (!callbacks) {\n\t\t\t\t\t\t\t// we need to consider multiple engines in the same page\n\t\t\t\t\t\t\tif (!global.___eio) global.___eio = [];\n\t\t\t\t\t\t\tcallbacks = global.___eio;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// callback identifier\n\t\t\t\t\t\tthis.index = callbacks.length;\n\n\t\t\t\t\t\t// add callback to jsonp global\n\t\t\t\t\t\tvar self = this;\n\t\t\t\t\t\tcallbacks.push(function (msg) {\n\t\t\t\t\t\t\tself.onData(msg);\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t// append to query string\n\t\t\t\t\t\tthis.query.j = this.index;\n\n\t\t\t\t\t\t// prevent spurious errors from being emitted when the window is unloaded\n\t\t\t\t\t\tif (global.document && global.addEventListener) {\n\t\t\t\t\t\t\tglobal.addEventListener('beforeunload', function () {\n\t\t\t\t\t\t\t\tif (self.script) self.script.onerror = empty;\n\t\t\t\t\t\t\t}, false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t/**\n      * Inherits from Polling.\n      */\n\n\t\t\t\t\tinherit(JSONPPolling, Polling);\n\n\t\t\t\t\t/*\n      * JSONP only supports binary as base64 encoded strings\n      */\n\n\t\t\t\t\tJSONPPolling.prototype.supportsBinary = false;\n\n\t\t\t\t\t/**\n      * Closes the socket.\n      *\n      * @api private\n      */\n\n\t\t\t\t\tJSONPPolling.prototype.doClose = function () {\n\t\t\t\t\t\tif (this.script) {\n\t\t\t\t\t\t\tthis.script.parentNode.removeChild(this.script);\n\t\t\t\t\t\t\tthis.script = null;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (this.form) {\n\t\t\t\t\t\t\tthis.form.parentNode.removeChild(this.form);\n\t\t\t\t\t\t\tthis.form = null;\n\t\t\t\t\t\t\tthis.iframe = null;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tPolling.prototype.doClose.call(this);\n\t\t\t\t\t};\n\n\t\t\t\t\t/**\n      * Starts a poll cycle.\n      *\n      * @api private\n      */\n\n\t\t\t\t\tJSONPPolling.prototype.doPoll = function () {\n\t\t\t\t\t\tvar self = this;\n\t\t\t\t\t\tvar script = document.createElement('script');\n\n\t\t\t\t\t\tif (this.script) {\n\t\t\t\t\t\t\tthis.script.parentNode.removeChild(this.script);\n\t\t\t\t\t\t\tthis.script = null;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tscript.async = true;\n\t\t\t\t\t\tscript.src = this.uri();\n\t\t\t\t\t\tscript.onerror = function (e) {\n\t\t\t\t\t\t\tself.onError('jsonp poll error', e);\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tvar insertAt = document.getElementsByTagName('script')[0];\n\t\t\t\t\t\tif (insertAt) {\n\t\t\t\t\t\t\tinsertAt.parentNode.insertBefore(script, insertAt);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t(document.head || document.body).appendChild(script);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.script = script;\n\n\t\t\t\t\t\tvar isUAgecko = 'undefined' != typeof navigator && /gecko/i.test(navigator.userAgent);\n\n\t\t\t\t\t\tif (isUAgecko) {\n\t\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\t\tvar iframe = document.createElement('iframe');\n\t\t\t\t\t\t\t\tdocument.body.appendChild(iframe);\n\t\t\t\t\t\t\t\tdocument.body.removeChild(iframe);\n\t\t\t\t\t\t\t}, 100);\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\t/**\n      * Writes with a hidden iframe.\n      *\n      * @param {String} data to send\n      * @param {Function} called upon flush.\n      * @api private\n      */\n\n\t\t\t\t\tJSONPPolling.prototype.doWrite = function (data, fn) {\n\t\t\t\t\t\tvar self = this;\n\n\t\t\t\t\t\tif (!this.form) {\n\t\t\t\t\t\t\tvar form = document.createElement('form');\n\t\t\t\t\t\t\tvar area = document.createElement('textarea');\n\t\t\t\t\t\t\tvar id = this.iframeId = 'eio_iframe_' + this.index;\n\t\t\t\t\t\t\tvar iframe;\n\n\t\t\t\t\t\t\tform.className = 'socketio';\n\t\t\t\t\t\t\tform.style.position = 'absolute';\n\t\t\t\t\t\t\tform.style.top = '-1000px';\n\t\t\t\t\t\t\tform.style.left = '-1000px';\n\t\t\t\t\t\t\tform.target = id;\n\t\t\t\t\t\t\tform.method = 'POST';\n\t\t\t\t\t\t\tform.setAttribute('accept-charset', 'utf-8');\n\t\t\t\t\t\t\tarea.name = 'd';\n\t\t\t\t\t\t\tform.appendChild(area);\n\t\t\t\t\t\t\tdocument.body.appendChild(form);\n\n\t\t\t\t\t\t\tthis.form = form;\n\t\t\t\t\t\t\tthis.area = area;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.form.action = this.uri();\n\n\t\t\t\t\t\tfunction complete() {\n\t\t\t\t\t\t\tinitIframe();\n\t\t\t\t\t\t\tfn();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction initIframe() {\n\t\t\t\t\t\t\tif (self.iframe) {\n\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\tself.form.removeChild(self.iframe);\n\t\t\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t\t\tself.onError('jsonp polling iframe removal error', e);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t// ie6 dynamic iframes with target=\"\" support (thanks Chris Lambacher)\n\t\t\t\t\t\t\t\tvar html = '<iframe src=\"javascript:0\" name=\"' + self.iframeId + '\">';\n\t\t\t\t\t\t\t\tiframe = document.createElement(html);\n\t\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t\tiframe = document.createElement('iframe');\n\t\t\t\t\t\t\t\tiframe.name = self.iframeId;\n\t\t\t\t\t\t\t\tiframe.src = 'javascript:0';\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tiframe.id = self.iframeId;\n\n\t\t\t\t\t\t\tself.form.appendChild(iframe);\n\t\t\t\t\t\t\tself.iframe = iframe;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tinitIframe();\n\n\t\t\t\t\t\t// escape \\n to prevent it from being converted into \\r\\n by some UAs\n\t\t\t\t\t\t// double escaping is required for escaped new lines because unescaping of new lines can be done safely on server-side\n\t\t\t\t\t\tdata = data.replace(rEscapedNewline, '\\\\\\n');\n\t\t\t\t\t\tthis.area.value = data.replace(rNewline, '\\\\n');\n\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tthis.form.submit();\n\t\t\t\t\t\t} catch (e) {}\n\n\t\t\t\t\t\tif (this.iframe.attachEvent) {\n\t\t\t\t\t\t\tthis.iframe.onreadystatechange = function () {\n\t\t\t\t\t\t\t\tif (self.iframe.readyState == 'complete') {\n\t\t\t\t\t\t\t\t\tcomplete();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.iframe.onload = complete;\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t}).call(this, typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {});\n\t\t\t}, {\n\t\t\t\t\"./polling\": 8,\n\t\t\t\t\"component-inherit\": 16\n\t\t\t}],\n\t\t\t7: [function (_dereq_, module, exports) {\n\t\t\t\t(function (global) {\n\t\t\t\t\t/**\n      * Module requirements.\n      */\n\n\t\t\t\t\tvar XMLHttpRequest = _dereq_('xmlhttprequest-ssl');\n\t\t\t\t\tvar Polling = _dereq_('./polling');\n\t\t\t\t\tvar Emitter = _dereq_('component-emitter');\n\t\t\t\t\tvar inherit = _dereq_('component-inherit');\n\t\t\t\t\tvar debug = _dereq_('debug')('engine.io-client:polling-xhr');\n\n\t\t\t\t\t/**\n      * Module exports.\n      */\n\n\t\t\t\t\tmodule.exports = XHR;\n\t\t\t\t\tmodule.exports.Request = Request;\n\n\t\t\t\t\t/**\n      * Empty function\n      */\n\n\t\t\t\t\tfunction empty() {}\n\n\t\t\t\t\t/**\n      * XHR Polling constructor.\n      *\n      * @param {Object} opts\n      * @api public\n      */\n\n\t\t\t\t\tfunction XHR(opts) {\n\t\t\t\t\t\tPolling.call(this, opts);\n\n\t\t\t\t\t\tif (global.location) {\n\t\t\t\t\t\t\tvar isSSL = 'https:' == location.protocol;\n\t\t\t\t\t\t\tvar port = location.port;\n\n\t\t\t\t\t\t\t// some user agents have empty `location.port`\n\t\t\t\t\t\t\tif (!port) {\n\t\t\t\t\t\t\t\tport = isSSL ? 443 : 80;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis.xd = opts.hostname != global.location.hostname || port != opts.port;\n\t\t\t\t\t\t\tthis.xs = opts.secure != isSSL;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.extraHeaders = opts.extraHeaders;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t/**\n      * Inherits from Polling.\n      */\n\n\t\t\t\t\tinherit(XHR, Polling);\n\n\t\t\t\t\t/**\n      * XHR supports binary\n      */\n\n\t\t\t\t\tXHR.prototype.supportsBinary = true;\n\n\t\t\t\t\t/**\n      * Creates a request.\n      *\n      * @param {String} method\n      * @api private\n      */\n\n\t\t\t\t\tXHR.prototype.request = function (opts) {\n\t\t\t\t\t\topts = opts || {};\n\t\t\t\t\t\topts.uri = this.uri();\n\t\t\t\t\t\topts.xd = this.xd;\n\t\t\t\t\t\topts.xs = this.xs;\n\t\t\t\t\t\topts.agent = this.agent || false;\n\t\t\t\t\t\topts.supportsBinary = this.supportsBinary;\n\t\t\t\t\t\topts.enablesXDR = this.enablesXDR;\n\n\t\t\t\t\t\t// SSL options for Node.js client\n\t\t\t\t\t\topts.pfx = this.pfx;\n\t\t\t\t\t\topts.key = this.key;\n\t\t\t\t\t\topts.passphrase = this.passphrase;\n\t\t\t\t\t\topts.cert = this.cert;\n\t\t\t\t\t\topts.ca = this.ca;\n\t\t\t\t\t\topts.ciphers = this.ciphers;\n\t\t\t\t\t\topts.rejectUnauthorized = this.rejectUnauthorized;\n\n\t\t\t\t\t\t// other options for Node.js client\n\t\t\t\t\t\topts.extraHeaders = this.extraHeaders;\n\n\t\t\t\t\t\treturn new Request(opts);\n\t\t\t\t\t};\n\n\t\t\t\t\t/**\n      * Sends data.\n      *\n      * @param {String} data to send.\n      * @param {Function} called upon flush.\n      * @api private\n      */\n\n\t\t\t\t\tXHR.prototype.doWrite = function (data, fn) {\n\t\t\t\t\t\tvar isBinary = typeof data !== 'string' && data !== undefined;\n\t\t\t\t\t\tvar req = this.request({\n\t\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\t\tdata: data,\n\t\t\t\t\t\t\tisBinary: isBinary\n\t\t\t\t\t\t});\n\t\t\t\t\t\tvar self = this;\n\t\t\t\t\t\treq.on('success', fn);\n\t\t\t\t\t\treq.on('error', function (err) {\n\t\t\t\t\t\t\tself.onError('xhr post error', err);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.sendXhr = req;\n\t\t\t\t\t};\n\n\t\t\t\t\t/**\n      * Starts a poll cycle.\n      *\n      * @api private\n      */\n\n\t\t\t\t\tXHR.prototype.doPoll = function () {\n\t\t\t\t\t\tdebug('xhr poll');\n\t\t\t\t\t\tvar req = this.request();\n\t\t\t\t\t\tvar self = this;\n\t\t\t\t\t\treq.on('data', function (data) {\n\t\t\t\t\t\t\tself.onData(data);\n\t\t\t\t\t\t});\n\t\t\t\t\t\treq.on('error', function (err) {\n\t\t\t\t\t\t\tself.onError('xhr poll error', err);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.pollXhr = req;\n\t\t\t\t\t};\n\n\t\t\t\t\t/**\n      * Request constructor\n      *\n      * @param {Object} options\n      * @api public\n      */\n\n\t\t\t\t\tfunction Request(opts) {\n\t\t\t\t\t\tthis.method = opts.method || 'GET';\n\t\t\t\t\t\tthis.uri = opts.uri;\n\t\t\t\t\t\tthis.xd = !!opts.xd;\n\t\t\t\t\t\tthis.xs = !!opts.xs;\n\t\t\t\t\t\tthis.async = false !== opts.async;\n\t\t\t\t\t\tthis.data = undefined != opts.data ? opts.data : null;\n\t\t\t\t\t\tthis.agent = opts.agent;\n\t\t\t\t\t\tthis.isBinary = opts.isBinary;\n\t\t\t\t\t\tthis.supportsBinary = opts.supportsBinary;\n\t\t\t\t\t\tthis.enablesXDR = opts.enablesXDR;\n\n\t\t\t\t\t\t// SSL options for Node.js client\n\t\t\t\t\t\tthis.pfx = opts.pfx;\n\t\t\t\t\t\tthis.key = opts.key;\n\t\t\t\t\t\tthis.passphrase = opts.passphrase;\n\t\t\t\t\t\tthis.cert = opts.cert;\n\t\t\t\t\t\tthis.ca = opts.ca;\n\t\t\t\t\t\tthis.ciphers = opts.ciphers;\n\t\t\t\t\t\tthis.rejectUnauthorized = opts.rejectUnauthorized;\n\n\t\t\t\t\t\t// other options for Node.js client\n\t\t\t\t\t\tthis.extraHeaders = opts.extraHeaders;\n\n\t\t\t\t\t\tthis.create();\n\t\t\t\t\t}\n\n\t\t\t\t\t/**\n      * Mix in `Emitter`.\n      */\n\n\t\t\t\t\tEmitter(Request.prototype);\n\n\t\t\t\t\t/**\n      * Creates the XHR object and sends the request.\n      *\n      * @api private\n      */\n\n\t\t\t\t\tRequest.prototype.create = function () {\n\t\t\t\t\t\tvar opts = {\n\t\t\t\t\t\t\tagent: this.agent,\n\t\t\t\t\t\t\txdomain: this.xd,\n\t\t\t\t\t\t\txscheme: this.xs,\n\t\t\t\t\t\t\tenablesXDR: this.enablesXDR\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t// SSL options for Node.js client\n\t\t\t\t\t\topts.pfx = this.pfx;\n\t\t\t\t\t\topts.key = this.key;\n\t\t\t\t\t\topts.passphrase = this.passphrase;\n\t\t\t\t\t\topts.cert = this.cert;\n\t\t\t\t\t\topts.ca = this.ca;\n\t\t\t\t\t\topts.ciphers = this.ciphers;\n\t\t\t\t\t\topts.rejectUnauthorized = this.rejectUnauthorized;\n\n\t\t\t\t\t\tvar xhr = this.xhr = new XMLHttpRequest(opts);\n\t\t\t\t\t\tvar self = this;\n\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tdebug('xhr open %s: %s', this.method, this.uri);\n\t\t\t\t\t\t\txhr.open(this.method, this.uri, this.async);\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tif (this.extraHeaders) {\n\t\t\t\t\t\t\t\t\txhr.setDisableHeaderCheck(true);\n\t\t\t\t\t\t\t\t\tfor (var i in this.extraHeaders) {\n\t\t\t\t\t\t\t\t\t\tif (this.extraHeaders.hasOwnProperty(i)) {\n\t\t\t\t\t\t\t\t\t\t\txhr.setRequestHeader(i, this.extraHeaders[i]);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} catch (e) {}\n\t\t\t\t\t\t\tif (this.supportsBinary) {\n\t\t\t\t\t\t\t\t// This has to be done after open because Firefox is stupid\n\t\t\t\t\t\t\t\t// http://stackoverflow.com/questions/13216903/get-binary-data-with-xmlhttprequest-in-a-firefox-extension\n\t\t\t\t\t\t\t\txhr.responseType = 'arraybuffer';\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ('POST' == this.method) {\n\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\tif (this.isBinary) {\n\t\t\t\t\t\t\t\t\t\txhr.setRequestHeader('Content-type', 'application/octet-stream');\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\txhr.setRequestHeader('Content-type', 'text/plain;charset=UTF-8');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} catch (e) {}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// ie6 check\n\t\t\t\t\t\t\tif ('withCredentials' in xhr) {\n\t\t\t\t\t\t\t\txhr.withCredentials = true;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (this.hasXDR()) {\n\t\t\t\t\t\t\t\txhr.onload = function () {\n\t\t\t\t\t\t\t\t\tself.onLoad();\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\txhr.onerror = function () {\n\t\t\t\t\t\t\t\t\tself.onError(xhr.responseText);\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\txhr.onreadystatechange = function () {\n\t\t\t\t\t\t\t\t\tif (4 != xhr.readyState) return;\n\t\t\t\t\t\t\t\t\tif (200 == xhr.status || 1223 == xhr.status) {\n\t\t\t\t\t\t\t\t\t\tself.onLoad();\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t// make sure the `error` event handler that's user-set\n\t\t\t\t\t\t\t\t\t\t// does not throw in the same tick and gets caught here\n\t\t\t\t\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\t\t\t\t\tself.onError(xhr.status);\n\t\t\t\t\t\t\t\t\t\t}, 0);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tdebug('xhr data %s', this.data);\n\t\t\t\t\t\t\txhr.send(this.data);\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t// Need to defer since .create() is called directly fhrom the constructor\n\t\t\t\t\t\t\t// and thus the 'error' event can only be only bound *after* this exception\n\t\t\t\t\t\t\t// occurs.  Therefore, also, we cannot throw here at all.\n\t\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\t\tself.onError(e);\n\t\t\t\t\t\t\t}, 0);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (global.document) {\n\t\t\t\t\t\t\tthis.index = Request.requestsCount++;\n\t\t\t\t\t\t\tRequest.requests[this.index] = this;\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\t/**\n      * Called upon successful response.\n      *\n      * @api private\n      */\n\n\t\t\t\t\tRequest.prototype.onSuccess = function () {\n\t\t\t\t\t\tthis.emit('success');\n\t\t\t\t\t\tthis.cleanup();\n\t\t\t\t\t};\n\n\t\t\t\t\t/**\n      * Called if we have data.\n      *\n      * @api private\n      */\n\n\t\t\t\t\tRequest.prototype.onData = function (data) {\n\t\t\t\t\t\tthis.emit('data', data);\n\t\t\t\t\t\tthis.onSuccess();\n\t\t\t\t\t};\n\n\t\t\t\t\t/**\n      * Called upon error.\n      *\n      * @api private\n      */\n\n\t\t\t\t\tRequest.prototype.onError = function (err) {\n\t\t\t\t\t\tthis.emit('error', err);\n\t\t\t\t\t\tthis.cleanup(true);\n\t\t\t\t\t};\n\n\t\t\t\t\t/**\n      * Cleans up house.\n      *\n      * @api private\n      */\n\n\t\t\t\t\tRequest.prototype.cleanup = function (fromError) {\n\t\t\t\t\t\tif ('undefined' == typeof this.xhr || null === this.xhr) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// xmlhttprequest\n\t\t\t\t\t\tif (this.hasXDR()) {\n\t\t\t\t\t\t\tthis.xhr.onload = this.xhr.onerror = empty;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.xhr.onreadystatechange = empty;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (fromError) {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tthis.xhr.abort();\n\t\t\t\t\t\t\t} catch (e) {}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (global.document) {\n\t\t\t\t\t\t\tdelete Request.requests[this.index];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.xhr = null;\n\t\t\t\t\t};\n\n\t\t\t\t\t/**\n      * Called upon load.\n      *\n      * @api private\n      */\n\n\t\t\t\t\tRequest.prototype.onLoad = function () {\n\t\t\t\t\t\tvar data;\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tvar contentType;\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tcontentType = this.xhr.getResponseHeader('Content-Type').split(';')[0];\n\t\t\t\t\t\t\t} catch (e) {}\n\t\t\t\t\t\t\tif (contentType === 'application/octet-stream') {\n\t\t\t\t\t\t\t\tdata = this.xhr.response;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif (!this.supportsBinary) {\n\t\t\t\t\t\t\t\t\tdata = this.xhr.responseText;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\tdata = String.fromCharCode.apply(null, new Uint8Array(this.xhr.response));\n\t\t\t\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t\t\t\tvar ui8Arr = new Uint8Array(this.xhr.response);\n\t\t\t\t\t\t\t\t\t\tvar dataArray = [];\n\t\t\t\t\t\t\t\t\t\tfor (var idx = 0, length = ui8Arr.length; idx < length; idx++) {\n\t\t\t\t\t\t\t\t\t\t\tdataArray.push(ui8Arr[idx]);\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tdata = String.fromCharCode.apply(null, dataArray);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\tthis.onError(e);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (null != data) {\n\t\t\t\t\t\t\tthis.onData(data);\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\t/**\n      * Check if it has XDomainRequest.\n      *\n      * @api private\n      */\n\n\t\t\t\t\tRequest.prototype.hasXDR = function () {\n\t\t\t\t\t\treturn 'undefined' !== typeof global.XDomainRequest && !this.xs && this.enablesXDR;\n\t\t\t\t\t};\n\n\t\t\t\t\t/**\n      * Aborts the request.\n      *\n      * @api public\n      */\n\n\t\t\t\t\tRequest.prototype.abort = function () {\n\t\t\t\t\t\tthis.cleanup();\n\t\t\t\t\t};\n\n\t\t\t\t\t/**\n      * Aborts pending requests when unloading the window. This is needed to prevent\n      * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n      * emitted.\n      */\n\n\t\t\t\t\tif (global.document) {\n\t\t\t\t\t\tRequest.requestsCount = 0;\n\t\t\t\t\t\tRequest.requests = {};\n\t\t\t\t\t\tif (global.attachEvent) {\n\t\t\t\t\t\t\tglobal.attachEvent('onunload', unloadHandler);\n\t\t\t\t\t\t} else if (global.addEventListener) {\n\t\t\t\t\t\t\tglobal.addEventListener('beforeunload', unloadHandler, false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tfunction unloadHandler() {\n\t\t\t\t\t\tfor (var i in Request.requests) {\n\t\t\t\t\t\t\tif (Request.requests.hasOwnProperty(i)) {\n\t\t\t\t\t\t\t\tRequest.requests[i].abort();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}).call(this, typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {});\n\t\t\t}, {\n\t\t\t\t\"./polling\": 8,\n\t\t\t\t\"component-emitter\": 15,\n\t\t\t\t\"component-inherit\": 16,\n\t\t\t\t\"debug\": 17,\n\t\t\t\t\"xmlhttprequest-ssl\": 10\n\t\t\t}],\n\t\t\t8: [function (_dereq_, module, exports) {\n\t\t\t\t/**\n     * Module dependencies.\n     */\n\n\t\t\t\tvar Transport = _dereq_('../transport');\n\t\t\t\tvar parseqs = _dereq_('parseqs');\n\t\t\t\tvar parser = _dereq_('engine.io-parser');\n\t\t\t\tvar inherit = _dereq_('component-inherit');\n\t\t\t\tvar yeast = _dereq_('yeast');\n\t\t\t\tvar debug = _dereq_('debug')('engine.io-client:polling');\n\n\t\t\t\t/**\n     * Module exports.\n     */\n\n\t\t\t\tmodule.exports = Polling;\n\n\t\t\t\t/**\n     * Is XHR2 supported?\n     */\n\n\t\t\t\tvar hasXHR2 = function () {\n\t\t\t\t\tvar XMLHttpRequest = _dereq_('xmlhttprequest-ssl');\n\t\t\t\t\tvar xhr = new XMLHttpRequest({\n\t\t\t\t\t\txdomain: false\n\t\t\t\t\t});\n\t\t\t\t\treturn null != xhr.responseType;\n\t\t\t\t}();\n\n\t\t\t\t/**\n     * Polling interface.\n     *\n     * @param {Object} opts\n     * @api private\n     */\n\n\t\t\t\tfunction Polling(opts) {\n\t\t\t\t\tvar forceBase64 = opts && opts.forceBase64;\n\t\t\t\t\tif (!hasXHR2 || forceBase64) {\n\t\t\t\t\t\tthis.supportsBinary = false;\n\t\t\t\t\t}\n\t\t\t\t\tTransport.call(this, opts);\n\t\t\t\t}\n\n\t\t\t\t/**\n     * Inherits from Transport.\n     */\n\n\t\t\t\tinherit(Polling, Transport);\n\n\t\t\t\t/**\n     * Transport name.\n     */\n\n\t\t\t\tPolling.prototype.name = 'polling';\n\n\t\t\t\t/**\n     * Opens the socket (triggers polling). We write a PING message to determine\n     * when the transport is open.\n     *\n     * @api private\n     */\n\n\t\t\t\tPolling.prototype.doOpen = function () {\n\t\t\t\t\tthis.poll();\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Pauses polling.\n     *\n     * @param {Function} callback upon buffers are flushed and transport is paused\n     * @api private\n     */\n\n\t\t\t\tPolling.prototype.pause = function (onPause) {\n\t\t\t\t\tvar pending = 0;\n\t\t\t\t\tvar self = this;\n\n\t\t\t\t\tthis.readyState = 'pausing';\n\n\t\t\t\t\tfunction pause() {\n\t\t\t\t\t\tdebug('paused');\n\t\t\t\t\t\tself.readyState = 'paused';\n\t\t\t\t\t\tonPause();\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.polling || !this.writable) {\n\t\t\t\t\t\tvar total = 0;\n\n\t\t\t\t\t\tif (this.polling) {\n\t\t\t\t\t\t\tdebug('we are currently polling - waiting to pause');\n\t\t\t\t\t\t\ttotal++;\n\t\t\t\t\t\t\tthis.once('pollComplete', function () {\n\t\t\t\t\t\t\t\tdebug('pre-pause polling complete');\n\t\t\t\t\t\t\t\t--total || pause();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (!this.writable) {\n\t\t\t\t\t\t\tdebug('we are currently writing - waiting to pause');\n\t\t\t\t\t\t\ttotal++;\n\t\t\t\t\t\t\tthis.once('drain', function () {\n\t\t\t\t\t\t\t\tdebug('pre-pause writing complete');\n\t\t\t\t\t\t\t\t--total || pause();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tpause();\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Starts polling cycle.\n     *\n     * @api public\n     */\n\n\t\t\t\tPolling.prototype.poll = function () {\n\t\t\t\t\tdebug('polling');\n\t\t\t\t\tthis.polling = true;\n\t\t\t\t\tthis.doPoll();\n\t\t\t\t\tthis.emit('poll');\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Overloads onData to detect payloads.\n     *\n     * @api private\n     */\n\n\t\t\t\tPolling.prototype.onData = function (data) {\n\t\t\t\t\tvar self = this;\n\t\t\t\t\tdebug('polling got data %s', data);\n\t\t\t\t\tvar callback = function callback(packet, index, total) {\n\t\t\t\t\t\t// if its the first message we consider the transport open\n\t\t\t\t\t\tif ('opening' == self.readyState) {\n\t\t\t\t\t\t\tself.onOpen();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// if its a close packet, we close the ongoing requests\n\t\t\t\t\t\tif ('close' == packet.type) {\n\t\t\t\t\t\t\tself.onClose();\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// otherwise bypass onData and handle the message\n\t\t\t\t\t\tself.onPacket(packet);\n\t\t\t\t\t};\n\n\t\t\t\t\t// decode payload\n\t\t\t\t\tparser.decodePayload(data, this.socket.binaryType, callback);\n\n\t\t\t\t\t// if an event did not trigger closing\n\t\t\t\t\tif ('closed' != this.readyState) {\n\t\t\t\t\t\t// if we got data we're not polling\n\t\t\t\t\t\tthis.polling = false;\n\t\t\t\t\t\tthis.emit('pollComplete');\n\n\t\t\t\t\t\tif ('open' == this.readyState) {\n\t\t\t\t\t\t\tthis.poll();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdebug('ignoring poll - transport state \"%s\"', this.readyState);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\t/**\n     * For polling, send a close packet.\n     *\n     * @api private\n     */\n\n\t\t\t\tPolling.prototype.doClose = function () {\n\t\t\t\t\tvar self = this;\n\n\t\t\t\t\tfunction close() {\n\t\t\t\t\t\tdebug('writing close packet');\n\t\t\t\t\t\tself.write([{\n\t\t\t\t\t\t\ttype: 'close'\n\t\t\t\t\t\t}]);\n\t\t\t\t\t}\n\n\t\t\t\t\tif ('open' == this.readyState) {\n\t\t\t\t\t\tdebug('transport open - closing');\n\t\t\t\t\t\tclose();\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// in case we're trying to close while\n\t\t\t\t\t\t// handshaking is in progress (GH-164)\n\t\t\t\t\t\tdebug('transport not open - deferring close');\n\t\t\t\t\t\tthis.once('open', close);\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Writes a packets payload.\n     *\n     * @param {Array} data packets\n     * @param {Function} drain callback\n     * @api private\n     */\n\n\t\t\t\tPolling.prototype.write = function (packets) {\n\t\t\t\t\tvar self = this;\n\t\t\t\t\tthis.writable = false;\n\t\t\t\t\tvar callbackfn = function callbackfn() {\n\t\t\t\t\t\tself.writable = true;\n\t\t\t\t\t\tself.emit('drain');\n\t\t\t\t\t};\n\n\t\t\t\t\tvar self = this;\n\t\t\t\t\tparser.encodePayload(packets, this.supportsBinary, function (data) {\n\t\t\t\t\t\tself.doWrite(data, callbackfn);\n\t\t\t\t\t});\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Generates uri for connection.\n     *\n     * @api private\n     */\n\n\t\t\t\tPolling.prototype.uri = function () {\n\t\t\t\t\tvar query = this.query || {};\n\t\t\t\t\tvar schema = this.secure ? 'https' : 'http';\n\t\t\t\t\tvar port = '';\n\n\t\t\t\t\t// cache busting is forced\n\t\t\t\t\tif (false !== this.timestampRequests) {\n\t\t\t\t\t\tquery[this.timestampParam] = yeast();\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!this.supportsBinary && !query.sid) {\n\t\t\t\t\t\tquery.b64 = 1;\n\t\t\t\t\t}\n\n\t\t\t\t\tquery = parseqs.encode(query);\n\n\t\t\t\t\t// avoid port if default for schema\n\t\t\t\t\tif (this.port && ('https' == schema && this.port != 443 || 'http' == schema && this.port != 80)) {\n\t\t\t\t\t\tport = ':' + this.port;\n\t\t\t\t\t}\n\n\t\t\t\t\t// prepend ? to query\n\t\t\t\t\tif (query.length) {\n\t\t\t\t\t\tquery = '?' + query;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar ipv6 = this.hostname.indexOf(':') !== -1;\n\t\t\t\t\treturn schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + this.path + query;\n\t\t\t\t};\n\t\t\t}, {\n\t\t\t\t\"../transport\": 4,\n\t\t\t\t\"component-inherit\": 16,\n\t\t\t\t\"debug\": 17,\n\t\t\t\t\"engine.io-parser\": 19,\n\t\t\t\t\"parseqs\": 27,\n\t\t\t\t\"xmlhttprequest-ssl\": 10,\n\t\t\t\t\"yeast\": 30\n\t\t\t}],\n\t\t\t9: [function (_dereq_, module, exports) {\n\t\t\t\t(function (global) {\n\t\t\t\t\t/**\n      * Module dependencies.\n      */\n\n\t\t\t\t\tvar Transport = _dereq_('../transport');\n\t\t\t\t\tvar parser = _dereq_('engine.io-parser');\n\t\t\t\t\tvar parseqs = _dereq_('parseqs');\n\t\t\t\t\tvar inherit = _dereq_('component-inherit');\n\t\t\t\t\tvar yeast = _dereq_('yeast');\n\t\t\t\t\tvar debug = _dereq_('debug')('engine.io-client:websocket');\n\t\t\t\t\tvar BrowserWebSocket = global.WebSocket || global.MozWebSocket;\n\n\t\t\t\t\t/**\n      * Get either the `WebSocket` or `MozWebSocket` globals\n      * in the browser or try to resolve WebSocket-compatible\n      * interface exposed by `ws` for Node-like environment.\n      */\n\n\t\t\t\t\tvar WebSocket = BrowserWebSocket;\n\t\t\t\t\tif (!WebSocket && typeof window === 'undefined') {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tWebSocket = _dereq_('ws');\n\t\t\t\t\t\t} catch (e) {}\n\t\t\t\t\t}\n\n\t\t\t\t\t/**\n      * Module exports.\n      */\n\n\t\t\t\t\tmodule.exports = WS;\n\n\t\t\t\t\t/**\n      * WebSocket transport constructor.\n      *\n      * @api {Object} connection options\n      * @api public\n      */\n\n\t\t\t\t\tfunction WS(opts) {\n\t\t\t\t\t\tvar forceBase64 = opts && opts.forceBase64;\n\t\t\t\t\t\tif (forceBase64) {\n\t\t\t\t\t\t\tthis.supportsBinary = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.perMessageDeflate = opts.perMessageDeflate;\n\t\t\t\t\t\tTransport.call(this, opts);\n\t\t\t\t\t}\n\n\t\t\t\t\t/**\n      * Inherits from Transport.\n      */\n\n\t\t\t\t\tinherit(WS, Transport);\n\n\t\t\t\t\t/**\n      * Transport name.\n      *\n      * @api public\n      */\n\n\t\t\t\t\tWS.prototype.name = 'websocket';\n\n\t\t\t\t\t/*\n      * WebSockets support binary\n      */\n\n\t\t\t\t\tWS.prototype.supportsBinary = true;\n\n\t\t\t\t\t/**\n      * Opens socket.\n      *\n      * @api private\n      */\n\n\t\t\t\t\tWS.prototype.doOpen = function () {\n\t\t\t\t\t\tif (!this.check()) {\n\t\t\t\t\t\t\t// let probe timeout\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar self = this;\n\t\t\t\t\t\tvar uri = this.uri();\n\t\t\t\t\t\tvar protocols = void 0;\n\t\t\t\t\t\tvar opts = {\n\t\t\t\t\t\t\tagent: this.agent,\n\t\t\t\t\t\t\tperMessageDeflate: this.perMessageDeflate\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t// SSL options for Node.js client\n\t\t\t\t\t\topts.pfx = this.pfx;\n\t\t\t\t\t\topts.key = this.key;\n\t\t\t\t\t\topts.passphrase = this.passphrase;\n\t\t\t\t\t\topts.cert = this.cert;\n\t\t\t\t\t\topts.ca = this.ca;\n\t\t\t\t\t\topts.ciphers = this.ciphers;\n\t\t\t\t\t\topts.rejectUnauthorized = this.rejectUnauthorized;\n\t\t\t\t\t\tif (this.extraHeaders) {\n\t\t\t\t\t\t\topts.headers = this.extraHeaders;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.ws = BrowserWebSocket ? new WebSocket(uri) : new WebSocket(uri, protocols, opts);\n\n\t\t\t\t\t\tif (this.ws.binaryType === undefined) {\n\t\t\t\t\t\t\tthis.supportsBinary = false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (this.ws.supports && this.ws.supports.binary) {\n\t\t\t\t\t\t\tthis.supportsBinary = true;\n\t\t\t\t\t\t\tthis.ws.binaryType = 'buffer';\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.ws.binaryType = 'arraybuffer';\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.addEventListeners();\n\t\t\t\t\t};\n\n\t\t\t\t\t/**\n      * Adds event listeners to the socket\n      *\n      * @api private\n      */\n\n\t\t\t\t\tWS.prototype.addEventListeners = function () {\n\t\t\t\t\t\tvar self = this;\n\n\t\t\t\t\t\tthis.ws.onopen = function () {\n\t\t\t\t\t\t\tself.onOpen();\n\t\t\t\t\t\t};\n\t\t\t\t\t\tthis.ws.onclose = function () {\n\t\t\t\t\t\t\tself.onClose();\n\t\t\t\t\t\t};\n\t\t\t\t\t\tthis.ws.onmessage = function (ev) {\n\t\t\t\t\t\t\tself.onData(ev.data);\n\t\t\t\t\t\t};\n\t\t\t\t\t\tthis.ws.onerror = function (e) {\n\t\t\t\t\t\t\tself.onError('websocket error', e);\n\t\t\t\t\t\t};\n\t\t\t\t\t};\n\n\t\t\t\t\t/**\n      * Override `onData` to use a timer on iOS.\n      * See: https://gist.github.com/mloughran/2052006\n      *\n      * @api private\n      */\n\n\t\t\t\t\tif ('undefined' != typeof navigator && /iPad|iPhone|iPod/i.test(navigator.userAgent)) {\n\t\t\t\t\t\tWS.prototype.onData = function (data) {\n\t\t\t\t\t\t\tvar self = this;\n\t\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\t\tTransport.prototype.onData.call(self, data);\n\t\t\t\t\t\t\t}, 0);\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\t/**\n      * Writes data to socket.\n      *\n      * @param {Array} array of packets.\n      * @api private\n      */\n\n\t\t\t\t\tWS.prototype.write = function (packets) {\n\t\t\t\t\t\tvar self = this;\n\t\t\t\t\t\tthis.writable = false;\n\n\t\t\t\t\t\t// encodePacket efficient as it uses WS framing\n\t\t\t\t\t\t// no need for encodePayload\n\t\t\t\t\t\tvar total = packets.length;\n\t\t\t\t\t\tfor (var i = 0, l = total; i < l; i++) {\n\t\t\t\t\t\t\t(function (packet) {\n\t\t\t\t\t\t\t\tparser.encodePacket(packet, self.supportsBinary, function (data) {\n\t\t\t\t\t\t\t\t\tif (!BrowserWebSocket) {\n\t\t\t\t\t\t\t\t\t\t// always create a new object (GH-437)\n\t\t\t\t\t\t\t\t\t\tvar opts = {};\n\t\t\t\t\t\t\t\t\t\tif (packet.options) {\n\t\t\t\t\t\t\t\t\t\t\topts.compress = packet.options.compress;\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tif (self.perMessageDeflate) {\n\t\t\t\t\t\t\t\t\t\t\tvar len = 'string' == typeof data ? global.Buffer.byteLength(data) : data.length;\n\t\t\t\t\t\t\t\t\t\t\tif (len < self.perMessageDeflate.threshold) {\n\t\t\t\t\t\t\t\t\t\t\t\topts.compress = false;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t//Sometimes the websocket has already been closed but the browser didn't\n\t\t\t\t\t\t\t\t\t//have a chance of informing us about it yet, in that case send will\n\t\t\t\t\t\t\t\t\t//throw an error\n\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\tif (BrowserWebSocket) {\n\t\t\t\t\t\t\t\t\t\t\t// TypeError is thrown when passing the second argument on Safari\n\t\t\t\t\t\t\t\t\t\t\tself.ws.send(data);\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tself.ws.send(data, opts);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t\t\t\tdebug('websocket closed before onclose event');\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t--total || done();\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t})(packets[i]);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction done() {\n\t\t\t\t\t\t\tself.emit('flush');\n\n\t\t\t\t\t\t\t// fake drain\n\t\t\t\t\t\t\t// defer to next tick to allow Socket to clear writeBuffer\n\t\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\t\tself.writable = true;\n\t\t\t\t\t\t\t\tself.emit('drain');\n\t\t\t\t\t\t\t}, 0);\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\t/**\n      * Called upon close\n      *\n      * @api private\n      */\n\n\t\t\t\t\tWS.prototype.onClose = function () {\n\t\t\t\t\t\tTransport.prototype.onClose.call(this);\n\t\t\t\t\t};\n\n\t\t\t\t\t/**\n      * Closes socket.\n      *\n      * @api private\n      */\n\n\t\t\t\t\tWS.prototype.doClose = function () {\n\t\t\t\t\t\tif (typeof this.ws !== 'undefined') {\n\t\t\t\t\t\t\tthis.ws.close();\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\t/**\n      * Generates uri for connection.\n      *\n      * @api private\n      */\n\n\t\t\t\t\tWS.prototype.uri = function () {\n\t\t\t\t\t\tvar query = this.query || {};\n\t\t\t\t\t\tvar schema = this.secure ? 'wss' : 'ws';\n\t\t\t\t\t\tvar port = '';\n\n\t\t\t\t\t\t// avoid port if default for schema\n\t\t\t\t\t\tif (this.port && ('wss' == schema && this.port != 443 || 'ws' == schema && this.port != 80)) {\n\t\t\t\t\t\t\tport = ':' + this.port;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// append timestamp to URI\n\t\t\t\t\t\tif (this.timestampRequests) {\n\t\t\t\t\t\t\tquery[this.timestampParam] = yeast();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// communicate binary support capabilities\n\t\t\t\t\t\tif (!this.supportsBinary) {\n\t\t\t\t\t\t\tquery.b64 = 1;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tquery = parseqs.encode(query);\n\n\t\t\t\t\t\t// prepend ? to query\n\t\t\t\t\t\tif (query.length) {\n\t\t\t\t\t\t\tquery = '?' + query;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar ipv6 = this.hostname.indexOf(':') !== -1;\n\t\t\t\t\t\treturn schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + this.path + query;\n\t\t\t\t\t};\n\n\t\t\t\t\t/**\n      * Feature detection for WebSocket.\n      *\n      * @return {Boolean} whether this transport is available.\n      * @api public\n      */\n\n\t\t\t\t\tWS.prototype.check = function () {\n\t\t\t\t\t\treturn !!WebSocket && !('__initialize' in WebSocket && this.name === WS.prototype.name);\n\t\t\t\t\t};\n\t\t\t\t}).call(this, typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {});\n\t\t\t}, {\n\t\t\t\t\"../transport\": 4,\n\t\t\t\t\"component-inherit\": 16,\n\t\t\t\t\"debug\": 17,\n\t\t\t\t\"engine.io-parser\": 19,\n\t\t\t\t\"parseqs\": 27,\n\t\t\t\t\"ws\": undefined,\n\t\t\t\t\"yeast\": 30\n\t\t\t}],\n\t\t\t10: [function (_dereq_, module, exports) {\n\t\t\t\t// browser shim for xmlhttprequest module\n\t\t\t\tvar hasCORS = _dereq_('has-cors');\n\n\t\t\t\tmodule.exports = function (opts) {\n\t\t\t\t\tvar xdomain = opts.xdomain;\n\n\t\t\t\t\t// scheme must be same when usign XDomainRequest\n\t\t\t\t\t// http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx\n\t\t\t\t\tvar xscheme = opts.xscheme;\n\n\t\t\t\t\t// XDomainRequest has a flow of not sending cookie, therefore it should be disabled as a default.\n\t\t\t\t\t// https://github.com/Automattic/engine.io-client/pull/217\n\t\t\t\t\tvar enablesXDR = opts.enablesXDR;\n\n\t\t\t\t\t// XMLHttpRequest can be disabled on IE\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif ('undefined' != typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n\t\t\t\t\t\t\treturn new XMLHttpRequest();\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (e) {}\n\n\t\t\t\t\t// Use XDomainRequest for IE8 if enablesXDR is true\n\t\t\t\t\t// because loading bar keeps flashing when using jsonp-polling\n\t\t\t\t\t// https://github.com/yujiosaka/socke.io-ie8-loading-example\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif ('undefined' != typeof XDomainRequest && !xscheme && enablesXDR) {\n\t\t\t\t\t\t\treturn new XDomainRequest();\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (e) {}\n\n\t\t\t\t\tif (!xdomain) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\treturn new ActiveXObject('Microsoft.XMLHTTP');\n\t\t\t\t\t\t} catch (e) {}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}, {\n\t\t\t\t\"has-cors\": 22\n\t\t\t}],\n\t\t\t11: [function (_dereq_, module, exports) {\n\t\t\t\tmodule.exports = after;\n\n\t\t\t\tfunction after(count, callback, err_cb) {\n\t\t\t\t\tvar bail = false;\n\t\t\t\t\terr_cb = err_cb || noop;\n\t\t\t\t\tproxy.count = count;\n\n\t\t\t\t\treturn count === 0 ? callback() : proxy;\n\n\t\t\t\t\tfunction proxy(err, result) {\n\t\t\t\t\t\tif (proxy.count <= 0) {\n\t\t\t\t\t\t\tthrow new Error('after called too many times');\n\t\t\t\t\t\t}\n\t\t\t\t\t\t--proxy.count;\n\n\t\t\t\t\t\t// after first error, rest are passed to err_cb\n\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\tbail = true;\n\t\t\t\t\t\t\tcallback(err);\n\t\t\t\t\t\t\t// future error callbacks will go to error handler\n\t\t\t\t\t\t\tcallback = err_cb;\n\t\t\t\t\t\t} else if (proxy.count === 0 && !bail) {\n\t\t\t\t\t\t\tcallback(null, result);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfunction noop() {}\n\t\t\t}, {}],\n\t\t\t12: [function (_dereq_, module, exports) {\n\t\t\t\t/**\n     * An abstraction for slicing an arraybuffer even when\n     * ArrayBuffer.prototype.slice is not supported\n     *\n     * @api public\n     */\n\n\t\t\t\tmodule.exports = function (arraybuffer, start, end) {\n\t\t\t\t\tvar bytes = arraybuffer.byteLength;\n\t\t\t\t\tstart = start || 0;\n\t\t\t\t\tend = end || bytes;\n\n\t\t\t\t\tif (arraybuffer.slice) {\n\t\t\t\t\t\treturn arraybuffer.slice(start, end);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (start < 0) {\n\t\t\t\t\t\tstart += bytes;\n\t\t\t\t\t}\n\t\t\t\t\tif (end < 0) {\n\t\t\t\t\t\tend += bytes;\n\t\t\t\t\t}\n\t\t\t\t\tif (end > bytes) {\n\t\t\t\t\t\tend = bytes;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (start >= bytes || start >= end || bytes === 0) {\n\t\t\t\t\t\treturn new ArrayBuffer(0);\n\t\t\t\t\t}\n\n\t\t\t\t\tvar abv = new Uint8Array(arraybuffer);\n\t\t\t\t\tvar result = new Uint8Array(end - start);\n\t\t\t\t\tfor (var i = start, ii = 0; i < end; i++, ii++) {\n\t\t\t\t\t\tresult[ii] = abv[i];\n\t\t\t\t\t}\n\t\t\t\t\treturn result.buffer;\n\t\t\t\t};\n\t\t\t}, {}],\n\t\t\t13: [function (_dereq_, module, exports) {\n\t\t\t\t/*\n     * base64-arraybuffer\n     * https://github.com/niklasvh/base64-arraybuffer\n     *\n     * Copyright (c) 2012 Niklas von Hertzen\n     * Licensed under the MIT license.\n     */\n\t\t\t\t(function (chars) {\n\t\t\t\t\t\"use strict\";\n\n\t\t\t\t\texports.encode = function (arraybuffer) {\n\t\t\t\t\t\tvar bytes = new Uint8Array(arraybuffer),\n\t\t\t\t\t\t    i,\n\t\t\t\t\t\t    len = bytes.length,\n\t\t\t\t\t\t    base64 = \"\";\n\n\t\t\t\t\t\tfor (i = 0; i < len; i += 3) {\n\t\t\t\t\t\t\tbase64 += chars[bytes[i] >> 2];\n\t\t\t\t\t\t\tbase64 += chars[(bytes[i] & 3) << 4 | bytes[i + 1] >> 4];\n\t\t\t\t\t\t\tbase64 += chars[(bytes[i + 1] & 15) << 2 | bytes[i + 2] >> 6];\n\t\t\t\t\t\t\tbase64 += chars[bytes[i + 2] & 63];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (len % 3 === 2) {\n\t\t\t\t\t\t\tbase64 = base64.substring(0, base64.length - 1) + \"=\";\n\t\t\t\t\t\t} else if (len % 3 === 1) {\n\t\t\t\t\t\t\tbase64 = base64.substring(0, base64.length - 2) + \"==\";\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn base64;\n\t\t\t\t\t};\n\n\t\t\t\t\texports.decode = function (base64) {\n\t\t\t\t\t\tvar bufferLength = base64.length * 0.75,\n\t\t\t\t\t\t    len = base64.length,\n\t\t\t\t\t\t    i,\n\t\t\t\t\t\t    p = 0,\n\t\t\t\t\t\t    encoded1,\n\t\t\t\t\t\t    encoded2,\n\t\t\t\t\t\t    encoded3,\n\t\t\t\t\t\t    encoded4;\n\n\t\t\t\t\t\tif (base64[base64.length - 1] === \"=\") {\n\t\t\t\t\t\t\tbufferLength--;\n\t\t\t\t\t\t\tif (base64[base64.length - 2] === \"=\") {\n\t\t\t\t\t\t\t\tbufferLength--;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar arraybuffer = new ArrayBuffer(bufferLength),\n\t\t\t\t\t\t    bytes = new Uint8Array(arraybuffer);\n\n\t\t\t\t\t\tfor (i = 0; i < len; i += 4) {\n\t\t\t\t\t\t\tencoded1 = chars.indexOf(base64[i]);\n\t\t\t\t\t\t\tencoded2 = chars.indexOf(base64[i + 1]);\n\t\t\t\t\t\t\tencoded3 = chars.indexOf(base64[i + 2]);\n\t\t\t\t\t\t\tencoded4 = chars.indexOf(base64[i + 3]);\n\n\t\t\t\t\t\t\tbytes[p++] = encoded1 << 2 | encoded2 >> 4;\n\t\t\t\t\t\t\tbytes[p++] = (encoded2 & 15) << 4 | encoded3 >> 2;\n\t\t\t\t\t\t\tbytes[p++] = (encoded3 & 3) << 6 | encoded4 & 63;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn arraybuffer;\n\t\t\t\t\t};\n\t\t\t\t})(\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\");\n\t\t\t}, {}],\n\t\t\t14: [function (_dereq_, module, exports) {\n\t\t\t\t(function (global) {\n\t\t\t\t\t/**\n      * Create a blob builder even when vendor prefixes exist\n      */\n\n\t\t\t\t\tvar BlobBuilder = global.BlobBuilder || global.WebKitBlobBuilder || global.MSBlobBuilder || global.MozBlobBuilder;\n\n\t\t\t\t\t/**\n      * Check if Blob constructor is supported\n      */\n\n\t\t\t\t\tvar blobSupported = function () {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tvar a = new Blob(['hi']);\n\t\t\t\t\t\t\treturn a.size === 2;\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}();\n\n\t\t\t\t\t/**\n      * Check if Blob constructor supports ArrayBufferViews\n      * Fails in Safari 6, so we need to map to ArrayBuffers there.\n      */\n\n\t\t\t\t\tvar blobSupportsArrayBufferView = blobSupported && function () {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tvar b = new Blob([new Uint8Array([1, 2])]);\n\t\t\t\t\t\t\treturn b.size === 2;\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}();\n\n\t\t\t\t\t/**\n      * Check if BlobBuilder is supported\n      */\n\n\t\t\t\t\tvar blobBuilderSupported = BlobBuilder && BlobBuilder.prototype.append && BlobBuilder.prototype.getBlob;\n\n\t\t\t\t\t/**\n      * Helper function that maps ArrayBufferViews to ArrayBuffers\n      * Used by BlobBuilder constructor and old browsers that didn't\n      * support it in the Blob constructor.\n      */\n\n\t\t\t\t\tfunction mapArrayBufferViews(ary) {\n\t\t\t\t\t\tfor (var i = 0; i < ary.length; i++) {\n\t\t\t\t\t\t\tvar chunk = ary[i];\n\t\t\t\t\t\t\tif (chunk.buffer instanceof ArrayBuffer) {\n\t\t\t\t\t\t\t\tvar buf = chunk.buffer;\n\n\t\t\t\t\t\t\t\t// if this is a subarray, make a copy so we only\n\t\t\t\t\t\t\t\t// include the subarray region from the underlying buffer\n\t\t\t\t\t\t\t\tif (chunk.byteLength !== buf.byteLength) {\n\t\t\t\t\t\t\t\t\tvar copy = new Uint8Array(chunk.byteLength);\n\t\t\t\t\t\t\t\t\tcopy.set(new Uint8Array(buf, chunk.byteOffset, chunk.byteLength));\n\t\t\t\t\t\t\t\t\tbuf = copy.buffer;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tary[i] = buf;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tfunction BlobBuilderConstructor(ary, options) {\n\t\t\t\t\t\toptions = options || {};\n\n\t\t\t\t\t\tvar bb = new BlobBuilder();\n\t\t\t\t\t\tmapArrayBufferViews(ary);\n\n\t\t\t\t\t\tfor (var i = 0; i < ary.length; i++) {\n\t\t\t\t\t\t\tbb.append(ary[i]);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn options.type ? bb.getBlob(options.type) : bb.getBlob();\n\t\t\t\t\t};\n\n\t\t\t\t\tfunction BlobConstructor(ary, options) {\n\t\t\t\t\t\tmapArrayBufferViews(ary);\n\t\t\t\t\t\treturn new Blob(ary, options || {});\n\t\t\t\t\t};\n\n\t\t\t\t\tmodule.exports = function () {\n\t\t\t\t\t\tif (blobSupported) {\n\t\t\t\t\t\t\treturn blobSupportsArrayBufferView ? global.Blob : BlobConstructor;\n\t\t\t\t\t\t} else if (blobBuilderSupported) {\n\t\t\t\t\t\t\treturn BlobBuilderConstructor;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t\t}\n\t\t\t\t\t}();\n\t\t\t\t}).call(this, typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {});\n\t\t\t}, {}],\n\t\t\t15: [function (_dereq_, module, exports) {\n\n\t\t\t\t/**\n     * Expose `Emitter`.\n     */\n\n\t\t\t\tmodule.exports = Emitter;\n\n\t\t\t\t/**\n     * Initialize a new `Emitter`.\n     *\n     * @api public\n     */\n\n\t\t\t\tfunction Emitter(obj) {\n\t\t\t\t\tif (obj) return mixin(obj);\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Mixin the emitter properties.\n     *\n     * @param {Object} obj\n     * @return {Object}\n     * @api private\n     */\n\n\t\t\t\tfunction mixin(obj) {\n\t\t\t\t\tfor (var key in Emitter.prototype) {\n\t\t\t\t\t\tobj[key] = Emitter.prototype[key];\n\t\t\t\t\t}\n\t\t\t\t\treturn obj;\n\t\t\t\t}\n\n\t\t\t\t/**\n     * Listen on the given `event` with `fn`.\n     *\n     * @param {String} event\n     * @param {Function} fn\n     * @return {Emitter}\n     * @api public\n     */\n\n\t\t\t\tEmitter.prototype.on = Emitter.prototype.addEventListener = function (event, fn) {\n\t\t\t\t\tthis._callbacks = this._callbacks || {};\n\t\t\t\t\t(this._callbacks[event] = this._callbacks[event] || []).push(fn);\n\t\t\t\t\treturn this;\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Adds an `event` listener that will be invoked a single\n     * time then automatically removed.\n     *\n     * @param {String} event\n     * @param {Function} fn\n     * @return {Emitter}\n     * @api public\n     */\n\n\t\t\t\tEmitter.prototype.once = function (event, fn) {\n\t\t\t\t\tvar self = this;\n\t\t\t\t\tthis._callbacks = this._callbacks || {};\n\n\t\t\t\t\tfunction on() {\n\t\t\t\t\t\tself.off(event, on);\n\t\t\t\t\t\tfn.apply(this, arguments);\n\t\t\t\t\t}\n\n\t\t\t\t\ton.fn = fn;\n\t\t\t\t\tthis.on(event, on);\n\t\t\t\t\treturn this;\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Remove the given callback for `event` or all\n     * registered callbacks.\n     *\n     * @param {String} event\n     * @param {Function} fn\n     * @return {Emitter}\n     * @api public\n     */\n\n\t\t\t\tEmitter.prototype.off = Emitter.prototype.removeListener = Emitter.prototype.removeAllListeners = Emitter.prototype.removeEventListener = function (event, fn) {\n\t\t\t\t\tthis._callbacks = this._callbacks || {};\n\n\t\t\t\t\t// all\n\t\t\t\t\tif (0 == arguments.length) {\n\t\t\t\t\t\tthis._callbacks = {};\n\t\t\t\t\t\treturn this;\n\t\t\t\t\t}\n\n\t\t\t\t\t// specific event\n\t\t\t\t\tvar callbacks = this._callbacks[event];\n\t\t\t\t\tif (!callbacks) return this;\n\n\t\t\t\t\t// remove all handlers\n\t\t\t\t\tif (1 == arguments.length) {\n\t\t\t\t\t\tdelete this._callbacks[event];\n\t\t\t\t\t\treturn this;\n\t\t\t\t\t}\n\n\t\t\t\t\t// remove specific handler\n\t\t\t\t\tvar cb;\n\t\t\t\t\tfor (var i = 0; i < callbacks.length; i++) {\n\t\t\t\t\t\tcb = callbacks[i];\n\t\t\t\t\t\tif (cb === fn || cb.fn === fn) {\n\t\t\t\t\t\t\tcallbacks.splice(i, 1);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Emit `event` with the given args.\n     *\n     * @param {String} event\n     * @param {Mixed} ...\n     * @return {Emitter}\n     */\n\n\t\t\t\tEmitter.prototype.emit = function (event) {\n\t\t\t\t\tthis._callbacks = this._callbacks || {};\n\t\t\t\t\tvar args = [].slice.call(arguments, 1),\n\t\t\t\t\t    callbacks = this._callbacks[event];\n\n\t\t\t\t\tif (callbacks) {\n\t\t\t\t\t\tcallbacks = callbacks.slice(0);\n\t\t\t\t\t\tfor (var i = 0, len = callbacks.length; i < len; ++i) {\n\t\t\t\t\t\t\tcallbacks[i].apply(this, args);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this;\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Return array of callbacks for `event`.\n     *\n     * @param {String} event\n     * @return {Array}\n     * @api public\n     */\n\n\t\t\t\tEmitter.prototype.listeners = function (event) {\n\t\t\t\t\tthis._callbacks = this._callbacks || {};\n\t\t\t\t\treturn this._callbacks[event] || [];\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Check if this emitter has `event` handlers.\n     *\n     * @param {String} event\n     * @return {Boolean}\n     * @api public\n     */\n\n\t\t\t\tEmitter.prototype.hasListeners = function (event) {\n\t\t\t\t\treturn !!this.listeners(event).length;\n\t\t\t\t};\n\t\t\t}, {}],\n\t\t\t16: [function (_dereq_, module, exports) {\n\n\t\t\t\tmodule.exports = function (a, b) {\n\t\t\t\t\tvar fn = function fn() {};\n\t\t\t\t\tfn.prototype = b.prototype;\n\t\t\t\t\ta.prototype = new fn();\n\t\t\t\t\ta.prototype.constructor = a;\n\t\t\t\t};\n\t\t\t}, {}],\n\t\t\t17: [function (_dereq_, module, exports) {\n\n\t\t\t\t/**\n     * This is the web browser implementation of `debug()`.\n     *\n     * Expose `debug()` as the module.\n     */\n\n\t\t\t\texports = module.exports = _dereq_('./debug');\n\t\t\t\texports.log = log;\n\t\t\t\texports.formatArgs = formatArgs;\n\t\t\t\texports.save = save;\n\t\t\t\texports.load = load;\n\t\t\t\texports.useColors = useColors;\n\t\t\t\texports.storage = 'undefined' != typeof chrome && 'undefined' != typeof chrome.storage ? chrome.storage.local : localstorage();\n\n\t\t\t\t/**\n     * Colors.\n     */\n\n\t\t\t\texports.colors = ['lightseagreen', 'forestgreen', 'goldenrod', 'dodgerblue', 'darkorchid', 'crimson'];\n\n\t\t\t\t/**\n     * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n     * and the Firebug extension (any Firefox version) are known\n     * to support \"%c\" CSS customizations.\n     *\n     * TODO: add a `localStorage` variable to explicitly enable/disable colors\n     */\n\n\t\t\t\tfunction useColors() {\n\t\t\t\t\t// is webkit? http://stackoverflow.com/a/16459606/376773\n\t\t\t\t\treturn 'WebkitAppearance' in document.documentElement.style ||\n\t\t\t\t\t// is firebug? http://stackoverflow.com/a/398120/376773\n\t\t\t\t\twindow.console && (console.firebug || console.exception && console.table) ||\n\t\t\t\t\t// is firefox >= v31?\n\t\t\t\t\t// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n\t\t\t\t\tnavigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31;\n\t\t\t\t}\n\n\t\t\t\t/**\n     * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n     */\n\n\t\t\t\texports.formatters.j = function (v) {\n\t\t\t\t\treturn JSON.stringify(v);\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Colorize log arguments if enabled.\n     *\n     * @api public\n     */\n\n\t\t\t\tfunction formatArgs() {\n\t\t\t\t\tvar args = arguments;\n\t\t\t\t\tvar useColors = this.useColors;\n\n\t\t\t\t\targs[0] = (useColors ? '%c' : '') + this.namespace + (useColors ? ' %c' : ' ') + args[0] + (useColors ? '%c ' : ' ') + '+' + exports.humanize(this.diff);\n\n\t\t\t\t\tif (!useColors) return args;\n\n\t\t\t\t\tvar c = 'color: ' + this.color;\n\t\t\t\t\targs = [args[0], c, 'color: inherit'].concat(Array.prototype.slice.call(args, 1));\n\n\t\t\t\t\t// the final \"%c\" is somewhat tricky, because there could be other\n\t\t\t\t\t// arguments passed either before or after the %c, so we need to\n\t\t\t\t\t// figure out the correct index to insert the CSS into\n\t\t\t\t\tvar index = 0;\n\t\t\t\t\tvar lastC = 0;\n\t\t\t\t\targs[0].replace(/%[a-z%]/g, function (match) {\n\t\t\t\t\t\tif ('%%' === match) return;\n\t\t\t\t\t\tindex++;\n\t\t\t\t\t\tif ('%c' === match) {\n\t\t\t\t\t\t\t// we only are interested in the *last* %c\n\t\t\t\t\t\t\t// (the user may have provided their own)\n\t\t\t\t\t\t\tlastC = index;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\targs.splice(lastC, 0, c);\n\t\t\t\t\treturn args;\n\t\t\t\t}\n\n\t\t\t\t/**\n     * Invokes `console.log()` when available.\n     * No-op when `console.log` is not a \"function\".\n     *\n     * @api public\n     */\n\n\t\t\t\tfunction log() {\n\t\t\t\t\t// this hackery is required for IE8/9, where\n\t\t\t\t\t// the `console.log` function doesn't have 'apply'\n\t\t\t\t\treturn 'object' === (typeof console === \"undefined\" ? \"undefined\" : _typeof(console)) && console.log && Function.prototype.apply.call(console.log, console, arguments);\n\t\t\t\t}\n\n\t\t\t\t/**\n     * Save `namespaces`.\n     *\n     * @param {String} namespaces\n     * @api private\n     */\n\n\t\t\t\tfunction save(namespaces) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (null == namespaces) {\n\t\t\t\t\t\t\texports.storage.removeItem('debug');\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\texports.storage.debug = namespaces;\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (e) {}\n\t\t\t\t}\n\n\t\t\t\t/**\n     * Load `namespaces`.\n     *\n     * @return {String} returns the previously persisted debug modes\n     * @api private\n     */\n\n\t\t\t\tfunction load() {\n\t\t\t\t\tvar r;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tr = exports.storage.debug;\n\t\t\t\t\t} catch (e) {}\n\t\t\t\t\treturn r;\n\t\t\t\t}\n\n\t\t\t\t/**\n     * Enable namespaces listed in `localStorage.debug` initially.\n     */\n\n\t\t\t\texports.enable(load());\n\n\t\t\t\t/**\n     * Localstorage attempts to return the localstorage.\n     *\n     * This is necessary because safari throws\n     * when a user disables cookies/localstorage\n     * and you attempt to access it.\n     *\n     * @return {LocalStorage}\n     * @api private\n     */\n\n\t\t\t\tfunction localstorage() {\n\t\t\t\t\ttry {\n\t\t\t\t\t\treturn window.localStorage;\n\t\t\t\t\t} catch (e) {}\n\t\t\t\t}\n\t\t\t}, {\n\t\t\t\t\"./debug\": 18\n\t\t\t}],\n\t\t\t18: [function (_dereq_, module, exports) {\n\n\t\t\t\t/**\n     * This is the common logic for both the Node.js and web browser\n     * implementations of `debug()`.\n     *\n     * Expose `debug()` as the module.\n     */\n\n\t\t\t\texports = module.exports = debug;\n\t\t\t\texports.coerce = coerce;\n\t\t\t\texports.disable = disable;\n\t\t\t\texports.enable = enable;\n\t\t\t\texports.enabled = enabled;\n\t\t\t\texports.humanize = _dereq_('ms');\n\n\t\t\t\t/**\n     * The currently active debug mode names, and names to skip.\n     */\n\n\t\t\t\texports.names = [];\n\t\t\t\texports.skips = [];\n\n\t\t\t\t/**\n     * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n     *\n     * Valid key names are a single, lowercased letter, i.e. \"n\".\n     */\n\n\t\t\t\texports.formatters = {};\n\n\t\t\t\t/**\n     * Previously assigned color.\n     */\n\n\t\t\t\tvar prevColor = 0;\n\n\t\t\t\t/**\n     * Previous log timestamp.\n     */\n\n\t\t\t\tvar prevTime;\n\n\t\t\t\t/**\n     * Select a color.\n     *\n     * @return {Number}\n     * @api private\n     */\n\n\t\t\t\tfunction selectColor() {\n\t\t\t\t\treturn exports.colors[prevColor++ % exports.colors.length];\n\t\t\t\t}\n\n\t\t\t\t/**\n     * Create a debugger with the given `namespace`.\n     *\n     * @param {String} namespace\n     * @return {Function}\n     * @api public\n     */\n\n\t\t\t\tfunction debug(namespace) {\n\n\t\t\t\t\t// define the `disabled` version\n\t\t\t\t\tfunction disabled() {}\n\t\t\t\t\tdisabled.enabled = false;\n\n\t\t\t\t\t// define the `enabled` version\n\t\t\t\t\tfunction enabled() {\n\n\t\t\t\t\t\tvar self = enabled;\n\n\t\t\t\t\t\t// set `diff` timestamp\n\t\t\t\t\t\tvar curr = +new Date();\n\t\t\t\t\t\tvar ms = curr - (prevTime || curr);\n\t\t\t\t\t\tself.diff = ms;\n\t\t\t\t\t\tself.prev = prevTime;\n\t\t\t\t\t\tself.curr = curr;\n\t\t\t\t\t\tprevTime = curr;\n\n\t\t\t\t\t\t// add the `color` if not set\n\t\t\t\t\t\tif (null == self.useColors) self.useColors = exports.useColors();\n\t\t\t\t\t\tif (null == self.color && self.useColors) self.color = selectColor();\n\n\t\t\t\t\t\tvar args = Array.prototype.slice.call(arguments);\n\n\t\t\t\t\t\targs[0] = exports.coerce(args[0]);\n\n\t\t\t\t\t\tif ('string' !== typeof args[0]) {\n\t\t\t\t\t\t\t// anything else let's inspect with %o\n\t\t\t\t\t\t\targs = ['%o'].concat(args);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// apply any `formatters` transformations\n\t\t\t\t\t\tvar index = 0;\n\t\t\t\t\t\targs[0] = args[0].replace(/%([a-z%])/g, function (match, format) {\n\t\t\t\t\t\t\t// if we encounter an escaped % then don't increase the array index\n\t\t\t\t\t\t\tif (match === '%%') return match;\n\t\t\t\t\t\t\tindex++;\n\t\t\t\t\t\t\tvar formatter = exports.formatters[format];\n\t\t\t\t\t\t\tif ('function' === typeof formatter) {\n\t\t\t\t\t\t\t\tvar val = args[index];\n\t\t\t\t\t\t\t\tmatch = formatter.call(self, val);\n\n\t\t\t\t\t\t\t\t// now we need to remove `args[index]` since it's inlined in the `format`\n\t\t\t\t\t\t\t\targs.splice(index, 1);\n\t\t\t\t\t\t\t\tindex--;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn match;\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif ('function' === typeof exports.formatArgs) {\n\t\t\t\t\t\t\targs = exports.formatArgs.apply(self, args);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar logFn = enabled.log || exports.log || console.log.bind(console);\n\t\t\t\t\t\tlogFn.apply(self, args);\n\t\t\t\t\t}\n\t\t\t\t\tenabled.enabled = true;\n\n\t\t\t\t\tvar fn = exports.enabled(namespace) ? enabled : disabled;\n\n\t\t\t\t\tfn.namespace = namespace;\n\n\t\t\t\t\treturn fn;\n\t\t\t\t}\n\n\t\t\t\t/**\n     * Enables a debug mode by namespaces. This can include modes\n     * separated by a colon and wildcards.\n     *\n     * @param {String} namespaces\n     * @api public\n     */\n\n\t\t\t\tfunction enable(namespaces) {\n\t\t\t\t\texports.save(namespaces);\n\n\t\t\t\t\tvar split = (namespaces || '').split(/[\\s,]+/);\n\t\t\t\t\tvar len = split.length;\n\n\t\t\t\t\tfor (var i = 0; i < len; i++) {\n\t\t\t\t\t\tif (!split[i]) continue; // ignore empty strings\n\t\t\t\t\t\tnamespaces = split[i].replace(/\\*/g, '.*?');\n\t\t\t\t\t\tif (namespaces[0] === '-') {\n\t\t\t\t\t\t\texports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\texports.names.push(new RegExp('^' + namespaces + '$'));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t/**\n     * Disable debug output.\n     *\n     * @api public\n     */\n\n\t\t\t\tfunction disable() {\n\t\t\t\t\texports.enable('');\n\t\t\t\t}\n\n\t\t\t\t/**\n     * Returns true if the given mode name is enabled, false otherwise.\n     *\n     * @param {String} name\n     * @return {Boolean}\n     * @api public\n     */\n\n\t\t\t\tfunction enabled(name) {\n\t\t\t\t\tvar i, len;\n\t\t\t\t\tfor (i = 0, len = exports.skips.length; i < len; i++) {\n\t\t\t\t\t\tif (exports.skips[i].test(name)) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfor (i = 0, len = exports.names.length; i < len; i++) {\n\t\t\t\t\t\tif (exports.names[i].test(name)) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\t/**\n     * Coerce `val`.\n     *\n     * @param {Mixed} val\n     * @return {Mixed}\n     * @api private\n     */\n\n\t\t\t\tfunction coerce(val) {\n\t\t\t\t\tif (val instanceof Error) return val.stack || val.message;\n\t\t\t\t\treturn val;\n\t\t\t\t}\n\t\t\t}, {\n\t\t\t\t\"ms\": 25\n\t\t\t}],\n\t\t\t19: [function (_dereq_, module, exports) {\n\t\t\t\t(function (global) {\n\t\t\t\t\t/**\n      * Module dependencies.\n      */\n\n\t\t\t\t\tvar keys = _dereq_('./keys');\n\t\t\t\t\tvar hasBinary = _dereq_('has-binary');\n\t\t\t\t\tvar sliceBuffer = _dereq_('arraybuffer.slice');\n\t\t\t\t\tvar base64encoder = _dereq_('base64-arraybuffer');\n\t\t\t\t\tvar after = _dereq_('after');\n\t\t\t\t\tvar utf8 = _dereq_('utf8');\n\n\t\t\t\t\t/**\n      * Check if we are running an android browser. That requires us to use\n      * ArrayBuffer with polling transports...\n      *\n      * http://ghinda.net/jpeg-blob-ajax-android/\n      */\n\n\t\t\t\t\tvar isAndroid = navigator.userAgent.match(/Android/i);\n\n\t\t\t\t\t/**\n      * Check if we are running in PhantomJS.\n      * Uploading a Blob with PhantomJS does not work correctly, as reported here:\n      * https://github.com/ariya/phantomjs/issues/11395\n      * @type boolean\n      */\n\t\t\t\t\tvar isPhantomJS = /PhantomJS/i.test(navigator.userAgent);\n\n\t\t\t\t\t/**\n      * When true, avoids using Blobs to encode payloads.\n      * @type boolean\n      */\n\t\t\t\t\tvar dontSendBlobs = isAndroid || isPhantomJS;\n\n\t\t\t\t\t/**\n      * Current protocol version.\n      */\n\n\t\t\t\t\texports.protocol = 3;\n\n\t\t\t\t\t/**\n      * Packet types.\n      */\n\n\t\t\t\t\tvar packets = exports.packets = {\n\t\t\t\t\t\topen: 0 // non-ws\n\n\t\t\t\t\t\t, close: 1 // non-ws\n\n\t\t\t\t\t\t, ping: 2,\n\t\t\t\t\t\tpong: 3,\n\t\t\t\t\t\tmessage: 4,\n\t\t\t\t\t\tupgrade: 5,\n\t\t\t\t\t\tnoop: 6\n\t\t\t\t\t};\n\n\t\t\t\t\tvar packetslist = keys(packets);\n\n\t\t\t\t\t/**\n      * Premade error packet.\n      */\n\n\t\t\t\t\tvar err = {\n\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\tdata: 'parser error'\n\t\t\t\t\t};\n\n\t\t\t\t\t/**\n      * Create a blob api even for blob builder when vendor prefixes exist\n      */\n\n\t\t\t\t\tvar Blob = _dereq_('blob');\n\n\t\t\t\t\t/**\n      * Encodes a packet.\n      *\n      *     <packet type id> [ <data> ]\n      *\n      * Example:\n      *\n      *     5hello world\n      *     3\n      *     4\n      *\n      * Binary is encoded in an identical principle\n      *\n      * @api private\n      */\n\n\t\t\t\t\texports.encodePacket = function (packet, supportsBinary, utf8encode, callback) {\n\t\t\t\t\t\tif ('function' == typeof supportsBinary) {\n\t\t\t\t\t\t\tcallback = supportsBinary;\n\t\t\t\t\t\t\tsupportsBinary = false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ('function' == typeof utf8encode) {\n\t\t\t\t\t\t\tcallback = utf8encode;\n\t\t\t\t\t\t\tutf8encode = null;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar data = packet.data === undefined ? undefined : packet.data.buffer || packet.data;\n\n\t\t\t\t\t\tif (global.ArrayBuffer && data instanceof ArrayBuffer) {\n\t\t\t\t\t\t\treturn encodeArrayBuffer(packet, supportsBinary, callback);\n\t\t\t\t\t\t} else if (Blob && data instanceof global.Blob) {\n\t\t\t\t\t\t\treturn encodeBlob(packet, supportsBinary, callback);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// might be an object with { base64: true, data: dataAsBase64String }\n\t\t\t\t\t\tif (data && data.base64) {\n\t\t\t\t\t\t\treturn encodeBase64Object(packet, callback);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Sending data as a utf-8 string\n\t\t\t\t\t\tvar encoded = packets[packet.type];\n\n\t\t\t\t\t\t// data fragment is optional\n\t\t\t\t\t\tif (undefined !== packet.data) {\n\t\t\t\t\t\t\tencoded += utf8encode ? utf8.encode(String(packet.data)) : String(packet.data);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn callback('' + encoded);\n\t\t\t\t\t};\n\n\t\t\t\t\tfunction encodeBase64Object(packet, callback) {\n\t\t\t\t\t\t// packet data is an object { base64: true, data: dataAsBase64String }\n\t\t\t\t\t\tvar message = 'b' + exports.packets[packet.type] + packet.data.data;\n\t\t\t\t\t\treturn callback(message);\n\t\t\t\t\t}\n\n\t\t\t\t\t/**\n      * Encode packet helpers for binary types\n      */\n\n\t\t\t\t\tfunction encodeArrayBuffer(packet, supportsBinary, callback) {\n\t\t\t\t\t\tif (!supportsBinary) {\n\t\t\t\t\t\t\treturn exports.encodeBase64Packet(packet, callback);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar data = packet.data;\n\t\t\t\t\t\tvar contentArray = new Uint8Array(data);\n\t\t\t\t\t\tvar resultBuffer = new Uint8Array(1 + data.byteLength);\n\n\t\t\t\t\t\tresultBuffer[0] = packets[packet.type];\n\t\t\t\t\t\tfor (var i = 0; i < contentArray.length; i++) {\n\t\t\t\t\t\t\tresultBuffer[i + 1] = contentArray[i];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn callback(resultBuffer.buffer);\n\t\t\t\t\t}\n\n\t\t\t\t\tfunction encodeBlobAsArrayBuffer(packet, supportsBinary, callback) {\n\t\t\t\t\t\tif (!supportsBinary) {\n\t\t\t\t\t\t\treturn exports.encodeBase64Packet(packet, callback);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar fr = new FileReader();\n\t\t\t\t\t\tfr.onload = function () {\n\t\t\t\t\t\t\tpacket.data = fr.result;\n\t\t\t\t\t\t\texports.encodePacket(packet, supportsBinary, true, callback);\n\t\t\t\t\t\t};\n\t\t\t\t\t\treturn fr.readAsArrayBuffer(packet.data);\n\t\t\t\t\t}\n\n\t\t\t\t\tfunction encodeBlob(packet, supportsBinary, callback) {\n\t\t\t\t\t\tif (!supportsBinary) {\n\t\t\t\t\t\t\treturn exports.encodeBase64Packet(packet, callback);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (dontSendBlobs) {\n\t\t\t\t\t\t\treturn encodeBlobAsArrayBuffer(packet, supportsBinary, callback);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar length = new Uint8Array(1);\n\t\t\t\t\t\tlength[0] = packets[packet.type];\n\t\t\t\t\t\tvar blob = new Blob([length.buffer, packet.data]);\n\n\t\t\t\t\t\treturn callback(blob);\n\t\t\t\t\t}\n\n\t\t\t\t\t/**\n      * Encodes a packet with binary data in a base64 string\n      *\n      * @param {Object} packet, has `type` and `data`\n      * @return {String} base64 encoded message\n      */\n\n\t\t\t\t\texports.encodeBase64Packet = function (packet, callback) {\n\t\t\t\t\t\tvar message = 'b' + exports.packets[packet.type];\n\t\t\t\t\t\tif (Blob && packet.data instanceof global.Blob) {\n\t\t\t\t\t\t\tvar fr = new FileReader();\n\t\t\t\t\t\t\tfr.onload = function () {\n\t\t\t\t\t\t\t\tvar b64 = fr.result.split(',')[1];\n\t\t\t\t\t\t\t\tcallback(message + b64);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\treturn fr.readAsDataURL(packet.data);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar b64data;\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tb64data = String.fromCharCode.apply(null, new Uint8Array(packet.data));\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t// iPhone Safari doesn't let you apply with typed arrays\n\t\t\t\t\t\t\tvar typed = new Uint8Array(packet.data);\n\t\t\t\t\t\t\tvar basic = new Array(typed.length);\n\t\t\t\t\t\t\tfor (var i = 0; i < typed.length; i++) {\n\t\t\t\t\t\t\t\tbasic[i] = typed[i];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tb64data = String.fromCharCode.apply(null, basic);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tmessage += global.btoa(b64data);\n\t\t\t\t\t\treturn callback(message);\n\t\t\t\t\t};\n\n\t\t\t\t\t/**\n      * Decodes a packet. Changes format to Blob if requested.\n      *\n      * @return {Object} with `type` and `data` (if any)\n      * @api private\n      */\n\n\t\t\t\t\texports.decodePacket = function (data, binaryType, utf8decode) {\n\t\t\t\t\t\t// String data\n\t\t\t\t\t\tif (typeof data == 'string' || data === undefined) {\n\t\t\t\t\t\t\tif (data.charAt(0) == 'b') {\n\t\t\t\t\t\t\t\treturn exports.decodeBase64Packet(data.substr(1), binaryType);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (utf8decode) {\n\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\tdata = utf8.decode(data);\n\t\t\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t\t\treturn err;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar type = data.charAt(0);\n\n\t\t\t\t\t\t\tif (Number(type) != type || !packetslist[type]) {\n\t\t\t\t\t\t\t\treturn err;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (data.length > 1) {\n\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\ttype: packetslist[type],\n\t\t\t\t\t\t\t\t\tdata: data.substring(1)\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\ttype: packetslist[type]\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar asArray = new Uint8Array(data);\n\t\t\t\t\t\tvar type = asArray[0];\n\t\t\t\t\t\tvar rest = sliceBuffer(data, 1);\n\t\t\t\t\t\tif (Blob && binaryType === 'blob') {\n\t\t\t\t\t\t\trest = new Blob([rest]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttype: packetslist[type],\n\t\t\t\t\t\t\tdata: rest\n\t\t\t\t\t\t};\n\t\t\t\t\t};\n\n\t\t\t\t\t/**\n      * Decodes a packet encoded in a base64 string\n      *\n      * @param {String} base64 encoded message\n      * @return {Object} with `type` and `data` (if any)\n      */\n\n\t\t\t\t\texports.decodeBase64Packet = function (msg, binaryType) {\n\t\t\t\t\t\tvar type = packetslist[msg.charAt(0)];\n\t\t\t\t\t\tif (!global.ArrayBuffer) {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\ttype: type,\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\tbase64: true,\n\t\t\t\t\t\t\t\t\tdata: msg.substr(1)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar data = base64encoder.decode(msg.substr(1));\n\n\t\t\t\t\t\tif (binaryType === 'blob' && Blob) {\n\t\t\t\t\t\t\tdata = new Blob([data]);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttype: type,\n\t\t\t\t\t\t\tdata: data\n\t\t\t\t\t\t};\n\t\t\t\t\t};\n\n\t\t\t\t\t/**\n      * Encodes multiple messages (payload).\n      *\n      *     <length>:data\n      *\n      * Example:\n      *\n      *     11:hello world2:hi\n      *\n      * If any contents are binary, they will be encoded as base64 strings. Base64\n      * encoded strings are marked with a b before the length specifier\n      *\n      * @param {Array} packets\n      * @api private\n      */\n\n\t\t\t\t\texports.encodePayload = function (packets, supportsBinary, callback) {\n\t\t\t\t\t\tif (typeof supportsBinary == 'function') {\n\t\t\t\t\t\t\tcallback = supportsBinary;\n\t\t\t\t\t\t\tsupportsBinary = null;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar isBinary = hasBinary(packets);\n\n\t\t\t\t\t\tif (supportsBinary && isBinary) {\n\t\t\t\t\t\t\tif (Blob && !dontSendBlobs) {\n\t\t\t\t\t\t\t\treturn exports.encodePayloadAsBlob(packets, callback);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn exports.encodePayloadAsArrayBuffer(packets, callback);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (!packets.length) {\n\t\t\t\t\t\t\treturn callback('0:');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction setLengthHeader(message) {\n\t\t\t\t\t\t\treturn message.length + ':' + message;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction encodeOne(packet, doneCallback) {\n\t\t\t\t\t\t\texports.encodePacket(packet, !isBinary ? false : supportsBinary, true, function (message) {\n\t\t\t\t\t\t\t\tdoneCallback(null, setLengthHeader(message));\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmap(packets, encodeOne, function (err, results) {\n\t\t\t\t\t\t\treturn callback(results.join(''));\n\t\t\t\t\t\t});\n\t\t\t\t\t};\n\n\t\t\t\t\t/**\n      * Async array map using after\n      */\n\n\t\t\t\t\tfunction map(ary, each, done) {\n\t\t\t\t\t\tvar result = new Array(ary.length);\n\t\t\t\t\t\tvar next = after(ary.length, done);\n\n\t\t\t\t\t\tvar eachWithIndex = function eachWithIndex(i, el, cb) {\n\t\t\t\t\t\t\teach(el, function (error, msg) {\n\t\t\t\t\t\t\t\tresult[i] = msg;\n\t\t\t\t\t\t\t\tcb(error, result);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tfor (var i = 0; i < ary.length; i++) {\n\t\t\t\t\t\t\teachWithIndex(i, ary[i], next);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t/*\n      * Decodes data when a payload is maybe expected. Possible binary contents are\n      * decoded from their base64 representation\n      *\n      * @param {String} data, callback method\n      * @api public\n      */\n\n\t\t\t\t\texports.decodePayload = function (data, binaryType, callback) {\n\t\t\t\t\t\tif (typeof data != 'string') {\n\t\t\t\t\t\t\treturn exports.decodePayloadAsBinary(data, binaryType, callback);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (typeof binaryType === 'function') {\n\t\t\t\t\t\t\tcallback = binaryType;\n\t\t\t\t\t\t\tbinaryType = null;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar packet;\n\t\t\t\t\t\tif (data == '') {\n\t\t\t\t\t\t\t// parser error - ignoring payload\n\t\t\t\t\t\t\treturn callback(err, 0, 1);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar length = '',\n\t\t\t\t\t\t    n,\n\t\t\t\t\t\t    msg;\n\n\t\t\t\t\t\tfor (var i = 0, l = data.length; i < l; i++) {\n\t\t\t\t\t\t\tvar chr = data.charAt(i);\n\n\t\t\t\t\t\t\tif (':' != chr) {\n\t\t\t\t\t\t\t\tlength += chr;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif ('' == length || length != (n = Number(length))) {\n\t\t\t\t\t\t\t\t\t// parser error - ignoring payload\n\t\t\t\t\t\t\t\t\treturn callback(err, 0, 1);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tmsg = data.substr(i + 1, n);\n\n\t\t\t\t\t\t\t\tif (length != msg.length) {\n\t\t\t\t\t\t\t\t\t// parser error - ignoring payload\n\t\t\t\t\t\t\t\t\treturn callback(err, 0, 1);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (msg.length) {\n\t\t\t\t\t\t\t\t\tpacket = exports.decodePacket(msg, binaryType, true);\n\n\t\t\t\t\t\t\t\t\tif (err.type == packet.type && err.data == packet.data) {\n\t\t\t\t\t\t\t\t\t\t// parser error in individual packet - ignoring payload\n\t\t\t\t\t\t\t\t\t\treturn callback(err, 0, 1);\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tvar ret = callback(packet, i + n, l);\n\t\t\t\t\t\t\t\t\tif (false === ret) return;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// advance cursor\n\t\t\t\t\t\t\t\ti += n;\n\t\t\t\t\t\t\t\tlength = '';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (length != '') {\n\t\t\t\t\t\t\t// parser error - ignoring payload\n\t\t\t\t\t\t\treturn callback(err, 0, 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\t/**\n      * Encodes multiple messages (payload) as binary.\n      *\n      * <1 = binary, 0 = string><number from 0-9><number from 0-9>[...]<number\n      * 255><data>\n      *\n      * Example:\n      * 1 3 255 1 2 3, if the binary contents are interpreted as 8 bit integers\n      *\n      * @param {Array} packets\n      * @return {ArrayBuffer} encoded payload\n      * @api private\n      */\n\n\t\t\t\t\texports.encodePayloadAsArrayBuffer = function (packets, callback) {\n\t\t\t\t\t\tif (!packets.length) {\n\t\t\t\t\t\t\treturn callback(new ArrayBuffer(0));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction encodeOne(packet, doneCallback) {\n\t\t\t\t\t\t\texports.encodePacket(packet, true, true, function (data) {\n\t\t\t\t\t\t\t\treturn doneCallback(null, data);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmap(packets, encodeOne, function (err, encodedPackets) {\n\t\t\t\t\t\t\tvar totalLength = encodedPackets.reduce(function (acc, p) {\n\t\t\t\t\t\t\t\tvar len;\n\t\t\t\t\t\t\t\tif (typeof p === 'string') {\n\t\t\t\t\t\t\t\t\tlen = p.length;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tlen = p.byteLength;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn acc + len.toString().length + len + 2; // string/binary identifier + separator = 2\n\t\t\t\t\t\t\t}, 0);\n\n\t\t\t\t\t\t\tvar resultArray = new Uint8Array(totalLength);\n\n\t\t\t\t\t\t\tvar bufferIndex = 0;\n\t\t\t\t\t\t\tencodedPackets.forEach(function (p) {\n\t\t\t\t\t\t\t\tvar isString = typeof p === 'string';\n\t\t\t\t\t\t\t\tvar ab = p;\n\t\t\t\t\t\t\t\tif (isString) {\n\t\t\t\t\t\t\t\t\tvar view = new Uint8Array(p.length);\n\t\t\t\t\t\t\t\t\tfor (var i = 0; i < p.length; i++) {\n\t\t\t\t\t\t\t\t\t\tview[i] = p.charCodeAt(i);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tab = view.buffer;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (isString) {\n\t\t\t\t\t\t\t\t\t// not true binary\n\t\t\t\t\t\t\t\t\tresultArray[bufferIndex++] = 0;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t// true binary\n\t\t\t\t\t\t\t\t\tresultArray[bufferIndex++] = 1;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tvar lenStr = ab.byteLength.toString();\n\t\t\t\t\t\t\t\tfor (var i = 0; i < lenStr.length; i++) {\n\t\t\t\t\t\t\t\t\tresultArray[bufferIndex++] = parseInt(lenStr[i]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tresultArray[bufferIndex++] = 255;\n\n\t\t\t\t\t\t\t\tvar view = new Uint8Array(ab);\n\t\t\t\t\t\t\t\tfor (var i = 0; i < view.length; i++) {\n\t\t\t\t\t\t\t\t\tresultArray[bufferIndex++] = view[i];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\treturn callback(resultArray.buffer);\n\t\t\t\t\t\t});\n\t\t\t\t\t};\n\n\t\t\t\t\t/**\n      * Encode as Blob\n      */\n\n\t\t\t\t\texports.encodePayloadAsBlob = function (packets, callback) {\n\t\t\t\t\t\tfunction encodeOne(packet, doneCallback) {\n\t\t\t\t\t\t\texports.encodePacket(packet, true, true, function (encoded) {\n\t\t\t\t\t\t\t\tvar binaryIdentifier = new Uint8Array(1);\n\t\t\t\t\t\t\t\tbinaryIdentifier[0] = 1;\n\t\t\t\t\t\t\t\tif (typeof encoded === 'string') {\n\t\t\t\t\t\t\t\t\tvar view = new Uint8Array(encoded.length);\n\t\t\t\t\t\t\t\t\tfor (var i = 0; i < encoded.length; i++) {\n\t\t\t\t\t\t\t\t\t\tview[i] = encoded.charCodeAt(i);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tencoded = view.buffer;\n\t\t\t\t\t\t\t\t\tbinaryIdentifier[0] = 0;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tvar len = encoded instanceof ArrayBuffer ? encoded.byteLength : encoded.size;\n\n\t\t\t\t\t\t\t\tvar lenStr = len.toString();\n\t\t\t\t\t\t\t\tvar lengthAry = new Uint8Array(lenStr.length + 1);\n\t\t\t\t\t\t\t\tfor (var i = 0; i < lenStr.length; i++) {\n\t\t\t\t\t\t\t\t\tlengthAry[i] = parseInt(lenStr[i]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tlengthAry[lenStr.length] = 255;\n\n\t\t\t\t\t\t\t\tif (Blob) {\n\t\t\t\t\t\t\t\t\tvar blob = new Blob([binaryIdentifier.buffer, lengthAry.buffer, encoded]);\n\t\t\t\t\t\t\t\t\tdoneCallback(null, blob);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmap(packets, encodeOne, function (err, results) {\n\t\t\t\t\t\t\treturn callback(new Blob(results));\n\t\t\t\t\t\t});\n\t\t\t\t\t};\n\n\t\t\t\t\t/*\n      * Decodes data when a payload is maybe expected. Strings are decoded by\n      * interpreting each byte as a key code for entries marked to start with 0. See\n      * description of encodePayloadAsBinary\n      *\n      * @param {ArrayBuffer} data, callback method\n      * @api public\n      */\n\n\t\t\t\t\texports.decodePayloadAsBinary = function (data, binaryType, callback) {\n\t\t\t\t\t\tif (typeof binaryType === 'function') {\n\t\t\t\t\t\t\tcallback = binaryType;\n\t\t\t\t\t\t\tbinaryType = null;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar bufferTail = data;\n\t\t\t\t\t\tvar buffers = [];\n\n\t\t\t\t\t\tvar numberTooLong = false;\n\t\t\t\t\t\twhile (bufferTail.byteLength > 0) {\n\t\t\t\t\t\t\tvar tailArray = new Uint8Array(bufferTail);\n\t\t\t\t\t\t\tvar isString = tailArray[0] === 0;\n\t\t\t\t\t\t\tvar msgLength = '';\n\n\t\t\t\t\t\t\tfor (var i = 1;; i++) {\n\t\t\t\t\t\t\t\tif (tailArray[i] == 255) break;\n\n\t\t\t\t\t\t\t\tif (msgLength.length > 310) {\n\t\t\t\t\t\t\t\t\tnumberTooLong = true;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tmsgLength += tailArray[i];\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (numberTooLong) return callback(err, 0, 1);\n\n\t\t\t\t\t\t\tbufferTail = sliceBuffer(bufferTail, 2 + msgLength.length);\n\t\t\t\t\t\t\tmsgLength = parseInt(msgLength);\n\n\t\t\t\t\t\t\tvar msg = sliceBuffer(bufferTail, 0, msgLength);\n\t\t\t\t\t\t\tif (isString) {\n\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\tmsg = String.fromCharCode.apply(null, new Uint8Array(msg));\n\t\t\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t\t\t// iPhone Safari doesn't let you apply to typed arrays\n\t\t\t\t\t\t\t\t\tvar typed = new Uint8Array(msg);\n\t\t\t\t\t\t\t\t\tmsg = '';\n\t\t\t\t\t\t\t\t\tfor (var i = 0; i < typed.length; i++) {\n\t\t\t\t\t\t\t\t\t\tmsg += String.fromCharCode(typed[i]);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tbuffers.push(msg);\n\t\t\t\t\t\t\tbufferTail = sliceBuffer(bufferTail, msgLength);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar total = buffers.length;\n\t\t\t\t\t\tbuffers.forEach(function (buffer, i) {\n\t\t\t\t\t\t\tcallback(exports.decodePacket(buffer, binaryType, true), i, total);\n\t\t\t\t\t\t});\n\t\t\t\t\t};\n\t\t\t\t}).call(this, typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {});\n\t\t\t}, {\n\t\t\t\t\"./keys\": 20,\n\t\t\t\t\"after\": 11,\n\t\t\t\t\"arraybuffer.slice\": 12,\n\t\t\t\t\"base64-arraybuffer\": 13,\n\t\t\t\t\"blob\": 14,\n\t\t\t\t\"has-binary\": 21,\n\t\t\t\t\"utf8\": 29\n\t\t\t}],\n\t\t\t20: [function (_dereq_, module, exports) {\n\n\t\t\t\t/**\n     * Gets the keys for an object.\n     *\n     * @return {Array} keys\n     * @api private\n     */\n\n\t\t\t\tmodule.exports = Object.keys || function keys(obj) {\n\t\t\t\t\tvar arr = [];\n\t\t\t\t\tvar has = Object.prototype.hasOwnProperty;\n\n\t\t\t\t\tfor (var i in obj) {\n\t\t\t\t\t\tif (has.call(obj, i)) {\n\t\t\t\t\t\t\tarr.push(i);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn arr;\n\t\t\t\t};\n\t\t\t}, {}],\n\t\t\t21: [function (_dereq_, module, exports) {\n\t\t\t\t(function (global) {\n\n\t\t\t\t\t/*\n      * Module requirements.\n      */\n\n\t\t\t\t\tvar isArray = _dereq_('isarray');\n\n\t\t\t\t\t/**\n      * Module exports.\n      */\n\n\t\t\t\t\tmodule.exports = hasBinary;\n\n\t\t\t\t\t/**\n      * Checks for binary data.\n      *\n      * Right now only Buffer and ArrayBuffer are supported..\n      *\n      * @param {Object} anything\n      * @api public\n      */\n\n\t\t\t\t\tfunction hasBinary(data) {\n\n\t\t\t\t\t\tfunction _hasBinary(obj) {\n\t\t\t\t\t\t\tif (!obj) return false;\n\n\t\t\t\t\t\t\tif (global.Buffer && global.Buffer.isBuffer(obj) || global.ArrayBuffer && obj instanceof ArrayBuffer || global.Blob && obj instanceof Blob || global.File && obj instanceof File) {\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (isArray(obj)) {\n\t\t\t\t\t\t\t\tfor (var i = 0; i < obj.length; i++) {\n\t\t\t\t\t\t\t\t\tif (_hasBinary(obj[i])) {\n\t\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if (obj && 'object' == (typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj))) {\n\t\t\t\t\t\t\t\tif (obj.toJSON) {\n\t\t\t\t\t\t\t\t\tobj = obj.toJSON();\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tfor (var key in obj) {\n\t\t\t\t\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(obj, key) && _hasBinary(obj[key])) {\n\t\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn _hasBinary(data);\n\t\t\t\t\t}\n\t\t\t\t}).call(this, typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {});\n\t\t\t}, {\n\t\t\t\t\"isarray\": 24\n\t\t\t}],\n\t\t\t22: [function (_dereq_, module, exports) {\n\n\t\t\t\t/**\n     * Module exports.\n     *\n     * Logic borrowed from Modernizr:\n     *\n     *   - https://github.com/Modernizr/Modernizr/blob/master/feature-detects/cors.js\n     */\n\n\t\t\t\ttry {\n\t\t\t\t\tmodule.exports = typeof XMLHttpRequest !== 'undefined' && 'withCredentials' in new XMLHttpRequest();\n\t\t\t\t} catch (err) {\n\t\t\t\t\t// if XMLHttp support is disabled in IE then it will throw\n\t\t\t\t\t// when trying to create\n\t\t\t\t\tmodule.exports = false;\n\t\t\t\t}\n\t\t\t}, {}],\n\t\t\t23: [function (_dereq_, module, exports) {\n\n\t\t\t\tvar indexOf = [].indexOf;\n\n\t\t\t\tmodule.exports = function (arr, obj) {\n\t\t\t\t\tif (indexOf) return arr.indexOf(obj);\n\t\t\t\t\tfor (var i = 0; i < arr.length; ++i) {\n\t\t\t\t\t\tif (arr[i] === obj) return i;\n\t\t\t\t\t}\n\t\t\t\t\treturn -1;\n\t\t\t\t};\n\t\t\t}, {}],\n\t\t\t24: [function (_dereq_, module, exports) {\n\t\t\t\tmodule.exports = Array.isArray || function (arr) {\n\t\t\t\t\treturn Object.prototype.toString.call(arr) == '[object Array]';\n\t\t\t\t};\n\t\t\t}, {}],\n\t\t\t25: [function (_dereq_, module, exports) {\n\t\t\t\t/**\n     * Helpers.\n     */\n\n\t\t\t\tvar s = 1000;\n\t\t\t\tvar m = s * 60;\n\t\t\t\tvar h = m * 60;\n\t\t\t\tvar d = h * 24;\n\t\t\t\tvar y = d * 365.25;\n\n\t\t\t\t/**\n     * Parse or format the given `val`.\n     *\n     * Options:\n     *\n     *  - `long` verbose formatting [false]\n     *\n     * @param {String|Number} val\n     * @param {Object} options\n     * @return {String|Number}\n     * @api public\n     */\n\n\t\t\t\tmodule.exports = function (val, options) {\n\t\t\t\t\toptions = options || {};\n\t\t\t\t\tif ('string' == typeof val) return parse(val);\n\t\t\t\t\treturn options.long ? long(val) : short(val);\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Parse the given `str` and return milliseconds.\n     *\n     * @param {String} str\n     * @return {Number}\n     * @api private\n     */\n\n\t\t\t\tfunction parse(str) {\n\t\t\t\t\tstr = '' + str;\n\t\t\t\t\tif (str.length > 10000) return;\n\t\t\t\t\tvar match = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);\n\t\t\t\t\tif (!match) return;\n\t\t\t\t\tvar n = parseFloat(match[1]);\n\t\t\t\t\tvar type = (match[2] || 'ms').toLowerCase();\n\t\t\t\t\tswitch (type) {\n\t\t\t\t\t\tcase 'years':\n\t\t\t\t\t\tcase 'year':\n\t\t\t\t\t\tcase 'yrs':\n\t\t\t\t\t\tcase 'yr':\n\t\t\t\t\t\tcase 'y':\n\t\t\t\t\t\t\treturn n * y;\n\t\t\t\t\t\tcase 'days':\n\t\t\t\t\t\tcase 'day':\n\t\t\t\t\t\tcase 'd':\n\t\t\t\t\t\t\treturn n * d;\n\t\t\t\t\t\tcase 'hours':\n\t\t\t\t\t\tcase 'hour':\n\t\t\t\t\t\tcase 'hrs':\n\t\t\t\t\t\tcase 'hr':\n\t\t\t\t\t\tcase 'h':\n\t\t\t\t\t\t\treturn n * h;\n\t\t\t\t\t\tcase 'minutes':\n\t\t\t\t\t\tcase 'minute':\n\t\t\t\t\t\tcase 'mins':\n\t\t\t\t\t\tcase 'min':\n\t\t\t\t\t\tcase 'm':\n\t\t\t\t\t\t\treturn n * m;\n\t\t\t\t\t\tcase 'seconds':\n\t\t\t\t\t\tcase 'second':\n\t\t\t\t\t\tcase 'secs':\n\t\t\t\t\t\tcase 'sec':\n\t\t\t\t\t\tcase 's':\n\t\t\t\t\t\t\treturn n * s;\n\t\t\t\t\t\tcase 'milliseconds':\n\t\t\t\t\t\tcase 'millisecond':\n\t\t\t\t\t\tcase 'msecs':\n\t\t\t\t\t\tcase 'msec':\n\t\t\t\t\t\tcase 'ms':\n\t\t\t\t\t\t\treturn n;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t/**\n     * Short format for `ms`.\n     *\n     * @param {Number} ms\n     * @return {String}\n     * @api private\n     */\n\n\t\t\t\tfunction short(ms) {\n\t\t\t\t\tif (ms >= d) return Math.round(ms / d) + 'd';\n\t\t\t\t\tif (ms >= h) return Math.round(ms / h) + 'h';\n\t\t\t\t\tif (ms >= m) return Math.round(ms / m) + 'm';\n\t\t\t\t\tif (ms >= s) return Math.round(ms / s) + 's';\n\t\t\t\t\treturn ms + 'ms';\n\t\t\t\t}\n\n\t\t\t\t/**\n     * Long format for `ms`.\n     *\n     * @param {Number} ms\n     * @return {String}\n     * @api private\n     */\n\n\t\t\t\tfunction long(ms) {\n\t\t\t\t\treturn plural(ms, d, 'day') || plural(ms, h, 'hour') || plural(ms, m, 'minute') || plural(ms, s, 'second') || ms + ' ms';\n\t\t\t\t}\n\n\t\t\t\t/**\n     * Pluralization helper.\n     */\n\n\t\t\t\tfunction plural(ms, n, name) {\n\t\t\t\t\tif (ms < n) return;\n\t\t\t\t\tif (ms < n * 1.5) return Math.floor(ms / n) + ' ' + name;\n\t\t\t\t\treturn Math.ceil(ms / n) + ' ' + name + 's';\n\t\t\t\t}\n\t\t\t}, {}],\n\t\t\t26: [function (_dereq_, module, exports) {\n\t\t\t\t(function (global) {\n\t\t\t\t\t/**\n      * JSON parse.\n      *\n      * @see Based on jQuery#parseJSON (MIT) and JSON2\n      * @api private\n      */\n\n\t\t\t\t\tvar rvalidchars = /^[\\],:{}\\s]*$/;\n\t\t\t\t\tvar rvalidescape = /\\\\(?:[\"\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g;\n\t\t\t\t\tvar rvalidtokens = /\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g;\n\t\t\t\t\tvar rvalidbraces = /(?:^|:|,)(?:\\s*\\[)+/g;\n\t\t\t\t\tvar rtrimLeft = /^\\s+/;\n\t\t\t\t\tvar rtrimRight = /\\s+$/;\n\n\t\t\t\t\tmodule.exports = function parsejson(data) {\n\t\t\t\t\t\tif ('string' != typeof data || !data) {\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdata = data.replace(rtrimLeft, '').replace(rtrimRight, '');\n\n\t\t\t\t\t\t// Attempt to parse using the native JSON parser first\n\t\t\t\t\t\tif (global.JSON && JSON.parse) {\n\t\t\t\t\t\t\treturn JSON.parse(data);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (rvalidchars.test(data.replace(rvalidescape, '@').replace(rvalidtokens, ']').replace(rvalidbraces, ''))) {\n\t\t\t\t\t\t\treturn new Function('return ' + data)();\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t}).call(this, typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {});\n\t\t\t}, {}],\n\t\t\t27: [function (_dereq_, module, exports) {\n\t\t\t\t/**\n     * Compiles a querystring\n     * Returns string representation of the object\n     *\n     * @param {Object}\n     * @api private\n     */\n\n\t\t\t\texports.encode = function (obj) {\n\t\t\t\t\tvar str = '';\n\n\t\t\t\t\tfor (var i in obj) {\n\t\t\t\t\t\tif (obj.hasOwnProperty(i)) {\n\t\t\t\t\t\t\tif (str.length) str += '&';\n\t\t\t\t\t\t\tstr += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn str;\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Parses a simple querystring into an object\n     *\n     * @param {String} qs\n     * @api private\n     */\n\n\t\t\t\texports.decode = function (qs) {\n\t\t\t\t\tvar qry = {};\n\t\t\t\t\tvar pairs = qs.split('&');\n\t\t\t\t\tfor (var i = 0, l = pairs.length; i < l; i++) {\n\t\t\t\t\t\tvar pair = pairs[i].split('=');\n\t\t\t\t\t\tqry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n\t\t\t\t\t}\n\t\t\t\t\treturn qry;\n\t\t\t\t};\n\t\t\t}, {}],\n\t\t\t28: [function (_dereq_, module, exports) {\n\t\t\t\t/**\n     * Parses an URI\n     *\n     * @author Steven Levithan <stevenlevithan.com> (MIT license)\n     * @api private\n     */\n\n\t\t\t\tvar re = /^(?:(?![^:@]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\n\n\t\t\t\tvar parts = ['source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'];\n\n\t\t\t\tmodule.exports = function parseuri(str) {\n\t\t\t\t\tvar src = str,\n\t\t\t\t\t    b = str.indexOf('['),\n\t\t\t\t\t    e = str.indexOf(']');\n\n\t\t\t\t\tif (b != -1 && e != -1) {\n\t\t\t\t\t\tstr = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\n\t\t\t\t\t}\n\n\t\t\t\t\tvar m = re.exec(str || ''),\n\t\t\t\t\t    uri = {},\n\t\t\t\t\t    i = 14;\n\n\t\t\t\t\twhile (i--) {\n\t\t\t\t\t\turi[parts[i]] = m[i] || '';\n\t\t\t\t\t}\n\n\t\t\t\t\tif (b != -1 && e != -1) {\n\t\t\t\t\t\turi.source = src;\n\t\t\t\t\t\turi.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\n\t\t\t\t\t\turi.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\n\t\t\t\t\t\turi.ipv6uri = true;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn uri;\n\t\t\t\t};\n\t\t\t}, {}],\n\t\t\t29: [function (_dereq_, module, exports) {\n\t\t\t\t(function (global) {\n\t\t\t\t\t/*! https://mths.be/utf8js v2.0.0 by @mathias */\n\t\t\t\t\t;\n\t\t\t\t\t(function (root) {\n\n\t\t\t\t\t\t// Detect free variables `exports`\n\t\t\t\t\t\tvar freeExports = (typeof exports === \"undefined\" ? \"undefined\" : _typeof(exports)) == 'object' && exports;\n\n\t\t\t\t\t\t// Detect free variable `module`\n\t\t\t\t\t\tvar freeModule = (typeof module === \"undefined\" ? \"undefined\" : _typeof(module)) == 'object' && module && module.exports == freeExports && module;\n\n\t\t\t\t\t\t// Detect free variable `global`, from Node.js or Browserified code,\n\t\t\t\t\t\t// and use it as `root`\n\t\t\t\t\t\tvar freeGlobal = (typeof global === \"undefined\" ? \"undefined\" : _typeof(global)) == 'object' && global;\n\t\t\t\t\t\tif (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal) {\n\t\t\t\t\t\t\troot = freeGlobal;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t/*--------------------------------------------------------------------------*/\n\n\t\t\t\t\t\tvar stringFromCharCode = String.fromCharCode;\n\n\t\t\t\t\t\t// Taken from https://mths.be/punycode\n\t\t\t\t\t\tfunction ucs2decode(string) {\n\t\t\t\t\t\t\tvar output = [];\n\t\t\t\t\t\t\tvar counter = 0;\n\t\t\t\t\t\t\tvar length = string.length;\n\t\t\t\t\t\t\tvar value;\n\t\t\t\t\t\t\tvar extra;\n\t\t\t\t\t\t\twhile (counter < length) {\n\t\t\t\t\t\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\t\t\t\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t\t\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\t\t\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\t\t\t\t\t\tif ((extra & 0xFC00) == 0xDC00) {\n\t\t\t\t\t\t\t\t\t\t// low surrogate\n\t\t\t\t\t\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\t\t\t\t\t\toutput.push(value);\n\t\t\t\t\t\t\t\t\t\tcounter--;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\toutput.push(value);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn output;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Taken from https://mths.be/punycode\n\t\t\t\t\t\tfunction ucs2encode(array) {\n\t\t\t\t\t\t\tvar length = array.length;\n\t\t\t\t\t\t\tvar index = -1;\n\t\t\t\t\t\t\tvar value;\n\t\t\t\t\t\t\tvar output = '';\n\t\t\t\t\t\t\twhile (++index < length) {\n\t\t\t\t\t\t\t\tvalue = array[index];\n\t\t\t\t\t\t\t\tif (value > 0xFFFF) {\n\t\t\t\t\t\t\t\t\tvalue -= 0x10000;\n\t\t\t\t\t\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\t\t\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\toutput += stringFromCharCode(value);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn output;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction checkScalarValue(codePoint) {\n\t\t\t\t\t\t\tif (codePoint >= 0xD800 && codePoint <= 0xDFFF) {\n\t\t\t\t\t\t\t\tthrow Error('Lone surrogate U+' + codePoint.toString(16).toUpperCase() + ' is not a scalar value');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t/*--------------------------------------------------------------------------*/\n\n\t\t\t\t\t\tfunction createByte(codePoint, shift) {\n\t\t\t\t\t\t\treturn stringFromCharCode(codePoint >> shift & 0x3F | 0x80);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction encodeCodePoint(codePoint) {\n\t\t\t\t\t\t\tif ((codePoint & 0xFFFFFF80) == 0) {\n\t\t\t\t\t\t\t\t// 1-byte sequence\n\t\t\t\t\t\t\t\treturn stringFromCharCode(codePoint);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar symbol = '';\n\t\t\t\t\t\t\tif ((codePoint & 0xFFFFF800) == 0) {\n\t\t\t\t\t\t\t\t// 2-byte sequence\n\t\t\t\t\t\t\t\tsymbol = stringFromCharCode(codePoint >> 6 & 0x1F | 0xC0);\n\t\t\t\t\t\t\t} else if ((codePoint & 0xFFFF0000) == 0) {\n\t\t\t\t\t\t\t\t// 3-byte sequence\n\t\t\t\t\t\t\t\tcheckScalarValue(codePoint);\n\t\t\t\t\t\t\t\tsymbol = stringFromCharCode(codePoint >> 12 & 0x0F | 0xE0);\n\t\t\t\t\t\t\t\tsymbol += createByte(codePoint, 6);\n\t\t\t\t\t\t\t} else if ((codePoint & 0xFFE00000) == 0) {\n\t\t\t\t\t\t\t\t// 4-byte sequence\n\t\t\t\t\t\t\t\tsymbol = stringFromCharCode(codePoint >> 18 & 0x07 | 0xF0);\n\t\t\t\t\t\t\t\tsymbol += createByte(codePoint, 12);\n\t\t\t\t\t\t\t\tsymbol += createByte(codePoint, 6);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsymbol += stringFromCharCode(codePoint & 0x3F | 0x80);\n\t\t\t\t\t\t\treturn symbol;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction utf8encode(string) {\n\t\t\t\t\t\t\tvar codePoints = ucs2decode(string);\n\t\t\t\t\t\t\tvar length = codePoints.length;\n\t\t\t\t\t\t\tvar index = -1;\n\t\t\t\t\t\t\tvar codePoint;\n\t\t\t\t\t\t\tvar byteString = '';\n\t\t\t\t\t\t\twhile (++index < length) {\n\t\t\t\t\t\t\t\tcodePoint = codePoints[index];\n\t\t\t\t\t\t\t\tbyteString += encodeCodePoint(codePoint);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn byteString;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t/*--------------------------------------------------------------------------*/\n\n\t\t\t\t\t\tfunction readContinuationByte() {\n\t\t\t\t\t\t\tif (byteIndex >= byteCount) {\n\t\t\t\t\t\t\t\tthrow Error('Invalid byte index');\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tvar continuationByte = byteArray[byteIndex] & 0xFF;\n\t\t\t\t\t\t\tbyteIndex++;\n\n\t\t\t\t\t\t\tif ((continuationByte & 0xC0) == 0x80) {\n\t\t\t\t\t\t\t\treturn continuationByte & 0x3F;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// If we end up here, it’s not a continuation byte\n\t\t\t\t\t\t\tthrow Error('Invalid continuation byte');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction decodeSymbol() {\n\t\t\t\t\t\t\tvar byte1;\n\t\t\t\t\t\t\tvar byte2;\n\t\t\t\t\t\t\tvar byte3;\n\t\t\t\t\t\t\tvar byte4;\n\t\t\t\t\t\t\tvar codePoint;\n\n\t\t\t\t\t\t\tif (byteIndex > byteCount) {\n\t\t\t\t\t\t\t\tthrow Error('Invalid byte index');\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (byteIndex == byteCount) {\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Read first byte\n\t\t\t\t\t\t\tbyte1 = byteArray[byteIndex] & 0xFF;\n\t\t\t\t\t\t\tbyteIndex++;\n\n\t\t\t\t\t\t\t// 1-byte sequence (no continuation bytes)\n\t\t\t\t\t\t\tif ((byte1 & 0x80) == 0) {\n\t\t\t\t\t\t\t\treturn byte1;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// 2-byte sequence\n\t\t\t\t\t\t\tif ((byte1 & 0xE0) == 0xC0) {\n\t\t\t\t\t\t\t\tvar byte2 = readContinuationByte();\n\t\t\t\t\t\t\t\tcodePoint = (byte1 & 0x1F) << 6 | byte2;\n\t\t\t\t\t\t\t\tif (codePoint >= 0x80) {\n\t\t\t\t\t\t\t\t\treturn codePoint;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tthrow Error('Invalid continuation byte');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// 3-byte sequence (may include unpaired surrogates)\n\t\t\t\t\t\t\tif ((byte1 & 0xF0) == 0xE0) {\n\t\t\t\t\t\t\t\tbyte2 = readContinuationByte();\n\t\t\t\t\t\t\t\tbyte3 = readContinuationByte();\n\t\t\t\t\t\t\t\tcodePoint = (byte1 & 0x0F) << 12 | byte2 << 6 | byte3;\n\t\t\t\t\t\t\t\tif (codePoint >= 0x0800) {\n\t\t\t\t\t\t\t\t\tcheckScalarValue(codePoint);\n\t\t\t\t\t\t\t\t\treturn codePoint;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tthrow Error('Invalid continuation byte');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// 4-byte sequence\n\t\t\t\t\t\t\tif ((byte1 & 0xF8) == 0xF0) {\n\t\t\t\t\t\t\t\tbyte2 = readContinuationByte();\n\t\t\t\t\t\t\t\tbyte3 = readContinuationByte();\n\t\t\t\t\t\t\t\tbyte4 = readContinuationByte();\n\t\t\t\t\t\t\t\tcodePoint = (byte1 & 0x0F) << 0x12 | byte2 << 0x0C | byte3 << 0x06 | byte4;\n\t\t\t\t\t\t\t\tif (codePoint >= 0x010000 && codePoint <= 0x10FFFF) {\n\t\t\t\t\t\t\t\t\treturn codePoint;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthrow Error('Invalid UTF-8 detected');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar byteArray;\n\t\t\t\t\t\tvar byteCount;\n\t\t\t\t\t\tvar byteIndex;\n\n\t\t\t\t\t\tfunction utf8decode(byteString) {\n\t\t\t\t\t\t\tbyteArray = ucs2decode(byteString);\n\t\t\t\t\t\t\tbyteCount = byteArray.length;\n\t\t\t\t\t\t\tbyteIndex = 0;\n\t\t\t\t\t\t\tvar codePoints = [];\n\t\t\t\t\t\t\tvar tmp;\n\t\t\t\t\t\t\twhile ((tmp = decodeSymbol()) !== false) {\n\t\t\t\t\t\t\t\tcodePoints.push(tmp);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn ucs2encode(codePoints);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t/*--------------------------------------------------------------------------*/\n\n\t\t\t\t\t\tvar utf8 = {\n\t\t\t\t\t\t\t'version': '2.0.0',\n\t\t\t\t\t\t\t'encode': utf8encode,\n\t\t\t\t\t\t\t'decode': utf8decode\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t\t\t\t\t\t// like the following:\n\t\t\t\t\t\tif (typeof define == 'function' && _typeof(define.amd) == 'object' && define.amd) {\n\t\t\t\t\t\t\tdefine(function () {\n\t\t\t\t\t\t\t\treturn utf8;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else if (freeExports && !freeExports.nodeType) {\n\t\t\t\t\t\t\tif (freeModule) {\n\t\t\t\t\t\t\t\t// in Node.js or RingoJS v0.8.0+\n\t\t\t\t\t\t\t\tfreeModule.exports = utf8;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// in Narwhal or RingoJS v0.7.0-\n\t\t\t\t\t\t\t\tvar object = {};\n\t\t\t\t\t\t\t\tvar hasOwnProperty = object.hasOwnProperty;\n\t\t\t\t\t\t\t\tfor (var key in utf8) {\n\t\t\t\t\t\t\t\t\thasOwnProperty.call(utf8, key) && (freeExports[key] = utf8[key]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// in Rhino or a web browser\n\t\t\t\t\t\t\troot.utf8 = utf8;\n\t\t\t\t\t\t}\n\t\t\t\t\t})(this);\n\t\t\t\t}).call(this, typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {});\n\t\t\t}, {}],\n\t\t\t30: [function (_dereq_, module, exports) {\n\t\t\t\t'use strict';\n\n\t\t\t\tvar alphabet = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_'.split(''),\n\t\t\t\t    length = 64,\n\t\t\t\t    map = {},\n\t\t\t\t    seed = 0,\n\t\t\t\t    i = 0,\n\t\t\t\t    prev;\n\n\t\t\t\t/**\n     * Return a string representing the specified number.\n     *\n     * @param {Number} num The number to convert.\n     * @returns {String} The string representation of the number.\n     * @api public\n     */\n\t\t\t\tfunction encode(num) {\n\t\t\t\t\tvar encoded = '';\n\n\t\t\t\t\tdo {\n\t\t\t\t\t\tencoded = alphabet[num % length] + encoded;\n\t\t\t\t\t\tnum = Math.floor(num / length);\n\t\t\t\t\t} while (num > 0);\n\n\t\t\t\t\treturn encoded;\n\t\t\t\t}\n\n\t\t\t\t/**\n     * Return the integer value specified by the given string.\n     *\n     * @param {String} str The string to convert.\n     * @returns {Number} The integer value represented by the string.\n     * @api public\n     */\n\t\t\t\tfunction decode(str) {\n\t\t\t\t\tvar decoded = 0;\n\n\t\t\t\t\tfor (i = 0; i < str.length; i++) {\n\t\t\t\t\t\tdecoded = decoded * length + map[str.charAt(i)];\n\t\t\t\t\t}\n\n\t\t\t\t\treturn decoded;\n\t\t\t\t}\n\n\t\t\t\t/**\n     * Yeast: A tiny growing id generator.\n     *\n     * @returns {String} A unique id.\n     * @api public\n     */\n\t\t\t\tfunction yeast() {\n\t\t\t\t\tvar now = encode(+new Date());\n\n\t\t\t\t\tif (now !== prev) return seed = 0, prev = now;\n\t\t\t\t\treturn now + '.' + encode(seed++);\n\t\t\t\t}\n\n\t\t\t\t//\n\t\t\t\t// Map each character to its index.\n\t\t\t\t//\n\t\t\t\tfor (; i < length; i++) {\n\t\t\t\t\tmap[alphabet[i]] = i;\n\t\t\t\t} //\n\t\t\t\t// Expose the `yeast`, `encode` and `decode` functions.\n\t\t\t\t//\n\t\t\t\tyeast.encode = encode;\n\t\t\t\tyeast.decode = decode;\n\t\t\t\tmodule.exports = yeast;\n\t\t\t}, {}],\n\t\t\t31: [function (_dereq_, module, exports) {\n\n\t\t\t\t/**\n     * Module dependencies.\n     */\n\n\t\t\t\tvar url = _dereq_('./url');\n\t\t\t\tvar parser = _dereq_('socket.io-parser');\n\t\t\t\tvar Manager = _dereq_('./manager');\n\t\t\t\tvar debug = _dereq_('debug')('socket.io-client');\n\n\t\t\t\t/**\n     * Module exports.\n     */\n\n\t\t\t\tmodule.exports = exports = lookup;\n\n\t\t\t\t/**\n     * Managers cache.\n     */\n\n\t\t\t\tvar cache = exports.managers = {};\n\n\t\t\t\t/**\n     * Looks up an existing `Manager` for multiplexing.\n     * If the user summons:\n     *\n     *   `io('http://localhost/a');`\n     *   `io('http://localhost/b');`\n     *\n     * We reuse the existing instance based on same scheme/port/host,\n     * and we initialize sockets for each namespace.\n     *\n     * @api public\n     */\n\n\t\t\t\tfunction lookup(uri, opts) {\n\t\t\t\t\tif ((typeof uri === \"undefined\" ? \"undefined\" : _typeof(uri)) == 'object') {\n\t\t\t\t\t\topts = uri;\n\t\t\t\t\t\turi = undefined;\n\t\t\t\t\t}\n\n\t\t\t\t\topts = opts || {};\n\n\t\t\t\t\tvar parsed = url(uri);\n\t\t\t\t\tvar source = parsed.source;\n\t\t\t\t\tvar id = parsed.id;\n\t\t\t\t\tvar path = parsed.path;\n\t\t\t\t\tvar sameNamespace = cache[id] && path in cache[id].nsps;\n\t\t\t\t\tvar newConnection = opts.forceNew || opts['force new connection'] || false === opts.multiplex || sameNamespace;\n\n\t\t\t\t\tvar io;\n\n\t\t\t\t\tif (newConnection) {\n\t\t\t\t\t\tdebug('ignoring socket cache for %s', source);\n\t\t\t\t\t\tio = Manager(source, opts);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (!cache[id]) {\n\t\t\t\t\t\t\tdebug('new io instance for %s', source);\n\t\t\t\t\t\t\tcache[id] = Manager(source, opts);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tio = cache[id];\n\t\t\t\t\t}\n\n\t\t\t\t\treturn io.socket(parsed.path);\n\t\t\t\t}\n\n\t\t\t\t/**\n     * Protocol version.\n     *\n     * @api public\n     */\n\n\t\t\t\texports.protocol = parser.protocol;\n\n\t\t\t\t/**\n     * `connect`.\n     *\n     * @param {String} uri\n     * @api public\n     */\n\n\t\t\t\texports.connect = lookup;\n\n\t\t\t\t/**\n     * Expose constructors for standalone build.\n     *\n     * @api public\n     */\n\n\t\t\t\texports.Manager = _dereq_('./manager');\n\t\t\t\texports.Socket = _dereq_('./socket');\n\t\t\t}, {\n\t\t\t\t\"./manager\": 32,\n\t\t\t\t\"./socket\": 34,\n\t\t\t\t\"./url\": 35,\n\t\t\t\t\"debug\": 39,\n\t\t\t\t\"socket.io-parser\": 47\n\t\t\t}],\n\t\t\t32: [function (_dereq_, module, exports) {\n\n\t\t\t\t/**\n     * Module dependencies.\n     */\n\n\t\t\t\tvar eio = _dereq_('engine.io-client');\n\t\t\t\tvar Socket = _dereq_('./socket');\n\t\t\t\tvar Emitter = _dereq_('component-emitter');\n\t\t\t\tvar parser = _dereq_('socket.io-parser');\n\t\t\t\tvar on = _dereq_('./on');\n\t\t\t\tvar bind = _dereq_('component-bind');\n\t\t\t\tvar debug = _dereq_('debug')('socket.io-client:manager');\n\t\t\t\tvar indexOf = _dereq_('indexof');\n\t\t\t\tvar Backoff = _dereq_('backo2');\n\n\t\t\t\t/**\n     * IE6+ hasOwnProperty\n     */\n\n\t\t\t\tvar has = Object.prototype.hasOwnProperty;\n\n\t\t\t\t/**\n     * Module exports\n     */\n\n\t\t\t\tmodule.exports = Manager;\n\n\t\t\t\t/**\n     * `Manager` constructor.\n     *\n     * @param {String} engine instance or engine uri/opts\n     * @param {Object} options\n     * @api public\n     */\n\n\t\t\t\tfunction Manager(uri, opts) {\n\t\t\t\t\tif (!(this instanceof Manager)) return new Manager(uri, opts);\n\t\t\t\t\tif (uri && 'object' == (typeof uri === \"undefined\" ? \"undefined\" : _typeof(uri))) {\n\t\t\t\t\t\topts = uri;\n\t\t\t\t\t\turi = undefined;\n\t\t\t\t\t}\n\t\t\t\t\topts = opts || {};\n\n\t\t\t\t\topts.path = opts.path || '/socket.io';\n\t\t\t\t\tthis.nsps = {};\n\t\t\t\t\tthis.subs = [];\n\t\t\t\t\tthis.opts = opts;\n\t\t\t\t\tthis.reconnection(opts.reconnection !== false);\n\t\t\t\t\tthis.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n\t\t\t\t\tthis.reconnectionDelay(opts.reconnectionDelay || 1000);\n\t\t\t\t\tthis.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n\t\t\t\t\tthis.randomizationFactor(opts.randomizationFactor || 0.5);\n\t\t\t\t\tthis.backoff = new Backoff({\n\t\t\t\t\t\tmin: this.reconnectionDelay(),\n\t\t\t\t\t\tmax: this.reconnectionDelayMax(),\n\t\t\t\t\t\tjitter: this.randomizationFactor()\n\t\t\t\t\t});\n\t\t\t\t\tthis.timeout(null == opts.timeout ? 20000 : opts.timeout);\n\t\t\t\t\tthis.readyState = 'closed';\n\t\t\t\t\tthis.uri = uri;\n\t\t\t\t\tthis.connecting = [];\n\t\t\t\t\tthis.lastPing = null;\n\t\t\t\t\tthis.encoding = false;\n\t\t\t\t\tthis.packetBuffer = [];\n\t\t\t\t\tthis.encoder = new parser.Encoder();\n\t\t\t\t\tthis.decoder = new parser.Decoder();\n\t\t\t\t\tthis.autoConnect = opts.autoConnect !== false;\n\t\t\t\t\tif (this.autoConnect) this.open();\n\t\t\t\t}\n\n\t\t\t\t/**\n     * Propagate given event to sockets and emit on `this`\n     *\n     * @api private\n     */\n\n\t\t\t\tManager.prototype.emitAll = function () {\n\t\t\t\t\tthis.emit.apply(this, arguments);\n\t\t\t\t\tfor (var nsp in this.nsps) {\n\t\t\t\t\t\tif (has.call(this.nsps, nsp)) {\n\t\t\t\t\t\t\tthis.nsps[nsp].emit.apply(this.nsps[nsp], arguments);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Update `socket.id` of all sockets\n     *\n     * @api private\n     */\n\n\t\t\t\tManager.prototype.updateSocketIds = function () {\n\t\t\t\t\tfor (var nsp in this.nsps) {\n\t\t\t\t\t\tif (has.call(this.nsps, nsp)) {\n\t\t\t\t\t\t\tthis.nsps[nsp].id = this.engine.id;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Mix in `Emitter`.\n     */\n\n\t\t\t\tEmitter(Manager.prototype);\n\n\t\t\t\t/**\n     * Sets the `reconnection` config.\n     *\n     * @param {Boolean} true/false if it should automatically reconnect\n     * @return {Manager} self or value\n     * @api public\n     */\n\n\t\t\t\tManager.prototype.reconnection = function (v) {\n\t\t\t\t\tif (!arguments.length) return this._reconnection;\n\t\t\t\t\tthis._reconnection = !!v;\n\t\t\t\t\treturn this;\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Sets the reconnection attempts config.\n     *\n     * @param {Number} max reconnection attempts before giving up\n     * @return {Manager} self or value\n     * @api public\n     */\n\n\t\t\t\tManager.prototype.reconnectionAttempts = function (v) {\n\t\t\t\t\tif (!arguments.length) return this._reconnectionAttempts;\n\t\t\t\t\tthis._reconnectionAttempts = v;\n\t\t\t\t\treturn this;\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Sets the delay between reconnections.\n     *\n     * @param {Number} delay\n     * @return {Manager} self or value\n     * @api public\n     */\n\n\t\t\t\tManager.prototype.reconnectionDelay = function (v) {\n\t\t\t\t\tif (!arguments.length) return this._reconnectionDelay;\n\t\t\t\t\tthis._reconnectionDelay = v;\n\t\t\t\t\tthis.backoff && this.backoff.setMin(v);\n\t\t\t\t\treturn this;\n\t\t\t\t};\n\n\t\t\t\tManager.prototype.randomizationFactor = function (v) {\n\t\t\t\t\tif (!arguments.length) return this._randomizationFactor;\n\t\t\t\t\tthis._randomizationFactor = v;\n\t\t\t\t\tthis.backoff && this.backoff.setJitter(v);\n\t\t\t\t\treturn this;\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Sets the maximum delay between reconnections.\n     *\n     * @param {Number} delay\n     * @return {Manager} self or value\n     * @api public\n     */\n\n\t\t\t\tManager.prototype.reconnectionDelayMax = function (v) {\n\t\t\t\t\tif (!arguments.length) return this._reconnectionDelayMax;\n\t\t\t\t\tthis._reconnectionDelayMax = v;\n\t\t\t\t\tthis.backoff && this.backoff.setMax(v);\n\t\t\t\t\treturn this;\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Sets the connection timeout. `false` to disable\n     *\n     * @return {Manager} self or value\n     * @api public\n     */\n\n\t\t\t\tManager.prototype.timeout = function (v) {\n\t\t\t\t\tif (!arguments.length) return this._timeout;\n\t\t\t\t\tthis._timeout = v;\n\t\t\t\t\treturn this;\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Starts trying to reconnect if reconnection is enabled and we have not\n     * started reconnecting yet\n     *\n     * @api private\n     */\n\n\t\t\t\tManager.prototype.maybeReconnectOnOpen = function () {\n\t\t\t\t\t// Only try to reconnect if it's the first time we're connecting\n\t\t\t\t\tif (!this.reconnecting && this._reconnection && this.backoff.attempts === 0) {\n\t\t\t\t\t\t// keeps reconnection from firing twice for the same reconnection loop\n\t\t\t\t\t\tthis.reconnect();\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Sets the current transport `socket`.\n     *\n     * @param {Function} optional, callback\n     * @return {Manager} self\n     * @api public\n     */\n\n\t\t\t\tManager.prototype.open = Manager.prototype.connect = function (fn) {\n\t\t\t\t\tdebug('readyState %s', this.readyState);\n\t\t\t\t\tif (~this.readyState.indexOf('open')) return this;\n\n\t\t\t\t\tdebug('opening %s', this.uri);\n\t\t\t\t\tthis.engine = eio(this.uri, this.opts);\n\t\t\t\t\tvar socket = this.engine;\n\t\t\t\t\tvar self = this;\n\t\t\t\t\tthis.readyState = 'opening';\n\t\t\t\t\tthis.skipReconnect = false;\n\n\t\t\t\t\t// emit `open`\n\t\t\t\t\tvar openSub = on(socket, 'open', function () {\n\t\t\t\t\t\tself.onopen();\n\t\t\t\t\t\tfn && fn();\n\t\t\t\t\t});\n\n\t\t\t\t\t// emit `connect_error`\n\t\t\t\t\tvar errorSub = on(socket, 'error', function (data) {\n\t\t\t\t\t\tdebug('connect_error');\n\t\t\t\t\t\tself.cleanup();\n\t\t\t\t\t\tself.readyState = 'closed';\n\t\t\t\t\t\tself.emitAll('connect_error', data);\n\t\t\t\t\t\tif (fn) {\n\t\t\t\t\t\t\tvar err = new Error('Connection error');\n\t\t\t\t\t\t\terr.data = data;\n\t\t\t\t\t\t\tfn(err);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Only do this if there is no fn to handle the error\n\t\t\t\t\t\t\tself.maybeReconnectOnOpen();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\t// emit `connect_timeout`\n\t\t\t\t\tif (false !== this._timeout) {\n\t\t\t\t\t\tvar timeout = this._timeout;\n\t\t\t\t\t\tdebug('connect attempt will timeout after %d', timeout);\n\n\t\t\t\t\t\t// set timer\n\t\t\t\t\t\tvar timer = setTimeout(function () {\n\t\t\t\t\t\t\tdebug('connect attempt timed out after %d', timeout);\n\t\t\t\t\t\t\topenSub.destroy();\n\t\t\t\t\t\t\tsocket.close();\n\t\t\t\t\t\t\tsocket.emit('error', 'timeout');\n\t\t\t\t\t\t\tself.emitAll('connect_timeout', timeout);\n\t\t\t\t\t\t}, timeout);\n\n\t\t\t\t\t\tthis.subs.push({\n\t\t\t\t\t\t\tdestroy: function destroy() {\n\t\t\t\t\t\t\t\tclearTimeout(timer);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.subs.push(openSub);\n\t\t\t\t\tthis.subs.push(errorSub);\n\n\t\t\t\t\treturn this;\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Called upon transport open.\n     *\n     * @api private\n     */\n\n\t\t\t\tManager.prototype.onopen = function () {\n\t\t\t\t\tdebug('open');\n\n\t\t\t\t\t// clear old subs\n\t\t\t\t\tthis.cleanup();\n\n\t\t\t\t\t// mark as open\n\t\t\t\t\tthis.readyState = 'open';\n\t\t\t\t\tthis.emit('open');\n\n\t\t\t\t\t// add new subs\n\t\t\t\t\tvar socket = this.engine;\n\t\t\t\t\tthis.subs.push(on(socket, 'data', bind(this, 'ondata')));\n\t\t\t\t\tthis.subs.push(on(socket, 'ping', bind(this, 'onping')));\n\t\t\t\t\tthis.subs.push(on(socket, 'pong', bind(this, 'onpong')));\n\t\t\t\t\tthis.subs.push(on(socket, 'error', bind(this, 'onerror')));\n\t\t\t\t\tthis.subs.push(on(socket, 'close', bind(this, 'onclose')));\n\t\t\t\t\tthis.subs.push(on(this.decoder, 'decoded', bind(this, 'ondecoded')));\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Called upon a ping.\n     *\n     * @api private\n     */\n\n\t\t\t\tManager.prototype.onping = function () {\n\t\t\t\t\tthis.lastPing = new Date();\n\t\t\t\t\tthis.emitAll('ping');\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Called upon a packet.\n     *\n     * @api private\n     */\n\n\t\t\t\tManager.prototype.onpong = function () {\n\t\t\t\t\tthis.emitAll('pong', new Date() - this.lastPing);\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Called with data.\n     *\n     * @api private\n     */\n\n\t\t\t\tManager.prototype.ondata = function (data) {\n\t\t\t\t\tthis.decoder.add(data);\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Called when parser fully decodes a packet.\n     *\n     * @api private\n     */\n\n\t\t\t\tManager.prototype.ondecoded = function (packet) {\n\t\t\t\t\tthis.emit('packet', packet);\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Called upon socket error.\n     *\n     * @api private\n     */\n\n\t\t\t\tManager.prototype.onerror = function (err) {\n\t\t\t\t\tdebug('error', err);\n\t\t\t\t\tthis.emitAll('error', err);\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Creates a new socket for the given `nsp`.\n     *\n     * @return {Socket}\n     * @api public\n     */\n\n\t\t\t\tManager.prototype.socket = function (nsp) {\n\t\t\t\t\tvar socket = this.nsps[nsp];\n\t\t\t\t\tif (!socket) {\n\t\t\t\t\t\tsocket = new Socket(this, nsp);\n\t\t\t\t\t\tthis.nsps[nsp] = socket;\n\t\t\t\t\t\tvar self = this;\n\t\t\t\t\t\tsocket.on('connecting', onConnecting);\n\t\t\t\t\t\tsocket.on('connect', function () {\n\t\t\t\t\t\t\tsocket.id = self.engine.id;\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (this.autoConnect) {\n\t\t\t\t\t\t\t// manually call here since connecting evnet is fired before listening\n\t\t\t\t\t\t\tonConnecting();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tfunction onConnecting() {\n\t\t\t\t\t\tif (!~indexOf(self.connecting, socket)) {\n\t\t\t\t\t\t\tself.connecting.push(socket);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn socket;\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Called upon a socket close.\n     *\n     * @param {Socket} socket\n     */\n\n\t\t\t\tManager.prototype.destroy = function (socket) {\n\t\t\t\t\tvar index = indexOf(this.connecting, socket);\n\t\t\t\t\tif (~index) this.connecting.splice(index, 1);\n\t\t\t\t\tif (this.connecting.length) return;\n\n\t\t\t\t\tthis.close();\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Writes a packet.\n     *\n     * @param {Object} packet\n     * @api private\n     */\n\n\t\t\t\tManager.prototype.packet = function (packet) {\n\t\t\t\t\tdebug('writing packet %j', packet);\n\t\t\t\t\tvar self = this;\n\n\t\t\t\t\tif (!self.encoding) {\n\t\t\t\t\t\t// encode, then write to engine with result\n\t\t\t\t\t\tself.encoding = true;\n\t\t\t\t\t\tthis.encoder.encode(packet, function (encodedPackets) {\n\t\t\t\t\t\t\tfor (var i = 0; i < encodedPackets.length; i++) {\n\t\t\t\t\t\t\t\tself.engine.write(encodedPackets[i], packet.options);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tself.encoding = false;\n\t\t\t\t\t\t\tself.processPacketQueue();\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// add packet to the queue\n\t\t\t\t\t\tself.packetBuffer.push(packet);\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\t/**\n     * If packet buffer is non-empty, begins encoding the\n     * next packet in line.\n     *\n     * @api private\n     */\n\n\t\t\t\tManager.prototype.processPacketQueue = function () {\n\t\t\t\t\tif (this.packetBuffer.length > 0 && !this.encoding) {\n\t\t\t\t\t\tvar pack = this.packetBuffer.shift();\n\t\t\t\t\t\tthis.packet(pack);\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Clean up transport subscriptions and packet buffer.\n     *\n     * @api private\n     */\n\n\t\t\t\tManager.prototype.cleanup = function () {\n\t\t\t\t\tdebug('cleanup');\n\n\t\t\t\t\tvar sub;\n\t\t\t\t\twhile (sub = this.subs.shift()) {\n\t\t\t\t\t\tsub.destroy();\n\t\t\t\t\t}this.packetBuffer = [];\n\t\t\t\t\tthis.encoding = false;\n\t\t\t\t\tthis.lastPing = null;\n\n\t\t\t\t\tthis.decoder.destroy();\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Close the current socket.\n     *\n     * @api private\n     */\n\n\t\t\t\tManager.prototype.close = Manager.prototype.disconnect = function () {\n\t\t\t\t\tdebug('disconnect');\n\t\t\t\t\tthis.skipReconnect = true;\n\t\t\t\t\tthis.reconnecting = false;\n\t\t\t\t\tif ('opening' == this.readyState) {\n\t\t\t\t\t\t// `onclose` will not fire because\n\t\t\t\t\t\t// an open event never happened\n\t\t\t\t\t\tthis.cleanup();\n\t\t\t\t\t}\n\t\t\t\t\tthis.backoff.reset();\n\t\t\t\t\tthis.readyState = 'closed';\n\t\t\t\t\tif (this.engine) this.engine.close();\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Called upon engine close.\n     *\n     * @api private\n     */\n\n\t\t\t\tManager.prototype.onclose = function (reason) {\n\t\t\t\t\tdebug('onclose');\n\n\t\t\t\t\tthis.cleanup();\n\t\t\t\t\tthis.backoff.reset();\n\t\t\t\t\tthis.readyState = 'closed';\n\t\t\t\t\tthis.emit('close', reason);\n\n\t\t\t\t\tif (this._reconnection && !this.skipReconnect) {\n\t\t\t\t\t\tthis.reconnect();\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Attempt a reconnection.\n     *\n     * @api private\n     */\n\n\t\t\t\tManager.prototype.reconnect = function () {\n\t\t\t\t\tif (this.reconnecting || this.skipReconnect) return this;\n\n\t\t\t\t\tvar self = this;\n\n\t\t\t\t\tif (this.backoff.attempts >= this._reconnectionAttempts) {\n\t\t\t\t\t\tdebug('reconnect failed');\n\t\t\t\t\t\tthis.backoff.reset();\n\t\t\t\t\t\tthis.emitAll('reconnect_failed');\n\t\t\t\t\t\tthis.reconnecting = false;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar delay = this.backoff.duration();\n\t\t\t\t\t\tdebug('will wait %dms before reconnect attempt', delay);\n\n\t\t\t\t\t\tthis.reconnecting = true;\n\t\t\t\t\t\tvar timer = setTimeout(function () {\n\t\t\t\t\t\t\tif (self.skipReconnect) return;\n\n\t\t\t\t\t\t\tdebug('attempting reconnect');\n\t\t\t\t\t\t\tself.emitAll('reconnect_attempt', self.backoff.attempts);\n\t\t\t\t\t\t\tself.emitAll('reconnecting', self.backoff.attempts);\n\n\t\t\t\t\t\t\t// check again for the case socket closed in above events\n\t\t\t\t\t\t\tif (self.skipReconnect) return;\n\n\t\t\t\t\t\t\tself.open(function (err) {\n\t\t\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\t\t\tdebug('reconnect attempt error');\n\t\t\t\t\t\t\t\t\tself.reconnecting = false;\n\t\t\t\t\t\t\t\t\tself.reconnect();\n\t\t\t\t\t\t\t\t\tself.emitAll('reconnect_error', err.data);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tdebug('reconnect success');\n\t\t\t\t\t\t\t\t\tself.onreconnect();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}, delay);\n\n\t\t\t\t\t\tthis.subs.push({\n\t\t\t\t\t\t\tdestroy: function destroy() {\n\t\t\t\t\t\t\t\tclearTimeout(timer);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Called upon successful reconnect.\n     *\n     * @api private\n     */\n\n\t\t\t\tManager.prototype.onreconnect = function () {\n\t\t\t\t\tvar attempt = this.backoff.attempts;\n\t\t\t\t\tthis.reconnecting = false;\n\t\t\t\t\tthis.backoff.reset();\n\t\t\t\t\tthis.updateSocketIds();\n\t\t\t\t\tthis.emitAll('reconnect', attempt);\n\t\t\t\t};\n\t\t\t}, {\n\t\t\t\t\"./on\": 33,\n\t\t\t\t\"./socket\": 34,\n\t\t\t\t\"backo2\": 36,\n\t\t\t\t\"component-bind\": 37,\n\t\t\t\t\"component-emitter\": 38,\n\t\t\t\t\"debug\": 39,\n\t\t\t\t\"engine.io-client\": 1,\n\t\t\t\t\"indexof\": 42,\n\t\t\t\t\"socket.io-parser\": 47\n\t\t\t}],\n\t\t\t33: [function (_dereq_, module, exports) {\n\n\t\t\t\t/**\n     * Module exports.\n     */\n\n\t\t\t\tmodule.exports = on;\n\n\t\t\t\t/**\n     * Helper for subscriptions.\n     *\n     * @param {Object|EventEmitter} obj with `Emitter` mixin or `EventEmitter`\n     * @param {String} event name\n     * @param {Function} callback\n     * @api public\n     */\n\n\t\t\t\tfunction on(obj, ev, fn) {\n\t\t\t\t\tobj.on(ev, fn);\n\t\t\t\t\treturn {\n\t\t\t\t\t\tdestroy: function destroy() {\n\t\t\t\t\t\t\tobj.removeListener(ev, fn);\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}, {}],\n\t\t\t34: [function (_dereq_, module, exports) {\n\n\t\t\t\t/**\n     * Module dependencies.\n     */\n\n\t\t\t\tvar parser = _dereq_('socket.io-parser');\n\t\t\t\tvar Emitter = _dereq_('component-emitter');\n\t\t\t\tvar toArray = _dereq_('to-array');\n\t\t\t\tvar on = _dereq_('./on');\n\t\t\t\tvar bind = _dereq_('component-bind');\n\t\t\t\tvar debug = _dereq_('debug')('socket.io-client:socket');\n\t\t\t\tvar hasBin = _dereq_('has-binary');\n\n\t\t\t\t/**\n     * Module exports.\n     */\n\n\t\t\t\tmodule.exports = exports = Socket;\n\n\t\t\t\t/**\n     * Internal events (blacklisted).\n     * These events can't be emitted by the user.\n     *\n     * @api private\n     */\n\n\t\t\t\tvar events = {\n\t\t\t\t\tconnect: 1,\n\t\t\t\t\tconnect_error: 1,\n\t\t\t\t\tconnect_timeout: 1,\n\t\t\t\t\tconnecting: 1,\n\t\t\t\t\tdisconnect: 1,\n\t\t\t\t\terror: 1,\n\t\t\t\t\treconnect: 1,\n\t\t\t\t\treconnect_attempt: 1,\n\t\t\t\t\treconnect_failed: 1,\n\t\t\t\t\treconnect_error: 1,\n\t\t\t\t\treconnecting: 1,\n\t\t\t\t\tping: 1,\n\t\t\t\t\tpong: 1\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Shortcut to `Emitter#emit`.\n     */\n\n\t\t\t\tvar emit = Emitter.prototype.emit;\n\n\t\t\t\t/**\n     * `Socket` constructor.\n     *\n     * @api public\n     */\n\n\t\t\t\tfunction Socket(io, nsp) {\n\t\t\t\t\tthis.io = io;\n\t\t\t\t\tthis.nsp = nsp;\n\t\t\t\t\tthis.json = this; // compat\n\t\t\t\t\tthis.ids = 0;\n\t\t\t\t\tthis.acks = {};\n\t\t\t\t\tthis.receiveBuffer = [];\n\t\t\t\t\tthis.sendBuffer = [];\n\t\t\t\t\tthis.connected = false;\n\t\t\t\t\tthis.disconnected = true;\n\t\t\t\t\tif (this.io.autoConnect) this.open();\n\t\t\t\t}\n\n\t\t\t\t/**\n     * Mix in `Emitter`.\n     */\n\n\t\t\t\tEmitter(Socket.prototype);\n\n\t\t\t\t/**\n     * Subscribe to open, close and packet events\n     *\n     * @api private\n     */\n\n\t\t\t\tSocket.prototype.subEvents = function () {\n\t\t\t\t\tif (this.subs) return;\n\n\t\t\t\t\tvar io = this.io;\n\t\t\t\t\tthis.subs = [on(io, 'open', bind(this, 'onopen')), on(io, 'packet', bind(this, 'onpacket')), on(io, 'close', bind(this, 'onclose'))];\n\t\t\t\t};\n\n\t\t\t\t/**\n     * \"Opens\" the socket.\n     *\n     * @api public\n     */\n\n\t\t\t\tSocket.prototype.open = Socket.prototype.connect = function () {\n\t\t\t\t\tif (this.connected) return this;\n\n\t\t\t\t\tthis.subEvents();\n\t\t\t\t\tthis.io.open(); // ensure open\n\t\t\t\t\tif ('open' == this.io.readyState) this.onopen();\n\t\t\t\t\tthis.emit('connecting');\n\t\t\t\t\treturn this;\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Sends a `message` event.\n     *\n     * @return {Socket} self\n     * @api public\n     */\n\n\t\t\t\tSocket.prototype.send = function () {\n\t\t\t\t\tvar args = toArray(arguments);\n\t\t\t\t\targs.unshift('message');\n\t\t\t\t\tthis.emit.apply(this, args);\n\t\t\t\t\treturn this;\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Override `emit`.\n     * If the event is in `events`, it's emitted normally.\n     *\n     * @param {String} event name\n     * @return {Socket} self\n     * @api public\n     */\n\n\t\t\t\tSocket.prototype.emit = function (ev) {\n\t\t\t\t\tif (events.hasOwnProperty(ev)) {\n\t\t\t\t\t\temit.apply(this, arguments);\n\t\t\t\t\t\treturn this;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar args = toArray(arguments);\n\t\t\t\t\tvar parserType = parser.EVENT; // default\n\t\t\t\t\tif (hasBin(args)) {\n\t\t\t\t\t\tparserType = parser.BINARY_EVENT;\n\t\t\t\t\t} // binary\n\t\t\t\t\tvar packet = {\n\t\t\t\t\t\ttype: parserType,\n\t\t\t\t\t\tdata: args\n\t\t\t\t\t};\n\n\t\t\t\t\tpacket.options = {};\n\t\t\t\t\tpacket.options.compress = !this.flags || false !== this.flags.compress;\n\n\t\t\t\t\t// event ack callback\n\t\t\t\t\tif ('function' == typeof args[args.length - 1]) {\n\t\t\t\t\t\tdebug('emitting packet with ack id %d', this.ids);\n\t\t\t\t\t\tthis.acks[this.ids] = args.pop();\n\t\t\t\t\t\tpacket.id = this.ids++;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.connected) {\n\t\t\t\t\t\tthis.packet(packet);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.sendBuffer.push(packet);\n\t\t\t\t\t}\n\n\t\t\t\t\tdelete this.flags;\n\n\t\t\t\t\treturn this;\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Sends a packet.\n     *\n     * @param {Object} packet\n     * @api private\n     */\n\n\t\t\t\tSocket.prototype.packet = function (packet) {\n\t\t\t\t\tpacket.nsp = this.nsp;\n\t\t\t\t\tthis.io.packet(packet);\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Called upon engine `open`.\n     *\n     * @api private\n     */\n\n\t\t\t\tSocket.prototype.onopen = function () {\n\t\t\t\t\tdebug('transport is open - connecting');\n\n\t\t\t\t\t// write connect packet if necessary\n\t\t\t\t\tif ('/' != this.nsp) {\n\t\t\t\t\t\tthis.packet({\n\t\t\t\t\t\t\ttype: parser.CONNECT\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Called upon engine `close`.\n     *\n     * @param {String} reason\n     * @api private\n     */\n\n\t\t\t\tSocket.prototype.onclose = function (reason) {\n\t\t\t\t\tdebug('close (%s)', reason);\n\t\t\t\t\tthis.connected = false;\n\t\t\t\t\tthis.disconnected = true;\n\t\t\t\t\tdelete this.id;\n\t\t\t\t\tthis.emit('disconnect', reason);\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Called with socket packet.\n     *\n     * @param {Object} packet\n     * @api private\n     */\n\n\t\t\t\tSocket.prototype.onpacket = function (packet) {\n\t\t\t\t\tif (packet.nsp != this.nsp) return;\n\n\t\t\t\t\tswitch (packet.type) {\n\t\t\t\t\t\tcase parser.CONNECT:\n\t\t\t\t\t\t\tthis.onconnect();\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase parser.EVENT:\n\t\t\t\t\t\t\tthis.onevent(packet);\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase parser.BINARY_EVENT:\n\t\t\t\t\t\t\tthis.onevent(packet);\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase parser.ACK:\n\t\t\t\t\t\t\tthis.onack(packet);\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase parser.BINARY_ACK:\n\t\t\t\t\t\t\tthis.onack(packet);\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase parser.DISCONNECT:\n\t\t\t\t\t\t\tthis.ondisconnect();\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase parser.ERROR:\n\t\t\t\t\t\t\tthis.emit('error', packet.data);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Called upon a server event.\n     *\n     * @param {Object} packet\n     * @api private\n     */\n\n\t\t\t\tSocket.prototype.onevent = function (packet) {\n\t\t\t\t\tvar args = packet.data || [];\n\t\t\t\t\tdebug('emitting event %j', args);\n\n\t\t\t\t\tif (null != packet.id) {\n\t\t\t\t\t\tdebug('attaching ack callback to event');\n\t\t\t\t\t\targs.push(this.ack(packet.id));\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.connected) {\n\t\t\t\t\t\temit.apply(this, args);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.receiveBuffer.push(args);\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Produces an ack callback to emit with an event.\n     *\n     * @api private\n     */\n\n\t\t\t\tSocket.prototype.ack = function (id) {\n\t\t\t\t\tvar self = this;\n\t\t\t\t\tvar sent = false;\n\t\t\t\t\treturn function () {\n\t\t\t\t\t\t// prevent double callbacks\n\t\t\t\t\t\tif (sent) return;\n\t\t\t\t\t\tsent = true;\n\t\t\t\t\t\tvar args = toArray(arguments);\n\t\t\t\t\t\tdebug('sending ack %j', args);\n\n\t\t\t\t\t\tvar type = hasBin(args) ? parser.BINARY_ACK : parser.ACK;\n\t\t\t\t\t\tself.packet({\n\t\t\t\t\t\t\ttype: type,\n\t\t\t\t\t\t\tid: id,\n\t\t\t\t\t\t\tdata: args\n\t\t\t\t\t\t});\n\t\t\t\t\t};\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Called upon a server acknowlegement.\n     *\n     * @param {Object} packet\n     * @api private\n     */\n\n\t\t\t\tSocket.prototype.onack = function (packet) {\n\t\t\t\t\tvar ack = this.acks[packet.id];\n\t\t\t\t\tif ('function' == typeof ack) {\n\t\t\t\t\t\tdebug('calling ack %s with %j', packet.id, packet.data);\n\t\t\t\t\t\tack.apply(this, packet.data);\n\t\t\t\t\t\tdelete this.acks[packet.id];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdebug('bad ack %s', packet.id);\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Called upon server connect.\n     *\n     * @api private\n     */\n\n\t\t\t\tSocket.prototype.onconnect = function () {\n\t\t\t\t\tthis.connected = true;\n\t\t\t\t\tthis.disconnected = false;\n\t\t\t\t\tthis.emit('connect');\n\t\t\t\t\tthis.emitBuffered();\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Emit buffered events (received and emitted).\n     *\n     * @api private\n     */\n\n\t\t\t\tSocket.prototype.emitBuffered = function () {\n\t\t\t\t\tvar i;\n\t\t\t\t\tfor (i = 0; i < this.receiveBuffer.length; i++) {\n\t\t\t\t\t\temit.apply(this, this.receiveBuffer[i]);\n\t\t\t\t\t}\n\t\t\t\t\tthis.receiveBuffer = [];\n\n\t\t\t\t\tfor (i = 0; i < this.sendBuffer.length; i++) {\n\t\t\t\t\t\tthis.packet(this.sendBuffer[i]);\n\t\t\t\t\t}\n\t\t\t\t\tthis.sendBuffer = [];\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Called upon server disconnect.\n     *\n     * @api private\n     */\n\n\t\t\t\tSocket.prototype.ondisconnect = function () {\n\t\t\t\t\tdebug('server disconnect (%s)', this.nsp);\n\t\t\t\t\tthis.destroy();\n\t\t\t\t\tthis.onclose('io server disconnect');\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Called upon forced client/server side disconnections,\n     * this method ensures the manager stops tracking us and\n     * that reconnections don't get triggered for this.\n     *\n     * @api private.\n     */\n\n\t\t\t\tSocket.prototype.destroy = function () {\n\t\t\t\t\tif (this.subs) {\n\t\t\t\t\t\t// clean subscriptions to avoid reconnections\n\t\t\t\t\t\tfor (var i = 0; i < this.subs.length; i++) {\n\t\t\t\t\t\t\tthis.subs[i].destroy();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.subs = null;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.io.destroy(this);\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Disconnects the socket manually.\n     *\n     * @return {Socket} self\n     * @api public\n     */\n\n\t\t\t\tSocket.prototype.close = Socket.prototype.disconnect = function () {\n\t\t\t\t\tif (this.connected) {\n\t\t\t\t\t\tdebug('performing disconnect (%s)', this.nsp);\n\t\t\t\t\t\tthis.packet({\n\t\t\t\t\t\t\ttype: parser.DISCONNECT\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\t// remove socket from pool\n\t\t\t\t\tthis.destroy();\n\n\t\t\t\t\tif (this.connected) {\n\t\t\t\t\t\t// fire events\n\t\t\t\t\t\tthis.onclose('io client disconnect');\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Sets the compress flag.\n     *\n     * @param {Boolean} if `true`, compresses the sending data\n     * @return {Socket} self\n     * @api public\n     */\n\n\t\t\t\tSocket.prototype.compress = function (compress) {\n\t\t\t\t\tthis.flags = this.flags || {};\n\t\t\t\t\tthis.flags.compress = compress;\n\t\t\t\t\treturn this;\n\t\t\t\t};\n\t\t\t}, {\n\t\t\t\t\"./on\": 33,\n\t\t\t\t\"component-bind\": 37,\n\t\t\t\t\"component-emitter\": 38,\n\t\t\t\t\"debug\": 39,\n\t\t\t\t\"has-binary\": 41,\n\t\t\t\t\"socket.io-parser\": 47,\n\t\t\t\t\"to-array\": 51\n\t\t\t}],\n\t\t\t35: [function (_dereq_, module, exports) {\n\t\t\t\t(function (global) {\n\n\t\t\t\t\t/**\n      * Module dependencies.\n      */\n\n\t\t\t\t\tvar parseuri = _dereq_('parseuri');\n\t\t\t\t\tvar debug = _dereq_('debug')('socket.io-client:url');\n\n\t\t\t\t\t/**\n      * Module exports.\n      */\n\n\t\t\t\t\tmodule.exports = url;\n\n\t\t\t\t\t/**\n      * URL parser.\n      *\n      * @param {String} url\n      * @param {Object} An object meant to mimic window.location.\n      *                 Defaults to window.location.\n      * @api public\n      */\n\n\t\t\t\t\tfunction url(uri, loc) {\n\t\t\t\t\t\tvar obj = uri;\n\n\t\t\t\t\t\t// default to window.location\n\t\t\t\t\t\tvar loc = loc || global.location;\n\t\t\t\t\t\tif (null == uri) uri = loc.protocol + '//' + loc.host;\n\n\t\t\t\t\t\t// relative path support\n\t\t\t\t\t\tif ('string' == typeof uri) {\n\t\t\t\t\t\t\tif ('/' == uri.charAt(0)) {\n\t\t\t\t\t\t\t\tif ('/' == uri.charAt(1)) {\n\t\t\t\t\t\t\t\t\turi = loc.protocol + uri;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\turi = loc.host + uri;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (!/^(https?|wss?):\\/\\//.test(uri)) {\n\t\t\t\t\t\t\t\tdebug('protocol-less url %s', uri);\n\t\t\t\t\t\t\t\tif ('undefined' != typeof loc) {\n\t\t\t\t\t\t\t\t\turi = loc.protocol + '//' + uri;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\turi = 'https://' + uri;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// parse\n\t\t\t\t\t\t\tdebug('parse %s', uri);\n\t\t\t\t\t\t\tobj = parseuri(uri);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// make sure we treat `localhost:80` and `localhost` equally\n\t\t\t\t\t\tif (!obj.port) {\n\t\t\t\t\t\t\tif (/^(http|ws)$/.test(obj.protocol)) {\n\t\t\t\t\t\t\t\tobj.port = '80';\n\t\t\t\t\t\t\t} else if (/^(http|ws)s$/.test(obj.protocol)) {\n\t\t\t\t\t\t\t\tobj.port = '443';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tobj.path = obj.path || '/';\n\n\t\t\t\t\t\tvar ipv6 = obj.host.indexOf(':') !== -1;\n\t\t\t\t\t\tvar host = ipv6 ? '[' + obj.host + ']' : obj.host;\n\n\t\t\t\t\t\t// define unique id\n\t\t\t\t\t\tobj.id = obj.protocol + '://' + host + ':' + obj.port;\n\t\t\t\t\t\t// define href\n\t\t\t\t\t\tobj.href = obj.protocol + '://' + host + (loc && loc.port == obj.port ? '' : ':' + obj.port);\n\n\t\t\t\t\t\treturn obj;\n\t\t\t\t\t}\n\t\t\t\t}).call(this, typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {});\n\t\t\t}, {\n\t\t\t\t\"debug\": 39,\n\t\t\t\t\"parseuri\": 45\n\t\t\t}],\n\t\t\t36: [function (_dereq_, module, exports) {\n\n\t\t\t\t/**\n     * Expose `Backoff`.\n     */\n\n\t\t\t\tmodule.exports = Backoff;\n\n\t\t\t\t/**\n     * Initialize backoff timer with `opts`.\n     *\n     * - `min` initial timeout in milliseconds [100]\n     * - `max` max timeout [10000]\n     * - `jitter` [0]\n     * - `factor` [2]\n     *\n     * @param {Object} opts\n     * @api public\n     */\n\n\t\t\t\tfunction Backoff(opts) {\n\t\t\t\t\topts = opts || {};\n\t\t\t\t\tthis.ms = opts.min || 100;\n\t\t\t\t\tthis.max = opts.max || 10000;\n\t\t\t\t\tthis.factor = opts.factor || 2;\n\t\t\t\t\tthis.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n\t\t\t\t\tthis.attempts = 0;\n\t\t\t\t}\n\n\t\t\t\t/**\n     * Return the backoff duration.\n     *\n     * @return {Number}\n     * @api public\n     */\n\n\t\t\t\tBackoff.prototype.duration = function () {\n\t\t\t\t\tvar ms = this.ms * Math.pow(this.factor, this.attempts++);\n\t\t\t\t\tif (this.jitter) {\n\t\t\t\t\t\tvar rand = Math.random();\n\t\t\t\t\t\tvar deviation = Math.floor(rand * this.jitter * ms);\n\t\t\t\t\t\tms = (Math.floor(rand * 10) & 1) == 0 ? ms - deviation : ms + deviation;\n\t\t\t\t\t}\n\t\t\t\t\treturn Math.min(ms, this.max) | 0;\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Reset the number of attempts.\n     *\n     * @api public\n     */\n\n\t\t\t\tBackoff.prototype.reset = function () {\n\t\t\t\t\tthis.attempts = 0;\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Set the minimum duration\n     *\n     * @api public\n     */\n\n\t\t\t\tBackoff.prototype.setMin = function (min) {\n\t\t\t\t\tthis.ms = min;\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Set the maximum duration\n     *\n     * @api public\n     */\n\n\t\t\t\tBackoff.prototype.setMax = function (max) {\n\t\t\t\t\tthis.max = max;\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Set the jitter\n     *\n     * @api public\n     */\n\n\t\t\t\tBackoff.prototype.setJitter = function (jitter) {\n\t\t\t\t\tthis.jitter = jitter;\n\t\t\t\t};\n\t\t\t}, {}],\n\t\t\t37: [function (_dereq_, module, exports) {\n\t\t\t\t/**\n     * Slice reference.\n     */\n\n\t\t\t\tvar slice = [].slice;\n\n\t\t\t\t/**\n     * Bind `obj` to `fn`.\n     *\n     * @param {Object} obj\n     * @param {Function|String} fn or string\n     * @return {Function}\n     * @api public\n     */\n\n\t\t\t\tmodule.exports = function (obj, fn) {\n\t\t\t\t\tif ('string' == typeof fn) fn = obj[fn];\n\t\t\t\t\tif ('function' != typeof fn) throw new Error('bind() requires a function');\n\t\t\t\t\tvar args = slice.call(arguments, 2);\n\t\t\t\t\treturn function () {\n\t\t\t\t\t\treturn fn.apply(obj, args.concat(slice.call(arguments)));\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\t}, {}],\n\t\t\t38: [function (_dereq_, module, exports) {\n\n\t\t\t\t/**\n     * Expose `Emitter`.\n     */\n\n\t\t\t\tmodule.exports = Emitter;\n\n\t\t\t\t/**\n     * Initialize a new `Emitter`.\n     *\n     * @api public\n     */\n\n\t\t\t\tfunction Emitter(obj) {\n\t\t\t\t\tif (obj) return mixin(obj);\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Mixin the emitter properties.\n     *\n     * @param {Object} obj\n     * @return {Object}\n     * @api private\n     */\n\n\t\t\t\tfunction mixin(obj) {\n\t\t\t\t\tfor (var key in Emitter.prototype) {\n\t\t\t\t\t\tobj[key] = Emitter.prototype[key];\n\t\t\t\t\t}\n\t\t\t\t\treturn obj;\n\t\t\t\t}\n\n\t\t\t\t/**\n     * Listen on the given `event` with `fn`.\n     *\n     * @param {String} event\n     * @param {Function} fn\n     * @return {Emitter}\n     * @api public\n     */\n\n\t\t\t\tEmitter.prototype.on = Emitter.prototype.addEventListener = function (event, fn) {\n\t\t\t\t\tthis._callbacks = this._callbacks || {};\n\t\t\t\t\t(this._callbacks['$' + event] = this._callbacks['$' + event] || []).push(fn);\n\t\t\t\t\treturn this;\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Adds an `event` listener that will be invoked a single\n     * time then automatically removed.\n     *\n     * @param {String} event\n     * @param {Function} fn\n     * @return {Emitter}\n     * @api public\n     */\n\n\t\t\t\tEmitter.prototype.once = function (event, fn) {\n\t\t\t\t\tfunction on() {\n\t\t\t\t\t\tthis.off(event, on);\n\t\t\t\t\t\tfn.apply(this, arguments);\n\t\t\t\t\t}\n\n\t\t\t\t\ton.fn = fn;\n\t\t\t\t\tthis.on(event, on);\n\t\t\t\t\treturn this;\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Remove the given callback for `event` or all\n     * registered callbacks.\n     *\n     * @param {String} event\n     * @param {Function} fn\n     * @return {Emitter}\n     * @api public\n     */\n\n\t\t\t\tEmitter.prototype.off = Emitter.prototype.removeListener = Emitter.prototype.removeAllListeners = Emitter.prototype.removeEventListener = function (event, fn) {\n\t\t\t\t\tthis._callbacks = this._callbacks || {};\n\n\t\t\t\t\t// all\n\t\t\t\t\tif (0 == arguments.length) {\n\t\t\t\t\t\tthis._callbacks = {};\n\t\t\t\t\t\treturn this;\n\t\t\t\t\t}\n\n\t\t\t\t\t// specific event\n\t\t\t\t\tvar callbacks = this._callbacks['$' + event];\n\t\t\t\t\tif (!callbacks) return this;\n\n\t\t\t\t\t// remove all handlers\n\t\t\t\t\tif (1 == arguments.length) {\n\t\t\t\t\t\tdelete this._callbacks['$' + event];\n\t\t\t\t\t\treturn this;\n\t\t\t\t\t}\n\n\t\t\t\t\t// remove specific handler\n\t\t\t\t\tvar cb;\n\t\t\t\t\tfor (var i = 0; i < callbacks.length; i++) {\n\t\t\t\t\t\tcb = callbacks[i];\n\t\t\t\t\t\tif (cb === fn || cb.fn === fn) {\n\t\t\t\t\t\t\tcallbacks.splice(i, 1);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Emit `event` with the given args.\n     *\n     * @param {String} event\n     * @param {Mixed} ...\n     * @return {Emitter}\n     */\n\n\t\t\t\tEmitter.prototype.emit = function (event) {\n\t\t\t\t\tthis._callbacks = this._callbacks || {};\n\t\t\t\t\tvar args = [].slice.call(arguments, 1),\n\t\t\t\t\t    callbacks = this._callbacks['$' + event];\n\n\t\t\t\t\tif (callbacks) {\n\t\t\t\t\t\tcallbacks = callbacks.slice(0);\n\t\t\t\t\t\tfor (var i = 0, len = callbacks.length; i < len; ++i) {\n\t\t\t\t\t\t\tcallbacks[i].apply(this, args);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this;\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Return array of callbacks for `event`.\n     *\n     * @param {String} event\n     * @return {Array}\n     * @api public\n     */\n\n\t\t\t\tEmitter.prototype.listeners = function (event) {\n\t\t\t\t\tthis._callbacks = this._callbacks || {};\n\t\t\t\t\treturn this._callbacks['$' + event] || [];\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Check if this emitter has `event` handlers.\n     *\n     * @param {String} event\n     * @return {Boolean}\n     * @api public\n     */\n\n\t\t\t\tEmitter.prototype.hasListeners = function (event) {\n\t\t\t\t\treturn !!this.listeners(event).length;\n\t\t\t\t};\n\t\t\t}, {}],\n\t\t\t39: [function (_dereq_, module, exports) {\n\t\t\t\targuments[4][17][0].apply(exports, arguments);\n\t\t\t}, {\n\t\t\t\t\"./debug\": 40,\n\t\t\t\t\"dup\": 17\n\t\t\t}],\n\t\t\t40: [function (_dereq_, module, exports) {\n\t\t\t\targuments[4][18][0].apply(exports, arguments);\n\t\t\t}, {\n\t\t\t\t\"dup\": 18,\n\t\t\t\t\"ms\": 44\n\t\t\t}],\n\t\t\t41: [function (_dereq_, module, exports) {\n\t\t\t\t(function (global) {\n\n\t\t\t\t\t/*\n      * Module requirements.\n      */\n\n\t\t\t\t\tvar isArray = _dereq_('isarray');\n\n\t\t\t\t\t/**\n      * Module exports.\n      */\n\n\t\t\t\t\tmodule.exports = hasBinary;\n\n\t\t\t\t\t/**\n      * Checks for binary data.\n      *\n      * Right now only Buffer and ArrayBuffer are supported..\n      *\n      * @param {Object} anything\n      * @api public\n      */\n\n\t\t\t\t\tfunction hasBinary(data) {\n\n\t\t\t\t\t\tfunction _hasBinary(obj) {\n\t\t\t\t\t\t\tif (!obj) return false;\n\n\t\t\t\t\t\t\tif (global.Buffer && global.Buffer.isBuffer && global.Buffer.isBuffer(obj) || global.ArrayBuffer && obj instanceof ArrayBuffer || global.Blob && obj instanceof Blob || global.File && obj instanceof File) {\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (isArray(obj)) {\n\t\t\t\t\t\t\t\tfor (var i = 0; i < obj.length; i++) {\n\t\t\t\t\t\t\t\t\tif (_hasBinary(obj[i])) {\n\t\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if (obj && 'object' == (typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj))) {\n\t\t\t\t\t\t\t\t// see: https://github.com/Automattic/has-binary/pull/4\n\t\t\t\t\t\t\t\tif (obj.toJSON && 'function' == typeof obj.toJSON) {\n\t\t\t\t\t\t\t\t\tobj = obj.toJSON();\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tfor (var key in obj) {\n\t\t\t\t\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(obj, key) && _hasBinary(obj[key])) {\n\t\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn _hasBinary(data);\n\t\t\t\t\t}\n\t\t\t\t}).call(this, typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {});\n\t\t\t}, {\n\t\t\t\t\"isarray\": 43\n\t\t\t}],\n\t\t\t42: [function (_dereq_, module, exports) {\n\t\t\t\targuments[4][23][0].apply(exports, arguments);\n\t\t\t}, {\n\t\t\t\t\"dup\": 23\n\t\t\t}],\n\t\t\t43: [function (_dereq_, module, exports) {\n\t\t\t\targuments[4][24][0].apply(exports, arguments);\n\t\t\t}, {\n\t\t\t\t\"dup\": 24\n\t\t\t}],\n\t\t\t44: [function (_dereq_, module, exports) {\n\t\t\t\targuments[4][25][0].apply(exports, arguments);\n\t\t\t}, {\n\t\t\t\t\"dup\": 25\n\t\t\t}],\n\t\t\t45: [function (_dereq_, module, exports) {\n\t\t\t\targuments[4][28][0].apply(exports, arguments);\n\t\t\t}, {\n\t\t\t\t\"dup\": 28\n\t\t\t}],\n\t\t\t46: [function (_dereq_, module, exports) {\n\t\t\t\t(function (global) {\n\t\t\t\t\t/*global Blob,File*/\n\n\t\t\t\t\t/**\n      * Module requirements\n      */\n\n\t\t\t\t\tvar isArray = _dereq_('isarray');\n\t\t\t\t\tvar isBuf = _dereq_('./is-buffer');\n\n\t\t\t\t\t/**\n      * Replaces every Buffer | ArrayBuffer in packet with a numbered placeholder.\n      * Anything with blobs or files should be fed through removeBlobs before coming\n      * here.\n      *\n      * @param {Object} packet - socket.io event packet\n      * @return {Object} with deconstructed packet and list of buffers\n      * @api public\n      */\n\n\t\t\t\t\texports.deconstructPacket = function (packet) {\n\t\t\t\t\t\tvar buffers = [];\n\t\t\t\t\t\tvar packetData = packet.data;\n\n\t\t\t\t\t\tfunction _deconstructPacket(data) {\n\t\t\t\t\t\t\tif (!data) return data;\n\n\t\t\t\t\t\t\tif (isBuf(data)) {\n\t\t\t\t\t\t\t\tvar placeholder = {\n\t\t\t\t\t\t\t\t\t_placeholder: true,\n\t\t\t\t\t\t\t\t\tnum: buffers.length\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tbuffers.push(data);\n\t\t\t\t\t\t\t\treturn placeholder;\n\t\t\t\t\t\t\t} else if (isArray(data)) {\n\t\t\t\t\t\t\t\tvar newData = new Array(data.length);\n\t\t\t\t\t\t\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\t\t\t\t\t\t\tnewData[i] = _deconstructPacket(data[i]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn newData;\n\t\t\t\t\t\t\t} else if ('object' == (typeof data === \"undefined\" ? \"undefined\" : _typeof(data)) && !(data instanceof Date)) {\n\t\t\t\t\t\t\t\tvar newData = {};\n\t\t\t\t\t\t\t\tfor (var key in data) {\n\t\t\t\t\t\t\t\t\tnewData[key] = _deconstructPacket(data[key]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn newData;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn data;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar pack = packet;\n\t\t\t\t\t\tpack.data = _deconstructPacket(packetData);\n\t\t\t\t\t\tpack.attachments = buffers.length; // number of binary 'attachments'\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tpacket: pack,\n\t\t\t\t\t\t\tbuffers: buffers\n\t\t\t\t\t\t};\n\t\t\t\t\t};\n\n\t\t\t\t\t/**\n      * Reconstructs a binary packet from its placeholder packet and buffers\n      *\n      * @param {Object} packet - event packet with placeholders\n      * @param {Array} buffers - binary buffers to put in placeholder positions\n      * @return {Object} reconstructed packet\n      * @api public\n      */\n\n\t\t\t\t\texports.reconstructPacket = function (packet, buffers) {\n\t\t\t\t\t\tvar curPlaceHolder = 0;\n\n\t\t\t\t\t\tfunction _reconstructPacket(data) {\n\t\t\t\t\t\t\tif (data && data._placeholder) {\n\t\t\t\t\t\t\t\tvar buf = buffers[data.num]; // appropriate buffer (should be natural order anyway)\n\t\t\t\t\t\t\t\treturn buf;\n\t\t\t\t\t\t\t} else if (isArray(data)) {\n\t\t\t\t\t\t\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\t\t\t\t\t\t\tdata[i] = _reconstructPacket(data[i]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn data;\n\t\t\t\t\t\t\t} else if (data && 'object' == (typeof data === \"undefined\" ? \"undefined\" : _typeof(data))) {\n\t\t\t\t\t\t\t\tfor (var key in data) {\n\t\t\t\t\t\t\t\t\tdata[key] = _reconstructPacket(data[key]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn data;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn data;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tpacket.data = _reconstructPacket(packet.data);\n\t\t\t\t\t\tpacket.attachments = undefined; // no longer useful\n\t\t\t\t\t\treturn packet;\n\t\t\t\t\t};\n\n\t\t\t\t\t/**\n      * Asynchronously removes Blobs or Files from data via\n      * FileReader's readAsArrayBuffer method. Used before encoding\n      * data as msgpack. Calls callback with the blobless data.\n      *\n      * @param {Object} data\n      * @param {Function} callback\n      * @api private\n      */\n\n\t\t\t\t\texports.removeBlobs = function (data, callback) {\n\t\t\t\t\t\tfunction _removeBlobs(obj, curKey, containingObject) {\n\t\t\t\t\t\t\tif (!obj) return obj;\n\n\t\t\t\t\t\t\t// convert any blob\n\t\t\t\t\t\t\tif (global.Blob && obj instanceof Blob || global.File && obj instanceof File) {\n\t\t\t\t\t\t\t\tpendingBlobs++;\n\n\t\t\t\t\t\t\t\t// async filereader\n\t\t\t\t\t\t\t\tvar fileReader = new FileReader();\n\t\t\t\t\t\t\t\tfileReader.onload = function () {\n\t\t\t\t\t\t\t\t\t// this.result == arraybuffer\n\t\t\t\t\t\t\t\t\tif (containingObject) {\n\t\t\t\t\t\t\t\t\t\tcontainingObject[curKey] = this.result;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tbloblessData = this.result;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t// if nothing pending its callback time\n\t\t\t\t\t\t\t\t\tif (! --pendingBlobs) {\n\t\t\t\t\t\t\t\t\t\tcallback(bloblessData);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\tfileReader.readAsArrayBuffer(obj); // blob -> arraybuffer\n\t\t\t\t\t\t\t} else if (isArray(obj)) {\n\t\t\t\t\t\t\t\t// handle array\n\t\t\t\t\t\t\t\tfor (var i = 0; i < obj.length; i++) {\n\t\t\t\t\t\t\t\t\t_removeBlobs(obj[i], i, obj);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if (obj && 'object' == (typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj)) && !isBuf(obj)) {\n\t\t\t\t\t\t\t\t// and object\n\t\t\t\t\t\t\t\tfor (var key in obj) {\n\t\t\t\t\t\t\t\t\t_removeBlobs(obj[key], key, obj);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar pendingBlobs = 0;\n\t\t\t\t\t\tvar bloblessData = data;\n\t\t\t\t\t\t_removeBlobs(bloblessData);\n\t\t\t\t\t\tif (!pendingBlobs) {\n\t\t\t\t\t\t\tcallback(bloblessData);\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t}).call(this, typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {});\n\t\t\t}, {\n\t\t\t\t\"./is-buffer\": 48,\n\t\t\t\t\"isarray\": 43\n\t\t\t}],\n\t\t\t47: [function (_dereq_, module, exports) {\n\n\t\t\t\t/**\n     * Module dependencies.\n     */\n\n\t\t\t\tvar debug = _dereq_('debug')('socket.io-parser');\n\t\t\t\tvar json = _dereq_('json3');\n\t\t\t\tvar isArray = _dereq_('isarray');\n\t\t\t\tvar Emitter = _dereq_('component-emitter');\n\t\t\t\tvar binary = _dereq_('./binary');\n\t\t\t\tvar isBuf = _dereq_('./is-buffer');\n\n\t\t\t\t/**\n     * Protocol version.\n     *\n     * @api public\n     */\n\n\t\t\t\texports.protocol = 4;\n\n\t\t\t\t/**\n     * Packet types.\n     *\n     * @api public\n     */\n\n\t\t\t\texports.types = ['CONNECT', 'DISCONNECT', 'EVENT', 'BINARY_EVENT', 'ACK', 'BINARY_ACK', 'ERROR'];\n\n\t\t\t\t/**\n     * Packet type `connect`.\n     *\n     * @api public\n     */\n\n\t\t\t\texports.CONNECT = 0;\n\n\t\t\t\t/**\n     * Packet type `disconnect`.\n     *\n     * @api public\n     */\n\n\t\t\t\texports.DISCONNECT = 1;\n\n\t\t\t\t/**\n     * Packet type `event`.\n     *\n     * @api public\n     */\n\n\t\t\t\texports.EVENT = 2;\n\n\t\t\t\t/**\n     * Packet type `ack`.\n     *\n     * @api public\n     */\n\n\t\t\t\texports.ACK = 3;\n\n\t\t\t\t/**\n     * Packet type `error`.\n     *\n     * @api public\n     */\n\n\t\t\t\texports.ERROR = 4;\n\n\t\t\t\t/**\n     * Packet type 'binary event'\n     *\n     * @api public\n     */\n\n\t\t\t\texports.BINARY_EVENT = 5;\n\n\t\t\t\t/**\n     * Packet type `binary ack`. For acks with binary arguments.\n     *\n     * @api public\n     */\n\n\t\t\t\texports.BINARY_ACK = 6;\n\n\t\t\t\t/**\n     * Encoder constructor.\n     *\n     * @api public\n     */\n\n\t\t\t\texports.Encoder = Encoder;\n\n\t\t\t\t/**\n     * Decoder constructor.\n     *\n     * @api public\n     */\n\n\t\t\t\texports.Decoder = Decoder;\n\n\t\t\t\t/**\n     * A socket.io Encoder instance\n     *\n     * @api public\n     */\n\n\t\t\t\tfunction Encoder() {}\n\n\t\t\t\t/**\n     * Encode a packet as a single string if non-binary, or as a\n     * buffer sequence, depending on packet type.\n     *\n     * @param {Object} obj - packet object\n     * @param {Function} callback - function to handle encodings (likely engine.write)\n     * @return Calls callback with Array of encodings\n     * @api public\n     */\n\n\t\t\t\tEncoder.prototype.encode = function (obj, callback) {\n\t\t\t\t\tdebug('encoding packet %j', obj);\n\n\t\t\t\t\tif (exports.BINARY_EVENT == obj.type || exports.BINARY_ACK == obj.type) {\n\t\t\t\t\t\tencodeAsBinary(obj, callback);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar encoding = encodeAsString(obj);\n\t\t\t\t\t\tcallback([encoding]);\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Encode packet as string.\n     *\n     * @param {Object} packet\n     * @return {String} encoded\n     * @api private\n     */\n\n\t\t\t\tfunction encodeAsString(obj) {\n\t\t\t\t\tvar str = '';\n\t\t\t\t\tvar nsp = false;\n\n\t\t\t\t\t// first is type\n\t\t\t\t\tstr += obj.type;\n\n\t\t\t\t\t// attachments if we have them\n\t\t\t\t\tif (exports.BINARY_EVENT == obj.type || exports.BINARY_ACK == obj.type) {\n\t\t\t\t\t\tstr += obj.attachments;\n\t\t\t\t\t\tstr += '-';\n\t\t\t\t\t}\n\n\t\t\t\t\t// if we have a namespace other than `/`\n\t\t\t\t\t// we append it followed by a comma `,`\n\t\t\t\t\tif (obj.nsp && '/' != obj.nsp) {\n\t\t\t\t\t\tnsp = true;\n\t\t\t\t\t\tstr += obj.nsp;\n\t\t\t\t\t}\n\n\t\t\t\t\t// immediately followed by the id\n\t\t\t\t\tif (null != obj.id) {\n\t\t\t\t\t\tif (nsp) {\n\t\t\t\t\t\t\tstr += ',';\n\t\t\t\t\t\t\tnsp = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tstr += obj.id;\n\t\t\t\t\t}\n\n\t\t\t\t\t// json data\n\t\t\t\t\tif (null != obj.data) {\n\t\t\t\t\t\tif (nsp) str += ',';\n\t\t\t\t\t\tstr += json.stringify(obj.data);\n\t\t\t\t\t}\n\n\t\t\t\t\tdebug('encoded %j as %s', obj, str);\n\t\t\t\t\treturn str;\n\t\t\t\t}\n\n\t\t\t\t/**\n     * Encode packet as 'buffer sequence' by removing blobs, and\n     * deconstructing packet into object with placeholders and\n     * a list of buffers.\n     *\n     * @param {Object} packet\n     * @return {Buffer} encoded\n     * @api private\n     */\n\n\t\t\t\tfunction encodeAsBinary(obj, callback) {\n\n\t\t\t\t\tfunction writeEncoding(bloblessData) {\n\t\t\t\t\t\tvar deconstruction = binary.deconstructPacket(bloblessData);\n\t\t\t\t\t\tvar pack = encodeAsString(deconstruction.packet);\n\t\t\t\t\t\tvar buffers = deconstruction.buffers;\n\n\t\t\t\t\t\tbuffers.unshift(pack); // add packet info to beginning of data list\n\t\t\t\t\t\tcallback(buffers); // write all the buffers\n\t\t\t\t\t}\n\n\t\t\t\t\tbinary.removeBlobs(obj, writeEncoding);\n\t\t\t\t}\n\n\t\t\t\t/**\n     * A socket.io Decoder instance\n     *\n     * @return {Object} decoder\n     * @api public\n     */\n\n\t\t\t\tfunction Decoder() {\n\t\t\t\t\tthis.reconstructor = null;\n\t\t\t\t}\n\n\t\t\t\t/**\n     * Mix in `Emitter` with Decoder.\n     */\n\n\t\t\t\tEmitter(Decoder.prototype);\n\n\t\t\t\t/**\n     * Decodes an ecoded packet string into packet JSON.\n     *\n     * @param {String} obj - encoded packet\n     * @return {Object} packet\n     * @api public\n     */\n\n\t\t\t\tDecoder.prototype.add = function (obj) {\n\t\t\t\t\tvar packet;\n\t\t\t\t\tif ('string' == typeof obj) {\n\t\t\t\t\t\tpacket = decodeString(obj);\n\t\t\t\t\t\tif (exports.BINARY_EVENT == packet.type || exports.BINARY_ACK == packet.type) {\n\t\t\t\t\t\t\t// binary packet's json\n\t\t\t\t\t\t\tthis.reconstructor = new BinaryReconstructor(packet);\n\n\t\t\t\t\t\t\t// no attachments, labeled binary but no binary data to follow\n\t\t\t\t\t\t\tif (this.reconstructor.reconPack.attachments === 0) {\n\t\t\t\t\t\t\t\tthis.emit('decoded', packet);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// non-binary full packet\n\t\t\t\t\t\t\tthis.emit('decoded', packet);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (isBuf(obj) || obj.base64) {\n\t\t\t\t\t\t// raw binary data\n\t\t\t\t\t\tif (!this.reconstructor) {\n\t\t\t\t\t\t\tthrow new Error('got binary data when not reconstructing a packet');\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tpacket = this.reconstructor.takeBinaryData(obj);\n\t\t\t\t\t\t\tif (packet) {\n\t\t\t\t\t\t\t\t// received final buffer\n\t\t\t\t\t\t\t\tthis.reconstructor = null;\n\t\t\t\t\t\t\t\tthis.emit('decoded', packet);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow new Error('Unknown type: ' + obj);\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Decode a packet String (JSON data)\n     *\n     * @param {String} str\n     * @return {Object} packet\n     * @api private\n     */\n\n\t\t\t\tfunction decodeString(str) {\n\t\t\t\t\tvar p = {};\n\t\t\t\t\tvar i = 0;\n\n\t\t\t\t\t// look up type\n\t\t\t\t\tp.type = Number(str.charAt(0));\n\t\t\t\t\tif (null == exports.types[p.type]) return error();\n\n\t\t\t\t\t// look up attachments if type binary\n\t\t\t\t\tif (exports.BINARY_EVENT == p.type || exports.BINARY_ACK == p.type) {\n\t\t\t\t\t\tvar buf = '';\n\t\t\t\t\t\twhile (str.charAt(++i) != '-') {\n\t\t\t\t\t\t\tbuf += str.charAt(i);\n\t\t\t\t\t\t\tif (i == str.length) break;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (buf != Number(buf) || str.charAt(i) != '-') {\n\t\t\t\t\t\t\tthrow new Error('Illegal attachments');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tp.attachments = Number(buf);\n\t\t\t\t\t}\n\n\t\t\t\t\t// look up namespace (if any)\n\t\t\t\t\tif ('/' == str.charAt(i + 1)) {\n\t\t\t\t\t\tp.nsp = '';\n\t\t\t\t\t\twhile (++i) {\n\t\t\t\t\t\t\tvar c = str.charAt(i);\n\t\t\t\t\t\t\tif (',' == c) break;\n\t\t\t\t\t\t\tp.nsp += c;\n\t\t\t\t\t\t\tif (i == str.length) break;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tp.nsp = '/';\n\t\t\t\t\t}\n\n\t\t\t\t\t// look up id\n\t\t\t\t\tvar next = str.charAt(i + 1);\n\t\t\t\t\tif ('' !== next && Number(next) == next) {\n\t\t\t\t\t\tp.id = '';\n\t\t\t\t\t\twhile (++i) {\n\t\t\t\t\t\t\tvar c = str.charAt(i);\n\t\t\t\t\t\t\tif (null == c || Number(c) != c) {\n\t\t\t\t\t\t\t\t--i;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tp.id += str.charAt(i);\n\t\t\t\t\t\t\tif (i == str.length) break;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tp.id = Number(p.id);\n\t\t\t\t\t}\n\n\t\t\t\t\t// look up json data\n\t\t\t\t\tif (str.charAt(++i)) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tp.data = json.parse(str.substr(i));\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\treturn error();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tdebug('decoded %s as %j', str, p);\n\t\t\t\t\treturn p;\n\t\t\t\t}\n\n\t\t\t\t/**\n     * Deallocates a parser's resources\n     *\n     * @api public\n     */\n\n\t\t\t\tDecoder.prototype.destroy = function () {\n\t\t\t\t\tif (this.reconstructor) {\n\t\t\t\t\t\tthis.reconstructor.finishedReconstruction();\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\t/**\n     * A manager of a binary event's 'buffer sequence'. Should\n     * be constructed whenever a packet of type BINARY_EVENT is\n     * decoded.\n     *\n     * @param {Object} packet\n     * @return {BinaryReconstructor} initialized reconstructor\n     * @api private\n     */\n\n\t\t\t\tfunction BinaryReconstructor(packet) {\n\t\t\t\t\tthis.reconPack = packet;\n\t\t\t\t\tthis.buffers = [];\n\t\t\t\t}\n\n\t\t\t\t/**\n     * Method to be called when binary data received from connection\n     * after a BINARY_EVENT packet.\n     *\n     * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n     * @return {null | Object} returns null if more binary data is expected or\n     *   a reconstructed packet object if all buffers have been received.\n     * @api private\n     */\n\n\t\t\t\tBinaryReconstructor.prototype.takeBinaryData = function (binData) {\n\t\t\t\t\tthis.buffers.push(binData);\n\t\t\t\t\tif (this.buffers.length == this.reconPack.attachments) {\n\t\t\t\t\t\t// done with buffer list\n\t\t\t\t\t\tvar packet = binary.reconstructPacket(this.reconPack, this.buffers);\n\t\t\t\t\t\tthis.finishedReconstruction();\n\t\t\t\t\t\treturn packet;\n\t\t\t\t\t}\n\t\t\t\t\treturn null;\n\t\t\t\t};\n\n\t\t\t\t/**\n     * Cleans up binary packet reconstruction variables.\n     *\n     * @api private\n     */\n\n\t\t\t\tBinaryReconstructor.prototype.finishedReconstruction = function () {\n\t\t\t\t\tthis.reconPack = null;\n\t\t\t\t\tthis.buffers = [];\n\t\t\t\t};\n\n\t\t\t\tfunction error(data) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttype: exports.ERROR,\n\t\t\t\t\t\tdata: 'parser error'\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}, {\n\t\t\t\t\"./binary\": 46,\n\t\t\t\t\"./is-buffer\": 48,\n\t\t\t\t\"component-emitter\": 49,\n\t\t\t\t\"debug\": 39,\n\t\t\t\t\"isarray\": 43,\n\t\t\t\t\"json3\": 50\n\t\t\t}],\n\t\t\t48: [function (_dereq_, module, exports) {\n\t\t\t\t(function (global) {\n\n\t\t\t\t\tmodule.exports = isBuf;\n\n\t\t\t\t\t/**\n      * Returns true if obj is a buffer or an arraybuffer.\n      *\n      * @api private\n      */\n\n\t\t\t\t\tfunction isBuf(obj) {\n\t\t\t\t\t\treturn global.Buffer && global.Buffer.isBuffer(obj) || global.ArrayBuffer && obj instanceof ArrayBuffer;\n\t\t\t\t\t}\n\t\t\t\t}).call(this, typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {});\n\t\t\t}, {}],\n\t\t\t49: [function (_dereq_, module, exports) {\n\t\t\t\targuments[4][15][0].apply(exports, arguments);\n\t\t\t}, {\n\t\t\t\t\"dup\": 15\n\t\t\t}],\n\t\t\t50: [function (_dereq_, module, exports) {\n\t\t\t\t(function (global) {\n\t\t\t\t\t/*! JSON v3.3.2 | http://bestiejs.github.io/json3 | Copyright 2012-2014, Kit Cambridge | http://kit.mit-license.org */\n\t\t\t\t\t;\n\t\t\t\t\t(function () {\n\t\t\t\t\t\t// Detect the `define` function exposed by asynchronous module loaders. The\n\t\t\t\t\t\t// strict `define` check is necessary for compatibility with `r.js`.\n\t\t\t\t\t\tvar isLoader = typeof define === \"function\" && define.amd;\n\n\t\t\t\t\t\t// A set of types used to distinguish objects from primitives.\n\t\t\t\t\t\tvar objectTypes = {\n\t\t\t\t\t\t\t\"function\": true,\n\t\t\t\t\t\t\t\"object\": true\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t// Detect the `exports` object exposed by CommonJS implementations.\n\t\t\t\t\t\tvar freeExports = objectTypes[typeof exports === \"undefined\" ? \"undefined\" : _typeof(exports)] && exports && !exports.nodeType && exports;\n\n\t\t\t\t\t\t// Use the `global` object exposed by Node (including Browserify via\n\t\t\t\t\t\t// `insert-module-globals`), Narwhal, and Ringo as the default context,\n\t\t\t\t\t\t// and the `window` object in browsers. Rhino exports a `global` function\n\t\t\t\t\t\t// instead.\n\t\t\t\t\t\tvar root = objectTypes[typeof window === \"undefined\" ? \"undefined\" : _typeof(window)] && window || this,\n\t\t\t\t\t\t    freeGlobal = freeExports && objectTypes[typeof module === \"undefined\" ? \"undefined\" : _typeof(module)] && module && !module.nodeType && (typeof global === \"undefined\" ? \"undefined\" : _typeof(global)) == \"object\" && global;\n\n\t\t\t\t\t\tif (freeGlobal && (freeGlobal[\"global\"] === freeGlobal || freeGlobal[\"window\"] === freeGlobal || freeGlobal[\"self\"] === freeGlobal)) {\n\t\t\t\t\t\t\troot = freeGlobal;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Public: Initializes JSON 3 using the given `context` object, attaching the\n\t\t\t\t\t\t// `stringify` and `parse` functions to the specified `exports` object.\n\t\t\t\t\t\tfunction runInContext(context, exports) {\n\t\t\t\t\t\t\tcontext || (context = root[\"Object\"]());\n\t\t\t\t\t\t\texports || (exports = root[\"Object\"]());\n\n\t\t\t\t\t\t\t// Native constructor aliases.\n\t\t\t\t\t\t\tvar Number = context[\"Number\"] || root[\"Number\"],\n\t\t\t\t\t\t\t    String = context[\"String\"] || root[\"String\"],\n\t\t\t\t\t\t\t    Object = context[\"Object\"] || root[\"Object\"],\n\t\t\t\t\t\t\t    Date = context[\"Date\"] || root[\"Date\"],\n\t\t\t\t\t\t\t    SyntaxError = context[\"SyntaxError\"] || root[\"SyntaxError\"],\n\t\t\t\t\t\t\t    TypeError = context[\"TypeError\"] || root[\"TypeError\"],\n\t\t\t\t\t\t\t    Math = context[\"Math\"] || root[\"Math\"],\n\t\t\t\t\t\t\t    nativeJSON = context[\"JSON\"] || root[\"JSON\"];\n\n\t\t\t\t\t\t\t// Delegate to the native `stringify` and `parse` implementations.\n\t\t\t\t\t\t\tif ((typeof nativeJSON === \"undefined\" ? \"undefined\" : _typeof(nativeJSON)) == \"object\" && nativeJSON) {\n\t\t\t\t\t\t\t\texports.stringify = nativeJSON.stringify;\n\t\t\t\t\t\t\t\texports.parse = nativeJSON.parse;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Convenience aliases.\n\t\t\t\t\t\t\tvar objectProto = Object.prototype,\n\t\t\t\t\t\t\t    getClass = objectProto.toString,\n\t\t\t\t\t\t\t    _isProperty,\n\t\t\t\t\t\t\t    _forEach,\n\t\t\t\t\t\t\t    undef;\n\n\t\t\t\t\t\t\t// Test the `Date#getUTC*` methods. Based on work by @Yaffle.\n\t\t\t\t\t\t\tvar isExtended = new Date(-3509827334573292);\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t// The `getUTCFullYear`, `Month`, and `Date` methods return nonsensical\n\t\t\t\t\t\t\t\t// results for certain dates in Opera >= 10.53.\n\t\t\t\t\t\t\t\tisExtended = isExtended.getUTCFullYear() == -109252 && isExtended.getUTCMonth() === 0 && isExtended.getUTCDate() === 1 &&\n\t\t\t\t\t\t\t\t// Safari < 2.0.2 stores the internal millisecond time value correctly,\n\t\t\t\t\t\t\t\t// but clips the values returned by the date methods to the range of\n\t\t\t\t\t\t\t\t// signed 32-bit integers ([-2 ** 31, 2 ** 31 - 1]).\n\t\t\t\t\t\t\t\tisExtended.getUTCHours() == 10 && isExtended.getUTCMinutes() == 37 && isExtended.getUTCSeconds() == 6 && isExtended.getUTCMilliseconds() == 708;\n\t\t\t\t\t\t\t} catch (exception) {}\n\n\t\t\t\t\t\t\t// Internal: Determines whether the native `JSON.stringify` and `parse`\n\t\t\t\t\t\t\t// implementations are spec-compliant. Based on work by Ken Snyder.\n\t\t\t\t\t\t\tfunction has(name) {\n\t\t\t\t\t\t\t\tif (has[name] !== undef) {\n\t\t\t\t\t\t\t\t\t// Return cached feature test result.\n\t\t\t\t\t\t\t\t\treturn has[name];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tvar isSupported;\n\t\t\t\t\t\t\t\tif (name == \"bug-string-char-index\") {\n\t\t\t\t\t\t\t\t\t// IE <= 7 doesn't support accessing string characters using square\n\t\t\t\t\t\t\t\t\t// bracket notation. IE 8 only supports this for primitives.\n\t\t\t\t\t\t\t\t\tisSupported = \"a\"[0] != \"a\";\n\t\t\t\t\t\t\t\t} else if (name == \"json\") {\n\t\t\t\t\t\t\t\t\t// Indicates whether both `JSON.stringify` and `JSON.parse` are\n\t\t\t\t\t\t\t\t\t// supported.\n\t\t\t\t\t\t\t\t\tisSupported = has(\"json-stringify\") && has(\"json-parse\");\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tvar value,\n\t\t\t\t\t\t\t\t\t    serialized = \"{\\\"a\\\":[1,true,false,null,\\\"\\\\u0000\\\\b\\\\n\\\\f\\\\r\\\\t\\\"]}\";\n\t\t\t\t\t\t\t\t\t// Test `JSON.stringify`.\n\t\t\t\t\t\t\t\t\tif (name == \"json-stringify\") {\n\t\t\t\t\t\t\t\t\t\tvar stringify = exports.stringify,\n\t\t\t\t\t\t\t\t\t\t    stringifySupported = typeof stringify == \"function\" && isExtended;\n\t\t\t\t\t\t\t\t\t\tif (stringifySupported) {\n\t\t\t\t\t\t\t\t\t\t\t// A test function object with a custom `toJSON` method.\n\t\t\t\t\t\t\t\t\t\t\t(value = function value() {\n\t\t\t\t\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t\t\t\t\t}).toJSON = value;\n\t\t\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\t\t\tstringifySupported =\n\t\t\t\t\t\t\t\t\t\t\t\t// Firefox 3.1b1 and b2 serialize string, number, and boolean\n\t\t\t\t\t\t\t\t\t\t\t\t// primitives as object literals.\n\t\t\t\t\t\t\t\t\t\t\t\tstringify(0) === \"0\" &&\n\t\t\t\t\t\t\t\t\t\t\t\t// FF 3.1b1, b2, and JSON 2 serialize wrapped primitives as object\n\t\t\t\t\t\t\t\t\t\t\t\t// literals.\n\t\t\t\t\t\t\t\t\t\t\t\tstringify(new Number()) === \"0\" && stringify(new String()) == '\"\"' &&\n\t\t\t\t\t\t\t\t\t\t\t\t// FF 3.1b1, 2 throw an error if the value is `null`, `undefined`, or\n\t\t\t\t\t\t\t\t\t\t\t\t// does not define a canonical JSON representation (this applies to\n\t\t\t\t\t\t\t\t\t\t\t\t// objects with `toJSON` properties as well, *unless* they are nested\n\t\t\t\t\t\t\t\t\t\t\t\t// within an object or array).\n\t\t\t\t\t\t\t\t\t\t\t\tstringify(getClass) === undef &&\n\t\t\t\t\t\t\t\t\t\t\t\t// IE 8 serializes `undefined` as `\"undefined\"`. Safari <= 5.1.7 and\n\t\t\t\t\t\t\t\t\t\t\t\t// FF 3.1b3 pass this test.\n\t\t\t\t\t\t\t\t\t\t\t\tstringify(undef) === undef &&\n\t\t\t\t\t\t\t\t\t\t\t\t// Safari <= 5.1.7 and FF 3.1b3 throw `Error`s and `TypeError`s,\n\t\t\t\t\t\t\t\t\t\t\t\t// respectively, if the value is omitted entirely.\n\t\t\t\t\t\t\t\t\t\t\t\tstringify() === undef &&\n\t\t\t\t\t\t\t\t\t\t\t\t// FF 3.1b1, 2 throw an error if the given value is not a number,\n\t\t\t\t\t\t\t\t\t\t\t\t// string, array, object, Boolean, or `null` literal. This applies to\n\t\t\t\t\t\t\t\t\t\t\t\t// objects with custom `toJSON` methods as well, unless they are nested\n\t\t\t\t\t\t\t\t\t\t\t\t// inside object or array literals. YUI 3.0.0b1 ignores custom `toJSON`\n\t\t\t\t\t\t\t\t\t\t\t\t// methods entirely.\n\t\t\t\t\t\t\t\t\t\t\t\tstringify(value) === \"1\" && stringify([value]) == \"[1]\" &&\n\t\t\t\t\t\t\t\t\t\t\t\t// Prototype <= 1.6.1 serializes `[undefined]` as `\"[]\"` instead of\n\t\t\t\t\t\t\t\t\t\t\t\t// `\"[null]\"`.\n\t\t\t\t\t\t\t\t\t\t\t\tstringify([undef]) == \"[null]\" &&\n\t\t\t\t\t\t\t\t\t\t\t\t// YUI 3.0.0b1 fails to serialize `null` literals.\n\t\t\t\t\t\t\t\t\t\t\t\tstringify(null) == \"null\" &&\n\t\t\t\t\t\t\t\t\t\t\t\t// FF 3.1b1, 2 halts serialization if an array contains a function:\n\t\t\t\t\t\t\t\t\t\t\t\t// `[1, true, getClass, 1]` serializes as \"[1,true,],\". FF 3.1b3\n\t\t\t\t\t\t\t\t\t\t\t\t// elides non-JSON values from objects and arrays, unless they\n\t\t\t\t\t\t\t\t\t\t\t\t// define custom `toJSON` methods.\n\t\t\t\t\t\t\t\t\t\t\t\tstringify([undef, getClass, null]) == \"[null,null,null]\" &&\n\t\t\t\t\t\t\t\t\t\t\t\t// Simple serialization test. FF 3.1b1 uses Unicode escape sequences\n\t\t\t\t\t\t\t\t\t\t\t\t// where character escape codes are expected (e.g., `\\b` => `\\u0008`).\n\t\t\t\t\t\t\t\t\t\t\t\tstringify({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"a\": [value, true, false, null, \"\\x00\\b\\n\\f\\r\\t\"]\n\t\t\t\t\t\t\t\t\t\t\t\t}) == serialized &&\n\t\t\t\t\t\t\t\t\t\t\t\t// FF 3.1b1 and b2 ignore the `filter` and `width` arguments.\n\t\t\t\t\t\t\t\t\t\t\t\tstringify(null, value) === \"1\" && stringify([1, 2], null, 1) == \"[\\n 1,\\n 2\\n]\" &&\n\t\t\t\t\t\t\t\t\t\t\t\t// JSON 2, Prototype <= 1.7, and older WebKit builds incorrectly\n\t\t\t\t\t\t\t\t\t\t\t\t// serialize extended years.\n\t\t\t\t\t\t\t\t\t\t\t\tstringify(new Date(-8.64e15)) == '\"-271821-04-20T00:00:00.000Z\"' &&\n\t\t\t\t\t\t\t\t\t\t\t\t// The milliseconds are optional in ES 5, but required in 5.1.\n\t\t\t\t\t\t\t\t\t\t\t\tstringify(new Date(8.64e15)) == '\"+275760-09-13T00:00:00.000Z\"' &&\n\t\t\t\t\t\t\t\t\t\t\t\t// Firefox <= 11.0 incorrectly serializes years prior to 0 as negative\n\t\t\t\t\t\t\t\t\t\t\t\t// four-digit years instead of six-digit years. Credits: @Yaffle.\n\t\t\t\t\t\t\t\t\t\t\t\tstringify(new Date(-621987552e5)) == '\"-000001-01-01T00:00:00.000Z\"' &&\n\t\t\t\t\t\t\t\t\t\t\t\t// Safari <= 5.1.5 and Opera >= 10.53 incorrectly serialize millisecond\n\t\t\t\t\t\t\t\t\t\t\t\t// values less than 1000. Credits: @Yaffle.\n\t\t\t\t\t\t\t\t\t\t\t\tstringify(new Date(-1)) == '\"1969-12-31T23:59:59.999Z\"';\n\t\t\t\t\t\t\t\t\t\t\t} catch (exception) {\n\t\t\t\t\t\t\t\t\t\t\t\tstringifySupported = false;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tisSupported = stringifySupported;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t// Test `JSON.parse`.\n\t\t\t\t\t\t\t\t\tif (name == \"json-parse\") {\n\t\t\t\t\t\t\t\t\t\tvar parse = exports.parse;\n\t\t\t\t\t\t\t\t\t\tif (typeof parse == \"function\") {\n\t\t\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\t\t\t// FF 3.1b1, b2 will throw an exception if a bare literal is provided.\n\t\t\t\t\t\t\t\t\t\t\t\t// Conforming implementations should also coerce the initial argument to\n\t\t\t\t\t\t\t\t\t\t\t\t// a string prior to parsing.\n\t\t\t\t\t\t\t\t\t\t\t\tif (parse(\"0\") === 0 && !parse(false)) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t// Simple parsing test.\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue = parse(serialized);\n\t\t\t\t\t\t\t\t\t\t\t\t\tvar parseSupported = value[\"a\"].length == 5 && value[\"a\"][0] === 1;\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (parseSupported) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Safari <= 5.1.2 and FF 3.1b1 allow unescaped tabs in strings.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tparseSupported = !parse('\"\\t\"');\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} catch (exception) {}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (parseSupported) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// FF 4.0 and 4.0.1 allow leading `+` signs and leading\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// decimal points. FF 4.0, 4.0.1, and IE 9-10 also allow\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// certain octal literals.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tparseSupported = parse(\"01\") !== 1;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} catch (exception) {}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (parseSupported) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// FF 4.0, 4.0.1, and Rhino 1.7R3-R4 allow trailing decimal\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// points. These environments, along with FF 3.1b1 and 2,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// also allow trailing commas in JSON objects and arrays.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tparseSupported = parse(\"1.\") !== 1;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} catch (exception) {}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t} catch (exception) {\n\t\t\t\t\t\t\t\t\t\t\t\tparseSupported = false;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tisSupported = parseSupported;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn has[name] = !!isSupported;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (!has(\"json\")) {\n\t\t\t\t\t\t\t\t// Common `[[Class]]` name aliases.\n\t\t\t\t\t\t\t\tvar functionClass = \"[object Function]\",\n\t\t\t\t\t\t\t\t    dateClass = \"[object Date]\",\n\t\t\t\t\t\t\t\t    numberClass = \"[object Number]\",\n\t\t\t\t\t\t\t\t    stringClass = \"[object String]\",\n\t\t\t\t\t\t\t\t    arrayClass = \"[object Array]\",\n\t\t\t\t\t\t\t\t    booleanClass = \"[object Boolean]\";\n\n\t\t\t\t\t\t\t\t// Detect incomplete support for accessing string characters by index.\n\t\t\t\t\t\t\t\tvar charIndexBuggy = has(\"bug-string-char-index\");\n\n\t\t\t\t\t\t\t\t// Define additional utility methods if the `Date` methods are buggy.\n\t\t\t\t\t\t\t\tif (!isExtended) {\n\t\t\t\t\t\t\t\t\tvar floor = Math.floor;\n\t\t\t\t\t\t\t\t\t// A mapping between the months of the year and the number of days between\n\t\t\t\t\t\t\t\t\t// January 1st and the first of the respective month.\n\t\t\t\t\t\t\t\t\tvar Months = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334];\n\t\t\t\t\t\t\t\t\t// Internal: Calculates the number of days between the Unix epoch and the\n\t\t\t\t\t\t\t\t\t// first day of the given month.\n\t\t\t\t\t\t\t\t\tvar getDay = function getDay(year, month) {\n\t\t\t\t\t\t\t\t\t\treturn Months[month] + 365 * (year - 1970) + floor((year - 1969 + (month = +(month > 1))) / 4) - floor((year - 1901 + month) / 100) + floor((year - 1601 + month) / 400);\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// Internal: Determines if a property is a direct property of the given\n\t\t\t\t\t\t\t\t// object. Delegates to the native `Object#hasOwnProperty` method.\n\t\t\t\t\t\t\t\tif (!(_isProperty = objectProto.hasOwnProperty)) {\n\t\t\t\t\t\t\t\t\t_isProperty = function isProperty(property) {\n\t\t\t\t\t\t\t\t\t\tvar members = {},\n\t\t\t\t\t\t\t\t\t\t    constructor;\n\t\t\t\t\t\t\t\t\t\tif ((members.__proto__ = null, members.__proto__ = {\n\t\t\t\t\t\t\t\t\t\t\t// The *proto* property cannot be set multiple times in recent\n\t\t\t\t\t\t\t\t\t\t\t// versions of Firefox and SeaMonkey.\n\t\t\t\t\t\t\t\t\t\t\t\"toString\": 1\n\t\t\t\t\t\t\t\t\t\t}, members).toString != getClass) {\n\t\t\t\t\t\t\t\t\t\t\t// Safari <= 2.0.3 doesn't implement `Object#hasOwnProperty`, but\n\t\t\t\t\t\t\t\t\t\t\t// supports the mutable *proto* property.\n\t\t\t\t\t\t\t\t\t\t\t_isProperty = function isProperty(property) {\n\t\t\t\t\t\t\t\t\t\t\t\t// Capture and break the object's prototype chain (see section 8.6.2\n\t\t\t\t\t\t\t\t\t\t\t\t// of the ES 5.1 spec). The parenthesized expression prevents an\n\t\t\t\t\t\t\t\t\t\t\t\t// unsafe transformation by the Closure Compiler.\n\t\t\t\t\t\t\t\t\t\t\t\tvar original = this.__proto__,\n\t\t\t\t\t\t\t\t\t\t\t\t    result = property in (this.__proto__ = null, this);\n\t\t\t\t\t\t\t\t\t\t\t\t// Restore the original prototype chain.\n\t\t\t\t\t\t\t\t\t\t\t\tthis.__proto__ = original;\n\t\t\t\t\t\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t// Capture a reference to the top-level `Object` constructor.\n\t\t\t\t\t\t\t\t\t\t\tconstructor = members.constructor;\n\t\t\t\t\t\t\t\t\t\t\t// Use the `constructor` property to simulate `Object#hasOwnProperty` in\n\t\t\t\t\t\t\t\t\t\t\t// other environments.\n\t\t\t\t\t\t\t\t\t\t\t_isProperty = function isProperty(property) {\n\t\t\t\t\t\t\t\t\t\t\t\tvar parent = (this.constructor || constructor).prototype;\n\t\t\t\t\t\t\t\t\t\t\t\treturn property in this && !(property in parent && this[property] === parent[property]);\n\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tmembers = null;\n\t\t\t\t\t\t\t\t\t\treturn _isProperty.call(this, property);\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// Internal: Normalizes the `for...in` iteration algorithm across\n\t\t\t\t\t\t\t\t// environments. Each enumerated key is yielded to a `callback` function.\n\t\t\t\t\t\t\t\t_forEach = function forEach(object, callback) {\n\t\t\t\t\t\t\t\t\tvar size = 0,\n\t\t\t\t\t\t\t\t\t    Properties,\n\t\t\t\t\t\t\t\t\t    members,\n\t\t\t\t\t\t\t\t\t    property;\n\n\t\t\t\t\t\t\t\t\t// Tests for bugs in the current environment's `for...in` algorithm. The\n\t\t\t\t\t\t\t\t\t// `valueOf` property inherits the non-enumerable flag from\n\t\t\t\t\t\t\t\t\t// `Object.prototype` in older versions of IE, Netscape, and Mozilla.\n\t\t\t\t\t\t\t\t\t(Properties = function Properties() {\n\t\t\t\t\t\t\t\t\t\tthis.valueOf = 0;\n\t\t\t\t\t\t\t\t\t}).prototype.valueOf = 0;\n\n\t\t\t\t\t\t\t\t\t// Iterate over a new instance of the `Properties` class.\n\t\t\t\t\t\t\t\t\tmembers = new Properties();\n\t\t\t\t\t\t\t\t\tfor (property in members) {\n\t\t\t\t\t\t\t\t\t\t// Ignore all properties inherited from `Object.prototype`.\n\t\t\t\t\t\t\t\t\t\tif (_isProperty.call(members, property)) {\n\t\t\t\t\t\t\t\t\t\t\tsize++;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tProperties = members = null;\n\n\t\t\t\t\t\t\t\t\t// Normalize the iteration algorithm.\n\t\t\t\t\t\t\t\t\tif (!size) {\n\t\t\t\t\t\t\t\t\t\t// A list of non-enumerable properties inherited from `Object.prototype`.\n\t\t\t\t\t\t\t\t\t\tmembers = [\"valueOf\", \"toString\", \"toLocaleString\", \"propertyIsEnumerable\", \"isPrototypeOf\", \"hasOwnProperty\", \"constructor\"];\n\t\t\t\t\t\t\t\t\t\t// IE <= 8, Mozilla 1.0, and Netscape 6.2 ignore shadowed non-enumerable\n\t\t\t\t\t\t\t\t\t\t// properties.\n\t\t\t\t\t\t\t\t\t\t_forEach = function forEach(object, callback) {\n\t\t\t\t\t\t\t\t\t\t\tvar isFunction = getClass.call(object) == functionClass,\n\t\t\t\t\t\t\t\t\t\t\t    property,\n\t\t\t\t\t\t\t\t\t\t\t    length;\n\t\t\t\t\t\t\t\t\t\t\tvar hasProperty = !isFunction && typeof object.constructor != \"function\" && objectTypes[_typeof(object.hasOwnProperty)] && object.hasOwnProperty || _isProperty;\n\t\t\t\t\t\t\t\t\t\t\tfor (property in object) {\n\t\t\t\t\t\t\t\t\t\t\t\t// Gecko <= 1.0 enumerates the `prototype` property of functions under\n\t\t\t\t\t\t\t\t\t\t\t\t// certain conditions; IE does not.\n\t\t\t\t\t\t\t\t\t\t\t\tif (!(isFunction && property == \"prototype\") && hasProperty.call(object, property)) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tcallback(property);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t// Manually invoke the callback for each non-enumerable property.\n\t\t\t\t\t\t\t\t\t\t\tfor (length = members.length; property = members[--length]; hasProperty.call(object, property) && callback(property)) {}\n\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t} else if (size == 2) {\n\t\t\t\t\t\t\t\t\t\t// Safari <= 2.0.4 enumerates shadowed properties twice.\n\t\t\t\t\t\t\t\t\t\t_forEach = function forEach(object, callback) {\n\t\t\t\t\t\t\t\t\t\t\t// Create a set of iterated properties.\n\t\t\t\t\t\t\t\t\t\t\tvar members = {},\n\t\t\t\t\t\t\t\t\t\t\t    isFunction = getClass.call(object) == functionClass,\n\t\t\t\t\t\t\t\t\t\t\t    property;\n\t\t\t\t\t\t\t\t\t\t\tfor (property in object) {\n\t\t\t\t\t\t\t\t\t\t\t\t// Store each property name to prevent double enumeration. The\n\t\t\t\t\t\t\t\t\t\t\t\t// `prototype` property of functions is not enumerated due to cross-\n\t\t\t\t\t\t\t\t\t\t\t\t// environment inconsistencies.\n\t\t\t\t\t\t\t\t\t\t\t\tif (!(isFunction && property == \"prototype\") && !_isProperty.call(members, property) && (members[property] = 1) && _isProperty.call(object, property)) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tcallback(property);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t// No bugs detected; use the standard `for...in` algorithm.\n\t\t\t\t\t\t\t\t\t\t_forEach = function forEach(object, callback) {\n\t\t\t\t\t\t\t\t\t\t\tvar isFunction = getClass.call(object) == functionClass,\n\t\t\t\t\t\t\t\t\t\t\t    property,\n\t\t\t\t\t\t\t\t\t\t\t    isConstructor;\n\t\t\t\t\t\t\t\t\t\t\tfor (property in object) {\n\t\t\t\t\t\t\t\t\t\t\t\tif (!(isFunction && property == \"prototype\") && _isProperty.call(object, property) && !(isConstructor = property === \"constructor\")) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tcallback(property);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t// Manually invoke the callback for the `constructor` property due to\n\t\t\t\t\t\t\t\t\t\t\t// cross-environment inconsistencies.\n\t\t\t\t\t\t\t\t\t\t\tif (isConstructor || _isProperty.call(object, property = \"constructor\")) {\n\t\t\t\t\t\t\t\t\t\t\t\tcallback(property);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn _forEach(object, callback);\n\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t// Public: Serializes a JavaScript `value` as a JSON string. The optional\n\t\t\t\t\t\t\t\t// `filter` argument may specify either a function that alters how object and\n\t\t\t\t\t\t\t\t// array members are serialized, or an array of strings and numbers that\n\t\t\t\t\t\t\t\t// indicates which properties should be serialized. The optional `width`\n\t\t\t\t\t\t\t\t// argument may be either a string or number that specifies the indentation\n\t\t\t\t\t\t\t\t// level of the output.\n\t\t\t\t\t\t\t\tif (!has(\"json-stringify\")) {\n\t\t\t\t\t\t\t\t\t// Internal: A map of control characters and their escaped equivalents.\n\t\t\t\t\t\t\t\t\tvar Escapes = {\n\t\t\t\t\t\t\t\t\t\t92: \"\\\\\\\\\",\n\t\t\t\t\t\t\t\t\t\t34: '\\\\\"',\n\t\t\t\t\t\t\t\t\t\t8: \"\\\\b\",\n\t\t\t\t\t\t\t\t\t\t12: \"\\\\f\",\n\t\t\t\t\t\t\t\t\t\t10: \"\\\\n\",\n\t\t\t\t\t\t\t\t\t\t13: \"\\\\r\",\n\t\t\t\t\t\t\t\t\t\t9: \"\\\\t\"\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\t// Internal: Converts `value` into a zero-padded string such that its\n\t\t\t\t\t\t\t\t\t// length is at least equal to `width`. The `width` must be <= 6.\n\t\t\t\t\t\t\t\t\tvar leadingZeroes = \"000000\";\n\t\t\t\t\t\t\t\t\tvar toPaddedString = function toPaddedString(width, value) {\n\t\t\t\t\t\t\t\t\t\t// The `|| 0` expression is necessary to work around a bug in\n\t\t\t\t\t\t\t\t\t\t// Opera <= 7.54u2 where `0 == -0`, but `String(-0) !== \"0\"`.\n\t\t\t\t\t\t\t\t\t\treturn (leadingZeroes + (value || 0)).slice(-width);\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\t// Internal: Double-quotes a string `value`, replacing all ASCII control\n\t\t\t\t\t\t\t\t\t// characters (characters with code unit values between 0 and 31) with\n\t\t\t\t\t\t\t\t\t// their escaped equivalents. This is an implementation of the\n\t\t\t\t\t\t\t\t\t// `Quote(value)` operation defined in ES 5.1 section 15.12.3.\n\t\t\t\t\t\t\t\t\tvar unicodePrefix = \"\\\\u00\";\n\t\t\t\t\t\t\t\t\tvar quote = function quote(value) {\n\t\t\t\t\t\t\t\t\t\tvar result = '\"',\n\t\t\t\t\t\t\t\t\t\t    index = 0,\n\t\t\t\t\t\t\t\t\t\t    length = value.length,\n\t\t\t\t\t\t\t\t\t\t    useCharIndex = !charIndexBuggy || length > 10;\n\t\t\t\t\t\t\t\t\t\tvar symbols = useCharIndex && (charIndexBuggy ? value.split(\"\") : value);\n\t\t\t\t\t\t\t\t\t\tfor (; index < length; index++) {\n\t\t\t\t\t\t\t\t\t\t\tvar charCode = value.charCodeAt(index);\n\t\t\t\t\t\t\t\t\t\t\t// If the character is a control character, append its Unicode or\n\t\t\t\t\t\t\t\t\t\t\t// shorthand escape sequence; otherwise, append the character as-is.\n\t\t\t\t\t\t\t\t\t\t\tswitch (charCode) {\n\t\t\t\t\t\t\t\t\t\t\t\tcase 8:\n\t\t\t\t\t\t\t\t\t\t\t\tcase 9:\n\t\t\t\t\t\t\t\t\t\t\t\tcase 10:\n\t\t\t\t\t\t\t\t\t\t\t\tcase 12:\n\t\t\t\t\t\t\t\t\t\t\t\tcase 13:\n\t\t\t\t\t\t\t\t\t\t\t\tcase 34:\n\t\t\t\t\t\t\t\t\t\t\t\tcase 92:\n\t\t\t\t\t\t\t\t\t\t\t\t\tresult += Escapes[charCode];\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (charCode < 32) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tresult += unicodePrefix + toPaddedString(2, charCode.toString(16));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tresult += useCharIndex ? symbols[index] : value.charAt(index);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\treturn result + '\"';\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\t// Internal: Recursively serializes an object. Implements the\n\t\t\t\t\t\t\t\t\t// `Str(key, holder)`, `JO(value)`, and `JA(value)` operations.\n\t\t\t\t\t\t\t\t\tvar serialize = function serialize(property, object, callback, properties, whitespace, indentation, stack) {\n\t\t\t\t\t\t\t\t\t\tvar value, className, year, month, date, time, hours, minutes, seconds, milliseconds, results, element, index, length, prefix, result;\n\t\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\t\t// Necessary for host object support.\n\t\t\t\t\t\t\t\t\t\t\tvalue = object[property];\n\t\t\t\t\t\t\t\t\t\t} catch (exception) {}\n\t\t\t\t\t\t\t\t\t\tif ((typeof value === \"undefined\" ? \"undefined\" : _typeof(value)) == \"object\" && value) {\n\t\t\t\t\t\t\t\t\t\t\tclassName = getClass.call(value);\n\t\t\t\t\t\t\t\t\t\t\tif (className == dateClass && !_isProperty.call(value, \"toJSON\")) {\n\t\t\t\t\t\t\t\t\t\t\t\tif (value > -1 / 0 && value < 1 / 0) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t// Dates are serialized according to the `Date#toJSON` method\n\t\t\t\t\t\t\t\t\t\t\t\t\t// specified in ES 5.1 section 15.9.5.44. See section 15.9.1.15\n\t\t\t\t\t\t\t\t\t\t\t\t\t// for the ISO 8601 date time string format.\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (getDay) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Manually compute the year, month, date, hours, minutes,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// seconds, and milliseconds if the `getUTC*` methods are\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// buggy. Adapted from @Yaffle's `date-shim` project.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdate = floor(value / 864e5);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfor (year = floor(date / 365.2425) + 1970 - 1; getDay(year + 1, 0) <= date; year++) {}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfor (month = floor((date - getDay(year, 0)) / 30.42); getDay(year, month + 1) <= date; month++) {}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdate = 1 + date - getDay(year, month);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// The `time` value specifies the time within the day (see ES\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// 5.1 section 15.9.1.2). The formula `(A % B + B) % B` is used\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// to compute `A modulo B`, as the `%` operator does not\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// correspond to the `modulo` operation for negative numbers.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttime = (value % 864e5 + 864e5) % 864e5;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// The hours, minutes, seconds, and milliseconds are obtained by\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// decomposing the time within the day. See section 15.9.1.10.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thours = floor(time / 36e5) % 24;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tminutes = floor(time / 6e4) % 60;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tseconds = floor(time / 1e3) % 60;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmilliseconds = time % 1e3;\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tyear = value.getUTCFullYear();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmonth = value.getUTCMonth();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdate = value.getUTCDate();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thours = value.getUTCHours();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tminutes = value.getUTCMinutes();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tseconds = value.getUTCSeconds();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmilliseconds = value.getUTCMilliseconds();\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t// Serialize extended years correctly.\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue = (year <= 0 || year >= 1e4 ? (year < 0 ? \"-\" : \"+\") + toPaddedString(6, year < 0 ? -year : year) : toPaddedString(4, year)) + \"-\" + toPaddedString(2, month + 1) + \"-\" + toPaddedString(2, date) +\n\t\t\t\t\t\t\t\t\t\t\t\t\t// Months, dates, hours, minutes, and seconds should have two\n\t\t\t\t\t\t\t\t\t\t\t\t\t// digits; milliseconds should have three.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"T\" + toPaddedString(2, hours) + \":\" + toPaddedString(2, minutes) + \":\" + toPaddedString(2, seconds) +\n\t\t\t\t\t\t\t\t\t\t\t\t\t// Milliseconds are optional in ES 5.0, but required in 5.1.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\".\" + toPaddedString(3, milliseconds) + \"Z\";\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue = null;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t} else if (typeof value.toJSON == \"function\" && (className != numberClass && className != stringClass && className != arrayClass || _isProperty.call(value, \"toJSON\"))) {\n\t\t\t\t\t\t\t\t\t\t\t\t// Prototype <= 1.6.1 adds non-standard `toJSON` methods to the\n\t\t\t\t\t\t\t\t\t\t\t\t// `Number`, `String`, `Date`, and `Array` prototypes. JSON 3\n\t\t\t\t\t\t\t\t\t\t\t\t// ignores all `toJSON` methods on these objects unless they are\n\t\t\t\t\t\t\t\t\t\t\t\t// defined directly on an instance.\n\t\t\t\t\t\t\t\t\t\t\t\tvalue = value.toJSON(property);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tif (callback) {\n\t\t\t\t\t\t\t\t\t\t\t// If a replacement function was provided, call it to obtain the value\n\t\t\t\t\t\t\t\t\t\t\t// for serialization.\n\t\t\t\t\t\t\t\t\t\t\tvalue = callback.call(object, property, value);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tif (value === null) {\n\t\t\t\t\t\t\t\t\t\t\treturn \"null\";\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tclassName = getClass.call(value);\n\t\t\t\t\t\t\t\t\t\tif (className == booleanClass) {\n\t\t\t\t\t\t\t\t\t\t\t// Booleans are represented literally.\n\t\t\t\t\t\t\t\t\t\t\treturn \"\" + value;\n\t\t\t\t\t\t\t\t\t\t} else if (className == numberClass) {\n\t\t\t\t\t\t\t\t\t\t\t// JSON numbers must be finite. `Infinity` and `NaN` are serialized as\n\t\t\t\t\t\t\t\t\t\t\t// `\"null\"`.\n\t\t\t\t\t\t\t\t\t\t\treturn value > -1 / 0 && value < 1 / 0 ? \"\" + value : \"null\";\n\t\t\t\t\t\t\t\t\t\t} else if (className == stringClass) {\n\t\t\t\t\t\t\t\t\t\t\t// Strings are double-quoted and escaped.\n\t\t\t\t\t\t\t\t\t\t\treturn quote(\"\" + value);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t// Recursively serialize objects and arrays.\n\t\t\t\t\t\t\t\t\t\tif ((typeof value === \"undefined\" ? \"undefined\" : _typeof(value)) == \"object\") {\n\t\t\t\t\t\t\t\t\t\t\t// Check for cyclic structures. This is a linear search; performance\n\t\t\t\t\t\t\t\t\t\t\t// is inversely proportional to the number of unique nested objects.\n\t\t\t\t\t\t\t\t\t\t\tfor (length = stack.length; length--;) {\n\t\t\t\t\t\t\t\t\t\t\t\tif (stack[length] === value) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t// Cyclic structures cannot be serialized by `JSON.stringify`.\n\t\t\t\t\t\t\t\t\t\t\t\t\tthrow TypeError();\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t// Add the object to the stack of traversed objects.\n\t\t\t\t\t\t\t\t\t\t\tstack.push(value);\n\t\t\t\t\t\t\t\t\t\t\tresults = [];\n\t\t\t\t\t\t\t\t\t\t\t// Save the current indentation level and indent one additional level.\n\t\t\t\t\t\t\t\t\t\t\tprefix = indentation;\n\t\t\t\t\t\t\t\t\t\t\tindentation += whitespace;\n\t\t\t\t\t\t\t\t\t\t\tif (className == arrayClass) {\n\t\t\t\t\t\t\t\t\t\t\t\t// Recursively serialize array elements.\n\t\t\t\t\t\t\t\t\t\t\t\tfor (index = 0, length = value.length; index < length; index++) {\n\t\t\t\t\t\t\t\t\t\t\t\t\telement = serialize(index, value, callback, properties, whitespace, indentation, stack);\n\t\t\t\t\t\t\t\t\t\t\t\t\tresults.push(element === undef ? \"null\" : element);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tresult = results.length ? whitespace ? \"[\\n\" + indentation + results.join(\",\\n\" + indentation) + \"\\n\" + prefix + \"]\" : \"[\" + results.join(\",\") + \"]\" : \"[]\";\n\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t// Recursively serialize object members. Members are selected from\n\t\t\t\t\t\t\t\t\t\t\t\t// either a user-specified list of property names, or the object\n\t\t\t\t\t\t\t\t\t\t\t\t// itself.\n\t\t\t\t\t\t\t\t\t\t\t\t_forEach(properties || value, function (property) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tvar element = serialize(property, value, callback, properties, whitespace, indentation, stack);\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (element !== undef) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// According to ES 5.1 section 15.12.3: \"If `gap` {whitespace}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// is not the empty string, let `member` {quote(property) + \":\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// be the concatenation of `member` and the `space` character.\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// The \"`space` character\" refers to the literal space\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// character, not the `space` {width} argument provided to\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// `JSON.stringify`.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tresults.push(quote(property) + \":\" + (whitespace ? \" \" : \"\") + element);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\tresult = results.length ? whitespace ? \"{\\n\" + indentation + results.join(\",\\n\" + indentation) + \"\\n\" + prefix + \"}\" : \"{\" + results.join(\",\") + \"}\" : \"{}\";\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t// Remove the object from the traversed object stack.\n\t\t\t\t\t\t\t\t\t\t\tstack.pop();\n\t\t\t\t\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\t// Public: `JSON.stringify`. See ES 5.1 section 15.12.3.\n\t\t\t\t\t\t\t\t\texports.stringify = function (source, filter, width) {\n\t\t\t\t\t\t\t\t\t\tvar whitespace, callback, properties, className;\n\t\t\t\t\t\t\t\t\t\tif (objectTypes[typeof filter === \"undefined\" ? \"undefined\" : _typeof(filter)] && filter) {\n\t\t\t\t\t\t\t\t\t\t\tif ((className = getClass.call(filter)) == functionClass) {\n\t\t\t\t\t\t\t\t\t\t\t\tcallback = filter;\n\t\t\t\t\t\t\t\t\t\t\t} else if (className == arrayClass) {\n\t\t\t\t\t\t\t\t\t\t\t\t// Convert the property names array into a makeshift set.\n\t\t\t\t\t\t\t\t\t\t\t\tproperties = {};\n\t\t\t\t\t\t\t\t\t\t\t\tfor (var index = 0, length = filter.length, value; index < length; value = filter[index++], (className = getClass.call(value), className == stringClass || className == numberClass) && (properties[value] = 1)) {}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tif (width) {\n\t\t\t\t\t\t\t\t\t\t\tif ((className = getClass.call(width)) == numberClass) {\n\t\t\t\t\t\t\t\t\t\t\t\t// Convert the `width` to an integer and create a string containing\n\t\t\t\t\t\t\t\t\t\t\t\t// `width` number of space characters.\n\t\t\t\t\t\t\t\t\t\t\t\tif ((width -= width % 1) > 0) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tfor (whitespace = \"\", width > 10 && (width = 10); whitespace.length < width; whitespace += \" \") {}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t} else if (className == stringClass) {\n\t\t\t\t\t\t\t\t\t\t\t\twhitespace = width.length <= 10 ? width : width.slice(0, 10);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t// Opera <= 7.54u2 discards the values associated with empty string keys\n\t\t\t\t\t\t\t\t\t\t// (`\"\"`) only if they are used directly within an object member list\n\t\t\t\t\t\t\t\t\t\t// (e.g., `!(\"\" in { \"\": 1})`).\n\t\t\t\t\t\t\t\t\t\treturn serialize(\"\", (value = {}, value[\"\"] = source, value), callback, properties, whitespace, \"\", []);\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// Public: Parses a JSON source string.\n\t\t\t\t\t\t\t\tif (!has(\"json-parse\")) {\n\t\t\t\t\t\t\t\t\tvar fromCharCode = String.fromCharCode;\n\n\t\t\t\t\t\t\t\t\t// Internal: A map of escaped control characters and their unescaped\n\t\t\t\t\t\t\t\t\t// equivalents.\n\t\t\t\t\t\t\t\t\tvar Unescapes = {\n\t\t\t\t\t\t\t\t\t\t92: \"\\\\\",\n\t\t\t\t\t\t\t\t\t\t34: '\"',\n\t\t\t\t\t\t\t\t\t\t47: \"/\",\n\t\t\t\t\t\t\t\t\t\t98: \"\\b\",\n\t\t\t\t\t\t\t\t\t\t116: \"\\t\",\n\t\t\t\t\t\t\t\t\t\t110: \"\\n\",\n\t\t\t\t\t\t\t\t\t\t102: \"\\f\",\n\t\t\t\t\t\t\t\t\t\t114: \"\\r\"\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\t// Internal: Stores the parser state.\n\t\t\t\t\t\t\t\t\tvar Index, Source;\n\n\t\t\t\t\t\t\t\t\t// Internal: Resets the parser state and throws a `SyntaxError`.\n\t\t\t\t\t\t\t\t\tvar abort = function abort() {\n\t\t\t\t\t\t\t\t\t\tIndex = Source = null;\n\t\t\t\t\t\t\t\t\t\tthrow SyntaxError();\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\t// Internal: Returns the next token, or `\"$\"` if the parser has reached\n\t\t\t\t\t\t\t\t\t// the end of the source string. A token may be a string, number, `null`\n\t\t\t\t\t\t\t\t\t// literal, or Boolean literal.\n\t\t\t\t\t\t\t\t\tvar lex = function lex() {\n\t\t\t\t\t\t\t\t\t\tvar source = Source,\n\t\t\t\t\t\t\t\t\t\t    length = source.length,\n\t\t\t\t\t\t\t\t\t\t    value,\n\t\t\t\t\t\t\t\t\t\t    begin,\n\t\t\t\t\t\t\t\t\t\t    position,\n\t\t\t\t\t\t\t\t\t\t    isSigned,\n\t\t\t\t\t\t\t\t\t\t    charCode;\n\t\t\t\t\t\t\t\t\t\twhile (Index < length) {\n\t\t\t\t\t\t\t\t\t\t\tcharCode = source.charCodeAt(Index);\n\t\t\t\t\t\t\t\t\t\t\tswitch (charCode) {\n\t\t\t\t\t\t\t\t\t\t\t\tcase 9:\n\t\t\t\t\t\t\t\t\t\t\t\tcase 10:\n\t\t\t\t\t\t\t\t\t\t\t\tcase 13:\n\t\t\t\t\t\t\t\t\t\t\t\tcase 32:\n\t\t\t\t\t\t\t\t\t\t\t\t\t// Skip whitespace tokens, including tabs, carriage returns, line\n\t\t\t\t\t\t\t\t\t\t\t\t\t// feeds, and space characters.\n\t\t\t\t\t\t\t\t\t\t\t\t\tIndex++;\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\tcase 123:\n\t\t\t\t\t\t\t\t\t\t\t\tcase 125:\n\t\t\t\t\t\t\t\t\t\t\t\tcase 91:\n\t\t\t\t\t\t\t\t\t\t\t\tcase 93:\n\t\t\t\t\t\t\t\t\t\t\t\tcase 58:\n\t\t\t\t\t\t\t\t\t\t\t\tcase 44:\n\t\t\t\t\t\t\t\t\t\t\t\t\t// Parse a punctuator token (`{`, `}`, `[`, `]`, `:`, or `,`) at\n\t\t\t\t\t\t\t\t\t\t\t\t\t// the current position.\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue = charIndexBuggy ? source.charAt(Index) : source[Index];\n\t\t\t\t\t\t\t\t\t\t\t\t\tIndex++;\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t\t\t\t\t\t\tcase 34:\n\t\t\t\t\t\t\t\t\t\t\t\t\t// `\"` delimits a JSON string; advance to the next character and\n\t\t\t\t\t\t\t\t\t\t\t\t\t// begin parsing the string. String tokens are prefixed with the\n\t\t\t\t\t\t\t\t\t\t\t\t\t// sentinel `@` character to distinguish them from punctuators and\n\t\t\t\t\t\t\t\t\t\t\t\t\t// end-of-string tokens.\n\t\t\t\t\t\t\t\t\t\t\t\t\tfor (value = \"@\", Index++; Index < length;) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcharCode = source.charCodeAt(Index);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (charCode < 32) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Unescaped ASCII control characters (those with a code unit\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// less than the space character) are not permitted.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tabort();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else if (charCode == 92) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// A reverse solidus (`\\`) marks the beginning of an escaped\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// control character (including `\"`, `\\`, and `/`) or Unicode\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// escape sequence.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcharCode = source.charCodeAt(++Index);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tswitch (charCode) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 92:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 34:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 47:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 98:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 116:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 110:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 102:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 114:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Revive escaped control characters.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue += Unescapes[charCode];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tIndex++;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 117:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// `\\u` marks the beginning of a Unicode escape sequence.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Advance to the first character and validate the\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// four-digit code point.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbegin = ++Index;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfor (position = Index + 4; Index < position; Index++) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcharCode = source.charCodeAt(Index);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// A valid sequence comprises four hexdigits (case-\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// insensitive) that form a single hexadecimal value.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (!(charCode >= 48 && charCode <= 57 || charCode >= 97 && charCode <= 102 || charCode >= 65 && charCode <= 70)) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Invalid Unicode escape sequence.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tabort();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Revive the escaped character.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue += fromCharCode(\"0x\" + source.slice(begin, Index));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Invalid escape sequence.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tabort();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (charCode == 34) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// An unescaped double-quote character marks the end of the\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// string.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcharCode = source.charCodeAt(Index);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbegin = Index;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Optimize for the common case where a string is valid.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twhile (charCode >= 32 && charCode != 92 && charCode != 34) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcharCode = source.charCodeAt(++Index);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Append the string as-is.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue += source.slice(begin, Index);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (source.charCodeAt(Index) == 34) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Advance to the next character and return the revived string.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tIndex++;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t// Unterminated string.\n\t\t\t\t\t\t\t\t\t\t\t\t\tabort();\n\t\t\t\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\t\t\t\t// Parse numbers and literals.\n\t\t\t\t\t\t\t\t\t\t\t\t\tbegin = Index;\n\t\t\t\t\t\t\t\t\t\t\t\t\t// Advance past the negative sign, if one is specified.\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (charCode == 45) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tisSigned = true;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcharCode = source.charCodeAt(++Index);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t// Parse an integer or floating-point value.\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (charCode >= 48 && charCode <= 57) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Leading zeroes are interpreted as octal literals.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (charCode == 48 && (charCode = source.charCodeAt(Index + 1), charCode >= 48 && charCode <= 57)) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Illegal octal literal.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tabort();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tisSigned = false;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Parse the integer component.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfor (; Index < length && (charCode = source.charCodeAt(Index), charCode >= 48 && charCode <= 57); Index++) {}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Floats cannot contain a leading decimal point; however, this\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// case is already accounted for by the parser.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (source.charCodeAt(Index) == 46) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tposition = ++Index;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Parse the decimal component.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfor (; position < length && (charCode = source.charCodeAt(position), charCode >= 48 && charCode <= 57); position++) {}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (position == Index) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Illegal trailing decimal.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tabort();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tIndex = position;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Parse exponents. The `e` denoting the exponent is\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// case-insensitive.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcharCode = source.charCodeAt(Index);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (charCode == 101 || charCode == 69) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcharCode = source.charCodeAt(++Index);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Skip past the sign following the exponent, if one is\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// specified.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (charCode == 43 || charCode == 45) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tIndex++;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Parse the exponential component.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfor (position = Index; position < length && (charCode = source.charCodeAt(position), charCode >= 48 && charCode <= 57); position++) {}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (position == Index) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Illegal empty exponent.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tabort();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tIndex = position;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Coerce the parsed value to a JavaScript number.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn +source.slice(begin, Index);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t// A negative sign may only precede numbers.\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (isSigned) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tabort();\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t// `true`, `false`, and `null` literals.\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (source.slice(Index, Index + 4) == \"true\") {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tIndex += 4;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else if (source.slice(Index, Index + 5) == \"false\") {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tIndex += 5;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else if (source.slice(Index, Index + 4) == \"null\") {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tIndex += 4;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t// Unrecognized token.\n\t\t\t\t\t\t\t\t\t\t\t\t\tabort();\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t// Return the sentinel `$` character if the parser has reached the end\n\t\t\t\t\t\t\t\t\t\t// of the source string.\n\t\t\t\t\t\t\t\t\t\treturn \"$\";\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\t// Internal: Parses a JSON `value` token.\n\t\t\t\t\t\t\t\t\tvar get = function get(value) {\n\t\t\t\t\t\t\t\t\t\tvar results, hasMembers;\n\t\t\t\t\t\t\t\t\t\tif (value == \"$\") {\n\t\t\t\t\t\t\t\t\t\t\t// Unexpected end of input.\n\t\t\t\t\t\t\t\t\t\t\tabort();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tif (typeof value == \"string\") {\n\t\t\t\t\t\t\t\t\t\t\tif ((charIndexBuggy ? value.charAt(0) : value[0]) == \"@\") {\n\t\t\t\t\t\t\t\t\t\t\t\t// Remove the sentinel `@` character.\n\t\t\t\t\t\t\t\t\t\t\t\treturn value.slice(1);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t// Parse object and array literals.\n\t\t\t\t\t\t\t\t\t\t\tif (value == \"[\") {\n\t\t\t\t\t\t\t\t\t\t\t\t// Parses a JSON array, returning a new JavaScript array.\n\t\t\t\t\t\t\t\t\t\t\t\tresults = [];\n\t\t\t\t\t\t\t\t\t\t\t\tfor (;; hasMembers || (hasMembers = true)) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue = lex();\n\t\t\t\t\t\t\t\t\t\t\t\t\t// A closing square bracket marks the end of the array literal.\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (value == \"]\") {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t// If the array literal contains elements, the current token\n\t\t\t\t\t\t\t\t\t\t\t\t\t// should be a comma separating the previous element from the\n\t\t\t\t\t\t\t\t\t\t\t\t\t// next.\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (hasMembers) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (value == \",\") {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue = lex();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (value == \"]\") {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Unexpected trailing `,` in array literal.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tabort();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// A `,` must separate each array element.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tabort();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t// Elisions and leading commas are not permitted.\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (value == \",\") {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tabort();\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tresults.push(get(value));\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\treturn results;\n\t\t\t\t\t\t\t\t\t\t\t} else if (value == \"{\") {\n\t\t\t\t\t\t\t\t\t\t\t\t// Parses a JSON object, returning a new JavaScript object.\n\t\t\t\t\t\t\t\t\t\t\t\tresults = {};\n\t\t\t\t\t\t\t\t\t\t\t\tfor (;; hasMembers || (hasMembers = true)) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue = lex();\n\t\t\t\t\t\t\t\t\t\t\t\t\t// A closing curly brace marks the end of the object literal.\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (value == \"}\") {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t// If the object literal contains members, the current token\n\t\t\t\t\t\t\t\t\t\t\t\t\t// should be a comma separator.\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (hasMembers) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (value == \",\") {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue = lex();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (value == \"}\") {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Unexpected trailing `,` in object literal.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tabort();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// A `,` must separate each object member.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tabort();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t// Leading commas are not permitted, object property names must be\n\t\t\t\t\t\t\t\t\t\t\t\t\t// double-quoted strings, and a `:` must separate each property\n\t\t\t\t\t\t\t\t\t\t\t\t\t// name and value.\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (value == \",\" || typeof value != \"string\" || (charIndexBuggy ? value.charAt(0) : value[0]) != \"@\" || lex() != \":\") {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tabort();\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tresults[value.slice(1)] = get(lex());\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\treturn results;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t// Unexpected token encountered.\n\t\t\t\t\t\t\t\t\t\t\tabort();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\t// Internal: Updates a traversed object member.\n\t\t\t\t\t\t\t\t\tvar update = function update(source, property, callback) {\n\t\t\t\t\t\t\t\t\t\tvar element = walk(source, property, callback);\n\t\t\t\t\t\t\t\t\t\tif (element === undef) {\n\t\t\t\t\t\t\t\t\t\t\tdelete source[property];\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tsource[property] = element;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\t// Internal: Recursively traverses a parsed JSON object, invoking the\n\t\t\t\t\t\t\t\t\t// `callback` function for each value. This is an implementation of the\n\t\t\t\t\t\t\t\t\t// `Walk(holder, name)` operation defined in ES 5.1 section 15.12.2.\n\t\t\t\t\t\t\t\t\tvar walk = function walk(source, property, callback) {\n\t\t\t\t\t\t\t\t\t\tvar value = source[property],\n\t\t\t\t\t\t\t\t\t\t    length;\n\t\t\t\t\t\t\t\t\t\tif ((typeof value === \"undefined\" ? \"undefined\" : _typeof(value)) == \"object\" && value) {\n\t\t\t\t\t\t\t\t\t\t\t// `forEach` can't be used to traverse an array in Opera <= 8.54\n\t\t\t\t\t\t\t\t\t\t\t// because its `Object#hasOwnProperty` implementation returns `false`\n\t\t\t\t\t\t\t\t\t\t\t// for array indices (e.g., `![1, 2, 3].hasOwnProperty(\"0\")`).\n\t\t\t\t\t\t\t\t\t\t\tif (getClass.call(value) == arrayClass) {\n\t\t\t\t\t\t\t\t\t\t\t\tfor (length = value.length; length--;) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tupdate(value, length, callback);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t_forEach(value, function (property) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tupdate(value, property, callback);\n\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\treturn callback.call(source, property, value);\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\t// Public: `JSON.parse`. See ES 5.1 section 15.12.2.\n\t\t\t\t\t\t\t\t\texports.parse = function (source, callback) {\n\t\t\t\t\t\t\t\t\t\tvar result, value;\n\t\t\t\t\t\t\t\t\t\tIndex = 0;\n\t\t\t\t\t\t\t\t\t\tSource = \"\" + source;\n\t\t\t\t\t\t\t\t\t\tresult = get(lex());\n\t\t\t\t\t\t\t\t\t\t// If a JSON string contains multiple tokens, it is invalid.\n\t\t\t\t\t\t\t\t\t\tif (lex() != \"$\") {\n\t\t\t\t\t\t\t\t\t\t\tabort();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t// Reset the parser state.\n\t\t\t\t\t\t\t\t\t\tIndex = Source = null;\n\t\t\t\t\t\t\t\t\t\treturn callback && getClass.call(callback) == functionClass ? walk((value = {}, value[\"\"] = result, value), \"\", callback) : result;\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\texports[\"runInContext\"] = runInContext;\n\t\t\t\t\t\t\treturn exports;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (freeExports && !isLoader) {\n\t\t\t\t\t\t\t// Export for CommonJS environments.\n\t\t\t\t\t\t\trunInContext(root, freeExports);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Export for web browsers and JavaScript engines.\n\t\t\t\t\t\t\tvar nativeJSON = root.JSON,\n\t\t\t\t\t\t\t    previousJSON = root[\"JSON3\"],\n\t\t\t\t\t\t\t    isRestored = false;\n\n\t\t\t\t\t\t\tvar JSON3 = runInContext(root, root[\"JSON3\"] = {\n\t\t\t\t\t\t\t\t// Public: Restores the original value of the global `JSON` object and\n\t\t\t\t\t\t\t\t// returns a reference to the `JSON3` object.\n\t\t\t\t\t\t\t\t\"noConflict\": function noConflict() {\n\t\t\t\t\t\t\t\t\tif (!isRestored) {\n\t\t\t\t\t\t\t\t\t\tisRestored = true;\n\t\t\t\t\t\t\t\t\t\troot.JSON = nativeJSON;\n\t\t\t\t\t\t\t\t\t\troot[\"JSON3\"] = previousJSON;\n\t\t\t\t\t\t\t\t\t\tnativeJSON = previousJSON = null;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn JSON3;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\troot.JSON = {\n\t\t\t\t\t\t\t\t\"parse\": JSON3.parse,\n\t\t\t\t\t\t\t\t\"stringify\": JSON3.stringify\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Export for asynchronous module loaders.\n\t\t\t\t\t\tif (isLoader) {\n\t\t\t\t\t\t\tdefine(function () {\n\t\t\t\t\t\t\t\treturn JSON3;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}).call(this);\n\t\t\t\t}).call(this, typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {});\n\t\t\t}, {}],\n\t\t\t51: [function (_dereq_, module, exports) {\n\t\t\t\tmodule.exports = toArray;\n\n\t\t\t\tfunction toArray(list, index) {\n\t\t\t\t\tvar array = [];\n\n\t\t\t\t\tindex = index || 0;\n\n\t\t\t\t\tfor (var i = index || 0; i < list.length; i++) {\n\t\t\t\t\t\tarray[i - index] = list[i];\n\t\t\t\t\t}\n\n\t\t\t\t\treturn array;\n\t\t\t\t}\n\t\t\t}, {}]\n\t\t}, {}, [31])(31);\n\t});\n}\n\ncc._RF.pop();\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYnJhcnkvaW1wb3J0cy8zOS8zOTMyOWQyZi0zZGNkLTQ4MjEtODdlMS1mMDVhZTZjNWMzNTkuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5jYy5fUkYucHVzaChtb2R1bGUsICczOTMyOTB2UGMxSUlZZmg4RnJteGNOWicsICdzb2NrZXQtaW8nKTtcbi8vIHNjcmlwdHMvM3JkcGFydHkvc29ja2V0LWlvLmpzXG5cblwidXNlIHN0cmljdFwiO1xuXG52YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cbmlmICghQ0NfSlNCICYmICFjYy5zeXMuaXNOYXRpdmUpIHtcblx0KGZ1bmN0aW9uIChmKSB7XG5cdFx0aWYgKCh0eXBlb2YgZXhwb3J0cyA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBfdHlwZW9mKGV4cG9ydHMpKSA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgbW9kdWxlICE9PSBcInVuZGVmaW5lZFwiKSB7XG5cdFx0XHRtb2R1bGUuZXhwb3J0cyA9IGYoKTtcblx0XHR9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kKSB7XG5cdFx0XHRkZWZpbmUoW10sIGYpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR2YXIgZztcblx0XHRcdGlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB7XG5cdFx0XHRcdGcgPSB3aW5kb3c7XG5cdFx0XHR9IGVsc2UgaWYgKHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIpIHtcblx0XHRcdFx0ZyA9IGdsb2JhbDtcblx0XHRcdH0gZWxzZSBpZiAodHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIpIHtcblx0XHRcdFx0ZyA9IHNlbGY7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRnID0gdGhpcztcblx0XHRcdH1cblx0XHRcdGcuaW8gPSBmKCk7XG5cdFx0fVxuXHR9KShmdW5jdGlvbiAoKSB7XG5cdFx0dmFyIGRlZmluZSwgbW9kdWxlLCBleHBvcnRzO1xuXHRcdHJldHVybiBmdW5jdGlvbiBlKHQsIG4sIHIpIHtcblx0XHRcdGZ1bmN0aW9uIHMobywgdSkge1xuXHRcdFx0XHRpZiAoIW5bb10pIHtcblx0XHRcdFx0XHRpZiAoIXRbb10pIHtcblx0XHRcdFx0XHRcdHZhciBhID0gdHlwZW9mIHJlcXVpcmUgPT0gXCJmdW5jdGlvblwiICYmIHJlcXVpcmU7XG5cdFx0XHRcdFx0XHRpZiAoIXUgJiYgYSkgcmV0dXJuIGEobywgITApO1xuXHRcdFx0XHRcdFx0aWYgKGkpIHJldHVybiBpKG8sICEwKTtcblx0XHRcdFx0XHRcdHZhciBmID0gbmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIiArIG8gKyBcIidcIik7XG5cdFx0XHRcdFx0XHR0aHJvdyBmLmNvZGUgPSBcIk1PRFVMRV9OT1RfRk9VTkRcIiwgZjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0dmFyIGwgPSBuW29dID0ge1xuXHRcdFx0XHRcdFx0ZXhwb3J0czoge31cblx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdHRbb11bMF0uY2FsbChsLmV4cG9ydHMsIGZ1bmN0aW9uIChlKSB7XG5cdFx0XHRcdFx0XHR2YXIgbiA9IHRbb11bMV1bZV07XG5cdFx0XHRcdFx0XHRyZXR1cm4gcyhuID8gbiA6IGUpO1xuXHRcdFx0XHRcdH0sIGwsIGwuZXhwb3J0cywgZSwgdCwgbiwgcik7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIG5bb10uZXhwb3J0cztcblx0XHRcdH1cblx0XHRcdHZhciBpID0gdHlwZW9mIHJlcXVpcmUgPT0gXCJmdW5jdGlvblwiICYmIHJlcXVpcmU7XG5cdFx0XHRmb3IgKHZhciBvID0gMDsgbyA8IHIubGVuZ3RoOyBvKyspIHtcblx0XHRcdFx0cyhyW29dKTtcblx0XHRcdH1yZXR1cm4gcztcblx0XHR9KHtcblx0XHRcdDE6IFtmdW5jdGlvbiAoX2RlcmVxXywgbW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XHRcdFx0bW9kdWxlLmV4cG9ydHMgPSBfZGVyZXFfKCcuL2xpYi8nKTtcblx0XHRcdH0sIHtcblx0XHRcdFx0XCIuL2xpYi9cIjogMlxuXHRcdFx0fV0sXG5cdFx0XHQyOiBbZnVuY3Rpb24gKF9kZXJlcV8sIG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFx0XHRcdG1vZHVsZS5leHBvcnRzID0gX2RlcmVxXygnLi9zb2NrZXQnKTtcblxuXHRcdFx0XHQvKipcbiAgICAgKiBFeHBvcnRzIHBhcnNlclxuICAgICAqXG4gICAgICogQGFwaSBwdWJsaWNcbiAgICAgKlxuICAgICAqL1xuXHRcdFx0XHRtb2R1bGUuZXhwb3J0cy5wYXJzZXIgPSBfZGVyZXFfKCdlbmdpbmUuaW8tcGFyc2VyJyk7XG5cdFx0XHR9LCB7XG5cdFx0XHRcdFwiLi9zb2NrZXRcIjogMyxcblx0XHRcdFx0XCJlbmdpbmUuaW8tcGFyc2VyXCI6IDE5XG5cdFx0XHR9XSxcblx0XHRcdDM6IFtmdW5jdGlvbiAoX2RlcmVxXywgbW9kdWxlLCBleHBvcnRzKSB7XG5cdFx0XHRcdChmdW5jdGlvbiAoZ2xvYmFsKSB7XG5cdFx0XHRcdFx0LyoqXG4gICAgICAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gICAgICAqL1xuXG5cdFx0XHRcdFx0dmFyIHRyYW5zcG9ydHMgPSBfZGVyZXFfKCcuL3RyYW5zcG9ydHMnKTtcblx0XHRcdFx0XHR2YXIgRW1pdHRlciA9IF9kZXJlcV8oJ2NvbXBvbmVudC1lbWl0dGVyJyk7XG5cdFx0XHRcdFx0dmFyIGRlYnVnID0gX2RlcmVxXygnZGVidWcnKSgnZW5naW5lLmlvLWNsaWVudDpzb2NrZXQnKTtcblx0XHRcdFx0XHR2YXIgaW5kZXggPSBfZGVyZXFfKCdpbmRleG9mJyk7XG5cdFx0XHRcdFx0dmFyIHBhcnNlciA9IF9kZXJlcV8oJ2VuZ2luZS5pby1wYXJzZXInKTtcblx0XHRcdFx0XHR2YXIgcGFyc2V1cmkgPSBfZGVyZXFfKCdwYXJzZXVyaScpO1xuXHRcdFx0XHRcdHZhciBwYXJzZWpzb24gPSBfZGVyZXFfKCdwYXJzZWpzb24nKTtcblx0XHRcdFx0XHR2YXIgcGFyc2VxcyA9IF9kZXJlcV8oJ3BhcnNlcXMnKTtcblxuXHRcdFx0XHRcdC8qKlxuICAgICAgKiBNb2R1bGUgZXhwb3J0cy5cbiAgICAgICovXG5cblx0XHRcdFx0XHRtb2R1bGUuZXhwb3J0cyA9IFNvY2tldDtcblxuXHRcdFx0XHRcdC8qKlxuICAgICAgKiBOb29wIGZ1bmN0aW9uLlxuICAgICAgKlxuICAgICAgKiBAYXBpIHByaXZhdGVcbiAgICAgICovXG5cblx0XHRcdFx0XHRmdW5jdGlvbiBub29wKCkge31cblxuXHRcdFx0XHRcdC8qKlxuICAgICAgKiBTb2NrZXQgY29uc3RydWN0b3IuXG4gICAgICAqXG4gICAgICAqIEBwYXJhbSB7U3RyaW5nfE9iamVjdH0gdXJpIG9yIG9wdGlvbnNcbiAgICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICAgICogQGFwaSBwdWJsaWNcbiAgICAgICovXG5cblx0XHRcdFx0XHRmdW5jdGlvbiBTb2NrZXQodXJpLCBvcHRzKSB7XG5cdFx0XHRcdFx0XHRpZiAoISh0aGlzIGluc3RhbmNlb2YgU29ja2V0KSkgcmV0dXJuIG5ldyBTb2NrZXQodXJpLCBvcHRzKTtcblxuXHRcdFx0XHRcdFx0b3B0cyA9IG9wdHMgfHwge307XG5cblx0XHRcdFx0XHRcdGlmICh1cmkgJiYgJ29iamVjdCcgPT0gKHR5cGVvZiB1cmkgPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZih1cmkpKSkge1xuXHRcdFx0XHRcdFx0XHRvcHRzID0gdXJpO1xuXHRcdFx0XHRcdFx0XHR1cmkgPSBudWxsO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRpZiAodXJpKSB7XG5cdFx0XHRcdFx0XHRcdHVyaSA9IHBhcnNldXJpKHVyaSk7XG5cdFx0XHRcdFx0XHRcdG9wdHMuaG9zdG5hbWUgPSB1cmkuaG9zdDtcblx0XHRcdFx0XHRcdFx0b3B0cy5zZWN1cmUgPSB1cmkucHJvdG9jb2wgPT0gJ2h0dHBzJyB8fCB1cmkucHJvdG9jb2wgPT0gJ3dzcyc7XG5cdFx0XHRcdFx0XHRcdG9wdHMucG9ydCA9IHVyaS5wb3J0O1xuXHRcdFx0XHRcdFx0XHRpZiAodXJpLnF1ZXJ5KSBvcHRzLnF1ZXJ5ID0gdXJpLnF1ZXJ5O1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmIChvcHRzLmhvc3QpIHtcblx0XHRcdFx0XHRcdFx0b3B0cy5ob3N0bmFtZSA9IHBhcnNldXJpKG9wdHMuaG9zdCkuaG9zdDtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0dGhpcy5zZWN1cmUgPSBudWxsICE9IG9wdHMuc2VjdXJlID8gb3B0cy5zZWN1cmUgOiBnbG9iYWwubG9jYXRpb24gJiYgJ2h0dHBzOicgPT0gbG9jYXRpb24ucHJvdG9jb2w7XG5cblx0XHRcdFx0XHRcdGlmIChvcHRzLmhvc3RuYW1lICYmICFvcHRzLnBvcnQpIHtcblx0XHRcdFx0XHRcdFx0Ly8gaWYgbm8gcG9ydCBpcyBzcGVjaWZpZWQgbWFudWFsbHksIHVzZSB0aGUgcHJvdG9jb2wgZGVmYXVsdFxuXHRcdFx0XHRcdFx0XHRvcHRzLnBvcnQgPSB0aGlzLnNlY3VyZSA/ICc0NDMnIDogJzgwJztcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0dGhpcy5hZ2VudCA9IG9wdHMuYWdlbnQgfHwgZmFsc2U7XG5cdFx0XHRcdFx0XHR0aGlzLmhvc3RuYW1lID0gb3B0cy5ob3N0bmFtZSB8fCAoZ2xvYmFsLmxvY2F0aW9uID8gbG9jYXRpb24uaG9zdG5hbWUgOiAnbG9jYWxob3N0Jyk7XG5cdFx0XHRcdFx0XHR0aGlzLnBvcnQgPSBvcHRzLnBvcnQgfHwgKGdsb2JhbC5sb2NhdGlvbiAmJiBsb2NhdGlvbi5wb3J0ID8gbG9jYXRpb24ucG9ydCA6IHRoaXMuc2VjdXJlID8gNDQzIDogODApO1xuXHRcdFx0XHRcdFx0dGhpcy5xdWVyeSA9IG9wdHMucXVlcnkgfHwge307XG5cdFx0XHRcdFx0XHRpZiAoJ3N0cmluZycgPT0gdHlwZW9mIHRoaXMucXVlcnkpIHRoaXMucXVlcnkgPSBwYXJzZXFzLmRlY29kZSh0aGlzLnF1ZXJ5KTtcblx0XHRcdFx0XHRcdHRoaXMudXBncmFkZSA9IGZhbHNlICE9PSBvcHRzLnVwZ3JhZGU7XG5cdFx0XHRcdFx0XHR0aGlzLnBhdGggPSAob3B0cy5wYXRoIHx8ICcvZW5naW5lLmlvJykucmVwbGFjZSgvXFwvJC8sICcnKSArICcvJztcblx0XHRcdFx0XHRcdHRoaXMuZm9yY2VKU09OUCA9ICEhb3B0cy5mb3JjZUpTT05QO1xuXHRcdFx0XHRcdFx0dGhpcy5qc29ucCA9IGZhbHNlICE9PSBvcHRzLmpzb25wO1xuXHRcdFx0XHRcdFx0dGhpcy5mb3JjZUJhc2U2NCA9ICEhb3B0cy5mb3JjZUJhc2U2NDtcblx0XHRcdFx0XHRcdHRoaXMuZW5hYmxlc1hEUiA9ICEhb3B0cy5lbmFibGVzWERSO1xuXHRcdFx0XHRcdFx0dGhpcy50aW1lc3RhbXBQYXJhbSA9IG9wdHMudGltZXN0YW1wUGFyYW0gfHwgJ3QnO1xuXHRcdFx0XHRcdFx0dGhpcy50aW1lc3RhbXBSZXF1ZXN0cyA9IG9wdHMudGltZXN0YW1wUmVxdWVzdHM7XG5cdFx0XHRcdFx0XHR0aGlzLnRyYW5zcG9ydHMgPSBvcHRzLnRyYW5zcG9ydHMgfHwgWydwb2xsaW5nJywgJ3dlYnNvY2tldCddO1xuXHRcdFx0XHRcdFx0dGhpcy5yZWFkeVN0YXRlID0gJyc7XG5cdFx0XHRcdFx0XHR0aGlzLndyaXRlQnVmZmVyID0gW107XG5cdFx0XHRcdFx0XHR0aGlzLnBvbGljeVBvcnQgPSBvcHRzLnBvbGljeVBvcnQgfHwgODQzO1xuXHRcdFx0XHRcdFx0dGhpcy5yZW1lbWJlclVwZ3JhZGUgPSBvcHRzLnJlbWVtYmVyVXBncmFkZSB8fCBmYWxzZTtcblx0XHRcdFx0XHRcdHRoaXMuYmluYXJ5VHlwZSA9IG51bGw7XG5cdFx0XHRcdFx0XHR0aGlzLm9ubHlCaW5hcnlVcGdyYWRlcyA9IG9wdHMub25seUJpbmFyeVVwZ3JhZGVzO1xuXHRcdFx0XHRcdFx0dGhpcy5wZXJNZXNzYWdlRGVmbGF0ZSA9IGZhbHNlICE9PSBvcHRzLnBlck1lc3NhZ2VEZWZsYXRlID8gb3B0cy5wZXJNZXNzYWdlRGVmbGF0ZSB8fCB7fSA6IGZhbHNlO1xuXG5cdFx0XHRcdFx0XHRpZiAodHJ1ZSA9PT0gdGhpcy5wZXJNZXNzYWdlRGVmbGF0ZSkgdGhpcy5wZXJNZXNzYWdlRGVmbGF0ZSA9IHt9O1xuXHRcdFx0XHRcdFx0aWYgKHRoaXMucGVyTWVzc2FnZURlZmxhdGUgJiYgbnVsbCA9PSB0aGlzLnBlck1lc3NhZ2VEZWZsYXRlLnRocmVzaG9sZCkge1xuXHRcdFx0XHRcdFx0XHR0aGlzLnBlck1lc3NhZ2VEZWZsYXRlLnRocmVzaG9sZCA9IDEwMjQ7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdC8vIFNTTCBvcHRpb25zIGZvciBOb2RlLmpzIGNsaWVudFxuXHRcdFx0XHRcdFx0dGhpcy5wZnggPSBvcHRzLnBmeCB8fCBudWxsO1xuXHRcdFx0XHRcdFx0dGhpcy5rZXkgPSBvcHRzLmtleSB8fCBudWxsO1xuXHRcdFx0XHRcdFx0dGhpcy5wYXNzcGhyYXNlID0gb3B0cy5wYXNzcGhyYXNlIHx8IG51bGw7XG5cdFx0XHRcdFx0XHR0aGlzLmNlcnQgPSBvcHRzLmNlcnQgfHwgbnVsbDtcblx0XHRcdFx0XHRcdHRoaXMuY2EgPSBvcHRzLmNhIHx8IG51bGw7XG5cdFx0XHRcdFx0XHR0aGlzLmNpcGhlcnMgPSBvcHRzLmNpcGhlcnMgfHwgbnVsbDtcblx0XHRcdFx0XHRcdHRoaXMucmVqZWN0VW5hdXRob3JpemVkID0gb3B0cy5yZWplY3RVbmF1dGhvcml6ZWQgPT09IHVuZGVmaW5lZCA/IHRydWUgOiBvcHRzLnJlamVjdFVuYXV0aG9yaXplZDtcblxuXHRcdFx0XHRcdFx0Ly8gb3RoZXIgb3B0aW9ucyBmb3IgTm9kZS5qcyBjbGllbnRcblx0XHRcdFx0XHRcdHZhciBmcmVlR2xvYmFsID0gKHR5cGVvZiBnbG9iYWwgPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZihnbG9iYWwpKSA9PSAnb2JqZWN0JyAmJiBnbG9iYWw7XG5cdFx0XHRcdFx0XHRpZiAoZnJlZUdsb2JhbC5nbG9iYWwgPT09IGZyZWVHbG9iYWwpIHtcblx0XHRcdFx0XHRcdFx0aWYgKG9wdHMuZXh0cmFIZWFkZXJzICYmIE9iamVjdC5rZXlzKG9wdHMuZXh0cmFIZWFkZXJzKS5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5leHRyYUhlYWRlcnMgPSBvcHRzLmV4dHJhSGVhZGVycztcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHR0aGlzLm9wZW4oKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRTb2NrZXQucHJpb3JXZWJzb2NrZXRTdWNjZXNzID0gZmFsc2U7XG5cblx0XHRcdFx0XHQvKipcbiAgICAgICogTWl4IGluIGBFbWl0dGVyYC5cbiAgICAgICovXG5cblx0XHRcdFx0XHRFbWl0dGVyKFNvY2tldC5wcm90b3R5cGUpO1xuXG5cdFx0XHRcdFx0LyoqXG4gICAgICAqIFByb3RvY29sIHZlcnNpb24uXG4gICAgICAqXG4gICAgICAqIEBhcGkgcHVibGljXG4gICAgICAqL1xuXG5cdFx0XHRcdFx0U29ja2V0LnByb3RvY29sID0gcGFyc2VyLnByb3RvY29sOyAvLyB0aGlzIGlzIGFuIGludFxuXG5cdFx0XHRcdFx0LyoqXG4gICAgICAqIEV4cG9zZSBkZXBzIGZvciBsZWdhY3kgY29tcGF0aWJpbGl0eVxuICAgICAgKiBhbmQgc3RhbmRhbG9uZSBicm93c2VyIGFjY2Vzcy5cbiAgICAgICovXG5cblx0XHRcdFx0XHRTb2NrZXQuU29ja2V0ID0gU29ja2V0O1xuXHRcdFx0XHRcdFNvY2tldC5UcmFuc3BvcnQgPSBfZGVyZXFfKCcuL3RyYW5zcG9ydCcpO1xuXHRcdFx0XHRcdFNvY2tldC50cmFuc3BvcnRzID0gX2RlcmVxXygnLi90cmFuc3BvcnRzJyk7XG5cdFx0XHRcdFx0U29ja2V0LnBhcnNlciA9IF9kZXJlcV8oJ2VuZ2luZS5pby1wYXJzZXInKTtcblxuXHRcdFx0XHRcdC8qKlxuICAgICAgKiBDcmVhdGVzIHRyYW5zcG9ydCBvZiB0aGUgZ2l2ZW4gdHlwZS5cbiAgICAgICpcbiAgICAgICogQHBhcmFtIHtTdHJpbmd9IHRyYW5zcG9ydCBuYW1lXG4gICAgICAqIEByZXR1cm4ge1RyYW5zcG9ydH1cbiAgICAgICogQGFwaSBwcml2YXRlXG4gICAgICAqL1xuXG5cdFx0XHRcdFx0U29ja2V0LnByb3RvdHlwZS5jcmVhdGVUcmFuc3BvcnQgPSBmdW5jdGlvbiAobmFtZSkge1xuXHRcdFx0XHRcdFx0ZGVidWcoJ2NyZWF0aW5nIHRyYW5zcG9ydCBcIiVzXCInLCBuYW1lKTtcblx0XHRcdFx0XHRcdHZhciBxdWVyeSA9IGNsb25lKHRoaXMucXVlcnkpO1xuXG5cdFx0XHRcdFx0XHQvLyBhcHBlbmQgZW5naW5lLmlvIHByb3RvY29sIGlkZW50aWZpZXJcblx0XHRcdFx0XHRcdHF1ZXJ5LkVJTyA9IHBhcnNlci5wcm90b2NvbDtcblxuXHRcdFx0XHRcdFx0Ly8gdHJhbnNwb3J0IG5hbWVcblx0XHRcdFx0XHRcdHF1ZXJ5LnRyYW5zcG9ydCA9IG5hbWU7XG5cblx0XHRcdFx0XHRcdC8vIHNlc3Npb24gaWQgaWYgd2UgYWxyZWFkeSBoYXZlIG9uZVxuXHRcdFx0XHRcdFx0aWYgKHRoaXMuaWQpIHF1ZXJ5LnNpZCA9IHRoaXMuaWQ7XG5cblx0XHRcdFx0XHRcdHZhciB0cmFuc3BvcnQgPSBuZXcgdHJhbnNwb3J0c1tuYW1lXSh7XG5cdFx0XHRcdFx0XHRcdGFnZW50OiB0aGlzLmFnZW50LFxuXHRcdFx0XHRcdFx0XHRob3N0bmFtZTogdGhpcy5ob3N0bmFtZSxcblx0XHRcdFx0XHRcdFx0cG9ydDogdGhpcy5wb3J0LFxuXHRcdFx0XHRcdFx0XHRzZWN1cmU6IHRoaXMuc2VjdXJlLFxuXHRcdFx0XHRcdFx0XHRwYXRoOiB0aGlzLnBhdGgsXG5cdFx0XHRcdFx0XHRcdHF1ZXJ5OiBxdWVyeSxcblx0XHRcdFx0XHRcdFx0Zm9yY2VKU09OUDogdGhpcy5mb3JjZUpTT05QLFxuXHRcdFx0XHRcdFx0XHRqc29ucDogdGhpcy5qc29ucCxcblx0XHRcdFx0XHRcdFx0Zm9yY2VCYXNlNjQ6IHRoaXMuZm9yY2VCYXNlNjQsXG5cdFx0XHRcdFx0XHRcdGVuYWJsZXNYRFI6IHRoaXMuZW5hYmxlc1hEUixcblx0XHRcdFx0XHRcdFx0dGltZXN0YW1wUmVxdWVzdHM6IHRoaXMudGltZXN0YW1wUmVxdWVzdHMsXG5cdFx0XHRcdFx0XHRcdHRpbWVzdGFtcFBhcmFtOiB0aGlzLnRpbWVzdGFtcFBhcmFtLFxuXHRcdFx0XHRcdFx0XHRwb2xpY3lQb3J0OiB0aGlzLnBvbGljeVBvcnQsXG5cdFx0XHRcdFx0XHRcdHNvY2tldDogdGhpcyxcblx0XHRcdFx0XHRcdFx0cGZ4OiB0aGlzLnBmeCxcblx0XHRcdFx0XHRcdFx0a2V5OiB0aGlzLmtleSxcblx0XHRcdFx0XHRcdFx0cGFzc3BocmFzZTogdGhpcy5wYXNzcGhyYXNlLFxuXHRcdFx0XHRcdFx0XHRjZXJ0OiB0aGlzLmNlcnQsXG5cdFx0XHRcdFx0XHRcdGNhOiB0aGlzLmNhLFxuXHRcdFx0XHRcdFx0XHRjaXBoZXJzOiB0aGlzLmNpcGhlcnMsXG5cdFx0XHRcdFx0XHRcdHJlamVjdFVuYXV0aG9yaXplZDogdGhpcy5yZWplY3RVbmF1dGhvcml6ZWQsXG5cdFx0XHRcdFx0XHRcdHBlck1lc3NhZ2VEZWZsYXRlOiB0aGlzLnBlck1lc3NhZ2VEZWZsYXRlLFxuXHRcdFx0XHRcdFx0XHRleHRyYUhlYWRlcnM6IHRoaXMuZXh0cmFIZWFkZXJzXG5cdFx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdFx0cmV0dXJuIHRyYW5zcG9ydDtcblx0XHRcdFx0XHR9O1xuXG5cdFx0XHRcdFx0ZnVuY3Rpb24gY2xvbmUob2JqKSB7XG5cdFx0XHRcdFx0XHR2YXIgbyA9IHt9O1xuXHRcdFx0XHRcdFx0Zm9yICh2YXIgaSBpbiBvYmopIHtcblx0XHRcdFx0XHRcdFx0aWYgKG9iai5oYXNPd25Qcm9wZXJ0eShpKSkge1xuXHRcdFx0XHRcdFx0XHRcdG9baV0gPSBvYmpbaV07XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdHJldHVybiBvO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8qKlxuICAgICAgKiBJbml0aWFsaXplcyB0cmFuc3BvcnQgdG8gdXNlIGFuZCBzdGFydHMgcHJvYmUuXG4gICAgICAqXG4gICAgICAqIEBhcGkgcHJpdmF0ZVxuICAgICAgKi9cblx0XHRcdFx0XHRTb2NrZXQucHJvdG90eXBlLm9wZW4gPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHR2YXIgdHJhbnNwb3J0O1xuXHRcdFx0XHRcdFx0aWYgKHRoaXMucmVtZW1iZXJVcGdyYWRlICYmIFNvY2tldC5wcmlvcldlYnNvY2tldFN1Y2Nlc3MgJiYgdGhpcy50cmFuc3BvcnRzLmluZGV4T2YoJ3dlYnNvY2tldCcpICE9IC0xKSB7XG5cdFx0XHRcdFx0XHRcdHRyYW5zcG9ydCA9ICd3ZWJzb2NrZXQnO1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmICgwID09PSB0aGlzLnRyYW5zcG9ydHMubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHRcdC8vIEVtaXQgZXJyb3Igb24gbmV4dCB0aWNrIHNvIGl0IGNhbiBiZSBsaXN0ZW5lZCB0b1xuXHRcdFx0XHRcdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cdFx0XHRcdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0XHRcdHNlbGYuZW1pdCgnZXJyb3InLCAnTm8gdHJhbnNwb3J0cyBhdmFpbGFibGUnKTtcblx0XHRcdFx0XHRcdFx0fSwgMCk7XG5cdFx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdHRyYW5zcG9ydCA9IHRoaXMudHJhbnNwb3J0c1swXTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdHRoaXMucmVhZHlTdGF0ZSA9ICdvcGVuaW5nJztcblxuXHRcdFx0XHRcdFx0Ly8gUmV0cnkgd2l0aCB0aGUgbmV4dCB0cmFuc3BvcnQgaWYgdGhlIHRyYW5zcG9ydCBpcyBkaXNhYmxlZCAoanNvbnA6IGZhbHNlKVxuXHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0dHJhbnNwb3J0ID0gdGhpcy5jcmVhdGVUcmFuc3BvcnQodHJhbnNwb3J0KTtcblx0XHRcdFx0XHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdFx0XHRcdFx0dGhpcy50cmFuc3BvcnRzLnNoaWZ0KCk7XG5cdFx0XHRcdFx0XHRcdHRoaXMub3BlbigpO1xuXHRcdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdHRyYW5zcG9ydC5vcGVuKCk7XG5cdFx0XHRcdFx0XHR0aGlzLnNldFRyYW5zcG9ydCh0cmFuc3BvcnQpO1xuXHRcdFx0XHRcdH07XG5cblx0XHRcdFx0XHQvKipcbiAgICAgICogU2V0cyB0aGUgY3VycmVudCB0cmFuc3BvcnQuIERpc2FibGVzIHRoZSBleGlzdGluZyBvbmUgKGlmIGFueSkuXG4gICAgICAqXG4gICAgICAqIEBhcGkgcHJpdmF0ZVxuICAgICAgKi9cblxuXHRcdFx0XHRcdFNvY2tldC5wcm90b3R5cGUuc2V0VHJhbnNwb3J0ID0gZnVuY3Rpb24gKHRyYW5zcG9ydCkge1xuXHRcdFx0XHRcdFx0ZGVidWcoJ3NldHRpbmcgdHJhbnNwb3J0ICVzJywgdHJhbnNwb3J0Lm5hbWUpO1xuXHRcdFx0XHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXG5cdFx0XHRcdFx0XHRpZiAodGhpcy50cmFuc3BvcnQpIHtcblx0XHRcdFx0XHRcdFx0ZGVidWcoJ2NsZWFyaW5nIGV4aXN0aW5nIHRyYW5zcG9ydCAlcycsIHRoaXMudHJhbnNwb3J0Lm5hbWUpO1xuXHRcdFx0XHRcdFx0XHR0aGlzLnRyYW5zcG9ydC5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0Ly8gc2V0IHVwIHRyYW5zcG9ydFxuXHRcdFx0XHRcdFx0dGhpcy50cmFuc3BvcnQgPSB0cmFuc3BvcnQ7XG5cblx0XHRcdFx0XHRcdC8vIHNldCB1cCB0cmFuc3BvcnQgbGlzdGVuZXJzXG5cdFx0XHRcdFx0XHR0cmFuc3BvcnQub24oJ2RyYWluJywgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0XHRzZWxmLm9uRHJhaW4oKTtcblx0XHRcdFx0XHRcdH0pLm9uKCdwYWNrZXQnLCBmdW5jdGlvbiAocGFja2V0KSB7XG5cdFx0XHRcdFx0XHRcdHNlbGYub25QYWNrZXQocGFja2V0KTtcblx0XHRcdFx0XHRcdH0pLm9uKCdlcnJvcicsIGZ1bmN0aW9uIChlKSB7XG5cdFx0XHRcdFx0XHRcdHNlbGYub25FcnJvcihlKTtcblx0XHRcdFx0XHRcdH0pLm9uKCdjbG9zZScsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdFx0c2VsZi5vbkNsb3NlKCd0cmFuc3BvcnQgY2xvc2UnKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH07XG5cblx0XHRcdFx0XHQvKipcbiAgICAgICogUHJvYmVzIGEgdHJhbnNwb3J0LlxuICAgICAgKlxuICAgICAgKiBAcGFyYW0ge1N0cmluZ30gdHJhbnNwb3J0IG5hbWVcbiAgICAgICogQGFwaSBwcml2YXRlXG4gICAgICAqL1xuXG5cdFx0XHRcdFx0U29ja2V0LnByb3RvdHlwZS5wcm9iZSA9IGZ1bmN0aW9uIChuYW1lKSB7XG5cdFx0XHRcdFx0XHRkZWJ1ZygncHJvYmluZyB0cmFuc3BvcnQgXCIlc1wiJywgbmFtZSk7XG5cdFx0XHRcdFx0XHR2YXIgdHJhbnNwb3J0ID0gdGhpcy5jcmVhdGVUcmFuc3BvcnQobmFtZSwge1xuXHRcdFx0XHRcdFx0XHRwcm9iZTogMVxuXHRcdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0XHQgICAgZmFpbGVkID0gZmFsc2UsXG5cdFx0XHRcdFx0XHQgICAgc2VsZiA9IHRoaXM7XG5cblx0XHRcdFx0XHRcdFNvY2tldC5wcmlvcldlYnNvY2tldFN1Y2Nlc3MgPSBmYWxzZTtcblxuXHRcdFx0XHRcdFx0ZnVuY3Rpb24gb25UcmFuc3BvcnRPcGVuKCkge1xuXHRcdFx0XHRcdFx0XHRpZiAoc2VsZi5vbmx5QmluYXJ5VXBncmFkZXMpIHtcblx0XHRcdFx0XHRcdFx0XHR2YXIgdXBncmFkZUxvc2VzQmluYXJ5ID0gIXRoaXMuc3VwcG9ydHNCaW5hcnkgJiYgc2VsZi50cmFuc3BvcnQuc3VwcG9ydHNCaW5hcnk7XG5cdFx0XHRcdFx0XHRcdFx0ZmFpbGVkID0gZmFpbGVkIHx8IHVwZ3JhZGVMb3Nlc0JpbmFyeTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRpZiAoZmFpbGVkKSByZXR1cm47XG5cblx0XHRcdFx0XHRcdFx0ZGVidWcoJ3Byb2JlIHRyYW5zcG9ydCBcIiVzXCIgb3BlbmVkJywgbmFtZSk7XG5cdFx0XHRcdFx0XHRcdHRyYW5zcG9ydC5zZW5kKFt7XG5cdFx0XHRcdFx0XHRcdFx0dHlwZTogJ3BpbmcnLFxuXHRcdFx0XHRcdFx0XHRcdGRhdGE6ICdwcm9iZSdcblx0XHRcdFx0XHRcdFx0fV0pO1xuXHRcdFx0XHRcdFx0XHR0cmFuc3BvcnQub25jZSgncGFja2V0JywgZnVuY3Rpb24gKG1zZykge1xuXHRcdFx0XHRcdFx0XHRcdGlmIChmYWlsZWQpIHJldHVybjtcblx0XHRcdFx0XHRcdFx0XHRpZiAoJ3BvbmcnID09IG1zZy50eXBlICYmICdwcm9iZScgPT0gbXNnLmRhdGEpIHtcblx0XHRcdFx0XHRcdFx0XHRcdGRlYnVnKCdwcm9iZSB0cmFuc3BvcnQgXCIlc1wiIHBvbmcnLCBuYW1lKTtcblx0XHRcdFx0XHRcdFx0XHRcdHNlbGYudXBncmFkaW5nID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0XHRcdHNlbGYuZW1pdCgndXBncmFkaW5nJywgdHJhbnNwb3J0KTtcblx0XHRcdFx0XHRcdFx0XHRcdGlmICghdHJhbnNwb3J0KSByZXR1cm47XG5cdFx0XHRcdFx0XHRcdFx0XHRTb2NrZXQucHJpb3JXZWJzb2NrZXRTdWNjZXNzID0gJ3dlYnNvY2tldCcgPT0gdHJhbnNwb3J0Lm5hbWU7XG5cblx0XHRcdFx0XHRcdFx0XHRcdGRlYnVnKCdwYXVzaW5nIGN1cnJlbnQgdHJhbnNwb3J0IFwiJXNcIicsIHNlbGYudHJhbnNwb3J0Lm5hbWUpO1xuXHRcdFx0XHRcdFx0XHRcdFx0c2VsZi50cmFuc3BvcnQucGF1c2UoZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoZmFpbGVkKSByZXR1cm47XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmICgnY2xvc2VkJyA9PSBzZWxmLnJlYWR5U3RhdGUpIHJldHVybjtcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZGVidWcoJ2NoYW5naW5nIHRyYW5zcG9ydCBhbmQgc2VuZGluZyB1cGdyYWRlIHBhY2tldCcpO1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNsZWFudXAoKTtcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRzZWxmLnNldFRyYW5zcG9ydCh0cmFuc3BvcnQpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR0cmFuc3BvcnQuc2VuZChbe1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHR5cGU6ICd1cGdyYWRlJ1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHNlbGYuZW1pdCgndXBncmFkZScsIHRyYW5zcG9ydCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRyYW5zcG9ydCA9IG51bGw7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHNlbGYudXBncmFkaW5nID0gZmFsc2U7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHNlbGYuZmx1c2goKTtcblx0XHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRkZWJ1ZygncHJvYmUgdHJhbnNwb3J0IFwiJXNcIiBmYWlsZWQnLCBuYW1lKTtcblx0XHRcdFx0XHRcdFx0XHRcdHZhciBlcnIgPSBuZXcgRXJyb3IoJ3Byb2JlIGVycm9yJyk7XG5cdFx0XHRcdFx0XHRcdFx0XHRlcnIudHJhbnNwb3J0ID0gdHJhbnNwb3J0Lm5hbWU7XG5cdFx0XHRcdFx0XHRcdFx0XHRzZWxmLmVtaXQoJ3VwZ3JhZGVFcnJvcicsIGVycik7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0ZnVuY3Rpb24gZnJlZXplVHJhbnNwb3J0KCkge1xuXHRcdFx0XHRcdFx0XHRpZiAoZmFpbGVkKSByZXR1cm47XG5cblx0XHRcdFx0XHRcdFx0Ly8gQW55IGNhbGxiYWNrIGNhbGxlZCBieSB0cmFuc3BvcnQgc2hvdWxkIGJlIGlnbm9yZWQgc2luY2Ugbm93XG5cdFx0XHRcdFx0XHRcdGZhaWxlZCA9IHRydWU7XG5cblx0XHRcdFx0XHRcdFx0Y2xlYW51cCgpO1xuXG5cdFx0XHRcdFx0XHRcdHRyYW5zcG9ydC5jbG9zZSgpO1xuXHRcdFx0XHRcdFx0XHR0cmFuc3BvcnQgPSBudWxsO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHQvL0hhbmRsZSBhbnkgZXJyb3IgdGhhdCBoYXBwZW5zIHdoaWxlIHByb2Jpbmdcblx0XHRcdFx0XHRcdGZ1bmN0aW9uIG9uZXJyb3IoZXJyKSB7XG5cdFx0XHRcdFx0XHRcdHZhciBlcnJvciA9IG5ldyBFcnJvcigncHJvYmUgZXJyb3I6ICcgKyBlcnIpO1xuXHRcdFx0XHRcdFx0XHRlcnJvci50cmFuc3BvcnQgPSB0cmFuc3BvcnQubmFtZTtcblxuXHRcdFx0XHRcdFx0XHRmcmVlemVUcmFuc3BvcnQoKTtcblxuXHRcdFx0XHRcdFx0XHRkZWJ1ZygncHJvYmUgdHJhbnNwb3J0IFwiJXNcIiBmYWlsZWQgYmVjYXVzZSBvZiBlcnJvcjogJXMnLCBuYW1lLCBlcnIpO1xuXG5cdFx0XHRcdFx0XHRcdHNlbGYuZW1pdCgndXBncmFkZUVycm9yJywgZXJyb3IpO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRmdW5jdGlvbiBvblRyYW5zcG9ydENsb3NlKCkge1xuXHRcdFx0XHRcdFx0XHRvbmVycm9yKFwidHJhbnNwb3J0IGNsb3NlZFwiKTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0Ly9XaGVuIHRoZSBzb2NrZXQgaXMgY2xvc2VkIHdoaWxlIHdlJ3JlIHByb2Jpbmdcblx0XHRcdFx0XHRcdGZ1bmN0aW9uIG9uY2xvc2UoKSB7XG5cdFx0XHRcdFx0XHRcdG9uZXJyb3IoXCJzb2NrZXQgY2xvc2VkXCIpO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHQvL1doZW4gdGhlIHNvY2tldCBpcyB1cGdyYWRlZCB3aGlsZSB3ZSdyZSBwcm9iaW5nXG5cdFx0XHRcdFx0XHRmdW5jdGlvbiBvbnVwZ3JhZGUodG8pIHtcblx0XHRcdFx0XHRcdFx0aWYgKHRyYW5zcG9ydCAmJiB0by5uYW1lICE9IHRyYW5zcG9ydC5uYW1lKSB7XG5cdFx0XHRcdFx0XHRcdFx0ZGVidWcoJ1wiJXNcIiB3b3JrcyAtIGFib3J0aW5nIFwiJXNcIicsIHRvLm5hbWUsIHRyYW5zcG9ydC5uYW1lKTtcblx0XHRcdFx0XHRcdFx0XHRmcmVlemVUcmFuc3BvcnQoKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHQvL1JlbW92ZSBhbGwgbGlzdGVuZXJzIG9uIHRoZSB0cmFuc3BvcnQgYW5kIG9uIHNlbGZcblx0XHRcdFx0XHRcdGZ1bmN0aW9uIGNsZWFudXAoKSB7XG5cdFx0XHRcdFx0XHRcdHRyYW5zcG9ydC5yZW1vdmVMaXN0ZW5lcignb3BlbicsIG9uVHJhbnNwb3J0T3Blbik7XG5cdFx0XHRcdFx0XHRcdHRyYW5zcG9ydC5yZW1vdmVMaXN0ZW5lcignZXJyb3InLCBvbmVycm9yKTtcblx0XHRcdFx0XHRcdFx0dHJhbnNwb3J0LnJlbW92ZUxpc3RlbmVyKCdjbG9zZScsIG9uVHJhbnNwb3J0Q2xvc2UpO1xuXHRcdFx0XHRcdFx0XHRzZWxmLnJlbW92ZUxpc3RlbmVyKCdjbG9zZScsIG9uY2xvc2UpO1xuXHRcdFx0XHRcdFx0XHRzZWxmLnJlbW92ZUxpc3RlbmVyKCd1cGdyYWRpbmcnLCBvbnVwZ3JhZGUpO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHR0cmFuc3BvcnQub25jZSgnb3BlbicsIG9uVHJhbnNwb3J0T3Blbik7XG5cdFx0XHRcdFx0XHR0cmFuc3BvcnQub25jZSgnZXJyb3InLCBvbmVycm9yKTtcblx0XHRcdFx0XHRcdHRyYW5zcG9ydC5vbmNlKCdjbG9zZScsIG9uVHJhbnNwb3J0Q2xvc2UpO1xuXG5cdFx0XHRcdFx0XHR0aGlzLm9uY2UoJ2Nsb3NlJywgb25jbG9zZSk7XG5cdFx0XHRcdFx0XHR0aGlzLm9uY2UoJ3VwZ3JhZGluZycsIG9udXBncmFkZSk7XG5cblx0XHRcdFx0XHRcdHRyYW5zcG9ydC5vcGVuKCk7XG5cdFx0XHRcdFx0fTtcblxuXHRcdFx0XHRcdC8qKlxuICAgICAgKiBDYWxsZWQgd2hlbiBjb25uZWN0aW9uIGlzIGRlZW1lZCBvcGVuLlxuICAgICAgKlxuICAgICAgKiBAYXBpIHB1YmxpY1xuICAgICAgKi9cblxuXHRcdFx0XHRcdFNvY2tldC5wcm90b3R5cGUub25PcGVuID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0ZGVidWcoJ3NvY2tldCBvcGVuJyk7XG5cdFx0XHRcdFx0XHR0aGlzLnJlYWR5U3RhdGUgPSAnb3Blbic7XG5cdFx0XHRcdFx0XHRTb2NrZXQucHJpb3JXZWJzb2NrZXRTdWNjZXNzID0gJ3dlYnNvY2tldCcgPT0gdGhpcy50cmFuc3BvcnQubmFtZTtcblx0XHRcdFx0XHRcdHRoaXMuZW1pdCgnb3BlbicpO1xuXHRcdFx0XHRcdFx0dGhpcy5mbHVzaCgpO1xuXG5cdFx0XHRcdFx0XHQvLyB3ZSBjaGVjayBmb3IgYHJlYWR5U3RhdGVgIGluIGNhc2UgYW4gYG9wZW5gXG5cdFx0XHRcdFx0XHQvLyBsaXN0ZW5lciBhbHJlYWR5IGNsb3NlZCB0aGUgc29ja2V0XG5cdFx0XHRcdFx0XHRpZiAoJ29wZW4nID09IHRoaXMucmVhZHlTdGF0ZSAmJiB0aGlzLnVwZ3JhZGUgJiYgdGhpcy50cmFuc3BvcnQucGF1c2UpIHtcblx0XHRcdFx0XHRcdFx0ZGVidWcoJ3N0YXJ0aW5nIHVwZ3JhZGUgcHJvYmVzJyk7XG5cdFx0XHRcdFx0XHRcdGZvciAodmFyIGkgPSAwLCBsID0gdGhpcy51cGdyYWRlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnByb2JlKHRoaXMudXBncmFkZXNbaV0pO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fTtcblxuXHRcdFx0XHRcdC8qKlxuICAgICAgKiBIYW5kbGVzIGEgcGFja2V0LlxuICAgICAgKlxuICAgICAgKiBAYXBpIHByaXZhdGVcbiAgICAgICovXG5cblx0XHRcdFx0XHRTb2NrZXQucHJvdG90eXBlLm9uUGFja2V0ID0gZnVuY3Rpb24gKHBhY2tldCkge1xuXHRcdFx0XHRcdFx0aWYgKCdvcGVuaW5nJyA9PSB0aGlzLnJlYWR5U3RhdGUgfHwgJ29wZW4nID09IHRoaXMucmVhZHlTdGF0ZSkge1xuXHRcdFx0XHRcdFx0XHRkZWJ1Zygnc29ja2V0IHJlY2VpdmU6IHR5cGUgXCIlc1wiLCBkYXRhIFwiJXNcIicsIHBhY2tldC50eXBlLCBwYWNrZXQuZGF0YSk7XG5cblx0XHRcdFx0XHRcdFx0dGhpcy5lbWl0KCdwYWNrZXQnLCBwYWNrZXQpO1xuXG5cdFx0XHRcdFx0XHRcdC8vIFNvY2tldCBpcyBsaXZlIC0gYW55IHBhY2tldCBjb3VudHNcblx0XHRcdFx0XHRcdFx0dGhpcy5lbWl0KCdoZWFydGJlYXQnKTtcblxuXHRcdFx0XHRcdFx0XHRzd2l0Y2ggKHBhY2tldC50eXBlKSB7XG5cdFx0XHRcdFx0XHRcdFx0Y2FzZSAnb3Blbic6XG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLm9uSGFuZHNoYWtlKHBhcnNlanNvbihwYWNrZXQuZGF0YSkpO1xuXHRcdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRcdFx0XHRjYXNlICdwb25nJzpcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMuc2V0UGluZygpO1xuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5lbWl0KCdwb25nJyk7XG5cdFx0XHRcdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdFx0XHRcdGNhc2UgJ2Vycm9yJzpcblx0XHRcdFx0XHRcdFx0XHRcdHZhciBlcnIgPSBuZXcgRXJyb3IoJ3NlcnZlciBlcnJvcicpO1xuXHRcdFx0XHRcdFx0XHRcdFx0ZXJyLmNvZGUgPSBwYWNrZXQuZGF0YTtcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMub25FcnJvcihlcnIpO1xuXHRcdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRcdFx0XHRjYXNlICdtZXNzYWdlJzpcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMuZW1pdCgnZGF0YScsIHBhY2tldC5kYXRhKTtcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMuZW1pdCgnbWVzc2FnZScsIHBhY2tldC5kYXRhKTtcblx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRkZWJ1ZygncGFja2V0IHJlY2VpdmVkIHdpdGggc29ja2V0IHJlYWR5U3RhdGUgXCIlc1wiJywgdGhpcy5yZWFkeVN0YXRlKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9O1xuXG5cdFx0XHRcdFx0LyoqXG4gICAgICAqIENhbGxlZCB1cG9uIGhhbmRzaGFrZSBjb21wbGV0aW9uLlxuICAgICAgKlxuICAgICAgKiBAcGFyYW0ge09iamVjdH0gaGFuZHNoYWtlIG9ialxuICAgICAgKiBAYXBpIHByaXZhdGVcbiAgICAgICovXG5cblx0XHRcdFx0XHRTb2NrZXQucHJvdG90eXBlLm9uSGFuZHNoYWtlID0gZnVuY3Rpb24gKGRhdGEpIHtcblx0XHRcdFx0XHRcdHRoaXMuZW1pdCgnaGFuZHNoYWtlJywgZGF0YSk7XG5cdFx0XHRcdFx0XHR0aGlzLmlkID0gZGF0YS5zaWQ7XG5cdFx0XHRcdFx0XHR0aGlzLnRyYW5zcG9ydC5xdWVyeS5zaWQgPSBkYXRhLnNpZDtcblx0XHRcdFx0XHRcdHRoaXMudXBncmFkZXMgPSB0aGlzLmZpbHRlclVwZ3JhZGVzKGRhdGEudXBncmFkZXMpO1xuXHRcdFx0XHRcdFx0dGhpcy5waW5nSW50ZXJ2YWwgPSBkYXRhLnBpbmdJbnRlcnZhbDtcblx0XHRcdFx0XHRcdHRoaXMucGluZ1RpbWVvdXQgPSBkYXRhLnBpbmdUaW1lb3V0O1xuXHRcdFx0XHRcdFx0dGhpcy5vbk9wZW4oKTtcblx0XHRcdFx0XHRcdC8vIEluIGNhc2Ugb3BlbiBoYW5kbGVyIGNsb3NlcyBzb2NrZXRcblx0XHRcdFx0XHRcdGlmICgnY2xvc2VkJyA9PSB0aGlzLnJlYWR5U3RhdGUpIHJldHVybjtcblx0XHRcdFx0XHRcdHRoaXMuc2V0UGluZygpO1xuXG5cdFx0XHRcdFx0XHQvLyBQcm9sb25nIGxpdmVuZXNzIG9mIHNvY2tldCBvbiBoZWFydGJlYXRcblx0XHRcdFx0XHRcdHRoaXMucmVtb3ZlTGlzdGVuZXIoJ2hlYXJ0YmVhdCcsIHRoaXMub25IZWFydGJlYXQpO1xuXHRcdFx0XHRcdFx0dGhpcy5vbignaGVhcnRiZWF0JywgdGhpcy5vbkhlYXJ0YmVhdCk7XG5cdFx0XHRcdFx0fTtcblxuXHRcdFx0XHRcdC8qKlxuICAgICAgKiBSZXNldHMgcGluZyB0aW1lb3V0LlxuICAgICAgKlxuICAgICAgKiBAYXBpIHByaXZhdGVcbiAgICAgICovXG5cblx0XHRcdFx0XHRTb2NrZXQucHJvdG90eXBlLm9uSGVhcnRiZWF0ID0gZnVuY3Rpb24gKHRpbWVvdXQpIHtcblx0XHRcdFx0XHRcdGNsZWFyVGltZW91dCh0aGlzLnBpbmdUaW1lb3V0VGltZXIpO1xuXHRcdFx0XHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXHRcdFx0XHRcdFx0c2VsZi5waW5nVGltZW91dFRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHRcdGlmICgnY2xvc2VkJyA9PSBzZWxmLnJlYWR5U3RhdGUpIHJldHVybjtcblx0XHRcdFx0XHRcdFx0c2VsZi5vbkNsb3NlKCdwaW5nIHRpbWVvdXQnKTtcblx0XHRcdFx0XHRcdH0sIHRpbWVvdXQgfHwgc2VsZi5waW5nSW50ZXJ2YWwgKyBzZWxmLnBpbmdUaW1lb3V0KTtcblx0XHRcdFx0XHR9O1xuXG5cdFx0XHRcdFx0LyoqXG4gICAgICAqIFBpbmdzIHNlcnZlciBldmVyeSBgdGhpcy5waW5nSW50ZXJ2YWxgIGFuZCBleHBlY3RzIHJlc3BvbnNlXG4gICAgICAqIHdpdGhpbiBgdGhpcy5waW5nVGltZW91dGAgb3IgY2xvc2VzIGNvbm5lY3Rpb24uXG4gICAgICAqXG4gICAgICAqIEBhcGkgcHJpdmF0ZVxuICAgICAgKi9cblxuXHRcdFx0XHRcdFNvY2tldC5wcm90b3R5cGUuc2V0UGluZyA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdHZhciBzZWxmID0gdGhpcztcblx0XHRcdFx0XHRcdGNsZWFyVGltZW91dChzZWxmLnBpbmdJbnRlcnZhbFRpbWVyKTtcblx0XHRcdFx0XHRcdHNlbGYucGluZ0ludGVydmFsVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdFx0ZGVidWcoJ3dyaXRpbmcgcGluZyBwYWNrZXQgLSBleHBlY3RpbmcgcG9uZyB3aXRoaW4gJXNtcycsIHNlbGYucGluZ1RpbWVvdXQpO1xuXHRcdFx0XHRcdFx0XHRzZWxmLnBpbmcoKTtcblx0XHRcdFx0XHRcdFx0c2VsZi5vbkhlYXJ0YmVhdChzZWxmLnBpbmdUaW1lb3V0KTtcblx0XHRcdFx0XHRcdH0sIHNlbGYucGluZ0ludGVydmFsKTtcblx0XHRcdFx0XHR9O1xuXG5cdFx0XHRcdFx0LyoqXG4gICAgICAqIFNlbmRzIGEgcGluZyBwYWNrZXQuXG4gICAgICAqXG4gICAgICAqIEBhcGkgcHJpdmF0ZVxuICAgICAgKi9cblxuXHRcdFx0XHRcdFNvY2tldC5wcm90b3R5cGUucGluZyA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdHZhciBzZWxmID0gdGhpcztcblx0XHRcdFx0XHRcdHRoaXMuc2VuZFBhY2tldCgncGluZycsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdFx0c2VsZi5lbWl0KCdwaW5nJyk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9O1xuXG5cdFx0XHRcdFx0LyoqXG4gICAgICAqIENhbGxlZCBvbiBgZHJhaW5gIGV2ZW50XG4gICAgICAqXG4gICAgICAqIEBhcGkgcHJpdmF0ZVxuICAgICAgKi9cblxuXHRcdFx0XHRcdFNvY2tldC5wcm90b3R5cGUub25EcmFpbiA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdHRoaXMud3JpdGVCdWZmZXIuc3BsaWNlKDAsIHRoaXMucHJldkJ1ZmZlckxlbik7XG5cblx0XHRcdFx0XHRcdC8vIHNldHRpbmcgcHJldkJ1ZmZlckxlbiA9IDAgaXMgdmVyeSBpbXBvcnRhbnRcblx0XHRcdFx0XHRcdC8vIGZvciBleGFtcGxlLCB3aGVuIHVwZ3JhZGluZywgdXBncmFkZSBwYWNrZXQgaXMgc2VudCBvdmVyLFxuXHRcdFx0XHRcdFx0Ly8gYW5kIGEgbm9uemVybyBwcmV2QnVmZmVyTGVuIGNvdWxkIGNhdXNlIHByb2JsZW1zIG9uIGBkcmFpbmBcblx0XHRcdFx0XHRcdHRoaXMucHJldkJ1ZmZlckxlbiA9IDA7XG5cblx0XHRcdFx0XHRcdGlmICgwID09PSB0aGlzLndyaXRlQnVmZmVyLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0XHR0aGlzLmVtaXQoJ2RyYWluJyk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHR0aGlzLmZsdXNoKCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fTtcblxuXHRcdFx0XHRcdC8qKlxuICAgICAgKiBGbHVzaCB3cml0ZSBidWZmZXJzLlxuICAgICAgKlxuICAgICAgKiBAYXBpIHByaXZhdGVcbiAgICAgICovXG5cblx0XHRcdFx0XHRTb2NrZXQucHJvdG90eXBlLmZsdXNoID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0aWYgKCdjbG9zZWQnICE9IHRoaXMucmVhZHlTdGF0ZSAmJiB0aGlzLnRyYW5zcG9ydC53cml0YWJsZSAmJiAhdGhpcy51cGdyYWRpbmcgJiYgdGhpcy53cml0ZUJ1ZmZlci5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdFx0ZGVidWcoJ2ZsdXNoaW5nICVkIHBhY2tldHMgaW4gc29ja2V0JywgdGhpcy53cml0ZUJ1ZmZlci5sZW5ndGgpO1xuXHRcdFx0XHRcdFx0XHR0aGlzLnRyYW5zcG9ydC5zZW5kKHRoaXMud3JpdGVCdWZmZXIpO1xuXHRcdFx0XHRcdFx0XHQvLyBrZWVwIHRyYWNrIG9mIGN1cnJlbnQgbGVuZ3RoIG9mIHdyaXRlQnVmZmVyXG5cdFx0XHRcdFx0XHRcdC8vIHNwbGljZSB3cml0ZUJ1ZmZlciBhbmQgY2FsbGJhY2tCdWZmZXIgb24gYGRyYWluYFxuXHRcdFx0XHRcdFx0XHR0aGlzLnByZXZCdWZmZXJMZW4gPSB0aGlzLndyaXRlQnVmZmVyLmxlbmd0aDtcblx0XHRcdFx0XHRcdFx0dGhpcy5lbWl0KCdmbHVzaCcpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH07XG5cblx0XHRcdFx0XHQvKipcbiAgICAgICogU2VuZHMgYSBtZXNzYWdlLlxuICAgICAgKlxuICAgICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZS5cbiAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgZnVuY3Rpb24uXG4gICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zLlxuICAgICAgKiBAcmV0dXJuIHtTb2NrZXR9IGZvciBjaGFpbmluZy5cbiAgICAgICogQGFwaSBwdWJsaWNcbiAgICAgICovXG5cblx0XHRcdFx0XHRTb2NrZXQucHJvdG90eXBlLndyaXRlID0gU29ja2V0LnByb3RvdHlwZS5zZW5kID0gZnVuY3Rpb24gKG1zZywgb3B0aW9ucywgZm4pIHtcblx0XHRcdFx0XHRcdHRoaXMuc2VuZFBhY2tldCgnbWVzc2FnZScsIG1zZywgb3B0aW9ucywgZm4pO1xuXHRcdFx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHRcdFx0fTtcblxuXHRcdFx0XHRcdC8qKlxuICAgICAgKiBTZW5kcyBhIHBhY2tldC5cbiAgICAgICpcbiAgICAgICogQHBhcmFtIHtTdHJpbmd9IHBhY2tldCB0eXBlLlxuICAgICAgKiBAcGFyYW0ge1N0cmluZ30gZGF0YS5cbiAgICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMuXG4gICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIGZ1bmN0aW9uLlxuICAgICAgKiBAYXBpIHByaXZhdGVcbiAgICAgICovXG5cblx0XHRcdFx0XHRTb2NrZXQucHJvdG90eXBlLnNlbmRQYWNrZXQgPSBmdW5jdGlvbiAodHlwZSwgZGF0YSwgb3B0aW9ucywgZm4pIHtcblx0XHRcdFx0XHRcdGlmICgnZnVuY3Rpb24nID09IHR5cGVvZiBkYXRhKSB7XG5cdFx0XHRcdFx0XHRcdGZuID0gZGF0YTtcblx0XHRcdFx0XHRcdFx0ZGF0YSA9IHVuZGVmaW5lZDtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0aWYgKCdmdW5jdGlvbicgPT0gdHlwZW9mIG9wdGlvbnMpIHtcblx0XHRcdFx0XHRcdFx0Zm4gPSBvcHRpb25zO1xuXHRcdFx0XHRcdFx0XHRvcHRpb25zID0gbnVsbDtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0aWYgKCdjbG9zaW5nJyA9PSB0aGlzLnJlYWR5U3RhdGUgfHwgJ2Nsb3NlZCcgPT0gdGhpcy5yZWFkeVN0YXRlKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0b3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cdFx0XHRcdFx0XHRvcHRpb25zLmNvbXByZXNzID0gZmFsc2UgIT09IG9wdGlvbnMuY29tcHJlc3M7XG5cblx0XHRcdFx0XHRcdHZhciBwYWNrZXQgPSB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IHR5cGUsXG5cdFx0XHRcdFx0XHRcdGRhdGE6IGRhdGEsXG5cdFx0XHRcdFx0XHRcdG9wdGlvbnM6IG9wdGlvbnNcblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHR0aGlzLmVtaXQoJ3BhY2tldENyZWF0ZScsIHBhY2tldCk7XG5cdFx0XHRcdFx0XHR0aGlzLndyaXRlQnVmZmVyLnB1c2gocGFja2V0KTtcblx0XHRcdFx0XHRcdGlmIChmbikgdGhpcy5vbmNlKCdmbHVzaCcsIGZuKTtcblx0XHRcdFx0XHRcdHRoaXMuZmx1c2goKTtcblx0XHRcdFx0XHR9O1xuXG5cdFx0XHRcdFx0LyoqXG4gICAgICAqIENsb3NlcyB0aGUgY29ubmVjdGlvbi5cbiAgICAgICpcbiAgICAgICogQGFwaSBwcml2YXRlXG4gICAgICAqL1xuXG5cdFx0XHRcdFx0U29ja2V0LnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdGlmICgnb3BlbmluZycgPT0gdGhpcy5yZWFkeVN0YXRlIHx8ICdvcGVuJyA9PSB0aGlzLnJlYWR5U3RhdGUpIHtcblx0XHRcdFx0XHRcdFx0dGhpcy5yZWFkeVN0YXRlID0gJ2Nsb3NpbmcnO1xuXG5cdFx0XHRcdFx0XHRcdHZhciBzZWxmID0gdGhpcztcblxuXHRcdFx0XHRcdFx0XHRpZiAodGhpcy53cml0ZUJ1ZmZlci5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLm9uY2UoJ2RyYWluJywgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKHRoaXMudXBncmFkaW5nKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHdhaXRGb3JVcGdyYWRlKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRjbG9zZSgpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKHRoaXMudXBncmFkaW5nKSB7XG5cdFx0XHRcdFx0XHRcdFx0d2FpdEZvclVwZ3JhZGUoKTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRjbG9zZSgpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGZ1bmN0aW9uIGNsb3NlKCkge1xuXHRcdFx0XHRcdFx0XHRzZWxmLm9uQ2xvc2UoJ2ZvcmNlZCBjbG9zZScpO1xuXHRcdFx0XHRcdFx0XHRkZWJ1Zygnc29ja2V0IGNsb3NpbmcgLSB0ZWxsaW5nIHRyYW5zcG9ydCB0byBjbG9zZScpO1xuXHRcdFx0XHRcdFx0XHRzZWxmLnRyYW5zcG9ydC5jbG9zZSgpO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRmdW5jdGlvbiBjbGVhbnVwQW5kQ2xvc2UoKSB7XG5cdFx0XHRcdFx0XHRcdHNlbGYucmVtb3ZlTGlzdGVuZXIoJ3VwZ3JhZGUnLCBjbGVhbnVwQW5kQ2xvc2UpO1xuXHRcdFx0XHRcdFx0XHRzZWxmLnJlbW92ZUxpc3RlbmVyKCd1cGdyYWRlRXJyb3InLCBjbGVhbnVwQW5kQ2xvc2UpO1xuXHRcdFx0XHRcdFx0XHRjbG9zZSgpO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRmdW5jdGlvbiB3YWl0Rm9yVXBncmFkZSgpIHtcblx0XHRcdFx0XHRcdFx0Ly8gd2FpdCBmb3IgdXBncmFkZSB0byBmaW5pc2ggc2luY2Ugd2UgY2FuJ3Qgc2VuZCBwYWNrZXRzIHdoaWxlIHBhdXNpbmcgYSB0cmFuc3BvcnRcblx0XHRcdFx0XHRcdFx0c2VsZi5vbmNlKCd1cGdyYWRlJywgY2xlYW51cEFuZENsb3NlKTtcblx0XHRcdFx0XHRcdFx0c2VsZi5vbmNlKCd1cGdyYWRlRXJyb3InLCBjbGVhbnVwQW5kQ2xvc2UpO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdFx0XHR9O1xuXG5cdFx0XHRcdFx0LyoqXG4gICAgICAqIENhbGxlZCB1cG9uIHRyYW5zcG9ydCBlcnJvclxuICAgICAgKlxuICAgICAgKiBAYXBpIHByaXZhdGVcbiAgICAgICovXG5cblx0XHRcdFx0XHRTb2NrZXQucHJvdG90eXBlLm9uRXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG5cdFx0XHRcdFx0XHRkZWJ1Zygnc29ja2V0IGVycm9yICVqJywgZXJyKTtcblx0XHRcdFx0XHRcdFNvY2tldC5wcmlvcldlYnNvY2tldFN1Y2Nlc3MgPSBmYWxzZTtcblx0XHRcdFx0XHRcdHRoaXMuZW1pdCgnZXJyb3InLCBlcnIpO1xuXHRcdFx0XHRcdFx0dGhpcy5vbkNsb3NlKCd0cmFuc3BvcnQgZXJyb3InLCBlcnIpO1xuXHRcdFx0XHRcdH07XG5cblx0XHRcdFx0XHQvKipcbiAgICAgICogQ2FsbGVkIHVwb24gdHJhbnNwb3J0IGNsb3NlLlxuICAgICAgKlxuICAgICAgKiBAYXBpIHByaXZhdGVcbiAgICAgICovXG5cblx0XHRcdFx0XHRTb2NrZXQucHJvdG90eXBlLm9uQ2xvc2UgPSBmdW5jdGlvbiAocmVhc29uLCBkZXNjKSB7XG5cdFx0XHRcdFx0XHRpZiAoJ29wZW5pbmcnID09IHRoaXMucmVhZHlTdGF0ZSB8fCAnb3BlbicgPT0gdGhpcy5yZWFkeVN0YXRlIHx8ICdjbG9zaW5nJyA9PSB0aGlzLnJlYWR5U3RhdGUpIHtcblx0XHRcdFx0XHRcdFx0ZGVidWcoJ3NvY2tldCBjbG9zZSB3aXRoIHJlYXNvbjogXCIlc1wiJywgcmVhc29uKTtcblx0XHRcdFx0XHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXG5cdFx0XHRcdFx0XHRcdC8vIGNsZWFyIHRpbWVyc1xuXHRcdFx0XHRcdFx0XHRjbGVhclRpbWVvdXQodGhpcy5waW5nSW50ZXJ2YWxUaW1lcik7XG5cdFx0XHRcdFx0XHRcdGNsZWFyVGltZW91dCh0aGlzLnBpbmdUaW1lb3V0VGltZXIpO1xuXG5cdFx0XHRcdFx0XHRcdC8vIHN0b3AgZXZlbnQgZnJvbSBmaXJpbmcgYWdhaW4gZm9yIHRyYW5zcG9ydFxuXHRcdFx0XHRcdFx0XHR0aGlzLnRyYW5zcG9ydC5yZW1vdmVBbGxMaXN0ZW5lcnMoJ2Nsb3NlJyk7XG5cblx0XHRcdFx0XHRcdFx0Ly8gZW5zdXJlIHRyYW5zcG9ydCB3b24ndCBzdGF5IG9wZW5cblx0XHRcdFx0XHRcdFx0dGhpcy50cmFuc3BvcnQuY2xvc2UoKTtcblxuXHRcdFx0XHRcdFx0XHQvLyBpZ25vcmUgZnVydGhlciB0cmFuc3BvcnQgY29tbXVuaWNhdGlvblxuXHRcdFx0XHRcdFx0XHR0aGlzLnRyYW5zcG9ydC5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcblxuXHRcdFx0XHRcdFx0XHQvLyBzZXQgcmVhZHkgc3RhdGVcblx0XHRcdFx0XHRcdFx0dGhpcy5yZWFkeVN0YXRlID0gJ2Nsb3NlZCc7XG5cblx0XHRcdFx0XHRcdFx0Ly8gY2xlYXIgc2Vzc2lvbiBpZFxuXHRcdFx0XHRcdFx0XHR0aGlzLmlkID0gbnVsbDtcblxuXHRcdFx0XHRcdFx0XHQvLyBlbWl0IGNsb3NlIGV2ZW50XG5cdFx0XHRcdFx0XHRcdHRoaXMuZW1pdCgnY2xvc2UnLCByZWFzb24sIGRlc2MpO1xuXG5cdFx0XHRcdFx0XHRcdC8vIGNsZWFuIGJ1ZmZlcnMgYWZ0ZXIsIHNvIHVzZXJzIGNhbiBzdGlsbFxuXHRcdFx0XHRcdFx0XHQvLyBncmFiIHRoZSBidWZmZXJzIG9uIGBjbG9zZWAgZXZlbnRcblx0XHRcdFx0XHRcdFx0c2VsZi53cml0ZUJ1ZmZlciA9IFtdO1xuXHRcdFx0XHRcdFx0XHRzZWxmLnByZXZCdWZmZXJMZW4gPSAwO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH07XG5cblx0XHRcdFx0XHQvKipcbiAgICAgICogRmlsdGVycyB1cGdyYWRlcywgcmV0dXJuaW5nIG9ubHkgdGhvc2UgbWF0Y2hpbmcgY2xpZW50IHRyYW5zcG9ydHMuXG4gICAgICAqXG4gICAgICAqIEBwYXJhbSB7QXJyYXl9IHNlcnZlciB1cGdyYWRlc1xuICAgICAgKiBAYXBpIHByaXZhdGVcbiAgICAgICpcbiAgICAgICovXG5cblx0XHRcdFx0XHRTb2NrZXQucHJvdG90eXBlLmZpbHRlclVwZ3JhZGVzID0gZnVuY3Rpb24gKHVwZ3JhZGVzKSB7XG5cdFx0XHRcdFx0XHR2YXIgZmlsdGVyZWRVcGdyYWRlcyA9IFtdO1xuXHRcdFx0XHRcdFx0Zm9yICh2YXIgaSA9IDAsIGogPSB1cGdyYWRlcy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcblx0XHRcdFx0XHRcdFx0aWYgKH5pbmRleCh0aGlzLnRyYW5zcG9ydHMsIHVwZ3JhZGVzW2ldKSkgZmlsdGVyZWRVcGdyYWRlcy5wdXNoKHVwZ3JhZGVzW2ldKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdHJldHVybiBmaWx0ZXJlZFVwZ3JhZGVzO1xuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH0pLmNhbGwodGhpcywgdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgPyBnbG9iYWwgOiB7fSk7XG5cdFx0XHR9LCB7XG5cdFx0XHRcdFwiLi90cmFuc3BvcnRcIjogNCxcblx0XHRcdFx0XCIuL3RyYW5zcG9ydHNcIjogNSxcblx0XHRcdFx0XCJjb21wb25lbnQtZW1pdHRlclwiOiAxNSxcblx0XHRcdFx0XCJkZWJ1Z1wiOiAxNyxcblx0XHRcdFx0XCJlbmdpbmUuaW8tcGFyc2VyXCI6IDE5LFxuXHRcdFx0XHRcImluZGV4b2ZcIjogMjMsXG5cdFx0XHRcdFwicGFyc2Vqc29uXCI6IDI2LFxuXHRcdFx0XHRcInBhcnNlcXNcIjogMjcsXG5cdFx0XHRcdFwicGFyc2V1cmlcIjogMjhcblx0XHRcdH1dLFxuXHRcdFx0NDogW2Z1bmN0aW9uIChfZGVyZXFfLCBtb2R1bGUsIGV4cG9ydHMpIHtcblx0XHRcdFx0LyoqXG4gICAgICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAgICAgKi9cblxuXHRcdFx0XHR2YXIgcGFyc2VyID0gX2RlcmVxXygnZW5naW5lLmlvLXBhcnNlcicpO1xuXHRcdFx0XHR2YXIgRW1pdHRlciA9IF9kZXJlcV8oJ2NvbXBvbmVudC1lbWl0dGVyJyk7XG5cblx0XHRcdFx0LyoqXG4gICAgICogTW9kdWxlIGV4cG9ydHMuXG4gICAgICovXG5cblx0XHRcdFx0bW9kdWxlLmV4cG9ydHMgPSBUcmFuc3BvcnQ7XG5cblx0XHRcdFx0LyoqXG4gICAgICogVHJhbnNwb3J0IGFic3RyYWN0IGNvbnN0cnVjdG9yLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMuXG4gICAgICogQGFwaSBwcml2YXRlXG4gICAgICovXG5cblx0XHRcdFx0ZnVuY3Rpb24gVHJhbnNwb3J0KG9wdHMpIHtcblx0XHRcdFx0XHR0aGlzLnBhdGggPSBvcHRzLnBhdGg7XG5cdFx0XHRcdFx0dGhpcy5ob3N0bmFtZSA9IG9wdHMuaG9zdG5hbWU7XG5cdFx0XHRcdFx0dGhpcy5wb3J0ID0gb3B0cy5wb3J0O1xuXHRcdFx0XHRcdHRoaXMuc2VjdXJlID0gb3B0cy5zZWN1cmU7XG5cdFx0XHRcdFx0dGhpcy5xdWVyeSA9IG9wdHMucXVlcnk7XG5cdFx0XHRcdFx0dGhpcy50aW1lc3RhbXBQYXJhbSA9IG9wdHMudGltZXN0YW1wUGFyYW07XG5cdFx0XHRcdFx0dGhpcy50aW1lc3RhbXBSZXF1ZXN0cyA9IG9wdHMudGltZXN0YW1wUmVxdWVzdHM7XG5cdFx0XHRcdFx0dGhpcy5yZWFkeVN0YXRlID0gJyc7XG5cdFx0XHRcdFx0dGhpcy5hZ2VudCA9IG9wdHMuYWdlbnQgfHwgZmFsc2U7XG5cdFx0XHRcdFx0dGhpcy5zb2NrZXQgPSBvcHRzLnNvY2tldDtcblx0XHRcdFx0XHR0aGlzLmVuYWJsZXNYRFIgPSBvcHRzLmVuYWJsZXNYRFI7XG5cblx0XHRcdFx0XHQvLyBTU0wgb3B0aW9ucyBmb3IgTm9kZS5qcyBjbGllbnRcblx0XHRcdFx0XHR0aGlzLnBmeCA9IG9wdHMucGZ4O1xuXHRcdFx0XHRcdHRoaXMua2V5ID0gb3B0cy5rZXk7XG5cdFx0XHRcdFx0dGhpcy5wYXNzcGhyYXNlID0gb3B0cy5wYXNzcGhyYXNlO1xuXHRcdFx0XHRcdHRoaXMuY2VydCA9IG9wdHMuY2VydDtcblx0XHRcdFx0XHR0aGlzLmNhID0gb3B0cy5jYTtcblx0XHRcdFx0XHR0aGlzLmNpcGhlcnMgPSBvcHRzLmNpcGhlcnM7XG5cdFx0XHRcdFx0dGhpcy5yZWplY3RVbmF1dGhvcml6ZWQgPSBvcHRzLnJlamVjdFVuYXV0aG9yaXplZDtcblxuXHRcdFx0XHRcdC8vIG90aGVyIG9wdGlvbnMgZm9yIE5vZGUuanMgY2xpZW50XG5cdFx0XHRcdFx0dGhpcy5leHRyYUhlYWRlcnMgPSBvcHRzLmV4dHJhSGVhZGVycztcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8qKlxuICAgICAqIE1peCBpbiBgRW1pdHRlcmAuXG4gICAgICovXG5cblx0XHRcdFx0RW1pdHRlcihUcmFuc3BvcnQucHJvdG90eXBlKTtcblxuXHRcdFx0XHQvKipcbiAgICAgKiBFbWl0cyBhbiBlcnJvci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAgICAgKiBAcmV0dXJuIHtUcmFuc3BvcnR9IGZvciBjaGFpbmluZ1xuICAgICAqIEBhcGkgcHVibGljXG4gICAgICovXG5cblx0XHRcdFx0VHJhbnNwb3J0LnByb3RvdHlwZS5vbkVycm9yID0gZnVuY3Rpb24gKG1zZywgZGVzYykge1xuXHRcdFx0XHRcdHZhciBlcnIgPSBuZXcgRXJyb3IobXNnKTtcblx0XHRcdFx0XHRlcnIudHlwZSA9ICdUcmFuc3BvcnRFcnJvcic7XG5cdFx0XHRcdFx0ZXJyLmRlc2NyaXB0aW9uID0gZGVzYztcblx0XHRcdFx0XHR0aGlzLmVtaXQoJ2Vycm9yJywgZXJyKTtcblx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdFx0fTtcblxuXHRcdFx0XHQvKipcbiAgICAgKiBPcGVucyB0aGUgdHJhbnNwb3J0LlxuICAgICAqXG4gICAgICogQGFwaSBwdWJsaWNcbiAgICAgKi9cblxuXHRcdFx0XHRUcmFuc3BvcnQucHJvdG90eXBlLm9wZW4gPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0aWYgKCdjbG9zZWQnID09IHRoaXMucmVhZHlTdGF0ZSB8fCAnJyA9PSB0aGlzLnJlYWR5U3RhdGUpIHtcblx0XHRcdFx0XHRcdHRoaXMucmVhZHlTdGF0ZSA9ICdvcGVuaW5nJztcblx0XHRcdFx0XHRcdHRoaXMuZG9PcGVuKCk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHRcdH07XG5cblx0XHRcdFx0LyoqXG4gICAgICogQ2xvc2VzIHRoZSB0cmFuc3BvcnQuXG4gICAgICpcbiAgICAgKiBAYXBpIHByaXZhdGVcbiAgICAgKi9cblxuXHRcdFx0XHRUcmFuc3BvcnQucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdGlmICgnb3BlbmluZycgPT0gdGhpcy5yZWFkeVN0YXRlIHx8ICdvcGVuJyA9PSB0aGlzLnJlYWR5U3RhdGUpIHtcblx0XHRcdFx0XHRcdHRoaXMuZG9DbG9zZSgpO1xuXHRcdFx0XHRcdFx0dGhpcy5vbkNsb3NlKCk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHRcdH07XG5cblx0XHRcdFx0LyoqXG4gICAgICogU2VuZHMgbXVsdGlwbGUgcGFja2V0cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHBhY2tldHNcbiAgICAgKiBAYXBpIHByaXZhdGVcbiAgICAgKi9cblxuXHRcdFx0XHRUcmFuc3BvcnQucHJvdG90eXBlLnNlbmQgPSBmdW5jdGlvbiAocGFja2V0cykge1xuXHRcdFx0XHRcdGlmICgnb3BlbicgPT0gdGhpcy5yZWFkeVN0YXRlKSB7XG5cdFx0XHRcdFx0XHR0aGlzLndyaXRlKHBhY2tldHMpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ1RyYW5zcG9ydCBub3Qgb3BlbicpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fTtcblxuXHRcdFx0XHQvKipcbiAgICAgKiBDYWxsZWQgdXBvbiBvcGVuXG4gICAgICpcbiAgICAgKiBAYXBpIHByaXZhdGVcbiAgICAgKi9cblxuXHRcdFx0XHRUcmFuc3BvcnQucHJvdG90eXBlLm9uT3BlbiA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHR0aGlzLnJlYWR5U3RhdGUgPSAnb3Blbic7XG5cdFx0XHRcdFx0dGhpcy53cml0YWJsZSA9IHRydWU7XG5cdFx0XHRcdFx0dGhpcy5lbWl0KCdvcGVuJyk7XG5cdFx0XHRcdH07XG5cblx0XHRcdFx0LyoqXG4gICAgICogQ2FsbGVkIHdpdGggZGF0YS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBkYXRhXG4gICAgICogQGFwaSBwcml2YXRlXG4gICAgICovXG5cblx0XHRcdFx0VHJhbnNwb3J0LnByb3RvdHlwZS5vbkRhdGEgPSBmdW5jdGlvbiAoZGF0YSkge1xuXHRcdFx0XHRcdHZhciBwYWNrZXQgPSBwYXJzZXIuZGVjb2RlUGFja2V0KGRhdGEsIHRoaXMuc29ja2V0LmJpbmFyeVR5cGUpO1xuXHRcdFx0XHRcdHRoaXMub25QYWNrZXQocGFja2V0KTtcblx0XHRcdFx0fTtcblxuXHRcdFx0XHQvKipcbiAgICAgKiBDYWxsZWQgd2l0aCBhIGRlY29kZWQgcGFja2V0LlxuICAgICAqL1xuXG5cdFx0XHRcdFRyYW5zcG9ydC5wcm90b3R5cGUub25QYWNrZXQgPSBmdW5jdGlvbiAocGFja2V0KSB7XG5cdFx0XHRcdFx0dGhpcy5lbWl0KCdwYWNrZXQnLCBwYWNrZXQpO1xuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdC8qKlxuICAgICAqIENhbGxlZCB1cG9uIGNsb3NlLlxuICAgICAqXG4gICAgICogQGFwaSBwcml2YXRlXG4gICAgICovXG5cblx0XHRcdFx0VHJhbnNwb3J0LnByb3RvdHlwZS5vbkNsb3NlID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdHRoaXMucmVhZHlTdGF0ZSA9ICdjbG9zZWQnO1xuXHRcdFx0XHRcdHRoaXMuZW1pdCgnY2xvc2UnKTtcblx0XHRcdFx0fTtcblx0XHRcdH0sIHtcblx0XHRcdFx0XCJjb21wb25lbnQtZW1pdHRlclwiOiAxNSxcblx0XHRcdFx0XCJlbmdpbmUuaW8tcGFyc2VyXCI6IDE5XG5cdFx0XHR9XSxcblx0XHRcdDU6IFtmdW5jdGlvbiAoX2RlcmVxXywgbW9kdWxlLCBleHBvcnRzKSB7XG5cdFx0XHRcdChmdW5jdGlvbiAoZ2xvYmFsKSB7XG5cdFx0XHRcdFx0LyoqXG4gICAgICAqIE1vZHVsZSBkZXBlbmRlbmNpZXNcbiAgICAgICovXG5cblx0XHRcdFx0XHR2YXIgWE1MSHR0cFJlcXVlc3QgPSBfZGVyZXFfKCd4bWxodHRwcmVxdWVzdC1zc2wnKTtcblx0XHRcdFx0XHR2YXIgWEhSID0gX2RlcmVxXygnLi9wb2xsaW5nLXhocicpO1xuXHRcdFx0XHRcdHZhciBKU09OUCA9IF9kZXJlcV8oJy4vcG9sbGluZy1qc29ucCcpO1xuXHRcdFx0XHRcdHZhciB3ZWJzb2NrZXQgPSBfZGVyZXFfKCcuL3dlYnNvY2tldCcpO1xuXG5cdFx0XHRcdFx0LyoqXG4gICAgICAqIEV4cG9ydCB0cmFuc3BvcnRzLlxuICAgICAgKi9cblxuXHRcdFx0XHRcdGV4cG9ydHMucG9sbGluZyA9IHBvbGxpbmc7XG5cdFx0XHRcdFx0ZXhwb3J0cy53ZWJzb2NrZXQgPSB3ZWJzb2NrZXQ7XG5cblx0XHRcdFx0XHQvKipcbiAgICAgICogUG9sbGluZyB0cmFuc3BvcnQgcG9seW1vcnBoaWMgY29uc3RydWN0b3IuXG4gICAgICAqIERlY2lkZXMgb24geGhyIHZzIGpzb25wIGJhc2VkIG9uIGZlYXR1cmUgZGV0ZWN0aW9uLlxuICAgICAgKlxuICAgICAgKiBAYXBpIHByaXZhdGVcbiAgICAgICovXG5cblx0XHRcdFx0XHRmdW5jdGlvbiBwb2xsaW5nKG9wdHMpIHtcblx0XHRcdFx0XHRcdHZhciB4aHI7XG5cdFx0XHRcdFx0XHR2YXIgeGQgPSBmYWxzZTtcblx0XHRcdFx0XHRcdHZhciB4cyA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0dmFyIGpzb25wID0gZmFsc2UgIT09IG9wdHMuanNvbnA7XG5cblx0XHRcdFx0XHRcdGlmIChnbG9iYWwubG9jYXRpb24pIHtcblx0XHRcdFx0XHRcdFx0dmFyIGlzU1NMID0gJ2h0dHBzOicgPT0gbG9jYXRpb24ucHJvdG9jb2w7XG5cdFx0XHRcdFx0XHRcdHZhciBwb3J0ID0gbG9jYXRpb24ucG9ydDtcblxuXHRcdFx0XHRcdFx0XHQvLyBzb21lIHVzZXIgYWdlbnRzIGhhdmUgZW1wdHkgYGxvY2F0aW9uLnBvcnRgXG5cdFx0XHRcdFx0XHRcdGlmICghcG9ydCkge1xuXHRcdFx0XHRcdFx0XHRcdHBvcnQgPSBpc1NTTCA/IDQ0MyA6IDgwO1xuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0eGQgPSBvcHRzLmhvc3RuYW1lICE9IGxvY2F0aW9uLmhvc3RuYW1lIHx8IHBvcnQgIT0gb3B0cy5wb3J0O1xuXHRcdFx0XHRcdFx0XHR4cyA9IG9wdHMuc2VjdXJlICE9IGlzU1NMO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRvcHRzLnhkb21haW4gPSB4ZDtcblx0XHRcdFx0XHRcdG9wdHMueHNjaGVtZSA9IHhzO1xuXHRcdFx0XHRcdFx0eGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KG9wdHMpO1xuXG5cdFx0XHRcdFx0XHRpZiAoJ29wZW4nIGluIHhociAmJiAhb3B0cy5mb3JjZUpTT05QKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBuZXcgWEhSKG9wdHMpO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0aWYgKCFqc29ucCkgdGhyb3cgbmV3IEVycm9yKCdKU09OUCBkaXNhYmxlZCcpO1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gbmV3IEpTT05QKG9wdHMpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSkuY2FsbCh0aGlzLCB0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDogdHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiA/IGdsb2JhbCA6IHt9KTtcblx0XHRcdH0sIHtcblx0XHRcdFx0XCIuL3BvbGxpbmctanNvbnBcIjogNixcblx0XHRcdFx0XCIuL3BvbGxpbmcteGhyXCI6IDcsXG5cdFx0XHRcdFwiLi93ZWJzb2NrZXRcIjogOSxcblx0XHRcdFx0XCJ4bWxodHRwcmVxdWVzdC1zc2xcIjogMTBcblx0XHRcdH1dLFxuXHRcdFx0NjogW2Z1bmN0aW9uIChfZGVyZXFfLCBtb2R1bGUsIGV4cG9ydHMpIHtcblx0XHRcdFx0KGZ1bmN0aW9uIChnbG9iYWwpIHtcblxuXHRcdFx0XHRcdC8qKlxuICAgICAgKiBNb2R1bGUgcmVxdWlyZW1lbnRzLlxuICAgICAgKi9cblxuXHRcdFx0XHRcdHZhciBQb2xsaW5nID0gX2RlcmVxXygnLi9wb2xsaW5nJyk7XG5cdFx0XHRcdFx0dmFyIGluaGVyaXQgPSBfZGVyZXFfKCdjb21wb25lbnQtaW5oZXJpdCcpO1xuXG5cdFx0XHRcdFx0LyoqXG4gICAgICAqIE1vZHVsZSBleHBvcnRzLlxuICAgICAgKi9cblxuXHRcdFx0XHRcdG1vZHVsZS5leHBvcnRzID0gSlNPTlBQb2xsaW5nO1xuXG5cdFx0XHRcdFx0LyoqXG4gICAgICAqIENhY2hlZCByZWd1bGFyIGV4cHJlc3Npb25zLlxuICAgICAgKi9cblxuXHRcdFx0XHRcdHZhciByTmV3bGluZSA9IC9cXG4vZztcblx0XHRcdFx0XHR2YXIgckVzY2FwZWROZXdsaW5lID0gL1xcXFxuL2c7XG5cblx0XHRcdFx0XHQvKipcbiAgICAgICogR2xvYmFsIEpTT05QIGNhbGxiYWNrcy5cbiAgICAgICovXG5cblx0XHRcdFx0XHR2YXIgY2FsbGJhY2tzO1xuXG5cdFx0XHRcdFx0LyoqXG4gICAgICAqIENhbGxiYWNrcyBjb3VudC5cbiAgICAgICovXG5cblx0XHRcdFx0XHR2YXIgaW5kZXggPSAwO1xuXG5cdFx0XHRcdFx0LyoqXG4gICAgICAqIE5vb3AuXG4gICAgICAqL1xuXG5cdFx0XHRcdFx0ZnVuY3Rpb24gZW1wdHkoKSB7fVxuXG5cdFx0XHRcdFx0LyoqXG4gICAgICAqIEpTT05QIFBvbGxpbmcgY29uc3RydWN0b3IuXG4gICAgICAqXG4gICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzLlxuICAgICAgKiBAYXBpIHB1YmxpY1xuICAgICAgKi9cblxuXHRcdFx0XHRcdGZ1bmN0aW9uIEpTT05QUG9sbGluZyhvcHRzKSB7XG5cdFx0XHRcdFx0XHRQb2xsaW5nLmNhbGwodGhpcywgb3B0cyk7XG5cblx0XHRcdFx0XHRcdHRoaXMucXVlcnkgPSB0aGlzLnF1ZXJ5IHx8IHt9O1xuXG5cdFx0XHRcdFx0XHQvLyBkZWZpbmUgZ2xvYmFsIGNhbGxiYWNrcyBhcnJheSBpZiBub3QgcHJlc2VudFxuXHRcdFx0XHRcdFx0Ly8gd2UgZG8gdGhpcyBoZXJlIChsYXppbHkpIHRvIGF2b2lkIHVubmVlZGVkIGdsb2JhbCBwb2xsdXRpb25cblx0XHRcdFx0XHRcdGlmICghY2FsbGJhY2tzKSB7XG5cdFx0XHRcdFx0XHRcdC8vIHdlIG5lZWQgdG8gY29uc2lkZXIgbXVsdGlwbGUgZW5naW5lcyBpbiB0aGUgc2FtZSBwYWdlXG5cdFx0XHRcdFx0XHRcdGlmICghZ2xvYmFsLl9fX2VpbykgZ2xvYmFsLl9fX2VpbyA9IFtdO1xuXHRcdFx0XHRcdFx0XHRjYWxsYmFja3MgPSBnbG9iYWwuX19fZWlvO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHQvLyBjYWxsYmFjayBpZGVudGlmaWVyXG5cdFx0XHRcdFx0XHR0aGlzLmluZGV4ID0gY2FsbGJhY2tzLmxlbmd0aDtcblxuXHRcdFx0XHRcdFx0Ly8gYWRkIGNhbGxiYWNrIHRvIGpzb25wIGdsb2JhbFxuXHRcdFx0XHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXHRcdFx0XHRcdFx0Y2FsbGJhY2tzLnB1c2goZnVuY3Rpb24gKG1zZykge1xuXHRcdFx0XHRcdFx0XHRzZWxmLm9uRGF0YShtc2cpO1xuXHRcdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHRcdC8vIGFwcGVuZCB0byBxdWVyeSBzdHJpbmdcblx0XHRcdFx0XHRcdHRoaXMucXVlcnkuaiA9IHRoaXMuaW5kZXg7XG5cblx0XHRcdFx0XHRcdC8vIHByZXZlbnQgc3B1cmlvdXMgZXJyb3JzIGZyb20gYmVpbmcgZW1pdHRlZCB3aGVuIHRoZSB3aW5kb3cgaXMgdW5sb2FkZWRcblx0XHRcdFx0XHRcdGlmIChnbG9iYWwuZG9jdW1lbnQgJiYgZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIpIHtcblx0XHRcdFx0XHRcdFx0Z2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIoJ2JlZm9yZXVubG9hZCcsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdFx0XHRpZiAoc2VsZi5zY3JpcHQpIHNlbGYuc2NyaXB0Lm9uZXJyb3IgPSBlbXB0eTtcblx0XHRcdFx0XHRcdFx0fSwgZmFsc2UpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8qKlxuICAgICAgKiBJbmhlcml0cyBmcm9tIFBvbGxpbmcuXG4gICAgICAqL1xuXG5cdFx0XHRcdFx0aW5oZXJpdChKU09OUFBvbGxpbmcsIFBvbGxpbmcpO1xuXG5cdFx0XHRcdFx0LypcbiAgICAgICogSlNPTlAgb25seSBzdXBwb3J0cyBiaW5hcnkgYXMgYmFzZTY0IGVuY29kZWQgc3RyaW5nc1xuICAgICAgKi9cblxuXHRcdFx0XHRcdEpTT05QUG9sbGluZy5wcm90b3R5cGUuc3VwcG9ydHNCaW5hcnkgPSBmYWxzZTtcblxuXHRcdFx0XHRcdC8qKlxuICAgICAgKiBDbG9zZXMgdGhlIHNvY2tldC5cbiAgICAgICpcbiAgICAgICogQGFwaSBwcml2YXRlXG4gICAgICAqL1xuXG5cdFx0XHRcdFx0SlNPTlBQb2xsaW5nLnByb3RvdHlwZS5kb0Nsb3NlID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0aWYgKHRoaXMuc2NyaXB0KSB7XG5cdFx0XHRcdFx0XHRcdHRoaXMuc2NyaXB0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5zY3JpcHQpO1xuXHRcdFx0XHRcdFx0XHR0aGlzLnNjcmlwdCA9IG51bGw7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGlmICh0aGlzLmZvcm0pIHtcblx0XHRcdFx0XHRcdFx0dGhpcy5mb3JtLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5mb3JtKTtcblx0XHRcdFx0XHRcdFx0dGhpcy5mb3JtID0gbnVsbDtcblx0XHRcdFx0XHRcdFx0dGhpcy5pZnJhbWUgPSBudWxsO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRQb2xsaW5nLnByb3RvdHlwZS5kb0Nsb3NlLmNhbGwodGhpcyk7XG5cdFx0XHRcdFx0fTtcblxuXHRcdFx0XHRcdC8qKlxuICAgICAgKiBTdGFydHMgYSBwb2xsIGN5Y2xlLlxuICAgICAgKlxuICAgICAgKiBAYXBpIHByaXZhdGVcbiAgICAgICovXG5cblx0XHRcdFx0XHRKU09OUFBvbGxpbmcucHJvdG90eXBlLmRvUG9sbCA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdHZhciBzZWxmID0gdGhpcztcblx0XHRcdFx0XHRcdHZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcblxuXHRcdFx0XHRcdFx0aWYgKHRoaXMuc2NyaXB0KSB7XG5cdFx0XHRcdFx0XHRcdHRoaXMuc2NyaXB0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5zY3JpcHQpO1xuXHRcdFx0XHRcdFx0XHR0aGlzLnNjcmlwdCA9IG51bGw7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdHNjcmlwdC5hc3luYyA9IHRydWU7XG5cdFx0XHRcdFx0XHRzY3JpcHQuc3JjID0gdGhpcy51cmkoKTtcblx0XHRcdFx0XHRcdHNjcmlwdC5vbmVycm9yID0gZnVuY3Rpb24gKGUpIHtcblx0XHRcdFx0XHRcdFx0c2VsZi5vbkVycm9yKCdqc29ucCBwb2xsIGVycm9yJywgZSk7XG5cdFx0XHRcdFx0XHR9O1xuXG5cdFx0XHRcdFx0XHR2YXIgaW5zZXJ0QXQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc2NyaXB0JylbMF07XG5cdFx0XHRcdFx0XHRpZiAoaW5zZXJ0QXQpIHtcblx0XHRcdFx0XHRcdFx0aW5zZXJ0QXQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoc2NyaXB0LCBpbnNlcnRBdCk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHQoZG9jdW1lbnQuaGVhZCB8fCBkb2N1bWVudC5ib2R5KS5hcHBlbmRDaGlsZChzY3JpcHQpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0dGhpcy5zY3JpcHQgPSBzY3JpcHQ7XG5cblx0XHRcdFx0XHRcdHZhciBpc1VBZ2Vja28gPSAndW5kZWZpbmVkJyAhPSB0eXBlb2YgbmF2aWdhdG9yICYmIC9nZWNrby9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG5cblx0XHRcdFx0XHRcdGlmIChpc1VBZ2Vja28pIHtcblx0XHRcdFx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHRcdFx0dmFyIGlmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpO1xuXHRcdFx0XHRcdFx0XHRcdGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoaWZyYW1lKTtcblx0XHRcdFx0XHRcdFx0XHRkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGlmcmFtZSk7XG5cdFx0XHRcdFx0XHRcdH0sIDEwMCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fTtcblxuXHRcdFx0XHRcdC8qKlxuICAgICAgKiBXcml0ZXMgd2l0aCBhIGhpZGRlbiBpZnJhbWUuXG4gICAgICAqXG4gICAgICAqIEBwYXJhbSB7U3RyaW5nfSBkYXRhIHRvIHNlbmRcbiAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGVkIHVwb24gZmx1c2guXG4gICAgICAqIEBhcGkgcHJpdmF0ZVxuICAgICAgKi9cblxuXHRcdFx0XHRcdEpTT05QUG9sbGluZy5wcm90b3R5cGUuZG9Xcml0ZSA9IGZ1bmN0aW9uIChkYXRhLCBmbikge1xuXHRcdFx0XHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXG5cdFx0XHRcdFx0XHRpZiAoIXRoaXMuZm9ybSkge1xuXHRcdFx0XHRcdFx0XHR2YXIgZm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Zvcm0nKTtcblx0XHRcdFx0XHRcdFx0dmFyIGFyZWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpO1xuXHRcdFx0XHRcdFx0XHR2YXIgaWQgPSB0aGlzLmlmcmFtZUlkID0gJ2Vpb19pZnJhbWVfJyArIHRoaXMuaW5kZXg7XG5cdFx0XHRcdFx0XHRcdHZhciBpZnJhbWU7XG5cblx0XHRcdFx0XHRcdFx0Zm9ybS5jbGFzc05hbWUgPSAnc29ja2V0aW8nO1xuXHRcdFx0XHRcdFx0XHRmb3JtLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcblx0XHRcdFx0XHRcdFx0Zm9ybS5zdHlsZS50b3AgPSAnLTEwMDBweCc7XG5cdFx0XHRcdFx0XHRcdGZvcm0uc3R5bGUubGVmdCA9ICctMTAwMHB4Jztcblx0XHRcdFx0XHRcdFx0Zm9ybS50YXJnZXQgPSBpZDtcblx0XHRcdFx0XHRcdFx0Zm9ybS5tZXRob2QgPSAnUE9TVCc7XG5cdFx0XHRcdFx0XHRcdGZvcm0uc2V0QXR0cmlidXRlKCdhY2NlcHQtY2hhcnNldCcsICd1dGYtOCcpO1xuXHRcdFx0XHRcdFx0XHRhcmVhLm5hbWUgPSAnZCc7XG5cdFx0XHRcdFx0XHRcdGZvcm0uYXBwZW5kQ2hpbGQoYXJlYSk7XG5cdFx0XHRcdFx0XHRcdGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZm9ybSk7XG5cblx0XHRcdFx0XHRcdFx0dGhpcy5mb3JtID0gZm9ybTtcblx0XHRcdFx0XHRcdFx0dGhpcy5hcmVhID0gYXJlYTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0dGhpcy5mb3JtLmFjdGlvbiA9IHRoaXMudXJpKCk7XG5cblx0XHRcdFx0XHRcdGZ1bmN0aW9uIGNvbXBsZXRlKCkge1xuXHRcdFx0XHRcdFx0XHRpbml0SWZyYW1lKCk7XG5cdFx0XHRcdFx0XHRcdGZuKCk7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGZ1bmN0aW9uIGluaXRJZnJhbWUoKSB7XG5cdFx0XHRcdFx0XHRcdGlmIChzZWxmLmlmcmFtZSkge1xuXHRcdFx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRzZWxmLmZvcm0ucmVtb3ZlQ2hpbGQoc2VsZi5pZnJhbWUpO1xuXHRcdFx0XHRcdFx0XHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHNlbGYub25FcnJvcignanNvbnAgcG9sbGluZyBpZnJhbWUgcmVtb3ZhbCBlcnJvcicsIGUpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gaWU2IGR5bmFtaWMgaWZyYW1lcyB3aXRoIHRhcmdldD1cIlwiIHN1cHBvcnQgKHRoYW5rcyBDaHJpcyBMYW1iYWNoZXIpXG5cdFx0XHRcdFx0XHRcdFx0dmFyIGh0bWwgPSAnPGlmcmFtZSBzcmM9XCJqYXZhc2NyaXB0OjBcIiBuYW1lPVwiJyArIHNlbGYuaWZyYW1lSWQgKyAnXCI+Jztcblx0XHRcdFx0XHRcdFx0XHRpZnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGh0bWwpO1xuXHRcdFx0XHRcdFx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRcdFx0XHRcdFx0aWZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaWZyYW1lJyk7XG5cdFx0XHRcdFx0XHRcdFx0aWZyYW1lLm5hbWUgPSBzZWxmLmlmcmFtZUlkO1xuXHRcdFx0XHRcdFx0XHRcdGlmcmFtZS5zcmMgPSAnamF2YXNjcmlwdDowJztcblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdGlmcmFtZS5pZCA9IHNlbGYuaWZyYW1lSWQ7XG5cblx0XHRcdFx0XHRcdFx0c2VsZi5mb3JtLmFwcGVuZENoaWxkKGlmcmFtZSk7XG5cdFx0XHRcdFx0XHRcdHNlbGYuaWZyYW1lID0gaWZyYW1lO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRpbml0SWZyYW1lKCk7XG5cblx0XHRcdFx0XHRcdC8vIGVzY2FwZSBcXG4gdG8gcHJldmVudCBpdCBmcm9tIGJlaW5nIGNvbnZlcnRlZCBpbnRvIFxcclxcbiBieSBzb21lIFVBc1xuXHRcdFx0XHRcdFx0Ly8gZG91YmxlIGVzY2FwaW5nIGlzIHJlcXVpcmVkIGZvciBlc2NhcGVkIG5ldyBsaW5lcyBiZWNhdXNlIHVuZXNjYXBpbmcgb2YgbmV3IGxpbmVzIGNhbiBiZSBkb25lIHNhZmVseSBvbiBzZXJ2ZXItc2lkZVxuXHRcdFx0XHRcdFx0ZGF0YSA9IGRhdGEucmVwbGFjZShyRXNjYXBlZE5ld2xpbmUsICdcXFxcXFxuJyk7XG5cdFx0XHRcdFx0XHR0aGlzLmFyZWEudmFsdWUgPSBkYXRhLnJlcGxhY2Uock5ld2xpbmUsICdcXFxcbicpO1xuXG5cdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHR0aGlzLmZvcm0uc3VibWl0KCk7XG5cdFx0XHRcdFx0XHR9IGNhdGNoIChlKSB7fVxuXG5cdFx0XHRcdFx0XHRpZiAodGhpcy5pZnJhbWUuYXR0YWNoRXZlbnQpIHtcblx0XHRcdFx0XHRcdFx0dGhpcy5pZnJhbWUub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0XHRcdGlmIChzZWxmLmlmcmFtZS5yZWFkeVN0YXRlID09ICdjb21wbGV0ZScpIHtcblx0XHRcdFx0XHRcdFx0XHRcdGNvbXBsZXRlKCk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0dGhpcy5pZnJhbWUub25sb2FkID0gY29tcGxldGU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0fSkuY2FsbCh0aGlzLCB0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDogdHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiA/IGdsb2JhbCA6IHt9KTtcblx0XHRcdH0sIHtcblx0XHRcdFx0XCIuL3BvbGxpbmdcIjogOCxcblx0XHRcdFx0XCJjb21wb25lbnQtaW5oZXJpdFwiOiAxNlxuXHRcdFx0fV0sXG5cdFx0XHQ3OiBbZnVuY3Rpb24gKF9kZXJlcV8sIG1vZHVsZSwgZXhwb3J0cykge1xuXHRcdFx0XHQoZnVuY3Rpb24gKGdsb2JhbCkge1xuXHRcdFx0XHRcdC8qKlxuICAgICAgKiBNb2R1bGUgcmVxdWlyZW1lbnRzLlxuICAgICAgKi9cblxuXHRcdFx0XHRcdHZhciBYTUxIdHRwUmVxdWVzdCA9IF9kZXJlcV8oJ3htbGh0dHByZXF1ZXN0LXNzbCcpO1xuXHRcdFx0XHRcdHZhciBQb2xsaW5nID0gX2RlcmVxXygnLi9wb2xsaW5nJyk7XG5cdFx0XHRcdFx0dmFyIEVtaXR0ZXIgPSBfZGVyZXFfKCdjb21wb25lbnQtZW1pdHRlcicpO1xuXHRcdFx0XHRcdHZhciBpbmhlcml0ID0gX2RlcmVxXygnY29tcG9uZW50LWluaGVyaXQnKTtcblx0XHRcdFx0XHR2YXIgZGVidWcgPSBfZGVyZXFfKCdkZWJ1ZycpKCdlbmdpbmUuaW8tY2xpZW50OnBvbGxpbmcteGhyJyk7XG5cblx0XHRcdFx0XHQvKipcbiAgICAgICogTW9kdWxlIGV4cG9ydHMuXG4gICAgICAqL1xuXG5cdFx0XHRcdFx0bW9kdWxlLmV4cG9ydHMgPSBYSFI7XG5cdFx0XHRcdFx0bW9kdWxlLmV4cG9ydHMuUmVxdWVzdCA9IFJlcXVlc3Q7XG5cblx0XHRcdFx0XHQvKipcbiAgICAgICogRW1wdHkgZnVuY3Rpb25cbiAgICAgICovXG5cblx0XHRcdFx0XHRmdW5jdGlvbiBlbXB0eSgpIHt9XG5cblx0XHRcdFx0XHQvKipcbiAgICAgICogWEhSIFBvbGxpbmcgY29uc3RydWN0b3IuXG4gICAgICAqXG4gICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzXG4gICAgICAqIEBhcGkgcHVibGljXG4gICAgICAqL1xuXG5cdFx0XHRcdFx0ZnVuY3Rpb24gWEhSKG9wdHMpIHtcblx0XHRcdFx0XHRcdFBvbGxpbmcuY2FsbCh0aGlzLCBvcHRzKTtcblxuXHRcdFx0XHRcdFx0aWYgKGdsb2JhbC5sb2NhdGlvbikge1xuXHRcdFx0XHRcdFx0XHR2YXIgaXNTU0wgPSAnaHR0cHM6JyA9PSBsb2NhdGlvbi5wcm90b2NvbDtcblx0XHRcdFx0XHRcdFx0dmFyIHBvcnQgPSBsb2NhdGlvbi5wb3J0O1xuXG5cdFx0XHRcdFx0XHRcdC8vIHNvbWUgdXNlciBhZ2VudHMgaGF2ZSBlbXB0eSBgbG9jYXRpb24ucG9ydGBcblx0XHRcdFx0XHRcdFx0aWYgKCFwb3J0KSB7XG5cdFx0XHRcdFx0XHRcdFx0cG9ydCA9IGlzU1NMID8gNDQzIDogODA7XG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHR0aGlzLnhkID0gb3B0cy5ob3N0bmFtZSAhPSBnbG9iYWwubG9jYXRpb24uaG9zdG5hbWUgfHwgcG9ydCAhPSBvcHRzLnBvcnQ7XG5cdFx0XHRcdFx0XHRcdHRoaXMueHMgPSBvcHRzLnNlY3VyZSAhPSBpc1NTTDtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdHRoaXMuZXh0cmFIZWFkZXJzID0gb3B0cy5leHRyYUhlYWRlcnM7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0LyoqXG4gICAgICAqIEluaGVyaXRzIGZyb20gUG9sbGluZy5cbiAgICAgICovXG5cblx0XHRcdFx0XHRpbmhlcml0KFhIUiwgUG9sbGluZyk7XG5cblx0XHRcdFx0XHQvKipcbiAgICAgICogWEhSIHN1cHBvcnRzIGJpbmFyeVxuICAgICAgKi9cblxuXHRcdFx0XHRcdFhIUi5wcm90b3R5cGUuc3VwcG9ydHNCaW5hcnkgPSB0cnVlO1xuXG5cdFx0XHRcdFx0LyoqXG4gICAgICAqIENyZWF0ZXMgYSByZXF1ZXN0LlxuICAgICAgKlxuICAgICAgKiBAcGFyYW0ge1N0cmluZ30gbWV0aG9kXG4gICAgICAqIEBhcGkgcHJpdmF0ZVxuICAgICAgKi9cblxuXHRcdFx0XHRcdFhIUi5wcm90b3R5cGUucmVxdWVzdCA9IGZ1bmN0aW9uIChvcHRzKSB7XG5cdFx0XHRcdFx0XHRvcHRzID0gb3B0cyB8fCB7fTtcblx0XHRcdFx0XHRcdG9wdHMudXJpID0gdGhpcy51cmkoKTtcblx0XHRcdFx0XHRcdG9wdHMueGQgPSB0aGlzLnhkO1xuXHRcdFx0XHRcdFx0b3B0cy54cyA9IHRoaXMueHM7XG5cdFx0XHRcdFx0XHRvcHRzLmFnZW50ID0gdGhpcy5hZ2VudCB8fCBmYWxzZTtcblx0XHRcdFx0XHRcdG9wdHMuc3VwcG9ydHNCaW5hcnkgPSB0aGlzLnN1cHBvcnRzQmluYXJ5O1xuXHRcdFx0XHRcdFx0b3B0cy5lbmFibGVzWERSID0gdGhpcy5lbmFibGVzWERSO1xuXG5cdFx0XHRcdFx0XHQvLyBTU0wgb3B0aW9ucyBmb3IgTm9kZS5qcyBjbGllbnRcblx0XHRcdFx0XHRcdG9wdHMucGZ4ID0gdGhpcy5wZng7XG5cdFx0XHRcdFx0XHRvcHRzLmtleSA9IHRoaXMua2V5O1xuXHRcdFx0XHRcdFx0b3B0cy5wYXNzcGhyYXNlID0gdGhpcy5wYXNzcGhyYXNlO1xuXHRcdFx0XHRcdFx0b3B0cy5jZXJ0ID0gdGhpcy5jZXJ0O1xuXHRcdFx0XHRcdFx0b3B0cy5jYSA9IHRoaXMuY2E7XG5cdFx0XHRcdFx0XHRvcHRzLmNpcGhlcnMgPSB0aGlzLmNpcGhlcnM7XG5cdFx0XHRcdFx0XHRvcHRzLnJlamVjdFVuYXV0aG9yaXplZCA9IHRoaXMucmVqZWN0VW5hdXRob3JpemVkO1xuXG5cdFx0XHRcdFx0XHQvLyBvdGhlciBvcHRpb25zIGZvciBOb2RlLmpzIGNsaWVudFxuXHRcdFx0XHRcdFx0b3B0cy5leHRyYUhlYWRlcnMgPSB0aGlzLmV4dHJhSGVhZGVycztcblxuXHRcdFx0XHRcdFx0cmV0dXJuIG5ldyBSZXF1ZXN0KG9wdHMpO1xuXHRcdFx0XHRcdH07XG5cblx0XHRcdFx0XHQvKipcbiAgICAgICogU2VuZHMgZGF0YS5cbiAgICAgICpcbiAgICAgICogQHBhcmFtIHtTdHJpbmd9IGRhdGEgdG8gc2VuZC5cbiAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGVkIHVwb24gZmx1c2guXG4gICAgICAqIEBhcGkgcHJpdmF0ZVxuICAgICAgKi9cblxuXHRcdFx0XHRcdFhIUi5wcm90b3R5cGUuZG9Xcml0ZSA9IGZ1bmN0aW9uIChkYXRhLCBmbikge1xuXHRcdFx0XHRcdFx0dmFyIGlzQmluYXJ5ID0gdHlwZW9mIGRhdGEgIT09ICdzdHJpbmcnICYmIGRhdGEgIT09IHVuZGVmaW5lZDtcblx0XHRcdFx0XHRcdHZhciByZXEgPSB0aGlzLnJlcXVlc3Qoe1xuXHRcdFx0XHRcdFx0XHRtZXRob2Q6ICdQT1NUJyxcblx0XHRcdFx0XHRcdFx0ZGF0YTogZGF0YSxcblx0XHRcdFx0XHRcdFx0aXNCaW5hcnk6IGlzQmluYXJ5XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdHZhciBzZWxmID0gdGhpcztcblx0XHRcdFx0XHRcdHJlcS5vbignc3VjY2VzcycsIGZuKTtcblx0XHRcdFx0XHRcdHJlcS5vbignZXJyb3InLCBmdW5jdGlvbiAoZXJyKSB7XG5cdFx0XHRcdFx0XHRcdHNlbGYub25FcnJvcigneGhyIHBvc3QgZXJyb3InLCBlcnIpO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR0aGlzLnNlbmRYaHIgPSByZXE7XG5cdFx0XHRcdFx0fTtcblxuXHRcdFx0XHRcdC8qKlxuICAgICAgKiBTdGFydHMgYSBwb2xsIGN5Y2xlLlxuICAgICAgKlxuICAgICAgKiBAYXBpIHByaXZhdGVcbiAgICAgICovXG5cblx0XHRcdFx0XHRYSFIucHJvdG90eXBlLmRvUG9sbCA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdGRlYnVnKCd4aHIgcG9sbCcpO1xuXHRcdFx0XHRcdFx0dmFyIHJlcSA9IHRoaXMucmVxdWVzdCgpO1xuXHRcdFx0XHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXHRcdFx0XHRcdFx0cmVxLm9uKCdkYXRhJywgZnVuY3Rpb24gKGRhdGEpIHtcblx0XHRcdFx0XHRcdFx0c2VsZi5vbkRhdGEoZGF0YSk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdHJlcS5vbignZXJyb3InLCBmdW5jdGlvbiAoZXJyKSB7XG5cdFx0XHRcdFx0XHRcdHNlbGYub25FcnJvcigneGhyIHBvbGwgZXJyb3InLCBlcnIpO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR0aGlzLnBvbGxYaHIgPSByZXE7XG5cdFx0XHRcdFx0fTtcblxuXHRcdFx0XHRcdC8qKlxuICAgICAgKiBSZXF1ZXN0IGNvbnN0cnVjdG9yXG4gICAgICAqXG4gICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gICAgICAqIEBhcGkgcHVibGljXG4gICAgICAqL1xuXG5cdFx0XHRcdFx0ZnVuY3Rpb24gUmVxdWVzdChvcHRzKSB7XG5cdFx0XHRcdFx0XHR0aGlzLm1ldGhvZCA9IG9wdHMubWV0aG9kIHx8ICdHRVQnO1xuXHRcdFx0XHRcdFx0dGhpcy51cmkgPSBvcHRzLnVyaTtcblx0XHRcdFx0XHRcdHRoaXMueGQgPSAhIW9wdHMueGQ7XG5cdFx0XHRcdFx0XHR0aGlzLnhzID0gISFvcHRzLnhzO1xuXHRcdFx0XHRcdFx0dGhpcy5hc3luYyA9IGZhbHNlICE9PSBvcHRzLmFzeW5jO1xuXHRcdFx0XHRcdFx0dGhpcy5kYXRhID0gdW5kZWZpbmVkICE9IG9wdHMuZGF0YSA/IG9wdHMuZGF0YSA6IG51bGw7XG5cdFx0XHRcdFx0XHR0aGlzLmFnZW50ID0gb3B0cy5hZ2VudDtcblx0XHRcdFx0XHRcdHRoaXMuaXNCaW5hcnkgPSBvcHRzLmlzQmluYXJ5O1xuXHRcdFx0XHRcdFx0dGhpcy5zdXBwb3J0c0JpbmFyeSA9IG9wdHMuc3VwcG9ydHNCaW5hcnk7XG5cdFx0XHRcdFx0XHR0aGlzLmVuYWJsZXNYRFIgPSBvcHRzLmVuYWJsZXNYRFI7XG5cblx0XHRcdFx0XHRcdC8vIFNTTCBvcHRpb25zIGZvciBOb2RlLmpzIGNsaWVudFxuXHRcdFx0XHRcdFx0dGhpcy5wZnggPSBvcHRzLnBmeDtcblx0XHRcdFx0XHRcdHRoaXMua2V5ID0gb3B0cy5rZXk7XG5cdFx0XHRcdFx0XHR0aGlzLnBhc3NwaHJhc2UgPSBvcHRzLnBhc3NwaHJhc2U7XG5cdFx0XHRcdFx0XHR0aGlzLmNlcnQgPSBvcHRzLmNlcnQ7XG5cdFx0XHRcdFx0XHR0aGlzLmNhID0gb3B0cy5jYTtcblx0XHRcdFx0XHRcdHRoaXMuY2lwaGVycyA9IG9wdHMuY2lwaGVycztcblx0XHRcdFx0XHRcdHRoaXMucmVqZWN0VW5hdXRob3JpemVkID0gb3B0cy5yZWplY3RVbmF1dGhvcml6ZWQ7XG5cblx0XHRcdFx0XHRcdC8vIG90aGVyIG9wdGlvbnMgZm9yIE5vZGUuanMgY2xpZW50XG5cdFx0XHRcdFx0XHR0aGlzLmV4dHJhSGVhZGVycyA9IG9wdHMuZXh0cmFIZWFkZXJzO1xuXG5cdFx0XHRcdFx0XHR0aGlzLmNyZWF0ZSgpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8qKlxuICAgICAgKiBNaXggaW4gYEVtaXR0ZXJgLlxuICAgICAgKi9cblxuXHRcdFx0XHRcdEVtaXR0ZXIoUmVxdWVzdC5wcm90b3R5cGUpO1xuXG5cdFx0XHRcdFx0LyoqXG4gICAgICAqIENyZWF0ZXMgdGhlIFhIUiBvYmplY3QgYW5kIHNlbmRzIHRoZSByZXF1ZXN0LlxuICAgICAgKlxuICAgICAgKiBAYXBpIHByaXZhdGVcbiAgICAgICovXG5cblx0XHRcdFx0XHRSZXF1ZXN0LnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHR2YXIgb3B0cyA9IHtcblx0XHRcdFx0XHRcdFx0YWdlbnQ6IHRoaXMuYWdlbnQsXG5cdFx0XHRcdFx0XHRcdHhkb21haW46IHRoaXMueGQsXG5cdFx0XHRcdFx0XHRcdHhzY2hlbWU6IHRoaXMueHMsXG5cdFx0XHRcdFx0XHRcdGVuYWJsZXNYRFI6IHRoaXMuZW5hYmxlc1hEUlxuXHRcdFx0XHRcdFx0fTtcblxuXHRcdFx0XHRcdFx0Ly8gU1NMIG9wdGlvbnMgZm9yIE5vZGUuanMgY2xpZW50XG5cdFx0XHRcdFx0XHRvcHRzLnBmeCA9IHRoaXMucGZ4O1xuXHRcdFx0XHRcdFx0b3B0cy5rZXkgPSB0aGlzLmtleTtcblx0XHRcdFx0XHRcdG9wdHMucGFzc3BocmFzZSA9IHRoaXMucGFzc3BocmFzZTtcblx0XHRcdFx0XHRcdG9wdHMuY2VydCA9IHRoaXMuY2VydDtcblx0XHRcdFx0XHRcdG9wdHMuY2EgPSB0aGlzLmNhO1xuXHRcdFx0XHRcdFx0b3B0cy5jaXBoZXJzID0gdGhpcy5jaXBoZXJzO1xuXHRcdFx0XHRcdFx0b3B0cy5yZWplY3RVbmF1dGhvcml6ZWQgPSB0aGlzLnJlamVjdFVuYXV0aG9yaXplZDtcblxuXHRcdFx0XHRcdFx0dmFyIHhociA9IHRoaXMueGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KG9wdHMpO1xuXHRcdFx0XHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXG5cdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHRkZWJ1ZygneGhyIG9wZW4gJXM6ICVzJywgdGhpcy5tZXRob2QsIHRoaXMudXJpKTtcblx0XHRcdFx0XHRcdFx0eGhyLm9wZW4odGhpcy5tZXRob2QsIHRoaXMudXJpLCB0aGlzLmFzeW5jKTtcblx0XHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0XHRpZiAodGhpcy5leHRyYUhlYWRlcnMpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHhoci5zZXREaXNhYmxlSGVhZGVyQ2hlY2sodHJ1ZSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRmb3IgKHZhciBpIGluIHRoaXMuZXh0cmFIZWFkZXJzKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmICh0aGlzLmV4dHJhSGVhZGVycy5oYXNPd25Qcm9wZXJ0eShpKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHhoci5zZXRSZXF1ZXN0SGVhZGVyKGksIHRoaXMuZXh0cmFIZWFkZXJzW2ldKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSBjYXRjaCAoZSkge31cblx0XHRcdFx0XHRcdFx0aWYgKHRoaXMuc3VwcG9ydHNCaW5hcnkpIHtcblx0XHRcdFx0XHRcdFx0XHQvLyBUaGlzIGhhcyB0byBiZSBkb25lIGFmdGVyIG9wZW4gYmVjYXVzZSBGaXJlZm94IGlzIHN0dXBpZFxuXHRcdFx0XHRcdFx0XHRcdC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTMyMTY5MDMvZ2V0LWJpbmFyeS1kYXRhLXdpdGgteG1saHR0cHJlcXVlc3QtaW4tYS1maXJlZm94LWV4dGVuc2lvblxuXHRcdFx0XHRcdFx0XHRcdHhoci5yZXNwb25zZVR5cGUgPSAnYXJyYXlidWZmZXInO1xuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0aWYgKCdQT1NUJyA9PSB0aGlzLm1ldGhvZCkge1xuXHRcdFx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAodGhpcy5pc0JpbmFyeSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR4aHIuc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC10eXBlJywgJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0eGhyLnNldFJlcXVlc3RIZWFkZXIoJ0NvbnRlbnQtdHlwZScsICd0ZXh0L3BsYWluO2NoYXJzZXQ9VVRGLTgnKTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9IGNhdGNoIChlKSB7fVxuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0Ly8gaWU2IGNoZWNrXG5cdFx0XHRcdFx0XHRcdGlmICgnd2l0aENyZWRlbnRpYWxzJyBpbiB4aHIpIHtcblx0XHRcdFx0XHRcdFx0XHR4aHIud2l0aENyZWRlbnRpYWxzID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdGlmICh0aGlzLmhhc1hEUigpKSB7XG5cdFx0XHRcdFx0XHRcdFx0eGhyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHNlbGYub25Mb2FkKCk7XG5cdFx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0XHR4aHIub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHNlbGYub25FcnJvcih4aHIucmVzcG9uc2VUZXh0KTtcblx0XHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoNCAhPSB4aHIucmVhZHlTdGF0ZSkgcmV0dXJuO1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKDIwMCA9PSB4aHIuc3RhdHVzIHx8IDEyMjMgPT0geGhyLnN0YXR1cykge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRzZWxmLm9uTG9hZCgpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gbWFrZSBzdXJlIHRoZSBgZXJyb3JgIGV2ZW50IGhhbmRsZXIgdGhhdCdzIHVzZXItc2V0XG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIGRvZXMgbm90IHRocm93IGluIHRoZSBzYW1lIHRpY2sgYW5kIGdldHMgY2F1Z2h0IGhlcmVcblx0XHRcdFx0XHRcdFx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2VsZi5vbkVycm9yKHhoci5zdGF0dXMpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR9LCAwKTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0ZGVidWcoJ3hociBkYXRhICVzJywgdGhpcy5kYXRhKTtcblx0XHRcdFx0XHRcdFx0eGhyLnNlbmQodGhpcy5kYXRhKTtcblx0XHRcdFx0XHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdFx0XHRcdFx0Ly8gTmVlZCB0byBkZWZlciBzaW5jZSAuY3JlYXRlKCkgaXMgY2FsbGVkIGRpcmVjdGx5IGZocm9tIHRoZSBjb25zdHJ1Y3RvclxuXHRcdFx0XHRcdFx0XHQvLyBhbmQgdGh1cyB0aGUgJ2Vycm9yJyBldmVudCBjYW4gb25seSBiZSBvbmx5IGJvdW5kICphZnRlciogdGhpcyBleGNlcHRpb25cblx0XHRcdFx0XHRcdFx0Ly8gb2NjdXJzLiAgVGhlcmVmb3JlLCBhbHNvLCB3ZSBjYW5ub3QgdGhyb3cgaGVyZSBhdCBhbGwuXG5cdFx0XHRcdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0XHRcdHNlbGYub25FcnJvcihlKTtcblx0XHRcdFx0XHRcdFx0fSwgMCk7XG5cdFx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0aWYgKGdsb2JhbC5kb2N1bWVudCkge1xuXHRcdFx0XHRcdFx0XHR0aGlzLmluZGV4ID0gUmVxdWVzdC5yZXF1ZXN0c0NvdW50Kys7XG5cdFx0XHRcdFx0XHRcdFJlcXVlc3QucmVxdWVzdHNbdGhpcy5pbmRleF0gPSB0aGlzO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH07XG5cblx0XHRcdFx0XHQvKipcbiAgICAgICogQ2FsbGVkIHVwb24gc3VjY2Vzc2Z1bCByZXNwb25zZS5cbiAgICAgICpcbiAgICAgICogQGFwaSBwcml2YXRlXG4gICAgICAqL1xuXG5cdFx0XHRcdFx0UmVxdWVzdC5wcm90b3R5cGUub25TdWNjZXNzID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0dGhpcy5lbWl0KCdzdWNjZXNzJyk7XG5cdFx0XHRcdFx0XHR0aGlzLmNsZWFudXAoKTtcblx0XHRcdFx0XHR9O1xuXG5cdFx0XHRcdFx0LyoqXG4gICAgICAqIENhbGxlZCBpZiB3ZSBoYXZlIGRhdGEuXG4gICAgICAqXG4gICAgICAqIEBhcGkgcHJpdmF0ZVxuICAgICAgKi9cblxuXHRcdFx0XHRcdFJlcXVlc3QucHJvdG90eXBlLm9uRGF0YSA9IGZ1bmN0aW9uIChkYXRhKSB7XG5cdFx0XHRcdFx0XHR0aGlzLmVtaXQoJ2RhdGEnLCBkYXRhKTtcblx0XHRcdFx0XHRcdHRoaXMub25TdWNjZXNzKCk7XG5cdFx0XHRcdFx0fTtcblxuXHRcdFx0XHRcdC8qKlxuICAgICAgKiBDYWxsZWQgdXBvbiBlcnJvci5cbiAgICAgICpcbiAgICAgICogQGFwaSBwcml2YXRlXG4gICAgICAqL1xuXG5cdFx0XHRcdFx0UmVxdWVzdC5wcm90b3R5cGUub25FcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcblx0XHRcdFx0XHRcdHRoaXMuZW1pdCgnZXJyb3InLCBlcnIpO1xuXHRcdFx0XHRcdFx0dGhpcy5jbGVhbnVwKHRydWUpO1xuXHRcdFx0XHRcdH07XG5cblx0XHRcdFx0XHQvKipcbiAgICAgICogQ2xlYW5zIHVwIGhvdXNlLlxuICAgICAgKlxuICAgICAgKiBAYXBpIHByaXZhdGVcbiAgICAgICovXG5cblx0XHRcdFx0XHRSZXF1ZXN0LnByb3RvdHlwZS5jbGVhbnVwID0gZnVuY3Rpb24gKGZyb21FcnJvcikge1xuXHRcdFx0XHRcdFx0aWYgKCd1bmRlZmluZWQnID09IHR5cGVvZiB0aGlzLnhociB8fCBudWxsID09PSB0aGlzLnhocikge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHQvLyB4bWxodHRwcmVxdWVzdFxuXHRcdFx0XHRcdFx0aWYgKHRoaXMuaGFzWERSKCkpIHtcblx0XHRcdFx0XHRcdFx0dGhpcy54aHIub25sb2FkID0gdGhpcy54aHIub25lcnJvciA9IGVtcHR5O1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0dGhpcy54aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZW1wdHk7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGlmIChmcm9tRXJyb3IpIHtcblx0XHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnhoci5hYm9ydCgpO1xuXHRcdFx0XHRcdFx0XHR9IGNhdGNoIChlKSB7fVxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRpZiAoZ2xvYmFsLmRvY3VtZW50KSB7XG5cdFx0XHRcdFx0XHRcdGRlbGV0ZSBSZXF1ZXN0LnJlcXVlc3RzW3RoaXMuaW5kZXhdO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHR0aGlzLnhociA9IG51bGw7XG5cdFx0XHRcdFx0fTtcblxuXHRcdFx0XHRcdC8qKlxuICAgICAgKiBDYWxsZWQgdXBvbiBsb2FkLlxuICAgICAgKlxuICAgICAgKiBAYXBpIHByaXZhdGVcbiAgICAgICovXG5cblx0XHRcdFx0XHRSZXF1ZXN0LnByb3RvdHlwZS5vbkxvYWQgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHR2YXIgZGF0YTtcblx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdHZhciBjb250ZW50VHlwZTtcblx0XHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0XHRjb250ZW50VHlwZSA9IHRoaXMueGhyLmdldFJlc3BvbnNlSGVhZGVyKCdDb250ZW50LVR5cGUnKS5zcGxpdCgnOycpWzBdO1xuXHRcdFx0XHRcdFx0XHR9IGNhdGNoIChlKSB7fVxuXHRcdFx0XHRcdFx0XHRpZiAoY29udGVudFR5cGUgPT09ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nKSB7XG5cdFx0XHRcdFx0XHRcdFx0ZGF0YSA9IHRoaXMueGhyLnJlc3BvbnNlO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdGlmICghdGhpcy5zdXBwb3J0c0JpbmFyeSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0ZGF0YSA9IHRoaXMueGhyLnJlc3BvbnNlVGV4dDtcblx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZGF0YSA9IFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgbmV3IFVpbnQ4QXJyYXkodGhpcy54aHIucmVzcG9uc2UpKTtcblx0XHRcdFx0XHRcdFx0XHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dmFyIHVpOEFyciA9IG5ldyBVaW50OEFycmF5KHRoaXMueGhyLnJlc3BvbnNlKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dmFyIGRhdGFBcnJheSA9IFtdO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRmb3IgKHZhciBpZHggPSAwLCBsZW5ndGggPSB1aThBcnIubGVuZ3RoOyBpZHggPCBsZW5ndGg7IGlkeCsrKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZGF0YUFycmF5LnB1c2godWk4QXJyW2lkeF0pO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0ZGF0YSA9IFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgZGF0YUFycmF5KTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdFx0XHRcdFx0dGhpcy5vbkVycm9yKGUpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0aWYgKG51bGwgIT0gZGF0YSkge1xuXHRcdFx0XHRcdFx0XHR0aGlzLm9uRGF0YShkYXRhKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9O1xuXG5cdFx0XHRcdFx0LyoqXG4gICAgICAqIENoZWNrIGlmIGl0IGhhcyBYRG9tYWluUmVxdWVzdC5cbiAgICAgICpcbiAgICAgICogQGFwaSBwcml2YXRlXG4gICAgICAqL1xuXG5cdFx0XHRcdFx0UmVxdWVzdC5wcm90b3R5cGUuaGFzWERSID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0cmV0dXJuICd1bmRlZmluZWQnICE9PSB0eXBlb2YgZ2xvYmFsLlhEb21haW5SZXF1ZXN0ICYmICF0aGlzLnhzICYmIHRoaXMuZW5hYmxlc1hEUjtcblx0XHRcdFx0XHR9O1xuXG5cdFx0XHRcdFx0LyoqXG4gICAgICAqIEFib3J0cyB0aGUgcmVxdWVzdC5cbiAgICAgICpcbiAgICAgICogQGFwaSBwdWJsaWNcbiAgICAgICovXG5cblx0XHRcdFx0XHRSZXF1ZXN0LnByb3RvdHlwZS5hYm9ydCA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdHRoaXMuY2xlYW51cCgpO1xuXHRcdFx0XHRcdH07XG5cblx0XHRcdFx0XHQvKipcbiAgICAgICogQWJvcnRzIHBlbmRpbmcgcmVxdWVzdHMgd2hlbiB1bmxvYWRpbmcgdGhlIHdpbmRvdy4gVGhpcyBpcyBuZWVkZWQgdG8gcHJldmVudFxuICAgICAgKiBtZW1vcnkgbGVha3MgKGUuZy4gd2hlbiB1c2luZyBJRSkgYW5kIHRvIGVuc3VyZSB0aGF0IG5vIHNwdXJpb3VzIGVycm9yIGlzXG4gICAgICAqIGVtaXR0ZWQuXG4gICAgICAqL1xuXG5cdFx0XHRcdFx0aWYgKGdsb2JhbC5kb2N1bWVudCkge1xuXHRcdFx0XHRcdFx0UmVxdWVzdC5yZXF1ZXN0c0NvdW50ID0gMDtcblx0XHRcdFx0XHRcdFJlcXVlc3QucmVxdWVzdHMgPSB7fTtcblx0XHRcdFx0XHRcdGlmIChnbG9iYWwuYXR0YWNoRXZlbnQpIHtcblx0XHRcdFx0XHRcdFx0Z2xvYmFsLmF0dGFjaEV2ZW50KCdvbnVubG9hZCcsIHVubG9hZEhhbmRsZXIpO1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmIChnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcikge1xuXHRcdFx0XHRcdFx0XHRnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcignYmVmb3JldW5sb2FkJywgdW5sb2FkSGFuZGxlciwgZmFsc2UpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGZ1bmN0aW9uIHVubG9hZEhhbmRsZXIoKSB7XG5cdFx0XHRcdFx0XHRmb3IgKHZhciBpIGluIFJlcXVlc3QucmVxdWVzdHMpIHtcblx0XHRcdFx0XHRcdFx0aWYgKFJlcXVlc3QucmVxdWVzdHMuaGFzT3duUHJvcGVydHkoaSkpIHtcblx0XHRcdFx0XHRcdFx0XHRSZXF1ZXN0LnJlcXVlc3RzW2ldLmFib3J0KCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pLmNhbGwodGhpcywgdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgPyBnbG9iYWwgOiB7fSk7XG5cdFx0XHR9LCB7XG5cdFx0XHRcdFwiLi9wb2xsaW5nXCI6IDgsXG5cdFx0XHRcdFwiY29tcG9uZW50LWVtaXR0ZXJcIjogMTUsXG5cdFx0XHRcdFwiY29tcG9uZW50LWluaGVyaXRcIjogMTYsXG5cdFx0XHRcdFwiZGVidWdcIjogMTcsXG5cdFx0XHRcdFwieG1saHR0cHJlcXVlc3Qtc3NsXCI6IDEwXG5cdFx0XHR9XSxcblx0XHRcdDg6IFtmdW5jdGlvbiAoX2RlcmVxXywgbW9kdWxlLCBleHBvcnRzKSB7XG5cdFx0XHRcdC8qKlxuICAgICAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gICAgICovXG5cblx0XHRcdFx0dmFyIFRyYW5zcG9ydCA9IF9kZXJlcV8oJy4uL3RyYW5zcG9ydCcpO1xuXHRcdFx0XHR2YXIgcGFyc2VxcyA9IF9kZXJlcV8oJ3BhcnNlcXMnKTtcblx0XHRcdFx0dmFyIHBhcnNlciA9IF9kZXJlcV8oJ2VuZ2luZS5pby1wYXJzZXInKTtcblx0XHRcdFx0dmFyIGluaGVyaXQgPSBfZGVyZXFfKCdjb21wb25lbnQtaW5oZXJpdCcpO1xuXHRcdFx0XHR2YXIgeWVhc3QgPSBfZGVyZXFfKCd5ZWFzdCcpO1xuXHRcdFx0XHR2YXIgZGVidWcgPSBfZGVyZXFfKCdkZWJ1ZycpKCdlbmdpbmUuaW8tY2xpZW50OnBvbGxpbmcnKTtcblxuXHRcdFx0XHQvKipcbiAgICAgKiBNb2R1bGUgZXhwb3J0cy5cbiAgICAgKi9cblxuXHRcdFx0XHRtb2R1bGUuZXhwb3J0cyA9IFBvbGxpbmc7XG5cblx0XHRcdFx0LyoqXG4gICAgICogSXMgWEhSMiBzdXBwb3J0ZWQ/XG4gICAgICovXG5cblx0XHRcdFx0dmFyIGhhc1hIUjIgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0dmFyIFhNTEh0dHBSZXF1ZXN0ID0gX2RlcmVxXygneG1saHR0cHJlcXVlc3Qtc3NsJyk7XG5cdFx0XHRcdFx0dmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCh7XG5cdFx0XHRcdFx0XHR4ZG9tYWluOiBmYWxzZVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdHJldHVybiBudWxsICE9IHhoci5yZXNwb25zZVR5cGU7XG5cdFx0XHRcdH0oKTtcblxuXHRcdFx0XHQvKipcbiAgICAgKiBQb2xsaW5nIGludGVyZmFjZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzXG4gICAgICogQGFwaSBwcml2YXRlXG4gICAgICovXG5cblx0XHRcdFx0ZnVuY3Rpb24gUG9sbGluZyhvcHRzKSB7XG5cdFx0XHRcdFx0dmFyIGZvcmNlQmFzZTY0ID0gb3B0cyAmJiBvcHRzLmZvcmNlQmFzZTY0O1xuXHRcdFx0XHRcdGlmICghaGFzWEhSMiB8fCBmb3JjZUJhc2U2NCkge1xuXHRcdFx0XHRcdFx0dGhpcy5zdXBwb3J0c0JpbmFyeSA9IGZhbHNlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRUcmFuc3BvcnQuY2FsbCh0aGlzLCBvcHRzKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8qKlxuICAgICAqIEluaGVyaXRzIGZyb20gVHJhbnNwb3J0LlxuICAgICAqL1xuXG5cdFx0XHRcdGluaGVyaXQoUG9sbGluZywgVHJhbnNwb3J0KTtcblxuXHRcdFx0XHQvKipcbiAgICAgKiBUcmFuc3BvcnQgbmFtZS5cbiAgICAgKi9cblxuXHRcdFx0XHRQb2xsaW5nLnByb3RvdHlwZS5uYW1lID0gJ3BvbGxpbmcnO1xuXG5cdFx0XHRcdC8qKlxuICAgICAqIE9wZW5zIHRoZSBzb2NrZXQgKHRyaWdnZXJzIHBvbGxpbmcpLiBXZSB3cml0ZSBhIFBJTkcgbWVzc2FnZSB0byBkZXRlcm1pbmVcbiAgICAgKiB3aGVuIHRoZSB0cmFuc3BvcnQgaXMgb3Blbi5cbiAgICAgKlxuICAgICAqIEBhcGkgcHJpdmF0ZVxuICAgICAqL1xuXG5cdFx0XHRcdFBvbGxpbmcucHJvdG90eXBlLmRvT3BlbiA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHR0aGlzLnBvbGwoKTtcblx0XHRcdFx0fTtcblxuXHRcdFx0XHQvKipcbiAgICAgKiBQYXVzZXMgcG9sbGluZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIHVwb24gYnVmZmVycyBhcmUgZmx1c2hlZCBhbmQgdHJhbnNwb3J0IGlzIHBhdXNlZFxuICAgICAqIEBhcGkgcHJpdmF0ZVxuICAgICAqL1xuXG5cdFx0XHRcdFBvbGxpbmcucHJvdG90eXBlLnBhdXNlID0gZnVuY3Rpb24gKG9uUGF1c2UpIHtcblx0XHRcdFx0XHR2YXIgcGVuZGluZyA9IDA7XG5cdFx0XHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXG5cdFx0XHRcdFx0dGhpcy5yZWFkeVN0YXRlID0gJ3BhdXNpbmcnO1xuXG5cdFx0XHRcdFx0ZnVuY3Rpb24gcGF1c2UoKSB7XG5cdFx0XHRcdFx0XHRkZWJ1ZygncGF1c2VkJyk7XG5cdFx0XHRcdFx0XHRzZWxmLnJlYWR5U3RhdGUgPSAncGF1c2VkJztcblx0XHRcdFx0XHRcdG9uUGF1c2UoKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAodGhpcy5wb2xsaW5nIHx8ICF0aGlzLndyaXRhYmxlKSB7XG5cdFx0XHRcdFx0XHR2YXIgdG90YWwgPSAwO1xuXG5cdFx0XHRcdFx0XHRpZiAodGhpcy5wb2xsaW5nKSB7XG5cdFx0XHRcdFx0XHRcdGRlYnVnKCd3ZSBhcmUgY3VycmVudGx5IHBvbGxpbmcgLSB3YWl0aW5nIHRvIHBhdXNlJyk7XG5cdFx0XHRcdFx0XHRcdHRvdGFsKys7XG5cdFx0XHRcdFx0XHRcdHRoaXMub25jZSgncG9sbENvbXBsZXRlJywgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0XHRcdGRlYnVnKCdwcmUtcGF1c2UgcG9sbGluZyBjb21wbGV0ZScpO1xuXHRcdFx0XHRcdFx0XHRcdC0tdG90YWwgfHwgcGF1c2UoKTtcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGlmICghdGhpcy53cml0YWJsZSkge1xuXHRcdFx0XHRcdFx0XHRkZWJ1Zygnd2UgYXJlIGN1cnJlbnRseSB3cml0aW5nIC0gd2FpdGluZyB0byBwYXVzZScpO1xuXHRcdFx0XHRcdFx0XHR0b3RhbCsrO1xuXHRcdFx0XHRcdFx0XHR0aGlzLm9uY2UoJ2RyYWluJywgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0XHRcdGRlYnVnKCdwcmUtcGF1c2Ugd3JpdGluZyBjb21wbGV0ZScpO1xuXHRcdFx0XHRcdFx0XHRcdC0tdG90YWwgfHwgcGF1c2UoKTtcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHBhdXNlKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdC8qKlxuICAgICAqIFN0YXJ0cyBwb2xsaW5nIGN5Y2xlLlxuICAgICAqXG4gICAgICogQGFwaSBwdWJsaWNcbiAgICAgKi9cblxuXHRcdFx0XHRQb2xsaW5nLnByb3RvdHlwZS5wb2xsID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdGRlYnVnKCdwb2xsaW5nJyk7XG5cdFx0XHRcdFx0dGhpcy5wb2xsaW5nID0gdHJ1ZTtcblx0XHRcdFx0XHR0aGlzLmRvUG9sbCgpO1xuXHRcdFx0XHRcdHRoaXMuZW1pdCgncG9sbCcpO1xuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdC8qKlxuICAgICAqIE92ZXJsb2FkcyBvbkRhdGEgdG8gZGV0ZWN0IHBheWxvYWRzLlxuICAgICAqXG4gICAgICogQGFwaSBwcml2YXRlXG4gICAgICovXG5cblx0XHRcdFx0UG9sbGluZy5wcm90b3R5cGUub25EYXRhID0gZnVuY3Rpb24gKGRhdGEpIHtcblx0XHRcdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cdFx0XHRcdFx0ZGVidWcoJ3BvbGxpbmcgZ290IGRhdGEgJXMnLCBkYXRhKTtcblx0XHRcdFx0XHR2YXIgY2FsbGJhY2sgPSBmdW5jdGlvbiBjYWxsYmFjayhwYWNrZXQsIGluZGV4LCB0b3RhbCkge1xuXHRcdFx0XHRcdFx0Ly8gaWYgaXRzIHRoZSBmaXJzdCBtZXNzYWdlIHdlIGNvbnNpZGVyIHRoZSB0cmFuc3BvcnQgb3BlblxuXHRcdFx0XHRcdFx0aWYgKCdvcGVuaW5nJyA9PSBzZWxmLnJlYWR5U3RhdGUpIHtcblx0XHRcdFx0XHRcdFx0c2VsZi5vbk9wZW4oKTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0Ly8gaWYgaXRzIGEgY2xvc2UgcGFja2V0LCB3ZSBjbG9zZSB0aGUgb25nb2luZyByZXF1ZXN0c1xuXHRcdFx0XHRcdFx0aWYgKCdjbG9zZScgPT0gcGFja2V0LnR5cGUpIHtcblx0XHRcdFx0XHRcdFx0c2VsZi5vbkNsb3NlKCk7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0Ly8gb3RoZXJ3aXNlIGJ5cGFzcyBvbkRhdGEgYW5kIGhhbmRsZSB0aGUgbWVzc2FnZVxuXHRcdFx0XHRcdFx0c2VsZi5vblBhY2tldChwYWNrZXQpO1xuXHRcdFx0XHRcdH07XG5cblx0XHRcdFx0XHQvLyBkZWNvZGUgcGF5bG9hZFxuXHRcdFx0XHRcdHBhcnNlci5kZWNvZGVQYXlsb2FkKGRhdGEsIHRoaXMuc29ja2V0LmJpbmFyeVR5cGUsIGNhbGxiYWNrKTtcblxuXHRcdFx0XHRcdC8vIGlmIGFuIGV2ZW50IGRpZCBub3QgdHJpZ2dlciBjbG9zaW5nXG5cdFx0XHRcdFx0aWYgKCdjbG9zZWQnICE9IHRoaXMucmVhZHlTdGF0ZSkge1xuXHRcdFx0XHRcdFx0Ly8gaWYgd2UgZ290IGRhdGEgd2UncmUgbm90IHBvbGxpbmdcblx0XHRcdFx0XHRcdHRoaXMucG9sbGluZyA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0dGhpcy5lbWl0KCdwb2xsQ29tcGxldGUnKTtcblxuXHRcdFx0XHRcdFx0aWYgKCdvcGVuJyA9PSB0aGlzLnJlYWR5U3RhdGUpIHtcblx0XHRcdFx0XHRcdFx0dGhpcy5wb2xsKCk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRkZWJ1ZygnaWdub3JpbmcgcG9sbCAtIHRyYW5zcG9ydCBzdGF0ZSBcIiVzXCInLCB0aGlzLnJlYWR5U3RhdGUpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fTtcblxuXHRcdFx0XHQvKipcbiAgICAgKiBGb3IgcG9sbGluZywgc2VuZCBhIGNsb3NlIHBhY2tldC5cbiAgICAgKlxuICAgICAqIEBhcGkgcHJpdmF0ZVxuICAgICAqL1xuXG5cdFx0XHRcdFBvbGxpbmcucHJvdG90eXBlLmRvQ2xvc2UgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXG5cdFx0XHRcdFx0ZnVuY3Rpb24gY2xvc2UoKSB7XG5cdFx0XHRcdFx0XHRkZWJ1Zygnd3JpdGluZyBjbG9zZSBwYWNrZXQnKTtcblx0XHRcdFx0XHRcdHNlbGYud3JpdGUoW3tcblx0XHRcdFx0XHRcdFx0dHlwZTogJ2Nsb3NlJ1xuXHRcdFx0XHRcdFx0fV0pO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmICgnb3BlbicgPT0gdGhpcy5yZWFkeVN0YXRlKSB7XG5cdFx0XHRcdFx0XHRkZWJ1ZygndHJhbnNwb3J0IG9wZW4gLSBjbG9zaW5nJyk7XG5cdFx0XHRcdFx0XHRjbG9zZSgpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHQvLyBpbiBjYXNlIHdlJ3JlIHRyeWluZyB0byBjbG9zZSB3aGlsZVxuXHRcdFx0XHRcdFx0Ly8gaGFuZHNoYWtpbmcgaXMgaW4gcHJvZ3Jlc3MgKEdILTE2NClcblx0XHRcdFx0XHRcdGRlYnVnKCd0cmFuc3BvcnQgbm90IG9wZW4gLSBkZWZlcnJpbmcgY2xvc2UnKTtcblx0XHRcdFx0XHRcdHRoaXMub25jZSgnb3BlbicsIGNsb3NlKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH07XG5cblx0XHRcdFx0LyoqXG4gICAgICogV3JpdGVzIGEgcGFja2V0cyBwYXlsb2FkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtBcnJheX0gZGF0YSBwYWNrZXRzXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZHJhaW4gY2FsbGJhY2tcbiAgICAgKiBAYXBpIHByaXZhdGVcbiAgICAgKi9cblxuXHRcdFx0XHRQb2xsaW5nLnByb3RvdHlwZS53cml0ZSA9IGZ1bmN0aW9uIChwYWNrZXRzKSB7XG5cdFx0XHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXHRcdFx0XHRcdHRoaXMud3JpdGFibGUgPSBmYWxzZTtcblx0XHRcdFx0XHR2YXIgY2FsbGJhY2tmbiA9IGZ1bmN0aW9uIGNhbGxiYWNrZm4oKSB7XG5cdFx0XHRcdFx0XHRzZWxmLndyaXRhYmxlID0gdHJ1ZTtcblx0XHRcdFx0XHRcdHNlbGYuZW1pdCgnZHJhaW4nKTtcblx0XHRcdFx0XHR9O1xuXG5cdFx0XHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXHRcdFx0XHRcdHBhcnNlci5lbmNvZGVQYXlsb2FkKHBhY2tldHMsIHRoaXMuc3VwcG9ydHNCaW5hcnksIGZ1bmN0aW9uIChkYXRhKSB7XG5cdFx0XHRcdFx0XHRzZWxmLmRvV3JpdGUoZGF0YSwgY2FsbGJhY2tmbik7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH07XG5cblx0XHRcdFx0LyoqXG4gICAgICogR2VuZXJhdGVzIHVyaSBmb3IgY29ubmVjdGlvbi5cbiAgICAgKlxuICAgICAqIEBhcGkgcHJpdmF0ZVxuICAgICAqL1xuXG5cdFx0XHRcdFBvbGxpbmcucHJvdG90eXBlLnVyaSA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHR2YXIgcXVlcnkgPSB0aGlzLnF1ZXJ5IHx8IHt9O1xuXHRcdFx0XHRcdHZhciBzY2hlbWEgPSB0aGlzLnNlY3VyZSA/ICdodHRwcycgOiAnaHR0cCc7XG5cdFx0XHRcdFx0dmFyIHBvcnQgPSAnJztcblxuXHRcdFx0XHRcdC8vIGNhY2hlIGJ1c3RpbmcgaXMgZm9yY2VkXG5cdFx0XHRcdFx0aWYgKGZhbHNlICE9PSB0aGlzLnRpbWVzdGFtcFJlcXVlc3RzKSB7XG5cdFx0XHRcdFx0XHRxdWVyeVt0aGlzLnRpbWVzdGFtcFBhcmFtXSA9IHllYXN0KCk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKCF0aGlzLnN1cHBvcnRzQmluYXJ5ICYmICFxdWVyeS5zaWQpIHtcblx0XHRcdFx0XHRcdHF1ZXJ5LmI2NCA9IDE7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0cXVlcnkgPSBwYXJzZXFzLmVuY29kZShxdWVyeSk7XG5cblx0XHRcdFx0XHQvLyBhdm9pZCBwb3J0IGlmIGRlZmF1bHQgZm9yIHNjaGVtYVxuXHRcdFx0XHRcdGlmICh0aGlzLnBvcnQgJiYgKCdodHRwcycgPT0gc2NoZW1hICYmIHRoaXMucG9ydCAhPSA0NDMgfHwgJ2h0dHAnID09IHNjaGVtYSAmJiB0aGlzLnBvcnQgIT0gODApKSB7XG5cdFx0XHRcdFx0XHRwb3J0ID0gJzonICsgdGhpcy5wb3J0O1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIHByZXBlbmQgPyB0byBxdWVyeVxuXHRcdFx0XHRcdGlmIChxdWVyeS5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdHF1ZXJ5ID0gJz8nICsgcXVlcnk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0dmFyIGlwdjYgPSB0aGlzLmhvc3RuYW1lLmluZGV4T2YoJzonKSAhPT0gLTE7XG5cdFx0XHRcdFx0cmV0dXJuIHNjaGVtYSArICc6Ly8nICsgKGlwdjYgPyAnWycgKyB0aGlzLmhvc3RuYW1lICsgJ10nIDogdGhpcy5ob3N0bmFtZSkgKyBwb3J0ICsgdGhpcy5wYXRoICsgcXVlcnk7XG5cdFx0XHRcdH07XG5cdFx0XHR9LCB7XG5cdFx0XHRcdFwiLi4vdHJhbnNwb3J0XCI6IDQsXG5cdFx0XHRcdFwiY29tcG9uZW50LWluaGVyaXRcIjogMTYsXG5cdFx0XHRcdFwiZGVidWdcIjogMTcsXG5cdFx0XHRcdFwiZW5naW5lLmlvLXBhcnNlclwiOiAxOSxcblx0XHRcdFx0XCJwYXJzZXFzXCI6IDI3LFxuXHRcdFx0XHRcInhtbGh0dHByZXF1ZXN0LXNzbFwiOiAxMCxcblx0XHRcdFx0XCJ5ZWFzdFwiOiAzMFxuXHRcdFx0fV0sXG5cdFx0XHQ5OiBbZnVuY3Rpb24gKF9kZXJlcV8sIG1vZHVsZSwgZXhwb3J0cykge1xuXHRcdFx0XHQoZnVuY3Rpb24gKGdsb2JhbCkge1xuXHRcdFx0XHRcdC8qKlxuICAgICAgKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICAgICAgKi9cblxuXHRcdFx0XHRcdHZhciBUcmFuc3BvcnQgPSBfZGVyZXFfKCcuLi90cmFuc3BvcnQnKTtcblx0XHRcdFx0XHR2YXIgcGFyc2VyID0gX2RlcmVxXygnZW5naW5lLmlvLXBhcnNlcicpO1xuXHRcdFx0XHRcdHZhciBwYXJzZXFzID0gX2RlcmVxXygncGFyc2VxcycpO1xuXHRcdFx0XHRcdHZhciBpbmhlcml0ID0gX2RlcmVxXygnY29tcG9uZW50LWluaGVyaXQnKTtcblx0XHRcdFx0XHR2YXIgeWVhc3QgPSBfZGVyZXFfKCd5ZWFzdCcpO1xuXHRcdFx0XHRcdHZhciBkZWJ1ZyA9IF9kZXJlcV8oJ2RlYnVnJykoJ2VuZ2luZS5pby1jbGllbnQ6d2Vic29ja2V0Jyk7XG5cdFx0XHRcdFx0dmFyIEJyb3dzZXJXZWJTb2NrZXQgPSBnbG9iYWwuV2ViU29ja2V0IHx8IGdsb2JhbC5Nb3pXZWJTb2NrZXQ7XG5cblx0XHRcdFx0XHQvKipcbiAgICAgICogR2V0IGVpdGhlciB0aGUgYFdlYlNvY2tldGAgb3IgYE1veldlYlNvY2tldGAgZ2xvYmFsc1xuICAgICAgKiBpbiB0aGUgYnJvd3NlciBvciB0cnkgdG8gcmVzb2x2ZSBXZWJTb2NrZXQtY29tcGF0aWJsZVxuICAgICAgKiBpbnRlcmZhY2UgZXhwb3NlZCBieSBgd3NgIGZvciBOb2RlLWxpa2UgZW52aXJvbm1lbnQuXG4gICAgICAqL1xuXG5cdFx0XHRcdFx0dmFyIFdlYlNvY2tldCA9IEJyb3dzZXJXZWJTb2NrZXQ7XG5cdFx0XHRcdFx0aWYgKCFXZWJTb2NrZXQgJiYgdHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdFdlYlNvY2tldCA9IF9kZXJlcV8oJ3dzJyk7XG5cdFx0XHRcdFx0XHR9IGNhdGNoIChlKSB7fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8qKlxuICAgICAgKiBNb2R1bGUgZXhwb3J0cy5cbiAgICAgICovXG5cblx0XHRcdFx0XHRtb2R1bGUuZXhwb3J0cyA9IFdTO1xuXG5cdFx0XHRcdFx0LyoqXG4gICAgICAqIFdlYlNvY2tldCB0cmFuc3BvcnQgY29uc3RydWN0b3IuXG4gICAgICAqXG4gICAgICAqIEBhcGkge09iamVjdH0gY29ubmVjdGlvbiBvcHRpb25zXG4gICAgICAqIEBhcGkgcHVibGljXG4gICAgICAqL1xuXG5cdFx0XHRcdFx0ZnVuY3Rpb24gV1Mob3B0cykge1xuXHRcdFx0XHRcdFx0dmFyIGZvcmNlQmFzZTY0ID0gb3B0cyAmJiBvcHRzLmZvcmNlQmFzZTY0O1xuXHRcdFx0XHRcdFx0aWYgKGZvcmNlQmFzZTY0KSB7XG5cdFx0XHRcdFx0XHRcdHRoaXMuc3VwcG9ydHNCaW5hcnkgPSBmYWxzZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdHRoaXMucGVyTWVzc2FnZURlZmxhdGUgPSBvcHRzLnBlck1lc3NhZ2VEZWZsYXRlO1xuXHRcdFx0XHRcdFx0VHJhbnNwb3J0LmNhbGwodGhpcywgb3B0cyk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0LyoqXG4gICAgICAqIEluaGVyaXRzIGZyb20gVHJhbnNwb3J0LlxuICAgICAgKi9cblxuXHRcdFx0XHRcdGluaGVyaXQoV1MsIFRyYW5zcG9ydCk7XG5cblx0XHRcdFx0XHQvKipcbiAgICAgICogVHJhbnNwb3J0IG5hbWUuXG4gICAgICAqXG4gICAgICAqIEBhcGkgcHVibGljXG4gICAgICAqL1xuXG5cdFx0XHRcdFx0V1MucHJvdG90eXBlLm5hbWUgPSAnd2Vic29ja2V0JztcblxuXHRcdFx0XHRcdC8qXG4gICAgICAqIFdlYlNvY2tldHMgc3VwcG9ydCBiaW5hcnlcbiAgICAgICovXG5cblx0XHRcdFx0XHRXUy5wcm90b3R5cGUuc3VwcG9ydHNCaW5hcnkgPSB0cnVlO1xuXG5cdFx0XHRcdFx0LyoqXG4gICAgICAqIE9wZW5zIHNvY2tldC5cbiAgICAgICpcbiAgICAgICogQGFwaSBwcml2YXRlXG4gICAgICAqL1xuXG5cdFx0XHRcdFx0V1MucHJvdG90eXBlLmRvT3BlbiA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdGlmICghdGhpcy5jaGVjaygpKSB7XG5cdFx0XHRcdFx0XHRcdC8vIGxldCBwcm9iZSB0aW1lb3V0XG5cdFx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXHRcdFx0XHRcdFx0dmFyIHVyaSA9IHRoaXMudXJpKCk7XG5cdFx0XHRcdFx0XHR2YXIgcHJvdG9jb2xzID0gdm9pZCAwO1xuXHRcdFx0XHRcdFx0dmFyIG9wdHMgPSB7XG5cdFx0XHRcdFx0XHRcdGFnZW50OiB0aGlzLmFnZW50LFxuXHRcdFx0XHRcdFx0XHRwZXJNZXNzYWdlRGVmbGF0ZTogdGhpcy5wZXJNZXNzYWdlRGVmbGF0ZVxuXHRcdFx0XHRcdFx0fTtcblxuXHRcdFx0XHRcdFx0Ly8gU1NMIG9wdGlvbnMgZm9yIE5vZGUuanMgY2xpZW50XG5cdFx0XHRcdFx0XHRvcHRzLnBmeCA9IHRoaXMucGZ4O1xuXHRcdFx0XHRcdFx0b3B0cy5rZXkgPSB0aGlzLmtleTtcblx0XHRcdFx0XHRcdG9wdHMucGFzc3BocmFzZSA9IHRoaXMucGFzc3BocmFzZTtcblx0XHRcdFx0XHRcdG9wdHMuY2VydCA9IHRoaXMuY2VydDtcblx0XHRcdFx0XHRcdG9wdHMuY2EgPSB0aGlzLmNhO1xuXHRcdFx0XHRcdFx0b3B0cy5jaXBoZXJzID0gdGhpcy5jaXBoZXJzO1xuXHRcdFx0XHRcdFx0b3B0cy5yZWplY3RVbmF1dGhvcml6ZWQgPSB0aGlzLnJlamVjdFVuYXV0aG9yaXplZDtcblx0XHRcdFx0XHRcdGlmICh0aGlzLmV4dHJhSGVhZGVycykge1xuXHRcdFx0XHRcdFx0XHRvcHRzLmhlYWRlcnMgPSB0aGlzLmV4dHJhSGVhZGVycztcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0dGhpcy53cyA9IEJyb3dzZXJXZWJTb2NrZXQgPyBuZXcgV2ViU29ja2V0KHVyaSkgOiBuZXcgV2ViU29ja2V0KHVyaSwgcHJvdG9jb2xzLCBvcHRzKTtcblxuXHRcdFx0XHRcdFx0aWYgKHRoaXMud3MuYmluYXJ5VHlwZSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0XHRcdHRoaXMuc3VwcG9ydHNCaW5hcnkgPSBmYWxzZTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0aWYgKHRoaXMud3Muc3VwcG9ydHMgJiYgdGhpcy53cy5zdXBwb3J0cy5iaW5hcnkpIHtcblx0XHRcdFx0XHRcdFx0dGhpcy5zdXBwb3J0c0JpbmFyeSA9IHRydWU7XG5cdFx0XHRcdFx0XHRcdHRoaXMud3MuYmluYXJ5VHlwZSA9ICdidWZmZXInO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0dGhpcy53cy5iaW5hcnlUeXBlID0gJ2FycmF5YnVmZmVyJztcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0dGhpcy5hZGRFdmVudExpc3RlbmVycygpO1xuXHRcdFx0XHRcdH07XG5cblx0XHRcdFx0XHQvKipcbiAgICAgICogQWRkcyBldmVudCBsaXN0ZW5lcnMgdG8gdGhlIHNvY2tldFxuICAgICAgKlxuICAgICAgKiBAYXBpIHByaXZhdGVcbiAgICAgICovXG5cblx0XHRcdFx0XHRXUy5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lcnMgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cblx0XHRcdFx0XHRcdHRoaXMud3Mub25vcGVuID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0XHRzZWxmLm9uT3BlbigpO1xuXHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdHRoaXMud3Mub25jbG9zZSA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdFx0c2VsZi5vbkNsb3NlKCk7XG5cdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0dGhpcy53cy5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoZXYpIHtcblx0XHRcdFx0XHRcdFx0c2VsZi5vbkRhdGEoZXYuZGF0YSk7XG5cdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0dGhpcy53cy5vbmVycm9yID0gZnVuY3Rpb24gKGUpIHtcblx0XHRcdFx0XHRcdFx0c2VsZi5vbkVycm9yKCd3ZWJzb2NrZXQgZXJyb3InLCBlKTtcblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0fTtcblxuXHRcdFx0XHRcdC8qKlxuICAgICAgKiBPdmVycmlkZSBgb25EYXRhYCB0byB1c2UgYSB0aW1lciBvbiBpT1MuXG4gICAgICAqIFNlZTogaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vbWxvdWdocmFuLzIwNTIwMDZcbiAgICAgICpcbiAgICAgICogQGFwaSBwcml2YXRlXG4gICAgICAqL1xuXG5cdFx0XHRcdFx0aWYgKCd1bmRlZmluZWQnICE9IHR5cGVvZiBuYXZpZ2F0b3IgJiYgL2lQYWR8aVBob25lfGlQb2QvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKSB7XG5cdFx0XHRcdFx0XHRXUy5wcm90b3R5cGUub25EYXRhID0gZnVuY3Rpb24gKGRhdGEpIHtcblx0XHRcdFx0XHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdFx0XHRUcmFuc3BvcnQucHJvdG90eXBlLm9uRGF0YS5jYWxsKHNlbGYsIGRhdGEpO1xuXHRcdFx0XHRcdFx0XHR9LCAwKTtcblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0LyoqXG4gICAgICAqIFdyaXRlcyBkYXRhIHRvIHNvY2tldC5cbiAgICAgICpcbiAgICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgb2YgcGFja2V0cy5cbiAgICAgICogQGFwaSBwcml2YXRlXG4gICAgICAqL1xuXG5cdFx0XHRcdFx0V1MucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24gKHBhY2tldHMpIHtcblx0XHRcdFx0XHRcdHZhciBzZWxmID0gdGhpcztcblx0XHRcdFx0XHRcdHRoaXMud3JpdGFibGUgPSBmYWxzZTtcblxuXHRcdFx0XHRcdFx0Ly8gZW5jb2RlUGFja2V0IGVmZmljaWVudCBhcyBpdCB1c2VzIFdTIGZyYW1pbmdcblx0XHRcdFx0XHRcdC8vIG5vIG5lZWQgZm9yIGVuY29kZVBheWxvYWRcblx0XHRcdFx0XHRcdHZhciB0b3RhbCA9IHBhY2tldHMubGVuZ3RoO1xuXHRcdFx0XHRcdFx0Zm9yICh2YXIgaSA9IDAsIGwgPSB0b3RhbDsgaSA8IGw7IGkrKykge1xuXHRcdFx0XHRcdFx0XHQoZnVuY3Rpb24gKHBhY2tldCkge1xuXHRcdFx0XHRcdFx0XHRcdHBhcnNlci5lbmNvZGVQYWNrZXQocGFja2V0LCBzZWxmLnN1cHBvcnRzQmluYXJ5LCBmdW5jdGlvbiAoZGF0YSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKCFCcm93c2VyV2ViU29ja2V0KSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIGFsd2F5cyBjcmVhdGUgYSBuZXcgb2JqZWN0IChHSC00MzcpXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHZhciBvcHRzID0ge307XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChwYWNrZXQub3B0aW9ucykge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdG9wdHMuY29tcHJlc3MgPSBwYWNrZXQub3B0aW9ucy5jb21wcmVzcztcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChzZWxmLnBlck1lc3NhZ2VEZWZsYXRlKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmFyIGxlbiA9ICdzdHJpbmcnID09IHR5cGVvZiBkYXRhID8gZ2xvYmFsLkJ1ZmZlci5ieXRlTGVuZ3RoKGRhdGEpIDogZGF0YS5sZW5ndGg7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGxlbiA8IHNlbGYucGVyTWVzc2FnZURlZmxhdGUudGhyZXNob2xkKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRvcHRzLmNvbXByZXNzID0gZmFsc2U7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHRcdC8vU29tZXRpbWVzIHRoZSB3ZWJzb2NrZXQgaGFzIGFscmVhZHkgYmVlbiBjbG9zZWQgYnV0IHRoZSBicm93c2VyIGRpZG4ndFxuXHRcdFx0XHRcdFx0XHRcdFx0Ly9oYXZlIGEgY2hhbmNlIG9mIGluZm9ybWluZyB1cyBhYm91dCBpdCB5ZXQsIGluIHRoYXQgY2FzZSBzZW5kIHdpbGxcblx0XHRcdFx0XHRcdFx0XHRcdC8vdGhyb3cgYW4gZXJyb3Jcblx0XHRcdFx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChCcm93c2VyV2ViU29ja2V0KSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gVHlwZUVycm9yIGlzIHRocm93biB3aGVuIHBhc3NpbmcgdGhlIHNlY29uZCBhcmd1bWVudCBvbiBTYWZhcmlcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzZWxmLndzLnNlbmQoZGF0YSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2VsZi53cy5zZW5kKGRhdGEsIG9wdHMpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGRlYnVnKCd3ZWJzb2NrZXQgY2xvc2VkIGJlZm9yZSBvbmNsb3NlIGV2ZW50Jyk7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHRcdC0tdG90YWwgfHwgZG9uZSgpO1xuXHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHR9KShwYWNrZXRzW2ldKTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0ZnVuY3Rpb24gZG9uZSgpIHtcblx0XHRcdFx0XHRcdFx0c2VsZi5lbWl0KCdmbHVzaCcpO1xuXG5cdFx0XHRcdFx0XHRcdC8vIGZha2UgZHJhaW5cblx0XHRcdFx0XHRcdFx0Ly8gZGVmZXIgdG8gbmV4dCB0aWNrIHRvIGFsbG93IFNvY2tldCB0byBjbGVhciB3cml0ZUJ1ZmZlclxuXHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdFx0XHRzZWxmLndyaXRhYmxlID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0XHRzZWxmLmVtaXQoJ2RyYWluJyk7XG5cdFx0XHRcdFx0XHRcdH0sIDApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH07XG5cblx0XHRcdFx0XHQvKipcbiAgICAgICogQ2FsbGVkIHVwb24gY2xvc2VcbiAgICAgICpcbiAgICAgICogQGFwaSBwcml2YXRlXG4gICAgICAqL1xuXG5cdFx0XHRcdFx0V1MucHJvdG90eXBlLm9uQ2xvc2UgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHRUcmFuc3BvcnQucHJvdG90eXBlLm9uQ2xvc2UuY2FsbCh0aGlzKTtcblx0XHRcdFx0XHR9O1xuXG5cdFx0XHRcdFx0LyoqXG4gICAgICAqIENsb3NlcyBzb2NrZXQuXG4gICAgICAqXG4gICAgICAqIEBhcGkgcHJpdmF0ZVxuICAgICAgKi9cblxuXHRcdFx0XHRcdFdTLnByb3RvdHlwZS5kb0Nsb3NlID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0aWYgKHR5cGVvZiB0aGlzLndzICE9PSAndW5kZWZpbmVkJykge1xuXHRcdFx0XHRcdFx0XHR0aGlzLndzLmNsb3NlKCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fTtcblxuXHRcdFx0XHRcdC8qKlxuICAgICAgKiBHZW5lcmF0ZXMgdXJpIGZvciBjb25uZWN0aW9uLlxuICAgICAgKlxuICAgICAgKiBAYXBpIHByaXZhdGVcbiAgICAgICovXG5cblx0XHRcdFx0XHRXUy5wcm90b3R5cGUudXJpID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0dmFyIHF1ZXJ5ID0gdGhpcy5xdWVyeSB8fCB7fTtcblx0XHRcdFx0XHRcdHZhciBzY2hlbWEgPSB0aGlzLnNlY3VyZSA/ICd3c3MnIDogJ3dzJztcblx0XHRcdFx0XHRcdHZhciBwb3J0ID0gJyc7XG5cblx0XHRcdFx0XHRcdC8vIGF2b2lkIHBvcnQgaWYgZGVmYXVsdCBmb3Igc2NoZW1hXG5cdFx0XHRcdFx0XHRpZiAodGhpcy5wb3J0ICYmICgnd3NzJyA9PSBzY2hlbWEgJiYgdGhpcy5wb3J0ICE9IDQ0MyB8fCAnd3MnID09IHNjaGVtYSAmJiB0aGlzLnBvcnQgIT0gODApKSB7XG5cdFx0XHRcdFx0XHRcdHBvcnQgPSAnOicgKyB0aGlzLnBvcnQ7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdC8vIGFwcGVuZCB0aW1lc3RhbXAgdG8gVVJJXG5cdFx0XHRcdFx0XHRpZiAodGhpcy50aW1lc3RhbXBSZXF1ZXN0cykge1xuXHRcdFx0XHRcdFx0XHRxdWVyeVt0aGlzLnRpbWVzdGFtcFBhcmFtXSA9IHllYXN0KCk7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdC8vIGNvbW11bmljYXRlIGJpbmFyeSBzdXBwb3J0IGNhcGFiaWxpdGllc1xuXHRcdFx0XHRcdFx0aWYgKCF0aGlzLnN1cHBvcnRzQmluYXJ5KSB7XG5cdFx0XHRcdFx0XHRcdHF1ZXJ5LmI2NCA9IDE7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdHF1ZXJ5ID0gcGFyc2Vxcy5lbmNvZGUocXVlcnkpO1xuXG5cdFx0XHRcdFx0XHQvLyBwcmVwZW5kID8gdG8gcXVlcnlcblx0XHRcdFx0XHRcdGlmIChxdWVyeS5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdFx0cXVlcnkgPSAnPycgKyBxdWVyeTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0dmFyIGlwdjYgPSB0aGlzLmhvc3RuYW1lLmluZGV4T2YoJzonKSAhPT0gLTE7XG5cdFx0XHRcdFx0XHRyZXR1cm4gc2NoZW1hICsgJzovLycgKyAoaXB2NiA/ICdbJyArIHRoaXMuaG9zdG5hbWUgKyAnXScgOiB0aGlzLmhvc3RuYW1lKSArIHBvcnQgKyB0aGlzLnBhdGggKyBxdWVyeTtcblx0XHRcdFx0XHR9O1xuXG5cdFx0XHRcdFx0LyoqXG4gICAgICAqIEZlYXR1cmUgZGV0ZWN0aW9uIGZvciBXZWJTb2NrZXQuXG4gICAgICAqXG4gICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IHdoZXRoZXIgdGhpcyB0cmFuc3BvcnQgaXMgYXZhaWxhYmxlLlxuICAgICAgKiBAYXBpIHB1YmxpY1xuICAgICAgKi9cblxuXHRcdFx0XHRcdFdTLnByb3RvdHlwZS5jaGVjayA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdHJldHVybiAhIVdlYlNvY2tldCAmJiAhKCdfX2luaXRpYWxpemUnIGluIFdlYlNvY2tldCAmJiB0aGlzLm5hbWUgPT09IFdTLnByb3RvdHlwZS5uYW1lKTtcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHR9KS5jYWxsKHRoaXMsIHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiB0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDoge30pO1xuXHRcdFx0fSwge1xuXHRcdFx0XHRcIi4uL3RyYW5zcG9ydFwiOiA0LFxuXHRcdFx0XHRcImNvbXBvbmVudC1pbmhlcml0XCI6IDE2LFxuXHRcdFx0XHRcImRlYnVnXCI6IDE3LFxuXHRcdFx0XHRcImVuZ2luZS5pby1wYXJzZXJcIjogMTksXG5cdFx0XHRcdFwicGFyc2Vxc1wiOiAyNyxcblx0XHRcdFx0XCJ3c1wiOiB1bmRlZmluZWQsXG5cdFx0XHRcdFwieWVhc3RcIjogMzBcblx0XHRcdH1dLFxuXHRcdFx0MTA6IFtmdW5jdGlvbiAoX2RlcmVxXywgbW9kdWxlLCBleHBvcnRzKSB7XG5cdFx0XHRcdC8vIGJyb3dzZXIgc2hpbSBmb3IgeG1saHR0cHJlcXVlc3QgbW9kdWxlXG5cdFx0XHRcdHZhciBoYXNDT1JTID0gX2RlcmVxXygnaGFzLWNvcnMnKTtcblxuXHRcdFx0XHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChvcHRzKSB7XG5cdFx0XHRcdFx0dmFyIHhkb21haW4gPSBvcHRzLnhkb21haW47XG5cblx0XHRcdFx0XHQvLyBzY2hlbWUgbXVzdCBiZSBzYW1lIHdoZW4gdXNpZ24gWERvbWFpblJlcXVlc3Rcblx0XHRcdFx0XHQvLyBodHRwOi8vYmxvZ3MubXNkbi5jb20vYi9pZWludGVybmFscy9hcmNoaXZlLzIwMTAvMDUvMTMveGRvbWFpbnJlcXVlc3QtcmVzdHJpY3Rpb25zLWxpbWl0YXRpb25zLWFuZC13b3JrYXJvdW5kcy5hc3B4XG5cdFx0XHRcdFx0dmFyIHhzY2hlbWUgPSBvcHRzLnhzY2hlbWU7XG5cblx0XHRcdFx0XHQvLyBYRG9tYWluUmVxdWVzdCBoYXMgYSBmbG93IG9mIG5vdCBzZW5kaW5nIGNvb2tpZSwgdGhlcmVmb3JlIGl0IHNob3VsZCBiZSBkaXNhYmxlZCBhcyBhIGRlZmF1bHQuXG5cdFx0XHRcdFx0Ly8gaHR0cHM6Ly9naXRodWIuY29tL0F1dG9tYXR0aWMvZW5naW5lLmlvLWNsaWVudC9wdWxsLzIxN1xuXHRcdFx0XHRcdHZhciBlbmFibGVzWERSID0gb3B0cy5lbmFibGVzWERSO1xuXG5cdFx0XHRcdFx0Ly8gWE1MSHR0cFJlcXVlc3QgY2FuIGJlIGRpc2FibGVkIG9uIElFXG5cdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdGlmICgndW5kZWZpbmVkJyAhPSB0eXBlb2YgWE1MSHR0cFJlcXVlc3QgJiYgKCF4ZG9tYWluIHx8IGhhc0NPUlMpKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9IGNhdGNoIChlKSB7fVxuXG5cdFx0XHRcdFx0Ly8gVXNlIFhEb21haW5SZXF1ZXN0IGZvciBJRTggaWYgZW5hYmxlc1hEUiBpcyB0cnVlXG5cdFx0XHRcdFx0Ly8gYmVjYXVzZSBsb2FkaW5nIGJhciBrZWVwcyBmbGFzaGluZyB3aGVuIHVzaW5nIGpzb25wLXBvbGxpbmdcblx0XHRcdFx0XHQvLyBodHRwczovL2dpdGh1Yi5jb20veXVqaW9zYWthL3NvY2tlLmlvLWllOC1sb2FkaW5nLWV4YW1wbGVcblx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0aWYgKCd1bmRlZmluZWQnICE9IHR5cGVvZiBYRG9tYWluUmVxdWVzdCAmJiAheHNjaGVtZSAmJiBlbmFibGVzWERSKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBuZXcgWERvbWFpblJlcXVlc3QoKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9IGNhdGNoIChlKSB7fVxuXG5cdFx0XHRcdFx0aWYgKCF4ZG9tYWluKSB7XG5cdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gbmV3IEFjdGl2ZVhPYmplY3QoJ01pY3Jvc29mdC5YTUxIVFRQJyk7XG5cdFx0XHRcdFx0XHR9IGNhdGNoIChlKSB7fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fTtcblx0XHRcdH0sIHtcblx0XHRcdFx0XCJoYXMtY29yc1wiOiAyMlxuXHRcdFx0fV0sXG5cdFx0XHQxMTogW2Z1bmN0aW9uIChfZGVyZXFfLCBtb2R1bGUsIGV4cG9ydHMpIHtcblx0XHRcdFx0bW9kdWxlLmV4cG9ydHMgPSBhZnRlcjtcblxuXHRcdFx0XHRmdW5jdGlvbiBhZnRlcihjb3VudCwgY2FsbGJhY2ssIGVycl9jYikge1xuXHRcdFx0XHRcdHZhciBiYWlsID0gZmFsc2U7XG5cdFx0XHRcdFx0ZXJyX2NiID0gZXJyX2NiIHx8IG5vb3A7XG5cdFx0XHRcdFx0cHJveHkuY291bnQgPSBjb3VudDtcblxuXHRcdFx0XHRcdHJldHVybiBjb3VudCA9PT0gMCA/IGNhbGxiYWNrKCkgOiBwcm94eTtcblxuXHRcdFx0XHRcdGZ1bmN0aW9uIHByb3h5KGVyciwgcmVzdWx0KSB7XG5cdFx0XHRcdFx0XHRpZiAocHJveHkuY291bnQgPD0gMCkge1xuXHRcdFx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ2FmdGVyIGNhbGxlZCB0b28gbWFueSB0aW1lcycpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0LS1wcm94eS5jb3VudDtcblxuXHRcdFx0XHRcdFx0Ly8gYWZ0ZXIgZmlyc3QgZXJyb3IsIHJlc3QgYXJlIHBhc3NlZCB0byBlcnJfY2Jcblx0XHRcdFx0XHRcdGlmIChlcnIpIHtcblx0XHRcdFx0XHRcdFx0YmFpbCA9IHRydWU7XG5cdFx0XHRcdFx0XHRcdGNhbGxiYWNrKGVycik7XG5cdFx0XHRcdFx0XHRcdC8vIGZ1dHVyZSBlcnJvciBjYWxsYmFja3Mgd2lsbCBnbyB0byBlcnJvciBoYW5kbGVyXG5cdFx0XHRcdFx0XHRcdGNhbGxiYWNrID0gZXJyX2NiO1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmIChwcm94eS5jb3VudCA9PT0gMCAmJiAhYmFpbCkge1xuXHRcdFx0XHRcdFx0XHRjYWxsYmFjayhudWxsLCByZXN1bHQpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdGZ1bmN0aW9uIG5vb3AoKSB7fVxuXHRcdFx0fSwge31dLFxuXHRcdFx0MTI6IFtmdW5jdGlvbiAoX2RlcmVxXywgbW9kdWxlLCBleHBvcnRzKSB7XG5cdFx0XHRcdC8qKlxuICAgICAqIEFuIGFic3RyYWN0aW9uIGZvciBzbGljaW5nIGFuIGFycmF5YnVmZmVyIGV2ZW4gd2hlblxuICAgICAqIEFycmF5QnVmZmVyLnByb3RvdHlwZS5zbGljZSBpcyBub3Qgc3VwcG9ydGVkXG4gICAgICpcbiAgICAgKiBAYXBpIHB1YmxpY1xuICAgICAqL1xuXG5cdFx0XHRcdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGFycmF5YnVmZmVyLCBzdGFydCwgZW5kKSB7XG5cdFx0XHRcdFx0dmFyIGJ5dGVzID0gYXJyYXlidWZmZXIuYnl0ZUxlbmd0aDtcblx0XHRcdFx0XHRzdGFydCA9IHN0YXJ0IHx8IDA7XG5cdFx0XHRcdFx0ZW5kID0gZW5kIHx8IGJ5dGVzO1xuXG5cdFx0XHRcdFx0aWYgKGFycmF5YnVmZmVyLnNsaWNlKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gYXJyYXlidWZmZXIuc2xpY2Uoc3RhcnQsIGVuZCk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKHN0YXJ0IDwgMCkge1xuXHRcdFx0XHRcdFx0c3RhcnQgKz0gYnl0ZXM7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmIChlbmQgPCAwKSB7XG5cdFx0XHRcdFx0XHRlbmQgKz0gYnl0ZXM7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmIChlbmQgPiBieXRlcykge1xuXHRcdFx0XHRcdFx0ZW5kID0gYnl0ZXM7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKHN0YXJ0ID49IGJ5dGVzIHx8IHN0YXJ0ID49IGVuZCB8fCBieXRlcyA9PT0gMCkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIG5ldyBBcnJheUJ1ZmZlcigwKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHR2YXIgYWJ2ID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlidWZmZXIpO1xuXHRcdFx0XHRcdHZhciByZXN1bHQgPSBuZXcgVWludDhBcnJheShlbmQgLSBzdGFydCk7XG5cdFx0XHRcdFx0Zm9yICh2YXIgaSA9IHN0YXJ0LCBpaSA9IDA7IGkgPCBlbmQ7IGkrKywgaWkrKykge1xuXHRcdFx0XHRcdFx0cmVzdWx0W2lpXSA9IGFidltpXTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIHJlc3VsdC5idWZmZXI7XG5cdFx0XHRcdH07XG5cdFx0XHR9LCB7fV0sXG5cdFx0XHQxMzogW2Z1bmN0aW9uIChfZGVyZXFfLCBtb2R1bGUsIGV4cG9ydHMpIHtcblx0XHRcdFx0LypcbiAgICAgKiBiYXNlNjQtYXJyYXlidWZmZXJcbiAgICAgKiBodHRwczovL2dpdGh1Yi5jb20vbmlrbGFzdmgvYmFzZTY0LWFycmF5YnVmZmVyXG4gICAgICpcbiAgICAgKiBDb3B5cmlnaHQgKGMpIDIwMTIgTmlrbGFzIHZvbiBIZXJ0emVuXG4gICAgICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuICAgICAqL1xuXHRcdFx0XHQoZnVuY3Rpb24gKGNoYXJzKSB7XG5cdFx0XHRcdFx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0XHRcdFx0XHRleHBvcnRzLmVuY29kZSA9IGZ1bmN0aW9uIChhcnJheWJ1ZmZlcikge1xuXHRcdFx0XHRcdFx0dmFyIGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlidWZmZXIpLFxuXHRcdFx0XHRcdFx0ICAgIGksXG5cdFx0XHRcdFx0XHQgICAgbGVuID0gYnl0ZXMubGVuZ3RoLFxuXHRcdFx0XHRcdFx0ICAgIGJhc2U2NCA9IFwiXCI7XG5cblx0XHRcdFx0XHRcdGZvciAoaSA9IDA7IGkgPCBsZW47IGkgKz0gMykge1xuXHRcdFx0XHRcdFx0XHRiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaV0gPj4gMl07XG5cdFx0XHRcdFx0XHRcdGJhc2U2NCArPSBjaGFyc1soYnl0ZXNbaV0gJiAzKSA8PCA0IHwgYnl0ZXNbaSArIDFdID4+IDRdO1xuXHRcdFx0XHRcdFx0XHRiYXNlNjQgKz0gY2hhcnNbKGJ5dGVzW2kgKyAxXSAmIDE1KSA8PCAyIHwgYnl0ZXNbaSArIDJdID4+IDZdO1xuXHRcdFx0XHRcdFx0XHRiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaSArIDJdICYgNjNdO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRpZiAobGVuICUgMyA9PT0gMikge1xuXHRcdFx0XHRcdFx0XHRiYXNlNjQgPSBiYXNlNjQuc3Vic3RyaW5nKDAsIGJhc2U2NC5sZW5ndGggLSAxKSArIFwiPVwiO1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7XG5cdFx0XHRcdFx0XHRcdGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgXCI9PVwiO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRyZXR1cm4gYmFzZTY0O1xuXHRcdFx0XHRcdH07XG5cblx0XHRcdFx0XHRleHBvcnRzLmRlY29kZSA9IGZ1bmN0aW9uIChiYXNlNjQpIHtcblx0XHRcdFx0XHRcdHZhciBidWZmZXJMZW5ndGggPSBiYXNlNjQubGVuZ3RoICogMC43NSxcblx0XHRcdFx0XHRcdCAgICBsZW4gPSBiYXNlNjQubGVuZ3RoLFxuXHRcdFx0XHRcdFx0ICAgIGksXG5cdFx0XHRcdFx0XHQgICAgcCA9IDAsXG5cdFx0XHRcdFx0XHQgICAgZW5jb2RlZDEsXG5cdFx0XHRcdFx0XHQgICAgZW5jb2RlZDIsXG5cdFx0XHRcdFx0XHQgICAgZW5jb2RlZDMsXG5cdFx0XHRcdFx0XHQgICAgZW5jb2RlZDQ7XG5cblx0XHRcdFx0XHRcdGlmIChiYXNlNjRbYmFzZTY0Lmxlbmd0aCAtIDFdID09PSBcIj1cIikge1xuXHRcdFx0XHRcdFx0XHRidWZmZXJMZW5ndGgtLTtcblx0XHRcdFx0XHRcdFx0aWYgKGJhc2U2NFtiYXNlNjQubGVuZ3RoIC0gMl0gPT09IFwiPVwiKSB7XG5cdFx0XHRcdFx0XHRcdFx0YnVmZmVyTGVuZ3RoLS07XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0dmFyIGFycmF5YnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKGJ1ZmZlckxlbmd0aCksXG5cdFx0XHRcdFx0XHQgICAgYnl0ZXMgPSBuZXcgVWludDhBcnJheShhcnJheWJ1ZmZlcik7XG5cblx0XHRcdFx0XHRcdGZvciAoaSA9IDA7IGkgPCBsZW47IGkgKz0gNCkge1xuXHRcdFx0XHRcdFx0XHRlbmNvZGVkMSA9IGNoYXJzLmluZGV4T2YoYmFzZTY0W2ldKTtcblx0XHRcdFx0XHRcdFx0ZW5jb2RlZDIgPSBjaGFycy5pbmRleE9mKGJhc2U2NFtpICsgMV0pO1xuXHRcdFx0XHRcdFx0XHRlbmNvZGVkMyA9IGNoYXJzLmluZGV4T2YoYmFzZTY0W2kgKyAyXSk7XG5cdFx0XHRcdFx0XHRcdGVuY29kZWQ0ID0gY2hhcnMuaW5kZXhPZihiYXNlNjRbaSArIDNdKTtcblxuXHRcdFx0XHRcdFx0XHRieXRlc1twKytdID0gZW5jb2RlZDEgPDwgMiB8IGVuY29kZWQyID4+IDQ7XG5cdFx0XHRcdFx0XHRcdGJ5dGVzW3ArK10gPSAoZW5jb2RlZDIgJiAxNSkgPDwgNCB8IGVuY29kZWQzID4+IDI7XG5cdFx0XHRcdFx0XHRcdGJ5dGVzW3ArK10gPSAoZW5jb2RlZDMgJiAzKSA8PCA2IHwgZW5jb2RlZDQgJiA2Mztcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0cmV0dXJuIGFycmF5YnVmZmVyO1xuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH0pKFwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrL1wiKTtcblx0XHRcdH0sIHt9XSxcblx0XHRcdDE0OiBbZnVuY3Rpb24gKF9kZXJlcV8sIG1vZHVsZSwgZXhwb3J0cykge1xuXHRcdFx0XHQoZnVuY3Rpb24gKGdsb2JhbCkge1xuXHRcdFx0XHRcdC8qKlxuICAgICAgKiBDcmVhdGUgYSBibG9iIGJ1aWxkZXIgZXZlbiB3aGVuIHZlbmRvciBwcmVmaXhlcyBleGlzdFxuICAgICAgKi9cblxuXHRcdFx0XHRcdHZhciBCbG9iQnVpbGRlciA9IGdsb2JhbC5CbG9iQnVpbGRlciB8fCBnbG9iYWwuV2ViS2l0QmxvYkJ1aWxkZXIgfHwgZ2xvYmFsLk1TQmxvYkJ1aWxkZXIgfHwgZ2xvYmFsLk1vekJsb2JCdWlsZGVyO1xuXG5cdFx0XHRcdFx0LyoqXG4gICAgICAqIENoZWNrIGlmIEJsb2IgY29uc3RydWN0b3IgaXMgc3VwcG9ydGVkXG4gICAgICAqL1xuXG5cdFx0XHRcdFx0dmFyIGJsb2JTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHR2YXIgYSA9IG5ldyBCbG9iKFsnaGknXSk7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBhLnNpemUgPT09IDI7XG5cdFx0XHRcdFx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KCk7XG5cblx0XHRcdFx0XHQvKipcbiAgICAgICogQ2hlY2sgaWYgQmxvYiBjb25zdHJ1Y3RvciBzdXBwb3J0cyBBcnJheUJ1ZmZlclZpZXdzXG4gICAgICAqIEZhaWxzIGluIFNhZmFyaSA2LCBzbyB3ZSBuZWVkIHRvIG1hcCB0byBBcnJheUJ1ZmZlcnMgdGhlcmUuXG4gICAgICAqL1xuXG5cdFx0XHRcdFx0dmFyIGJsb2JTdXBwb3J0c0FycmF5QnVmZmVyVmlldyA9IGJsb2JTdXBwb3J0ZWQgJiYgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0dmFyIGIgPSBuZXcgQmxvYihbbmV3IFVpbnQ4QXJyYXkoWzEsIDJdKV0pO1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gYi5zaXplID09PSAyO1xuXHRcdFx0XHRcdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSgpO1xuXG5cdFx0XHRcdFx0LyoqXG4gICAgICAqIENoZWNrIGlmIEJsb2JCdWlsZGVyIGlzIHN1cHBvcnRlZFxuICAgICAgKi9cblxuXHRcdFx0XHRcdHZhciBibG9iQnVpbGRlclN1cHBvcnRlZCA9IEJsb2JCdWlsZGVyICYmIEJsb2JCdWlsZGVyLnByb3RvdHlwZS5hcHBlbmQgJiYgQmxvYkJ1aWxkZXIucHJvdG90eXBlLmdldEJsb2I7XG5cblx0XHRcdFx0XHQvKipcbiAgICAgICogSGVscGVyIGZ1bmN0aW9uIHRoYXQgbWFwcyBBcnJheUJ1ZmZlclZpZXdzIHRvIEFycmF5QnVmZmVyc1xuICAgICAgKiBVc2VkIGJ5IEJsb2JCdWlsZGVyIGNvbnN0cnVjdG9yIGFuZCBvbGQgYnJvd3NlcnMgdGhhdCBkaWRuJ3RcbiAgICAgICogc3VwcG9ydCBpdCBpbiB0aGUgQmxvYiBjb25zdHJ1Y3Rvci5cbiAgICAgICovXG5cblx0XHRcdFx0XHRmdW5jdGlvbiBtYXBBcnJheUJ1ZmZlclZpZXdzKGFyeSkge1xuXHRcdFx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBhcnkubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHRcdFx0dmFyIGNodW5rID0gYXJ5W2ldO1xuXHRcdFx0XHRcdFx0XHRpZiAoY2h1bmsuYnVmZmVyIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcblx0XHRcdFx0XHRcdFx0XHR2YXIgYnVmID0gY2h1bmsuYnVmZmVyO1xuXG5cdFx0XHRcdFx0XHRcdFx0Ly8gaWYgdGhpcyBpcyBhIHN1YmFycmF5LCBtYWtlIGEgY29weSBzbyB3ZSBvbmx5XG5cdFx0XHRcdFx0XHRcdFx0Ly8gaW5jbHVkZSB0aGUgc3ViYXJyYXkgcmVnaW9uIGZyb20gdGhlIHVuZGVybHlpbmcgYnVmZmVyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKGNodW5rLmJ5dGVMZW5ndGggIT09IGJ1Zi5ieXRlTGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHR2YXIgY29weSA9IG5ldyBVaW50OEFycmF5KGNodW5rLmJ5dGVMZW5ndGgpO1xuXHRcdFx0XHRcdFx0XHRcdFx0Y29weS5zZXQobmV3IFVpbnQ4QXJyYXkoYnVmLCBjaHVuay5ieXRlT2Zmc2V0LCBjaHVuay5ieXRlTGVuZ3RoKSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRidWYgPSBjb3B5LmJ1ZmZlcjtcblx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHRhcnlbaV0gPSBidWY7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRmdW5jdGlvbiBCbG9iQnVpbGRlckNvbnN0cnVjdG9yKGFyeSwgb3B0aW9ucykge1xuXHRcdFx0XHRcdFx0b3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cblx0XHRcdFx0XHRcdHZhciBiYiA9IG5ldyBCbG9iQnVpbGRlcigpO1xuXHRcdFx0XHRcdFx0bWFwQXJyYXlCdWZmZXJWaWV3cyhhcnkpO1xuXG5cdFx0XHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGFyeS5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdFx0XHRiYi5hcHBlbmQoYXJ5W2ldKTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0cmV0dXJuIG9wdGlvbnMudHlwZSA/IGJiLmdldEJsb2Iob3B0aW9ucy50eXBlKSA6IGJiLmdldEJsb2IoKTtcblx0XHRcdFx0XHR9O1xuXG5cdFx0XHRcdFx0ZnVuY3Rpb24gQmxvYkNvbnN0cnVjdG9yKGFyeSwgb3B0aW9ucykge1xuXHRcdFx0XHRcdFx0bWFwQXJyYXlCdWZmZXJWaWV3cyhhcnkpO1xuXHRcdFx0XHRcdFx0cmV0dXJuIG5ldyBCbG9iKGFyeSwgb3B0aW9ucyB8fCB7fSk7XG5cdFx0XHRcdFx0fTtcblxuXHRcdFx0XHRcdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0aWYgKGJsb2JTdXBwb3J0ZWQpIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGJsb2JTdXBwb3J0c0FycmF5QnVmZmVyVmlldyA/IGdsb2JhbC5CbG9iIDogQmxvYkNvbnN0cnVjdG9yO1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmIChibG9iQnVpbGRlclN1cHBvcnRlZCkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gQmxvYkJ1aWxkZXJDb25zdHJ1Y3Rvcjtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiB1bmRlZmluZWQ7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSgpO1xuXHRcdFx0XHR9KS5jYWxsKHRoaXMsIHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiB0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDoge30pO1xuXHRcdFx0fSwge31dLFxuXHRcdFx0MTU6IFtmdW5jdGlvbiAoX2RlcmVxXywgbW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XHRcdFx0LyoqXG4gICAgICogRXhwb3NlIGBFbWl0dGVyYC5cbiAgICAgKi9cblxuXHRcdFx0XHRtb2R1bGUuZXhwb3J0cyA9IEVtaXR0ZXI7XG5cblx0XHRcdFx0LyoqXG4gICAgICogSW5pdGlhbGl6ZSBhIG5ldyBgRW1pdHRlcmAuXG4gICAgICpcbiAgICAgKiBAYXBpIHB1YmxpY1xuICAgICAqL1xuXG5cdFx0XHRcdGZ1bmN0aW9uIEVtaXR0ZXIob2JqKSB7XG5cdFx0XHRcdFx0aWYgKG9iaikgcmV0dXJuIG1peGluKG9iaik7XG5cdFx0XHRcdH07XG5cblx0XHRcdFx0LyoqXG4gICAgICogTWl4aW4gdGhlIGVtaXR0ZXIgcHJvcGVydGllcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAgICogQGFwaSBwcml2YXRlXG4gICAgICovXG5cblx0XHRcdFx0ZnVuY3Rpb24gbWl4aW4ob2JqKSB7XG5cdFx0XHRcdFx0Zm9yICh2YXIga2V5IGluIEVtaXR0ZXIucHJvdG90eXBlKSB7XG5cdFx0XHRcdFx0XHRvYmpba2V5XSA9IEVtaXR0ZXIucHJvdG90eXBlW2tleV07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiBvYmo7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvKipcbiAgICAgKiBMaXN0ZW4gb24gdGhlIGdpdmVuIGBldmVudGAgd2l0aCBgZm5gLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAgICAgKiBAcmV0dXJuIHtFbWl0dGVyfVxuICAgICAqIEBhcGkgcHVibGljXG4gICAgICovXG5cblx0XHRcdFx0RW1pdHRlci5wcm90b3R5cGUub24gPSBFbWl0dGVyLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKGV2ZW50LCBmbikge1xuXHRcdFx0XHRcdHRoaXMuX2NhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrcyB8fCB7fTtcblx0XHRcdFx0XHQodGhpcy5fY2FsbGJhY2tzW2V2ZW50XSA9IHRoaXMuX2NhbGxiYWNrc1tldmVudF0gfHwgW10pLnB1c2goZm4pO1xuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdC8qKlxuICAgICAqIEFkZHMgYW4gYGV2ZW50YCBsaXN0ZW5lciB0aGF0IHdpbGwgYmUgaW52b2tlZCBhIHNpbmdsZVxuICAgICAqIHRpbWUgdGhlbiBhdXRvbWF0aWNhbGx5IHJlbW92ZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICAgICAqIEByZXR1cm4ge0VtaXR0ZXJ9XG4gICAgICogQGFwaSBwdWJsaWNcbiAgICAgKi9cblxuXHRcdFx0XHRFbWl0dGVyLnByb3RvdHlwZS5vbmNlID0gZnVuY3Rpb24gKGV2ZW50LCBmbikge1xuXHRcdFx0XHRcdHZhciBzZWxmID0gdGhpcztcblx0XHRcdFx0XHR0aGlzLl9jYWxsYmFja3MgPSB0aGlzLl9jYWxsYmFja3MgfHwge307XG5cblx0XHRcdFx0XHRmdW5jdGlvbiBvbigpIHtcblx0XHRcdFx0XHRcdHNlbGYub2ZmKGV2ZW50LCBvbik7XG5cdFx0XHRcdFx0XHRmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdG9uLmZuID0gZm47XG5cdFx0XHRcdFx0dGhpcy5vbihldmVudCwgb24pO1xuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdC8qKlxuICAgICAqIFJlbW92ZSB0aGUgZ2l2ZW4gY2FsbGJhY2sgZm9yIGBldmVudGAgb3IgYWxsXG4gICAgICogcmVnaXN0ZXJlZCBjYWxsYmFja3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICAgICAqIEByZXR1cm4ge0VtaXR0ZXJ9XG4gICAgICogQGFwaSBwdWJsaWNcbiAgICAgKi9cblxuXHRcdFx0XHRFbWl0dGVyLnByb3RvdHlwZS5vZmYgPSBFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lciA9IEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycyA9IEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoZXZlbnQsIGZuKSB7XG5cdFx0XHRcdFx0dGhpcy5fY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzIHx8IHt9O1xuXG5cdFx0XHRcdFx0Ly8gYWxsXG5cdFx0XHRcdFx0aWYgKDAgPT0gYXJndW1lbnRzLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0dGhpcy5fY2FsbGJhY2tzID0ge307XG5cdFx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBzcGVjaWZpYyBldmVudFxuXHRcdFx0XHRcdHZhciBjYWxsYmFja3MgPSB0aGlzLl9jYWxsYmFja3NbZXZlbnRdO1xuXHRcdFx0XHRcdGlmICghY2FsbGJhY2tzKSByZXR1cm4gdGhpcztcblxuXHRcdFx0XHRcdC8vIHJlbW92ZSBhbGwgaGFuZGxlcnNcblx0XHRcdFx0XHRpZiAoMSA9PSBhcmd1bWVudHMubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHRkZWxldGUgdGhpcy5fY2FsbGJhY2tzW2V2ZW50XTtcblx0XHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIHJlbW92ZSBzcGVjaWZpYyBoYW5kbGVyXG5cdFx0XHRcdFx0dmFyIGNiO1xuXHRcdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgY2FsbGJhY2tzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0XHRjYiA9IGNhbGxiYWNrc1tpXTtcblx0XHRcdFx0XHRcdGlmIChjYiA9PT0gZm4gfHwgY2IuZm4gPT09IGZuKSB7XG5cdFx0XHRcdFx0XHRcdGNhbGxiYWNrcy5zcGxpY2UoaSwgMSk7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdFx0fTtcblxuXHRcdFx0XHQvKipcbiAgICAgKiBFbWl0IGBldmVudGAgd2l0aCB0aGUgZ2l2ZW4gYXJncy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICAgICAqIEBwYXJhbSB7TWl4ZWR9IC4uLlxuICAgICAqIEByZXR1cm4ge0VtaXR0ZXJ9XG4gICAgICovXG5cblx0XHRcdFx0RW1pdHRlci5wcm90b3R5cGUuZW1pdCA9IGZ1bmN0aW9uIChldmVudCkge1xuXHRcdFx0XHRcdHRoaXMuX2NhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrcyB8fCB7fTtcblx0XHRcdFx0XHR2YXIgYXJncyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSxcblx0XHRcdFx0XHQgICAgY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzW2V2ZW50XTtcblxuXHRcdFx0XHRcdGlmIChjYWxsYmFja3MpIHtcblx0XHRcdFx0XHRcdGNhbGxiYWNrcyA9IGNhbGxiYWNrcy5zbGljZSgwKTtcblx0XHRcdFx0XHRcdGZvciAodmFyIGkgPSAwLCBsZW4gPSBjYWxsYmFja3MubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcblx0XHRcdFx0XHRcdFx0Y2FsbGJhY2tzW2ldLmFwcGx5KHRoaXMsIGFyZ3MpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdC8qKlxuICAgICAqIFJldHVybiBhcnJheSBvZiBjYWxsYmFja3MgZm9yIGBldmVudGAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAgICAgKiBAcmV0dXJuIHtBcnJheX1cbiAgICAgKiBAYXBpIHB1YmxpY1xuICAgICAqL1xuXG5cdFx0XHRcdEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVycyA9IGZ1bmN0aW9uIChldmVudCkge1xuXHRcdFx0XHRcdHRoaXMuX2NhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrcyB8fCB7fTtcblx0XHRcdFx0XHRyZXR1cm4gdGhpcy5fY2FsbGJhY2tzW2V2ZW50XSB8fCBbXTtcblx0XHRcdFx0fTtcblxuXHRcdFx0XHQvKipcbiAgICAgKiBDaGVjayBpZiB0aGlzIGVtaXR0ZXIgaGFzIGBldmVudGAgaGFuZGxlcnMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgICAqIEBhcGkgcHVibGljXG4gICAgICovXG5cblx0XHRcdFx0RW1pdHRlci5wcm90b3R5cGUuaGFzTGlzdGVuZXJzID0gZnVuY3Rpb24gKGV2ZW50KSB7XG5cdFx0XHRcdFx0cmV0dXJuICEhdGhpcy5saXN0ZW5lcnMoZXZlbnQpLmxlbmd0aDtcblx0XHRcdFx0fTtcblx0XHRcdH0sIHt9XSxcblx0XHRcdDE2OiBbZnVuY3Rpb24gKF9kZXJlcV8sIG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFx0XHRcdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGEsIGIpIHtcblx0XHRcdFx0XHR2YXIgZm4gPSBmdW5jdGlvbiBmbigpIHt9O1xuXHRcdFx0XHRcdGZuLnByb3RvdHlwZSA9IGIucHJvdG90eXBlO1xuXHRcdFx0XHRcdGEucHJvdG90eXBlID0gbmV3IGZuKCk7XG5cdFx0XHRcdFx0YS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBhO1xuXHRcdFx0XHR9O1xuXHRcdFx0fSwge31dLFxuXHRcdFx0MTc6IFtmdW5jdGlvbiAoX2RlcmVxXywgbW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XHRcdFx0LyoqXG4gICAgICogVGhpcyBpcyB0aGUgd2ViIGJyb3dzZXIgaW1wbGVtZW50YXRpb24gb2YgYGRlYnVnKClgLlxuICAgICAqXG4gICAgICogRXhwb3NlIGBkZWJ1ZygpYCBhcyB0aGUgbW9kdWxlLlxuICAgICAqL1xuXG5cdFx0XHRcdGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IF9kZXJlcV8oJy4vZGVidWcnKTtcblx0XHRcdFx0ZXhwb3J0cy5sb2cgPSBsb2c7XG5cdFx0XHRcdGV4cG9ydHMuZm9ybWF0QXJncyA9IGZvcm1hdEFyZ3M7XG5cdFx0XHRcdGV4cG9ydHMuc2F2ZSA9IHNhdmU7XG5cdFx0XHRcdGV4cG9ydHMubG9hZCA9IGxvYWQ7XG5cdFx0XHRcdGV4cG9ydHMudXNlQ29sb3JzID0gdXNlQ29sb3JzO1xuXHRcdFx0XHRleHBvcnRzLnN0b3JhZ2UgPSAndW5kZWZpbmVkJyAhPSB0eXBlb2YgY2hyb21lICYmICd1bmRlZmluZWQnICE9IHR5cGVvZiBjaHJvbWUuc3RvcmFnZSA/IGNocm9tZS5zdG9yYWdlLmxvY2FsIDogbG9jYWxzdG9yYWdlKCk7XG5cblx0XHRcdFx0LyoqXG4gICAgICogQ29sb3JzLlxuICAgICAqL1xuXG5cdFx0XHRcdGV4cG9ydHMuY29sb3JzID0gWydsaWdodHNlYWdyZWVuJywgJ2ZvcmVzdGdyZWVuJywgJ2dvbGRlbnJvZCcsICdkb2RnZXJibHVlJywgJ2RhcmtvcmNoaWQnLCAnY3JpbXNvbiddO1xuXG5cdFx0XHRcdC8qKlxuICAgICAqIEN1cnJlbnRseSBvbmx5IFdlYktpdC1iYXNlZCBXZWIgSW5zcGVjdG9ycywgRmlyZWZveCA+PSB2MzEsXG4gICAgICogYW5kIHRoZSBGaXJlYnVnIGV4dGVuc2lvbiAoYW55IEZpcmVmb3ggdmVyc2lvbikgYXJlIGtub3duXG4gICAgICogdG8gc3VwcG9ydCBcIiVjXCIgQ1NTIGN1c3RvbWl6YXRpb25zLlxuICAgICAqXG4gICAgICogVE9ETzogYWRkIGEgYGxvY2FsU3RvcmFnZWAgdmFyaWFibGUgdG8gZXhwbGljaXRseSBlbmFibGUvZGlzYWJsZSBjb2xvcnNcbiAgICAgKi9cblxuXHRcdFx0XHRmdW5jdGlvbiB1c2VDb2xvcnMoKSB7XG5cdFx0XHRcdFx0Ly8gaXMgd2Via2l0PyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xNjQ1OTYwNi8zNzY3NzNcblx0XHRcdFx0XHRyZXR1cm4gJ1dlYmtpdEFwcGVhcmFuY2UnIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZSB8fFxuXHRcdFx0XHRcdC8vIGlzIGZpcmVidWc/IGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzM5ODEyMC8zNzY3NzNcblx0XHRcdFx0XHR3aW5kb3cuY29uc29sZSAmJiAoY29uc29sZS5maXJlYnVnIHx8IGNvbnNvbGUuZXhjZXB0aW9uICYmIGNvbnNvbGUudGFibGUpIHx8XG5cdFx0XHRcdFx0Ly8gaXMgZmlyZWZveCA+PSB2MzE/XG5cdFx0XHRcdFx0Ly8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9Ub29scy9XZWJfQ29uc29sZSNTdHlsaW5nX21lc3NhZ2VzXG5cdFx0XHRcdFx0bmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLm1hdGNoKC9maXJlZm94XFwvKFxcZCspLykgJiYgcGFyc2VJbnQoUmVnRXhwLiQxLCAxMCkgPj0gMzE7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvKipcbiAgICAgKiBNYXAgJWogdG8gYEpTT04uc3RyaW5naWZ5KClgLCBzaW5jZSBubyBXZWIgSW5zcGVjdG9ycyBkbyB0aGF0IGJ5IGRlZmF1bHQuXG4gICAgICovXG5cblx0XHRcdFx0ZXhwb3J0cy5mb3JtYXR0ZXJzLmogPSBmdW5jdGlvbiAodikge1xuXHRcdFx0XHRcdHJldHVybiBKU09OLnN0cmluZ2lmeSh2KTtcblx0XHRcdFx0fTtcblxuXHRcdFx0XHQvKipcbiAgICAgKiBDb2xvcml6ZSBsb2cgYXJndW1lbnRzIGlmIGVuYWJsZWQuXG4gICAgICpcbiAgICAgKiBAYXBpIHB1YmxpY1xuICAgICAqL1xuXG5cdFx0XHRcdGZ1bmN0aW9uIGZvcm1hdEFyZ3MoKSB7XG5cdFx0XHRcdFx0dmFyIGFyZ3MgPSBhcmd1bWVudHM7XG5cdFx0XHRcdFx0dmFyIHVzZUNvbG9ycyA9IHRoaXMudXNlQ29sb3JzO1xuXG5cdFx0XHRcdFx0YXJnc1swXSA9ICh1c2VDb2xvcnMgPyAnJWMnIDogJycpICsgdGhpcy5uYW1lc3BhY2UgKyAodXNlQ29sb3JzID8gJyAlYycgOiAnICcpICsgYXJnc1swXSArICh1c2VDb2xvcnMgPyAnJWMgJyA6ICcgJykgKyAnKycgKyBleHBvcnRzLmh1bWFuaXplKHRoaXMuZGlmZik7XG5cblx0XHRcdFx0XHRpZiAoIXVzZUNvbG9ycykgcmV0dXJuIGFyZ3M7XG5cblx0XHRcdFx0XHR2YXIgYyA9ICdjb2xvcjogJyArIHRoaXMuY29sb3I7XG5cdFx0XHRcdFx0YXJncyA9IFthcmdzWzBdLCBjLCAnY29sb3I6IGluaGVyaXQnXS5jb25jYXQoQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJncywgMSkpO1xuXG5cdFx0XHRcdFx0Ly8gdGhlIGZpbmFsIFwiJWNcIiBpcyBzb21ld2hhdCB0cmlja3ksIGJlY2F1c2UgdGhlcmUgY291bGQgYmUgb3RoZXJcblx0XHRcdFx0XHQvLyBhcmd1bWVudHMgcGFzc2VkIGVpdGhlciBiZWZvcmUgb3IgYWZ0ZXIgdGhlICVjLCBzbyB3ZSBuZWVkIHRvXG5cdFx0XHRcdFx0Ly8gZmlndXJlIG91dCB0aGUgY29ycmVjdCBpbmRleCB0byBpbnNlcnQgdGhlIENTUyBpbnRvXG5cdFx0XHRcdFx0dmFyIGluZGV4ID0gMDtcblx0XHRcdFx0XHR2YXIgbGFzdEMgPSAwO1xuXHRcdFx0XHRcdGFyZ3NbMF0ucmVwbGFjZSgvJVthLXolXS9nLCBmdW5jdGlvbiAobWF0Y2gpIHtcblx0XHRcdFx0XHRcdGlmICgnJSUnID09PSBtYXRjaCkgcmV0dXJuO1xuXHRcdFx0XHRcdFx0aW5kZXgrKztcblx0XHRcdFx0XHRcdGlmICgnJWMnID09PSBtYXRjaCkge1xuXHRcdFx0XHRcdFx0XHQvLyB3ZSBvbmx5IGFyZSBpbnRlcmVzdGVkIGluIHRoZSAqbGFzdCogJWNcblx0XHRcdFx0XHRcdFx0Ly8gKHRoZSB1c2VyIG1heSBoYXZlIHByb3ZpZGVkIHRoZWlyIG93bilcblx0XHRcdFx0XHRcdFx0bGFzdEMgPSBpbmRleDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdGFyZ3Muc3BsaWNlKGxhc3RDLCAwLCBjKTtcblx0XHRcdFx0XHRyZXR1cm4gYXJncztcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8qKlxuICAgICAqIEludm9rZXMgYGNvbnNvbGUubG9nKClgIHdoZW4gYXZhaWxhYmxlLlxuICAgICAqIE5vLW9wIHdoZW4gYGNvbnNvbGUubG9nYCBpcyBub3QgYSBcImZ1bmN0aW9uXCIuXG4gICAgICpcbiAgICAgKiBAYXBpIHB1YmxpY1xuICAgICAqL1xuXG5cdFx0XHRcdGZ1bmN0aW9uIGxvZygpIHtcblx0XHRcdFx0XHQvLyB0aGlzIGhhY2tlcnkgaXMgcmVxdWlyZWQgZm9yIElFOC85LCB3aGVyZVxuXHRcdFx0XHRcdC8vIHRoZSBgY29uc29sZS5sb2dgIGZ1bmN0aW9uIGRvZXNuJ3QgaGF2ZSAnYXBwbHknXG5cdFx0XHRcdFx0cmV0dXJuICdvYmplY3QnID09PSAodHlwZW9mIGNvbnNvbGUgPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZihjb25zb2xlKSkgJiYgY29uc29sZS5sb2cgJiYgRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5LmNhbGwoY29uc29sZS5sb2csIGNvbnNvbGUsIGFyZ3VtZW50cyk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvKipcbiAgICAgKiBTYXZlIGBuYW1lc3BhY2VzYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lc3BhY2VzXG4gICAgICogQGFwaSBwcml2YXRlXG4gICAgICovXG5cblx0XHRcdFx0ZnVuY3Rpb24gc2F2ZShuYW1lc3BhY2VzKSB7XG5cdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdGlmIChudWxsID09IG5hbWVzcGFjZXMpIHtcblx0XHRcdFx0XHRcdFx0ZXhwb3J0cy5zdG9yYWdlLnJlbW92ZUl0ZW0oJ2RlYnVnJyk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRleHBvcnRzLnN0b3JhZ2UuZGVidWcgPSBuYW1lc3BhY2VzO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0gY2F0Y2ggKGUpIHt9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvKipcbiAgICAgKiBMb2FkIGBuYW1lc3BhY2VzYC5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge1N0cmluZ30gcmV0dXJucyB0aGUgcHJldmlvdXNseSBwZXJzaXN0ZWQgZGVidWcgbW9kZXNcbiAgICAgKiBAYXBpIHByaXZhdGVcbiAgICAgKi9cblxuXHRcdFx0XHRmdW5jdGlvbiBsb2FkKCkge1xuXHRcdFx0XHRcdHZhciByO1xuXHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRyID0gZXhwb3J0cy5zdG9yYWdlLmRlYnVnO1xuXHRcdFx0XHRcdH0gY2F0Y2ggKGUpIHt9XG5cdFx0XHRcdFx0cmV0dXJuIHI7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvKipcbiAgICAgKiBFbmFibGUgbmFtZXNwYWNlcyBsaXN0ZWQgaW4gYGxvY2FsU3RvcmFnZS5kZWJ1Z2AgaW5pdGlhbGx5LlxuICAgICAqL1xuXG5cdFx0XHRcdGV4cG9ydHMuZW5hYmxlKGxvYWQoKSk7XG5cblx0XHRcdFx0LyoqXG4gICAgICogTG9jYWxzdG9yYWdlIGF0dGVtcHRzIHRvIHJldHVybiB0aGUgbG9jYWxzdG9yYWdlLlxuICAgICAqXG4gICAgICogVGhpcyBpcyBuZWNlc3NhcnkgYmVjYXVzZSBzYWZhcmkgdGhyb3dzXG4gICAgICogd2hlbiBhIHVzZXIgZGlzYWJsZXMgY29va2llcy9sb2NhbHN0b3JhZ2VcbiAgICAgKiBhbmQgeW91IGF0dGVtcHQgdG8gYWNjZXNzIGl0LlxuICAgICAqXG4gICAgICogQHJldHVybiB7TG9jYWxTdG9yYWdlfVxuICAgICAqIEBhcGkgcHJpdmF0ZVxuICAgICAqL1xuXG5cdFx0XHRcdGZ1bmN0aW9uIGxvY2Fsc3RvcmFnZSgpIHtcblx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHdpbmRvdy5sb2NhbFN0b3JhZ2U7XG5cdFx0XHRcdFx0fSBjYXRjaCAoZSkge31cblx0XHRcdFx0fVxuXHRcdFx0fSwge1xuXHRcdFx0XHRcIi4vZGVidWdcIjogMThcblx0XHRcdH1dLFxuXHRcdFx0MTg6IFtmdW5jdGlvbiAoX2RlcmVxXywgbW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XHRcdFx0LyoqXG4gICAgICogVGhpcyBpcyB0aGUgY29tbW9uIGxvZ2ljIGZvciBib3RoIHRoZSBOb2RlLmpzIGFuZCB3ZWIgYnJvd3NlclxuICAgICAqIGltcGxlbWVudGF0aW9ucyBvZiBgZGVidWcoKWAuXG4gICAgICpcbiAgICAgKiBFeHBvc2UgYGRlYnVnKClgIGFzIHRoZSBtb2R1bGUuXG4gICAgICovXG5cblx0XHRcdFx0ZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gZGVidWc7XG5cdFx0XHRcdGV4cG9ydHMuY29lcmNlID0gY29lcmNlO1xuXHRcdFx0XHRleHBvcnRzLmRpc2FibGUgPSBkaXNhYmxlO1xuXHRcdFx0XHRleHBvcnRzLmVuYWJsZSA9IGVuYWJsZTtcblx0XHRcdFx0ZXhwb3J0cy5lbmFibGVkID0gZW5hYmxlZDtcblx0XHRcdFx0ZXhwb3J0cy5odW1hbml6ZSA9IF9kZXJlcV8oJ21zJyk7XG5cblx0XHRcdFx0LyoqXG4gICAgICogVGhlIGN1cnJlbnRseSBhY3RpdmUgZGVidWcgbW9kZSBuYW1lcywgYW5kIG5hbWVzIHRvIHNraXAuXG4gICAgICovXG5cblx0XHRcdFx0ZXhwb3J0cy5uYW1lcyA9IFtdO1xuXHRcdFx0XHRleHBvcnRzLnNraXBzID0gW107XG5cblx0XHRcdFx0LyoqXG4gICAgICogTWFwIG9mIHNwZWNpYWwgXCIlblwiIGhhbmRsaW5nIGZ1bmN0aW9ucywgZm9yIHRoZSBkZWJ1ZyBcImZvcm1hdFwiIGFyZ3VtZW50LlxuICAgICAqXG4gICAgICogVmFsaWQga2V5IG5hbWVzIGFyZSBhIHNpbmdsZSwgbG93ZXJjYXNlZCBsZXR0ZXIsIGkuZS4gXCJuXCIuXG4gICAgICovXG5cblx0XHRcdFx0ZXhwb3J0cy5mb3JtYXR0ZXJzID0ge307XG5cblx0XHRcdFx0LyoqXG4gICAgICogUHJldmlvdXNseSBhc3NpZ25lZCBjb2xvci5cbiAgICAgKi9cblxuXHRcdFx0XHR2YXIgcHJldkNvbG9yID0gMDtcblxuXHRcdFx0XHQvKipcbiAgICAgKiBQcmV2aW91cyBsb2cgdGltZXN0YW1wLlxuICAgICAqL1xuXG5cdFx0XHRcdHZhciBwcmV2VGltZTtcblxuXHRcdFx0XHQvKipcbiAgICAgKiBTZWxlY3QgYSBjb2xvci5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge051bWJlcn1cbiAgICAgKiBAYXBpIHByaXZhdGVcbiAgICAgKi9cblxuXHRcdFx0XHRmdW5jdGlvbiBzZWxlY3RDb2xvcigpIHtcblx0XHRcdFx0XHRyZXR1cm4gZXhwb3J0cy5jb2xvcnNbcHJldkNvbG9yKysgJSBleHBvcnRzLmNvbG9ycy5sZW5ndGhdO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0LyoqXG4gICAgICogQ3JlYXRlIGEgZGVidWdnZXIgd2l0aCB0aGUgZ2l2ZW4gYG5hbWVzcGFjZWAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZXNwYWNlXG4gICAgICogQHJldHVybiB7RnVuY3Rpb259XG4gICAgICogQGFwaSBwdWJsaWNcbiAgICAgKi9cblxuXHRcdFx0XHRmdW5jdGlvbiBkZWJ1ZyhuYW1lc3BhY2UpIHtcblxuXHRcdFx0XHRcdC8vIGRlZmluZSB0aGUgYGRpc2FibGVkYCB2ZXJzaW9uXG5cdFx0XHRcdFx0ZnVuY3Rpb24gZGlzYWJsZWQoKSB7fVxuXHRcdFx0XHRcdGRpc2FibGVkLmVuYWJsZWQgPSBmYWxzZTtcblxuXHRcdFx0XHRcdC8vIGRlZmluZSB0aGUgYGVuYWJsZWRgIHZlcnNpb25cblx0XHRcdFx0XHRmdW5jdGlvbiBlbmFibGVkKCkge1xuXG5cdFx0XHRcdFx0XHR2YXIgc2VsZiA9IGVuYWJsZWQ7XG5cblx0XHRcdFx0XHRcdC8vIHNldCBgZGlmZmAgdGltZXN0YW1wXG5cdFx0XHRcdFx0XHR2YXIgY3VyciA9ICtuZXcgRGF0ZSgpO1xuXHRcdFx0XHRcdFx0dmFyIG1zID0gY3VyciAtIChwcmV2VGltZSB8fCBjdXJyKTtcblx0XHRcdFx0XHRcdHNlbGYuZGlmZiA9IG1zO1xuXHRcdFx0XHRcdFx0c2VsZi5wcmV2ID0gcHJldlRpbWU7XG5cdFx0XHRcdFx0XHRzZWxmLmN1cnIgPSBjdXJyO1xuXHRcdFx0XHRcdFx0cHJldlRpbWUgPSBjdXJyO1xuXG5cdFx0XHRcdFx0XHQvLyBhZGQgdGhlIGBjb2xvcmAgaWYgbm90IHNldFxuXHRcdFx0XHRcdFx0aWYgKG51bGwgPT0gc2VsZi51c2VDb2xvcnMpIHNlbGYudXNlQ29sb3JzID0gZXhwb3J0cy51c2VDb2xvcnMoKTtcblx0XHRcdFx0XHRcdGlmIChudWxsID09IHNlbGYuY29sb3IgJiYgc2VsZi51c2VDb2xvcnMpIHNlbGYuY29sb3IgPSBzZWxlY3RDb2xvcigpO1xuXG5cdFx0XHRcdFx0XHR2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7XG5cblx0XHRcdFx0XHRcdGFyZ3NbMF0gPSBleHBvcnRzLmNvZXJjZShhcmdzWzBdKTtcblxuXHRcdFx0XHRcdFx0aWYgKCdzdHJpbmcnICE9PSB0eXBlb2YgYXJnc1swXSkge1xuXHRcdFx0XHRcdFx0XHQvLyBhbnl0aGluZyBlbHNlIGxldCdzIGluc3BlY3Qgd2l0aCAlb1xuXHRcdFx0XHRcdFx0XHRhcmdzID0gWyclbyddLmNvbmNhdChhcmdzKTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0Ly8gYXBwbHkgYW55IGBmb3JtYXR0ZXJzYCB0cmFuc2Zvcm1hdGlvbnNcblx0XHRcdFx0XHRcdHZhciBpbmRleCA9IDA7XG5cdFx0XHRcdFx0XHRhcmdzWzBdID0gYXJnc1swXS5yZXBsYWNlKC8lKFthLXolXSkvZywgZnVuY3Rpb24gKG1hdGNoLCBmb3JtYXQpIHtcblx0XHRcdFx0XHRcdFx0Ly8gaWYgd2UgZW5jb3VudGVyIGFuIGVzY2FwZWQgJSB0aGVuIGRvbid0IGluY3JlYXNlIHRoZSBhcnJheSBpbmRleFxuXHRcdFx0XHRcdFx0XHRpZiAobWF0Y2ggPT09ICclJScpIHJldHVybiBtYXRjaDtcblx0XHRcdFx0XHRcdFx0aW5kZXgrKztcblx0XHRcdFx0XHRcdFx0dmFyIGZvcm1hdHRlciA9IGV4cG9ydHMuZm9ybWF0dGVyc1tmb3JtYXRdO1xuXHRcdFx0XHRcdFx0XHRpZiAoJ2Z1bmN0aW9uJyA9PT0gdHlwZW9mIGZvcm1hdHRlcikge1xuXHRcdFx0XHRcdFx0XHRcdHZhciB2YWwgPSBhcmdzW2luZGV4XTtcblx0XHRcdFx0XHRcdFx0XHRtYXRjaCA9IGZvcm1hdHRlci5jYWxsKHNlbGYsIHZhbCk7XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBub3cgd2UgbmVlZCB0byByZW1vdmUgYGFyZ3NbaW5kZXhdYCBzaW5jZSBpdCdzIGlubGluZWQgaW4gdGhlIGBmb3JtYXRgXG5cdFx0XHRcdFx0XHRcdFx0YXJncy5zcGxpY2UoaW5kZXgsIDEpO1xuXHRcdFx0XHRcdFx0XHRcdGluZGV4LS07XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0cmV0dXJuIG1hdGNoO1xuXHRcdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHRcdGlmICgnZnVuY3Rpb24nID09PSB0eXBlb2YgZXhwb3J0cy5mb3JtYXRBcmdzKSB7XG5cdFx0XHRcdFx0XHRcdGFyZ3MgPSBleHBvcnRzLmZvcm1hdEFyZ3MuYXBwbHkoc2VsZiwgYXJncyk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR2YXIgbG9nRm4gPSBlbmFibGVkLmxvZyB8fCBleHBvcnRzLmxvZyB8fCBjb25zb2xlLmxvZy5iaW5kKGNvbnNvbGUpO1xuXHRcdFx0XHRcdFx0bG9nRm4uYXBwbHkoc2VsZiwgYXJncyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVuYWJsZWQuZW5hYmxlZCA9IHRydWU7XG5cblx0XHRcdFx0XHR2YXIgZm4gPSBleHBvcnRzLmVuYWJsZWQobmFtZXNwYWNlKSA/IGVuYWJsZWQgOiBkaXNhYmxlZDtcblxuXHRcdFx0XHRcdGZuLm5hbWVzcGFjZSA9IG5hbWVzcGFjZTtcblxuXHRcdFx0XHRcdHJldHVybiBmbjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8qKlxuICAgICAqIEVuYWJsZXMgYSBkZWJ1ZyBtb2RlIGJ5IG5hbWVzcGFjZXMuIFRoaXMgY2FuIGluY2x1ZGUgbW9kZXNcbiAgICAgKiBzZXBhcmF0ZWQgYnkgYSBjb2xvbiBhbmQgd2lsZGNhcmRzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWVzcGFjZXNcbiAgICAgKiBAYXBpIHB1YmxpY1xuICAgICAqL1xuXG5cdFx0XHRcdGZ1bmN0aW9uIGVuYWJsZShuYW1lc3BhY2VzKSB7XG5cdFx0XHRcdFx0ZXhwb3J0cy5zYXZlKG5hbWVzcGFjZXMpO1xuXG5cdFx0XHRcdFx0dmFyIHNwbGl0ID0gKG5hbWVzcGFjZXMgfHwgJycpLnNwbGl0KC9bXFxzLF0rLyk7XG5cdFx0XHRcdFx0dmFyIGxlbiA9IHNwbGl0Lmxlbmd0aDtcblxuXHRcdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcblx0XHRcdFx0XHRcdGlmICghc3BsaXRbaV0pIGNvbnRpbnVlOyAvLyBpZ25vcmUgZW1wdHkgc3RyaW5nc1xuXHRcdFx0XHRcdFx0bmFtZXNwYWNlcyA9IHNwbGl0W2ldLnJlcGxhY2UoL1xcKi9nLCAnLio/Jyk7XG5cdFx0XHRcdFx0XHRpZiAobmFtZXNwYWNlc1swXSA9PT0gJy0nKSB7XG5cdFx0XHRcdFx0XHRcdGV4cG9ydHMuc2tpcHMucHVzaChuZXcgUmVnRXhwKCdeJyArIG5hbWVzcGFjZXMuc3Vic3RyKDEpICsgJyQnKSk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRleHBvcnRzLm5hbWVzLnB1c2gobmV3IFJlZ0V4cCgnXicgKyBuYW1lc3BhY2VzICsgJyQnKSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0LyoqXG4gICAgICogRGlzYWJsZSBkZWJ1ZyBvdXRwdXQuXG4gICAgICpcbiAgICAgKiBAYXBpIHB1YmxpY1xuICAgICAqL1xuXG5cdFx0XHRcdGZ1bmN0aW9uIGRpc2FibGUoKSB7XG5cdFx0XHRcdFx0ZXhwb3J0cy5lbmFibGUoJycpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0LyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBtb2RlIG5hbWUgaXMgZW5hYmxlZCwgZmFsc2Ugb3RoZXJ3aXNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgICAqIEBhcGkgcHVibGljXG4gICAgICovXG5cblx0XHRcdFx0ZnVuY3Rpb24gZW5hYmxlZChuYW1lKSB7XG5cdFx0XHRcdFx0dmFyIGksIGxlbjtcblx0XHRcdFx0XHRmb3IgKGkgPSAwLCBsZW4gPSBleHBvcnRzLnNraXBzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG5cdFx0XHRcdFx0XHRpZiAoZXhwb3J0cy5za2lwc1tpXS50ZXN0KG5hbWUpKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Zm9yIChpID0gMCwgbGVuID0gZXhwb3J0cy5uYW1lcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuXHRcdFx0XHRcdFx0aWYgKGV4cG9ydHMubmFtZXNbaV0udGVzdChuYW1lKSkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0LyoqXG4gICAgICogQ29lcmNlIGB2YWxgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtNaXhlZH0gdmFsXG4gICAgICogQHJldHVybiB7TWl4ZWR9XG4gICAgICogQGFwaSBwcml2YXRlXG4gICAgICovXG5cblx0XHRcdFx0ZnVuY3Rpb24gY29lcmNlKHZhbCkge1xuXHRcdFx0XHRcdGlmICh2YWwgaW5zdGFuY2VvZiBFcnJvcikgcmV0dXJuIHZhbC5zdGFjayB8fCB2YWwubWVzc2FnZTtcblx0XHRcdFx0XHRyZXR1cm4gdmFsO1xuXHRcdFx0XHR9XG5cdFx0XHR9LCB7XG5cdFx0XHRcdFwibXNcIjogMjVcblx0XHRcdH1dLFxuXHRcdFx0MTk6IFtmdW5jdGlvbiAoX2RlcmVxXywgbW9kdWxlLCBleHBvcnRzKSB7XG5cdFx0XHRcdChmdW5jdGlvbiAoZ2xvYmFsKSB7XG5cdFx0XHRcdFx0LyoqXG4gICAgICAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gICAgICAqL1xuXG5cdFx0XHRcdFx0dmFyIGtleXMgPSBfZGVyZXFfKCcuL2tleXMnKTtcblx0XHRcdFx0XHR2YXIgaGFzQmluYXJ5ID0gX2RlcmVxXygnaGFzLWJpbmFyeScpO1xuXHRcdFx0XHRcdHZhciBzbGljZUJ1ZmZlciA9IF9kZXJlcV8oJ2FycmF5YnVmZmVyLnNsaWNlJyk7XG5cdFx0XHRcdFx0dmFyIGJhc2U2NGVuY29kZXIgPSBfZGVyZXFfKCdiYXNlNjQtYXJyYXlidWZmZXInKTtcblx0XHRcdFx0XHR2YXIgYWZ0ZXIgPSBfZGVyZXFfKCdhZnRlcicpO1xuXHRcdFx0XHRcdHZhciB1dGY4ID0gX2RlcmVxXygndXRmOCcpO1xuXG5cdFx0XHRcdFx0LyoqXG4gICAgICAqIENoZWNrIGlmIHdlIGFyZSBydW5uaW5nIGFuIGFuZHJvaWQgYnJvd3Nlci4gVGhhdCByZXF1aXJlcyB1cyB0byB1c2VcbiAgICAgICogQXJyYXlCdWZmZXIgd2l0aCBwb2xsaW5nIHRyYW5zcG9ydHMuLi5cbiAgICAgICpcbiAgICAgICogaHR0cDovL2doaW5kYS5uZXQvanBlZy1ibG9iLWFqYXgtYW5kcm9pZC9cbiAgICAgICovXG5cblx0XHRcdFx0XHR2YXIgaXNBbmRyb2lkID0gbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvQW5kcm9pZC9pKTtcblxuXHRcdFx0XHRcdC8qKlxuICAgICAgKiBDaGVjayBpZiB3ZSBhcmUgcnVubmluZyBpbiBQaGFudG9tSlMuXG4gICAgICAqIFVwbG9hZGluZyBhIEJsb2Igd2l0aCBQaGFudG9tSlMgZG9lcyBub3Qgd29yayBjb3JyZWN0bHksIGFzIHJlcG9ydGVkIGhlcmU6XG4gICAgICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9hcml5YS9waGFudG9tanMvaXNzdWVzLzExMzk1XG4gICAgICAqIEB0eXBlIGJvb2xlYW5cbiAgICAgICovXG5cdFx0XHRcdFx0dmFyIGlzUGhhbnRvbUpTID0gL1BoYW50b21KUy9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG5cblx0XHRcdFx0XHQvKipcbiAgICAgICogV2hlbiB0cnVlLCBhdm9pZHMgdXNpbmcgQmxvYnMgdG8gZW5jb2RlIHBheWxvYWRzLlxuICAgICAgKiBAdHlwZSBib29sZWFuXG4gICAgICAqL1xuXHRcdFx0XHRcdHZhciBkb250U2VuZEJsb2JzID0gaXNBbmRyb2lkIHx8IGlzUGhhbnRvbUpTO1xuXG5cdFx0XHRcdFx0LyoqXG4gICAgICAqIEN1cnJlbnQgcHJvdG9jb2wgdmVyc2lvbi5cbiAgICAgICovXG5cblx0XHRcdFx0XHRleHBvcnRzLnByb3RvY29sID0gMztcblxuXHRcdFx0XHRcdC8qKlxuICAgICAgKiBQYWNrZXQgdHlwZXMuXG4gICAgICAqL1xuXG5cdFx0XHRcdFx0dmFyIHBhY2tldHMgPSBleHBvcnRzLnBhY2tldHMgPSB7XG5cdFx0XHRcdFx0XHRvcGVuOiAwIC8vIG5vbi13c1xuXG5cdFx0XHRcdFx0XHQsIGNsb3NlOiAxIC8vIG5vbi13c1xuXG5cdFx0XHRcdFx0XHQsIHBpbmc6IDIsXG5cdFx0XHRcdFx0XHRwb25nOiAzLFxuXHRcdFx0XHRcdFx0bWVzc2FnZTogNCxcblx0XHRcdFx0XHRcdHVwZ3JhZGU6IDUsXG5cdFx0XHRcdFx0XHRub29wOiA2XG5cdFx0XHRcdFx0fTtcblxuXHRcdFx0XHRcdHZhciBwYWNrZXRzbGlzdCA9IGtleXMocGFja2V0cyk7XG5cblx0XHRcdFx0XHQvKipcbiAgICAgICogUHJlbWFkZSBlcnJvciBwYWNrZXQuXG4gICAgICAqL1xuXG5cdFx0XHRcdFx0dmFyIGVyciA9IHtcblx0XHRcdFx0XHRcdHR5cGU6ICdlcnJvcicsXG5cdFx0XHRcdFx0XHRkYXRhOiAncGFyc2VyIGVycm9yJ1xuXHRcdFx0XHRcdH07XG5cblx0XHRcdFx0XHQvKipcbiAgICAgICogQ3JlYXRlIGEgYmxvYiBhcGkgZXZlbiBmb3IgYmxvYiBidWlsZGVyIHdoZW4gdmVuZG9yIHByZWZpeGVzIGV4aXN0XG4gICAgICAqL1xuXG5cdFx0XHRcdFx0dmFyIEJsb2IgPSBfZGVyZXFfKCdibG9iJyk7XG5cblx0XHRcdFx0XHQvKipcbiAgICAgICogRW5jb2RlcyBhIHBhY2tldC5cbiAgICAgICpcbiAgICAgICogICAgIDxwYWNrZXQgdHlwZSBpZD4gWyA8ZGF0YT4gXVxuICAgICAgKlxuICAgICAgKiBFeGFtcGxlOlxuICAgICAgKlxuICAgICAgKiAgICAgNWhlbGxvIHdvcmxkXG4gICAgICAqICAgICAzXG4gICAgICAqICAgICA0XG4gICAgICAqXG4gICAgICAqIEJpbmFyeSBpcyBlbmNvZGVkIGluIGFuIGlkZW50aWNhbCBwcmluY2lwbGVcbiAgICAgICpcbiAgICAgICogQGFwaSBwcml2YXRlXG4gICAgICAqL1xuXG5cdFx0XHRcdFx0ZXhwb3J0cy5lbmNvZGVQYWNrZXQgPSBmdW5jdGlvbiAocGFja2V0LCBzdXBwb3J0c0JpbmFyeSwgdXRmOGVuY29kZSwgY2FsbGJhY2spIHtcblx0XHRcdFx0XHRcdGlmICgnZnVuY3Rpb24nID09IHR5cGVvZiBzdXBwb3J0c0JpbmFyeSkge1xuXHRcdFx0XHRcdFx0XHRjYWxsYmFjayA9IHN1cHBvcnRzQmluYXJ5O1xuXHRcdFx0XHRcdFx0XHRzdXBwb3J0c0JpbmFyeSA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRpZiAoJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgdXRmOGVuY29kZSkge1xuXHRcdFx0XHRcdFx0XHRjYWxsYmFjayA9IHV0ZjhlbmNvZGU7XG5cdFx0XHRcdFx0XHRcdHV0ZjhlbmNvZGUgPSBudWxsO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHR2YXIgZGF0YSA9IHBhY2tldC5kYXRhID09PSB1bmRlZmluZWQgPyB1bmRlZmluZWQgOiBwYWNrZXQuZGF0YS5idWZmZXIgfHwgcGFja2V0LmRhdGE7XG5cblx0XHRcdFx0XHRcdGlmIChnbG9iYWwuQXJyYXlCdWZmZXIgJiYgZGF0YSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBlbmNvZGVBcnJheUJ1ZmZlcihwYWNrZXQsIHN1cHBvcnRzQmluYXJ5LCBjYWxsYmFjayk7XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKEJsb2IgJiYgZGF0YSBpbnN0YW5jZW9mIGdsb2JhbC5CbG9iKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBlbmNvZGVCbG9iKHBhY2tldCwgc3VwcG9ydHNCaW5hcnksIGNhbGxiYWNrKTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0Ly8gbWlnaHQgYmUgYW4gb2JqZWN0IHdpdGggeyBiYXNlNjQ6IHRydWUsIGRhdGE6IGRhdGFBc0Jhc2U2NFN0cmluZyB9XG5cdFx0XHRcdFx0XHRpZiAoZGF0YSAmJiBkYXRhLmJhc2U2NCkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gZW5jb2RlQmFzZTY0T2JqZWN0KHBhY2tldCwgY2FsbGJhY2spO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHQvLyBTZW5kaW5nIGRhdGEgYXMgYSB1dGYtOCBzdHJpbmdcblx0XHRcdFx0XHRcdHZhciBlbmNvZGVkID0gcGFja2V0c1twYWNrZXQudHlwZV07XG5cblx0XHRcdFx0XHRcdC8vIGRhdGEgZnJhZ21lbnQgaXMgb3B0aW9uYWxcblx0XHRcdFx0XHRcdGlmICh1bmRlZmluZWQgIT09IHBhY2tldC5kYXRhKSB7XG5cdFx0XHRcdFx0XHRcdGVuY29kZWQgKz0gdXRmOGVuY29kZSA/IHV0ZjguZW5jb2RlKFN0cmluZyhwYWNrZXQuZGF0YSkpIDogU3RyaW5nKHBhY2tldC5kYXRhKTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0cmV0dXJuIGNhbGxiYWNrKCcnICsgZW5jb2RlZCk7XG5cdFx0XHRcdFx0fTtcblxuXHRcdFx0XHRcdGZ1bmN0aW9uIGVuY29kZUJhc2U2NE9iamVjdChwYWNrZXQsIGNhbGxiYWNrKSB7XG5cdFx0XHRcdFx0XHQvLyBwYWNrZXQgZGF0YSBpcyBhbiBvYmplY3QgeyBiYXNlNjQ6IHRydWUsIGRhdGE6IGRhdGFBc0Jhc2U2NFN0cmluZyB9XG5cdFx0XHRcdFx0XHR2YXIgbWVzc2FnZSA9ICdiJyArIGV4cG9ydHMucGFja2V0c1twYWNrZXQudHlwZV0gKyBwYWNrZXQuZGF0YS5kYXRhO1xuXHRcdFx0XHRcdFx0cmV0dXJuIGNhbGxiYWNrKG1lc3NhZ2UpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8qKlxuICAgICAgKiBFbmNvZGUgcGFja2V0IGhlbHBlcnMgZm9yIGJpbmFyeSB0eXBlc1xuICAgICAgKi9cblxuXHRcdFx0XHRcdGZ1bmN0aW9uIGVuY29kZUFycmF5QnVmZmVyKHBhY2tldCwgc3VwcG9ydHNCaW5hcnksIGNhbGxiYWNrKSB7XG5cdFx0XHRcdFx0XHRpZiAoIXN1cHBvcnRzQmluYXJ5KSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBleHBvcnRzLmVuY29kZUJhc2U2NFBhY2tldChwYWNrZXQsIGNhbGxiYWNrKTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0dmFyIGRhdGEgPSBwYWNrZXQuZGF0YTtcblx0XHRcdFx0XHRcdHZhciBjb250ZW50QXJyYXkgPSBuZXcgVWludDhBcnJheShkYXRhKTtcblx0XHRcdFx0XHRcdHZhciByZXN1bHRCdWZmZXIgPSBuZXcgVWludDhBcnJheSgxICsgZGF0YS5ieXRlTGVuZ3RoKTtcblxuXHRcdFx0XHRcdFx0cmVzdWx0QnVmZmVyWzBdID0gcGFja2V0c1twYWNrZXQudHlwZV07XG5cdFx0XHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGNvbnRlbnRBcnJheS5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdFx0XHRyZXN1bHRCdWZmZXJbaSArIDFdID0gY29udGVudEFycmF5W2ldO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRyZXR1cm4gY2FsbGJhY2socmVzdWx0QnVmZmVyLmJ1ZmZlcik7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0ZnVuY3Rpb24gZW5jb2RlQmxvYkFzQXJyYXlCdWZmZXIocGFja2V0LCBzdXBwb3J0c0JpbmFyeSwgY2FsbGJhY2spIHtcblx0XHRcdFx0XHRcdGlmICghc3VwcG9ydHNCaW5hcnkpIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGV4cG9ydHMuZW5jb2RlQmFzZTY0UGFja2V0KHBhY2tldCwgY2FsbGJhY2spO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHR2YXIgZnIgPSBuZXcgRmlsZVJlYWRlcigpO1xuXHRcdFx0XHRcdFx0ZnIub25sb2FkID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0XHRwYWNrZXQuZGF0YSA9IGZyLnJlc3VsdDtcblx0XHRcdFx0XHRcdFx0ZXhwb3J0cy5lbmNvZGVQYWNrZXQocGFja2V0LCBzdXBwb3J0c0JpbmFyeSwgdHJ1ZSwgY2FsbGJhY2spO1xuXHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdHJldHVybiBmci5yZWFkQXNBcnJheUJ1ZmZlcihwYWNrZXQuZGF0YSk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0ZnVuY3Rpb24gZW5jb2RlQmxvYihwYWNrZXQsIHN1cHBvcnRzQmluYXJ5LCBjYWxsYmFjaykge1xuXHRcdFx0XHRcdFx0aWYgKCFzdXBwb3J0c0JpbmFyeSkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gZXhwb3J0cy5lbmNvZGVCYXNlNjRQYWNrZXQocGFja2V0LCBjYWxsYmFjayk7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGlmIChkb250U2VuZEJsb2JzKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBlbmNvZGVCbG9iQXNBcnJheUJ1ZmZlcihwYWNrZXQsIHN1cHBvcnRzQmluYXJ5LCBjYWxsYmFjayk7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdHZhciBsZW5ndGggPSBuZXcgVWludDhBcnJheSgxKTtcblx0XHRcdFx0XHRcdGxlbmd0aFswXSA9IHBhY2tldHNbcGFja2V0LnR5cGVdO1xuXHRcdFx0XHRcdFx0dmFyIGJsb2IgPSBuZXcgQmxvYihbbGVuZ3RoLmJ1ZmZlciwgcGFja2V0LmRhdGFdKTtcblxuXHRcdFx0XHRcdFx0cmV0dXJuIGNhbGxiYWNrKGJsb2IpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8qKlxuICAgICAgKiBFbmNvZGVzIGEgcGFja2V0IHdpdGggYmluYXJ5IGRhdGEgaW4gYSBiYXNlNjQgc3RyaW5nXG4gICAgICAqXG4gICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwYWNrZXQsIGhhcyBgdHlwZWAgYW5kIGBkYXRhYFxuICAgICAgKiBAcmV0dXJuIHtTdHJpbmd9IGJhc2U2NCBlbmNvZGVkIG1lc3NhZ2VcbiAgICAgICovXG5cblx0XHRcdFx0XHRleHBvcnRzLmVuY29kZUJhc2U2NFBhY2tldCA9IGZ1bmN0aW9uIChwYWNrZXQsIGNhbGxiYWNrKSB7XG5cdFx0XHRcdFx0XHR2YXIgbWVzc2FnZSA9ICdiJyArIGV4cG9ydHMucGFja2V0c1twYWNrZXQudHlwZV07XG5cdFx0XHRcdFx0XHRpZiAoQmxvYiAmJiBwYWNrZXQuZGF0YSBpbnN0YW5jZW9mIGdsb2JhbC5CbG9iKSB7XG5cdFx0XHRcdFx0XHRcdHZhciBmciA9IG5ldyBGaWxlUmVhZGVyKCk7XG5cdFx0XHRcdFx0XHRcdGZyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdFx0XHR2YXIgYjY0ID0gZnIucmVzdWx0LnNwbGl0KCcsJylbMV07XG5cdFx0XHRcdFx0XHRcdFx0Y2FsbGJhY2sobWVzc2FnZSArIGI2NCk7XG5cdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRcdHJldHVybiBmci5yZWFkQXNEYXRhVVJMKHBhY2tldC5kYXRhKTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0dmFyIGI2NGRhdGE7XG5cdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHRiNjRkYXRhID0gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLCBuZXcgVWludDhBcnJheShwYWNrZXQuZGF0YSkpO1xuXHRcdFx0XHRcdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0XHRcdFx0XHQvLyBpUGhvbmUgU2FmYXJpIGRvZXNuJ3QgbGV0IHlvdSBhcHBseSB3aXRoIHR5cGVkIGFycmF5c1xuXHRcdFx0XHRcdFx0XHR2YXIgdHlwZWQgPSBuZXcgVWludDhBcnJheShwYWNrZXQuZGF0YSk7XG5cdFx0XHRcdFx0XHRcdHZhciBiYXNpYyA9IG5ldyBBcnJheSh0eXBlZC5sZW5ndGgpO1xuXHRcdFx0XHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHR5cGVkLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0XHRcdFx0YmFzaWNbaV0gPSB0eXBlZFtpXTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRiNjRkYXRhID0gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLCBiYXNpYyk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRtZXNzYWdlICs9IGdsb2JhbC5idG9hKGI2NGRhdGEpO1xuXHRcdFx0XHRcdFx0cmV0dXJuIGNhbGxiYWNrKG1lc3NhZ2UpO1xuXHRcdFx0XHRcdH07XG5cblx0XHRcdFx0XHQvKipcbiAgICAgICogRGVjb2RlcyBhIHBhY2tldC4gQ2hhbmdlcyBmb3JtYXQgdG8gQmxvYiBpZiByZXF1ZXN0ZWQuXG4gICAgICAqXG4gICAgICAqIEByZXR1cm4ge09iamVjdH0gd2l0aCBgdHlwZWAgYW5kIGBkYXRhYCAoaWYgYW55KVxuICAgICAgKiBAYXBpIHByaXZhdGVcbiAgICAgICovXG5cblx0XHRcdFx0XHRleHBvcnRzLmRlY29kZVBhY2tldCA9IGZ1bmN0aW9uIChkYXRhLCBiaW5hcnlUeXBlLCB1dGY4ZGVjb2RlKSB7XG5cdFx0XHRcdFx0XHQvLyBTdHJpbmcgZGF0YVxuXHRcdFx0XHRcdFx0aWYgKHR5cGVvZiBkYXRhID09ICdzdHJpbmcnIHx8IGRhdGEgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdFx0XHRpZiAoZGF0YS5jaGFyQXQoMCkgPT0gJ2InKSB7XG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIGV4cG9ydHMuZGVjb2RlQmFzZTY0UGFja2V0KGRhdGEuc3Vic3RyKDEpLCBiaW5hcnlUeXBlKTtcblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdGlmICh1dGY4ZGVjb2RlKSB7XG5cdFx0XHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0XHRcdGRhdGEgPSB1dGY4LmRlY29kZShkYXRhKTtcblx0XHRcdFx0XHRcdFx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gZXJyO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR2YXIgdHlwZSA9IGRhdGEuY2hhckF0KDApO1xuXG5cdFx0XHRcdFx0XHRcdGlmIChOdW1iZXIodHlwZSkgIT0gdHlwZSB8fCAhcGFja2V0c2xpc3RbdHlwZV0pIHtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gZXJyO1xuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0aWYgKGRhdGEubGVuZ3RoID4gMSkge1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHRcdFx0XHR0eXBlOiBwYWNrZXRzbGlzdFt0eXBlXSxcblx0XHRcdFx0XHRcdFx0XHRcdGRhdGE6IGRhdGEuc3Vic3RyaW5nKDEpXG5cdFx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0dHlwZTogcGFja2V0c2xpc3RbdHlwZV1cblx0XHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdHZhciBhc0FycmF5ID0gbmV3IFVpbnQ4QXJyYXkoZGF0YSk7XG5cdFx0XHRcdFx0XHR2YXIgdHlwZSA9IGFzQXJyYXlbMF07XG5cdFx0XHRcdFx0XHR2YXIgcmVzdCA9IHNsaWNlQnVmZmVyKGRhdGEsIDEpO1xuXHRcdFx0XHRcdFx0aWYgKEJsb2IgJiYgYmluYXJ5VHlwZSA9PT0gJ2Jsb2InKSB7XG5cdFx0XHRcdFx0XHRcdHJlc3QgPSBuZXcgQmxvYihbcmVzdF0pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRcdFx0dHlwZTogcGFja2V0c2xpc3RbdHlwZV0sXG5cdFx0XHRcdFx0XHRcdGRhdGE6IHJlc3Rcblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0fTtcblxuXHRcdFx0XHRcdC8qKlxuICAgICAgKiBEZWNvZGVzIGEgcGFja2V0IGVuY29kZWQgaW4gYSBiYXNlNjQgc3RyaW5nXG4gICAgICAqXG4gICAgICAqIEBwYXJhbSB7U3RyaW5nfSBiYXNlNjQgZW5jb2RlZCBtZXNzYWdlXG4gICAgICAqIEByZXR1cm4ge09iamVjdH0gd2l0aCBgdHlwZWAgYW5kIGBkYXRhYCAoaWYgYW55KVxuICAgICAgKi9cblxuXHRcdFx0XHRcdGV4cG9ydHMuZGVjb2RlQmFzZTY0UGFja2V0ID0gZnVuY3Rpb24gKG1zZywgYmluYXJ5VHlwZSkge1xuXHRcdFx0XHRcdFx0dmFyIHR5cGUgPSBwYWNrZXRzbGlzdFttc2cuY2hhckF0KDApXTtcblx0XHRcdFx0XHRcdGlmICghZ2xvYmFsLkFycmF5QnVmZmVyKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHRcdFx0dHlwZTogdHlwZSxcblx0XHRcdFx0XHRcdFx0XHRkYXRhOiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRiYXNlNjQ6IHRydWUsXG5cdFx0XHRcdFx0XHRcdFx0XHRkYXRhOiBtc2cuc3Vic3RyKDEpXG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHR2YXIgZGF0YSA9IGJhc2U2NGVuY29kZXIuZGVjb2RlKG1zZy5zdWJzdHIoMSkpO1xuXG5cdFx0XHRcdFx0XHRpZiAoYmluYXJ5VHlwZSA9PT0gJ2Jsb2InICYmIEJsb2IpIHtcblx0XHRcdFx0XHRcdFx0ZGF0YSA9IG5ldyBCbG9iKFtkYXRhXSk7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IHR5cGUsXG5cdFx0XHRcdFx0XHRcdGRhdGE6IGRhdGFcblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0fTtcblxuXHRcdFx0XHRcdC8qKlxuICAgICAgKiBFbmNvZGVzIG11bHRpcGxlIG1lc3NhZ2VzIChwYXlsb2FkKS5cbiAgICAgICpcbiAgICAgICogICAgIDxsZW5ndGg+OmRhdGFcbiAgICAgICpcbiAgICAgICogRXhhbXBsZTpcbiAgICAgICpcbiAgICAgICogICAgIDExOmhlbGxvIHdvcmxkMjpoaVxuICAgICAgKlxuICAgICAgKiBJZiBhbnkgY29udGVudHMgYXJlIGJpbmFyeSwgdGhleSB3aWxsIGJlIGVuY29kZWQgYXMgYmFzZTY0IHN0cmluZ3MuIEJhc2U2NFxuICAgICAgKiBlbmNvZGVkIHN0cmluZ3MgYXJlIG1hcmtlZCB3aXRoIGEgYiBiZWZvcmUgdGhlIGxlbmd0aCBzcGVjaWZpZXJcbiAgICAgICpcbiAgICAgICogQHBhcmFtIHtBcnJheX0gcGFja2V0c1xuICAgICAgKiBAYXBpIHByaXZhdGVcbiAgICAgICovXG5cblx0XHRcdFx0XHRleHBvcnRzLmVuY29kZVBheWxvYWQgPSBmdW5jdGlvbiAocGFja2V0cywgc3VwcG9ydHNCaW5hcnksIGNhbGxiYWNrKSB7XG5cdFx0XHRcdFx0XHRpZiAodHlwZW9mIHN1cHBvcnRzQmluYXJ5ID09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0XHRcdFx0Y2FsbGJhY2sgPSBzdXBwb3J0c0JpbmFyeTtcblx0XHRcdFx0XHRcdFx0c3VwcG9ydHNCaW5hcnkgPSBudWxsO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHR2YXIgaXNCaW5hcnkgPSBoYXNCaW5hcnkocGFja2V0cyk7XG5cblx0XHRcdFx0XHRcdGlmIChzdXBwb3J0c0JpbmFyeSAmJiBpc0JpbmFyeSkge1xuXHRcdFx0XHRcdFx0XHRpZiAoQmxvYiAmJiAhZG9udFNlbmRCbG9icykge1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybiBleHBvcnRzLmVuY29kZVBheWxvYWRBc0Jsb2IocGFja2V0cywgY2FsbGJhY2spO1xuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0cmV0dXJuIGV4cG9ydHMuZW5jb2RlUGF5bG9hZEFzQXJyYXlCdWZmZXIocGFja2V0cywgY2FsbGJhY2spO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRpZiAoIXBhY2tldHMubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBjYWxsYmFjaygnMDonKTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0ZnVuY3Rpb24gc2V0TGVuZ3RoSGVhZGVyKG1lc3NhZ2UpIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIG1lc3NhZ2UubGVuZ3RoICsgJzonICsgbWVzc2FnZTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0ZnVuY3Rpb24gZW5jb2RlT25lKHBhY2tldCwgZG9uZUNhbGxiYWNrKSB7XG5cdFx0XHRcdFx0XHRcdGV4cG9ydHMuZW5jb2RlUGFja2V0KHBhY2tldCwgIWlzQmluYXJ5ID8gZmFsc2UgOiBzdXBwb3J0c0JpbmFyeSwgdHJ1ZSwgZnVuY3Rpb24gKG1lc3NhZ2UpIHtcblx0XHRcdFx0XHRcdFx0XHRkb25lQ2FsbGJhY2sobnVsbCwgc2V0TGVuZ3RoSGVhZGVyKG1lc3NhZ2UpKTtcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdG1hcChwYWNrZXRzLCBlbmNvZGVPbmUsIGZ1bmN0aW9uIChlcnIsIHJlc3VsdHMpIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGNhbGxiYWNrKHJlc3VsdHMuam9pbignJykpO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fTtcblxuXHRcdFx0XHRcdC8qKlxuICAgICAgKiBBc3luYyBhcnJheSBtYXAgdXNpbmcgYWZ0ZXJcbiAgICAgICovXG5cblx0XHRcdFx0XHRmdW5jdGlvbiBtYXAoYXJ5LCBlYWNoLCBkb25lKSB7XG5cdFx0XHRcdFx0XHR2YXIgcmVzdWx0ID0gbmV3IEFycmF5KGFyeS5sZW5ndGgpO1xuXHRcdFx0XHRcdFx0dmFyIG5leHQgPSBhZnRlcihhcnkubGVuZ3RoLCBkb25lKTtcblxuXHRcdFx0XHRcdFx0dmFyIGVhY2hXaXRoSW5kZXggPSBmdW5jdGlvbiBlYWNoV2l0aEluZGV4KGksIGVsLCBjYikge1xuXHRcdFx0XHRcdFx0XHRlYWNoKGVsLCBmdW5jdGlvbiAoZXJyb3IsIG1zZykge1xuXHRcdFx0XHRcdFx0XHRcdHJlc3VsdFtpXSA9IG1zZztcblx0XHRcdFx0XHRcdFx0XHRjYihlcnJvciwgcmVzdWx0KTtcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9O1xuXG5cdFx0XHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGFyeS5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdFx0XHRlYWNoV2l0aEluZGV4KGksIGFyeVtpXSwgbmV4dCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0LypcbiAgICAgICogRGVjb2RlcyBkYXRhIHdoZW4gYSBwYXlsb2FkIGlzIG1heWJlIGV4cGVjdGVkLiBQb3NzaWJsZSBiaW5hcnkgY29udGVudHMgYXJlXG4gICAgICAqIGRlY29kZWQgZnJvbSB0aGVpciBiYXNlNjQgcmVwcmVzZW50YXRpb25cbiAgICAgICpcbiAgICAgICogQHBhcmFtIHtTdHJpbmd9IGRhdGEsIGNhbGxiYWNrIG1ldGhvZFxuICAgICAgKiBAYXBpIHB1YmxpY1xuICAgICAgKi9cblxuXHRcdFx0XHRcdGV4cG9ydHMuZGVjb2RlUGF5bG9hZCA9IGZ1bmN0aW9uIChkYXRhLCBiaW5hcnlUeXBlLCBjYWxsYmFjaykge1xuXHRcdFx0XHRcdFx0aWYgKHR5cGVvZiBkYXRhICE9ICdzdHJpbmcnKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBleHBvcnRzLmRlY29kZVBheWxvYWRBc0JpbmFyeShkYXRhLCBiaW5hcnlUeXBlLCBjYWxsYmFjayk7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGlmICh0eXBlb2YgYmluYXJ5VHlwZSA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0XHRcdFx0XHRjYWxsYmFjayA9IGJpbmFyeVR5cGU7XG5cdFx0XHRcdFx0XHRcdGJpbmFyeVR5cGUgPSBudWxsO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHR2YXIgcGFja2V0O1xuXHRcdFx0XHRcdFx0aWYgKGRhdGEgPT0gJycpIHtcblx0XHRcdFx0XHRcdFx0Ly8gcGFyc2VyIGVycm9yIC0gaWdub3JpbmcgcGF5bG9hZFxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gY2FsbGJhY2soZXJyLCAwLCAxKTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0dmFyIGxlbmd0aCA9ICcnLFxuXHRcdFx0XHRcdFx0ICAgIG4sXG5cdFx0XHRcdFx0XHQgICAgbXNnO1xuXG5cdFx0XHRcdFx0XHRmb3IgKHZhciBpID0gMCwgbCA9IGRhdGEubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdFx0XHRcdFx0XHRcdHZhciBjaHIgPSBkYXRhLmNoYXJBdChpKTtcblxuXHRcdFx0XHRcdFx0XHRpZiAoJzonICE9IGNocikge1xuXHRcdFx0XHRcdFx0XHRcdGxlbmd0aCArPSBjaHI7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKCcnID09IGxlbmd0aCB8fCBsZW5ndGggIT0gKG4gPSBOdW1iZXIobGVuZ3RoKSkpIHtcblx0XHRcdFx0XHRcdFx0XHRcdC8vIHBhcnNlciBlcnJvciAtIGlnbm9yaW5nIHBheWxvYWRcblx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiBjYWxsYmFjayhlcnIsIDAsIDEpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRcdG1zZyA9IGRhdGEuc3Vic3RyKGkgKyAxLCBuKTtcblxuXHRcdFx0XHRcdFx0XHRcdGlmIChsZW5ndGggIT0gbXNnLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gcGFyc2VyIGVycm9yIC0gaWdub3JpbmcgcGF5bG9hZFxuXHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIGNhbGxiYWNrKGVyciwgMCwgMSk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdFx0aWYgKG1zZy5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHBhY2tldCA9IGV4cG9ydHMuZGVjb2RlUGFja2V0KG1zZywgYmluYXJ5VHlwZSwgdHJ1ZSk7XG5cblx0XHRcdFx0XHRcdFx0XHRcdGlmIChlcnIudHlwZSA9PSBwYWNrZXQudHlwZSAmJiBlcnIuZGF0YSA9PSBwYWNrZXQuZGF0YSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBwYXJzZXIgZXJyb3IgaW4gaW5kaXZpZHVhbCBwYWNrZXQgLSBpZ25vcmluZyBwYXlsb2FkXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiBjYWxsYmFjayhlcnIsIDAsIDEpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdFx0XHR2YXIgcmV0ID0gY2FsbGJhY2socGFja2V0LCBpICsgbiwgbCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoZmFsc2UgPT09IHJldCkgcmV0dXJuO1xuXHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRcdC8vIGFkdmFuY2UgY3Vyc29yXG5cdFx0XHRcdFx0XHRcdFx0aSArPSBuO1xuXHRcdFx0XHRcdFx0XHRcdGxlbmd0aCA9ICcnO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGlmIChsZW5ndGggIT0gJycpIHtcblx0XHRcdFx0XHRcdFx0Ly8gcGFyc2VyIGVycm9yIC0gaWdub3JpbmcgcGF5bG9hZFxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gY2FsbGJhY2soZXJyLCAwLCAxKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9O1xuXG5cdFx0XHRcdFx0LyoqXG4gICAgICAqIEVuY29kZXMgbXVsdGlwbGUgbWVzc2FnZXMgKHBheWxvYWQpIGFzIGJpbmFyeS5cbiAgICAgICpcbiAgICAgICogPDEgPSBiaW5hcnksIDAgPSBzdHJpbmc+PG51bWJlciBmcm9tIDAtOT48bnVtYmVyIGZyb20gMC05PlsuLi5dPG51bWJlclxuICAgICAgKiAyNTU+PGRhdGE+XG4gICAgICAqXG4gICAgICAqIEV4YW1wbGU6XG4gICAgICAqIDEgMyAyNTUgMSAyIDMsIGlmIHRoZSBiaW5hcnkgY29udGVudHMgYXJlIGludGVycHJldGVkIGFzIDggYml0IGludGVnZXJzXG4gICAgICAqXG4gICAgICAqIEBwYXJhbSB7QXJyYXl9IHBhY2tldHNcbiAgICAgICogQHJldHVybiB7QXJyYXlCdWZmZXJ9IGVuY29kZWQgcGF5bG9hZFxuICAgICAgKiBAYXBpIHByaXZhdGVcbiAgICAgICovXG5cblx0XHRcdFx0XHRleHBvcnRzLmVuY29kZVBheWxvYWRBc0FycmF5QnVmZmVyID0gZnVuY3Rpb24gKHBhY2tldHMsIGNhbGxiYWNrKSB7XG5cdFx0XHRcdFx0XHRpZiAoIXBhY2tldHMubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBjYWxsYmFjayhuZXcgQXJyYXlCdWZmZXIoMCkpO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRmdW5jdGlvbiBlbmNvZGVPbmUocGFja2V0LCBkb25lQ2FsbGJhY2spIHtcblx0XHRcdFx0XHRcdFx0ZXhwb3J0cy5lbmNvZGVQYWNrZXQocGFja2V0LCB0cnVlLCB0cnVlLCBmdW5jdGlvbiAoZGF0YSkge1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybiBkb25lQ2FsbGJhY2sobnVsbCwgZGF0YSk7XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRtYXAocGFja2V0cywgZW5jb2RlT25lLCBmdW5jdGlvbiAoZXJyLCBlbmNvZGVkUGFja2V0cykge1xuXHRcdFx0XHRcdFx0XHR2YXIgdG90YWxMZW5ndGggPSBlbmNvZGVkUGFja2V0cy5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgcCkge1xuXHRcdFx0XHRcdFx0XHRcdHZhciBsZW47XG5cdFx0XHRcdFx0XHRcdFx0aWYgKHR5cGVvZiBwID09PSAnc3RyaW5nJykge1xuXHRcdFx0XHRcdFx0XHRcdFx0bGVuID0gcC5sZW5ndGg7XG5cdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRcdGxlbiA9IHAuYnl0ZUxlbmd0aDtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIGFjYyArIGxlbi50b1N0cmluZygpLmxlbmd0aCArIGxlbiArIDI7IC8vIHN0cmluZy9iaW5hcnkgaWRlbnRpZmllciArIHNlcGFyYXRvciA9IDJcblx0XHRcdFx0XHRcdFx0fSwgMCk7XG5cblx0XHRcdFx0XHRcdFx0dmFyIHJlc3VsdEFycmF5ID0gbmV3IFVpbnQ4QXJyYXkodG90YWxMZW5ndGgpO1xuXG5cdFx0XHRcdFx0XHRcdHZhciBidWZmZXJJbmRleCA9IDA7XG5cdFx0XHRcdFx0XHRcdGVuY29kZWRQYWNrZXRzLmZvckVhY2goZnVuY3Rpb24gKHApIHtcblx0XHRcdFx0XHRcdFx0XHR2YXIgaXNTdHJpbmcgPSB0eXBlb2YgcCA9PT0gJ3N0cmluZyc7XG5cdFx0XHRcdFx0XHRcdFx0dmFyIGFiID0gcDtcblx0XHRcdFx0XHRcdFx0XHRpZiAoaXNTdHJpbmcpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHZhciB2aWV3ID0gbmV3IFVpbnQ4QXJyYXkocC5sZW5ndGgpO1xuXHRcdFx0XHRcdFx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHZpZXdbaV0gPSBwLmNoYXJDb2RlQXQoaSk7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRhYiA9IHZpZXcuYnVmZmVyO1xuXHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRcdGlmIChpc1N0cmluZykge1xuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gbm90IHRydWUgYmluYXJ5XG5cdFx0XHRcdFx0XHRcdFx0XHRyZXN1bHRBcnJheVtidWZmZXJJbmRleCsrXSA9IDA7XG5cdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRcdC8vIHRydWUgYmluYXJ5XG5cdFx0XHRcdFx0XHRcdFx0XHRyZXN1bHRBcnJheVtidWZmZXJJbmRleCsrXSA9IDE7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdFx0dmFyIGxlblN0ciA9IGFiLmJ5dGVMZW5ndGgudG9TdHJpbmcoKTtcblx0XHRcdFx0XHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGxlblN0ci5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdFx0XHRcdFx0cmVzdWx0QXJyYXlbYnVmZmVySW5kZXgrK10gPSBwYXJzZUludChsZW5TdHJbaV0pO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRyZXN1bHRBcnJheVtidWZmZXJJbmRleCsrXSA9IDI1NTtcblxuXHRcdFx0XHRcdFx0XHRcdHZhciB2aWV3ID0gbmV3IFVpbnQ4QXJyYXkoYWIpO1xuXHRcdFx0XHRcdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgdmlldy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdFx0XHRcdFx0cmVzdWx0QXJyYXlbYnVmZmVySW5kZXgrK10gPSB2aWV3W2ldO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHRcdFx0cmV0dXJuIGNhbGxiYWNrKHJlc3VsdEFycmF5LmJ1ZmZlcik7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9O1xuXG5cdFx0XHRcdFx0LyoqXG4gICAgICAqIEVuY29kZSBhcyBCbG9iXG4gICAgICAqL1xuXG5cdFx0XHRcdFx0ZXhwb3J0cy5lbmNvZGVQYXlsb2FkQXNCbG9iID0gZnVuY3Rpb24gKHBhY2tldHMsIGNhbGxiYWNrKSB7XG5cdFx0XHRcdFx0XHRmdW5jdGlvbiBlbmNvZGVPbmUocGFja2V0LCBkb25lQ2FsbGJhY2spIHtcblx0XHRcdFx0XHRcdFx0ZXhwb3J0cy5lbmNvZGVQYWNrZXQocGFja2V0LCB0cnVlLCB0cnVlLCBmdW5jdGlvbiAoZW5jb2RlZCkge1xuXHRcdFx0XHRcdFx0XHRcdHZhciBiaW5hcnlJZGVudGlmaWVyID0gbmV3IFVpbnQ4QXJyYXkoMSk7XG5cdFx0XHRcdFx0XHRcdFx0YmluYXJ5SWRlbnRpZmllclswXSA9IDE7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKHR5cGVvZiBlbmNvZGVkID09PSAnc3RyaW5nJykge1xuXHRcdFx0XHRcdFx0XHRcdFx0dmFyIHZpZXcgPSBuZXcgVWludDhBcnJheShlbmNvZGVkLmxlbmd0aCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGVuY29kZWQubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dmlld1tpXSA9IGVuY29kZWQuY2hhckNvZGVBdChpKTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdGVuY29kZWQgPSB2aWV3LmJ1ZmZlcjtcblx0XHRcdFx0XHRcdFx0XHRcdGJpbmFyeUlkZW50aWZpZXJbMF0gPSAwO1xuXHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRcdHZhciBsZW4gPSBlbmNvZGVkIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIgPyBlbmNvZGVkLmJ5dGVMZW5ndGggOiBlbmNvZGVkLnNpemU7XG5cblx0XHRcdFx0XHRcdFx0XHR2YXIgbGVuU3RyID0gbGVuLnRvU3RyaW5nKCk7XG5cdFx0XHRcdFx0XHRcdFx0dmFyIGxlbmd0aEFyeSA9IG5ldyBVaW50OEFycmF5KGxlblN0ci5sZW5ndGggKyAxKTtcblx0XHRcdFx0XHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGxlblN0ci5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdFx0XHRcdFx0bGVuZ3RoQXJ5W2ldID0gcGFyc2VJbnQobGVuU3RyW2ldKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0bGVuZ3RoQXJ5W2xlblN0ci5sZW5ndGhdID0gMjU1O1xuXG5cdFx0XHRcdFx0XHRcdFx0aWYgKEJsb2IpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHZhciBibG9iID0gbmV3IEJsb2IoW2JpbmFyeUlkZW50aWZpZXIuYnVmZmVyLCBsZW5ndGhBcnkuYnVmZmVyLCBlbmNvZGVkXSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRkb25lQ2FsbGJhY2sobnVsbCwgYmxvYik7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0bWFwKHBhY2tldHMsIGVuY29kZU9uZSwgZnVuY3Rpb24gKGVyciwgcmVzdWx0cykge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gY2FsbGJhY2sobmV3IEJsb2IocmVzdWx0cykpO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fTtcblxuXHRcdFx0XHRcdC8qXG4gICAgICAqIERlY29kZXMgZGF0YSB3aGVuIGEgcGF5bG9hZCBpcyBtYXliZSBleHBlY3RlZC4gU3RyaW5ncyBhcmUgZGVjb2RlZCBieVxuICAgICAgKiBpbnRlcnByZXRpbmcgZWFjaCBieXRlIGFzIGEga2V5IGNvZGUgZm9yIGVudHJpZXMgbWFya2VkIHRvIHN0YXJ0IHdpdGggMC4gU2VlXG4gICAgICAqIGRlc2NyaXB0aW9uIG9mIGVuY29kZVBheWxvYWRBc0JpbmFyeVxuICAgICAgKlxuICAgICAgKiBAcGFyYW0ge0FycmF5QnVmZmVyfSBkYXRhLCBjYWxsYmFjayBtZXRob2RcbiAgICAgICogQGFwaSBwdWJsaWNcbiAgICAgICovXG5cblx0XHRcdFx0XHRleHBvcnRzLmRlY29kZVBheWxvYWRBc0JpbmFyeSA9IGZ1bmN0aW9uIChkYXRhLCBiaW5hcnlUeXBlLCBjYWxsYmFjaykge1xuXHRcdFx0XHRcdFx0aWYgKHR5cGVvZiBiaW5hcnlUeXBlID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdFx0XHRcdGNhbGxiYWNrID0gYmluYXJ5VHlwZTtcblx0XHRcdFx0XHRcdFx0YmluYXJ5VHlwZSA9IG51bGw7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdHZhciBidWZmZXJUYWlsID0gZGF0YTtcblx0XHRcdFx0XHRcdHZhciBidWZmZXJzID0gW107XG5cblx0XHRcdFx0XHRcdHZhciBudW1iZXJUb29Mb25nID0gZmFsc2U7XG5cdFx0XHRcdFx0XHR3aGlsZSAoYnVmZmVyVGFpbC5ieXRlTGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdFx0XHR2YXIgdGFpbEFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoYnVmZmVyVGFpbCk7XG5cdFx0XHRcdFx0XHRcdHZhciBpc1N0cmluZyA9IHRhaWxBcnJheVswXSA9PT0gMDtcblx0XHRcdFx0XHRcdFx0dmFyIG1zZ0xlbmd0aCA9ICcnO1xuXG5cdFx0XHRcdFx0XHRcdGZvciAodmFyIGkgPSAxOzsgaSsrKSB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKHRhaWxBcnJheVtpXSA9PSAyNTUpIGJyZWFrO1xuXG5cdFx0XHRcdFx0XHRcdFx0aWYgKG1zZ0xlbmd0aC5sZW5ndGggPiAzMTApIHtcblx0XHRcdFx0XHRcdFx0XHRcdG51bWJlclRvb0xvbmcgPSB0cnVlO1xuXHRcdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdFx0bXNnTGVuZ3RoICs9IHRhaWxBcnJheVtpXTtcblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdGlmIChudW1iZXJUb29Mb25nKSByZXR1cm4gY2FsbGJhY2soZXJyLCAwLCAxKTtcblxuXHRcdFx0XHRcdFx0XHRidWZmZXJUYWlsID0gc2xpY2VCdWZmZXIoYnVmZmVyVGFpbCwgMiArIG1zZ0xlbmd0aC5sZW5ndGgpO1xuXHRcdFx0XHRcdFx0XHRtc2dMZW5ndGggPSBwYXJzZUludChtc2dMZW5ndGgpO1xuXG5cdFx0XHRcdFx0XHRcdHZhciBtc2cgPSBzbGljZUJ1ZmZlcihidWZmZXJUYWlsLCAwLCBtc2dMZW5ndGgpO1xuXHRcdFx0XHRcdFx0XHRpZiAoaXNTdHJpbmcpIHtcblx0XHRcdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHRcdFx0bXNnID0gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLCBuZXcgVWludDhBcnJheShtc2cpKTtcblx0XHRcdFx0XHRcdFx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBpUGhvbmUgU2FmYXJpIGRvZXNuJ3QgbGV0IHlvdSBhcHBseSB0byB0eXBlZCBhcnJheXNcblx0XHRcdFx0XHRcdFx0XHRcdHZhciB0eXBlZCA9IG5ldyBVaW50OEFycmF5KG1zZyk7XG5cdFx0XHRcdFx0XHRcdFx0XHRtc2cgPSAnJztcblx0XHRcdFx0XHRcdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgdHlwZWQubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0bXNnICs9IFN0cmluZy5mcm9tQ2hhckNvZGUodHlwZWRbaV0pO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdGJ1ZmZlcnMucHVzaChtc2cpO1xuXHRcdFx0XHRcdFx0XHRidWZmZXJUYWlsID0gc2xpY2VCdWZmZXIoYnVmZmVyVGFpbCwgbXNnTGVuZ3RoKTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0dmFyIHRvdGFsID0gYnVmZmVycy5sZW5ndGg7XG5cdFx0XHRcdFx0XHRidWZmZXJzLmZvckVhY2goZnVuY3Rpb24gKGJ1ZmZlciwgaSkge1xuXHRcdFx0XHRcdFx0XHRjYWxsYmFjayhleHBvcnRzLmRlY29kZVBhY2tldChidWZmZXIsIGJpbmFyeVR5cGUsIHRydWUpLCBpLCB0b3RhbCk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHR9KS5jYWxsKHRoaXMsIHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiB0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDoge30pO1xuXHRcdFx0fSwge1xuXHRcdFx0XHRcIi4va2V5c1wiOiAyMCxcblx0XHRcdFx0XCJhZnRlclwiOiAxMSxcblx0XHRcdFx0XCJhcnJheWJ1ZmZlci5zbGljZVwiOiAxMixcblx0XHRcdFx0XCJiYXNlNjQtYXJyYXlidWZmZXJcIjogMTMsXG5cdFx0XHRcdFwiYmxvYlwiOiAxNCxcblx0XHRcdFx0XCJoYXMtYmluYXJ5XCI6IDIxLFxuXHRcdFx0XHRcInV0ZjhcIjogMjlcblx0XHRcdH1dLFxuXHRcdFx0MjA6IFtmdW5jdGlvbiAoX2RlcmVxXywgbW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XHRcdFx0LyoqXG4gICAgICogR2V0cyB0aGUga2V5cyBmb3IgYW4gb2JqZWN0LlxuICAgICAqXG4gICAgICogQHJldHVybiB7QXJyYXl9IGtleXNcbiAgICAgKiBAYXBpIHByaXZhdGVcbiAgICAgKi9cblxuXHRcdFx0XHRtb2R1bGUuZXhwb3J0cyA9IE9iamVjdC5rZXlzIHx8IGZ1bmN0aW9uIGtleXMob2JqKSB7XG5cdFx0XHRcdFx0dmFyIGFyciA9IFtdO1xuXHRcdFx0XHRcdHZhciBoYXMgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXG5cdFx0XHRcdFx0Zm9yICh2YXIgaSBpbiBvYmopIHtcblx0XHRcdFx0XHRcdGlmIChoYXMuY2FsbChvYmosIGkpKSB7XG5cdFx0XHRcdFx0XHRcdGFyci5wdXNoKGkpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gYXJyO1xuXHRcdFx0XHR9O1xuXHRcdFx0fSwge31dLFxuXHRcdFx0MjE6IFtmdW5jdGlvbiAoX2RlcmVxXywgbW9kdWxlLCBleHBvcnRzKSB7XG5cdFx0XHRcdChmdW5jdGlvbiAoZ2xvYmFsKSB7XG5cblx0XHRcdFx0XHQvKlxuICAgICAgKiBNb2R1bGUgcmVxdWlyZW1lbnRzLlxuICAgICAgKi9cblxuXHRcdFx0XHRcdHZhciBpc0FycmF5ID0gX2RlcmVxXygnaXNhcnJheScpO1xuXG5cdFx0XHRcdFx0LyoqXG4gICAgICAqIE1vZHVsZSBleHBvcnRzLlxuICAgICAgKi9cblxuXHRcdFx0XHRcdG1vZHVsZS5leHBvcnRzID0gaGFzQmluYXJ5O1xuXG5cdFx0XHRcdFx0LyoqXG4gICAgICAqIENoZWNrcyBmb3IgYmluYXJ5IGRhdGEuXG4gICAgICAqXG4gICAgICAqIFJpZ2h0IG5vdyBvbmx5IEJ1ZmZlciBhbmQgQXJyYXlCdWZmZXIgYXJlIHN1cHBvcnRlZC4uXG4gICAgICAqXG4gICAgICAqIEBwYXJhbSB7T2JqZWN0fSBhbnl0aGluZ1xuICAgICAgKiBAYXBpIHB1YmxpY1xuICAgICAgKi9cblxuXHRcdFx0XHRcdGZ1bmN0aW9uIGhhc0JpbmFyeShkYXRhKSB7XG5cblx0XHRcdFx0XHRcdGZ1bmN0aW9uIF9oYXNCaW5hcnkob2JqKSB7XG5cdFx0XHRcdFx0XHRcdGlmICghb2JqKSByZXR1cm4gZmFsc2U7XG5cblx0XHRcdFx0XHRcdFx0aWYgKGdsb2JhbC5CdWZmZXIgJiYgZ2xvYmFsLkJ1ZmZlci5pc0J1ZmZlcihvYmopIHx8IGdsb2JhbC5BcnJheUJ1ZmZlciAmJiBvYmogaW5zdGFuY2VvZiBBcnJheUJ1ZmZlciB8fCBnbG9iYWwuQmxvYiAmJiBvYmogaW5zdGFuY2VvZiBCbG9iIHx8IGdsb2JhbC5GaWxlICYmIG9iaiBpbnN0YW5jZW9mIEZpbGUpIHtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdGlmIChpc0FycmF5KG9iaikpIHtcblx0XHRcdFx0XHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IG9iai5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKF9oYXNCaW5hcnkob2JqW2ldKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAob2JqICYmICdvYmplY3QnID09ICh0eXBlb2Ygb2JqID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2Yob2JqKSkpIHtcblx0XHRcdFx0XHRcdFx0XHRpZiAob2JqLnRvSlNPTikge1xuXHRcdFx0XHRcdFx0XHRcdFx0b2JqID0gb2JqLnRvSlNPTigpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRcdGZvciAodmFyIGtleSBpbiBvYmopIHtcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpICYmIF9oYXNCaW5hcnkob2JqW2tleV0pKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0cmV0dXJuIF9oYXNCaW5hcnkoZGF0YSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KS5jYWxsKHRoaXMsIHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiB0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDoge30pO1xuXHRcdFx0fSwge1xuXHRcdFx0XHRcImlzYXJyYXlcIjogMjRcblx0XHRcdH1dLFxuXHRcdFx0MjI6IFtmdW5jdGlvbiAoX2RlcmVxXywgbW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XHRcdFx0LyoqXG4gICAgICogTW9kdWxlIGV4cG9ydHMuXG4gICAgICpcbiAgICAgKiBMb2dpYyBib3Jyb3dlZCBmcm9tIE1vZGVybml6cjpcbiAgICAgKlxuICAgICAqICAgLSBodHRwczovL2dpdGh1Yi5jb20vTW9kZXJuaXpyL01vZGVybml6ci9ibG9iL21hc3Rlci9mZWF0dXJlLWRldGVjdHMvY29ycy5qc1xuICAgICAqL1xuXG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0bW9kdWxlLmV4cG9ydHMgPSB0eXBlb2YgWE1MSHR0cFJlcXVlc3QgIT09ICd1bmRlZmluZWQnICYmICd3aXRoQ3JlZGVudGlhbHMnIGluIG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXHRcdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0XHQvLyBpZiBYTUxIdHRwIHN1cHBvcnQgaXMgZGlzYWJsZWQgaW4gSUUgdGhlbiBpdCB3aWxsIHRocm93XG5cdFx0XHRcdFx0Ly8gd2hlbiB0cnlpbmcgdG8gY3JlYXRlXG5cdFx0XHRcdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0fSwge31dLFxuXHRcdFx0MjM6IFtmdW5jdGlvbiAoX2RlcmVxXywgbW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XHRcdFx0dmFyIGluZGV4T2YgPSBbXS5pbmRleE9mO1xuXG5cdFx0XHRcdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGFyciwgb2JqKSB7XG5cdFx0XHRcdFx0aWYgKGluZGV4T2YpIHJldHVybiBhcnIuaW5kZXhPZihvYmopO1xuXHRcdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgKytpKSB7XG5cdFx0XHRcdFx0XHRpZiAoYXJyW2ldID09PSBvYmopIHJldHVybiBpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gLTE7XG5cdFx0XHRcdH07XG5cdFx0XHR9LCB7fV0sXG5cdFx0XHQyNDogW2Z1bmN0aW9uIChfZGVyZXFfLCBtb2R1bGUsIGV4cG9ydHMpIHtcblx0XHRcdFx0bW9kdWxlLmV4cG9ydHMgPSBBcnJheS5pc0FycmF5IHx8IGZ1bmN0aW9uIChhcnIpIHtcblx0XHRcdFx0XHRyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGFycikgPT0gJ1tvYmplY3QgQXJyYXldJztcblx0XHRcdFx0fTtcblx0XHRcdH0sIHt9XSxcblx0XHRcdDI1OiBbZnVuY3Rpb24gKF9kZXJlcV8sIG1vZHVsZSwgZXhwb3J0cykge1xuXHRcdFx0XHQvKipcbiAgICAgKiBIZWxwZXJzLlxuICAgICAqL1xuXG5cdFx0XHRcdHZhciBzID0gMTAwMDtcblx0XHRcdFx0dmFyIG0gPSBzICogNjA7XG5cdFx0XHRcdHZhciBoID0gbSAqIDYwO1xuXHRcdFx0XHR2YXIgZCA9IGggKiAyNDtcblx0XHRcdFx0dmFyIHkgPSBkICogMzY1LjI1O1xuXG5cdFx0XHRcdC8qKlxuICAgICAqIFBhcnNlIG9yIGZvcm1hdCB0aGUgZ2l2ZW4gYHZhbGAuXG4gICAgICpcbiAgICAgKiBPcHRpb25zOlxuICAgICAqXG4gICAgICogIC0gYGxvbmdgIHZlcmJvc2UgZm9ybWF0dGluZyBbZmFsc2VdXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ3xOdW1iZXJ9IHZhbFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gICAgICogQHJldHVybiB7U3RyaW5nfE51bWJlcn1cbiAgICAgKiBAYXBpIHB1YmxpY1xuICAgICAqL1xuXG5cdFx0XHRcdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHZhbCwgb3B0aW9ucykge1xuXHRcdFx0XHRcdG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXHRcdFx0XHRcdGlmICgnc3RyaW5nJyA9PSB0eXBlb2YgdmFsKSByZXR1cm4gcGFyc2UodmFsKTtcblx0XHRcdFx0XHRyZXR1cm4gb3B0aW9ucy5sb25nID8gbG9uZyh2YWwpIDogc2hvcnQodmFsKTtcblx0XHRcdFx0fTtcblxuXHRcdFx0XHQvKipcbiAgICAgKiBQYXJzZSB0aGUgZ2l2ZW4gYHN0cmAgYW5kIHJldHVybiBtaWxsaXNlY29uZHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gICAgICogQHJldHVybiB7TnVtYmVyfVxuICAgICAqIEBhcGkgcHJpdmF0ZVxuICAgICAqL1xuXG5cdFx0XHRcdGZ1bmN0aW9uIHBhcnNlKHN0cikge1xuXHRcdFx0XHRcdHN0ciA9ICcnICsgc3RyO1xuXHRcdFx0XHRcdGlmIChzdHIubGVuZ3RoID4gMTAwMDApIHJldHVybjtcblx0XHRcdFx0XHR2YXIgbWF0Y2ggPSAvXigoPzpcXGQrKT9cXC4/XFxkKykgKihtaWxsaXNlY29uZHM/fG1zZWNzP3xtc3xzZWNvbmRzP3xzZWNzP3xzfG1pbnV0ZXM/fG1pbnM/fG18aG91cnM/fGhycz98aHxkYXlzP3xkfHllYXJzP3x5cnM/fHkpPyQvaS5leGVjKHN0cik7XG5cdFx0XHRcdFx0aWYgKCFtYXRjaCkgcmV0dXJuO1xuXHRcdFx0XHRcdHZhciBuID0gcGFyc2VGbG9hdChtYXRjaFsxXSk7XG5cdFx0XHRcdFx0dmFyIHR5cGUgPSAobWF0Y2hbMl0gfHwgJ21zJykudG9Mb3dlckNhc2UoKTtcblx0XHRcdFx0XHRzd2l0Y2ggKHR5cGUpIHtcblx0XHRcdFx0XHRcdGNhc2UgJ3llYXJzJzpcblx0XHRcdFx0XHRcdGNhc2UgJ3llYXInOlxuXHRcdFx0XHRcdFx0Y2FzZSAneXJzJzpcblx0XHRcdFx0XHRcdGNhc2UgJ3lyJzpcblx0XHRcdFx0XHRcdGNhc2UgJ3knOlxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gbiAqIHk7XG5cdFx0XHRcdFx0XHRjYXNlICdkYXlzJzpcblx0XHRcdFx0XHRcdGNhc2UgJ2RheSc6XG5cdFx0XHRcdFx0XHRjYXNlICdkJzpcblx0XHRcdFx0XHRcdFx0cmV0dXJuIG4gKiBkO1xuXHRcdFx0XHRcdFx0Y2FzZSAnaG91cnMnOlxuXHRcdFx0XHRcdFx0Y2FzZSAnaG91cic6XG5cdFx0XHRcdFx0XHRjYXNlICdocnMnOlxuXHRcdFx0XHRcdFx0Y2FzZSAnaHInOlxuXHRcdFx0XHRcdFx0Y2FzZSAnaCc6XG5cdFx0XHRcdFx0XHRcdHJldHVybiBuICogaDtcblx0XHRcdFx0XHRcdGNhc2UgJ21pbnV0ZXMnOlxuXHRcdFx0XHRcdFx0Y2FzZSAnbWludXRlJzpcblx0XHRcdFx0XHRcdGNhc2UgJ21pbnMnOlxuXHRcdFx0XHRcdFx0Y2FzZSAnbWluJzpcblx0XHRcdFx0XHRcdGNhc2UgJ20nOlxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gbiAqIG07XG5cdFx0XHRcdFx0XHRjYXNlICdzZWNvbmRzJzpcblx0XHRcdFx0XHRcdGNhc2UgJ3NlY29uZCc6XG5cdFx0XHRcdFx0XHRjYXNlICdzZWNzJzpcblx0XHRcdFx0XHRcdGNhc2UgJ3NlYyc6XG5cdFx0XHRcdFx0XHRjYXNlICdzJzpcblx0XHRcdFx0XHRcdFx0cmV0dXJuIG4gKiBzO1xuXHRcdFx0XHRcdFx0Y2FzZSAnbWlsbGlzZWNvbmRzJzpcblx0XHRcdFx0XHRcdGNhc2UgJ21pbGxpc2Vjb25kJzpcblx0XHRcdFx0XHRcdGNhc2UgJ21zZWNzJzpcblx0XHRcdFx0XHRcdGNhc2UgJ21zZWMnOlxuXHRcdFx0XHRcdFx0Y2FzZSAnbXMnOlxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gbjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvKipcbiAgICAgKiBTaG9ydCBmb3JtYXQgZm9yIGBtc2AuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gbXNcbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAgICogQGFwaSBwcml2YXRlXG4gICAgICovXG5cblx0XHRcdFx0ZnVuY3Rpb24gc2hvcnQobXMpIHtcblx0XHRcdFx0XHRpZiAobXMgPj0gZCkgcmV0dXJuIE1hdGgucm91bmQobXMgLyBkKSArICdkJztcblx0XHRcdFx0XHRpZiAobXMgPj0gaCkgcmV0dXJuIE1hdGgucm91bmQobXMgLyBoKSArICdoJztcblx0XHRcdFx0XHRpZiAobXMgPj0gbSkgcmV0dXJuIE1hdGgucm91bmQobXMgLyBtKSArICdtJztcblx0XHRcdFx0XHRpZiAobXMgPj0gcykgcmV0dXJuIE1hdGgucm91bmQobXMgLyBzKSArICdzJztcblx0XHRcdFx0XHRyZXR1cm4gbXMgKyAnbXMnO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0LyoqXG4gICAgICogTG9uZyBmb3JtYXQgZm9yIGBtc2AuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gbXNcbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAgICogQGFwaSBwcml2YXRlXG4gICAgICovXG5cblx0XHRcdFx0ZnVuY3Rpb24gbG9uZyhtcykge1xuXHRcdFx0XHRcdHJldHVybiBwbHVyYWwobXMsIGQsICdkYXknKSB8fCBwbHVyYWwobXMsIGgsICdob3VyJykgfHwgcGx1cmFsKG1zLCBtLCAnbWludXRlJykgfHwgcGx1cmFsKG1zLCBzLCAnc2Vjb25kJykgfHwgbXMgKyAnIG1zJztcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8qKlxuICAgICAqIFBsdXJhbGl6YXRpb24gaGVscGVyLlxuICAgICAqL1xuXG5cdFx0XHRcdGZ1bmN0aW9uIHBsdXJhbChtcywgbiwgbmFtZSkge1xuXHRcdFx0XHRcdGlmIChtcyA8IG4pIHJldHVybjtcblx0XHRcdFx0XHRpZiAobXMgPCBuICogMS41KSByZXR1cm4gTWF0aC5mbG9vcihtcyAvIG4pICsgJyAnICsgbmFtZTtcblx0XHRcdFx0XHRyZXR1cm4gTWF0aC5jZWlsKG1zIC8gbikgKyAnICcgKyBuYW1lICsgJ3MnO1xuXHRcdFx0XHR9XG5cdFx0XHR9LCB7fV0sXG5cdFx0XHQyNjogW2Z1bmN0aW9uIChfZGVyZXFfLCBtb2R1bGUsIGV4cG9ydHMpIHtcblx0XHRcdFx0KGZ1bmN0aW9uIChnbG9iYWwpIHtcblx0XHRcdFx0XHQvKipcbiAgICAgICogSlNPTiBwYXJzZS5cbiAgICAgICpcbiAgICAgICogQHNlZSBCYXNlZCBvbiBqUXVlcnkjcGFyc2VKU09OIChNSVQpIGFuZCBKU09OMlxuICAgICAgKiBAYXBpIHByaXZhdGVcbiAgICAgICovXG5cblx0XHRcdFx0XHR2YXIgcnZhbGlkY2hhcnMgPSAvXltcXF0sOnt9XFxzXSokLztcblx0XHRcdFx0XHR2YXIgcnZhbGlkZXNjYXBlID0gL1xcXFwoPzpbXCJcXFxcXFwvYmZucnRdfHVbMC05YS1mQS1GXXs0fSkvZztcblx0XHRcdFx0XHR2YXIgcnZhbGlkdG9rZW5zID0gL1wiW15cIlxcXFxcXG5cXHJdKlwifHRydWV8ZmFsc2V8bnVsbHwtP1xcZCsoPzpcXC5cXGQqKT8oPzpbZUVdWytcXC1dP1xcZCspPy9nO1xuXHRcdFx0XHRcdHZhciBydmFsaWRicmFjZXMgPSAvKD86Xnw6fCwpKD86XFxzKlxcWykrL2c7XG5cdFx0XHRcdFx0dmFyIHJ0cmltTGVmdCA9IC9eXFxzKy87XG5cdFx0XHRcdFx0dmFyIHJ0cmltUmlnaHQgPSAvXFxzKyQvO1xuXG5cdFx0XHRcdFx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBwYXJzZWpzb24oZGF0YSkge1xuXHRcdFx0XHRcdFx0aWYgKCdzdHJpbmcnICE9IHR5cGVvZiBkYXRhIHx8ICFkYXRhKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBudWxsO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRkYXRhID0gZGF0YS5yZXBsYWNlKHJ0cmltTGVmdCwgJycpLnJlcGxhY2UocnRyaW1SaWdodCwgJycpO1xuXG5cdFx0XHRcdFx0XHQvLyBBdHRlbXB0IHRvIHBhcnNlIHVzaW5nIHRoZSBuYXRpdmUgSlNPTiBwYXJzZXIgZmlyc3Rcblx0XHRcdFx0XHRcdGlmIChnbG9iYWwuSlNPTiAmJiBKU09OLnBhcnNlKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBKU09OLnBhcnNlKGRhdGEpO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRpZiAocnZhbGlkY2hhcnMudGVzdChkYXRhLnJlcGxhY2UocnZhbGlkZXNjYXBlLCAnQCcpLnJlcGxhY2UocnZhbGlkdG9rZW5zLCAnXScpLnJlcGxhY2UocnZhbGlkYnJhY2VzLCAnJykpKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBuZXcgRnVuY3Rpb24oJ3JldHVybiAnICsgZGF0YSkoKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9O1xuXHRcdFx0XHR9KS5jYWxsKHRoaXMsIHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiB0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDoge30pO1xuXHRcdFx0fSwge31dLFxuXHRcdFx0Mjc6IFtmdW5jdGlvbiAoX2RlcmVxXywgbW9kdWxlLCBleHBvcnRzKSB7XG5cdFx0XHRcdC8qKlxuICAgICAqIENvbXBpbGVzIGEgcXVlcnlzdHJpbmdcbiAgICAgKiBSZXR1cm5zIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgb2JqZWN0XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH1cbiAgICAgKiBAYXBpIHByaXZhdGVcbiAgICAgKi9cblxuXHRcdFx0XHRleHBvcnRzLmVuY29kZSA9IGZ1bmN0aW9uIChvYmopIHtcblx0XHRcdFx0XHR2YXIgc3RyID0gJyc7XG5cblx0XHRcdFx0XHRmb3IgKHZhciBpIGluIG9iaikge1xuXHRcdFx0XHRcdFx0aWYgKG9iai5oYXNPd25Qcm9wZXJ0eShpKSkge1xuXHRcdFx0XHRcdFx0XHRpZiAoc3RyLmxlbmd0aCkgc3RyICs9ICcmJztcblx0XHRcdFx0XHRcdFx0c3RyICs9IGVuY29kZVVSSUNvbXBvbmVudChpKSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudChvYmpbaV0pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHJldHVybiBzdHI7XG5cdFx0XHRcdH07XG5cblx0XHRcdFx0LyoqXG4gICAgICogUGFyc2VzIGEgc2ltcGxlIHF1ZXJ5c3RyaW5nIGludG8gYW4gb2JqZWN0XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcXNcbiAgICAgKiBAYXBpIHByaXZhdGVcbiAgICAgKi9cblxuXHRcdFx0XHRleHBvcnRzLmRlY29kZSA9IGZ1bmN0aW9uIChxcykge1xuXHRcdFx0XHRcdHZhciBxcnkgPSB7fTtcblx0XHRcdFx0XHR2YXIgcGFpcnMgPSBxcy5zcGxpdCgnJicpO1xuXHRcdFx0XHRcdGZvciAodmFyIGkgPSAwLCBsID0gcGFpcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdFx0XHRcdFx0XHR2YXIgcGFpciA9IHBhaXJzW2ldLnNwbGl0KCc9Jyk7XG5cdFx0XHRcdFx0XHRxcnlbZGVjb2RlVVJJQ29tcG9uZW50KHBhaXJbMF0pXSA9IGRlY29kZVVSSUNvbXBvbmVudChwYWlyWzFdKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIHFyeTtcblx0XHRcdFx0fTtcblx0XHRcdH0sIHt9XSxcblx0XHRcdDI4OiBbZnVuY3Rpb24gKF9kZXJlcV8sIG1vZHVsZSwgZXhwb3J0cykge1xuXHRcdFx0XHQvKipcbiAgICAgKiBQYXJzZXMgYW4gVVJJXG4gICAgICpcbiAgICAgKiBAYXV0aG9yIFN0ZXZlbiBMZXZpdGhhbiA8c3RldmVubGV2aXRoYW4uY29tPiAoTUlUIGxpY2Vuc2UpXG4gICAgICogQGFwaSBwcml2YXRlXG4gICAgICovXG5cblx0XHRcdFx0dmFyIHJlID0gL14oPzooPyFbXjpAXSs6W146QFxcL10qQCkoaHR0cHxodHRwc3x3c3x3c3MpOlxcL1xcLyk/KCg/OigoW146QF0qKSg/OjooW146QF0qKSk/KT9AKT8oKD86W2EtZjAtOV17MCw0fTopezIsN31bYS1mMC05XXswLDR9fFteOlxcLz8jXSopKD86OihcXGQqKSk/KSgoKFxcLyg/OltePyNdKD8hW14/I1xcL10qXFwuW14/I1xcLy5dKyg/Ols/I118JCkpKSpcXC8/KT8oW14/I1xcL10qKSkoPzpcXD8oW14jXSopKT8oPzojKC4qKSk/KS87XG5cblx0XHRcdFx0dmFyIHBhcnRzID0gWydzb3VyY2UnLCAncHJvdG9jb2wnLCAnYXV0aG9yaXR5JywgJ3VzZXJJbmZvJywgJ3VzZXInLCAncGFzc3dvcmQnLCAnaG9zdCcsICdwb3J0JywgJ3JlbGF0aXZlJywgJ3BhdGgnLCAnZGlyZWN0b3J5JywgJ2ZpbGUnLCAncXVlcnknLCAnYW5jaG9yJ107XG5cblx0XHRcdFx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBwYXJzZXVyaShzdHIpIHtcblx0XHRcdFx0XHR2YXIgc3JjID0gc3RyLFxuXHRcdFx0XHRcdCAgICBiID0gc3RyLmluZGV4T2YoJ1snKSxcblx0XHRcdFx0XHQgICAgZSA9IHN0ci5pbmRleE9mKCddJyk7XG5cblx0XHRcdFx0XHRpZiAoYiAhPSAtMSAmJiBlICE9IC0xKSB7XG5cdFx0XHRcdFx0XHRzdHIgPSBzdHIuc3Vic3RyaW5nKDAsIGIpICsgc3RyLnN1YnN0cmluZyhiLCBlKS5yZXBsYWNlKC86L2csICc7JykgKyBzdHIuc3Vic3RyaW5nKGUsIHN0ci5sZW5ndGgpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHZhciBtID0gcmUuZXhlYyhzdHIgfHwgJycpLFxuXHRcdFx0XHRcdCAgICB1cmkgPSB7fSxcblx0XHRcdFx0XHQgICAgaSA9IDE0O1xuXG5cdFx0XHRcdFx0d2hpbGUgKGktLSkge1xuXHRcdFx0XHRcdFx0dXJpW3BhcnRzW2ldXSA9IG1baV0gfHwgJyc7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKGIgIT0gLTEgJiYgZSAhPSAtMSkge1xuXHRcdFx0XHRcdFx0dXJpLnNvdXJjZSA9IHNyYztcblx0XHRcdFx0XHRcdHVyaS5ob3N0ID0gdXJpLmhvc3Quc3Vic3RyaW5nKDEsIHVyaS5ob3N0Lmxlbmd0aCAtIDEpLnJlcGxhY2UoLzsvZywgJzonKTtcblx0XHRcdFx0XHRcdHVyaS5hdXRob3JpdHkgPSB1cmkuYXV0aG9yaXR5LnJlcGxhY2UoJ1snLCAnJykucmVwbGFjZSgnXScsICcnKS5yZXBsYWNlKC87L2csICc6Jyk7XG5cdFx0XHRcdFx0XHR1cmkuaXB2NnVyaSA9IHRydWU7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0cmV0dXJuIHVyaTtcblx0XHRcdFx0fTtcblx0XHRcdH0sIHt9XSxcblx0XHRcdDI5OiBbZnVuY3Rpb24gKF9kZXJlcV8sIG1vZHVsZSwgZXhwb3J0cykge1xuXHRcdFx0XHQoZnVuY3Rpb24gKGdsb2JhbCkge1xuXHRcdFx0XHRcdC8qISBodHRwczovL210aHMuYmUvdXRmOGpzIHYyLjAuMCBieSBAbWF0aGlhcyAqL1xuXHRcdFx0XHRcdDtcblx0XHRcdFx0XHQoZnVuY3Rpb24gKHJvb3QpIHtcblxuXHRcdFx0XHRcdFx0Ly8gRGV0ZWN0IGZyZWUgdmFyaWFibGVzIGBleHBvcnRzYFxuXHRcdFx0XHRcdFx0dmFyIGZyZWVFeHBvcnRzID0gKHR5cGVvZiBleHBvcnRzID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YoZXhwb3J0cykpID09ICdvYmplY3QnICYmIGV4cG9ydHM7XG5cblx0XHRcdFx0XHRcdC8vIERldGVjdCBmcmVlIHZhcmlhYmxlIGBtb2R1bGVgXG5cdFx0XHRcdFx0XHR2YXIgZnJlZU1vZHVsZSA9ICh0eXBlb2YgbW9kdWxlID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YobW9kdWxlKSkgPT0gJ29iamVjdCcgJiYgbW9kdWxlICYmIG1vZHVsZS5leHBvcnRzID09IGZyZWVFeHBvcnRzICYmIG1vZHVsZTtcblxuXHRcdFx0XHRcdFx0Ly8gRGV0ZWN0IGZyZWUgdmFyaWFibGUgYGdsb2JhbGAsIGZyb20gTm9kZS5qcyBvciBCcm93c2VyaWZpZWQgY29kZSxcblx0XHRcdFx0XHRcdC8vIGFuZCB1c2UgaXQgYXMgYHJvb3RgXG5cdFx0XHRcdFx0XHR2YXIgZnJlZUdsb2JhbCA9ICh0eXBlb2YgZ2xvYmFsID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YoZ2xvYmFsKSkgPT0gJ29iamVjdCcgJiYgZ2xvYmFsO1xuXHRcdFx0XHRcdFx0aWYgKGZyZWVHbG9iYWwuZ2xvYmFsID09PSBmcmVlR2xvYmFsIHx8IGZyZWVHbG9iYWwud2luZG93ID09PSBmcmVlR2xvYmFsKSB7XG5cdFx0XHRcdFx0XHRcdHJvb3QgPSBmcmVlR2xvYmFsO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRcdFx0XHRcdFx0dmFyIHN0cmluZ0Zyb21DaGFyQ29kZSA9IFN0cmluZy5mcm9tQ2hhckNvZGU7XG5cblx0XHRcdFx0XHRcdC8vIFRha2VuIGZyb20gaHR0cHM6Ly9tdGhzLmJlL3B1bnljb2RlXG5cdFx0XHRcdFx0XHRmdW5jdGlvbiB1Y3MyZGVjb2RlKHN0cmluZykge1xuXHRcdFx0XHRcdFx0XHR2YXIgb3V0cHV0ID0gW107XG5cdFx0XHRcdFx0XHRcdHZhciBjb3VudGVyID0gMDtcblx0XHRcdFx0XHRcdFx0dmFyIGxlbmd0aCA9IHN0cmluZy5sZW5ndGg7XG5cdFx0XHRcdFx0XHRcdHZhciB2YWx1ZTtcblx0XHRcdFx0XHRcdFx0dmFyIGV4dHJhO1xuXHRcdFx0XHRcdFx0XHR3aGlsZSAoY291bnRlciA8IGxlbmd0aCkge1xuXHRcdFx0XHRcdFx0XHRcdHZhbHVlID0gc3RyaW5nLmNoYXJDb2RlQXQoY291bnRlcisrKTtcblx0XHRcdFx0XHRcdFx0XHRpZiAodmFsdWUgPj0gMHhEODAwICYmIHZhbHVlIDw9IDB4REJGRiAmJiBjb3VudGVyIDwgbGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBoaWdoIHN1cnJvZ2F0ZSwgYW5kIHRoZXJlIGlzIGEgbmV4dCBjaGFyYWN0ZXJcblx0XHRcdFx0XHRcdFx0XHRcdGV4dHJhID0gc3RyaW5nLmNoYXJDb2RlQXQoY291bnRlcisrKTtcblx0XHRcdFx0XHRcdFx0XHRcdGlmICgoZXh0cmEgJiAweEZDMDApID09IDB4REMwMCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBsb3cgc3Vycm9nYXRlXG5cdFx0XHRcdFx0XHRcdFx0XHRcdG91dHB1dC5wdXNoKCgodmFsdWUgJiAweDNGRikgPDwgMTApICsgKGV4dHJhICYgMHgzRkYpICsgMHgxMDAwMCk7XG5cdFx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyB1bm1hdGNoZWQgc3Vycm9nYXRlOyBvbmx5IGFwcGVuZCB0aGlzIGNvZGUgdW5pdCwgaW4gY2FzZSB0aGUgbmV4dFxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBjb2RlIHVuaXQgaXMgdGhlIGhpZ2ggc3Vycm9nYXRlIG9mIGEgc3Vycm9nYXRlIHBhaXJcblx0XHRcdFx0XHRcdFx0XHRcdFx0b3V0cHV0LnB1c2godmFsdWUpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRjb3VudGVyLS07XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRcdG91dHB1dC5wdXNoKHZhbHVlKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0cmV0dXJuIG91dHB1dDtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0Ly8gVGFrZW4gZnJvbSBodHRwczovL210aHMuYmUvcHVueWNvZGVcblx0XHRcdFx0XHRcdGZ1bmN0aW9uIHVjczJlbmNvZGUoYXJyYXkpIHtcblx0XHRcdFx0XHRcdFx0dmFyIGxlbmd0aCA9IGFycmF5Lmxlbmd0aDtcblx0XHRcdFx0XHRcdFx0dmFyIGluZGV4ID0gLTE7XG5cdFx0XHRcdFx0XHRcdHZhciB2YWx1ZTtcblx0XHRcdFx0XHRcdFx0dmFyIG91dHB1dCA9ICcnO1xuXHRcdFx0XHRcdFx0XHR3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuXHRcdFx0XHRcdFx0XHRcdHZhbHVlID0gYXJyYXlbaW5kZXhdO1xuXHRcdFx0XHRcdFx0XHRcdGlmICh2YWx1ZSA+IDB4RkZGRikge1xuXHRcdFx0XHRcdFx0XHRcdFx0dmFsdWUgLT0gMHgxMDAwMDtcblx0XHRcdFx0XHRcdFx0XHRcdG91dHB1dCArPSBzdHJpbmdGcm9tQ2hhckNvZGUodmFsdWUgPj4+IDEwICYgMHgzRkYgfCAweEQ4MDApO1xuXHRcdFx0XHRcdFx0XHRcdFx0dmFsdWUgPSAweERDMDAgfCB2YWx1ZSAmIDB4M0ZGO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRvdXRwdXQgKz0gc3RyaW5nRnJvbUNoYXJDb2RlKHZhbHVlKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gb3V0cHV0O1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRmdW5jdGlvbiBjaGVja1NjYWxhclZhbHVlKGNvZGVQb2ludCkge1xuXHRcdFx0XHRcdFx0XHRpZiAoY29kZVBvaW50ID49IDB4RDgwMCAmJiBjb2RlUG9pbnQgPD0gMHhERkZGKSB7XG5cdFx0XHRcdFx0XHRcdFx0dGhyb3cgRXJyb3IoJ0xvbmUgc3Vycm9nYXRlIFUrJyArIGNvZGVQb2ludC50b1N0cmluZygxNikudG9VcHBlckNhc2UoKSArICcgaXMgbm90IGEgc2NhbGFyIHZhbHVlJyk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0XHRcdFx0XHRmdW5jdGlvbiBjcmVhdGVCeXRlKGNvZGVQb2ludCwgc2hpZnQpIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHN0cmluZ0Zyb21DaGFyQ29kZShjb2RlUG9pbnQgPj4gc2hpZnQgJiAweDNGIHwgMHg4MCk7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGZ1bmN0aW9uIGVuY29kZUNvZGVQb2ludChjb2RlUG9pbnQpIHtcblx0XHRcdFx0XHRcdFx0aWYgKChjb2RlUG9pbnQgJiAweEZGRkZGRjgwKSA9PSAwKSB7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gMS1ieXRlIHNlcXVlbmNlXG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIHN0cmluZ0Zyb21DaGFyQ29kZShjb2RlUG9pbnQpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdHZhciBzeW1ib2wgPSAnJztcblx0XHRcdFx0XHRcdFx0aWYgKChjb2RlUG9pbnQgJiAweEZGRkZGODAwKSA9PSAwKSB7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gMi1ieXRlIHNlcXVlbmNlXG5cdFx0XHRcdFx0XHRcdFx0c3ltYm9sID0gc3RyaW5nRnJvbUNoYXJDb2RlKGNvZGVQb2ludCA+PiA2ICYgMHgxRiB8IDB4QzApO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKChjb2RlUG9pbnQgJiAweEZGRkYwMDAwKSA9PSAwKSB7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gMy1ieXRlIHNlcXVlbmNlXG5cdFx0XHRcdFx0XHRcdFx0Y2hlY2tTY2FsYXJWYWx1ZShjb2RlUG9pbnQpO1xuXHRcdFx0XHRcdFx0XHRcdHN5bWJvbCA9IHN0cmluZ0Zyb21DaGFyQ29kZShjb2RlUG9pbnQgPj4gMTIgJiAweDBGIHwgMHhFMCk7XG5cdFx0XHRcdFx0XHRcdFx0c3ltYm9sICs9IGNyZWF0ZUJ5dGUoY29kZVBvaW50LCA2KTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIGlmICgoY29kZVBvaW50ICYgMHhGRkUwMDAwMCkgPT0gMCkge1xuXHRcdFx0XHRcdFx0XHRcdC8vIDQtYnl0ZSBzZXF1ZW5jZVxuXHRcdFx0XHRcdFx0XHRcdHN5bWJvbCA9IHN0cmluZ0Zyb21DaGFyQ29kZShjb2RlUG9pbnQgPj4gMTggJiAweDA3IHwgMHhGMCk7XG5cdFx0XHRcdFx0XHRcdFx0c3ltYm9sICs9IGNyZWF0ZUJ5dGUoY29kZVBvaW50LCAxMik7XG5cdFx0XHRcdFx0XHRcdFx0c3ltYm9sICs9IGNyZWF0ZUJ5dGUoY29kZVBvaW50LCA2KTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRzeW1ib2wgKz0gc3RyaW5nRnJvbUNoYXJDb2RlKGNvZGVQb2ludCAmIDB4M0YgfCAweDgwKTtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHN5bWJvbDtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0ZnVuY3Rpb24gdXRmOGVuY29kZShzdHJpbmcpIHtcblx0XHRcdFx0XHRcdFx0dmFyIGNvZGVQb2ludHMgPSB1Y3MyZGVjb2RlKHN0cmluZyk7XG5cdFx0XHRcdFx0XHRcdHZhciBsZW5ndGggPSBjb2RlUG9pbnRzLmxlbmd0aDtcblx0XHRcdFx0XHRcdFx0dmFyIGluZGV4ID0gLTE7XG5cdFx0XHRcdFx0XHRcdHZhciBjb2RlUG9pbnQ7XG5cdFx0XHRcdFx0XHRcdHZhciBieXRlU3RyaW5nID0gJyc7XG5cdFx0XHRcdFx0XHRcdHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29kZVBvaW50ID0gY29kZVBvaW50c1tpbmRleF07XG5cdFx0XHRcdFx0XHRcdFx0Ynl0ZVN0cmluZyArPSBlbmNvZGVDb2RlUG9pbnQoY29kZVBvaW50KTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gYnl0ZVN0cmluZztcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0XHRcdFx0XHRcdGZ1bmN0aW9uIHJlYWRDb250aW51YXRpb25CeXRlKCkge1xuXHRcdFx0XHRcdFx0XHRpZiAoYnl0ZUluZGV4ID49IGJ5dGVDb3VudCkge1xuXHRcdFx0XHRcdFx0XHRcdHRocm93IEVycm9yKCdJbnZhbGlkIGJ5dGUgaW5kZXgnKTtcblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdHZhciBjb250aW51YXRpb25CeXRlID0gYnl0ZUFycmF5W2J5dGVJbmRleF0gJiAweEZGO1xuXHRcdFx0XHRcdFx0XHRieXRlSW5kZXgrKztcblxuXHRcdFx0XHRcdFx0XHRpZiAoKGNvbnRpbnVhdGlvbkJ5dGUgJiAweEMwKSA9PSAweDgwKSB7XG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIGNvbnRpbnVhdGlvbkJ5dGUgJiAweDNGO1xuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0Ly8gSWYgd2UgZW5kIHVwIGhlcmUsIGl04oCZcyBub3QgYSBjb250aW51YXRpb24gYnl0ZVxuXHRcdFx0XHRcdFx0XHR0aHJvdyBFcnJvcignSW52YWxpZCBjb250aW51YXRpb24gYnl0ZScpO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRmdW5jdGlvbiBkZWNvZGVTeW1ib2woKSB7XG5cdFx0XHRcdFx0XHRcdHZhciBieXRlMTtcblx0XHRcdFx0XHRcdFx0dmFyIGJ5dGUyO1xuXHRcdFx0XHRcdFx0XHR2YXIgYnl0ZTM7XG5cdFx0XHRcdFx0XHRcdHZhciBieXRlNDtcblx0XHRcdFx0XHRcdFx0dmFyIGNvZGVQb2ludDtcblxuXHRcdFx0XHRcdFx0XHRpZiAoYnl0ZUluZGV4ID4gYnl0ZUNvdW50KSB7XG5cdFx0XHRcdFx0XHRcdFx0dGhyb3cgRXJyb3IoJ0ludmFsaWQgYnl0ZSBpbmRleCcpO1xuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0aWYgKGJ5dGVJbmRleCA9PSBieXRlQ291bnQpIHtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHQvLyBSZWFkIGZpcnN0IGJ5dGVcblx0XHRcdFx0XHRcdFx0Ynl0ZTEgPSBieXRlQXJyYXlbYnl0ZUluZGV4XSAmIDB4RkY7XG5cdFx0XHRcdFx0XHRcdGJ5dGVJbmRleCsrO1xuXG5cdFx0XHRcdFx0XHRcdC8vIDEtYnl0ZSBzZXF1ZW5jZSAobm8gY29udGludWF0aW9uIGJ5dGVzKVxuXHRcdFx0XHRcdFx0XHRpZiAoKGJ5dGUxICYgMHg4MCkgPT0gMCkge1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybiBieXRlMTtcblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdC8vIDItYnl0ZSBzZXF1ZW5jZVxuXHRcdFx0XHRcdFx0XHRpZiAoKGJ5dGUxICYgMHhFMCkgPT0gMHhDMCkge1xuXHRcdFx0XHRcdFx0XHRcdHZhciBieXRlMiA9IHJlYWRDb250aW51YXRpb25CeXRlKCk7XG5cdFx0XHRcdFx0XHRcdFx0Y29kZVBvaW50ID0gKGJ5dGUxICYgMHgxRikgPDwgNiB8IGJ5dGUyO1xuXHRcdFx0XHRcdFx0XHRcdGlmIChjb2RlUG9pbnQgPj0gMHg4MCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIGNvZGVQb2ludDtcblx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0dGhyb3cgRXJyb3IoJ0ludmFsaWQgY29udGludWF0aW9uIGJ5dGUnKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHQvLyAzLWJ5dGUgc2VxdWVuY2UgKG1heSBpbmNsdWRlIHVucGFpcmVkIHN1cnJvZ2F0ZXMpXG5cdFx0XHRcdFx0XHRcdGlmICgoYnl0ZTEgJiAweEYwKSA9PSAweEUwKSB7XG5cdFx0XHRcdFx0XHRcdFx0Ynl0ZTIgPSByZWFkQ29udGludWF0aW9uQnl0ZSgpO1xuXHRcdFx0XHRcdFx0XHRcdGJ5dGUzID0gcmVhZENvbnRpbnVhdGlvbkJ5dGUoKTtcblx0XHRcdFx0XHRcdFx0XHRjb2RlUG9pbnQgPSAoYnl0ZTEgJiAweDBGKSA8PCAxMiB8IGJ5dGUyIDw8IDYgfCBieXRlMztcblx0XHRcdFx0XHRcdFx0XHRpZiAoY29kZVBvaW50ID49IDB4MDgwMCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0Y2hlY2tTY2FsYXJWYWx1ZShjb2RlUG9pbnQpO1xuXHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIGNvZGVQb2ludDtcblx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0dGhyb3cgRXJyb3IoJ0ludmFsaWQgY29udGludWF0aW9uIGJ5dGUnKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHQvLyA0LWJ5dGUgc2VxdWVuY2Vcblx0XHRcdFx0XHRcdFx0aWYgKChieXRlMSAmIDB4RjgpID09IDB4RjApIHtcblx0XHRcdFx0XHRcdFx0XHRieXRlMiA9IHJlYWRDb250aW51YXRpb25CeXRlKCk7XG5cdFx0XHRcdFx0XHRcdFx0Ynl0ZTMgPSByZWFkQ29udGludWF0aW9uQnl0ZSgpO1xuXHRcdFx0XHRcdFx0XHRcdGJ5dGU0ID0gcmVhZENvbnRpbnVhdGlvbkJ5dGUoKTtcblx0XHRcdFx0XHRcdFx0XHRjb2RlUG9pbnQgPSAoYnl0ZTEgJiAweDBGKSA8PCAweDEyIHwgYnl0ZTIgPDwgMHgwQyB8IGJ5dGUzIDw8IDB4MDYgfCBieXRlNDtcblx0XHRcdFx0XHRcdFx0XHRpZiAoY29kZVBvaW50ID49IDB4MDEwMDAwICYmIGNvZGVQb2ludCA8PSAweDEwRkZGRikge1xuXHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIGNvZGVQb2ludDtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHR0aHJvdyBFcnJvcignSW52YWxpZCBVVEYtOCBkZXRlY3RlZCcpO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHR2YXIgYnl0ZUFycmF5O1xuXHRcdFx0XHRcdFx0dmFyIGJ5dGVDb3VudDtcblx0XHRcdFx0XHRcdHZhciBieXRlSW5kZXg7XG5cblx0XHRcdFx0XHRcdGZ1bmN0aW9uIHV0ZjhkZWNvZGUoYnl0ZVN0cmluZykge1xuXHRcdFx0XHRcdFx0XHRieXRlQXJyYXkgPSB1Y3MyZGVjb2RlKGJ5dGVTdHJpbmcpO1xuXHRcdFx0XHRcdFx0XHRieXRlQ291bnQgPSBieXRlQXJyYXkubGVuZ3RoO1xuXHRcdFx0XHRcdFx0XHRieXRlSW5kZXggPSAwO1xuXHRcdFx0XHRcdFx0XHR2YXIgY29kZVBvaW50cyA9IFtdO1xuXHRcdFx0XHRcdFx0XHR2YXIgdG1wO1xuXHRcdFx0XHRcdFx0XHR3aGlsZSAoKHRtcCA9IGRlY29kZVN5bWJvbCgpKSAhPT0gZmFsc2UpIHtcblx0XHRcdFx0XHRcdFx0XHRjb2RlUG9pbnRzLnB1c2godG1wKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gdWNzMmVuY29kZShjb2RlUG9pbnRzKTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0XHRcdFx0XHRcdHZhciB1dGY4ID0ge1xuXHRcdFx0XHRcdFx0XHQndmVyc2lvbic6ICcyLjAuMCcsXG5cdFx0XHRcdFx0XHRcdCdlbmNvZGUnOiB1dGY4ZW5jb2RlLFxuXHRcdFx0XHRcdFx0XHQnZGVjb2RlJzogdXRmOGRlY29kZVxuXHRcdFx0XHRcdFx0fTtcblxuXHRcdFx0XHRcdFx0Ly8gU29tZSBBTUQgYnVpbGQgb3B0aW1pemVycywgbGlrZSByLmpzLCBjaGVjayBmb3Igc3BlY2lmaWMgY29uZGl0aW9uIHBhdHRlcm5zXG5cdFx0XHRcdFx0XHQvLyBsaWtlIHRoZSBmb2xsb3dpbmc6XG5cdFx0XHRcdFx0XHRpZiAodHlwZW9mIGRlZmluZSA9PSAnZnVuY3Rpb24nICYmIF90eXBlb2YoZGVmaW5lLmFtZCkgPT0gJ29iamVjdCcgJiYgZGVmaW5lLmFtZCkge1xuXHRcdFx0XHRcdFx0XHRkZWZpbmUoZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybiB1dGY4O1xuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoZnJlZUV4cG9ydHMgJiYgIWZyZWVFeHBvcnRzLm5vZGVUeXBlKSB7XG5cdFx0XHRcdFx0XHRcdGlmIChmcmVlTW9kdWxlKSB7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gaW4gTm9kZS5qcyBvciBSaW5nb0pTIHYwLjguMCtcblx0XHRcdFx0XHRcdFx0XHRmcmVlTW9kdWxlLmV4cG9ydHMgPSB1dGY4O1xuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdC8vIGluIE5hcndoYWwgb3IgUmluZ29KUyB2MC43LjAtXG5cdFx0XHRcdFx0XHRcdFx0dmFyIG9iamVjdCA9IHt9O1xuXHRcdFx0XHRcdFx0XHRcdHZhciBoYXNPd25Qcm9wZXJ0eSA9IG9iamVjdC5oYXNPd25Qcm9wZXJ0eTtcblx0XHRcdFx0XHRcdFx0XHRmb3IgKHZhciBrZXkgaW4gdXRmOCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0aGFzT3duUHJvcGVydHkuY2FsbCh1dGY4LCBrZXkpICYmIChmcmVlRXhwb3J0c1trZXldID0gdXRmOFtrZXldKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdC8vIGluIFJoaW5vIG9yIGEgd2ViIGJyb3dzZXJcblx0XHRcdFx0XHRcdFx0cm9vdC51dGY4ID0gdXRmODtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KSh0aGlzKTtcblx0XHRcdFx0fSkuY2FsbCh0aGlzLCB0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDogdHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiA/IGdsb2JhbCA6IHt9KTtcblx0XHRcdH0sIHt9XSxcblx0XHRcdDMwOiBbZnVuY3Rpb24gKF9kZXJlcV8sIG1vZHVsZSwgZXhwb3J0cykge1xuXHRcdFx0XHQndXNlIHN0cmljdCc7XG5cblx0XHRcdFx0dmFyIGFscGhhYmV0ID0gJzAxMjM0NTY3ODlBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6LV8nLnNwbGl0KCcnKSxcblx0XHRcdFx0ICAgIGxlbmd0aCA9IDY0LFxuXHRcdFx0XHQgICAgbWFwID0ge30sXG5cdFx0XHRcdCAgICBzZWVkID0gMCxcblx0XHRcdFx0ICAgIGkgPSAwLFxuXHRcdFx0XHQgICAgcHJldjtcblxuXHRcdFx0XHQvKipcbiAgICAgKiBSZXR1cm4gYSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBzcGVjaWZpZWQgbnVtYmVyLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IG51bSBUaGUgbnVtYmVyIHRvIGNvbnZlcnQuXG4gICAgICogQHJldHVybnMge1N0cmluZ30gVGhlIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgbnVtYmVyLlxuICAgICAqIEBhcGkgcHVibGljXG4gICAgICovXG5cdFx0XHRcdGZ1bmN0aW9uIGVuY29kZShudW0pIHtcblx0XHRcdFx0XHR2YXIgZW5jb2RlZCA9ICcnO1xuXG5cdFx0XHRcdFx0ZG8ge1xuXHRcdFx0XHRcdFx0ZW5jb2RlZCA9IGFscGhhYmV0W251bSAlIGxlbmd0aF0gKyBlbmNvZGVkO1xuXHRcdFx0XHRcdFx0bnVtID0gTWF0aC5mbG9vcihudW0gLyBsZW5ndGgpO1xuXHRcdFx0XHRcdH0gd2hpbGUgKG51bSA+IDApO1xuXG5cdFx0XHRcdFx0cmV0dXJuIGVuY29kZWQ7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvKipcbiAgICAgKiBSZXR1cm4gdGhlIGludGVnZXIgdmFsdWUgc3BlY2lmaWVkIGJ5IHRoZSBnaXZlbiBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gc3RyIFRoZSBzdHJpbmcgdG8gY29udmVydC5cbiAgICAgKiBAcmV0dXJucyB7TnVtYmVyfSBUaGUgaW50ZWdlciB2YWx1ZSByZXByZXNlbnRlZCBieSB0aGUgc3RyaW5nLlxuICAgICAqIEBhcGkgcHVibGljXG4gICAgICovXG5cdFx0XHRcdGZ1bmN0aW9uIGRlY29kZShzdHIpIHtcblx0XHRcdFx0XHR2YXIgZGVjb2RlZCA9IDA7XG5cblx0XHRcdFx0XHRmb3IgKGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0XHRkZWNvZGVkID0gZGVjb2RlZCAqIGxlbmd0aCArIG1hcFtzdHIuY2hhckF0KGkpXTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRyZXR1cm4gZGVjb2RlZDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8qKlxuICAgICAqIFllYXN0OiBBIHRpbnkgZ3Jvd2luZyBpZCBnZW5lcmF0b3IuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7U3RyaW5nfSBBIHVuaXF1ZSBpZC5cbiAgICAgKiBAYXBpIHB1YmxpY1xuICAgICAqL1xuXHRcdFx0XHRmdW5jdGlvbiB5ZWFzdCgpIHtcblx0XHRcdFx0XHR2YXIgbm93ID0gZW5jb2RlKCtuZXcgRGF0ZSgpKTtcblxuXHRcdFx0XHRcdGlmIChub3cgIT09IHByZXYpIHJldHVybiBzZWVkID0gMCwgcHJldiA9IG5vdztcblx0XHRcdFx0XHRyZXR1cm4gbm93ICsgJy4nICsgZW5jb2RlKHNlZWQrKyk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvL1xuXHRcdFx0XHQvLyBNYXAgZWFjaCBjaGFyYWN0ZXIgdG8gaXRzIGluZGV4LlxuXHRcdFx0XHQvL1xuXHRcdFx0XHRmb3IgKDsgaSA8IGxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0bWFwW2FscGhhYmV0W2ldXSA9IGk7XG5cdFx0XHRcdH0gLy9cblx0XHRcdFx0Ly8gRXhwb3NlIHRoZSBgeWVhc3RgLCBgZW5jb2RlYCBhbmQgYGRlY29kZWAgZnVuY3Rpb25zLlxuXHRcdFx0XHQvL1xuXHRcdFx0XHR5ZWFzdC5lbmNvZGUgPSBlbmNvZGU7XG5cdFx0XHRcdHllYXN0LmRlY29kZSA9IGRlY29kZTtcblx0XHRcdFx0bW9kdWxlLmV4cG9ydHMgPSB5ZWFzdDtcblx0XHRcdH0sIHt9XSxcblx0XHRcdDMxOiBbZnVuY3Rpb24gKF9kZXJlcV8sIG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFx0XHRcdC8qKlxuICAgICAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gICAgICovXG5cblx0XHRcdFx0dmFyIHVybCA9IF9kZXJlcV8oJy4vdXJsJyk7XG5cdFx0XHRcdHZhciBwYXJzZXIgPSBfZGVyZXFfKCdzb2NrZXQuaW8tcGFyc2VyJyk7XG5cdFx0XHRcdHZhciBNYW5hZ2VyID0gX2RlcmVxXygnLi9tYW5hZ2VyJyk7XG5cdFx0XHRcdHZhciBkZWJ1ZyA9IF9kZXJlcV8oJ2RlYnVnJykoJ3NvY2tldC5pby1jbGllbnQnKTtcblxuXHRcdFx0XHQvKipcbiAgICAgKiBNb2R1bGUgZXhwb3J0cy5cbiAgICAgKi9cblxuXHRcdFx0XHRtb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHMgPSBsb29rdXA7XG5cblx0XHRcdFx0LyoqXG4gICAgICogTWFuYWdlcnMgY2FjaGUuXG4gICAgICovXG5cblx0XHRcdFx0dmFyIGNhY2hlID0gZXhwb3J0cy5tYW5hZ2VycyA9IHt9O1xuXG5cdFx0XHRcdC8qKlxuICAgICAqIExvb2tzIHVwIGFuIGV4aXN0aW5nIGBNYW5hZ2VyYCBmb3IgbXVsdGlwbGV4aW5nLlxuICAgICAqIElmIHRoZSB1c2VyIHN1bW1vbnM6XG4gICAgICpcbiAgICAgKiAgIGBpbygnaHR0cDovL2xvY2FsaG9zdC9hJyk7YFxuICAgICAqICAgYGlvKCdodHRwOi8vbG9jYWxob3N0L2InKTtgXG4gICAgICpcbiAgICAgKiBXZSByZXVzZSB0aGUgZXhpc3RpbmcgaW5zdGFuY2UgYmFzZWQgb24gc2FtZSBzY2hlbWUvcG9ydC9ob3N0LFxuICAgICAqIGFuZCB3ZSBpbml0aWFsaXplIHNvY2tldHMgZm9yIGVhY2ggbmFtZXNwYWNlLlxuICAgICAqXG4gICAgICogQGFwaSBwdWJsaWNcbiAgICAgKi9cblxuXHRcdFx0XHRmdW5jdGlvbiBsb29rdXAodXJpLCBvcHRzKSB7XG5cdFx0XHRcdFx0aWYgKCh0eXBlb2YgdXJpID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YodXJpKSkgPT0gJ29iamVjdCcpIHtcblx0XHRcdFx0XHRcdG9wdHMgPSB1cmk7XG5cdFx0XHRcdFx0XHR1cmkgPSB1bmRlZmluZWQ7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0b3B0cyA9IG9wdHMgfHwge307XG5cblx0XHRcdFx0XHR2YXIgcGFyc2VkID0gdXJsKHVyaSk7XG5cdFx0XHRcdFx0dmFyIHNvdXJjZSA9IHBhcnNlZC5zb3VyY2U7XG5cdFx0XHRcdFx0dmFyIGlkID0gcGFyc2VkLmlkO1xuXHRcdFx0XHRcdHZhciBwYXRoID0gcGFyc2VkLnBhdGg7XG5cdFx0XHRcdFx0dmFyIHNhbWVOYW1lc3BhY2UgPSBjYWNoZVtpZF0gJiYgcGF0aCBpbiBjYWNoZVtpZF0ubnNwcztcblx0XHRcdFx0XHR2YXIgbmV3Q29ubmVjdGlvbiA9IG9wdHMuZm9yY2VOZXcgfHwgb3B0c1snZm9yY2UgbmV3IGNvbm5lY3Rpb24nXSB8fCBmYWxzZSA9PT0gb3B0cy5tdWx0aXBsZXggfHwgc2FtZU5hbWVzcGFjZTtcblxuXHRcdFx0XHRcdHZhciBpbztcblxuXHRcdFx0XHRcdGlmIChuZXdDb25uZWN0aW9uKSB7XG5cdFx0XHRcdFx0XHRkZWJ1ZygnaWdub3Jpbmcgc29ja2V0IGNhY2hlIGZvciAlcycsIHNvdXJjZSk7XG5cdFx0XHRcdFx0XHRpbyA9IE1hbmFnZXIoc291cmNlLCBvcHRzKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0aWYgKCFjYWNoZVtpZF0pIHtcblx0XHRcdFx0XHRcdFx0ZGVidWcoJ25ldyBpbyBpbnN0YW5jZSBmb3IgJXMnLCBzb3VyY2UpO1xuXHRcdFx0XHRcdFx0XHRjYWNoZVtpZF0gPSBNYW5hZ2VyKHNvdXJjZSwgb3B0cyk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpbyA9IGNhY2hlW2lkXTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRyZXR1cm4gaW8uc29ja2V0KHBhcnNlZC5wYXRoKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8qKlxuICAgICAqIFByb3RvY29sIHZlcnNpb24uXG4gICAgICpcbiAgICAgKiBAYXBpIHB1YmxpY1xuICAgICAqL1xuXG5cdFx0XHRcdGV4cG9ydHMucHJvdG9jb2wgPSBwYXJzZXIucHJvdG9jb2w7XG5cblx0XHRcdFx0LyoqXG4gICAgICogYGNvbm5lY3RgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHVyaVxuICAgICAqIEBhcGkgcHVibGljXG4gICAgICovXG5cblx0XHRcdFx0ZXhwb3J0cy5jb25uZWN0ID0gbG9va3VwO1xuXG5cdFx0XHRcdC8qKlxuICAgICAqIEV4cG9zZSBjb25zdHJ1Y3RvcnMgZm9yIHN0YW5kYWxvbmUgYnVpbGQuXG4gICAgICpcbiAgICAgKiBAYXBpIHB1YmxpY1xuICAgICAqL1xuXG5cdFx0XHRcdGV4cG9ydHMuTWFuYWdlciA9IF9kZXJlcV8oJy4vbWFuYWdlcicpO1xuXHRcdFx0XHRleHBvcnRzLlNvY2tldCA9IF9kZXJlcV8oJy4vc29ja2V0Jyk7XG5cdFx0XHR9LCB7XG5cdFx0XHRcdFwiLi9tYW5hZ2VyXCI6IDMyLFxuXHRcdFx0XHRcIi4vc29ja2V0XCI6IDM0LFxuXHRcdFx0XHRcIi4vdXJsXCI6IDM1LFxuXHRcdFx0XHRcImRlYnVnXCI6IDM5LFxuXHRcdFx0XHRcInNvY2tldC5pby1wYXJzZXJcIjogNDdcblx0XHRcdH1dLFxuXHRcdFx0MzI6IFtmdW5jdGlvbiAoX2RlcmVxXywgbW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XHRcdFx0LyoqXG4gICAgICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAgICAgKi9cblxuXHRcdFx0XHR2YXIgZWlvID0gX2RlcmVxXygnZW5naW5lLmlvLWNsaWVudCcpO1xuXHRcdFx0XHR2YXIgU29ja2V0ID0gX2RlcmVxXygnLi9zb2NrZXQnKTtcblx0XHRcdFx0dmFyIEVtaXR0ZXIgPSBfZGVyZXFfKCdjb21wb25lbnQtZW1pdHRlcicpO1xuXHRcdFx0XHR2YXIgcGFyc2VyID0gX2RlcmVxXygnc29ja2V0LmlvLXBhcnNlcicpO1xuXHRcdFx0XHR2YXIgb24gPSBfZGVyZXFfKCcuL29uJyk7XG5cdFx0XHRcdHZhciBiaW5kID0gX2RlcmVxXygnY29tcG9uZW50LWJpbmQnKTtcblx0XHRcdFx0dmFyIGRlYnVnID0gX2RlcmVxXygnZGVidWcnKSgnc29ja2V0LmlvLWNsaWVudDptYW5hZ2VyJyk7XG5cdFx0XHRcdHZhciBpbmRleE9mID0gX2RlcmVxXygnaW5kZXhvZicpO1xuXHRcdFx0XHR2YXIgQmFja29mZiA9IF9kZXJlcV8oJ2JhY2tvMicpO1xuXG5cdFx0XHRcdC8qKlxuICAgICAqIElFNisgaGFzT3duUHJvcGVydHlcbiAgICAgKi9cblxuXHRcdFx0XHR2YXIgaGFzID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcblxuXHRcdFx0XHQvKipcbiAgICAgKiBNb2R1bGUgZXhwb3J0c1xuICAgICAqL1xuXG5cdFx0XHRcdG1vZHVsZS5leHBvcnRzID0gTWFuYWdlcjtcblxuXHRcdFx0XHQvKipcbiAgICAgKiBgTWFuYWdlcmAgY29uc3RydWN0b3IuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZW5naW5lIGluc3RhbmNlIG9yIGVuZ2luZSB1cmkvb3B0c1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gICAgICogQGFwaSBwdWJsaWNcbiAgICAgKi9cblxuXHRcdFx0XHRmdW5jdGlvbiBNYW5hZ2VyKHVyaSwgb3B0cykge1xuXHRcdFx0XHRcdGlmICghKHRoaXMgaW5zdGFuY2VvZiBNYW5hZ2VyKSkgcmV0dXJuIG5ldyBNYW5hZ2VyKHVyaSwgb3B0cyk7XG5cdFx0XHRcdFx0aWYgKHVyaSAmJiAnb2JqZWN0JyA9PSAodHlwZW9mIHVyaSA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBfdHlwZW9mKHVyaSkpKSB7XG5cdFx0XHRcdFx0XHRvcHRzID0gdXJpO1xuXHRcdFx0XHRcdFx0dXJpID0gdW5kZWZpbmVkO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRvcHRzID0gb3B0cyB8fCB7fTtcblxuXHRcdFx0XHRcdG9wdHMucGF0aCA9IG9wdHMucGF0aCB8fCAnL3NvY2tldC5pbyc7XG5cdFx0XHRcdFx0dGhpcy5uc3BzID0ge307XG5cdFx0XHRcdFx0dGhpcy5zdWJzID0gW107XG5cdFx0XHRcdFx0dGhpcy5vcHRzID0gb3B0cztcblx0XHRcdFx0XHR0aGlzLnJlY29ubmVjdGlvbihvcHRzLnJlY29ubmVjdGlvbiAhPT0gZmFsc2UpO1xuXHRcdFx0XHRcdHRoaXMucmVjb25uZWN0aW9uQXR0ZW1wdHMob3B0cy5yZWNvbm5lY3Rpb25BdHRlbXB0cyB8fCBJbmZpbml0eSk7XG5cdFx0XHRcdFx0dGhpcy5yZWNvbm5lY3Rpb25EZWxheShvcHRzLnJlY29ubmVjdGlvbkRlbGF5IHx8IDEwMDApO1xuXHRcdFx0XHRcdHRoaXMucmVjb25uZWN0aW9uRGVsYXlNYXgob3B0cy5yZWNvbm5lY3Rpb25EZWxheU1heCB8fCA1MDAwKTtcblx0XHRcdFx0XHR0aGlzLnJhbmRvbWl6YXRpb25GYWN0b3Iob3B0cy5yYW5kb21pemF0aW9uRmFjdG9yIHx8IDAuNSk7XG5cdFx0XHRcdFx0dGhpcy5iYWNrb2ZmID0gbmV3IEJhY2tvZmYoe1xuXHRcdFx0XHRcdFx0bWluOiB0aGlzLnJlY29ubmVjdGlvbkRlbGF5KCksXG5cdFx0XHRcdFx0XHRtYXg6IHRoaXMucmVjb25uZWN0aW9uRGVsYXlNYXgoKSxcblx0XHRcdFx0XHRcdGppdHRlcjogdGhpcy5yYW5kb21pemF0aW9uRmFjdG9yKClcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR0aGlzLnRpbWVvdXQobnVsbCA9PSBvcHRzLnRpbWVvdXQgPyAyMDAwMCA6IG9wdHMudGltZW91dCk7XG5cdFx0XHRcdFx0dGhpcy5yZWFkeVN0YXRlID0gJ2Nsb3NlZCc7XG5cdFx0XHRcdFx0dGhpcy51cmkgPSB1cmk7XG5cdFx0XHRcdFx0dGhpcy5jb25uZWN0aW5nID0gW107XG5cdFx0XHRcdFx0dGhpcy5sYXN0UGluZyA9IG51bGw7XG5cdFx0XHRcdFx0dGhpcy5lbmNvZGluZyA9IGZhbHNlO1xuXHRcdFx0XHRcdHRoaXMucGFja2V0QnVmZmVyID0gW107XG5cdFx0XHRcdFx0dGhpcy5lbmNvZGVyID0gbmV3IHBhcnNlci5FbmNvZGVyKCk7XG5cdFx0XHRcdFx0dGhpcy5kZWNvZGVyID0gbmV3IHBhcnNlci5EZWNvZGVyKCk7XG5cdFx0XHRcdFx0dGhpcy5hdXRvQ29ubmVjdCA9IG9wdHMuYXV0b0Nvbm5lY3QgIT09IGZhbHNlO1xuXHRcdFx0XHRcdGlmICh0aGlzLmF1dG9Db25uZWN0KSB0aGlzLm9wZW4oKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8qKlxuICAgICAqIFByb3BhZ2F0ZSBnaXZlbiBldmVudCB0byBzb2NrZXRzIGFuZCBlbWl0IG9uIGB0aGlzYFxuICAgICAqXG4gICAgICogQGFwaSBwcml2YXRlXG4gICAgICovXG5cblx0XHRcdFx0TWFuYWdlci5wcm90b3R5cGUuZW1pdEFsbCA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHR0aGlzLmVtaXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0XHRcdFx0XHRmb3IgKHZhciBuc3AgaW4gdGhpcy5uc3BzKSB7XG5cdFx0XHRcdFx0XHRpZiAoaGFzLmNhbGwodGhpcy5uc3BzLCBuc3ApKSB7XG5cdFx0XHRcdFx0XHRcdHRoaXMubnNwc1tuc3BdLmVtaXQuYXBwbHkodGhpcy5uc3BzW25zcF0sIGFyZ3VtZW50cyk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdC8qKlxuICAgICAqIFVwZGF0ZSBgc29ja2V0LmlkYCBvZiBhbGwgc29ja2V0c1xuICAgICAqXG4gICAgICogQGFwaSBwcml2YXRlXG4gICAgICovXG5cblx0XHRcdFx0TWFuYWdlci5wcm90b3R5cGUudXBkYXRlU29ja2V0SWRzID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdGZvciAodmFyIG5zcCBpbiB0aGlzLm5zcHMpIHtcblx0XHRcdFx0XHRcdGlmIChoYXMuY2FsbCh0aGlzLm5zcHMsIG5zcCkpIHtcblx0XHRcdFx0XHRcdFx0dGhpcy5uc3BzW25zcF0uaWQgPSB0aGlzLmVuZ2luZS5pZDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH07XG5cblx0XHRcdFx0LyoqXG4gICAgICogTWl4IGluIGBFbWl0dGVyYC5cbiAgICAgKi9cblxuXHRcdFx0XHRFbWl0dGVyKE1hbmFnZXIucHJvdG90eXBlKTtcblxuXHRcdFx0XHQvKipcbiAgICAgKiBTZXRzIHRoZSBgcmVjb25uZWN0aW9uYCBjb25maWcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IHRydWUvZmFsc2UgaWYgaXQgc2hvdWxkIGF1dG9tYXRpY2FsbHkgcmVjb25uZWN0XG4gICAgICogQHJldHVybiB7TWFuYWdlcn0gc2VsZiBvciB2YWx1ZVxuICAgICAqIEBhcGkgcHVibGljXG4gICAgICovXG5cblx0XHRcdFx0TWFuYWdlci5wcm90b3R5cGUucmVjb25uZWN0aW9uID0gZnVuY3Rpb24gKHYpIHtcblx0XHRcdFx0XHRpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiB0aGlzLl9yZWNvbm5lY3Rpb247XG5cdFx0XHRcdFx0dGhpcy5fcmVjb25uZWN0aW9uID0gISF2O1xuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdC8qKlxuICAgICAqIFNldHMgdGhlIHJlY29ubmVjdGlvbiBhdHRlbXB0cyBjb25maWcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gbWF4IHJlY29ubmVjdGlvbiBhdHRlbXB0cyBiZWZvcmUgZ2l2aW5nIHVwXG4gICAgICogQHJldHVybiB7TWFuYWdlcn0gc2VsZiBvciB2YWx1ZVxuICAgICAqIEBhcGkgcHVibGljXG4gICAgICovXG5cblx0XHRcdFx0TWFuYWdlci5wcm90b3R5cGUucmVjb25uZWN0aW9uQXR0ZW1wdHMgPSBmdW5jdGlvbiAodikge1xuXHRcdFx0XHRcdGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIHRoaXMuX3JlY29ubmVjdGlvbkF0dGVtcHRzO1xuXHRcdFx0XHRcdHRoaXMuX3JlY29ubmVjdGlvbkF0dGVtcHRzID0gdjtcblx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdFx0fTtcblxuXHRcdFx0XHQvKipcbiAgICAgKiBTZXRzIHRoZSBkZWxheSBiZXR3ZWVuIHJlY29ubmVjdGlvbnMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gZGVsYXlcbiAgICAgKiBAcmV0dXJuIHtNYW5hZ2VyfSBzZWxmIG9yIHZhbHVlXG4gICAgICogQGFwaSBwdWJsaWNcbiAgICAgKi9cblxuXHRcdFx0XHRNYW5hZ2VyLnByb3RvdHlwZS5yZWNvbm5lY3Rpb25EZWxheSA9IGZ1bmN0aW9uICh2KSB7XG5cdFx0XHRcdFx0aWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gdGhpcy5fcmVjb25uZWN0aW9uRGVsYXk7XG5cdFx0XHRcdFx0dGhpcy5fcmVjb25uZWN0aW9uRGVsYXkgPSB2O1xuXHRcdFx0XHRcdHRoaXMuYmFja29mZiAmJiB0aGlzLmJhY2tvZmYuc2V0TWluKHYpO1xuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdE1hbmFnZXIucHJvdG90eXBlLnJhbmRvbWl6YXRpb25GYWN0b3IgPSBmdW5jdGlvbiAodikge1xuXHRcdFx0XHRcdGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIHRoaXMuX3JhbmRvbWl6YXRpb25GYWN0b3I7XG5cdFx0XHRcdFx0dGhpcy5fcmFuZG9taXphdGlvbkZhY3RvciA9IHY7XG5cdFx0XHRcdFx0dGhpcy5iYWNrb2ZmICYmIHRoaXMuYmFja29mZi5zZXRKaXR0ZXIodik7XG5cdFx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHRcdH07XG5cblx0XHRcdFx0LyoqXG4gICAgICogU2V0cyB0aGUgbWF4aW11bSBkZWxheSBiZXR3ZWVuIHJlY29ubmVjdGlvbnMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gZGVsYXlcbiAgICAgKiBAcmV0dXJuIHtNYW5hZ2VyfSBzZWxmIG9yIHZhbHVlXG4gICAgICogQGFwaSBwdWJsaWNcbiAgICAgKi9cblxuXHRcdFx0XHRNYW5hZ2VyLnByb3RvdHlwZS5yZWNvbm5lY3Rpb25EZWxheU1heCA9IGZ1bmN0aW9uICh2KSB7XG5cdFx0XHRcdFx0aWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gdGhpcy5fcmVjb25uZWN0aW9uRGVsYXlNYXg7XG5cdFx0XHRcdFx0dGhpcy5fcmVjb25uZWN0aW9uRGVsYXlNYXggPSB2O1xuXHRcdFx0XHRcdHRoaXMuYmFja29mZiAmJiB0aGlzLmJhY2tvZmYuc2V0TWF4KHYpO1xuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdC8qKlxuICAgICAqIFNldHMgdGhlIGNvbm5lY3Rpb24gdGltZW91dC4gYGZhbHNlYCB0byBkaXNhYmxlXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtNYW5hZ2VyfSBzZWxmIG9yIHZhbHVlXG4gICAgICogQGFwaSBwdWJsaWNcbiAgICAgKi9cblxuXHRcdFx0XHRNYW5hZ2VyLnByb3RvdHlwZS50aW1lb3V0ID0gZnVuY3Rpb24gKHYpIHtcblx0XHRcdFx0XHRpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiB0aGlzLl90aW1lb3V0O1xuXHRcdFx0XHRcdHRoaXMuX3RpbWVvdXQgPSB2O1xuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdC8qKlxuICAgICAqIFN0YXJ0cyB0cnlpbmcgdG8gcmVjb25uZWN0IGlmIHJlY29ubmVjdGlvbiBpcyBlbmFibGVkIGFuZCB3ZSBoYXZlIG5vdFxuICAgICAqIHN0YXJ0ZWQgcmVjb25uZWN0aW5nIHlldFxuICAgICAqXG4gICAgICogQGFwaSBwcml2YXRlXG4gICAgICovXG5cblx0XHRcdFx0TWFuYWdlci5wcm90b3R5cGUubWF5YmVSZWNvbm5lY3RPbk9wZW4gPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0Ly8gT25seSB0cnkgdG8gcmVjb25uZWN0IGlmIGl0J3MgdGhlIGZpcnN0IHRpbWUgd2UncmUgY29ubmVjdGluZ1xuXHRcdFx0XHRcdGlmICghdGhpcy5yZWNvbm5lY3RpbmcgJiYgdGhpcy5fcmVjb25uZWN0aW9uICYmIHRoaXMuYmFja29mZi5hdHRlbXB0cyA9PT0gMCkge1xuXHRcdFx0XHRcdFx0Ly8ga2VlcHMgcmVjb25uZWN0aW9uIGZyb20gZmlyaW5nIHR3aWNlIGZvciB0aGUgc2FtZSByZWNvbm5lY3Rpb24gbG9vcFxuXHRcdFx0XHRcdFx0dGhpcy5yZWNvbm5lY3QoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH07XG5cblx0XHRcdFx0LyoqXG4gICAgICogU2V0cyB0aGUgY3VycmVudCB0cmFuc3BvcnQgYHNvY2tldGAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvcHRpb25hbCwgY2FsbGJhY2tcbiAgICAgKiBAcmV0dXJuIHtNYW5hZ2VyfSBzZWxmXG4gICAgICogQGFwaSBwdWJsaWNcbiAgICAgKi9cblxuXHRcdFx0XHRNYW5hZ2VyLnByb3RvdHlwZS5vcGVuID0gTWFuYWdlci5wcm90b3R5cGUuY29ubmVjdCA9IGZ1bmN0aW9uIChmbikge1xuXHRcdFx0XHRcdGRlYnVnKCdyZWFkeVN0YXRlICVzJywgdGhpcy5yZWFkeVN0YXRlKTtcblx0XHRcdFx0XHRpZiAofnRoaXMucmVhZHlTdGF0ZS5pbmRleE9mKCdvcGVuJykpIHJldHVybiB0aGlzO1xuXG5cdFx0XHRcdFx0ZGVidWcoJ29wZW5pbmcgJXMnLCB0aGlzLnVyaSk7XG5cdFx0XHRcdFx0dGhpcy5lbmdpbmUgPSBlaW8odGhpcy51cmksIHRoaXMub3B0cyk7XG5cdFx0XHRcdFx0dmFyIHNvY2tldCA9IHRoaXMuZW5naW5lO1xuXHRcdFx0XHRcdHZhciBzZWxmID0gdGhpcztcblx0XHRcdFx0XHR0aGlzLnJlYWR5U3RhdGUgPSAnb3BlbmluZyc7XG5cdFx0XHRcdFx0dGhpcy5za2lwUmVjb25uZWN0ID0gZmFsc2U7XG5cblx0XHRcdFx0XHQvLyBlbWl0IGBvcGVuYFxuXHRcdFx0XHRcdHZhciBvcGVuU3ViID0gb24oc29ja2V0LCAnb3BlbicsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdHNlbGYub25vcGVuKCk7XG5cdFx0XHRcdFx0XHRmbiAmJiBmbigpO1xuXHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0Ly8gZW1pdCBgY29ubmVjdF9lcnJvcmBcblx0XHRcdFx0XHR2YXIgZXJyb3JTdWIgPSBvbihzb2NrZXQsICdlcnJvcicsIGZ1bmN0aW9uIChkYXRhKSB7XG5cdFx0XHRcdFx0XHRkZWJ1ZygnY29ubmVjdF9lcnJvcicpO1xuXHRcdFx0XHRcdFx0c2VsZi5jbGVhbnVwKCk7XG5cdFx0XHRcdFx0XHRzZWxmLnJlYWR5U3RhdGUgPSAnY2xvc2VkJztcblx0XHRcdFx0XHRcdHNlbGYuZW1pdEFsbCgnY29ubmVjdF9lcnJvcicsIGRhdGEpO1xuXHRcdFx0XHRcdFx0aWYgKGZuKSB7XG5cdFx0XHRcdFx0XHRcdHZhciBlcnIgPSBuZXcgRXJyb3IoJ0Nvbm5lY3Rpb24gZXJyb3InKTtcblx0XHRcdFx0XHRcdFx0ZXJyLmRhdGEgPSBkYXRhO1xuXHRcdFx0XHRcdFx0XHRmbihlcnIpO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0Ly8gT25seSBkbyB0aGlzIGlmIHRoZXJlIGlzIG5vIGZuIHRvIGhhbmRsZSB0aGUgZXJyb3Jcblx0XHRcdFx0XHRcdFx0c2VsZi5tYXliZVJlY29ubmVjdE9uT3BlbigpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0Ly8gZW1pdCBgY29ubmVjdF90aW1lb3V0YFxuXHRcdFx0XHRcdGlmIChmYWxzZSAhPT0gdGhpcy5fdGltZW91dCkge1xuXHRcdFx0XHRcdFx0dmFyIHRpbWVvdXQgPSB0aGlzLl90aW1lb3V0O1xuXHRcdFx0XHRcdFx0ZGVidWcoJ2Nvbm5lY3QgYXR0ZW1wdCB3aWxsIHRpbWVvdXQgYWZ0ZXIgJWQnLCB0aW1lb3V0KTtcblxuXHRcdFx0XHRcdFx0Ly8gc2V0IHRpbWVyXG5cdFx0XHRcdFx0XHR2YXIgdGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdFx0ZGVidWcoJ2Nvbm5lY3QgYXR0ZW1wdCB0aW1lZCBvdXQgYWZ0ZXIgJWQnLCB0aW1lb3V0KTtcblx0XHRcdFx0XHRcdFx0b3BlblN1Yi5kZXN0cm95KCk7XG5cdFx0XHRcdFx0XHRcdHNvY2tldC5jbG9zZSgpO1xuXHRcdFx0XHRcdFx0XHRzb2NrZXQuZW1pdCgnZXJyb3InLCAndGltZW91dCcpO1xuXHRcdFx0XHRcdFx0XHRzZWxmLmVtaXRBbGwoJ2Nvbm5lY3RfdGltZW91dCcsIHRpbWVvdXQpO1xuXHRcdFx0XHRcdFx0fSwgdGltZW91dCk7XG5cblx0XHRcdFx0XHRcdHRoaXMuc3Vicy5wdXNoKHtcblx0XHRcdFx0XHRcdFx0ZGVzdHJveTogZnVuY3Rpb24gZGVzdHJveSgpIHtcblx0XHRcdFx0XHRcdFx0XHRjbGVhclRpbWVvdXQodGltZXIpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHR0aGlzLnN1YnMucHVzaChvcGVuU3ViKTtcblx0XHRcdFx0XHR0aGlzLnN1YnMucHVzaChlcnJvclN1Yik7XG5cblx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdFx0fTtcblxuXHRcdFx0XHQvKipcbiAgICAgKiBDYWxsZWQgdXBvbiB0cmFuc3BvcnQgb3Blbi5cbiAgICAgKlxuICAgICAqIEBhcGkgcHJpdmF0ZVxuICAgICAqL1xuXG5cdFx0XHRcdE1hbmFnZXIucHJvdG90eXBlLm9ub3BlbiA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRkZWJ1Zygnb3BlbicpO1xuXG5cdFx0XHRcdFx0Ly8gY2xlYXIgb2xkIHN1YnNcblx0XHRcdFx0XHR0aGlzLmNsZWFudXAoKTtcblxuXHRcdFx0XHRcdC8vIG1hcmsgYXMgb3BlblxuXHRcdFx0XHRcdHRoaXMucmVhZHlTdGF0ZSA9ICdvcGVuJztcblx0XHRcdFx0XHR0aGlzLmVtaXQoJ29wZW4nKTtcblxuXHRcdFx0XHRcdC8vIGFkZCBuZXcgc3Vic1xuXHRcdFx0XHRcdHZhciBzb2NrZXQgPSB0aGlzLmVuZ2luZTtcblx0XHRcdFx0XHR0aGlzLnN1YnMucHVzaChvbihzb2NrZXQsICdkYXRhJywgYmluZCh0aGlzLCAnb25kYXRhJykpKTtcblx0XHRcdFx0XHR0aGlzLnN1YnMucHVzaChvbihzb2NrZXQsICdwaW5nJywgYmluZCh0aGlzLCAnb25waW5nJykpKTtcblx0XHRcdFx0XHR0aGlzLnN1YnMucHVzaChvbihzb2NrZXQsICdwb25nJywgYmluZCh0aGlzLCAnb25wb25nJykpKTtcblx0XHRcdFx0XHR0aGlzLnN1YnMucHVzaChvbihzb2NrZXQsICdlcnJvcicsIGJpbmQodGhpcywgJ29uZXJyb3InKSkpO1xuXHRcdFx0XHRcdHRoaXMuc3Vicy5wdXNoKG9uKHNvY2tldCwgJ2Nsb3NlJywgYmluZCh0aGlzLCAnb25jbG9zZScpKSk7XG5cdFx0XHRcdFx0dGhpcy5zdWJzLnB1c2gob24odGhpcy5kZWNvZGVyLCAnZGVjb2RlZCcsIGJpbmQodGhpcywgJ29uZGVjb2RlZCcpKSk7XG5cdFx0XHRcdH07XG5cblx0XHRcdFx0LyoqXG4gICAgICogQ2FsbGVkIHVwb24gYSBwaW5nLlxuICAgICAqXG4gICAgICogQGFwaSBwcml2YXRlXG4gICAgICovXG5cblx0XHRcdFx0TWFuYWdlci5wcm90b3R5cGUub25waW5nID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdHRoaXMubGFzdFBpbmcgPSBuZXcgRGF0ZSgpO1xuXHRcdFx0XHRcdHRoaXMuZW1pdEFsbCgncGluZycpO1xuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdC8qKlxuICAgICAqIENhbGxlZCB1cG9uIGEgcGFja2V0LlxuICAgICAqXG4gICAgICogQGFwaSBwcml2YXRlXG4gICAgICovXG5cblx0XHRcdFx0TWFuYWdlci5wcm90b3R5cGUub25wb25nID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdHRoaXMuZW1pdEFsbCgncG9uZycsIG5ldyBEYXRlKCkgLSB0aGlzLmxhc3RQaW5nKTtcblx0XHRcdFx0fTtcblxuXHRcdFx0XHQvKipcbiAgICAgKiBDYWxsZWQgd2l0aCBkYXRhLlxuICAgICAqXG4gICAgICogQGFwaSBwcml2YXRlXG4gICAgICovXG5cblx0XHRcdFx0TWFuYWdlci5wcm90b3R5cGUub25kYXRhID0gZnVuY3Rpb24gKGRhdGEpIHtcblx0XHRcdFx0XHR0aGlzLmRlY29kZXIuYWRkKGRhdGEpO1xuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdC8qKlxuICAgICAqIENhbGxlZCB3aGVuIHBhcnNlciBmdWxseSBkZWNvZGVzIGEgcGFja2V0LlxuICAgICAqXG4gICAgICogQGFwaSBwcml2YXRlXG4gICAgICovXG5cblx0XHRcdFx0TWFuYWdlci5wcm90b3R5cGUub25kZWNvZGVkID0gZnVuY3Rpb24gKHBhY2tldCkge1xuXHRcdFx0XHRcdHRoaXMuZW1pdCgncGFja2V0JywgcGFja2V0KTtcblx0XHRcdFx0fTtcblxuXHRcdFx0XHQvKipcbiAgICAgKiBDYWxsZWQgdXBvbiBzb2NrZXQgZXJyb3IuXG4gICAgICpcbiAgICAgKiBAYXBpIHByaXZhdGVcbiAgICAgKi9cblxuXHRcdFx0XHRNYW5hZ2VyLnByb3RvdHlwZS5vbmVycm9yID0gZnVuY3Rpb24gKGVycikge1xuXHRcdFx0XHRcdGRlYnVnKCdlcnJvcicsIGVycik7XG5cdFx0XHRcdFx0dGhpcy5lbWl0QWxsKCdlcnJvcicsIGVycik7XG5cdFx0XHRcdH07XG5cblx0XHRcdFx0LyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBzb2NrZXQgZm9yIHRoZSBnaXZlbiBgbnNwYC5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge1NvY2tldH1cbiAgICAgKiBAYXBpIHB1YmxpY1xuICAgICAqL1xuXG5cdFx0XHRcdE1hbmFnZXIucHJvdG90eXBlLnNvY2tldCA9IGZ1bmN0aW9uIChuc3ApIHtcblx0XHRcdFx0XHR2YXIgc29ja2V0ID0gdGhpcy5uc3BzW25zcF07XG5cdFx0XHRcdFx0aWYgKCFzb2NrZXQpIHtcblx0XHRcdFx0XHRcdHNvY2tldCA9IG5ldyBTb2NrZXQodGhpcywgbnNwKTtcblx0XHRcdFx0XHRcdHRoaXMubnNwc1tuc3BdID0gc29ja2V0O1xuXHRcdFx0XHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXHRcdFx0XHRcdFx0c29ja2V0Lm9uKCdjb25uZWN0aW5nJywgb25Db25uZWN0aW5nKTtcblx0XHRcdFx0XHRcdHNvY2tldC5vbignY29ubmVjdCcsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdFx0c29ja2V0LmlkID0gc2VsZi5lbmdpbmUuaWQ7XG5cdFx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdFx0aWYgKHRoaXMuYXV0b0Nvbm5lY3QpIHtcblx0XHRcdFx0XHRcdFx0Ly8gbWFudWFsbHkgY2FsbCBoZXJlIHNpbmNlIGNvbm5lY3RpbmcgZXZuZXQgaXMgZmlyZWQgYmVmb3JlIGxpc3RlbmluZ1xuXHRcdFx0XHRcdFx0XHRvbkNvbm5lY3RpbmcoKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRmdW5jdGlvbiBvbkNvbm5lY3RpbmcoKSB7XG5cdFx0XHRcdFx0XHRpZiAoIX5pbmRleE9mKHNlbGYuY29ubmVjdGluZywgc29ja2V0KSkge1xuXHRcdFx0XHRcdFx0XHRzZWxmLmNvbm5lY3RpbmcucHVzaChzb2NrZXQpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHJldHVybiBzb2NrZXQ7XG5cdFx0XHRcdH07XG5cblx0XHRcdFx0LyoqXG4gICAgICogQ2FsbGVkIHVwb24gYSBzb2NrZXQgY2xvc2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1NvY2tldH0gc29ja2V0XG4gICAgICovXG5cblx0XHRcdFx0TWFuYWdlci5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uIChzb2NrZXQpIHtcblx0XHRcdFx0XHR2YXIgaW5kZXggPSBpbmRleE9mKHRoaXMuY29ubmVjdGluZywgc29ja2V0KTtcblx0XHRcdFx0XHRpZiAofmluZGV4KSB0aGlzLmNvbm5lY3Rpbmcuc3BsaWNlKGluZGV4LCAxKTtcblx0XHRcdFx0XHRpZiAodGhpcy5jb25uZWN0aW5nLmxlbmd0aCkgcmV0dXJuO1xuXG5cdFx0XHRcdFx0dGhpcy5jbG9zZSgpO1xuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdC8qKlxuICAgICAqIFdyaXRlcyBhIHBhY2tldC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwYWNrZXRcbiAgICAgKiBAYXBpIHByaXZhdGVcbiAgICAgKi9cblxuXHRcdFx0XHRNYW5hZ2VyLnByb3RvdHlwZS5wYWNrZXQgPSBmdW5jdGlvbiAocGFja2V0KSB7XG5cdFx0XHRcdFx0ZGVidWcoJ3dyaXRpbmcgcGFja2V0ICVqJywgcGFja2V0KTtcblx0XHRcdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cblx0XHRcdFx0XHRpZiAoIXNlbGYuZW5jb2RpbmcpIHtcblx0XHRcdFx0XHRcdC8vIGVuY29kZSwgdGhlbiB3cml0ZSB0byBlbmdpbmUgd2l0aCByZXN1bHRcblx0XHRcdFx0XHRcdHNlbGYuZW5jb2RpbmcgPSB0cnVlO1xuXHRcdFx0XHRcdFx0dGhpcy5lbmNvZGVyLmVuY29kZShwYWNrZXQsIGZ1bmN0aW9uIChlbmNvZGVkUGFja2V0cykge1xuXHRcdFx0XHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGVuY29kZWRQYWNrZXRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0XHRcdFx0c2VsZi5lbmdpbmUud3JpdGUoZW5jb2RlZFBhY2tldHNbaV0sIHBhY2tldC5vcHRpb25zKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRzZWxmLmVuY29kaW5nID0gZmFsc2U7XG5cdFx0XHRcdFx0XHRcdHNlbGYucHJvY2Vzc1BhY2tldFF1ZXVlKCk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Ly8gYWRkIHBhY2tldCB0byB0aGUgcXVldWVcblx0XHRcdFx0XHRcdHNlbGYucGFja2V0QnVmZmVyLnB1c2gocGFja2V0KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH07XG5cblx0XHRcdFx0LyoqXG4gICAgICogSWYgcGFja2V0IGJ1ZmZlciBpcyBub24tZW1wdHksIGJlZ2lucyBlbmNvZGluZyB0aGVcbiAgICAgKiBuZXh0IHBhY2tldCBpbiBsaW5lLlxuICAgICAqXG4gICAgICogQGFwaSBwcml2YXRlXG4gICAgICovXG5cblx0XHRcdFx0TWFuYWdlci5wcm90b3R5cGUucHJvY2Vzc1BhY2tldFF1ZXVlID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdGlmICh0aGlzLnBhY2tldEJ1ZmZlci5sZW5ndGggPiAwICYmICF0aGlzLmVuY29kaW5nKSB7XG5cdFx0XHRcdFx0XHR2YXIgcGFjayA9IHRoaXMucGFja2V0QnVmZmVyLnNoaWZ0KCk7XG5cdFx0XHRcdFx0XHR0aGlzLnBhY2tldChwYWNrKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH07XG5cblx0XHRcdFx0LyoqXG4gICAgICogQ2xlYW4gdXAgdHJhbnNwb3J0IHN1YnNjcmlwdGlvbnMgYW5kIHBhY2tldCBidWZmZXIuXG4gICAgICpcbiAgICAgKiBAYXBpIHByaXZhdGVcbiAgICAgKi9cblxuXHRcdFx0XHRNYW5hZ2VyLnByb3RvdHlwZS5jbGVhbnVwID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdGRlYnVnKCdjbGVhbnVwJyk7XG5cblx0XHRcdFx0XHR2YXIgc3ViO1xuXHRcdFx0XHRcdHdoaWxlIChzdWIgPSB0aGlzLnN1YnMuc2hpZnQoKSkge1xuXHRcdFx0XHRcdFx0c3ViLmRlc3Ryb3koKTtcblx0XHRcdFx0XHR9dGhpcy5wYWNrZXRCdWZmZXIgPSBbXTtcblx0XHRcdFx0XHR0aGlzLmVuY29kaW5nID0gZmFsc2U7XG5cdFx0XHRcdFx0dGhpcy5sYXN0UGluZyA9IG51bGw7XG5cblx0XHRcdFx0XHR0aGlzLmRlY29kZXIuZGVzdHJveSgpO1xuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdC8qKlxuICAgICAqIENsb3NlIHRoZSBjdXJyZW50IHNvY2tldC5cbiAgICAgKlxuICAgICAqIEBhcGkgcHJpdmF0ZVxuICAgICAqL1xuXG5cdFx0XHRcdE1hbmFnZXIucHJvdG90eXBlLmNsb3NlID0gTWFuYWdlci5wcm90b3R5cGUuZGlzY29ubmVjdCA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRkZWJ1ZygnZGlzY29ubmVjdCcpO1xuXHRcdFx0XHRcdHRoaXMuc2tpcFJlY29ubmVjdCA9IHRydWU7XG5cdFx0XHRcdFx0dGhpcy5yZWNvbm5lY3RpbmcgPSBmYWxzZTtcblx0XHRcdFx0XHRpZiAoJ29wZW5pbmcnID09IHRoaXMucmVhZHlTdGF0ZSkge1xuXHRcdFx0XHRcdFx0Ly8gYG9uY2xvc2VgIHdpbGwgbm90IGZpcmUgYmVjYXVzZVxuXHRcdFx0XHRcdFx0Ly8gYW4gb3BlbiBldmVudCBuZXZlciBoYXBwZW5lZFxuXHRcdFx0XHRcdFx0dGhpcy5jbGVhbnVwKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHRoaXMuYmFja29mZi5yZXNldCgpO1xuXHRcdFx0XHRcdHRoaXMucmVhZHlTdGF0ZSA9ICdjbG9zZWQnO1xuXHRcdFx0XHRcdGlmICh0aGlzLmVuZ2luZSkgdGhpcy5lbmdpbmUuY2xvc2UoKTtcblx0XHRcdFx0fTtcblxuXHRcdFx0XHQvKipcbiAgICAgKiBDYWxsZWQgdXBvbiBlbmdpbmUgY2xvc2UuXG4gICAgICpcbiAgICAgKiBAYXBpIHByaXZhdGVcbiAgICAgKi9cblxuXHRcdFx0XHRNYW5hZ2VyLnByb3RvdHlwZS5vbmNsb3NlID0gZnVuY3Rpb24gKHJlYXNvbikge1xuXHRcdFx0XHRcdGRlYnVnKCdvbmNsb3NlJyk7XG5cblx0XHRcdFx0XHR0aGlzLmNsZWFudXAoKTtcblx0XHRcdFx0XHR0aGlzLmJhY2tvZmYucmVzZXQoKTtcblx0XHRcdFx0XHR0aGlzLnJlYWR5U3RhdGUgPSAnY2xvc2VkJztcblx0XHRcdFx0XHR0aGlzLmVtaXQoJ2Nsb3NlJywgcmVhc29uKTtcblxuXHRcdFx0XHRcdGlmICh0aGlzLl9yZWNvbm5lY3Rpb24gJiYgIXRoaXMuc2tpcFJlY29ubmVjdCkge1xuXHRcdFx0XHRcdFx0dGhpcy5yZWNvbm5lY3QoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH07XG5cblx0XHRcdFx0LyoqXG4gICAgICogQXR0ZW1wdCBhIHJlY29ubmVjdGlvbi5cbiAgICAgKlxuICAgICAqIEBhcGkgcHJpdmF0ZVxuICAgICAqL1xuXG5cdFx0XHRcdE1hbmFnZXIucHJvdG90eXBlLnJlY29ubmVjdCA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRpZiAodGhpcy5yZWNvbm5lY3RpbmcgfHwgdGhpcy5za2lwUmVjb25uZWN0KSByZXR1cm4gdGhpcztcblxuXHRcdFx0XHRcdHZhciBzZWxmID0gdGhpcztcblxuXHRcdFx0XHRcdGlmICh0aGlzLmJhY2tvZmYuYXR0ZW1wdHMgPj0gdGhpcy5fcmVjb25uZWN0aW9uQXR0ZW1wdHMpIHtcblx0XHRcdFx0XHRcdGRlYnVnKCdyZWNvbm5lY3QgZmFpbGVkJyk7XG5cdFx0XHRcdFx0XHR0aGlzLmJhY2tvZmYucmVzZXQoKTtcblx0XHRcdFx0XHRcdHRoaXMuZW1pdEFsbCgncmVjb25uZWN0X2ZhaWxlZCcpO1xuXHRcdFx0XHRcdFx0dGhpcy5yZWNvbm5lY3RpbmcgPSBmYWxzZTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0dmFyIGRlbGF5ID0gdGhpcy5iYWNrb2ZmLmR1cmF0aW9uKCk7XG5cdFx0XHRcdFx0XHRkZWJ1Zygnd2lsbCB3YWl0ICVkbXMgYmVmb3JlIHJlY29ubmVjdCBhdHRlbXB0JywgZGVsYXkpO1xuXG5cdFx0XHRcdFx0XHR0aGlzLnJlY29ubmVjdGluZyA9IHRydWU7XG5cdFx0XHRcdFx0XHR2YXIgdGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdFx0aWYgKHNlbGYuc2tpcFJlY29ubmVjdCkgcmV0dXJuO1xuXG5cdFx0XHRcdFx0XHRcdGRlYnVnKCdhdHRlbXB0aW5nIHJlY29ubmVjdCcpO1xuXHRcdFx0XHRcdFx0XHRzZWxmLmVtaXRBbGwoJ3JlY29ubmVjdF9hdHRlbXB0Jywgc2VsZi5iYWNrb2ZmLmF0dGVtcHRzKTtcblx0XHRcdFx0XHRcdFx0c2VsZi5lbWl0QWxsKCdyZWNvbm5lY3RpbmcnLCBzZWxmLmJhY2tvZmYuYXR0ZW1wdHMpO1xuXG5cdFx0XHRcdFx0XHRcdC8vIGNoZWNrIGFnYWluIGZvciB0aGUgY2FzZSBzb2NrZXQgY2xvc2VkIGluIGFib3ZlIGV2ZW50c1xuXHRcdFx0XHRcdFx0XHRpZiAoc2VsZi5za2lwUmVjb25uZWN0KSByZXR1cm47XG5cblx0XHRcdFx0XHRcdFx0c2VsZi5vcGVuKGZ1bmN0aW9uIChlcnIpIHtcblx0XHRcdFx0XHRcdFx0XHRpZiAoZXJyKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRkZWJ1ZygncmVjb25uZWN0IGF0dGVtcHQgZXJyb3InKTtcblx0XHRcdFx0XHRcdFx0XHRcdHNlbGYucmVjb25uZWN0aW5nID0gZmFsc2U7XG5cdFx0XHRcdFx0XHRcdFx0XHRzZWxmLnJlY29ubmVjdCgpO1xuXHRcdFx0XHRcdFx0XHRcdFx0c2VsZi5lbWl0QWxsKCdyZWNvbm5lY3RfZXJyb3InLCBlcnIuZGF0YSk7XG5cdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRcdGRlYnVnKCdyZWNvbm5lY3Qgc3VjY2VzcycpO1xuXHRcdFx0XHRcdFx0XHRcdFx0c2VsZi5vbnJlY29ubmVjdCgpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9LCBkZWxheSk7XG5cblx0XHRcdFx0XHRcdHRoaXMuc3Vicy5wdXNoKHtcblx0XHRcdFx0XHRcdFx0ZGVzdHJveTogZnVuY3Rpb24gZGVzdHJveSgpIHtcblx0XHRcdFx0XHRcdFx0XHRjbGVhclRpbWVvdXQodGltZXIpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH07XG5cblx0XHRcdFx0LyoqXG4gICAgICogQ2FsbGVkIHVwb24gc3VjY2Vzc2Z1bCByZWNvbm5lY3QuXG4gICAgICpcbiAgICAgKiBAYXBpIHByaXZhdGVcbiAgICAgKi9cblxuXHRcdFx0XHRNYW5hZ2VyLnByb3RvdHlwZS5vbnJlY29ubmVjdCA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHR2YXIgYXR0ZW1wdCA9IHRoaXMuYmFja29mZi5hdHRlbXB0cztcblx0XHRcdFx0XHR0aGlzLnJlY29ubmVjdGluZyA9IGZhbHNlO1xuXHRcdFx0XHRcdHRoaXMuYmFja29mZi5yZXNldCgpO1xuXHRcdFx0XHRcdHRoaXMudXBkYXRlU29ja2V0SWRzKCk7XG5cdFx0XHRcdFx0dGhpcy5lbWl0QWxsKCdyZWNvbm5lY3QnLCBhdHRlbXB0KTtcblx0XHRcdFx0fTtcblx0XHRcdH0sIHtcblx0XHRcdFx0XCIuL29uXCI6IDMzLFxuXHRcdFx0XHRcIi4vc29ja2V0XCI6IDM0LFxuXHRcdFx0XHRcImJhY2tvMlwiOiAzNixcblx0XHRcdFx0XCJjb21wb25lbnQtYmluZFwiOiAzNyxcblx0XHRcdFx0XCJjb21wb25lbnQtZW1pdHRlclwiOiAzOCxcblx0XHRcdFx0XCJkZWJ1Z1wiOiAzOSxcblx0XHRcdFx0XCJlbmdpbmUuaW8tY2xpZW50XCI6IDEsXG5cdFx0XHRcdFwiaW5kZXhvZlwiOiA0Mixcblx0XHRcdFx0XCJzb2NrZXQuaW8tcGFyc2VyXCI6IDQ3XG5cdFx0XHR9XSxcblx0XHRcdDMzOiBbZnVuY3Rpb24gKF9kZXJlcV8sIG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFx0XHRcdC8qKlxuICAgICAqIE1vZHVsZSBleHBvcnRzLlxuICAgICAqL1xuXG5cdFx0XHRcdG1vZHVsZS5leHBvcnRzID0gb247XG5cblx0XHRcdFx0LyoqXG4gICAgICogSGVscGVyIGZvciBzdWJzY3JpcHRpb25zLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R8RXZlbnRFbWl0dGVyfSBvYmogd2l0aCBgRW1pdHRlcmAgbWl4aW4gb3IgYEV2ZW50RW1pdHRlcmBcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnQgbmFtZVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gICAgICogQGFwaSBwdWJsaWNcbiAgICAgKi9cblxuXHRcdFx0XHRmdW5jdGlvbiBvbihvYmosIGV2LCBmbikge1xuXHRcdFx0XHRcdG9iai5vbihldiwgZm4pO1xuXHRcdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHRkZXN0cm95OiBmdW5jdGlvbiBkZXN0cm95KCkge1xuXHRcdFx0XHRcdFx0XHRvYmoucmVtb3ZlTGlzdGVuZXIoZXYsIGZuKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9O1xuXHRcdFx0XHR9XG5cdFx0XHR9LCB7fV0sXG5cdFx0XHQzNDogW2Z1bmN0aW9uIChfZGVyZXFfLCBtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcdFx0XHQvKipcbiAgICAgKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICAgICAqL1xuXG5cdFx0XHRcdHZhciBwYXJzZXIgPSBfZGVyZXFfKCdzb2NrZXQuaW8tcGFyc2VyJyk7XG5cdFx0XHRcdHZhciBFbWl0dGVyID0gX2RlcmVxXygnY29tcG9uZW50LWVtaXR0ZXInKTtcblx0XHRcdFx0dmFyIHRvQXJyYXkgPSBfZGVyZXFfKCd0by1hcnJheScpO1xuXHRcdFx0XHR2YXIgb24gPSBfZGVyZXFfKCcuL29uJyk7XG5cdFx0XHRcdHZhciBiaW5kID0gX2RlcmVxXygnY29tcG9uZW50LWJpbmQnKTtcblx0XHRcdFx0dmFyIGRlYnVnID0gX2RlcmVxXygnZGVidWcnKSgnc29ja2V0LmlvLWNsaWVudDpzb2NrZXQnKTtcblx0XHRcdFx0dmFyIGhhc0JpbiA9IF9kZXJlcV8oJ2hhcy1iaW5hcnknKTtcblxuXHRcdFx0XHQvKipcbiAgICAgKiBNb2R1bGUgZXhwb3J0cy5cbiAgICAgKi9cblxuXHRcdFx0XHRtb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHMgPSBTb2NrZXQ7XG5cblx0XHRcdFx0LyoqXG4gICAgICogSW50ZXJuYWwgZXZlbnRzIChibGFja2xpc3RlZCkuXG4gICAgICogVGhlc2UgZXZlbnRzIGNhbid0IGJlIGVtaXR0ZWQgYnkgdGhlIHVzZXIuXG4gICAgICpcbiAgICAgKiBAYXBpIHByaXZhdGVcbiAgICAgKi9cblxuXHRcdFx0XHR2YXIgZXZlbnRzID0ge1xuXHRcdFx0XHRcdGNvbm5lY3Q6IDEsXG5cdFx0XHRcdFx0Y29ubmVjdF9lcnJvcjogMSxcblx0XHRcdFx0XHRjb25uZWN0X3RpbWVvdXQ6IDEsXG5cdFx0XHRcdFx0Y29ubmVjdGluZzogMSxcblx0XHRcdFx0XHRkaXNjb25uZWN0OiAxLFxuXHRcdFx0XHRcdGVycm9yOiAxLFxuXHRcdFx0XHRcdHJlY29ubmVjdDogMSxcblx0XHRcdFx0XHRyZWNvbm5lY3RfYXR0ZW1wdDogMSxcblx0XHRcdFx0XHRyZWNvbm5lY3RfZmFpbGVkOiAxLFxuXHRcdFx0XHRcdHJlY29ubmVjdF9lcnJvcjogMSxcblx0XHRcdFx0XHRyZWNvbm5lY3Rpbmc6IDEsXG5cdFx0XHRcdFx0cGluZzogMSxcblx0XHRcdFx0XHRwb25nOiAxXG5cdFx0XHRcdH07XG5cblx0XHRcdFx0LyoqXG4gICAgICogU2hvcnRjdXQgdG8gYEVtaXR0ZXIjZW1pdGAuXG4gICAgICovXG5cblx0XHRcdFx0dmFyIGVtaXQgPSBFbWl0dGVyLnByb3RvdHlwZS5lbWl0O1xuXG5cdFx0XHRcdC8qKlxuICAgICAqIGBTb2NrZXRgIGNvbnN0cnVjdG9yLlxuICAgICAqXG4gICAgICogQGFwaSBwdWJsaWNcbiAgICAgKi9cblxuXHRcdFx0XHRmdW5jdGlvbiBTb2NrZXQoaW8sIG5zcCkge1xuXHRcdFx0XHRcdHRoaXMuaW8gPSBpbztcblx0XHRcdFx0XHR0aGlzLm5zcCA9IG5zcDtcblx0XHRcdFx0XHR0aGlzLmpzb24gPSB0aGlzOyAvLyBjb21wYXRcblx0XHRcdFx0XHR0aGlzLmlkcyA9IDA7XG5cdFx0XHRcdFx0dGhpcy5hY2tzID0ge307XG5cdFx0XHRcdFx0dGhpcy5yZWNlaXZlQnVmZmVyID0gW107XG5cdFx0XHRcdFx0dGhpcy5zZW5kQnVmZmVyID0gW107XG5cdFx0XHRcdFx0dGhpcy5jb25uZWN0ZWQgPSBmYWxzZTtcblx0XHRcdFx0XHR0aGlzLmRpc2Nvbm5lY3RlZCA9IHRydWU7XG5cdFx0XHRcdFx0aWYgKHRoaXMuaW8uYXV0b0Nvbm5lY3QpIHRoaXMub3BlbigpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0LyoqXG4gICAgICogTWl4IGluIGBFbWl0dGVyYC5cbiAgICAgKi9cblxuXHRcdFx0XHRFbWl0dGVyKFNvY2tldC5wcm90b3R5cGUpO1xuXG5cdFx0XHRcdC8qKlxuICAgICAqIFN1YnNjcmliZSB0byBvcGVuLCBjbG9zZSBhbmQgcGFja2V0IGV2ZW50c1xuICAgICAqXG4gICAgICogQGFwaSBwcml2YXRlXG4gICAgICovXG5cblx0XHRcdFx0U29ja2V0LnByb3RvdHlwZS5zdWJFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0aWYgKHRoaXMuc3VicykgcmV0dXJuO1xuXG5cdFx0XHRcdFx0dmFyIGlvID0gdGhpcy5pbztcblx0XHRcdFx0XHR0aGlzLnN1YnMgPSBbb24oaW8sICdvcGVuJywgYmluZCh0aGlzLCAnb25vcGVuJykpLCBvbihpbywgJ3BhY2tldCcsIGJpbmQodGhpcywgJ29ucGFja2V0JykpLCBvbihpbywgJ2Nsb3NlJywgYmluZCh0aGlzLCAnb25jbG9zZScpKV07XG5cdFx0XHRcdH07XG5cblx0XHRcdFx0LyoqXG4gICAgICogXCJPcGVuc1wiIHRoZSBzb2NrZXQuXG4gICAgICpcbiAgICAgKiBAYXBpIHB1YmxpY1xuICAgICAqL1xuXG5cdFx0XHRcdFNvY2tldC5wcm90b3R5cGUub3BlbiA9IFNvY2tldC5wcm90b3R5cGUuY29ubmVjdCA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRpZiAodGhpcy5jb25uZWN0ZWQpIHJldHVybiB0aGlzO1xuXG5cdFx0XHRcdFx0dGhpcy5zdWJFdmVudHMoKTtcblx0XHRcdFx0XHR0aGlzLmlvLm9wZW4oKTsgLy8gZW5zdXJlIG9wZW5cblx0XHRcdFx0XHRpZiAoJ29wZW4nID09IHRoaXMuaW8ucmVhZHlTdGF0ZSkgdGhpcy5vbm9wZW4oKTtcblx0XHRcdFx0XHR0aGlzLmVtaXQoJ2Nvbm5lY3RpbmcnKTtcblx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdFx0fTtcblxuXHRcdFx0XHQvKipcbiAgICAgKiBTZW5kcyBhIGBtZXNzYWdlYCBldmVudC5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge1NvY2tldH0gc2VsZlxuICAgICAqIEBhcGkgcHVibGljXG4gICAgICovXG5cblx0XHRcdFx0U29ja2V0LnByb3RvdHlwZS5zZW5kID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdHZhciBhcmdzID0gdG9BcnJheShhcmd1bWVudHMpO1xuXHRcdFx0XHRcdGFyZ3MudW5zaGlmdCgnbWVzc2FnZScpO1xuXHRcdFx0XHRcdHRoaXMuZW1pdC5hcHBseSh0aGlzLCBhcmdzKTtcblx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdFx0fTtcblxuXHRcdFx0XHQvKipcbiAgICAgKiBPdmVycmlkZSBgZW1pdGAuXG4gICAgICogSWYgdGhlIGV2ZW50IGlzIGluIGBldmVudHNgLCBpdCdzIGVtaXR0ZWQgbm9ybWFsbHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnQgbmFtZVxuICAgICAqIEByZXR1cm4ge1NvY2tldH0gc2VsZlxuICAgICAqIEBhcGkgcHVibGljXG4gICAgICovXG5cblx0XHRcdFx0U29ja2V0LnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24gKGV2KSB7XG5cdFx0XHRcdFx0aWYgKGV2ZW50cy5oYXNPd25Qcm9wZXJ0eShldikpIHtcblx0XHRcdFx0XHRcdGVtaXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0XHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHZhciBhcmdzID0gdG9BcnJheShhcmd1bWVudHMpO1xuXHRcdFx0XHRcdHZhciBwYXJzZXJUeXBlID0gcGFyc2VyLkVWRU5UOyAvLyBkZWZhdWx0XG5cdFx0XHRcdFx0aWYgKGhhc0JpbihhcmdzKSkge1xuXHRcdFx0XHRcdFx0cGFyc2VyVHlwZSA9IHBhcnNlci5CSU5BUllfRVZFTlQ7XG5cdFx0XHRcdFx0fSAvLyBiaW5hcnlcblx0XHRcdFx0XHR2YXIgcGFja2V0ID0ge1xuXHRcdFx0XHRcdFx0dHlwZTogcGFyc2VyVHlwZSxcblx0XHRcdFx0XHRcdGRhdGE6IGFyZ3Ncblx0XHRcdFx0XHR9O1xuXG5cdFx0XHRcdFx0cGFja2V0Lm9wdGlvbnMgPSB7fTtcblx0XHRcdFx0XHRwYWNrZXQub3B0aW9ucy5jb21wcmVzcyA9ICF0aGlzLmZsYWdzIHx8IGZhbHNlICE9PSB0aGlzLmZsYWdzLmNvbXByZXNzO1xuXG5cdFx0XHRcdFx0Ly8gZXZlbnQgYWNrIGNhbGxiYWNrXG5cdFx0XHRcdFx0aWYgKCdmdW5jdGlvbicgPT0gdHlwZW9mIGFyZ3NbYXJncy5sZW5ndGggLSAxXSkge1xuXHRcdFx0XHRcdFx0ZGVidWcoJ2VtaXR0aW5nIHBhY2tldCB3aXRoIGFjayBpZCAlZCcsIHRoaXMuaWRzKTtcblx0XHRcdFx0XHRcdHRoaXMuYWNrc1t0aGlzLmlkc10gPSBhcmdzLnBvcCgpO1xuXHRcdFx0XHRcdFx0cGFja2V0LmlkID0gdGhpcy5pZHMrKztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAodGhpcy5jb25uZWN0ZWQpIHtcblx0XHRcdFx0XHRcdHRoaXMucGFja2V0KHBhY2tldCk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHRoaXMuc2VuZEJ1ZmZlci5wdXNoKHBhY2tldCk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0ZGVsZXRlIHRoaXMuZmxhZ3M7XG5cblx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdFx0fTtcblxuXHRcdFx0XHQvKipcbiAgICAgKiBTZW5kcyBhIHBhY2tldC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwYWNrZXRcbiAgICAgKiBAYXBpIHByaXZhdGVcbiAgICAgKi9cblxuXHRcdFx0XHRTb2NrZXQucHJvdG90eXBlLnBhY2tldCA9IGZ1bmN0aW9uIChwYWNrZXQpIHtcblx0XHRcdFx0XHRwYWNrZXQubnNwID0gdGhpcy5uc3A7XG5cdFx0XHRcdFx0dGhpcy5pby5wYWNrZXQocGFja2V0KTtcblx0XHRcdFx0fTtcblxuXHRcdFx0XHQvKipcbiAgICAgKiBDYWxsZWQgdXBvbiBlbmdpbmUgYG9wZW5gLlxuICAgICAqXG4gICAgICogQGFwaSBwcml2YXRlXG4gICAgICovXG5cblx0XHRcdFx0U29ja2V0LnByb3RvdHlwZS5vbm9wZW4gPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0ZGVidWcoJ3RyYW5zcG9ydCBpcyBvcGVuIC0gY29ubmVjdGluZycpO1xuXG5cdFx0XHRcdFx0Ly8gd3JpdGUgY29ubmVjdCBwYWNrZXQgaWYgbmVjZXNzYXJ5XG5cdFx0XHRcdFx0aWYgKCcvJyAhPSB0aGlzLm5zcCkge1xuXHRcdFx0XHRcdFx0dGhpcy5wYWNrZXQoe1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBwYXJzZXIuQ09OTkVDVFxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdC8qKlxuICAgICAqIENhbGxlZCB1cG9uIGVuZ2luZSBgY2xvc2VgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHJlYXNvblxuICAgICAqIEBhcGkgcHJpdmF0ZVxuICAgICAqL1xuXG5cdFx0XHRcdFNvY2tldC5wcm90b3R5cGUub25jbG9zZSA9IGZ1bmN0aW9uIChyZWFzb24pIHtcblx0XHRcdFx0XHRkZWJ1ZygnY2xvc2UgKCVzKScsIHJlYXNvbik7XG5cdFx0XHRcdFx0dGhpcy5jb25uZWN0ZWQgPSBmYWxzZTtcblx0XHRcdFx0XHR0aGlzLmRpc2Nvbm5lY3RlZCA9IHRydWU7XG5cdFx0XHRcdFx0ZGVsZXRlIHRoaXMuaWQ7XG5cdFx0XHRcdFx0dGhpcy5lbWl0KCdkaXNjb25uZWN0JywgcmVhc29uKTtcblx0XHRcdFx0fTtcblxuXHRcdFx0XHQvKipcbiAgICAgKiBDYWxsZWQgd2l0aCBzb2NrZXQgcGFja2V0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHBhY2tldFxuICAgICAqIEBhcGkgcHJpdmF0ZVxuICAgICAqL1xuXG5cdFx0XHRcdFNvY2tldC5wcm90b3R5cGUub25wYWNrZXQgPSBmdW5jdGlvbiAocGFja2V0KSB7XG5cdFx0XHRcdFx0aWYgKHBhY2tldC5uc3AgIT0gdGhpcy5uc3ApIHJldHVybjtcblxuXHRcdFx0XHRcdHN3aXRjaCAocGFja2V0LnR5cGUpIHtcblx0XHRcdFx0XHRcdGNhc2UgcGFyc2VyLkNPTk5FQ1Q6XG5cdFx0XHRcdFx0XHRcdHRoaXMub25jb25uZWN0KCk7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0XHRjYXNlIHBhcnNlci5FVkVOVDpcblx0XHRcdFx0XHRcdFx0dGhpcy5vbmV2ZW50KHBhY2tldCk7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0XHRjYXNlIHBhcnNlci5CSU5BUllfRVZFTlQ6XG5cdFx0XHRcdFx0XHRcdHRoaXMub25ldmVudChwYWNrZXQpO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdFx0Y2FzZSBwYXJzZXIuQUNLOlxuXHRcdFx0XHRcdFx0XHR0aGlzLm9uYWNrKHBhY2tldCk7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0XHRjYXNlIHBhcnNlci5CSU5BUllfQUNLOlxuXHRcdFx0XHRcdFx0XHR0aGlzLm9uYWNrKHBhY2tldCk7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0XHRjYXNlIHBhcnNlci5ESVNDT05ORUNUOlxuXHRcdFx0XHRcdFx0XHR0aGlzLm9uZGlzY29ubmVjdCgpO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdFx0Y2FzZSBwYXJzZXIuRVJST1I6XG5cdFx0XHRcdFx0XHRcdHRoaXMuZW1pdCgnZXJyb3InLCBwYWNrZXQuZGF0YSk7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fTtcblxuXHRcdFx0XHQvKipcbiAgICAgKiBDYWxsZWQgdXBvbiBhIHNlcnZlciBldmVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwYWNrZXRcbiAgICAgKiBAYXBpIHByaXZhdGVcbiAgICAgKi9cblxuXHRcdFx0XHRTb2NrZXQucHJvdG90eXBlLm9uZXZlbnQgPSBmdW5jdGlvbiAocGFja2V0KSB7XG5cdFx0XHRcdFx0dmFyIGFyZ3MgPSBwYWNrZXQuZGF0YSB8fCBbXTtcblx0XHRcdFx0XHRkZWJ1ZygnZW1pdHRpbmcgZXZlbnQgJWonLCBhcmdzKTtcblxuXHRcdFx0XHRcdGlmIChudWxsICE9IHBhY2tldC5pZCkge1xuXHRcdFx0XHRcdFx0ZGVidWcoJ2F0dGFjaGluZyBhY2sgY2FsbGJhY2sgdG8gZXZlbnQnKTtcblx0XHRcdFx0XHRcdGFyZ3MucHVzaCh0aGlzLmFjayhwYWNrZXQuaWQpKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAodGhpcy5jb25uZWN0ZWQpIHtcblx0XHRcdFx0XHRcdGVtaXQuYXBwbHkodGhpcywgYXJncyk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHRoaXMucmVjZWl2ZUJ1ZmZlci5wdXNoKGFyZ3MpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fTtcblxuXHRcdFx0XHQvKipcbiAgICAgKiBQcm9kdWNlcyBhbiBhY2sgY2FsbGJhY2sgdG8gZW1pdCB3aXRoIGFuIGV2ZW50LlxuICAgICAqXG4gICAgICogQGFwaSBwcml2YXRlXG4gICAgICovXG5cblx0XHRcdFx0U29ja2V0LnByb3RvdHlwZS5hY2sgPSBmdW5jdGlvbiAoaWQpIHtcblx0XHRcdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cdFx0XHRcdFx0dmFyIHNlbnQgPSBmYWxzZTtcblx0XHRcdFx0XHRyZXR1cm4gZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0Ly8gcHJldmVudCBkb3VibGUgY2FsbGJhY2tzXG5cdFx0XHRcdFx0XHRpZiAoc2VudCkgcmV0dXJuO1xuXHRcdFx0XHRcdFx0c2VudCA9IHRydWU7XG5cdFx0XHRcdFx0XHR2YXIgYXJncyA9IHRvQXJyYXkoYXJndW1lbnRzKTtcblx0XHRcdFx0XHRcdGRlYnVnKCdzZW5kaW5nIGFjayAlaicsIGFyZ3MpO1xuXG5cdFx0XHRcdFx0XHR2YXIgdHlwZSA9IGhhc0JpbihhcmdzKSA/IHBhcnNlci5CSU5BUllfQUNLIDogcGFyc2VyLkFDSztcblx0XHRcdFx0XHRcdHNlbGYucGFja2V0KHtcblx0XHRcdFx0XHRcdFx0dHlwZTogdHlwZSxcblx0XHRcdFx0XHRcdFx0aWQ6IGlkLFxuXHRcdFx0XHRcdFx0XHRkYXRhOiBhcmdzXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdC8qKlxuICAgICAqIENhbGxlZCB1cG9uIGEgc2VydmVyIGFja25vd2xlZ2VtZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHBhY2tldFxuICAgICAqIEBhcGkgcHJpdmF0ZVxuICAgICAqL1xuXG5cdFx0XHRcdFNvY2tldC5wcm90b3R5cGUub25hY2sgPSBmdW5jdGlvbiAocGFja2V0KSB7XG5cdFx0XHRcdFx0dmFyIGFjayA9IHRoaXMuYWNrc1twYWNrZXQuaWRdO1xuXHRcdFx0XHRcdGlmICgnZnVuY3Rpb24nID09IHR5cGVvZiBhY2spIHtcblx0XHRcdFx0XHRcdGRlYnVnKCdjYWxsaW5nIGFjayAlcyB3aXRoICVqJywgcGFja2V0LmlkLCBwYWNrZXQuZGF0YSk7XG5cdFx0XHRcdFx0XHRhY2suYXBwbHkodGhpcywgcGFja2V0LmRhdGEpO1xuXHRcdFx0XHRcdFx0ZGVsZXRlIHRoaXMuYWNrc1twYWNrZXQuaWRdO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRkZWJ1ZygnYmFkIGFjayAlcycsIHBhY2tldC5pZCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdC8qKlxuICAgICAqIENhbGxlZCB1cG9uIHNlcnZlciBjb25uZWN0LlxuICAgICAqXG4gICAgICogQGFwaSBwcml2YXRlXG4gICAgICovXG5cblx0XHRcdFx0U29ja2V0LnByb3RvdHlwZS5vbmNvbm5lY3QgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0dGhpcy5jb25uZWN0ZWQgPSB0cnVlO1xuXHRcdFx0XHRcdHRoaXMuZGlzY29ubmVjdGVkID0gZmFsc2U7XG5cdFx0XHRcdFx0dGhpcy5lbWl0KCdjb25uZWN0Jyk7XG5cdFx0XHRcdFx0dGhpcy5lbWl0QnVmZmVyZWQoKTtcblx0XHRcdFx0fTtcblxuXHRcdFx0XHQvKipcbiAgICAgKiBFbWl0IGJ1ZmZlcmVkIGV2ZW50cyAocmVjZWl2ZWQgYW5kIGVtaXR0ZWQpLlxuICAgICAqXG4gICAgICogQGFwaSBwcml2YXRlXG4gICAgICovXG5cblx0XHRcdFx0U29ja2V0LnByb3RvdHlwZS5lbWl0QnVmZmVyZWQgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0dmFyIGk7XG5cdFx0XHRcdFx0Zm9yIChpID0gMDsgaSA8IHRoaXMucmVjZWl2ZUJ1ZmZlci5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdFx0ZW1pdC5hcHBseSh0aGlzLCB0aGlzLnJlY2VpdmVCdWZmZXJbaV0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHR0aGlzLnJlY2VpdmVCdWZmZXIgPSBbXTtcblxuXHRcdFx0XHRcdGZvciAoaSA9IDA7IGkgPCB0aGlzLnNlbmRCdWZmZXIubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHRcdHRoaXMucGFja2V0KHRoaXMuc2VuZEJ1ZmZlcltpXSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHRoaXMuc2VuZEJ1ZmZlciA9IFtdO1xuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdC8qKlxuICAgICAqIENhbGxlZCB1cG9uIHNlcnZlciBkaXNjb25uZWN0LlxuICAgICAqXG4gICAgICogQGFwaSBwcml2YXRlXG4gICAgICovXG5cblx0XHRcdFx0U29ja2V0LnByb3RvdHlwZS5vbmRpc2Nvbm5lY3QgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0ZGVidWcoJ3NlcnZlciBkaXNjb25uZWN0ICglcyknLCB0aGlzLm5zcCk7XG5cdFx0XHRcdFx0dGhpcy5kZXN0cm95KCk7XG5cdFx0XHRcdFx0dGhpcy5vbmNsb3NlKCdpbyBzZXJ2ZXIgZGlzY29ubmVjdCcpO1xuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdC8qKlxuICAgICAqIENhbGxlZCB1cG9uIGZvcmNlZCBjbGllbnQvc2VydmVyIHNpZGUgZGlzY29ubmVjdGlvbnMsXG4gICAgICogdGhpcyBtZXRob2QgZW5zdXJlcyB0aGUgbWFuYWdlciBzdG9wcyB0cmFja2luZyB1cyBhbmRcbiAgICAgKiB0aGF0IHJlY29ubmVjdGlvbnMgZG9uJ3QgZ2V0IHRyaWdnZXJlZCBmb3IgdGhpcy5cbiAgICAgKlxuICAgICAqIEBhcGkgcHJpdmF0ZS5cbiAgICAgKi9cblxuXHRcdFx0XHRTb2NrZXQucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0aWYgKHRoaXMuc3Vicykge1xuXHRcdFx0XHRcdFx0Ly8gY2xlYW4gc3Vic2NyaXB0aW9ucyB0byBhdm9pZCByZWNvbm5lY3Rpb25zXG5cdFx0XHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc3Vicy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdFx0XHR0aGlzLnN1YnNbaV0uZGVzdHJveSgpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0dGhpcy5zdWJzID0gbnVsbDtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHR0aGlzLmlvLmRlc3Ryb3kodGhpcyk7XG5cdFx0XHRcdH07XG5cblx0XHRcdFx0LyoqXG4gICAgICogRGlzY29ubmVjdHMgdGhlIHNvY2tldCBtYW51YWxseS5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge1NvY2tldH0gc2VsZlxuICAgICAqIEBhcGkgcHVibGljXG4gICAgICovXG5cblx0XHRcdFx0U29ja2V0LnByb3RvdHlwZS5jbG9zZSA9IFNvY2tldC5wcm90b3R5cGUuZGlzY29ubmVjdCA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRpZiAodGhpcy5jb25uZWN0ZWQpIHtcblx0XHRcdFx0XHRcdGRlYnVnKCdwZXJmb3JtaW5nIGRpc2Nvbm5lY3QgKCVzKScsIHRoaXMubnNwKTtcblx0XHRcdFx0XHRcdHRoaXMucGFja2V0KHtcblx0XHRcdFx0XHRcdFx0dHlwZTogcGFyc2VyLkRJU0NPTk5FQ1Rcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIHJlbW92ZSBzb2NrZXQgZnJvbSBwb29sXG5cdFx0XHRcdFx0dGhpcy5kZXN0cm95KCk7XG5cblx0XHRcdFx0XHRpZiAodGhpcy5jb25uZWN0ZWQpIHtcblx0XHRcdFx0XHRcdC8vIGZpcmUgZXZlbnRzXG5cdFx0XHRcdFx0XHR0aGlzLm9uY2xvc2UoJ2lvIGNsaWVudCBkaXNjb25uZWN0Jyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdC8qKlxuICAgICAqIFNldHMgdGhlIGNvbXByZXNzIGZsYWcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IGlmIGB0cnVlYCwgY29tcHJlc3NlcyB0aGUgc2VuZGluZyBkYXRhXG4gICAgICogQHJldHVybiB7U29ja2V0fSBzZWxmXG4gICAgICogQGFwaSBwdWJsaWNcbiAgICAgKi9cblxuXHRcdFx0XHRTb2NrZXQucHJvdG90eXBlLmNvbXByZXNzID0gZnVuY3Rpb24gKGNvbXByZXNzKSB7XG5cdFx0XHRcdFx0dGhpcy5mbGFncyA9IHRoaXMuZmxhZ3MgfHwge307XG5cdFx0XHRcdFx0dGhpcy5mbGFncy5jb21wcmVzcyA9IGNvbXByZXNzO1xuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9O1xuXHRcdFx0fSwge1xuXHRcdFx0XHRcIi4vb25cIjogMzMsXG5cdFx0XHRcdFwiY29tcG9uZW50LWJpbmRcIjogMzcsXG5cdFx0XHRcdFwiY29tcG9uZW50LWVtaXR0ZXJcIjogMzgsXG5cdFx0XHRcdFwiZGVidWdcIjogMzksXG5cdFx0XHRcdFwiaGFzLWJpbmFyeVwiOiA0MSxcblx0XHRcdFx0XCJzb2NrZXQuaW8tcGFyc2VyXCI6IDQ3LFxuXHRcdFx0XHRcInRvLWFycmF5XCI6IDUxXG5cdFx0XHR9XSxcblx0XHRcdDM1OiBbZnVuY3Rpb24gKF9kZXJlcV8sIG1vZHVsZSwgZXhwb3J0cykge1xuXHRcdFx0XHQoZnVuY3Rpb24gKGdsb2JhbCkge1xuXG5cdFx0XHRcdFx0LyoqXG4gICAgICAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gICAgICAqL1xuXG5cdFx0XHRcdFx0dmFyIHBhcnNldXJpID0gX2RlcmVxXygncGFyc2V1cmknKTtcblx0XHRcdFx0XHR2YXIgZGVidWcgPSBfZGVyZXFfKCdkZWJ1ZycpKCdzb2NrZXQuaW8tY2xpZW50OnVybCcpO1xuXG5cdFx0XHRcdFx0LyoqXG4gICAgICAqIE1vZHVsZSBleHBvcnRzLlxuICAgICAgKi9cblxuXHRcdFx0XHRcdG1vZHVsZS5leHBvcnRzID0gdXJsO1xuXG5cdFx0XHRcdFx0LyoqXG4gICAgICAqIFVSTCBwYXJzZXIuXG4gICAgICAqXG4gICAgICAqIEBwYXJhbSB7U3RyaW5nfSB1cmxcbiAgICAgICogQHBhcmFtIHtPYmplY3R9IEFuIG9iamVjdCBtZWFudCB0byBtaW1pYyB3aW5kb3cubG9jYXRpb24uXG4gICAgICAqICAgICAgICAgICAgICAgICBEZWZhdWx0cyB0byB3aW5kb3cubG9jYXRpb24uXG4gICAgICAqIEBhcGkgcHVibGljXG4gICAgICAqL1xuXG5cdFx0XHRcdFx0ZnVuY3Rpb24gdXJsKHVyaSwgbG9jKSB7XG5cdFx0XHRcdFx0XHR2YXIgb2JqID0gdXJpO1xuXG5cdFx0XHRcdFx0XHQvLyBkZWZhdWx0IHRvIHdpbmRvdy5sb2NhdGlvblxuXHRcdFx0XHRcdFx0dmFyIGxvYyA9IGxvYyB8fCBnbG9iYWwubG9jYXRpb247XG5cdFx0XHRcdFx0XHRpZiAobnVsbCA9PSB1cmkpIHVyaSA9IGxvYy5wcm90b2NvbCArICcvLycgKyBsb2MuaG9zdDtcblxuXHRcdFx0XHRcdFx0Ly8gcmVsYXRpdmUgcGF0aCBzdXBwb3J0XG5cdFx0XHRcdFx0XHRpZiAoJ3N0cmluZycgPT0gdHlwZW9mIHVyaSkge1xuXHRcdFx0XHRcdFx0XHRpZiAoJy8nID09IHVyaS5jaGFyQXQoMCkpIHtcblx0XHRcdFx0XHRcdFx0XHRpZiAoJy8nID09IHVyaS5jaGFyQXQoMSkpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHVyaSA9IGxvYy5wcm90b2NvbCArIHVyaTtcblx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0dXJpID0gbG9jLmhvc3QgKyB1cmk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0aWYgKCEvXihodHRwcz98d3NzPyk6XFwvXFwvLy50ZXN0KHVyaSkpIHtcblx0XHRcdFx0XHRcdFx0XHRkZWJ1ZygncHJvdG9jb2wtbGVzcyB1cmwgJXMnLCB1cmkpO1xuXHRcdFx0XHRcdFx0XHRcdGlmICgndW5kZWZpbmVkJyAhPSB0eXBlb2YgbG9jKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHR1cmkgPSBsb2MucHJvdG9jb2wgKyAnLy8nICsgdXJpO1xuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHR1cmkgPSAnaHR0cHM6Ly8nICsgdXJpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdC8vIHBhcnNlXG5cdFx0XHRcdFx0XHRcdGRlYnVnKCdwYXJzZSAlcycsIHVyaSk7XG5cdFx0XHRcdFx0XHRcdG9iaiA9IHBhcnNldXJpKHVyaSk7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdC8vIG1ha2Ugc3VyZSB3ZSB0cmVhdCBgbG9jYWxob3N0OjgwYCBhbmQgYGxvY2FsaG9zdGAgZXF1YWxseVxuXHRcdFx0XHRcdFx0aWYgKCFvYmoucG9ydCkge1xuXHRcdFx0XHRcdFx0XHRpZiAoL14oaHR0cHx3cykkLy50ZXN0KG9iai5wcm90b2NvbCkpIHtcblx0XHRcdFx0XHRcdFx0XHRvYmoucG9ydCA9ICc4MCc7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoL14oaHR0cHx3cylzJC8udGVzdChvYmoucHJvdG9jb2wpKSB7XG5cdFx0XHRcdFx0XHRcdFx0b2JqLnBvcnQgPSAnNDQzJztcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRvYmoucGF0aCA9IG9iai5wYXRoIHx8ICcvJztcblxuXHRcdFx0XHRcdFx0dmFyIGlwdjYgPSBvYmouaG9zdC5pbmRleE9mKCc6JykgIT09IC0xO1xuXHRcdFx0XHRcdFx0dmFyIGhvc3QgPSBpcHY2ID8gJ1snICsgb2JqLmhvc3QgKyAnXScgOiBvYmouaG9zdDtcblxuXHRcdFx0XHRcdFx0Ly8gZGVmaW5lIHVuaXF1ZSBpZFxuXHRcdFx0XHRcdFx0b2JqLmlkID0gb2JqLnByb3RvY29sICsgJzovLycgKyBob3N0ICsgJzonICsgb2JqLnBvcnQ7XG5cdFx0XHRcdFx0XHQvLyBkZWZpbmUgaHJlZlxuXHRcdFx0XHRcdFx0b2JqLmhyZWYgPSBvYmoucHJvdG9jb2wgKyAnOi8vJyArIGhvc3QgKyAobG9jICYmIGxvYy5wb3J0ID09IG9iai5wb3J0ID8gJycgOiAnOicgKyBvYmoucG9ydCk7XG5cblx0XHRcdFx0XHRcdHJldHVybiBvYmo7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KS5jYWxsKHRoaXMsIHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiB0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDoge30pO1xuXHRcdFx0fSwge1xuXHRcdFx0XHRcImRlYnVnXCI6IDM5LFxuXHRcdFx0XHRcInBhcnNldXJpXCI6IDQ1XG5cdFx0XHR9XSxcblx0XHRcdDM2OiBbZnVuY3Rpb24gKF9kZXJlcV8sIG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFx0XHRcdC8qKlxuICAgICAqIEV4cG9zZSBgQmFja29mZmAuXG4gICAgICovXG5cblx0XHRcdFx0bW9kdWxlLmV4cG9ydHMgPSBCYWNrb2ZmO1xuXG5cdFx0XHRcdC8qKlxuICAgICAqIEluaXRpYWxpemUgYmFja29mZiB0aW1lciB3aXRoIGBvcHRzYC5cbiAgICAgKlxuICAgICAqIC0gYG1pbmAgaW5pdGlhbCB0aW1lb3V0IGluIG1pbGxpc2Vjb25kcyBbMTAwXVxuICAgICAqIC0gYG1heGAgbWF4IHRpbWVvdXQgWzEwMDAwXVxuICAgICAqIC0gYGppdHRlcmAgWzBdXG4gICAgICogLSBgZmFjdG9yYCBbMl1cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzXG4gICAgICogQGFwaSBwdWJsaWNcbiAgICAgKi9cblxuXHRcdFx0XHRmdW5jdGlvbiBCYWNrb2ZmKG9wdHMpIHtcblx0XHRcdFx0XHRvcHRzID0gb3B0cyB8fCB7fTtcblx0XHRcdFx0XHR0aGlzLm1zID0gb3B0cy5taW4gfHwgMTAwO1xuXHRcdFx0XHRcdHRoaXMubWF4ID0gb3B0cy5tYXggfHwgMTAwMDA7XG5cdFx0XHRcdFx0dGhpcy5mYWN0b3IgPSBvcHRzLmZhY3RvciB8fCAyO1xuXHRcdFx0XHRcdHRoaXMuaml0dGVyID0gb3B0cy5qaXR0ZXIgPiAwICYmIG9wdHMuaml0dGVyIDw9IDEgPyBvcHRzLmppdHRlciA6IDA7XG5cdFx0XHRcdFx0dGhpcy5hdHRlbXB0cyA9IDA7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvKipcbiAgICAgKiBSZXR1cm4gdGhlIGJhY2tvZmYgZHVyYXRpb24uXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9XG4gICAgICogQGFwaSBwdWJsaWNcbiAgICAgKi9cblxuXHRcdFx0XHRCYWNrb2ZmLnByb3RvdHlwZS5kdXJhdGlvbiA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHR2YXIgbXMgPSB0aGlzLm1zICogTWF0aC5wb3codGhpcy5mYWN0b3IsIHRoaXMuYXR0ZW1wdHMrKyk7XG5cdFx0XHRcdFx0aWYgKHRoaXMuaml0dGVyKSB7XG5cdFx0XHRcdFx0XHR2YXIgcmFuZCA9IE1hdGgucmFuZG9tKCk7XG5cdFx0XHRcdFx0XHR2YXIgZGV2aWF0aW9uID0gTWF0aC5mbG9vcihyYW5kICogdGhpcy5qaXR0ZXIgKiBtcyk7XG5cdFx0XHRcdFx0XHRtcyA9IChNYXRoLmZsb29yKHJhbmQgKiAxMCkgJiAxKSA9PSAwID8gbXMgLSBkZXZpYXRpb24gOiBtcyArIGRldmlhdGlvbjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIE1hdGgubWluKG1zLCB0aGlzLm1heCkgfCAwO1xuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdC8qKlxuICAgICAqIFJlc2V0IHRoZSBudW1iZXIgb2YgYXR0ZW1wdHMuXG4gICAgICpcbiAgICAgKiBAYXBpIHB1YmxpY1xuICAgICAqL1xuXG5cdFx0XHRcdEJhY2tvZmYucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdHRoaXMuYXR0ZW1wdHMgPSAwO1xuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdC8qKlxuICAgICAqIFNldCB0aGUgbWluaW11bSBkdXJhdGlvblxuICAgICAqXG4gICAgICogQGFwaSBwdWJsaWNcbiAgICAgKi9cblxuXHRcdFx0XHRCYWNrb2ZmLnByb3RvdHlwZS5zZXRNaW4gPSBmdW5jdGlvbiAobWluKSB7XG5cdFx0XHRcdFx0dGhpcy5tcyA9IG1pbjtcblx0XHRcdFx0fTtcblxuXHRcdFx0XHQvKipcbiAgICAgKiBTZXQgdGhlIG1heGltdW0gZHVyYXRpb25cbiAgICAgKlxuICAgICAqIEBhcGkgcHVibGljXG4gICAgICovXG5cblx0XHRcdFx0QmFja29mZi5wcm90b3R5cGUuc2V0TWF4ID0gZnVuY3Rpb24gKG1heCkge1xuXHRcdFx0XHRcdHRoaXMubWF4ID0gbWF4O1xuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdC8qKlxuICAgICAqIFNldCB0aGUgaml0dGVyXG4gICAgICpcbiAgICAgKiBAYXBpIHB1YmxpY1xuICAgICAqL1xuXG5cdFx0XHRcdEJhY2tvZmYucHJvdG90eXBlLnNldEppdHRlciA9IGZ1bmN0aW9uIChqaXR0ZXIpIHtcblx0XHRcdFx0XHR0aGlzLmppdHRlciA9IGppdHRlcjtcblx0XHRcdFx0fTtcblx0XHRcdH0sIHt9XSxcblx0XHRcdDM3OiBbZnVuY3Rpb24gKF9kZXJlcV8sIG1vZHVsZSwgZXhwb3J0cykge1xuXHRcdFx0XHQvKipcbiAgICAgKiBTbGljZSByZWZlcmVuY2UuXG4gICAgICovXG5cblx0XHRcdFx0dmFyIHNsaWNlID0gW10uc2xpY2U7XG5cblx0XHRcdFx0LyoqXG4gICAgICogQmluZCBgb2JqYCB0byBgZm5gLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9ialxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258U3RyaW5nfSBmbiBvciBzdHJpbmdcbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAgICAgKiBAYXBpIHB1YmxpY1xuICAgICAqL1xuXG5cdFx0XHRcdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG9iaiwgZm4pIHtcblx0XHRcdFx0XHRpZiAoJ3N0cmluZycgPT0gdHlwZW9mIGZuKSBmbiA9IG9ialtmbl07XG5cdFx0XHRcdFx0aWYgKCdmdW5jdGlvbicgIT0gdHlwZW9mIGZuKSB0aHJvdyBuZXcgRXJyb3IoJ2JpbmQoKSByZXF1aXJlcyBhIGZ1bmN0aW9uJyk7XG5cdFx0XHRcdFx0dmFyIGFyZ3MgPSBzbGljZS5jYWxsKGFyZ3VtZW50cywgMik7XG5cdFx0XHRcdFx0cmV0dXJuIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdHJldHVybiBmbi5hcHBseShvYmosIGFyZ3MuY29uY2F0KHNsaWNlLmNhbGwoYXJndW1lbnRzKSkpO1xuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH07XG5cdFx0XHR9LCB7fV0sXG5cdFx0XHQzODogW2Z1bmN0aW9uIChfZGVyZXFfLCBtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcdFx0XHQvKipcbiAgICAgKiBFeHBvc2UgYEVtaXR0ZXJgLlxuICAgICAqL1xuXG5cdFx0XHRcdG1vZHVsZS5leHBvcnRzID0gRW1pdHRlcjtcblxuXHRcdFx0XHQvKipcbiAgICAgKiBJbml0aWFsaXplIGEgbmV3IGBFbWl0dGVyYC5cbiAgICAgKlxuICAgICAqIEBhcGkgcHVibGljXG4gICAgICovXG5cblx0XHRcdFx0ZnVuY3Rpb24gRW1pdHRlcihvYmopIHtcblx0XHRcdFx0XHRpZiAob2JqKSByZXR1cm4gbWl4aW4ob2JqKTtcblx0XHRcdFx0fTtcblxuXHRcdFx0XHQvKipcbiAgICAgKiBNaXhpbiB0aGUgZW1pdHRlciBwcm9wZXJ0aWVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9ialxuICAgICAqIEByZXR1cm4ge09iamVjdH1cbiAgICAgKiBAYXBpIHByaXZhdGVcbiAgICAgKi9cblxuXHRcdFx0XHRmdW5jdGlvbiBtaXhpbihvYmopIHtcblx0XHRcdFx0XHRmb3IgKHZhciBrZXkgaW4gRW1pdHRlci5wcm90b3R5cGUpIHtcblx0XHRcdFx0XHRcdG9ialtrZXldID0gRW1pdHRlci5wcm90b3R5cGVba2V5XTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIG9iajtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8qKlxuICAgICAqIExpc3RlbiBvbiB0aGUgZ2l2ZW4gYGV2ZW50YCB3aXRoIGBmbmAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICAgICAqIEByZXR1cm4ge0VtaXR0ZXJ9XG4gICAgICogQGFwaSBwdWJsaWNcbiAgICAgKi9cblxuXHRcdFx0XHRFbWl0dGVyLnByb3RvdHlwZS5vbiA9IEVtaXR0ZXIucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoZXZlbnQsIGZuKSB7XG5cdFx0XHRcdFx0dGhpcy5fY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzIHx8IHt9O1xuXHRcdFx0XHRcdCh0aGlzLl9jYWxsYmFja3NbJyQnICsgZXZlbnRdID0gdGhpcy5fY2FsbGJhY2tzWyckJyArIGV2ZW50XSB8fCBbXSkucHVzaChmbik7XG5cdFx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHRcdH07XG5cblx0XHRcdFx0LyoqXG4gICAgICogQWRkcyBhbiBgZXZlbnRgIGxpc3RlbmVyIHRoYXQgd2lsbCBiZSBpbnZva2VkIGEgc2luZ2xlXG4gICAgICogdGltZSB0aGVuIGF1dG9tYXRpY2FsbHkgcmVtb3ZlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gICAgICogQHJldHVybiB7RW1pdHRlcn1cbiAgICAgKiBAYXBpIHB1YmxpY1xuICAgICAqL1xuXG5cdFx0XHRcdEVtaXR0ZXIucHJvdG90eXBlLm9uY2UgPSBmdW5jdGlvbiAoZXZlbnQsIGZuKSB7XG5cdFx0XHRcdFx0ZnVuY3Rpb24gb24oKSB7XG5cdFx0XHRcdFx0XHR0aGlzLm9mZihldmVudCwgb24pO1xuXHRcdFx0XHRcdFx0Zm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRvbi5mbiA9IGZuO1xuXHRcdFx0XHRcdHRoaXMub24oZXZlbnQsIG9uKTtcblx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdFx0fTtcblxuXHRcdFx0XHQvKipcbiAgICAgKiBSZW1vdmUgdGhlIGdpdmVuIGNhbGxiYWNrIGZvciBgZXZlbnRgIG9yIGFsbFxuICAgICAqIHJlZ2lzdGVyZWQgY2FsbGJhY2tzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAgICAgKiBAcmV0dXJuIHtFbWl0dGVyfVxuICAgICAqIEBhcGkgcHVibGljXG4gICAgICovXG5cblx0XHRcdFx0RW1pdHRlci5wcm90b3R5cGUub2ZmID0gRW1pdHRlci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIgPSBFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKGV2ZW50LCBmbikge1xuXHRcdFx0XHRcdHRoaXMuX2NhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrcyB8fCB7fTtcblxuXHRcdFx0XHRcdC8vIGFsbFxuXHRcdFx0XHRcdGlmICgwID09IGFyZ3VtZW50cy5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdHRoaXMuX2NhbGxiYWNrcyA9IHt9O1xuXHRcdFx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gc3BlY2lmaWMgZXZlbnRcblx0XHRcdFx0XHR2YXIgY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzWyckJyArIGV2ZW50XTtcblx0XHRcdFx0XHRpZiAoIWNhbGxiYWNrcykgcmV0dXJuIHRoaXM7XG5cblx0XHRcdFx0XHQvLyByZW1vdmUgYWxsIGhhbmRsZXJzXG5cdFx0XHRcdFx0aWYgKDEgPT0gYXJndW1lbnRzLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0ZGVsZXRlIHRoaXMuX2NhbGxiYWNrc1snJCcgKyBldmVudF07XG5cdFx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyByZW1vdmUgc3BlY2lmaWMgaGFuZGxlclxuXHRcdFx0XHRcdHZhciBjYjtcblx0XHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGNhbGxiYWNrcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdFx0Y2IgPSBjYWxsYmFja3NbaV07XG5cdFx0XHRcdFx0XHRpZiAoY2IgPT09IGZuIHx8IGNiLmZuID09PSBmbikge1xuXHRcdFx0XHRcdFx0XHRjYWxsYmFja3Muc3BsaWNlKGksIDEpO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHRcdH07XG5cblx0XHRcdFx0LyoqXG4gICAgICogRW1pdCBgZXZlbnRgIHdpdGggdGhlIGdpdmVuIGFyZ3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAgICAgKiBAcGFyYW0ge01peGVkfSAuLi5cbiAgICAgKiBAcmV0dXJuIHtFbWl0dGVyfVxuICAgICAqL1xuXG5cdFx0XHRcdEVtaXR0ZXIucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcblx0XHRcdFx0XHR0aGlzLl9jYWxsYmFja3MgPSB0aGlzLl9jYWxsYmFja3MgfHwge307XG5cdFx0XHRcdFx0dmFyIGFyZ3MgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSksXG5cdFx0XHRcdFx0ICAgIGNhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrc1snJCcgKyBldmVudF07XG5cblx0XHRcdFx0XHRpZiAoY2FsbGJhY2tzKSB7XG5cdFx0XHRcdFx0XHRjYWxsYmFja3MgPSBjYWxsYmFja3Muc2xpY2UoMCk7XG5cdFx0XHRcdFx0XHRmb3IgKHZhciBpID0gMCwgbGVuID0gY2FsbGJhY2tzLmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7XG5cdFx0XHRcdFx0XHRcdGNhbGxiYWNrc1tpXS5hcHBseSh0aGlzLCBhcmdzKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdFx0fTtcblxuXHRcdFx0XHQvKipcbiAgICAgKiBSZXR1cm4gYXJyYXkgb2YgY2FsbGJhY2tzIGZvciBgZXZlbnRgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gICAgICogQHJldHVybiB7QXJyYXl9XG4gICAgICogQGFwaSBwdWJsaWNcbiAgICAgKi9cblxuXHRcdFx0XHRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lcnMgPSBmdW5jdGlvbiAoZXZlbnQpIHtcblx0XHRcdFx0XHR0aGlzLl9jYWxsYmFja3MgPSB0aGlzLl9jYWxsYmFja3MgfHwge307XG5cdFx0XHRcdFx0cmV0dXJuIHRoaXMuX2NhbGxiYWNrc1snJCcgKyBldmVudF0gfHwgW107XG5cdFx0XHRcdH07XG5cblx0XHRcdFx0LyoqXG4gICAgICogQ2hlY2sgaWYgdGhpcyBlbWl0dGVyIGhhcyBgZXZlbnRgIGhhbmRsZXJzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gICAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICAgKiBAYXBpIHB1YmxpY1xuICAgICAqL1xuXG5cdFx0XHRcdEVtaXR0ZXIucHJvdG90eXBlLmhhc0xpc3RlbmVycyA9IGZ1bmN0aW9uIChldmVudCkge1xuXHRcdFx0XHRcdHJldHVybiAhIXRoaXMubGlzdGVuZXJzKGV2ZW50KS5sZW5ndGg7XG5cdFx0XHRcdH07XG5cdFx0XHR9LCB7fV0sXG5cdFx0XHQzOTogW2Z1bmN0aW9uIChfZGVyZXFfLCBtb2R1bGUsIGV4cG9ydHMpIHtcblx0XHRcdFx0YXJndW1lbnRzWzRdWzE3XVswXS5hcHBseShleHBvcnRzLCBhcmd1bWVudHMpO1xuXHRcdFx0fSwge1xuXHRcdFx0XHRcIi4vZGVidWdcIjogNDAsXG5cdFx0XHRcdFwiZHVwXCI6IDE3XG5cdFx0XHR9XSxcblx0XHRcdDQwOiBbZnVuY3Rpb24gKF9kZXJlcV8sIG1vZHVsZSwgZXhwb3J0cykge1xuXHRcdFx0XHRhcmd1bWVudHNbNF1bMThdWzBdLmFwcGx5KGV4cG9ydHMsIGFyZ3VtZW50cyk7XG5cdFx0XHR9LCB7XG5cdFx0XHRcdFwiZHVwXCI6IDE4LFxuXHRcdFx0XHRcIm1zXCI6IDQ0XG5cdFx0XHR9XSxcblx0XHRcdDQxOiBbZnVuY3Rpb24gKF9kZXJlcV8sIG1vZHVsZSwgZXhwb3J0cykge1xuXHRcdFx0XHQoZnVuY3Rpb24gKGdsb2JhbCkge1xuXG5cdFx0XHRcdFx0LypcbiAgICAgICogTW9kdWxlIHJlcXVpcmVtZW50cy5cbiAgICAgICovXG5cblx0XHRcdFx0XHR2YXIgaXNBcnJheSA9IF9kZXJlcV8oJ2lzYXJyYXknKTtcblxuXHRcdFx0XHRcdC8qKlxuICAgICAgKiBNb2R1bGUgZXhwb3J0cy5cbiAgICAgICovXG5cblx0XHRcdFx0XHRtb2R1bGUuZXhwb3J0cyA9IGhhc0JpbmFyeTtcblxuXHRcdFx0XHRcdC8qKlxuICAgICAgKiBDaGVja3MgZm9yIGJpbmFyeSBkYXRhLlxuICAgICAgKlxuICAgICAgKiBSaWdodCBub3cgb25seSBCdWZmZXIgYW5kIEFycmF5QnVmZmVyIGFyZSBzdXBwb3J0ZWQuLlxuICAgICAgKlxuICAgICAgKiBAcGFyYW0ge09iamVjdH0gYW55dGhpbmdcbiAgICAgICogQGFwaSBwdWJsaWNcbiAgICAgICovXG5cblx0XHRcdFx0XHRmdW5jdGlvbiBoYXNCaW5hcnkoZGF0YSkge1xuXG5cdFx0XHRcdFx0XHRmdW5jdGlvbiBfaGFzQmluYXJ5KG9iaikge1xuXHRcdFx0XHRcdFx0XHRpZiAoIW9iaikgcmV0dXJuIGZhbHNlO1xuXG5cdFx0XHRcdFx0XHRcdGlmIChnbG9iYWwuQnVmZmVyICYmIGdsb2JhbC5CdWZmZXIuaXNCdWZmZXIgJiYgZ2xvYmFsLkJ1ZmZlci5pc0J1ZmZlcihvYmopIHx8IGdsb2JhbC5BcnJheUJ1ZmZlciAmJiBvYmogaW5zdGFuY2VvZiBBcnJheUJ1ZmZlciB8fCBnbG9iYWwuQmxvYiAmJiBvYmogaW5zdGFuY2VvZiBCbG9iIHx8IGdsb2JhbC5GaWxlICYmIG9iaiBpbnN0YW5jZW9mIEZpbGUpIHtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdGlmIChpc0FycmF5KG9iaikpIHtcblx0XHRcdFx0XHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IG9iai5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKF9oYXNCaW5hcnkob2JqW2ldKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAob2JqICYmICdvYmplY3QnID09ICh0eXBlb2Ygb2JqID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2Yob2JqKSkpIHtcblx0XHRcdFx0XHRcdFx0XHQvLyBzZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9BdXRvbWF0dGljL2hhcy1iaW5hcnkvcHVsbC80XG5cdFx0XHRcdFx0XHRcdFx0aWYgKG9iai50b0pTT04gJiYgJ2Z1bmN0aW9uJyA9PSB0eXBlb2Ygb2JqLnRvSlNPTikge1xuXHRcdFx0XHRcdFx0XHRcdFx0b2JqID0gb2JqLnRvSlNPTigpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRcdGZvciAodmFyIGtleSBpbiBvYmopIHtcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpICYmIF9oYXNCaW5hcnkob2JqW2tleV0pKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0cmV0dXJuIF9oYXNCaW5hcnkoZGF0YSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KS5jYWxsKHRoaXMsIHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiB0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDoge30pO1xuXHRcdFx0fSwge1xuXHRcdFx0XHRcImlzYXJyYXlcIjogNDNcblx0XHRcdH1dLFxuXHRcdFx0NDI6IFtmdW5jdGlvbiAoX2RlcmVxXywgbW9kdWxlLCBleHBvcnRzKSB7XG5cdFx0XHRcdGFyZ3VtZW50c1s0XVsyM11bMF0uYXBwbHkoZXhwb3J0cywgYXJndW1lbnRzKTtcblx0XHRcdH0sIHtcblx0XHRcdFx0XCJkdXBcIjogMjNcblx0XHRcdH1dLFxuXHRcdFx0NDM6IFtmdW5jdGlvbiAoX2RlcmVxXywgbW9kdWxlLCBleHBvcnRzKSB7XG5cdFx0XHRcdGFyZ3VtZW50c1s0XVsyNF1bMF0uYXBwbHkoZXhwb3J0cywgYXJndW1lbnRzKTtcblx0XHRcdH0sIHtcblx0XHRcdFx0XCJkdXBcIjogMjRcblx0XHRcdH1dLFxuXHRcdFx0NDQ6IFtmdW5jdGlvbiAoX2RlcmVxXywgbW9kdWxlLCBleHBvcnRzKSB7XG5cdFx0XHRcdGFyZ3VtZW50c1s0XVsyNV1bMF0uYXBwbHkoZXhwb3J0cywgYXJndW1lbnRzKTtcblx0XHRcdH0sIHtcblx0XHRcdFx0XCJkdXBcIjogMjVcblx0XHRcdH1dLFxuXHRcdFx0NDU6IFtmdW5jdGlvbiAoX2RlcmVxXywgbW9kdWxlLCBleHBvcnRzKSB7XG5cdFx0XHRcdGFyZ3VtZW50c1s0XVsyOF1bMF0uYXBwbHkoZXhwb3J0cywgYXJndW1lbnRzKTtcblx0XHRcdH0sIHtcblx0XHRcdFx0XCJkdXBcIjogMjhcblx0XHRcdH1dLFxuXHRcdFx0NDY6IFtmdW5jdGlvbiAoX2RlcmVxXywgbW9kdWxlLCBleHBvcnRzKSB7XG5cdFx0XHRcdChmdW5jdGlvbiAoZ2xvYmFsKSB7XG5cdFx0XHRcdFx0LypnbG9iYWwgQmxvYixGaWxlKi9cblxuXHRcdFx0XHRcdC8qKlxuICAgICAgKiBNb2R1bGUgcmVxdWlyZW1lbnRzXG4gICAgICAqL1xuXG5cdFx0XHRcdFx0dmFyIGlzQXJyYXkgPSBfZGVyZXFfKCdpc2FycmF5Jyk7XG5cdFx0XHRcdFx0dmFyIGlzQnVmID0gX2RlcmVxXygnLi9pcy1idWZmZXInKTtcblxuXHRcdFx0XHRcdC8qKlxuICAgICAgKiBSZXBsYWNlcyBldmVyeSBCdWZmZXIgfCBBcnJheUJ1ZmZlciBpbiBwYWNrZXQgd2l0aCBhIG51bWJlcmVkIHBsYWNlaG9sZGVyLlxuICAgICAgKiBBbnl0aGluZyB3aXRoIGJsb2JzIG9yIGZpbGVzIHNob3VsZCBiZSBmZWQgdGhyb3VnaCByZW1vdmVCbG9icyBiZWZvcmUgY29taW5nXG4gICAgICAqIGhlcmUuXG4gICAgICAqXG4gICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwYWNrZXQgLSBzb2NrZXQuaW8gZXZlbnQgcGFja2V0XG4gICAgICAqIEByZXR1cm4ge09iamVjdH0gd2l0aCBkZWNvbnN0cnVjdGVkIHBhY2tldCBhbmQgbGlzdCBvZiBidWZmZXJzXG4gICAgICAqIEBhcGkgcHVibGljXG4gICAgICAqL1xuXG5cdFx0XHRcdFx0ZXhwb3J0cy5kZWNvbnN0cnVjdFBhY2tldCA9IGZ1bmN0aW9uIChwYWNrZXQpIHtcblx0XHRcdFx0XHRcdHZhciBidWZmZXJzID0gW107XG5cdFx0XHRcdFx0XHR2YXIgcGFja2V0RGF0YSA9IHBhY2tldC5kYXRhO1xuXG5cdFx0XHRcdFx0XHRmdW5jdGlvbiBfZGVjb25zdHJ1Y3RQYWNrZXQoZGF0YSkge1xuXHRcdFx0XHRcdFx0XHRpZiAoIWRhdGEpIHJldHVybiBkYXRhO1xuXG5cdFx0XHRcdFx0XHRcdGlmIChpc0J1ZihkYXRhKSkge1xuXHRcdFx0XHRcdFx0XHRcdHZhciBwbGFjZWhvbGRlciA9IHtcblx0XHRcdFx0XHRcdFx0XHRcdF9wbGFjZWhvbGRlcjogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0XHRcdG51bTogYnVmZmVycy5sZW5ndGhcblx0XHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0XHRcdGJ1ZmZlcnMucHVzaChkYXRhKTtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gcGxhY2Vob2xkZXI7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoaXNBcnJheShkYXRhKSkge1xuXHRcdFx0XHRcdFx0XHRcdHZhciBuZXdEYXRhID0gbmV3IEFycmF5KGRhdGEubGVuZ3RoKTtcblx0XHRcdFx0XHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHRcdFx0XHRcdG5ld0RhdGFbaV0gPSBfZGVjb25zdHJ1Y3RQYWNrZXQoZGF0YVtpXSk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdHJldHVybiBuZXdEYXRhO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKCdvYmplY3QnID09ICh0eXBlb2YgZGF0YSA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBfdHlwZW9mKGRhdGEpKSAmJiAhKGRhdGEgaW5zdGFuY2VvZiBEYXRlKSkge1xuXHRcdFx0XHRcdFx0XHRcdHZhciBuZXdEYXRhID0ge307XG5cdFx0XHRcdFx0XHRcdFx0Zm9yICh2YXIga2V5IGluIGRhdGEpIHtcblx0XHRcdFx0XHRcdFx0XHRcdG5ld0RhdGFba2V5XSA9IF9kZWNvbnN0cnVjdFBhY2tldChkYXRhW2tleV0pO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gbmV3RGF0YTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gZGF0YTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0dmFyIHBhY2sgPSBwYWNrZXQ7XG5cdFx0XHRcdFx0XHRwYWNrLmRhdGEgPSBfZGVjb25zdHJ1Y3RQYWNrZXQocGFja2V0RGF0YSk7XG5cdFx0XHRcdFx0XHRwYWNrLmF0dGFjaG1lbnRzID0gYnVmZmVycy5sZW5ndGg7IC8vIG51bWJlciBvZiBiaW5hcnkgJ2F0dGFjaG1lbnRzJ1xuXHRcdFx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRcdFx0cGFja2V0OiBwYWNrLFxuXHRcdFx0XHRcdFx0XHRidWZmZXJzOiBidWZmZXJzXG5cdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdH07XG5cblx0XHRcdFx0XHQvKipcbiAgICAgICogUmVjb25zdHJ1Y3RzIGEgYmluYXJ5IHBhY2tldCBmcm9tIGl0cyBwbGFjZWhvbGRlciBwYWNrZXQgYW5kIGJ1ZmZlcnNcbiAgICAgICpcbiAgICAgICogQHBhcmFtIHtPYmplY3R9IHBhY2tldCAtIGV2ZW50IHBhY2tldCB3aXRoIHBsYWNlaG9sZGVyc1xuICAgICAgKiBAcGFyYW0ge0FycmF5fSBidWZmZXJzIC0gYmluYXJ5IGJ1ZmZlcnMgdG8gcHV0IGluIHBsYWNlaG9sZGVyIHBvc2l0aW9uc1xuICAgICAgKiBAcmV0dXJuIHtPYmplY3R9IHJlY29uc3RydWN0ZWQgcGFja2V0XG4gICAgICAqIEBhcGkgcHVibGljXG4gICAgICAqL1xuXG5cdFx0XHRcdFx0ZXhwb3J0cy5yZWNvbnN0cnVjdFBhY2tldCA9IGZ1bmN0aW9uIChwYWNrZXQsIGJ1ZmZlcnMpIHtcblx0XHRcdFx0XHRcdHZhciBjdXJQbGFjZUhvbGRlciA9IDA7XG5cblx0XHRcdFx0XHRcdGZ1bmN0aW9uIF9yZWNvbnN0cnVjdFBhY2tldChkYXRhKSB7XG5cdFx0XHRcdFx0XHRcdGlmIChkYXRhICYmIGRhdGEuX3BsYWNlaG9sZGVyKSB7XG5cdFx0XHRcdFx0XHRcdFx0dmFyIGJ1ZiA9IGJ1ZmZlcnNbZGF0YS5udW1dOyAvLyBhcHByb3ByaWF0ZSBidWZmZXIgKHNob3VsZCBiZSBuYXR1cmFsIG9yZGVyIGFueXdheSlcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gYnVmO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKGlzQXJyYXkoZGF0YSkpIHtcblx0XHRcdFx0XHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHRcdFx0XHRcdGRhdGFbaV0gPSBfcmVjb25zdHJ1Y3RQYWNrZXQoZGF0YVtpXSk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdHJldHVybiBkYXRhO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKGRhdGEgJiYgJ29iamVjdCcgPT0gKHR5cGVvZiBkYXRhID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YoZGF0YSkpKSB7XG5cdFx0XHRcdFx0XHRcdFx0Zm9yICh2YXIga2V5IGluIGRhdGEpIHtcblx0XHRcdFx0XHRcdFx0XHRcdGRhdGFba2V5XSA9IF9yZWNvbnN0cnVjdFBhY2tldChkYXRhW2tleV0pO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gZGF0YTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gZGF0YTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0cGFja2V0LmRhdGEgPSBfcmVjb25zdHJ1Y3RQYWNrZXQocGFja2V0LmRhdGEpO1xuXHRcdFx0XHRcdFx0cGFja2V0LmF0dGFjaG1lbnRzID0gdW5kZWZpbmVkOyAvLyBubyBsb25nZXIgdXNlZnVsXG5cdFx0XHRcdFx0XHRyZXR1cm4gcGFja2V0O1xuXHRcdFx0XHRcdH07XG5cblx0XHRcdFx0XHQvKipcbiAgICAgICogQXN5bmNocm9ub3VzbHkgcmVtb3ZlcyBCbG9icyBvciBGaWxlcyBmcm9tIGRhdGEgdmlhXG4gICAgICAqIEZpbGVSZWFkZXIncyByZWFkQXNBcnJheUJ1ZmZlciBtZXRob2QuIFVzZWQgYmVmb3JlIGVuY29kaW5nXG4gICAgICAqIGRhdGEgYXMgbXNncGFjay4gQ2FsbHMgY2FsbGJhY2sgd2l0aCB0aGUgYmxvYmxlc3MgZGF0YS5cbiAgICAgICpcbiAgICAgICogQHBhcmFtIHtPYmplY3R9IGRhdGFcbiAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAgICAgICogQGFwaSBwcml2YXRlXG4gICAgICAqL1xuXG5cdFx0XHRcdFx0ZXhwb3J0cy5yZW1vdmVCbG9icyA9IGZ1bmN0aW9uIChkYXRhLCBjYWxsYmFjaykge1xuXHRcdFx0XHRcdFx0ZnVuY3Rpb24gX3JlbW92ZUJsb2JzKG9iaiwgY3VyS2V5LCBjb250YWluaW5nT2JqZWN0KSB7XG5cdFx0XHRcdFx0XHRcdGlmICghb2JqKSByZXR1cm4gb2JqO1xuXG5cdFx0XHRcdFx0XHRcdC8vIGNvbnZlcnQgYW55IGJsb2Jcblx0XHRcdFx0XHRcdFx0aWYgKGdsb2JhbC5CbG9iICYmIG9iaiBpbnN0YW5jZW9mIEJsb2IgfHwgZ2xvYmFsLkZpbGUgJiYgb2JqIGluc3RhbmNlb2YgRmlsZSkge1xuXHRcdFx0XHRcdFx0XHRcdHBlbmRpbmdCbG9icysrO1xuXG5cdFx0XHRcdFx0XHRcdFx0Ly8gYXN5bmMgZmlsZXJlYWRlclxuXHRcdFx0XHRcdFx0XHRcdHZhciBmaWxlUmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcblx0XHRcdFx0XHRcdFx0XHRmaWxlUmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdFx0XHRcdC8vIHRoaXMucmVzdWx0ID09IGFycmF5YnVmZmVyXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoY29udGFpbmluZ09iamVjdCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRjb250YWluaW5nT2JqZWN0W2N1cktleV0gPSB0aGlzLnJlc3VsdDtcblx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGJsb2JsZXNzRGF0YSA9IHRoaXMucmVzdWx0O1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBpZiBub3RoaW5nIHBlbmRpbmcgaXRzIGNhbGxiYWNrIHRpbWVcblx0XHRcdFx0XHRcdFx0XHRcdGlmICghIC0tcGVuZGluZ0Jsb2JzKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNhbGxiYWNrKGJsb2JsZXNzRGF0YSk7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fTtcblxuXHRcdFx0XHRcdFx0XHRcdGZpbGVSZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIob2JqKTsgLy8gYmxvYiAtPiBhcnJheWJ1ZmZlclxuXHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKGlzQXJyYXkob2JqKSkge1xuXHRcdFx0XHRcdFx0XHRcdC8vIGhhbmRsZSBhcnJheVxuXHRcdFx0XHRcdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgb2JqLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRfcmVtb3ZlQmxvYnMob2JqW2ldLCBpLCBvYmopO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSBlbHNlIGlmIChvYmogJiYgJ29iamVjdCcgPT0gKHR5cGVvZiBvYmogPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZihvYmopKSAmJiAhaXNCdWYob2JqKSkge1xuXHRcdFx0XHRcdFx0XHRcdC8vIGFuZCBvYmplY3Rcblx0XHRcdFx0XHRcdFx0XHRmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRfcmVtb3ZlQmxvYnMob2JqW2tleV0sIGtleSwgb2JqKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0dmFyIHBlbmRpbmdCbG9icyA9IDA7XG5cdFx0XHRcdFx0XHR2YXIgYmxvYmxlc3NEYXRhID0gZGF0YTtcblx0XHRcdFx0XHRcdF9yZW1vdmVCbG9icyhibG9ibGVzc0RhdGEpO1xuXHRcdFx0XHRcdFx0aWYgKCFwZW5kaW5nQmxvYnMpIHtcblx0XHRcdFx0XHRcdFx0Y2FsbGJhY2soYmxvYmxlc3NEYXRhKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9O1xuXHRcdFx0XHR9KS5jYWxsKHRoaXMsIHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiB0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDoge30pO1xuXHRcdFx0fSwge1xuXHRcdFx0XHRcIi4vaXMtYnVmZmVyXCI6IDQ4LFxuXHRcdFx0XHRcImlzYXJyYXlcIjogNDNcblx0XHRcdH1dLFxuXHRcdFx0NDc6IFtmdW5jdGlvbiAoX2RlcmVxXywgbW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XHRcdFx0LyoqXG4gICAgICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAgICAgKi9cblxuXHRcdFx0XHR2YXIgZGVidWcgPSBfZGVyZXFfKCdkZWJ1ZycpKCdzb2NrZXQuaW8tcGFyc2VyJyk7XG5cdFx0XHRcdHZhciBqc29uID0gX2RlcmVxXygnanNvbjMnKTtcblx0XHRcdFx0dmFyIGlzQXJyYXkgPSBfZGVyZXFfKCdpc2FycmF5Jyk7XG5cdFx0XHRcdHZhciBFbWl0dGVyID0gX2RlcmVxXygnY29tcG9uZW50LWVtaXR0ZXInKTtcblx0XHRcdFx0dmFyIGJpbmFyeSA9IF9kZXJlcV8oJy4vYmluYXJ5Jyk7XG5cdFx0XHRcdHZhciBpc0J1ZiA9IF9kZXJlcV8oJy4vaXMtYnVmZmVyJyk7XG5cblx0XHRcdFx0LyoqXG4gICAgICogUHJvdG9jb2wgdmVyc2lvbi5cbiAgICAgKlxuICAgICAqIEBhcGkgcHVibGljXG4gICAgICovXG5cblx0XHRcdFx0ZXhwb3J0cy5wcm90b2NvbCA9IDQ7XG5cblx0XHRcdFx0LyoqXG4gICAgICogUGFja2V0IHR5cGVzLlxuICAgICAqXG4gICAgICogQGFwaSBwdWJsaWNcbiAgICAgKi9cblxuXHRcdFx0XHRleHBvcnRzLnR5cGVzID0gWydDT05ORUNUJywgJ0RJU0NPTk5FQ1QnLCAnRVZFTlQnLCAnQklOQVJZX0VWRU5UJywgJ0FDSycsICdCSU5BUllfQUNLJywgJ0VSUk9SJ107XG5cblx0XHRcdFx0LyoqXG4gICAgICogUGFja2V0IHR5cGUgYGNvbm5lY3RgLlxuICAgICAqXG4gICAgICogQGFwaSBwdWJsaWNcbiAgICAgKi9cblxuXHRcdFx0XHRleHBvcnRzLkNPTk5FQ1QgPSAwO1xuXG5cdFx0XHRcdC8qKlxuICAgICAqIFBhY2tldCB0eXBlIGBkaXNjb25uZWN0YC5cbiAgICAgKlxuICAgICAqIEBhcGkgcHVibGljXG4gICAgICovXG5cblx0XHRcdFx0ZXhwb3J0cy5ESVNDT05ORUNUID0gMTtcblxuXHRcdFx0XHQvKipcbiAgICAgKiBQYWNrZXQgdHlwZSBgZXZlbnRgLlxuICAgICAqXG4gICAgICogQGFwaSBwdWJsaWNcbiAgICAgKi9cblxuXHRcdFx0XHRleHBvcnRzLkVWRU5UID0gMjtcblxuXHRcdFx0XHQvKipcbiAgICAgKiBQYWNrZXQgdHlwZSBgYWNrYC5cbiAgICAgKlxuICAgICAqIEBhcGkgcHVibGljXG4gICAgICovXG5cblx0XHRcdFx0ZXhwb3J0cy5BQ0sgPSAzO1xuXG5cdFx0XHRcdC8qKlxuICAgICAqIFBhY2tldCB0eXBlIGBlcnJvcmAuXG4gICAgICpcbiAgICAgKiBAYXBpIHB1YmxpY1xuICAgICAqL1xuXG5cdFx0XHRcdGV4cG9ydHMuRVJST1IgPSA0O1xuXG5cdFx0XHRcdC8qKlxuICAgICAqIFBhY2tldCB0eXBlICdiaW5hcnkgZXZlbnQnXG4gICAgICpcbiAgICAgKiBAYXBpIHB1YmxpY1xuICAgICAqL1xuXG5cdFx0XHRcdGV4cG9ydHMuQklOQVJZX0VWRU5UID0gNTtcblxuXHRcdFx0XHQvKipcbiAgICAgKiBQYWNrZXQgdHlwZSBgYmluYXJ5IGFja2AuIEZvciBhY2tzIHdpdGggYmluYXJ5IGFyZ3VtZW50cy5cbiAgICAgKlxuICAgICAqIEBhcGkgcHVibGljXG4gICAgICovXG5cblx0XHRcdFx0ZXhwb3J0cy5CSU5BUllfQUNLID0gNjtcblxuXHRcdFx0XHQvKipcbiAgICAgKiBFbmNvZGVyIGNvbnN0cnVjdG9yLlxuICAgICAqXG4gICAgICogQGFwaSBwdWJsaWNcbiAgICAgKi9cblxuXHRcdFx0XHRleHBvcnRzLkVuY29kZXIgPSBFbmNvZGVyO1xuXG5cdFx0XHRcdC8qKlxuICAgICAqIERlY29kZXIgY29uc3RydWN0b3IuXG4gICAgICpcbiAgICAgKiBAYXBpIHB1YmxpY1xuICAgICAqL1xuXG5cdFx0XHRcdGV4cG9ydHMuRGVjb2RlciA9IERlY29kZXI7XG5cblx0XHRcdFx0LyoqXG4gICAgICogQSBzb2NrZXQuaW8gRW5jb2RlciBpbnN0YW5jZVxuICAgICAqXG4gICAgICogQGFwaSBwdWJsaWNcbiAgICAgKi9cblxuXHRcdFx0XHRmdW5jdGlvbiBFbmNvZGVyKCkge31cblxuXHRcdFx0XHQvKipcbiAgICAgKiBFbmNvZGUgYSBwYWNrZXQgYXMgYSBzaW5nbGUgc3RyaW5nIGlmIG5vbi1iaW5hcnksIG9yIGFzIGFcbiAgICAgKiBidWZmZXIgc2VxdWVuY2UsIGRlcGVuZGluZyBvbiBwYWNrZXQgdHlwZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmogLSBwYWNrZXQgb2JqZWN0XG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgLSBmdW5jdGlvbiB0byBoYW5kbGUgZW5jb2RpbmdzIChsaWtlbHkgZW5naW5lLndyaXRlKVxuICAgICAqIEByZXR1cm4gQ2FsbHMgY2FsbGJhY2sgd2l0aCBBcnJheSBvZiBlbmNvZGluZ3NcbiAgICAgKiBAYXBpIHB1YmxpY1xuICAgICAqL1xuXG5cdFx0XHRcdEVuY29kZXIucHJvdG90eXBlLmVuY29kZSA9IGZ1bmN0aW9uIChvYmosIGNhbGxiYWNrKSB7XG5cdFx0XHRcdFx0ZGVidWcoJ2VuY29kaW5nIHBhY2tldCAlaicsIG9iaik7XG5cblx0XHRcdFx0XHRpZiAoZXhwb3J0cy5CSU5BUllfRVZFTlQgPT0gb2JqLnR5cGUgfHwgZXhwb3J0cy5CSU5BUllfQUNLID09IG9iai50eXBlKSB7XG5cdFx0XHRcdFx0XHRlbmNvZGVBc0JpbmFyeShvYmosIGNhbGxiYWNrKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0dmFyIGVuY29kaW5nID0gZW5jb2RlQXNTdHJpbmcob2JqKTtcblx0XHRcdFx0XHRcdGNhbGxiYWNrKFtlbmNvZGluZ10pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fTtcblxuXHRcdFx0XHQvKipcbiAgICAgKiBFbmNvZGUgcGFja2V0IGFzIHN0cmluZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwYWNrZXRcbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9IGVuY29kZWRcbiAgICAgKiBAYXBpIHByaXZhdGVcbiAgICAgKi9cblxuXHRcdFx0XHRmdW5jdGlvbiBlbmNvZGVBc1N0cmluZyhvYmopIHtcblx0XHRcdFx0XHR2YXIgc3RyID0gJyc7XG5cdFx0XHRcdFx0dmFyIG5zcCA9IGZhbHNlO1xuXG5cdFx0XHRcdFx0Ly8gZmlyc3QgaXMgdHlwZVxuXHRcdFx0XHRcdHN0ciArPSBvYmoudHlwZTtcblxuXHRcdFx0XHRcdC8vIGF0dGFjaG1lbnRzIGlmIHdlIGhhdmUgdGhlbVxuXHRcdFx0XHRcdGlmIChleHBvcnRzLkJJTkFSWV9FVkVOVCA9PSBvYmoudHlwZSB8fCBleHBvcnRzLkJJTkFSWV9BQ0sgPT0gb2JqLnR5cGUpIHtcblx0XHRcdFx0XHRcdHN0ciArPSBvYmouYXR0YWNobWVudHM7XG5cdFx0XHRcdFx0XHRzdHIgKz0gJy0nO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIGlmIHdlIGhhdmUgYSBuYW1lc3BhY2Ugb3RoZXIgdGhhbiBgL2Bcblx0XHRcdFx0XHQvLyB3ZSBhcHBlbmQgaXQgZm9sbG93ZWQgYnkgYSBjb21tYSBgLGBcblx0XHRcdFx0XHRpZiAob2JqLm5zcCAmJiAnLycgIT0gb2JqLm5zcCkge1xuXHRcdFx0XHRcdFx0bnNwID0gdHJ1ZTtcblx0XHRcdFx0XHRcdHN0ciArPSBvYmoubnNwO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIGltbWVkaWF0ZWx5IGZvbGxvd2VkIGJ5IHRoZSBpZFxuXHRcdFx0XHRcdGlmIChudWxsICE9IG9iai5pZCkge1xuXHRcdFx0XHRcdFx0aWYgKG5zcCkge1xuXHRcdFx0XHRcdFx0XHRzdHIgKz0gJywnO1xuXHRcdFx0XHRcdFx0XHRuc3AgPSBmYWxzZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdHN0ciArPSBvYmouaWQ7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8ganNvbiBkYXRhXG5cdFx0XHRcdFx0aWYgKG51bGwgIT0gb2JqLmRhdGEpIHtcblx0XHRcdFx0XHRcdGlmIChuc3ApIHN0ciArPSAnLCc7XG5cdFx0XHRcdFx0XHRzdHIgKz0ganNvbi5zdHJpbmdpZnkob2JqLmRhdGEpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGRlYnVnKCdlbmNvZGVkICVqIGFzICVzJywgb2JqLCBzdHIpO1xuXHRcdFx0XHRcdHJldHVybiBzdHI7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvKipcbiAgICAgKiBFbmNvZGUgcGFja2V0IGFzICdidWZmZXIgc2VxdWVuY2UnIGJ5IHJlbW92aW5nIGJsb2JzLCBhbmRcbiAgICAgKiBkZWNvbnN0cnVjdGluZyBwYWNrZXQgaW50byBvYmplY3Qgd2l0aCBwbGFjZWhvbGRlcnMgYW5kXG4gICAgICogYSBsaXN0IG9mIGJ1ZmZlcnMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcGFja2V0XG4gICAgICogQHJldHVybiB7QnVmZmVyfSBlbmNvZGVkXG4gICAgICogQGFwaSBwcml2YXRlXG4gICAgICovXG5cblx0XHRcdFx0ZnVuY3Rpb24gZW5jb2RlQXNCaW5hcnkob2JqLCBjYWxsYmFjaykge1xuXG5cdFx0XHRcdFx0ZnVuY3Rpb24gd3JpdGVFbmNvZGluZyhibG9ibGVzc0RhdGEpIHtcblx0XHRcdFx0XHRcdHZhciBkZWNvbnN0cnVjdGlvbiA9IGJpbmFyeS5kZWNvbnN0cnVjdFBhY2tldChibG9ibGVzc0RhdGEpO1xuXHRcdFx0XHRcdFx0dmFyIHBhY2sgPSBlbmNvZGVBc1N0cmluZyhkZWNvbnN0cnVjdGlvbi5wYWNrZXQpO1xuXHRcdFx0XHRcdFx0dmFyIGJ1ZmZlcnMgPSBkZWNvbnN0cnVjdGlvbi5idWZmZXJzO1xuXG5cdFx0XHRcdFx0XHRidWZmZXJzLnVuc2hpZnQocGFjayk7IC8vIGFkZCBwYWNrZXQgaW5mbyB0byBiZWdpbm5pbmcgb2YgZGF0YSBsaXN0XG5cdFx0XHRcdFx0XHRjYWxsYmFjayhidWZmZXJzKTsgLy8gd3JpdGUgYWxsIHRoZSBidWZmZXJzXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0YmluYXJ5LnJlbW92ZUJsb2JzKG9iaiwgd3JpdGVFbmNvZGluZyk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvKipcbiAgICAgKiBBIHNvY2tldC5pbyBEZWNvZGVyIGluc3RhbmNlXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IGRlY29kZXJcbiAgICAgKiBAYXBpIHB1YmxpY1xuICAgICAqL1xuXG5cdFx0XHRcdGZ1bmN0aW9uIERlY29kZXIoKSB7XG5cdFx0XHRcdFx0dGhpcy5yZWNvbnN0cnVjdG9yID0gbnVsbDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8qKlxuICAgICAqIE1peCBpbiBgRW1pdHRlcmAgd2l0aCBEZWNvZGVyLlxuICAgICAqL1xuXG5cdFx0XHRcdEVtaXR0ZXIoRGVjb2Rlci5wcm90b3R5cGUpO1xuXG5cdFx0XHRcdC8qKlxuICAgICAqIERlY29kZXMgYW4gZWNvZGVkIHBhY2tldCBzdHJpbmcgaW50byBwYWNrZXQgSlNPTi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBvYmogLSBlbmNvZGVkIHBhY2tldFxuICAgICAqIEByZXR1cm4ge09iamVjdH0gcGFja2V0XG4gICAgICogQGFwaSBwdWJsaWNcbiAgICAgKi9cblxuXHRcdFx0XHREZWNvZGVyLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAob2JqKSB7XG5cdFx0XHRcdFx0dmFyIHBhY2tldDtcblx0XHRcdFx0XHRpZiAoJ3N0cmluZycgPT0gdHlwZW9mIG9iaikge1xuXHRcdFx0XHRcdFx0cGFja2V0ID0gZGVjb2RlU3RyaW5nKG9iaik7XG5cdFx0XHRcdFx0XHRpZiAoZXhwb3J0cy5CSU5BUllfRVZFTlQgPT0gcGFja2V0LnR5cGUgfHwgZXhwb3J0cy5CSU5BUllfQUNLID09IHBhY2tldC50eXBlKSB7XG5cdFx0XHRcdFx0XHRcdC8vIGJpbmFyeSBwYWNrZXQncyBqc29uXG5cdFx0XHRcdFx0XHRcdHRoaXMucmVjb25zdHJ1Y3RvciA9IG5ldyBCaW5hcnlSZWNvbnN0cnVjdG9yKHBhY2tldCk7XG5cblx0XHRcdFx0XHRcdFx0Ly8gbm8gYXR0YWNobWVudHMsIGxhYmVsZWQgYmluYXJ5IGJ1dCBubyBiaW5hcnkgZGF0YSB0byBmb2xsb3dcblx0XHRcdFx0XHRcdFx0aWYgKHRoaXMucmVjb25zdHJ1Y3Rvci5yZWNvblBhY2suYXR0YWNobWVudHMgPT09IDApIHtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLmVtaXQoJ2RlY29kZWQnLCBwYWNrZXQpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHQvLyBub24tYmluYXJ5IGZ1bGwgcGFja2V0XG5cdFx0XHRcdFx0XHRcdHRoaXMuZW1pdCgnZGVjb2RlZCcsIHBhY2tldCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSBlbHNlIGlmIChpc0J1ZihvYmopIHx8IG9iai5iYXNlNjQpIHtcblx0XHRcdFx0XHRcdC8vIHJhdyBiaW5hcnkgZGF0YVxuXHRcdFx0XHRcdFx0aWYgKCF0aGlzLnJlY29uc3RydWN0b3IpIHtcblx0XHRcdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKCdnb3QgYmluYXJ5IGRhdGEgd2hlbiBub3QgcmVjb25zdHJ1Y3RpbmcgYSBwYWNrZXQnKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdHBhY2tldCA9IHRoaXMucmVjb25zdHJ1Y3Rvci50YWtlQmluYXJ5RGF0YShvYmopO1xuXHRcdFx0XHRcdFx0XHRpZiAocGFja2V0KSB7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gcmVjZWl2ZWQgZmluYWwgYnVmZmVyXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5yZWNvbnN0cnVjdG9yID0gbnVsbDtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLmVtaXQoJ2RlY29kZWQnLCBwYWNrZXQpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcignVW5rbm93biB0eXBlOiAnICsgb2JqKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH07XG5cblx0XHRcdFx0LyoqXG4gICAgICogRGVjb2RlIGEgcGFja2V0IFN0cmluZyAoSlNPTiBkYXRhKVxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICAgICAqIEByZXR1cm4ge09iamVjdH0gcGFja2V0XG4gICAgICogQGFwaSBwcml2YXRlXG4gICAgICovXG5cblx0XHRcdFx0ZnVuY3Rpb24gZGVjb2RlU3RyaW5nKHN0cikge1xuXHRcdFx0XHRcdHZhciBwID0ge307XG5cdFx0XHRcdFx0dmFyIGkgPSAwO1xuXG5cdFx0XHRcdFx0Ly8gbG9vayB1cCB0eXBlXG5cdFx0XHRcdFx0cC50eXBlID0gTnVtYmVyKHN0ci5jaGFyQXQoMCkpO1xuXHRcdFx0XHRcdGlmIChudWxsID09IGV4cG9ydHMudHlwZXNbcC50eXBlXSkgcmV0dXJuIGVycm9yKCk7XG5cblx0XHRcdFx0XHQvLyBsb29rIHVwIGF0dGFjaG1lbnRzIGlmIHR5cGUgYmluYXJ5XG5cdFx0XHRcdFx0aWYgKGV4cG9ydHMuQklOQVJZX0VWRU5UID09IHAudHlwZSB8fCBleHBvcnRzLkJJTkFSWV9BQ0sgPT0gcC50eXBlKSB7XG5cdFx0XHRcdFx0XHR2YXIgYnVmID0gJyc7XG5cdFx0XHRcdFx0XHR3aGlsZSAoc3RyLmNoYXJBdCgrK2kpICE9ICctJykge1xuXHRcdFx0XHRcdFx0XHRidWYgKz0gc3RyLmNoYXJBdChpKTtcblx0XHRcdFx0XHRcdFx0aWYgKGkgPT0gc3RyLmxlbmd0aCkgYnJlYWs7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpZiAoYnVmICE9IE51bWJlcihidWYpIHx8IHN0ci5jaGFyQXQoaSkgIT0gJy0nKSB7XG5cdFx0XHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcignSWxsZWdhbCBhdHRhY2htZW50cycpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0cC5hdHRhY2htZW50cyA9IE51bWJlcihidWYpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIGxvb2sgdXAgbmFtZXNwYWNlIChpZiBhbnkpXG5cdFx0XHRcdFx0aWYgKCcvJyA9PSBzdHIuY2hhckF0KGkgKyAxKSkge1xuXHRcdFx0XHRcdFx0cC5uc3AgPSAnJztcblx0XHRcdFx0XHRcdHdoaWxlICgrK2kpIHtcblx0XHRcdFx0XHRcdFx0dmFyIGMgPSBzdHIuY2hhckF0KGkpO1xuXHRcdFx0XHRcdFx0XHRpZiAoJywnID09IGMpIGJyZWFrO1xuXHRcdFx0XHRcdFx0XHRwLm5zcCArPSBjO1xuXHRcdFx0XHRcdFx0XHRpZiAoaSA9PSBzdHIubGVuZ3RoKSBicmVhaztcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0cC5uc3AgPSAnLyc7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gbG9vayB1cCBpZFxuXHRcdFx0XHRcdHZhciBuZXh0ID0gc3RyLmNoYXJBdChpICsgMSk7XG5cdFx0XHRcdFx0aWYgKCcnICE9PSBuZXh0ICYmIE51bWJlcihuZXh0KSA9PSBuZXh0KSB7XG5cdFx0XHRcdFx0XHRwLmlkID0gJyc7XG5cdFx0XHRcdFx0XHR3aGlsZSAoKytpKSB7XG5cdFx0XHRcdFx0XHRcdHZhciBjID0gc3RyLmNoYXJBdChpKTtcblx0XHRcdFx0XHRcdFx0aWYgKG51bGwgPT0gYyB8fCBOdW1iZXIoYykgIT0gYykge1xuXHRcdFx0XHRcdFx0XHRcdC0taTtcblx0XHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRwLmlkICs9IHN0ci5jaGFyQXQoaSk7XG5cdFx0XHRcdFx0XHRcdGlmIChpID09IHN0ci5sZW5ndGgpIGJyZWFrO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0cC5pZCA9IE51bWJlcihwLmlkKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBsb29rIHVwIGpzb24gZGF0YVxuXHRcdFx0XHRcdGlmIChzdHIuY2hhckF0KCsraSkpIHtcblx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdHAuZGF0YSA9IGpzb24ucGFyc2Uoc3RyLnN1YnN0cihpKSk7XG5cdFx0XHRcdFx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBlcnJvcigpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGRlYnVnKCdkZWNvZGVkICVzIGFzICVqJywgc3RyLCBwKTtcblx0XHRcdFx0XHRyZXR1cm4gcDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8qKlxuICAgICAqIERlYWxsb2NhdGVzIGEgcGFyc2VyJ3MgcmVzb3VyY2VzXG4gICAgICpcbiAgICAgKiBAYXBpIHB1YmxpY1xuICAgICAqL1xuXG5cdFx0XHRcdERlY29kZXIucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0aWYgKHRoaXMucmVjb25zdHJ1Y3Rvcikge1xuXHRcdFx0XHRcdFx0dGhpcy5yZWNvbnN0cnVjdG9yLmZpbmlzaGVkUmVjb25zdHJ1Y3Rpb24oKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH07XG5cblx0XHRcdFx0LyoqXG4gICAgICogQSBtYW5hZ2VyIG9mIGEgYmluYXJ5IGV2ZW50J3MgJ2J1ZmZlciBzZXF1ZW5jZScuIFNob3VsZFxuICAgICAqIGJlIGNvbnN0cnVjdGVkIHdoZW5ldmVyIGEgcGFja2V0IG9mIHR5cGUgQklOQVJZX0VWRU5UIGlzXG4gICAgICogZGVjb2RlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwYWNrZXRcbiAgICAgKiBAcmV0dXJuIHtCaW5hcnlSZWNvbnN0cnVjdG9yfSBpbml0aWFsaXplZCByZWNvbnN0cnVjdG9yXG4gICAgICogQGFwaSBwcml2YXRlXG4gICAgICovXG5cblx0XHRcdFx0ZnVuY3Rpb24gQmluYXJ5UmVjb25zdHJ1Y3RvcihwYWNrZXQpIHtcblx0XHRcdFx0XHR0aGlzLnJlY29uUGFjayA9IHBhY2tldDtcblx0XHRcdFx0XHR0aGlzLmJ1ZmZlcnMgPSBbXTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8qKlxuICAgICAqIE1ldGhvZCB0byBiZSBjYWxsZWQgd2hlbiBiaW5hcnkgZGF0YSByZWNlaXZlZCBmcm9tIGNvbm5lY3Rpb25cbiAgICAgKiBhZnRlciBhIEJJTkFSWV9FVkVOVCBwYWNrZXQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0J1ZmZlciB8IEFycmF5QnVmZmVyfSBiaW5EYXRhIC0gdGhlIHJhdyBiaW5hcnkgZGF0YSByZWNlaXZlZFxuICAgICAqIEByZXR1cm4ge251bGwgfCBPYmplY3R9IHJldHVybnMgbnVsbCBpZiBtb3JlIGJpbmFyeSBkYXRhIGlzIGV4cGVjdGVkIG9yXG4gICAgICogICBhIHJlY29uc3RydWN0ZWQgcGFja2V0IG9iamVjdCBpZiBhbGwgYnVmZmVycyBoYXZlIGJlZW4gcmVjZWl2ZWQuXG4gICAgICogQGFwaSBwcml2YXRlXG4gICAgICovXG5cblx0XHRcdFx0QmluYXJ5UmVjb25zdHJ1Y3Rvci5wcm90b3R5cGUudGFrZUJpbmFyeURhdGEgPSBmdW5jdGlvbiAoYmluRGF0YSkge1xuXHRcdFx0XHRcdHRoaXMuYnVmZmVycy5wdXNoKGJpbkRhdGEpO1xuXHRcdFx0XHRcdGlmICh0aGlzLmJ1ZmZlcnMubGVuZ3RoID09IHRoaXMucmVjb25QYWNrLmF0dGFjaG1lbnRzKSB7XG5cdFx0XHRcdFx0XHQvLyBkb25lIHdpdGggYnVmZmVyIGxpc3Rcblx0XHRcdFx0XHRcdHZhciBwYWNrZXQgPSBiaW5hcnkucmVjb25zdHJ1Y3RQYWNrZXQodGhpcy5yZWNvblBhY2ssIHRoaXMuYnVmZmVycyk7XG5cdFx0XHRcdFx0XHR0aGlzLmZpbmlzaGVkUmVjb25zdHJ1Y3Rpb24oKTtcblx0XHRcdFx0XHRcdHJldHVybiBwYWNrZXQ7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiBudWxsO1xuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdC8qKlxuICAgICAqIENsZWFucyB1cCBiaW5hcnkgcGFja2V0IHJlY29uc3RydWN0aW9uIHZhcmlhYmxlcy5cbiAgICAgKlxuICAgICAqIEBhcGkgcHJpdmF0ZVxuICAgICAqL1xuXG5cdFx0XHRcdEJpbmFyeVJlY29uc3RydWN0b3IucHJvdG90eXBlLmZpbmlzaGVkUmVjb25zdHJ1Y3Rpb24gPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0dGhpcy5yZWNvblBhY2sgPSBudWxsO1xuXHRcdFx0XHRcdHRoaXMuYnVmZmVycyA9IFtdO1xuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdGZ1bmN0aW9uIGVycm9yKGRhdGEpIHtcblx0XHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdFx0dHlwZTogZXhwb3J0cy5FUlJPUixcblx0XHRcdFx0XHRcdGRhdGE6ICdwYXJzZXIgZXJyb3InXG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0fVxuXHRcdFx0fSwge1xuXHRcdFx0XHRcIi4vYmluYXJ5XCI6IDQ2LFxuXHRcdFx0XHRcIi4vaXMtYnVmZmVyXCI6IDQ4LFxuXHRcdFx0XHRcImNvbXBvbmVudC1lbWl0dGVyXCI6IDQ5LFxuXHRcdFx0XHRcImRlYnVnXCI6IDM5LFxuXHRcdFx0XHRcImlzYXJyYXlcIjogNDMsXG5cdFx0XHRcdFwianNvbjNcIjogNTBcblx0XHRcdH1dLFxuXHRcdFx0NDg6IFtmdW5jdGlvbiAoX2RlcmVxXywgbW9kdWxlLCBleHBvcnRzKSB7XG5cdFx0XHRcdChmdW5jdGlvbiAoZ2xvYmFsKSB7XG5cblx0XHRcdFx0XHRtb2R1bGUuZXhwb3J0cyA9IGlzQnVmO1xuXG5cdFx0XHRcdFx0LyoqXG4gICAgICAqIFJldHVybnMgdHJ1ZSBpZiBvYmogaXMgYSBidWZmZXIgb3IgYW4gYXJyYXlidWZmZXIuXG4gICAgICAqXG4gICAgICAqIEBhcGkgcHJpdmF0ZVxuICAgICAgKi9cblxuXHRcdFx0XHRcdGZ1bmN0aW9uIGlzQnVmKG9iaikge1xuXHRcdFx0XHRcdFx0cmV0dXJuIGdsb2JhbC5CdWZmZXIgJiYgZ2xvYmFsLkJ1ZmZlci5pc0J1ZmZlcihvYmopIHx8IGdsb2JhbC5BcnJheUJ1ZmZlciAmJiBvYmogaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pLmNhbGwodGhpcywgdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgPyBnbG9iYWwgOiB7fSk7XG5cdFx0XHR9LCB7fV0sXG5cdFx0XHQ0OTogW2Z1bmN0aW9uIChfZGVyZXFfLCBtb2R1bGUsIGV4cG9ydHMpIHtcblx0XHRcdFx0YXJndW1lbnRzWzRdWzE1XVswXS5hcHBseShleHBvcnRzLCBhcmd1bWVudHMpO1xuXHRcdFx0fSwge1xuXHRcdFx0XHRcImR1cFwiOiAxNVxuXHRcdFx0fV0sXG5cdFx0XHQ1MDogW2Z1bmN0aW9uIChfZGVyZXFfLCBtb2R1bGUsIGV4cG9ydHMpIHtcblx0XHRcdFx0KGZ1bmN0aW9uIChnbG9iYWwpIHtcblx0XHRcdFx0XHQvKiEgSlNPTiB2My4zLjIgfCBodHRwOi8vYmVzdGllanMuZ2l0aHViLmlvL2pzb24zIHwgQ29weXJpZ2h0IDIwMTItMjAxNCwgS2l0IENhbWJyaWRnZSB8IGh0dHA6Ly9raXQubWl0LWxpY2Vuc2Uub3JnICovXG5cdFx0XHRcdFx0O1xuXHRcdFx0XHRcdChmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHQvLyBEZXRlY3QgdGhlIGBkZWZpbmVgIGZ1bmN0aW9uIGV4cG9zZWQgYnkgYXN5bmNocm9ub3VzIG1vZHVsZSBsb2FkZXJzLiBUaGVcblx0XHRcdFx0XHRcdC8vIHN0cmljdCBgZGVmaW5lYCBjaGVjayBpcyBuZWNlc3NhcnkgZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBgci5qc2AuXG5cdFx0XHRcdFx0XHR2YXIgaXNMb2FkZXIgPSB0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZDtcblxuXHRcdFx0XHRcdFx0Ly8gQSBzZXQgb2YgdHlwZXMgdXNlZCB0byBkaXN0aW5ndWlzaCBvYmplY3RzIGZyb20gcHJpbWl0aXZlcy5cblx0XHRcdFx0XHRcdHZhciBvYmplY3RUeXBlcyA9IHtcblx0XHRcdFx0XHRcdFx0XCJmdW5jdGlvblwiOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRcIm9iamVjdFwiOiB0cnVlXG5cdFx0XHRcdFx0XHR9O1xuXG5cdFx0XHRcdFx0XHQvLyBEZXRlY3QgdGhlIGBleHBvcnRzYCBvYmplY3QgZXhwb3NlZCBieSBDb21tb25KUyBpbXBsZW1lbnRhdGlvbnMuXG5cdFx0XHRcdFx0XHR2YXIgZnJlZUV4cG9ydHMgPSBvYmplY3RUeXBlc1t0eXBlb2YgZXhwb3J0cyA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBfdHlwZW9mKGV4cG9ydHMpXSAmJiBleHBvcnRzICYmICFleHBvcnRzLm5vZGVUeXBlICYmIGV4cG9ydHM7XG5cblx0XHRcdFx0XHRcdC8vIFVzZSB0aGUgYGdsb2JhbGAgb2JqZWN0IGV4cG9zZWQgYnkgTm9kZSAoaW5jbHVkaW5nIEJyb3dzZXJpZnkgdmlhXG5cdFx0XHRcdFx0XHQvLyBgaW5zZXJ0LW1vZHVsZS1nbG9iYWxzYCksIE5hcndoYWwsIGFuZCBSaW5nbyBhcyB0aGUgZGVmYXVsdCBjb250ZXh0LFxuXHRcdFx0XHRcdFx0Ly8gYW5kIHRoZSBgd2luZG93YCBvYmplY3QgaW4gYnJvd3NlcnMuIFJoaW5vIGV4cG9ydHMgYSBgZ2xvYmFsYCBmdW5jdGlvblxuXHRcdFx0XHRcdFx0Ly8gaW5zdGVhZC5cblx0XHRcdFx0XHRcdHZhciByb290ID0gb2JqZWN0VHlwZXNbdHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBfdHlwZW9mKHdpbmRvdyldICYmIHdpbmRvdyB8fCB0aGlzLFxuXHRcdFx0XHRcdFx0ICAgIGZyZWVHbG9iYWwgPSBmcmVlRXhwb3J0cyAmJiBvYmplY3RUeXBlc1t0eXBlb2YgbW9kdWxlID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YobW9kdWxlKV0gJiYgbW9kdWxlICYmICFtb2R1bGUubm9kZVR5cGUgJiYgKHR5cGVvZiBnbG9iYWwgPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZihnbG9iYWwpKSA9PSBcIm9iamVjdFwiICYmIGdsb2JhbDtcblxuXHRcdFx0XHRcdFx0aWYgKGZyZWVHbG9iYWwgJiYgKGZyZWVHbG9iYWxbXCJnbG9iYWxcIl0gPT09IGZyZWVHbG9iYWwgfHwgZnJlZUdsb2JhbFtcIndpbmRvd1wiXSA9PT0gZnJlZUdsb2JhbCB8fCBmcmVlR2xvYmFsW1wic2VsZlwiXSA9PT0gZnJlZUdsb2JhbCkpIHtcblx0XHRcdFx0XHRcdFx0cm9vdCA9IGZyZWVHbG9iYWw7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdC8vIFB1YmxpYzogSW5pdGlhbGl6ZXMgSlNPTiAzIHVzaW5nIHRoZSBnaXZlbiBgY29udGV4dGAgb2JqZWN0LCBhdHRhY2hpbmcgdGhlXG5cdFx0XHRcdFx0XHQvLyBgc3RyaW5naWZ5YCBhbmQgYHBhcnNlYCBmdW5jdGlvbnMgdG8gdGhlIHNwZWNpZmllZCBgZXhwb3J0c2Agb2JqZWN0LlxuXHRcdFx0XHRcdFx0ZnVuY3Rpb24gcnVuSW5Db250ZXh0KGNvbnRleHQsIGV4cG9ydHMpIHtcblx0XHRcdFx0XHRcdFx0Y29udGV4dCB8fCAoY29udGV4dCA9IHJvb3RbXCJPYmplY3RcIl0oKSk7XG5cdFx0XHRcdFx0XHRcdGV4cG9ydHMgfHwgKGV4cG9ydHMgPSByb290W1wiT2JqZWN0XCJdKCkpO1xuXG5cdFx0XHRcdFx0XHRcdC8vIE5hdGl2ZSBjb25zdHJ1Y3RvciBhbGlhc2VzLlxuXHRcdFx0XHRcdFx0XHR2YXIgTnVtYmVyID0gY29udGV4dFtcIk51bWJlclwiXSB8fCByb290W1wiTnVtYmVyXCJdLFxuXHRcdFx0XHRcdFx0XHQgICAgU3RyaW5nID0gY29udGV4dFtcIlN0cmluZ1wiXSB8fCByb290W1wiU3RyaW5nXCJdLFxuXHRcdFx0XHRcdFx0XHQgICAgT2JqZWN0ID0gY29udGV4dFtcIk9iamVjdFwiXSB8fCByb290W1wiT2JqZWN0XCJdLFxuXHRcdFx0XHRcdFx0XHQgICAgRGF0ZSA9IGNvbnRleHRbXCJEYXRlXCJdIHx8IHJvb3RbXCJEYXRlXCJdLFxuXHRcdFx0XHRcdFx0XHQgICAgU3ludGF4RXJyb3IgPSBjb250ZXh0W1wiU3ludGF4RXJyb3JcIl0gfHwgcm9vdFtcIlN5bnRheEVycm9yXCJdLFxuXHRcdFx0XHRcdFx0XHQgICAgVHlwZUVycm9yID0gY29udGV4dFtcIlR5cGVFcnJvclwiXSB8fCByb290W1wiVHlwZUVycm9yXCJdLFxuXHRcdFx0XHRcdFx0XHQgICAgTWF0aCA9IGNvbnRleHRbXCJNYXRoXCJdIHx8IHJvb3RbXCJNYXRoXCJdLFxuXHRcdFx0XHRcdFx0XHQgICAgbmF0aXZlSlNPTiA9IGNvbnRleHRbXCJKU09OXCJdIHx8IHJvb3RbXCJKU09OXCJdO1xuXG5cdFx0XHRcdFx0XHRcdC8vIERlbGVnYXRlIHRvIHRoZSBuYXRpdmUgYHN0cmluZ2lmeWAgYW5kIGBwYXJzZWAgaW1wbGVtZW50YXRpb25zLlxuXHRcdFx0XHRcdFx0XHRpZiAoKHR5cGVvZiBuYXRpdmVKU09OID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YobmF0aXZlSlNPTikpID09IFwib2JqZWN0XCIgJiYgbmF0aXZlSlNPTikge1xuXHRcdFx0XHRcdFx0XHRcdGV4cG9ydHMuc3RyaW5naWZ5ID0gbmF0aXZlSlNPTi5zdHJpbmdpZnk7XG5cdFx0XHRcdFx0XHRcdFx0ZXhwb3J0cy5wYXJzZSA9IG5hdGl2ZUpTT04ucGFyc2U7XG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHQvLyBDb252ZW5pZW5jZSBhbGlhc2VzLlxuXHRcdFx0XHRcdFx0XHR2YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlLFxuXHRcdFx0XHRcdFx0XHQgICAgZ2V0Q2xhc3MgPSBvYmplY3RQcm90by50b1N0cmluZyxcblx0XHRcdFx0XHRcdFx0ICAgIF9pc1Byb3BlcnR5LFxuXHRcdFx0XHRcdFx0XHQgICAgX2ZvckVhY2gsXG5cdFx0XHRcdFx0XHRcdCAgICB1bmRlZjtcblxuXHRcdFx0XHRcdFx0XHQvLyBUZXN0IHRoZSBgRGF0ZSNnZXRVVEMqYCBtZXRob2RzLiBCYXNlZCBvbiB3b3JrIGJ5IEBZYWZmbGUuXG5cdFx0XHRcdFx0XHRcdHZhciBpc0V4dGVuZGVkID0gbmV3IERhdGUoLTM1MDk4MjczMzQ1NzMyOTIpO1xuXHRcdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHRcdC8vIFRoZSBgZ2V0VVRDRnVsbFllYXJgLCBgTW9udGhgLCBhbmQgYERhdGVgIG1ldGhvZHMgcmV0dXJuIG5vbnNlbnNpY2FsXG5cdFx0XHRcdFx0XHRcdFx0Ly8gcmVzdWx0cyBmb3IgY2VydGFpbiBkYXRlcyBpbiBPcGVyYSA+PSAxMC41My5cblx0XHRcdFx0XHRcdFx0XHRpc0V4dGVuZGVkID0gaXNFeHRlbmRlZC5nZXRVVENGdWxsWWVhcigpID09IC0xMDkyNTIgJiYgaXNFeHRlbmRlZC5nZXRVVENNb250aCgpID09PSAwICYmIGlzRXh0ZW5kZWQuZ2V0VVRDRGF0ZSgpID09PSAxICYmXG5cdFx0XHRcdFx0XHRcdFx0Ly8gU2FmYXJpIDwgMi4wLjIgc3RvcmVzIHRoZSBpbnRlcm5hbCBtaWxsaXNlY29uZCB0aW1lIHZhbHVlIGNvcnJlY3RseSxcblx0XHRcdFx0XHRcdFx0XHQvLyBidXQgY2xpcHMgdGhlIHZhbHVlcyByZXR1cm5lZCBieSB0aGUgZGF0ZSBtZXRob2RzIHRvIHRoZSByYW5nZSBvZlxuXHRcdFx0XHRcdFx0XHRcdC8vIHNpZ25lZCAzMi1iaXQgaW50ZWdlcnMgKFstMiAqKiAzMSwgMiAqKiAzMSAtIDFdKS5cblx0XHRcdFx0XHRcdFx0XHRpc0V4dGVuZGVkLmdldFVUQ0hvdXJzKCkgPT0gMTAgJiYgaXNFeHRlbmRlZC5nZXRVVENNaW51dGVzKCkgPT0gMzcgJiYgaXNFeHRlbmRlZC5nZXRVVENTZWNvbmRzKCkgPT0gNiAmJiBpc0V4dGVuZGVkLmdldFVUQ01pbGxpc2Vjb25kcygpID09IDcwODtcblx0XHRcdFx0XHRcdFx0fSBjYXRjaCAoZXhjZXB0aW9uKSB7fVxuXG5cdFx0XHRcdFx0XHRcdC8vIEludGVybmFsOiBEZXRlcm1pbmVzIHdoZXRoZXIgdGhlIG5hdGl2ZSBgSlNPTi5zdHJpbmdpZnlgIGFuZCBgcGFyc2VgXG5cdFx0XHRcdFx0XHRcdC8vIGltcGxlbWVudGF0aW9ucyBhcmUgc3BlYy1jb21wbGlhbnQuIEJhc2VkIG9uIHdvcmsgYnkgS2VuIFNueWRlci5cblx0XHRcdFx0XHRcdFx0ZnVuY3Rpb24gaGFzKG5hbWUpIHtcblx0XHRcdFx0XHRcdFx0XHRpZiAoaGFzW25hbWVdICE9PSB1bmRlZikge1xuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gUmV0dXJuIGNhY2hlZCBmZWF0dXJlIHRlc3QgcmVzdWx0LlxuXHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIGhhc1tuYW1lXTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0dmFyIGlzU3VwcG9ydGVkO1xuXHRcdFx0XHRcdFx0XHRcdGlmIChuYW1lID09IFwiYnVnLXN0cmluZy1jaGFyLWluZGV4XCIpIHtcblx0XHRcdFx0XHRcdFx0XHRcdC8vIElFIDw9IDcgZG9lc24ndCBzdXBwb3J0IGFjY2Vzc2luZyBzdHJpbmcgY2hhcmFjdGVycyB1c2luZyBzcXVhcmVcblx0XHRcdFx0XHRcdFx0XHRcdC8vIGJyYWNrZXQgbm90YXRpb24uIElFIDggb25seSBzdXBwb3J0cyB0aGlzIGZvciBwcmltaXRpdmVzLlxuXHRcdFx0XHRcdFx0XHRcdFx0aXNTdXBwb3J0ZWQgPSBcImFcIlswXSAhPSBcImFcIjtcblx0XHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKG5hbWUgPT0gXCJqc29uXCIpIHtcblx0XHRcdFx0XHRcdFx0XHRcdC8vIEluZGljYXRlcyB3aGV0aGVyIGJvdGggYEpTT04uc3RyaW5naWZ5YCBhbmQgYEpTT04ucGFyc2VgIGFyZVxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gc3VwcG9ydGVkLlxuXHRcdFx0XHRcdFx0XHRcdFx0aXNTdXBwb3J0ZWQgPSBoYXMoXCJqc29uLXN0cmluZ2lmeVwiKSAmJiBoYXMoXCJqc29uLXBhcnNlXCIpO1xuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHR2YXIgdmFsdWUsXG5cdFx0XHRcdFx0XHRcdFx0XHQgICAgc2VyaWFsaXplZCA9IFwie1xcXCJhXFxcIjpbMSx0cnVlLGZhbHNlLG51bGwsXFxcIlxcXFx1MDAwMFxcXFxiXFxcXG5cXFxcZlxcXFxyXFxcXHRcXFwiXX1cIjtcblx0XHRcdFx0XHRcdFx0XHRcdC8vIFRlc3QgYEpTT04uc3RyaW5naWZ5YC5cblx0XHRcdFx0XHRcdFx0XHRcdGlmIChuYW1lID09IFwianNvbi1zdHJpbmdpZnlcIikge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR2YXIgc3RyaW5naWZ5ID0gZXhwb3J0cy5zdHJpbmdpZnksXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCAgICBzdHJpbmdpZnlTdXBwb3J0ZWQgPSB0eXBlb2Ygc3RyaW5naWZ5ID09IFwiZnVuY3Rpb25cIiAmJiBpc0V4dGVuZGVkO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoc3RyaW5naWZ5U3VwcG9ydGVkKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gQSB0ZXN0IGZ1bmN0aW9uIG9iamVjdCB3aXRoIGEgY3VzdG9tIGB0b0pTT05gIG1ldGhvZC5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQodmFsdWUgPSBmdW5jdGlvbiB2YWx1ZSgpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiAxO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0pLnRvSlNPTiA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzdHJpbmdpZnlTdXBwb3J0ZWQgPVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gRmlyZWZveCAzLjFiMSBhbmQgYjIgc2VyaWFsaXplIHN0cmluZywgbnVtYmVyLCBhbmQgYm9vbGVhblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gcHJpbWl0aXZlcyBhcyBvYmplY3QgbGl0ZXJhbHMuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzdHJpbmdpZnkoMCkgPT09IFwiMFwiICYmXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBGRiAzLjFiMSwgYjIsIGFuZCBKU09OIDIgc2VyaWFsaXplIHdyYXBwZWQgcHJpbWl0aXZlcyBhcyBvYmplY3Rcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIGxpdGVyYWxzLlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0c3RyaW5naWZ5KG5ldyBOdW1iZXIoKSkgPT09IFwiMFwiICYmIHN0cmluZ2lmeShuZXcgU3RyaW5nKCkpID09ICdcIlwiJyAmJlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gRkYgMy4xYjEsIDIgdGhyb3cgYW4gZXJyb3IgaWYgdGhlIHZhbHVlIGlzIGBudWxsYCwgYHVuZGVmaW5lZGAsIG9yXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBkb2VzIG5vdCBkZWZpbmUgYSBjYW5vbmljYWwgSlNPTiByZXByZXNlbnRhdGlvbiAodGhpcyBhcHBsaWVzIHRvXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBvYmplY3RzIHdpdGggYHRvSlNPTmAgcHJvcGVydGllcyBhcyB3ZWxsLCAqdW5sZXNzKiB0aGV5IGFyZSBuZXN0ZWRcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIHdpdGhpbiBhbiBvYmplY3Qgb3IgYXJyYXkpLlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0c3RyaW5naWZ5KGdldENsYXNzKSA9PT0gdW5kZWYgJiZcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIElFIDggc2VyaWFsaXplcyBgdW5kZWZpbmVkYCBhcyBgXCJ1bmRlZmluZWRcImAuIFNhZmFyaSA8PSA1LjEuNyBhbmRcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIEZGIDMuMWIzIHBhc3MgdGhpcyB0ZXN0LlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0c3RyaW5naWZ5KHVuZGVmKSA9PT0gdW5kZWYgJiZcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIFNhZmFyaSA8PSA1LjEuNyBhbmQgRkYgMy4xYjMgdGhyb3cgYEVycm9yYHMgYW5kIGBUeXBlRXJyb3Jgcyxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIHJlc3BlY3RpdmVseSwgaWYgdGhlIHZhbHVlIGlzIG9taXR0ZWQgZW50aXJlbHkuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzdHJpbmdpZnkoKSA9PT0gdW5kZWYgJiZcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIEZGIDMuMWIxLCAyIHRocm93IGFuIGVycm9yIGlmIHRoZSBnaXZlbiB2YWx1ZSBpcyBub3QgYSBudW1iZXIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBzdHJpbmcsIGFycmF5LCBvYmplY3QsIEJvb2xlYW4sIG9yIGBudWxsYCBsaXRlcmFsLiBUaGlzIGFwcGxpZXMgdG9cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIG9iamVjdHMgd2l0aCBjdXN0b20gYHRvSlNPTmAgbWV0aG9kcyBhcyB3ZWxsLCB1bmxlc3MgdGhleSBhcmUgbmVzdGVkXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBpbnNpZGUgb2JqZWN0IG9yIGFycmF5IGxpdGVyYWxzLiBZVUkgMy4wLjBiMSBpZ25vcmVzIGN1c3RvbSBgdG9KU09OYFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gbWV0aG9kcyBlbnRpcmVseS5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHN0cmluZ2lmeSh2YWx1ZSkgPT09IFwiMVwiICYmIHN0cmluZ2lmeShbdmFsdWVdKSA9PSBcIlsxXVwiICYmXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBQcm90b3R5cGUgPD0gMS42LjEgc2VyaWFsaXplcyBgW3VuZGVmaW5lZF1gIGFzIGBcIltdXCJgIGluc3RlYWQgb2Zcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIGBcIltudWxsXVwiYC5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHN0cmluZ2lmeShbdW5kZWZdKSA9PSBcIltudWxsXVwiICYmXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBZVUkgMy4wLjBiMSBmYWlscyB0byBzZXJpYWxpemUgYG51bGxgIGxpdGVyYWxzLlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0c3RyaW5naWZ5KG51bGwpID09IFwibnVsbFwiICYmXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBGRiAzLjFiMSwgMiBoYWx0cyBzZXJpYWxpemF0aW9uIGlmIGFuIGFycmF5IGNvbnRhaW5zIGEgZnVuY3Rpb246XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBgWzEsIHRydWUsIGdldENsYXNzLCAxXWAgc2VyaWFsaXplcyBhcyBcIlsxLHRydWUsXSxcIi4gRkYgMy4xYjNcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIGVsaWRlcyBub24tSlNPTiB2YWx1ZXMgZnJvbSBvYmplY3RzIGFuZCBhcnJheXMsIHVubGVzcyB0aGV5XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBkZWZpbmUgY3VzdG9tIGB0b0pTT05gIG1ldGhvZHMuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzdHJpbmdpZnkoW3VuZGVmLCBnZXRDbGFzcywgbnVsbF0pID09IFwiW251bGwsbnVsbCxudWxsXVwiICYmXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBTaW1wbGUgc2VyaWFsaXphdGlvbiB0ZXN0LiBGRiAzLjFiMSB1c2VzIFVuaWNvZGUgZXNjYXBlIHNlcXVlbmNlc1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gd2hlcmUgY2hhcmFjdGVyIGVzY2FwZSBjb2RlcyBhcmUgZXhwZWN0ZWQgKGUuZy4sIGBcXGJgID0+IGBcXHUwMDA4YCkuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzdHJpbmdpZnkoe1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcImFcIjogW3ZhbHVlLCB0cnVlLCBmYWxzZSwgbnVsbCwgXCJcXHgwMFxcYlxcblxcZlxcclxcdFwiXVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSkgPT0gc2VyaWFsaXplZCAmJlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gRkYgMy4xYjEgYW5kIGIyIGlnbm9yZSB0aGUgYGZpbHRlcmAgYW5kIGB3aWR0aGAgYXJndW1lbnRzLlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0c3RyaW5naWZ5KG51bGwsIHZhbHVlKSA9PT0gXCIxXCIgJiYgc3RyaW5naWZ5KFsxLCAyXSwgbnVsbCwgMSkgPT0gXCJbXFxuIDEsXFxuIDJcXG5dXCIgJiZcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIEpTT04gMiwgUHJvdG90eXBlIDw9IDEuNywgYW5kIG9sZGVyIFdlYktpdCBidWlsZHMgaW5jb3JyZWN0bHlcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIHNlcmlhbGl6ZSBleHRlbmRlZCB5ZWFycy5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHN0cmluZ2lmeShuZXcgRGF0ZSgtOC42NGUxNSkpID09ICdcIi0yNzE4MjEtMDQtMjBUMDA6MDA6MDAuMDAwWlwiJyAmJlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gVGhlIG1pbGxpc2Vjb25kcyBhcmUgb3B0aW9uYWwgaW4gRVMgNSwgYnV0IHJlcXVpcmVkIGluIDUuMS5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHN0cmluZ2lmeShuZXcgRGF0ZSg4LjY0ZTE1KSkgPT0gJ1wiKzI3NTc2MC0wOS0xM1QwMDowMDowMC4wMDBaXCInICYmXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBGaXJlZm94IDw9IDExLjAgaW5jb3JyZWN0bHkgc2VyaWFsaXplcyB5ZWFycyBwcmlvciB0byAwIGFzIG5lZ2F0aXZlXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBmb3VyLWRpZ2l0IHllYXJzIGluc3RlYWQgb2Ygc2l4LWRpZ2l0IHllYXJzLiBDcmVkaXRzOiBAWWFmZmxlLlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0c3RyaW5naWZ5KG5ldyBEYXRlKC02MjE5ODc1NTJlNSkpID09ICdcIi0wMDAwMDEtMDEtMDFUMDA6MDA6MDAuMDAwWlwiJyAmJlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gU2FmYXJpIDw9IDUuMS41IGFuZCBPcGVyYSA+PSAxMC41MyBpbmNvcnJlY3RseSBzZXJpYWxpemUgbWlsbGlzZWNvbmRcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIHZhbHVlcyBsZXNzIHRoYW4gMTAwMC4gQ3JlZGl0czogQFlhZmZsZS5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHN0cmluZ2lmeShuZXcgRGF0ZSgtMSkpID09ICdcIjE5NjktMTItMzFUMjM6NTk6NTkuOTk5WlwiJztcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9IGNhdGNoIChleGNlcHRpb24pIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHN0cmluZ2lmeVN1cHBvcnRlZCA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpc1N1cHBvcnRlZCA9IHN0cmluZ2lmeVN1cHBvcnRlZDtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdC8vIFRlc3QgYEpTT04ucGFyc2VgLlxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKG5hbWUgPT0gXCJqc29uLXBhcnNlXCIpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dmFyIHBhcnNlID0gZXhwb3J0cy5wYXJzZTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKHR5cGVvZiBwYXJzZSA9PSBcImZ1bmN0aW9uXCIpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gRkYgMy4xYjEsIGIyIHdpbGwgdGhyb3cgYW4gZXhjZXB0aW9uIGlmIGEgYmFyZSBsaXRlcmFsIGlzIHByb3ZpZGVkLlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gQ29uZm9ybWluZyBpbXBsZW1lbnRhdGlvbnMgc2hvdWxkIGFsc28gY29lcmNlIHRoZSBpbml0aWFsIGFyZ3VtZW50IHRvXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBhIHN0cmluZyBwcmlvciB0byBwYXJzaW5nLlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKHBhcnNlKFwiMFwiKSA9PT0gMCAmJiAhcGFyc2UoZmFsc2UpKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIFNpbXBsZSBwYXJzaW5nIHRlc3QuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZhbHVlID0gcGFyc2Uoc2VyaWFsaXplZCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZhciBwYXJzZVN1cHBvcnRlZCA9IHZhbHVlW1wiYVwiXS5sZW5ndGggPT0gNSAmJiB2YWx1ZVtcImFcIl1bMF0gPT09IDE7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChwYXJzZVN1cHBvcnRlZCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBTYWZhcmkgPD0gNS4xLjIgYW5kIEZGIDMuMWIxIGFsbG93IHVuZXNjYXBlZCB0YWJzIGluIHN0cmluZ3MuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRwYXJzZVN1cHBvcnRlZCA9ICFwYXJzZSgnXCJcXHRcIicpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0gY2F0Y2ggKGV4Y2VwdGlvbikge31cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAocGFyc2VTdXBwb3J0ZWQpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIEZGIDQuMCBhbmQgNC4wLjEgYWxsb3cgbGVhZGluZyBgK2Agc2lnbnMgYW5kIGxlYWRpbmdcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gZGVjaW1hbCBwb2ludHMuIEZGIDQuMCwgNC4wLjEsIGFuZCBJRSA5LTEwIGFsc28gYWxsb3dcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gY2VydGFpbiBvY3RhbCBsaXRlcmFscy5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0cGFyc2VTdXBwb3J0ZWQgPSBwYXJzZShcIjAxXCIpICE9PSAxO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSBjYXRjaCAoZXhjZXB0aW9uKSB7fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAocGFyc2VTdXBwb3J0ZWQpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIEZGIDQuMCwgNC4wLjEsIGFuZCBSaGlubyAxLjdSMy1SNCBhbGxvdyB0cmFpbGluZyBkZWNpbWFsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIHBvaW50cy4gVGhlc2UgZW52aXJvbm1lbnRzLCBhbG9uZyB3aXRoIEZGIDMuMWIxIGFuZCAyLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBhbHNvIGFsbG93IHRyYWlsaW5nIGNvbW1hcyBpbiBKU09OIG9iamVjdHMgYW5kIGFycmF5cy5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0cGFyc2VTdXBwb3J0ZWQgPSBwYXJzZShcIjEuXCIpICE9PSAxO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSBjYXRjaCAoZXhjZXB0aW9uKSB7fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0gY2F0Y2ggKGV4Y2VwdGlvbikge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0cGFyc2VTdXBwb3J0ZWQgPSBmYWxzZTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0aXNTdXBwb3J0ZWQgPSBwYXJzZVN1cHBvcnRlZDtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIGhhc1tuYW1lXSA9ICEhaXNTdXBwb3J0ZWQ7XG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRpZiAoIWhhcyhcImpzb25cIikpIHtcblx0XHRcdFx0XHRcdFx0XHQvLyBDb21tb24gYFtbQ2xhc3NdXWAgbmFtZSBhbGlhc2VzLlxuXHRcdFx0XHRcdFx0XHRcdHZhciBmdW5jdGlvbkNsYXNzID0gXCJbb2JqZWN0IEZ1bmN0aW9uXVwiLFxuXHRcdFx0XHRcdFx0XHRcdCAgICBkYXRlQ2xhc3MgPSBcIltvYmplY3QgRGF0ZV1cIixcblx0XHRcdFx0XHRcdFx0XHQgICAgbnVtYmVyQ2xhc3MgPSBcIltvYmplY3QgTnVtYmVyXVwiLFxuXHRcdFx0XHRcdFx0XHRcdCAgICBzdHJpbmdDbGFzcyA9IFwiW29iamVjdCBTdHJpbmddXCIsXG5cdFx0XHRcdFx0XHRcdFx0ICAgIGFycmF5Q2xhc3MgPSBcIltvYmplY3QgQXJyYXldXCIsXG5cdFx0XHRcdFx0XHRcdFx0ICAgIGJvb2xlYW5DbGFzcyA9IFwiW29iamVjdCBCb29sZWFuXVwiO1xuXG5cdFx0XHRcdFx0XHRcdFx0Ly8gRGV0ZWN0IGluY29tcGxldGUgc3VwcG9ydCBmb3IgYWNjZXNzaW5nIHN0cmluZyBjaGFyYWN0ZXJzIGJ5IGluZGV4LlxuXHRcdFx0XHRcdFx0XHRcdHZhciBjaGFySW5kZXhCdWdneSA9IGhhcyhcImJ1Zy1zdHJpbmctY2hhci1pbmRleFwiKTtcblxuXHRcdFx0XHRcdFx0XHRcdC8vIERlZmluZSBhZGRpdGlvbmFsIHV0aWxpdHkgbWV0aG9kcyBpZiB0aGUgYERhdGVgIG1ldGhvZHMgYXJlIGJ1Z2d5LlxuXHRcdFx0XHRcdFx0XHRcdGlmICghaXNFeHRlbmRlZCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0dmFyIGZsb29yID0gTWF0aC5mbG9vcjtcblx0XHRcdFx0XHRcdFx0XHRcdC8vIEEgbWFwcGluZyBiZXR3ZWVuIHRoZSBtb250aHMgb2YgdGhlIHllYXIgYW5kIHRoZSBudW1iZXIgb2YgZGF5cyBiZXR3ZWVuXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBKYW51YXJ5IDFzdCBhbmQgdGhlIGZpcnN0IG9mIHRoZSByZXNwZWN0aXZlIG1vbnRoLlxuXHRcdFx0XHRcdFx0XHRcdFx0dmFyIE1vbnRocyA9IFswLCAzMSwgNTksIDkwLCAxMjAsIDE1MSwgMTgxLCAyMTIsIDI0MywgMjczLCAzMDQsIDMzNF07XG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBJbnRlcm5hbDogQ2FsY3VsYXRlcyB0aGUgbnVtYmVyIG9mIGRheXMgYmV0d2VlbiB0aGUgVW5peCBlcG9jaCBhbmQgdGhlXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBmaXJzdCBkYXkgb2YgdGhlIGdpdmVuIG1vbnRoLlxuXHRcdFx0XHRcdFx0XHRcdFx0dmFyIGdldERheSA9IGZ1bmN0aW9uIGdldERheSh5ZWFyLCBtb250aCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gTW9udGhzW21vbnRoXSArIDM2NSAqICh5ZWFyIC0gMTk3MCkgKyBmbG9vcigoeWVhciAtIDE5NjkgKyAobW9udGggPSArKG1vbnRoID4gMSkpKSAvIDQpIC0gZmxvb3IoKHllYXIgLSAxOTAxICsgbW9udGgpIC8gMTAwKSArIGZsb29yKCh5ZWFyIC0gMTYwMSArIG1vbnRoKSAvIDQwMCk7XG5cdFx0XHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRcdC8vIEludGVybmFsOiBEZXRlcm1pbmVzIGlmIGEgcHJvcGVydHkgaXMgYSBkaXJlY3QgcHJvcGVydHkgb2YgdGhlIGdpdmVuXG5cdFx0XHRcdFx0XHRcdFx0Ly8gb2JqZWN0LiBEZWxlZ2F0ZXMgdG8gdGhlIG5hdGl2ZSBgT2JqZWN0I2hhc093blByb3BlcnR5YCBtZXRob2QuXG5cdFx0XHRcdFx0XHRcdFx0aWYgKCEoX2lzUHJvcGVydHkgPSBvYmplY3RQcm90by5oYXNPd25Qcm9wZXJ0eSkpIHtcblx0XHRcdFx0XHRcdFx0XHRcdF9pc1Byb3BlcnR5ID0gZnVuY3Rpb24gaXNQcm9wZXJ0eShwcm9wZXJ0eSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR2YXIgbWVtYmVycyA9IHt9LFxuXHRcdFx0XHRcdFx0XHRcdFx0XHQgICAgY29uc3RydWN0b3I7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmICgobWVtYmVycy5fX3Byb3RvX18gPSBudWxsLCBtZW1iZXJzLl9fcHJvdG9fXyA9IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBUaGUgKnByb3RvKiBwcm9wZXJ0eSBjYW5ub3QgYmUgc2V0IG11bHRpcGxlIHRpbWVzIGluIHJlY2VudFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIHZlcnNpb25zIG9mIEZpcmVmb3ggYW5kIFNlYU1vbmtleS5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcInRvU3RyaW5nXCI6IDFcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSwgbWVtYmVycykudG9TdHJpbmcgIT0gZ2V0Q2xhc3MpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBTYWZhcmkgPD0gMi4wLjMgZG9lc24ndCBpbXBsZW1lbnQgYE9iamVjdCNoYXNPd25Qcm9wZXJ0eWAsIGJ1dFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIHN1cHBvcnRzIHRoZSBtdXRhYmxlICpwcm90byogcHJvcGVydHkuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0X2lzUHJvcGVydHkgPSBmdW5jdGlvbiBpc1Byb3BlcnR5KHByb3BlcnR5KSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBDYXB0dXJlIGFuZCBicmVhayB0aGUgb2JqZWN0J3MgcHJvdG90eXBlIGNoYWluIChzZWUgc2VjdGlvbiA4LjYuMlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gb2YgdGhlIEVTIDUuMSBzcGVjKS4gVGhlIHBhcmVudGhlc2l6ZWQgZXhwcmVzc2lvbiBwcmV2ZW50cyBhblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gdW5zYWZlIHRyYW5zZm9ybWF0aW9uIGJ5IHRoZSBDbG9zdXJlIENvbXBpbGVyLlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmFyIG9yaWdpbmFsID0gdGhpcy5fX3Byb3RvX18sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQgICAgcmVzdWx0ID0gcHJvcGVydHkgaW4gKHRoaXMuX19wcm90b19fID0gbnVsbCwgdGhpcyk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBSZXN0b3JlIHRoZSBvcmlnaW5hbCBwcm90b3R5cGUgY2hhaW4uXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLl9fcHJvdG9fXyA9IG9yaWdpbmFsO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIHJlc3VsdDtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIENhcHR1cmUgYSByZWZlcmVuY2UgdG8gdGhlIHRvcC1sZXZlbCBgT2JqZWN0YCBjb25zdHJ1Y3Rvci5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb25zdHJ1Y3RvciA9IG1lbWJlcnMuY29uc3RydWN0b3I7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gVXNlIHRoZSBgY29uc3RydWN0b3JgIHByb3BlcnR5IHRvIHNpbXVsYXRlIGBPYmplY3QjaGFzT3duUHJvcGVydHlgIGluXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gb3RoZXIgZW52aXJvbm1lbnRzLlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdF9pc1Byb3BlcnR5ID0gZnVuY3Rpb24gaXNQcm9wZXJ0eShwcm9wZXJ0eSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmFyIHBhcmVudCA9ICh0aGlzLmNvbnN0cnVjdG9yIHx8IGNvbnN0cnVjdG9yKS5wcm90b3R5cGU7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gcHJvcGVydHkgaW4gdGhpcyAmJiAhKHByb3BlcnR5IGluIHBhcmVudCAmJiB0aGlzW3Byb3BlcnR5XSA9PT0gcGFyZW50W3Byb3BlcnR5XSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRtZW1iZXJzID0gbnVsbDtcblx0XHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIF9pc1Byb3BlcnR5LmNhbGwodGhpcywgcHJvcGVydHkpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBJbnRlcm5hbDogTm9ybWFsaXplcyB0aGUgYGZvci4uLmluYCBpdGVyYXRpb24gYWxnb3JpdGhtIGFjcm9zc1xuXHRcdFx0XHRcdFx0XHRcdC8vIGVudmlyb25tZW50cy4gRWFjaCBlbnVtZXJhdGVkIGtleSBpcyB5aWVsZGVkIHRvIGEgYGNhbGxiYWNrYCBmdW5jdGlvbi5cblx0XHRcdFx0XHRcdFx0XHRfZm9yRWFjaCA9IGZ1bmN0aW9uIGZvckVhY2gob2JqZWN0LCBjYWxsYmFjaykge1xuXHRcdFx0XHRcdFx0XHRcdFx0dmFyIHNpemUgPSAwLFxuXHRcdFx0XHRcdFx0XHRcdFx0ICAgIFByb3BlcnRpZXMsXG5cdFx0XHRcdFx0XHRcdFx0XHQgICAgbWVtYmVycyxcblx0XHRcdFx0XHRcdFx0XHRcdCAgICBwcm9wZXJ0eTtcblxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gVGVzdHMgZm9yIGJ1Z3MgaW4gdGhlIGN1cnJlbnQgZW52aXJvbm1lbnQncyBgZm9yLi4uaW5gIGFsZ29yaXRobS4gVGhlXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBgdmFsdWVPZmAgcHJvcGVydHkgaW5oZXJpdHMgdGhlIG5vbi1lbnVtZXJhYmxlIGZsYWcgZnJvbVxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gYE9iamVjdC5wcm90b3R5cGVgIGluIG9sZGVyIHZlcnNpb25zIG9mIElFLCBOZXRzY2FwZSwgYW5kIE1vemlsbGEuXG5cdFx0XHRcdFx0XHRcdFx0XHQoUHJvcGVydGllcyA9IGZ1bmN0aW9uIFByb3BlcnRpZXMoKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMudmFsdWVPZiA9IDA7XG5cdFx0XHRcdFx0XHRcdFx0XHR9KS5wcm90b3R5cGUudmFsdWVPZiA9IDA7XG5cblx0XHRcdFx0XHRcdFx0XHRcdC8vIEl0ZXJhdGUgb3ZlciBhIG5ldyBpbnN0YW5jZSBvZiB0aGUgYFByb3BlcnRpZXNgIGNsYXNzLlxuXHRcdFx0XHRcdFx0XHRcdFx0bWVtYmVycyA9IG5ldyBQcm9wZXJ0aWVzKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRmb3IgKHByb3BlcnR5IGluIG1lbWJlcnMpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gSWdub3JlIGFsbCBwcm9wZXJ0aWVzIGluaGVyaXRlZCBmcm9tIGBPYmplY3QucHJvdG90eXBlYC5cblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKF9pc1Byb3BlcnR5LmNhbGwobWVtYmVycywgcHJvcGVydHkpKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2l6ZSsrO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRQcm9wZXJ0aWVzID0gbWVtYmVycyA9IG51bGw7XG5cblx0XHRcdFx0XHRcdFx0XHRcdC8vIE5vcm1hbGl6ZSB0aGUgaXRlcmF0aW9uIGFsZ29yaXRobS5cblx0XHRcdFx0XHRcdFx0XHRcdGlmICghc2l6ZSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBBIGxpc3Qgb2Ygbm9uLWVudW1lcmFibGUgcHJvcGVydGllcyBpbmhlcml0ZWQgZnJvbSBgT2JqZWN0LnByb3RvdHlwZWAuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdG1lbWJlcnMgPSBbXCJ2YWx1ZU9mXCIsIFwidG9TdHJpbmdcIiwgXCJ0b0xvY2FsZVN0cmluZ1wiLCBcInByb3BlcnR5SXNFbnVtZXJhYmxlXCIsIFwiaXNQcm90b3R5cGVPZlwiLCBcImhhc093blByb3BlcnR5XCIsIFwiY29uc3RydWN0b3JcIl07XG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIElFIDw9IDgsIE1vemlsbGEgMS4wLCBhbmQgTmV0c2NhcGUgNi4yIGlnbm9yZSBzaGFkb3dlZCBub24tZW51bWVyYWJsZVxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBwcm9wZXJ0aWVzLlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRfZm9yRWFjaCA9IGZ1bmN0aW9uIGZvckVhY2gob2JqZWN0LCBjYWxsYmFjaykge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZhciBpc0Z1bmN0aW9uID0gZ2V0Q2xhc3MuY2FsbChvYmplY3QpID09IGZ1bmN0aW9uQ2xhc3MsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0ICAgIHByb3BlcnR5LFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdCAgICBsZW5ndGg7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmFyIGhhc1Byb3BlcnR5ID0gIWlzRnVuY3Rpb24gJiYgdHlwZW9mIG9iamVjdC5jb25zdHJ1Y3RvciAhPSBcImZ1bmN0aW9uXCIgJiYgb2JqZWN0VHlwZXNbX3R5cGVvZihvYmplY3QuaGFzT3duUHJvcGVydHkpXSAmJiBvYmplY3QuaGFzT3duUHJvcGVydHkgfHwgX2lzUHJvcGVydHk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Zm9yIChwcm9wZXJ0eSBpbiBvYmplY3QpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIEdlY2tvIDw9IDEuMCBlbnVtZXJhdGVzIHRoZSBgcHJvdG90eXBlYCBwcm9wZXJ0eSBvZiBmdW5jdGlvbnMgdW5kZXJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIGNlcnRhaW4gY29uZGl0aW9uczsgSUUgZG9lcyBub3QuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoIShpc0Z1bmN0aW9uICYmIHByb3BlcnR5ID09IFwicHJvdG90eXBlXCIpICYmIGhhc1Byb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSkpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y2FsbGJhY2socHJvcGVydHkpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBNYW51YWxseSBpbnZva2UgdGhlIGNhbGxiYWNrIGZvciBlYWNoIG5vbi1lbnVtZXJhYmxlIHByb3BlcnR5LlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGZvciAobGVuZ3RoID0gbWVtYmVycy5sZW5ndGg7IHByb3BlcnR5ID0gbWVtYmVyc1stLWxlbmd0aF07IGhhc1Byb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSkgJiYgY2FsbGJhY2socHJvcGVydHkpKSB7fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIGlmIChzaXplID09IDIpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gU2FmYXJpIDw9IDIuMC40IGVudW1lcmF0ZXMgc2hhZG93ZWQgcHJvcGVydGllcyB0d2ljZS5cblx0XHRcdFx0XHRcdFx0XHRcdFx0X2ZvckVhY2ggPSBmdW5jdGlvbiBmb3JFYWNoKG9iamVjdCwgY2FsbGJhY2spIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBDcmVhdGUgYSBzZXQgb2YgaXRlcmF0ZWQgcHJvcGVydGllcy5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2YXIgbWVtYmVycyA9IHt9LFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdCAgICBpc0Z1bmN0aW9uID0gZ2V0Q2xhc3MuY2FsbChvYmplY3QpID09IGZ1bmN0aW9uQ2xhc3MsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0ICAgIHByb3BlcnR5O1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGZvciAocHJvcGVydHkgaW4gb2JqZWN0KSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBTdG9yZSBlYWNoIHByb3BlcnR5IG5hbWUgdG8gcHJldmVudCBkb3VibGUgZW51bWVyYXRpb24uIFRoZVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gYHByb3RvdHlwZWAgcHJvcGVydHkgb2YgZnVuY3Rpb25zIGlzIG5vdCBlbnVtZXJhdGVkIGR1ZSB0byBjcm9zcy1cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIGVudmlyb25tZW50IGluY29uc2lzdGVuY2llcy5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmICghKGlzRnVuY3Rpb24gJiYgcHJvcGVydHkgPT0gXCJwcm90b3R5cGVcIikgJiYgIV9pc1Byb3BlcnR5LmNhbGwobWVtYmVycywgcHJvcGVydHkpICYmIChtZW1iZXJzW3Byb3BlcnR5XSA9IDEpICYmIF9pc1Byb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSkpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y2FsbGJhY2socHJvcGVydHkpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIE5vIGJ1Z3MgZGV0ZWN0ZWQ7IHVzZSB0aGUgc3RhbmRhcmQgYGZvci4uLmluYCBhbGdvcml0aG0uXG5cdFx0XHRcdFx0XHRcdFx0XHRcdF9mb3JFYWNoID0gZnVuY3Rpb24gZm9yRWFjaChvYmplY3QsIGNhbGxiYWNrKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmFyIGlzRnVuY3Rpb24gPSBnZXRDbGFzcy5jYWxsKG9iamVjdCkgPT0gZnVuY3Rpb25DbGFzcyxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQgICAgcHJvcGVydHksXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0ICAgIGlzQ29uc3RydWN0b3I7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Zm9yIChwcm9wZXJ0eSBpbiBvYmplY3QpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmICghKGlzRnVuY3Rpb24gJiYgcHJvcGVydHkgPT0gXCJwcm90b3R5cGVcIikgJiYgX2lzUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KSAmJiAhKGlzQ29uc3RydWN0b3IgPSBwcm9wZXJ0eSA9PT0gXCJjb25zdHJ1Y3RvclwiKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjYWxsYmFjayhwcm9wZXJ0eSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIE1hbnVhbGx5IGludm9rZSB0aGUgY2FsbGJhY2sgZm9yIHRoZSBgY29uc3RydWN0b3JgIHByb3BlcnR5IGR1ZSB0b1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIGNyb3NzLWVudmlyb25tZW50IGluY29uc2lzdGVuY2llcy5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoaXNDb25zdHJ1Y3RvciB8fCBfaXNQcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkgPSBcImNvbnN0cnVjdG9yXCIpKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjYWxsYmFjayhwcm9wZXJ0eSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIF9mb3JFYWNoKG9iamVjdCwgY2FsbGJhY2spO1xuXHRcdFx0XHRcdFx0XHRcdH07XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBQdWJsaWM6IFNlcmlhbGl6ZXMgYSBKYXZhU2NyaXB0IGB2YWx1ZWAgYXMgYSBKU09OIHN0cmluZy4gVGhlIG9wdGlvbmFsXG5cdFx0XHRcdFx0XHRcdFx0Ly8gYGZpbHRlcmAgYXJndW1lbnQgbWF5IHNwZWNpZnkgZWl0aGVyIGEgZnVuY3Rpb24gdGhhdCBhbHRlcnMgaG93IG9iamVjdCBhbmRcblx0XHRcdFx0XHRcdFx0XHQvLyBhcnJheSBtZW1iZXJzIGFyZSBzZXJpYWxpemVkLCBvciBhbiBhcnJheSBvZiBzdHJpbmdzIGFuZCBudW1iZXJzIHRoYXRcblx0XHRcdFx0XHRcdFx0XHQvLyBpbmRpY2F0ZXMgd2hpY2ggcHJvcGVydGllcyBzaG91bGQgYmUgc2VyaWFsaXplZC4gVGhlIG9wdGlvbmFsIGB3aWR0aGBcblx0XHRcdFx0XHRcdFx0XHQvLyBhcmd1bWVudCBtYXkgYmUgZWl0aGVyIGEgc3RyaW5nIG9yIG51bWJlciB0aGF0IHNwZWNpZmllcyB0aGUgaW5kZW50YXRpb25cblx0XHRcdFx0XHRcdFx0XHQvLyBsZXZlbCBvZiB0aGUgb3V0cHV0LlxuXHRcdFx0XHRcdFx0XHRcdGlmICghaGFzKFwianNvbi1zdHJpbmdpZnlcIikpIHtcblx0XHRcdFx0XHRcdFx0XHRcdC8vIEludGVybmFsOiBBIG1hcCBvZiBjb250cm9sIGNoYXJhY3RlcnMgYW5kIHRoZWlyIGVzY2FwZWQgZXF1aXZhbGVudHMuXG5cdFx0XHRcdFx0XHRcdFx0XHR2YXIgRXNjYXBlcyA9IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0OTI6IFwiXFxcXFxcXFxcIixcblx0XHRcdFx0XHRcdFx0XHRcdFx0MzQ6ICdcXFxcXCInLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHQ4OiBcIlxcXFxiXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdDEyOiBcIlxcXFxmXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdDEwOiBcIlxcXFxuXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdDEzOiBcIlxcXFxyXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdDk6IFwiXFxcXHRcIlxuXHRcdFx0XHRcdFx0XHRcdFx0fTtcblxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gSW50ZXJuYWw6IENvbnZlcnRzIGB2YWx1ZWAgaW50byBhIHplcm8tcGFkZGVkIHN0cmluZyBzdWNoIHRoYXQgaXRzXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBsZW5ndGggaXMgYXQgbGVhc3QgZXF1YWwgdG8gYHdpZHRoYC4gVGhlIGB3aWR0aGAgbXVzdCBiZSA8PSA2LlxuXHRcdFx0XHRcdFx0XHRcdFx0dmFyIGxlYWRpbmdaZXJvZXMgPSBcIjAwMDAwMFwiO1xuXHRcdFx0XHRcdFx0XHRcdFx0dmFyIHRvUGFkZGVkU3RyaW5nID0gZnVuY3Rpb24gdG9QYWRkZWRTdHJpbmcod2lkdGgsIHZhbHVlKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIFRoZSBgfHwgMGAgZXhwcmVzc2lvbiBpcyBuZWNlc3NhcnkgdG8gd29yayBhcm91bmQgYSBidWcgaW5cblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gT3BlcmEgPD0gNy41NHUyIHdoZXJlIGAwID09IC0wYCwgYnV0IGBTdHJpbmcoLTApICE9PSBcIjBcImAuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiAobGVhZGluZ1plcm9lcyArICh2YWx1ZSB8fCAwKSkuc2xpY2UoLXdpZHRoKTtcblx0XHRcdFx0XHRcdFx0XHRcdH07XG5cblx0XHRcdFx0XHRcdFx0XHRcdC8vIEludGVybmFsOiBEb3VibGUtcXVvdGVzIGEgc3RyaW5nIGB2YWx1ZWAsIHJlcGxhY2luZyBhbGwgQVNDSUkgY29udHJvbFxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gY2hhcmFjdGVycyAoY2hhcmFjdGVycyB3aXRoIGNvZGUgdW5pdCB2YWx1ZXMgYmV0d2VlbiAwIGFuZCAzMSkgd2l0aFxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gdGhlaXIgZXNjYXBlZCBlcXVpdmFsZW50cy4gVGhpcyBpcyBhbiBpbXBsZW1lbnRhdGlvbiBvZiB0aGVcblx0XHRcdFx0XHRcdFx0XHRcdC8vIGBRdW90ZSh2YWx1ZSlgIG9wZXJhdGlvbiBkZWZpbmVkIGluIEVTIDUuMSBzZWN0aW9uIDE1LjEyLjMuXG5cdFx0XHRcdFx0XHRcdFx0XHR2YXIgdW5pY29kZVByZWZpeCA9IFwiXFxcXHUwMFwiO1xuXHRcdFx0XHRcdFx0XHRcdFx0dmFyIHF1b3RlID0gZnVuY3Rpb24gcXVvdGUodmFsdWUpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dmFyIHJlc3VsdCA9ICdcIicsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCAgICBpbmRleCA9IDAsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCAgICBsZW5ndGggPSB2YWx1ZS5sZW5ndGgsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCAgICB1c2VDaGFySW5kZXggPSAhY2hhckluZGV4QnVnZ3kgfHwgbGVuZ3RoID4gMTA7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHZhciBzeW1ib2xzID0gdXNlQ2hhckluZGV4ICYmIChjaGFySW5kZXhCdWdneSA/IHZhbHVlLnNwbGl0KFwiXCIpIDogdmFsdWUpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRmb3IgKDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2YXIgY2hhckNvZGUgPSB2YWx1ZS5jaGFyQ29kZUF0KGluZGV4KTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBJZiB0aGUgY2hhcmFjdGVyIGlzIGEgY29udHJvbCBjaGFyYWN0ZXIsIGFwcGVuZCBpdHMgVW5pY29kZSBvclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIHNob3J0aGFuZCBlc2NhcGUgc2VxdWVuY2U7IG90aGVyd2lzZSwgYXBwZW5kIHRoZSBjaGFyYWN0ZXIgYXMtaXMuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0c3dpdGNoIChjaGFyQ29kZSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y2FzZSA4OlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y2FzZSA5OlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y2FzZSAxMDpcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNhc2UgMTI6XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjYXNlIDEzOlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y2FzZSAzNDpcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNhc2UgOTI6XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJlc3VsdCArPSBFc2NhcGVzW2NoYXJDb2RlXTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoY2hhckNvZGUgPCAzMikge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJlc3VsdCArPSB1bmljb2RlUHJlZml4ICsgdG9QYWRkZWRTdHJpbmcoMiwgY2hhckNvZGUudG9TdHJpbmcoMTYpKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXN1bHQgKz0gdXNlQ2hhckluZGV4ID8gc3ltYm9sc1tpbmRleF0gOiB2YWx1ZS5jaGFyQXQoaW5kZXgpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0ICsgJ1wiJztcblx0XHRcdFx0XHRcdFx0XHRcdH07XG5cblx0XHRcdFx0XHRcdFx0XHRcdC8vIEludGVybmFsOiBSZWN1cnNpdmVseSBzZXJpYWxpemVzIGFuIG9iamVjdC4gSW1wbGVtZW50cyB0aGVcblx0XHRcdFx0XHRcdFx0XHRcdC8vIGBTdHIoa2V5LCBob2xkZXIpYCwgYEpPKHZhbHVlKWAsIGFuZCBgSkEodmFsdWUpYCBvcGVyYXRpb25zLlxuXHRcdFx0XHRcdFx0XHRcdFx0dmFyIHNlcmlhbGl6ZSA9IGZ1bmN0aW9uIHNlcmlhbGl6ZShwcm9wZXJ0eSwgb2JqZWN0LCBjYWxsYmFjaywgcHJvcGVydGllcywgd2hpdGVzcGFjZSwgaW5kZW50YXRpb24sIHN0YWNrKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHZhciB2YWx1ZSwgY2xhc3NOYW1lLCB5ZWFyLCBtb250aCwgZGF0ZSwgdGltZSwgaG91cnMsIG1pbnV0ZXMsIHNlY29uZHMsIG1pbGxpc2Vjb25kcywgcmVzdWx0cywgZWxlbWVudCwgaW5kZXgsIGxlbmd0aCwgcHJlZml4LCByZXN1bHQ7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gTmVjZXNzYXJ5IGZvciBob3N0IG9iamVjdCBzdXBwb3J0LlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZhbHVlID0gb2JqZWN0W3Byb3BlcnR5XTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSBjYXRjaCAoZXhjZXB0aW9uKSB7fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoKHR5cGVvZiB2YWx1ZSA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBfdHlwZW9mKHZhbHVlKSkgPT0gXCJvYmplY3RcIiAmJiB2YWx1ZSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNsYXNzTmFtZSA9IGdldENsYXNzLmNhbGwodmFsdWUpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChjbGFzc05hbWUgPT0gZGF0ZUNsYXNzICYmICFfaXNQcm9wZXJ0eS5jYWxsKHZhbHVlLCBcInRvSlNPTlwiKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKHZhbHVlID4gLTEgLyAwICYmIHZhbHVlIDwgMSAvIDApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gRGF0ZXMgYXJlIHNlcmlhbGl6ZWQgYWNjb3JkaW5nIHRvIHRoZSBgRGF0ZSN0b0pTT05gIG1ldGhvZFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBzcGVjaWZpZWQgaW4gRVMgNS4xIHNlY3Rpb24gMTUuOS41LjQ0LiBTZWUgc2VjdGlvbiAxNS45LjEuMTVcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gZm9yIHRoZSBJU08gODYwMSBkYXRlIHRpbWUgc3RyaW5nIGZvcm1hdC5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGdldERheSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIE1hbnVhbGx5IGNvbXB1dGUgdGhlIHllYXIsIG1vbnRoLCBkYXRlLCBob3VycywgbWludXRlcyxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBzZWNvbmRzLCBhbmQgbWlsbGlzZWNvbmRzIGlmIHRoZSBgZ2V0VVRDKmAgbWV0aG9kcyBhcmVcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBidWdneS4gQWRhcHRlZCBmcm9tIEBZYWZmbGUncyBgZGF0ZS1zaGltYCBwcm9qZWN0LlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGRhdGUgPSBmbG9vcih2YWx1ZSAvIDg2NGU1KTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRmb3IgKHllYXIgPSBmbG9vcihkYXRlIC8gMzY1LjI0MjUpICsgMTk3MCAtIDE7IGdldERheSh5ZWFyICsgMSwgMCkgPD0gZGF0ZTsgeWVhcisrKSB7fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGZvciAobW9udGggPSBmbG9vcigoZGF0ZSAtIGdldERheSh5ZWFyLCAwKSkgLyAzMC40Mik7IGdldERheSh5ZWFyLCBtb250aCArIDEpIDw9IGRhdGU7IG1vbnRoKyspIHt9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZGF0ZSA9IDEgKyBkYXRlIC0gZ2V0RGF5KHllYXIsIG1vbnRoKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBUaGUgYHRpbWVgIHZhbHVlIHNwZWNpZmllcyB0aGUgdGltZSB3aXRoaW4gdGhlIGRheSAoc2VlIEVTXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gNS4xIHNlY3Rpb24gMTUuOS4xLjIpLiBUaGUgZm9ybXVsYSBgKEEgJSBCICsgQikgJSBCYCBpcyB1c2VkXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gdG8gY29tcHV0ZSBgQSBtb2R1bG8gQmAsIGFzIHRoZSBgJWAgb3BlcmF0b3IgZG9lcyBub3Rcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBjb3JyZXNwb25kIHRvIHRoZSBgbW9kdWxvYCBvcGVyYXRpb24gZm9yIG5lZ2F0aXZlIG51bWJlcnMuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGltZSA9ICh2YWx1ZSAlIDg2NGU1ICsgODY0ZTUpICUgODY0ZTU7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gVGhlIGhvdXJzLCBtaW51dGVzLCBzZWNvbmRzLCBhbmQgbWlsbGlzZWNvbmRzIGFyZSBvYnRhaW5lZCBieVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIGRlY29tcG9zaW5nIHRoZSB0aW1lIHdpdGhpbiB0aGUgZGF5LiBTZWUgc2VjdGlvbiAxNS45LjEuMTAuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aG91cnMgPSBmbG9vcih0aW1lIC8gMzZlNSkgJSAyNDtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRtaW51dGVzID0gZmxvb3IodGltZSAvIDZlNCkgJSA2MDtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzZWNvbmRzID0gZmxvb3IodGltZSAvIDFlMykgJSA2MDtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRtaWxsaXNlY29uZHMgPSB0aW1lICUgMWUzO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHllYXIgPSB2YWx1ZS5nZXRVVENGdWxsWWVhcigpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdG1vbnRoID0gdmFsdWUuZ2V0VVRDTW9udGgoKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRkYXRlID0gdmFsdWUuZ2V0VVRDRGF0ZSgpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGhvdXJzID0gdmFsdWUuZ2V0VVRDSG91cnMoKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRtaW51dGVzID0gdmFsdWUuZ2V0VVRDTWludXRlcygpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNlY29uZHMgPSB2YWx1ZS5nZXRVVENTZWNvbmRzKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0bWlsbGlzZWNvbmRzID0gdmFsdWUuZ2V0VVRDTWlsbGlzZWNvbmRzKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gU2VyaWFsaXplIGV4dGVuZGVkIHllYXJzIGNvcnJlY3RseS5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmFsdWUgPSAoeWVhciA8PSAwIHx8IHllYXIgPj0gMWU0ID8gKHllYXIgPCAwID8gXCItXCIgOiBcIitcIikgKyB0b1BhZGRlZFN0cmluZyg2LCB5ZWFyIDwgMCA/IC15ZWFyIDogeWVhcikgOiB0b1BhZGRlZFN0cmluZyg0LCB5ZWFyKSkgKyBcIi1cIiArIHRvUGFkZGVkU3RyaW5nKDIsIG1vbnRoICsgMSkgKyBcIi1cIiArIHRvUGFkZGVkU3RyaW5nKDIsIGRhdGUpICtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gTW9udGhzLCBkYXRlcywgaG91cnMsIG1pbnV0ZXMsIGFuZCBzZWNvbmRzIHNob3VsZCBoYXZlIHR3b1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBkaWdpdHM7IG1pbGxpc2Vjb25kcyBzaG91bGQgaGF2ZSB0aHJlZS5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XCJUXCIgKyB0b1BhZGRlZFN0cmluZygyLCBob3VycykgKyBcIjpcIiArIHRvUGFkZGVkU3RyaW5nKDIsIG1pbnV0ZXMpICsgXCI6XCIgKyB0b1BhZGRlZFN0cmluZygyLCBzZWNvbmRzKSArXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIE1pbGxpc2Vjb25kcyBhcmUgb3B0aW9uYWwgaW4gRVMgNS4wLCBidXQgcmVxdWlyZWQgaW4gNS4xLlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcIi5cIiArIHRvUGFkZGVkU3RyaW5nKDMsIG1pbGxpc2Vjb25kcykgKyBcIlpcIjtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZhbHVlID0gbnVsbDtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZS50b0pTT04gPT0gXCJmdW5jdGlvblwiICYmIChjbGFzc05hbWUgIT0gbnVtYmVyQ2xhc3MgJiYgY2xhc3NOYW1lICE9IHN0cmluZ0NsYXNzICYmIGNsYXNzTmFtZSAhPSBhcnJheUNsYXNzIHx8IF9pc1Byb3BlcnR5LmNhbGwodmFsdWUsIFwidG9KU09OXCIpKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gUHJvdG90eXBlIDw9IDEuNi4xIGFkZHMgbm9uLXN0YW5kYXJkIGB0b0pTT05gIG1ldGhvZHMgdG8gdGhlXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBgTnVtYmVyYCwgYFN0cmluZ2AsIGBEYXRlYCwgYW5kIGBBcnJheWAgcHJvdG90eXBlcy4gSlNPTiAzXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBpZ25vcmVzIGFsbCBgdG9KU09OYCBtZXRob2RzIG9uIHRoZXNlIG9iamVjdHMgdW5sZXNzIHRoZXkgYXJlXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBkZWZpbmVkIGRpcmVjdGx5IG9uIGFuIGluc3RhbmNlLlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmFsdWUgPSB2YWx1ZS50b0pTT04ocHJvcGVydHkpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoY2FsbGJhY2spIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBJZiBhIHJlcGxhY2VtZW50IGZ1bmN0aW9uIHdhcyBwcm92aWRlZCwgY2FsbCBpdCB0byBvYnRhaW4gdGhlIHZhbHVlXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gZm9yIHNlcmlhbGl6YXRpb24uXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmFsdWUgPSBjYWxsYmFjay5jYWxsKG9iamVjdCwgcHJvcGVydHksIHZhbHVlKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAodmFsdWUgPT09IG51bGwpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gXCJudWxsXCI7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0Y2xhc3NOYW1lID0gZ2V0Q2xhc3MuY2FsbCh2YWx1ZSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChjbGFzc05hbWUgPT0gYm9vbGVhbkNsYXNzKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gQm9vbGVhbnMgYXJlIHJlcHJlc2VudGVkIGxpdGVyYWxseS5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gXCJcIiArIHZhbHVlO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKGNsYXNzTmFtZSA9PSBudW1iZXJDbGFzcykge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIEpTT04gbnVtYmVycyBtdXN0IGJlIGZpbml0ZS4gYEluZmluaXR5YCBhbmQgYE5hTmAgYXJlIHNlcmlhbGl6ZWQgYXNcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBgXCJudWxsXCJgLlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiB2YWx1ZSA+IC0xIC8gMCAmJiB2YWx1ZSA8IDEgLyAwID8gXCJcIiArIHZhbHVlIDogXCJudWxsXCI7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoY2xhc3NOYW1lID09IHN0cmluZ0NsYXNzKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gU3RyaW5ncyBhcmUgZG91YmxlLXF1b3RlZCBhbmQgZXNjYXBlZC5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gcXVvdGUoXCJcIiArIHZhbHVlKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBSZWN1cnNpdmVseSBzZXJpYWxpemUgb2JqZWN0cyBhbmQgYXJyYXlzLlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoKHR5cGVvZiB2YWx1ZSA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBfdHlwZW9mKHZhbHVlKSkgPT0gXCJvYmplY3RcIikge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIENoZWNrIGZvciBjeWNsaWMgc3RydWN0dXJlcy4gVGhpcyBpcyBhIGxpbmVhciBzZWFyY2g7IHBlcmZvcm1hbmNlXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gaXMgaW52ZXJzZWx5IHByb3BvcnRpb25hbCB0byB0aGUgbnVtYmVyIG9mIHVuaXF1ZSBuZXN0ZWQgb2JqZWN0cy5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRmb3IgKGxlbmd0aCA9IHN0YWNrLmxlbmd0aDsgbGVuZ3RoLS07KSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoc3RhY2tbbGVuZ3RoXSA9PT0gdmFsdWUpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gQ3ljbGljIHN0cnVjdHVyZXMgY2Fubm90IGJlIHNlcmlhbGl6ZWQgYnkgYEpTT04uc3RyaW5naWZ5YC5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGhyb3cgVHlwZUVycm9yKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIEFkZCB0aGUgb2JqZWN0IHRvIHRoZSBzdGFjayBvZiB0cmF2ZXJzZWQgb2JqZWN0cy5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzdGFjay5wdXNoKHZhbHVlKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXN1bHRzID0gW107XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gU2F2ZSB0aGUgY3VycmVudCBpbmRlbnRhdGlvbiBsZXZlbCBhbmQgaW5kZW50IG9uZSBhZGRpdGlvbmFsIGxldmVsLlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHByZWZpeCA9IGluZGVudGF0aW9uO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGluZGVudGF0aW9uICs9IHdoaXRlc3BhY2U7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGNsYXNzTmFtZSA9PSBhcnJheUNsYXNzKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBSZWN1cnNpdmVseSBzZXJpYWxpemUgYXJyYXkgZWxlbWVudHMuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRmb3IgKGluZGV4ID0gMCwgbGVuZ3RoID0gdmFsdWUubGVuZ3RoOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKykge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRlbGVtZW50ID0gc2VyaWFsaXplKGluZGV4LCB2YWx1ZSwgY2FsbGJhY2ssIHByb3BlcnRpZXMsIHdoaXRlc3BhY2UsIGluZGVudGF0aW9uLCBzdGFjayk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJlc3VsdHMucHVzaChlbGVtZW50ID09PSB1bmRlZiA/IFwibnVsbFwiIDogZWxlbWVudCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXN1bHQgPSByZXN1bHRzLmxlbmd0aCA/IHdoaXRlc3BhY2UgPyBcIltcXG5cIiArIGluZGVudGF0aW9uICsgcmVzdWx0cy5qb2luKFwiLFxcblwiICsgaW5kZW50YXRpb24pICsgXCJcXG5cIiArIHByZWZpeCArIFwiXVwiIDogXCJbXCIgKyByZXN1bHRzLmpvaW4oXCIsXCIpICsgXCJdXCIgOiBcIltdXCI7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIFJlY3Vyc2l2ZWx5IHNlcmlhbGl6ZSBvYmplY3QgbWVtYmVycy4gTWVtYmVycyBhcmUgc2VsZWN0ZWQgZnJvbVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gZWl0aGVyIGEgdXNlci1zcGVjaWZpZWQgbGlzdCBvZiBwcm9wZXJ0eSBuYW1lcywgb3IgdGhlIG9iamVjdFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gaXRzZWxmLlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0X2ZvckVhY2gocHJvcGVydGllcyB8fCB2YWx1ZSwgZnVuY3Rpb24gKHByb3BlcnR5KSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZhciBlbGVtZW50ID0gc2VyaWFsaXplKHByb3BlcnR5LCB2YWx1ZSwgY2FsbGJhY2ssIHByb3BlcnRpZXMsIHdoaXRlc3BhY2UsIGluZGVudGF0aW9uLCBzdGFjayk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChlbGVtZW50ICE9PSB1bmRlZikge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIEFjY29yZGluZyB0byBFUyA1LjEgc2VjdGlvbiAxNS4xMi4zOiBcIklmIGBnYXBgIHt3aGl0ZXNwYWNlfVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIGlzIG5vdCB0aGUgZW1wdHkgc3RyaW5nLCBsZXQgYG1lbWJlcmAge3F1b3RlKHByb3BlcnR5KSArIFwiOlwifVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIGJlIHRoZSBjb25jYXRlbmF0aW9uIG9mIGBtZW1iZXJgIGFuZCB0aGUgYHNwYWNlYCBjaGFyYWN0ZXIuXCJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBUaGUgXCJgc3BhY2VgIGNoYXJhY3RlclwiIHJlZmVycyB0byB0aGUgbGl0ZXJhbCBzcGFjZVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIGNoYXJhY3Rlciwgbm90IHRoZSBgc3BhY2VgIHt3aWR0aH0gYXJndW1lbnQgcHJvdmlkZWQgdG9cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBgSlNPTi5zdHJpbmdpZnlgLlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJlc3VsdHMucHVzaChxdW90ZShwcm9wZXJ0eSkgKyBcIjpcIiArICh3aGl0ZXNwYWNlID8gXCIgXCIgOiBcIlwiKSArIGVsZW1lbnQpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJlc3VsdCA9IHJlc3VsdHMubGVuZ3RoID8gd2hpdGVzcGFjZSA/IFwie1xcblwiICsgaW5kZW50YXRpb24gKyByZXN1bHRzLmpvaW4oXCIsXFxuXCIgKyBpbmRlbnRhdGlvbikgKyBcIlxcblwiICsgcHJlZml4ICsgXCJ9XCIgOiBcIntcIiArIHJlc3VsdHMuam9pbihcIixcIikgKyBcIn1cIiA6IFwie31cIjtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gUmVtb3ZlIHRoZSBvYmplY3QgZnJvbSB0aGUgdHJhdmVyc2VkIG9iamVjdCBzdGFjay5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzdGFjay5wb3AoKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0O1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHR9O1xuXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBQdWJsaWM6IGBKU09OLnN0cmluZ2lmeWAuIFNlZSBFUyA1LjEgc2VjdGlvbiAxNS4xMi4zLlxuXHRcdFx0XHRcdFx0XHRcdFx0ZXhwb3J0cy5zdHJpbmdpZnkgPSBmdW5jdGlvbiAoc291cmNlLCBmaWx0ZXIsIHdpZHRoKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHZhciB3aGl0ZXNwYWNlLCBjYWxsYmFjaywgcHJvcGVydGllcywgY2xhc3NOYW1lO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAob2JqZWN0VHlwZXNbdHlwZW9mIGZpbHRlciA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBfdHlwZW9mKGZpbHRlcildICYmIGZpbHRlcikge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmICgoY2xhc3NOYW1lID0gZ2V0Q2xhc3MuY2FsbChmaWx0ZXIpKSA9PSBmdW5jdGlvbkNsYXNzKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjYWxsYmFjayA9IGZpbHRlcjtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKGNsYXNzTmFtZSA9PSBhcnJheUNsYXNzKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBDb252ZXJ0IHRoZSBwcm9wZXJ0eSBuYW1lcyBhcnJheSBpbnRvIGEgbWFrZXNoaWZ0IHNldC5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHByb3BlcnRpZXMgPSB7fTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGZvciAodmFyIGluZGV4ID0gMCwgbGVuZ3RoID0gZmlsdGVyLmxlbmd0aCwgdmFsdWU7IGluZGV4IDwgbGVuZ3RoOyB2YWx1ZSA9IGZpbHRlcltpbmRleCsrXSwgKGNsYXNzTmFtZSA9IGdldENsYXNzLmNhbGwodmFsdWUpLCBjbGFzc05hbWUgPT0gc3RyaW5nQ2xhc3MgfHwgY2xhc3NOYW1lID09IG51bWJlckNsYXNzKSAmJiAocHJvcGVydGllc1t2YWx1ZV0gPSAxKSkge31cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKHdpZHRoKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKChjbGFzc05hbWUgPSBnZXRDbGFzcy5jYWxsKHdpZHRoKSkgPT0gbnVtYmVyQ2xhc3MpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIENvbnZlcnQgdGhlIGB3aWR0aGAgdG8gYW4gaW50ZWdlciBhbmQgY3JlYXRlIGEgc3RyaW5nIGNvbnRhaW5pbmdcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIGB3aWR0aGAgbnVtYmVyIG9mIHNwYWNlIGNoYXJhY3RlcnMuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoKHdpZHRoIC09IHdpZHRoICUgMSkgPiAwKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGZvciAod2hpdGVzcGFjZSA9IFwiXCIsIHdpZHRoID4gMTAgJiYgKHdpZHRoID0gMTApOyB3aGl0ZXNwYWNlLmxlbmd0aCA8IHdpZHRoOyB3aGl0ZXNwYWNlICs9IFwiIFwiKSB7fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoY2xhc3NOYW1lID09IHN0cmluZ0NsYXNzKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR3aGl0ZXNwYWNlID0gd2lkdGgubGVuZ3RoIDw9IDEwID8gd2lkdGggOiB3aWR0aC5zbGljZSgwLCAxMCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIE9wZXJhIDw9IDcuNTR1MiBkaXNjYXJkcyB0aGUgdmFsdWVzIGFzc29jaWF0ZWQgd2l0aCBlbXB0eSBzdHJpbmcga2V5c1xuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyAoYFwiXCJgKSBvbmx5IGlmIHRoZXkgYXJlIHVzZWQgZGlyZWN0bHkgd2l0aGluIGFuIG9iamVjdCBtZW1iZXIgbGlzdFxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyAoZS5nLiwgYCEoXCJcIiBpbiB7IFwiXCI6IDF9KWApLlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gc2VyaWFsaXplKFwiXCIsICh2YWx1ZSA9IHt9LCB2YWx1ZVtcIlwiXSA9IHNvdXJjZSwgdmFsdWUpLCBjYWxsYmFjaywgcHJvcGVydGllcywgd2hpdGVzcGFjZSwgXCJcIiwgW10pO1xuXHRcdFx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBQdWJsaWM6IFBhcnNlcyBhIEpTT04gc291cmNlIHN0cmluZy5cblx0XHRcdFx0XHRcdFx0XHRpZiAoIWhhcyhcImpzb24tcGFyc2VcIikpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHZhciBmcm9tQ2hhckNvZGUgPSBTdHJpbmcuZnJvbUNoYXJDb2RlO1xuXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBJbnRlcm5hbDogQSBtYXAgb2YgZXNjYXBlZCBjb250cm9sIGNoYXJhY3RlcnMgYW5kIHRoZWlyIHVuZXNjYXBlZFxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gZXF1aXZhbGVudHMuXG5cdFx0XHRcdFx0XHRcdFx0XHR2YXIgVW5lc2NhcGVzID0ge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHQ5MjogXCJcXFxcXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdDM0OiAnXCInLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHQ0NzogXCIvXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdDk4OiBcIlxcYlwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHQxMTY6IFwiXFx0XCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdDExMDogXCJcXG5cIixcblx0XHRcdFx0XHRcdFx0XHRcdFx0MTAyOiBcIlxcZlwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHQxMTQ6IFwiXFxyXCJcblx0XHRcdFx0XHRcdFx0XHRcdH07XG5cblx0XHRcdFx0XHRcdFx0XHRcdC8vIEludGVybmFsOiBTdG9yZXMgdGhlIHBhcnNlciBzdGF0ZS5cblx0XHRcdFx0XHRcdFx0XHRcdHZhciBJbmRleCwgU291cmNlO1xuXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBJbnRlcm5hbDogUmVzZXRzIHRoZSBwYXJzZXIgc3RhdGUgYW5kIHRocm93cyBhIGBTeW50YXhFcnJvcmAuXG5cdFx0XHRcdFx0XHRcdFx0XHR2YXIgYWJvcnQgPSBmdW5jdGlvbiBhYm9ydCgpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0SW5kZXggPSBTb3VyY2UgPSBudWxsO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR0aHJvdyBTeW50YXhFcnJvcigpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fTtcblxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gSW50ZXJuYWw6IFJldHVybnMgdGhlIG5leHQgdG9rZW4sIG9yIGBcIiRcImAgaWYgdGhlIHBhcnNlciBoYXMgcmVhY2hlZFxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gdGhlIGVuZCBvZiB0aGUgc291cmNlIHN0cmluZy4gQSB0b2tlbiBtYXkgYmUgYSBzdHJpbmcsIG51bWJlciwgYG51bGxgXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBsaXRlcmFsLCBvciBCb29sZWFuIGxpdGVyYWwuXG5cdFx0XHRcdFx0XHRcdFx0XHR2YXIgbGV4ID0gZnVuY3Rpb24gbGV4KCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR2YXIgc291cmNlID0gU291cmNlLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHQgICAgbGVuZ3RoID0gc291cmNlLmxlbmd0aCxcblx0XHRcdFx0XHRcdFx0XHRcdFx0ICAgIHZhbHVlLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHQgICAgYmVnaW4sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCAgICBwb3NpdGlvbixcblx0XHRcdFx0XHRcdFx0XHRcdFx0ICAgIGlzU2lnbmVkLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHQgICAgY2hhckNvZGU7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHdoaWxlIChJbmRleCA8IGxlbmd0aCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNoYXJDb2RlID0gc291cmNlLmNoYXJDb2RlQXQoSW5kZXgpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHN3aXRjaCAoY2hhckNvZGUpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNhc2UgOTpcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNhc2UgMTA6XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjYXNlIDEzOlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y2FzZSAzMjpcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gU2tpcCB3aGl0ZXNwYWNlIHRva2VucywgaW5jbHVkaW5nIHRhYnMsIGNhcnJpYWdlIHJldHVybnMsIGxpbmVcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gZmVlZHMsIGFuZCBzcGFjZSBjaGFyYWN0ZXJzLlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRJbmRleCsrO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNhc2UgMTIzOlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y2FzZSAxMjU6XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjYXNlIDkxOlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y2FzZSA5Mzpcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNhc2UgNTg6XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjYXNlIDQ0OlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBQYXJzZSBhIHB1bmN0dWF0b3IgdG9rZW4gKGB7YCwgYH1gLCBgW2AsIGBdYCwgYDpgLCBvciBgLGApIGF0XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIHRoZSBjdXJyZW50IHBvc2l0aW9uLlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2YWx1ZSA9IGNoYXJJbmRleEJ1Z2d5ID8gc291cmNlLmNoYXJBdChJbmRleCkgOiBzb3VyY2VbSW5kZXhdO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRJbmRleCsrO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gdmFsdWU7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjYXNlIDM0OlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBgXCJgIGRlbGltaXRzIGEgSlNPTiBzdHJpbmc7IGFkdmFuY2UgdG8gdGhlIG5leHQgY2hhcmFjdGVyIGFuZFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBiZWdpbiBwYXJzaW5nIHRoZSBzdHJpbmcuIFN0cmluZyB0b2tlbnMgYXJlIHByZWZpeGVkIHdpdGggdGhlXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIHNlbnRpbmVsIGBAYCBjaGFyYWN0ZXIgdG8gZGlzdGluZ3Vpc2ggdGhlbSBmcm9tIHB1bmN0dWF0b3JzIGFuZFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBlbmQtb2Ytc3RyaW5nIHRva2Vucy5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Zm9yICh2YWx1ZSA9IFwiQFwiLCBJbmRleCsrOyBJbmRleCA8IGxlbmd0aDspIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjaGFyQ29kZSA9IHNvdXJjZS5jaGFyQ29kZUF0KEluZGV4KTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoY2hhckNvZGUgPCAzMikge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gVW5lc2NhcGVkIEFTQ0lJIGNvbnRyb2wgY2hhcmFjdGVycyAodGhvc2Ugd2l0aCBhIGNvZGUgdW5pdFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gbGVzcyB0aGFuIHRoZSBzcGFjZSBjaGFyYWN0ZXIpIGFyZSBub3QgcGVybWl0dGVkLlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0YWJvcnQoKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKGNoYXJDb2RlID09IDkyKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBBIHJldmVyc2Ugc29saWR1cyAoYFxcYCkgbWFya3MgdGhlIGJlZ2lubmluZyBvZiBhbiBlc2NhcGVkXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBjb250cm9sIGNoYXJhY3RlciAoaW5jbHVkaW5nIGBcImAsIGBcXGAsIGFuZCBgL2ApIG9yIFVuaWNvZGVcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIGVzY2FwZSBzZXF1ZW5jZS5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNoYXJDb2RlID0gc291cmNlLmNoYXJDb2RlQXQoKytJbmRleCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzd2l0Y2ggKGNoYXJDb2RlKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNhc2UgOTI6XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNhc2UgMzQ6XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNhc2UgNDc6XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNhc2UgOTg6XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNhc2UgMTE2OlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjYXNlIDExMDpcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y2FzZSAxMDI6XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNhc2UgMTE0OlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIFJldml2ZSBlc2NhcGVkIGNvbnRyb2wgY2hhcmFjdGVycy5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2YWx1ZSArPSBVbmVzY2FwZXNbY2hhckNvZGVdO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdEluZGV4Kys7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNhc2UgMTE3OlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIGBcXHVgIG1hcmtzIHRoZSBiZWdpbm5pbmcgb2YgYSBVbmljb2RlIGVzY2FwZSBzZXF1ZW5jZS5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBBZHZhbmNlIHRvIHRoZSBmaXJzdCBjaGFyYWN0ZXIgYW5kIHZhbGlkYXRlIHRoZVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIGZvdXItZGlnaXQgY29kZSBwb2ludC5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRiZWdpbiA9ICsrSW5kZXg7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Zm9yIChwb3NpdGlvbiA9IEluZGV4ICsgNDsgSW5kZXggPCBwb3NpdGlvbjsgSW5kZXgrKykge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y2hhckNvZGUgPSBzb3VyY2UuY2hhckNvZGVBdChJbmRleCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBBIHZhbGlkIHNlcXVlbmNlIGNvbXByaXNlcyBmb3VyIGhleGRpZ2l0cyAoY2FzZS1cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIGluc2Vuc2l0aXZlKSB0aGF0IGZvcm0gYSBzaW5nbGUgaGV4YWRlY2ltYWwgdmFsdWUuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoIShjaGFyQ29kZSA+PSA0OCAmJiBjaGFyQ29kZSA8PSA1NyB8fCBjaGFyQ29kZSA+PSA5NyAmJiBjaGFyQ29kZSA8PSAxMDIgfHwgY2hhckNvZGUgPj0gNjUgJiYgY2hhckNvZGUgPD0gNzApKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIEludmFsaWQgVW5pY29kZSBlc2NhcGUgc2VxdWVuY2UuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGFib3J0KCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIFJldml2ZSB0aGUgZXNjYXBlZCBjaGFyYWN0ZXIuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmFsdWUgKz0gZnJvbUNoYXJDb2RlKFwiMHhcIiArIHNvdXJjZS5zbGljZShiZWdpbiwgSW5kZXgpKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBJbnZhbGlkIGVzY2FwZSBzZXF1ZW5jZS5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRhYm9ydCgpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoY2hhckNvZGUgPT0gMzQpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gQW4gdW5lc2NhcGVkIGRvdWJsZS1xdW90ZSBjaGFyYWN0ZXIgbWFya3MgdGhlIGVuZCBvZiB0aGVcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gc3RyaW5nLlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNoYXJDb2RlID0gc291cmNlLmNoYXJDb2RlQXQoSW5kZXgpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0YmVnaW4gPSBJbmRleDtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIE9wdGltaXplIGZvciB0aGUgY29tbW9uIGNhc2Ugd2hlcmUgYSBzdHJpbmcgaXMgdmFsaWQuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR3aGlsZSAoY2hhckNvZGUgPj0gMzIgJiYgY2hhckNvZGUgIT0gOTIgJiYgY2hhckNvZGUgIT0gMzQpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y2hhckNvZGUgPSBzb3VyY2UuY2hhckNvZGVBdCgrK0luZGV4KTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIEFwcGVuZCB0aGUgc3RyaW5nIGFzLWlzLlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmFsdWUgKz0gc291cmNlLnNsaWNlKGJlZ2luLCBJbmRleCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChzb3VyY2UuY2hhckNvZGVBdChJbmRleCkgPT0gMzQpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBBZHZhbmNlIHRvIHRoZSBuZXh0IGNoYXJhY3RlciBhbmQgcmV0dXJuIHRoZSByZXZpdmVkIHN0cmluZy5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRJbmRleCsrO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiB2YWx1ZTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBVbnRlcm1pbmF0ZWQgc3RyaW5nLlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRhYm9ydCgpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gUGFyc2UgbnVtYmVycyBhbmQgbGl0ZXJhbHMuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGJlZ2luID0gSW5kZXg7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIEFkdmFuY2UgcGFzdCB0aGUgbmVnYXRpdmUgc2lnbiwgaWYgb25lIGlzIHNwZWNpZmllZC5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGNoYXJDb2RlID09IDQ1KSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aXNTaWduZWQgPSB0cnVlO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNoYXJDb2RlID0gc291cmNlLmNoYXJDb2RlQXQoKytJbmRleCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gUGFyc2UgYW4gaW50ZWdlciBvciBmbG9hdGluZy1wb2ludCB2YWx1ZS5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGNoYXJDb2RlID49IDQ4ICYmIGNoYXJDb2RlIDw9IDU3KSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gTGVhZGluZyB6ZXJvZXMgYXJlIGludGVycHJldGVkIGFzIG9jdGFsIGxpdGVyYWxzLlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChjaGFyQ29kZSA9PSA0OCAmJiAoY2hhckNvZGUgPSBzb3VyY2UuY2hhckNvZGVBdChJbmRleCArIDEpLCBjaGFyQ29kZSA+PSA0OCAmJiBjaGFyQ29kZSA8PSA1NykpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIElsbGVnYWwgb2N0YWwgbGl0ZXJhbC5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGFib3J0KCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlzU2lnbmVkID0gZmFsc2U7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gUGFyc2UgdGhlIGludGVnZXIgY29tcG9uZW50LlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGZvciAoOyBJbmRleCA8IGxlbmd0aCAmJiAoY2hhckNvZGUgPSBzb3VyY2UuY2hhckNvZGVBdChJbmRleCksIGNoYXJDb2RlID49IDQ4ICYmIGNoYXJDb2RlIDw9IDU3KTsgSW5kZXgrKykge31cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBGbG9hdHMgY2Fubm90IGNvbnRhaW4gYSBsZWFkaW5nIGRlY2ltYWwgcG9pbnQ7IGhvd2V2ZXIsIHRoaXNcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBjYXNlIGlzIGFscmVhZHkgYWNjb3VudGVkIGZvciBieSB0aGUgcGFyc2VyLlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChzb3VyY2UuY2hhckNvZGVBdChJbmRleCkgPT0gNDYpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHBvc2l0aW9uID0gKytJbmRleDtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIFBhcnNlIHRoZSBkZWNpbWFsIGNvbXBvbmVudC5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGZvciAoOyBwb3NpdGlvbiA8IGxlbmd0aCAmJiAoY2hhckNvZGUgPSBzb3VyY2UuY2hhckNvZGVBdChwb3NpdGlvbiksIGNoYXJDb2RlID49IDQ4ICYmIGNoYXJDb2RlIDw9IDU3KTsgcG9zaXRpb24rKykge31cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChwb3NpdGlvbiA9PSBJbmRleCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBJbGxlZ2FsIHRyYWlsaW5nIGRlY2ltYWwuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGFib3J0KCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRJbmRleCA9IHBvc2l0aW9uO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBQYXJzZSBleHBvbmVudHMuIFRoZSBgZWAgZGVub3RpbmcgdGhlIGV4cG9uZW50IGlzXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gY2FzZS1pbnNlbnNpdGl2ZS5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjaGFyQ29kZSA9IHNvdXJjZS5jaGFyQ29kZUF0KEluZGV4KTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoY2hhckNvZGUgPT0gMTAxIHx8IGNoYXJDb2RlID09IDY5KSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjaGFyQ29kZSA9IHNvdXJjZS5jaGFyQ29kZUF0KCsrSW5kZXgpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gU2tpcCBwYXN0IHRoZSBzaWduIGZvbGxvd2luZyB0aGUgZXhwb25lbnQsIGlmIG9uZSBpc1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gc3BlY2lmaWVkLlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGNoYXJDb2RlID09IDQzIHx8IGNoYXJDb2RlID09IDQ1KSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdEluZGV4Kys7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBQYXJzZSB0aGUgZXhwb25lbnRpYWwgY29tcG9uZW50LlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Zm9yIChwb3NpdGlvbiA9IEluZGV4OyBwb3NpdGlvbiA8IGxlbmd0aCAmJiAoY2hhckNvZGUgPSBzb3VyY2UuY2hhckNvZGVBdChwb3NpdGlvbiksIGNoYXJDb2RlID49IDQ4ICYmIGNoYXJDb2RlIDw9IDU3KTsgcG9zaXRpb24rKykge31cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChwb3NpdGlvbiA9PSBJbmRleCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBJbGxlZ2FsIGVtcHR5IGV4cG9uZW50LlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRhYm9ydCgpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0SW5kZXggPSBwb3NpdGlvbjtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gQ29lcmNlIHRoZSBwYXJzZWQgdmFsdWUgdG8gYSBKYXZhU2NyaXB0IG51bWJlci5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gK3NvdXJjZS5zbGljZShiZWdpbiwgSW5kZXgpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIEEgbmVnYXRpdmUgc2lnbiBtYXkgb25seSBwcmVjZWRlIG51bWJlcnMuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChpc1NpZ25lZCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGFib3J0KCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gYHRydWVgLCBgZmFsc2VgLCBhbmQgYG51bGxgIGxpdGVyYWxzLlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoc291cmNlLnNsaWNlKEluZGV4LCBJbmRleCArIDQpID09IFwidHJ1ZVwiKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0SW5kZXggKz0gNDtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIGlmIChzb3VyY2Uuc2xpY2UoSW5kZXgsIEluZGV4ICsgNSkgPT0gXCJmYWxzZVwiKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0SW5kZXggKz0gNTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoc291cmNlLnNsaWNlKEluZGV4LCBJbmRleCArIDQpID09IFwibnVsbFwiKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0SW5kZXggKz0gNDtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gbnVsbDtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBVbnJlY29nbml6ZWQgdG9rZW4uXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGFib3J0KCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIFJldHVybiB0aGUgc2VudGluZWwgYCRgIGNoYXJhY3RlciBpZiB0aGUgcGFyc2VyIGhhcyByZWFjaGVkIHRoZSBlbmRcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gb2YgdGhlIHNvdXJjZSBzdHJpbmcuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiBcIiRcIjtcblx0XHRcdFx0XHRcdFx0XHRcdH07XG5cblx0XHRcdFx0XHRcdFx0XHRcdC8vIEludGVybmFsOiBQYXJzZXMgYSBKU09OIGB2YWx1ZWAgdG9rZW4uXG5cdFx0XHRcdFx0XHRcdFx0XHR2YXIgZ2V0ID0gZnVuY3Rpb24gZ2V0KHZhbHVlKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHZhciByZXN1bHRzLCBoYXNNZW1iZXJzO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAodmFsdWUgPT0gXCIkXCIpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBVbmV4cGVjdGVkIGVuZCBvZiBpbnB1dC5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRhYm9ydCgpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmICh0eXBlb2YgdmFsdWUgPT0gXCJzdHJpbmdcIikge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmICgoY2hhckluZGV4QnVnZ3kgPyB2YWx1ZS5jaGFyQXQoMCkgOiB2YWx1ZVswXSkgPT0gXCJAXCIpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIFJlbW92ZSB0aGUgc2VudGluZWwgYEBgIGNoYXJhY3Rlci5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiB2YWx1ZS5zbGljZSgxKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gUGFyc2Ugb2JqZWN0IGFuZCBhcnJheSBsaXRlcmFscy5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAodmFsdWUgPT0gXCJbXCIpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIFBhcnNlcyBhIEpTT04gYXJyYXksIHJldHVybmluZyBhIG5ldyBKYXZhU2NyaXB0IGFycmF5LlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0cmVzdWx0cyA9IFtdO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Zm9yICg7OyBoYXNNZW1iZXJzIHx8IChoYXNNZW1iZXJzID0gdHJ1ZSkpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmFsdWUgPSBsZXgoKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gQSBjbG9zaW5nIHNxdWFyZSBicmFja2V0IG1hcmtzIHRoZSBlbmQgb2YgdGhlIGFycmF5IGxpdGVyYWwuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmICh2YWx1ZSA9PSBcIl1cIikge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIElmIHRoZSBhcnJheSBsaXRlcmFsIGNvbnRhaW5zIGVsZW1lbnRzLCB0aGUgY3VycmVudCB0b2tlblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBzaG91bGQgYmUgYSBjb21tYSBzZXBhcmF0aW5nIHRoZSBwcmV2aW91cyBlbGVtZW50IGZyb20gdGhlXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIG5leHQuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChoYXNNZW1iZXJzKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKHZhbHVlID09IFwiLFwiKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2YWx1ZSA9IGxleCgpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKHZhbHVlID09IFwiXVwiKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIFVuZXhwZWN0ZWQgdHJhaWxpbmcgYCxgIGluIGFycmF5IGxpdGVyYWwuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGFib3J0KCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIEEgYCxgIG11c3Qgc2VwYXJhdGUgZWFjaCBhcnJheSBlbGVtZW50LlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0YWJvcnQoKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gRWxpc2lvbnMgYW5kIGxlYWRpbmcgY29tbWFzIGFyZSBub3QgcGVybWl0dGVkLlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAodmFsdWUgPT0gXCIsXCIpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRhYm9ydCgpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJlc3VsdHMucHVzaChnZXQodmFsdWUpKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiByZXN1bHRzO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAodmFsdWUgPT0gXCJ7XCIpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIFBhcnNlcyBhIEpTT04gb2JqZWN0LCByZXR1cm5pbmcgYSBuZXcgSmF2YVNjcmlwdCBvYmplY3QuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXN1bHRzID0ge307XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRmb3IgKDs7IGhhc01lbWJlcnMgfHwgKGhhc01lbWJlcnMgPSB0cnVlKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2YWx1ZSA9IGxleCgpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBBIGNsb3NpbmcgY3VybHkgYnJhY2UgbWFya3MgdGhlIGVuZCBvZiB0aGUgb2JqZWN0IGxpdGVyYWwuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmICh2YWx1ZSA9PSBcIn1cIikge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIElmIHRoZSBvYmplY3QgbGl0ZXJhbCBjb250YWlucyBtZW1iZXJzLCB0aGUgY3VycmVudCB0b2tlblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBzaG91bGQgYmUgYSBjb21tYSBzZXBhcmF0b3IuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChoYXNNZW1iZXJzKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKHZhbHVlID09IFwiLFwiKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2YWx1ZSA9IGxleCgpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKHZhbHVlID09IFwifVwiKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIFVuZXhwZWN0ZWQgdHJhaWxpbmcgYCxgIGluIG9iamVjdCBsaXRlcmFsLlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRhYm9ydCgpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBBIGAsYCBtdXN0IHNlcGFyYXRlIGVhY2ggb2JqZWN0IG1lbWJlci5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGFib3J0KCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIExlYWRpbmcgY29tbWFzIGFyZSBub3QgcGVybWl0dGVkLCBvYmplY3QgcHJvcGVydHkgbmFtZXMgbXVzdCBiZVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBkb3VibGUtcXVvdGVkIHN0cmluZ3MsIGFuZCBhIGA6YCBtdXN0IHNlcGFyYXRlIGVhY2ggcHJvcGVydHlcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gbmFtZSBhbmQgdmFsdWUuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmICh2YWx1ZSA9PSBcIixcIiB8fCB0eXBlb2YgdmFsdWUgIT0gXCJzdHJpbmdcIiB8fCAoY2hhckluZGV4QnVnZ3kgPyB2YWx1ZS5jaGFyQXQoMCkgOiB2YWx1ZVswXSkgIT0gXCJAXCIgfHwgbGV4KCkgIT0gXCI6XCIpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRhYm9ydCgpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJlc3VsdHNbdmFsdWUuc2xpY2UoMSldID0gZ2V0KGxleCgpKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiByZXN1bHRzO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBVbmV4cGVjdGVkIHRva2VuIGVuY291bnRlcmVkLlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGFib3J0KCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIHZhbHVlO1xuXHRcdFx0XHRcdFx0XHRcdFx0fTtcblxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gSW50ZXJuYWw6IFVwZGF0ZXMgYSB0cmF2ZXJzZWQgb2JqZWN0IG1lbWJlci5cblx0XHRcdFx0XHRcdFx0XHRcdHZhciB1cGRhdGUgPSBmdW5jdGlvbiB1cGRhdGUoc291cmNlLCBwcm9wZXJ0eSwgY2FsbGJhY2spIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dmFyIGVsZW1lbnQgPSB3YWxrKHNvdXJjZSwgcHJvcGVydHksIGNhbGxiYWNrKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGVsZW1lbnQgPT09IHVuZGVmKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZGVsZXRlIHNvdXJjZVtwcm9wZXJ0eV07XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0c291cmNlW3Byb3BlcnR5XSA9IGVsZW1lbnQ7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdH07XG5cblx0XHRcdFx0XHRcdFx0XHRcdC8vIEludGVybmFsOiBSZWN1cnNpdmVseSB0cmF2ZXJzZXMgYSBwYXJzZWQgSlNPTiBvYmplY3QsIGludm9raW5nIHRoZVxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gYGNhbGxiYWNrYCBmdW5jdGlvbiBmb3IgZWFjaCB2YWx1ZS4gVGhpcyBpcyBhbiBpbXBsZW1lbnRhdGlvbiBvZiB0aGVcblx0XHRcdFx0XHRcdFx0XHRcdC8vIGBXYWxrKGhvbGRlciwgbmFtZSlgIG9wZXJhdGlvbiBkZWZpbmVkIGluIEVTIDUuMSBzZWN0aW9uIDE1LjEyLjIuXG5cdFx0XHRcdFx0XHRcdFx0XHR2YXIgd2FsayA9IGZ1bmN0aW9uIHdhbGsoc291cmNlLCBwcm9wZXJ0eSwgY2FsbGJhY2spIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dmFyIHZhbHVlID0gc291cmNlW3Byb3BlcnR5XSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0ICAgIGxlbmd0aDtcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKCh0eXBlb2YgdmFsdWUgPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZih2YWx1ZSkpID09IFwib2JqZWN0XCIgJiYgdmFsdWUpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBgZm9yRWFjaGAgY2FuJ3QgYmUgdXNlZCB0byB0cmF2ZXJzZSBhbiBhcnJheSBpbiBPcGVyYSA8PSA4LjU0XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gYmVjYXVzZSBpdHMgYE9iamVjdCNoYXNPd25Qcm9wZXJ0eWAgaW1wbGVtZW50YXRpb24gcmV0dXJucyBgZmFsc2VgXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gZm9yIGFycmF5IGluZGljZXMgKGUuZy4sIGAhWzEsIDIsIDNdLmhhc093blByb3BlcnR5KFwiMFwiKWApLlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChnZXRDbGFzcy5jYWxsKHZhbHVlKSA9PSBhcnJheUNsYXNzKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRmb3IgKGxlbmd0aCA9IHZhbHVlLmxlbmd0aDsgbGVuZ3RoLS07KSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHVwZGF0ZSh2YWx1ZSwgbGVuZ3RoLCBjYWxsYmFjayk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdF9mb3JFYWNoKHZhbHVlLCBmdW5jdGlvbiAocHJvcGVydHkpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dXBkYXRlKHZhbHVlLCBwcm9wZXJ0eSwgY2FsbGJhY2spO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiBjYWxsYmFjay5jYWxsKHNvdXJjZSwgcHJvcGVydHksIHZhbHVlKTtcblx0XHRcdFx0XHRcdFx0XHRcdH07XG5cblx0XHRcdFx0XHRcdFx0XHRcdC8vIFB1YmxpYzogYEpTT04ucGFyc2VgLiBTZWUgRVMgNS4xIHNlY3Rpb24gMTUuMTIuMi5cblx0XHRcdFx0XHRcdFx0XHRcdGV4cG9ydHMucGFyc2UgPSBmdW5jdGlvbiAoc291cmNlLCBjYWxsYmFjaykge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR2YXIgcmVzdWx0LCB2YWx1ZTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0SW5kZXggPSAwO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRTb3VyY2UgPSBcIlwiICsgc291cmNlO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRyZXN1bHQgPSBnZXQobGV4KCkpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBJZiBhIEpTT04gc3RyaW5nIGNvbnRhaW5zIG11bHRpcGxlIHRva2VucywgaXQgaXMgaW52YWxpZC5cblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGxleCgpICE9IFwiJFwiKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0YWJvcnQoKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBSZXNldCB0aGUgcGFyc2VyIHN0YXRlLlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRJbmRleCA9IFNvdXJjZSA9IG51bGw7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiBjYWxsYmFjayAmJiBnZXRDbGFzcy5jYWxsKGNhbGxiYWNrKSA9PSBmdW5jdGlvbkNsYXNzID8gd2FsaygodmFsdWUgPSB7fSwgdmFsdWVbXCJcIl0gPSByZXN1bHQsIHZhbHVlKSwgXCJcIiwgY2FsbGJhY2spIDogcmVzdWx0O1xuXHRcdFx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRleHBvcnRzW1wicnVuSW5Db250ZXh0XCJdID0gcnVuSW5Db250ZXh0O1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gZXhwb3J0cztcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0aWYgKGZyZWVFeHBvcnRzICYmICFpc0xvYWRlcikge1xuXHRcdFx0XHRcdFx0XHQvLyBFeHBvcnQgZm9yIENvbW1vbkpTIGVudmlyb25tZW50cy5cblx0XHRcdFx0XHRcdFx0cnVuSW5Db250ZXh0KHJvb3QsIGZyZWVFeHBvcnRzKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdC8vIEV4cG9ydCBmb3Igd2ViIGJyb3dzZXJzIGFuZCBKYXZhU2NyaXB0IGVuZ2luZXMuXG5cdFx0XHRcdFx0XHRcdHZhciBuYXRpdmVKU09OID0gcm9vdC5KU09OLFxuXHRcdFx0XHRcdFx0XHQgICAgcHJldmlvdXNKU09OID0gcm9vdFtcIkpTT04zXCJdLFxuXHRcdFx0XHRcdFx0XHQgICAgaXNSZXN0b3JlZCA9IGZhbHNlO1xuXG5cdFx0XHRcdFx0XHRcdHZhciBKU09OMyA9IHJ1bkluQ29udGV4dChyb290LCByb290W1wiSlNPTjNcIl0gPSB7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gUHVibGljOiBSZXN0b3JlcyB0aGUgb3JpZ2luYWwgdmFsdWUgb2YgdGhlIGdsb2JhbCBgSlNPTmAgb2JqZWN0IGFuZFxuXHRcdFx0XHRcdFx0XHRcdC8vIHJldHVybnMgYSByZWZlcmVuY2UgdG8gdGhlIGBKU09OM2Agb2JqZWN0LlxuXHRcdFx0XHRcdFx0XHRcdFwibm9Db25mbGljdFwiOiBmdW5jdGlvbiBub0NvbmZsaWN0KCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKCFpc1Jlc3RvcmVkKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlzUmVzdG9yZWQgPSB0cnVlO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRyb290LkpTT04gPSBuYXRpdmVKU09OO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRyb290W1wiSlNPTjNcIl0gPSBwcmV2aW91c0pTT047XG5cdFx0XHRcdFx0XHRcdFx0XHRcdG5hdGl2ZUpTT04gPSBwcmV2aW91c0pTT04gPSBudWxsO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIEpTT04zO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHRcdFx0cm9vdC5KU09OID0ge1xuXHRcdFx0XHRcdFx0XHRcdFwicGFyc2VcIjogSlNPTjMucGFyc2UsXG5cdFx0XHRcdFx0XHRcdFx0XCJzdHJpbmdpZnlcIjogSlNPTjMuc3RyaW5naWZ5XG5cdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdC8vIEV4cG9ydCBmb3IgYXN5bmNocm9ub3VzIG1vZHVsZSBsb2FkZXJzLlxuXHRcdFx0XHRcdFx0aWYgKGlzTG9hZGVyKSB7XG5cdFx0XHRcdFx0XHRcdGRlZmluZShmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIEpTT04zO1xuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KS5jYWxsKHRoaXMpO1xuXHRcdFx0XHR9KS5jYWxsKHRoaXMsIHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiB0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDoge30pO1xuXHRcdFx0fSwge31dLFxuXHRcdFx0NTE6IFtmdW5jdGlvbiAoX2RlcmVxXywgbW9kdWxlLCBleHBvcnRzKSB7XG5cdFx0XHRcdG1vZHVsZS5leHBvcnRzID0gdG9BcnJheTtcblxuXHRcdFx0XHRmdW5jdGlvbiB0b0FycmF5KGxpc3QsIGluZGV4KSB7XG5cdFx0XHRcdFx0dmFyIGFycmF5ID0gW107XG5cblx0XHRcdFx0XHRpbmRleCA9IGluZGV4IHx8IDA7XG5cblx0XHRcdFx0XHRmb3IgKHZhciBpID0gaW5kZXggfHwgMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHRcdGFycmF5W2kgLSBpbmRleF0gPSBsaXN0W2ldO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHJldHVybiBhcnJheTtcblx0XHRcdFx0fVxuXHRcdFx0fSwge31dXG5cdFx0fSwge30sIFszMV0pKDMxKTtcblx0fSk7XG59XG5cbmNjLl9SRi5wb3AoKTsiXX0=","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/90/90ae6d49-e76e-4940-8b79-b5a17735c7b6.js":{"source":"\"use strict\";\ncc._RF.push(module, '90ae61J525JQIt5taF3Nce2', 'HTTP');\n// scripts/HTTP.js\n\n\"use strict\";\n\n// 包头麻将调试地址\n// var URL = \"http://116.62.193.47:8009\";\n// var URL = \"http://116.62.193.47:9009\";\n// var URL = \"http://121.196.213.165:9009\";\nvar URL = \"http://127.0.0.1:9009\";\ncc.game.config['noCache'] = true;\ncc.game.config.myversion = 201708042;\nvar HTTP = cc.Class({\n    extends: cc.Component,\n    statics: {\n        sessionId: 0,\n        userId: 0,\n        master_url: URL,\n        url: URL,\n        sendRequest: function sendRequest(path, data, handler, extraUrl) {\n            var xhr = cc.loader.getXMLHttpRequest();\n            xhr.timeout = 5000;\n            var str = \"?\";\n            for (var k in data) {\n                if (str != \"?\") {\n                    str += \"&\";\n                }\n                str += k + \"=\" + data[k];\n            }\n            if (extraUrl == null) {\n                extraUrl = HTTP.url;\n            }\n            var requestURL = extraUrl + path + encodeURI(str);\n            // console.log(\"RequestURL:\" + requestURL);\n            xhr.open(\"GET\", requestURL, true);\n            if (cc.sys.isNative) {\n                xhr.setRequestHeader(\"Accept-Encoding\", \"gzip,deflate\", \"text/html;charset=UTF-8\");\n            }\n            xhr.onreadystatechange = function () {\n                if (xhr.readyState === 4 && xhr.status >= 200 && xhr.status < 300) {\n                    // console.log(\"http res(\"+ xhr.responseText.length + \"):\" + xhr.responseText);\n                    try {\n                        var ret = JSON.parse(xhr.responseText);\n                        if (handler !== null) {\n                            handler(ret);\n                        } /* code */\n                    } catch (e) {\n                        console.log(\"err:\" + e);\n                        //handler(null);\n                    } finally {\n                        if (cc.vv && cc.vv.wc) {\n                            //       cc.vv.wc.hide();\n                        }\n                    }\n                }\n            };\n            if (cc.vv && cc.vv.wc) {\n                //cc.vv.wc.show();\n            }\n            xhr.send();\n            return xhr;\n        }\n    }\n});\n\ncc._RF.pop();","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/d4/d45224f5-f454-430d-92c4-608c2e08be13.js":{"source":"\"use strict\";\ncc._RF.push(module, 'd4522T19FRDDZLEYIwuCL4T', 'JbsNetMgr');\n// scripts/JbsNetMgr.js\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n    initHandlers: function initHandlers(GameNet) {\n        var self = GameNet;\n        cc.vv.match_net.addHandler(\"signup\", function (data) {\n            cc.vv.alert.show(\"提示\", \"进入比赛队列成功！比赛人数一满您将直接进入游戏！\");\n        });\n        cc.vv.match_net.addHandler(\"signup_fail\", function (data) {\n            cc.vv.alert.show(\"提示\", \"进入比赛队列失败！\");\n        });\n        cc.vv.match_net.addHandler(\"create_match_finish\", function (data) {\n            console.log(\"create_match_finish\", data);\n            //达到开始比赛条件\n            cc.vv.userMgr.enterRoom(data.roomid);\n        });\n        cc.vv.match_net.addHandler(\"match_result\", function (data) {\n            console.log(\"match_result\", data);\n            //处理一轮比赛结果\n            if (!data) {\n                return;\n            }\n            var msg = '该轮比赛结束，';\n            if (data.isWin) {\n                msg += '恭喜进入下一轮！';\n            } else {\n                msg += '您已被淘汰！';\n                cc.vv.match_net.close();\n            }\n            cc.vv.alert.show('提示', msg);\n        });\n        cc.vv.match_net.addHandler(\"match_over\", function (data) {\n            console.log(\"match_over\", data);\n            //处理整个比赛结果\n            if (!data) {\n                return;\n            }\n            var msg = '锦标赛结束，';\n            var ranking = data.ranking; //排名\n            if (ranking == 1) {\n                msg += '恭喜获得冠军';\n            } else if (ranking == 2) {\n                msg += '恭喜获得第二名';\n            } else if (ranking == 3) {\n                msg += '恭喜获得第三名';\n            }\n            cc.vv.match_net.close();\n            // var reward_num = data.reward_num;\n            // var reward_type = data.reward_type;\n            // if (reward_type == 1) {\n            //     msg += reward_num + '金币！';\n            // } else if (reward_type == 2) {\n            //     msg += reward_num + '钻石！';\n            // }\n            cc.vv.alert.show('提示', msg);\n        });\n        cc.vv.match_net.addHandler(\"exit_match\", function (data) {\n            cc.vv.match_net.close();\n        });\n    }\n});\n\ncc._RF.pop();","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/f0/f084afba-afda-4592-9cb3-45bf9c60d3c7.js":{"source":"\"use strict\";\ncc._RF.push(module, 'f084a+6r9pFkpyzRb+cYNPH', 'MjNetMgr');\n// scripts/MjNetMgr.js\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n    initHandlers: function initHandlers(GameNet) {\n        var self = GameNet;\n        cc.vv.net.addHandler(\"login_result\", function (data) {\n            console.log(\"login_result===>\", data);\n            if (data.errcode === 0) {\n                var data = data.data;\n                self.roomId = data.roomid;\n                self.room_type = data.conf.room_type;\n                self.conf = data.conf;\n                self.maxNumOfGames = data.conf.maxGames;\n                self.numOfGames = data.numofgames;\n                self.seats = data.seats;\n                self.seatIndex = self.getSeatIndexByID(cc.vv.userMgr.userId);\n                self.isOver = false;\n            } else {\n                console.log(data.errmsg);\n            }\n        });\n        cc.vv.net.addHandler(\"login_finished\", function (data) {\n            console.log(\"login_finished\");\n            cc.director.loadScene(\"mjgame\");\n        });\n        cc.vv.net.addHandler(\"exit_result\", function (data) {\n            self.roomId = null;\n            self.turn = -1;\n            self.seats = null;\n        });\n        cc.vv.net.addHandler(\"exit_notify_push\", function (data) {\n            var userId = data;\n            var s = self.getSeatByID(userId);\n            if (s != null) {\n                s.userid = 0;\n                s.name = \"\";\n                self.dispatchEvent(\"user_state_changed\", s);\n            }\n        });\n        cc.vv.net.addHandler(\"dispress_push\", function (data) {\n            self.roomId = null;\n            self.turn = -1;\n            self.seats = null;\n        });\n        cc.vv.net.addHandler(\"disconnect\", function (data) {\n            if (self.roomId == null) {\n                if (self.room_type == 0) {\n                    cc.director.loadScene(\"newhall\");\n                    self.room_type = -1;\n                } else {\n                    cc.director.loadScene(\"newhall\");\n                }\n            } else {\n                if (self.isOver == false) {\n                    cc.vv.userMgr.oldRoomId = self.roomId;\n                    self.dispatchEvent(\"disconnect\");\n                } else {\n                    self.roomId = null;\n                    self.room_type = -1;\n                }\n            }\n        });\n        cc.vv.net.addHandler(\"match_exit_error\", function (data) {\n            self.dispatchEvent('match_exit_error');\n        });\n        cc.vv.net.addHandler(\"new_user_comes_push\", function (data) {\n            //console.log(data);\n            var seatIndex = data.seatindex;\n            if (self.seats[seatIndex].userid > 0) {\n                self.seats[seatIndex].online = true;\n            } else {\n                data.online = true;\n                self.seats[seatIndex] = data;\n            }\n            self.dispatchEvent('new_user', self.seats[seatIndex]);\n        });\n        cc.vv.net.addHandler(\"user_state_push\", function (data) {\n            //console.log(data);\n            var userId = data.userid;\n            if (self.room_type == 0) {\n                var seat = self.getSeatByID(userId);\n                if (!seat) return;\n                seat.online = data.online;\n                self.dispatchEvent('user_state_changed', seat);\n            }\n        });\n        cc.vv.net.addHandler(\"user_ready_push\", function (data) {\n            //console.log(data);\n            var userId = data.userid;\n            var seat = self.getSeatByID(userId);\n            seat.ready = data.ready;\n            self.dispatchEvent('user_state_changed', seat);\n        });\n        cc.vv.net.addHandler(\"game_holds_push\", function (data) {\n            var seat = self.seats[self.seatIndex];\n            console.log(data);\n            seat.holds = data;\n            for (var i = 0; i < self.seats.length; ++i) {\n                var s = self.seats[i];\n                if (!s.folds) {\n                    s.folds = [];\n                }\n                if (!s.pengs) {\n                    s.pengs = [];\n                }\n                if (!s.extraPais) {\n                    s.extraPais = [];\n                }\n                if (!s.caiShen) {\n                    s.caiShen = [];\n                }\n                if (!s.chis) {\n                    s.chis = [];\n                }\n                if (!s.angangs) {\n                    s.angangs = [];\n                }\n                if (!s.diangangs) {\n                    s.diangangs = [];\n                }\n                if (!s.wangangs) {\n                    s.wangangs = [];\n                }\n                s.ready = false;\n            }\n            self.dispatchEvent('game_holds');\n        });\n        cc.vv.net.addHandler(\"game_begin_push\", function (data) {\n            console.log('game_begin_push');\n            console.log(data);\n            self.button = data;\n            self.turn = self.button;\n            self.gamestate = \"begin\";\n            self.dispatchEvent('game_begin');\n        });\n        cc.vv.net.addHandler(\"game_playing_push\", function (data) {\n            console.log('game_playing_push');\n            self.gamestate = \"playing\";\n            self.dispatchEvent('game_playing');\n        });\n        cc.vv.net.addHandler(\"game_sync_push\", function (data) {\n            console.log(\"game_sync_push\");\n            console.log(data);\n            self.numOfMJ = data.numofmj;\n            self.gamestate = data.state;\n            self.turn = data.turn;\n            self.button = data.button;\n            self.chupai = data.chuPai;\n            for (var i = 0; i < 4; ++i) {\n                var seat = self.seats[i];\n                var sd = data.seats[i];\n                seat.holds = sd.holds;\n                seat.folds = sd.folds;\n                seat.angangs = sd.angangs;\n                seat.diangangs = sd.diangangs;\n                seat.wangangs = sd.wangangs;\n                seat.pengs = sd.pengs;\n                seat.extraPais = sd.extraPais;\n                seat.caiShen = sd.caiShen;\n                seat.chis = sd.chis;\n                seat.hued = sd.hued;\n                seat.tinged = sd.tinged;\n                seat.iszimo = sd.iszimo;\n                seat.huinfo = sd.huinfo;\n            }\n        });\n        cc.vv.net.addHandler(\"game_action_push\", function (data) {\n            self.curaction = data;\n            cc.vv.gameNetMgr.curaction = data;\n            console.log(\"game_action_push---获得所以操作的数据\", data);\n            self.dispatchEvent('game_action', data);\n        });\n\n        cc.vv.net.addHandler(\"game_timerBegin_push\", function (data) {\n            self.dispatchEvent('game_timerBegin', data);\n        });\n\n        cc.vv.net.addHandler(\"game_chupai_push\", function (data) {\n            console.log('game_chupai_push');\n            //console.log(data);\n            var turnUserID = data;\n            var si = self.getSeatIndexByID(turnUserID);\n            self.doTurnChange(si);\n        });\n        cc.vv.net.addHandler(\"game_num_push\", function (data) {\n            self.numOfGames = data;\n            self.dispatchEvent('game_num', data);\n        });\n        cc.vv.net.addHandler(\"game_over_push\", function (data) {\n            console.log('game_over_push');\n            var results = data.results;\n            for (var i = 0; i < self.seats.length; ++i) {\n                self.seats[i].score = results.length == 0 ? 0 : results[i].totalscore;\n            }\n            self.dispatchEvent('game_over', results);\n            if (data.endinfo) {\n                self.isOver = true;\n                self.dispatchEvent('game_end', data.endinfo);\n            }\n            self.reset();\n            for (var i = 0; i < self.seats.length; ++i) {\n                self.dispatchEvent('user_state_changed', self.seats[i]);\n            }\n        });\n        cc.vv.net.addHandler(\"mj_count_push\", function (data) {\n            console.log('mj_count_push');\n            self.numOfMJ = data;\n            //console.log(data);\n            self.dispatchEvent('mj_count', data);\n        });\n        cc.vv.net.addHandler(\"hu_push\", function (data) {\n            console.log('hu_push');\n            console.log(data);\n            self.doHu(data);\n        });\n        cc.vv.net.addHandler(\"hangang_notify_push\", function (data) {\n            self.dispatchEvent('hangang_notify', data);\n        });\n        cc.vv.net.addHandler(\"game_chupai_notify_push\", function (data) {\n            var userId = data.userId;\n            var pai = data.pai;\n            var si = self.getSeatIndexByID(userId);\n            self.doChupai(si, pai);\n        });\n        cc.vv.net.addHandler(\"game_mopai_push\", function (data) {\n            console.log('game_mopai_push');\n            self.doMopai(self.seatIndex, data);\n        });\n        cc.vv.net.addHandler(\"guo_notify_push\", function (data) {\n            console.log('guo_notify_push');\n            var userId = data.userId;\n            var pai = data.pai;\n            var si = self.getSeatIndexByID(userId);\n            self.doGuo(si, pai);\n        });\n        cc.vv.net.addHandler(\"guo_result\", function (data) {\n            console.log('guo_result');\n            self.dispatchEvent('guo_result');\n        });\n        cc.vv.net.addHandler(\"guohu_push\", function (data) {\n            console.log('guohu_push');\n            self.dispatchEvent(\"push_notice\", {\n                info: \"过胡\",\n                time: 1.5\n            });\n        });\n        cc.vv.net.addHandler(\"peng_notify_push\", function (data) {\n            console.log('peng_notify_push-------碰牌操作', data);\n            console.log(data);\n            var userId = data.userid;\n            var pai = data.pai;\n            var si = self.getSeatIndexByID(userId);\n            var extraPengPai = data.extraPengPai;\n            self.doPeng(si, data.pai, extraPengPai);\n        });\n        //  吃牌操作\n        cc.vv.net.addHandler(\"chi_notify_push\", function (data) {\n            console.log('chi_notify_push', data);\n            var userId = data.userid;\n            var pai = data.pai;\n            var si = self.getSeatIndexByID(userId);\n            var extraChiPai = data.extraChiPai;\n            var chiArray = data.chiArray;\n            self.doChi(si, data.pai, chiArray, extraChiPai);\n        });\n        cc.vv.net.addHandler(\"gang_notify_push\", function (data) {\n            console.log('gang_notify_push');\n            console.log(data);\n            var userId = data.userid;\n            var pai = data.pai;\n            var si = self.getSeatIndexByID(userId);\n            self.doGang(si, pai, data.gangtype);\n        });\n        //  财神弃牌操作\n        cc.vv.net.addHandler(\"game_caishen_notify_push\", function (data) {\n            console.log(\"财神弃牌操作\");\n            var userId = data.userId;\n            var pai = data.pai;\n            var si = self.getSeatIndexByID(userId);\n            console.log('财神弃牌操作!!!!!!!!!!', data);\n            self.doCaiShen(si, pai);\n        });\n        cc.vv.net.addHandler(\"chat_push\", function (data) {\n            self.dispatchEvent(\"chat_push\", data);\n        });\n        cc.vv.net.addHandler(\"quick_chat_push\", function (data) {\n            self.dispatchEvent(\"quick_chat_push\", data);\n        });\n        cc.vv.net.addHandler(\"emoji_push\", function (data) {\n            self.dispatchEvent(\"emoji_push\", data);\n        });\n        cc.vv.net.addHandler(\"dissolve_notice_push\", function (data) {\n            console.log(\"dissolve_notice_push\");\n            console.log(data);\n            self.dissoveData = data;\n            self.dispatchEvent(\"dissolve_notice\", data);\n        });\n        cc.vv.net.addHandler(\"dissolve_cancel_push\", function (data) {\n            self.dissoveData = null;\n            self.dispatchEvent(\"dissolve_cancel\", data);\n        });\n        cc.vv.net.addHandler(\"voice_msg_push\", function (data) {\n            console.log(\"voice_msg_push\");\n            self.dispatchEvent(\"voice_msg\", data);\n        });\n    }\n});\n\ncc._RF.pop();","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/0e/0eceae97-f881-482b-95c5-7497b7f215da.js":{"source":"\"use strict\";\ncc._RF.push(module, '0ecea6X+IFIK5XFdJe38hXa', 'MahjongMgr');\n// scripts/MahjongMgr.js\n\n\"use strict\";\n\nvar mahjongSprites = [];\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        leftAtlas: {\n            default: null,\n            type: cc.SpriteAtlas\n        },\n        rightAtlas: {\n            default: null,\n            type: cc.SpriteAtlas\n        },\n        bottomAtlas: {\n            default: null,\n            type: cc.SpriteAtlas\n        },\n        bottomFoldAtlas: {\n            default: null,\n            type: cc.SpriteAtlas\n        },\n        pengPrefabSelf: {\n            default: null,\n            type: cc.Prefab\n        },\n        pengPrefabLeft: {\n            default: null,\n            type: cc.Prefab\n        },\n        emptyAtlas: {\n            default: null,\n            type: cc.SpriteAtlas\n        },\n        holdsEmpty: {\n            default: [],\n            type: [cc.SpriteFrame]\n        },\n        _sides: null,\n        _pres: null,\n        _foldPres: null\n    },\n    onLoad: function onLoad() {\n        if (cc.vv == null) {\n            return;\n        }\n        this._sides = [\"myself\", \"right\", \"up\", \"left\"];\n        this._pres = [\"M_\", \"R_\", \"B_\", \"L_\"];\n        this._foldPres = [\"B_\", \"R_\", \"B_\", \"L_\"];\n        cc.vv.mahjongmgr = this;\n        //筒\n        for (var i = 1; i < 10; ++i) {\n            mahjongSprites.push(\"dot_\" + i);\n        }\n        //条\n        for (var i = 1; i < 10; ++i) {\n            mahjongSprites.push(\"bamboo_\" + i);\n        }\n        //万\n        for (var i = 1; i < 10; ++i) {\n            mahjongSprites.push(\"character_\" + i);\n        }\n        //东西南北风\n        mahjongSprites.push(\"wind_east\");\n        mahjongSprites.push(\"wind_west\");\n        mahjongSprites.push(\"wind_south\");\n        mahjongSprites.push(\"wind_north\");\n        //中、发、白\n        mahjongSprites.push(\"red\");\n        mahjongSprites.push(\"green\");\n        mahjongSprites.push(\"white\");\n        //春夏秋冬 \n        mahjongSprites.push(\"spring\");\n        mahjongSprites.push(\"summer\");\n        mahjongSprites.push(\"autumn\");\n        mahjongSprites.push(\"winter\");\n        //兰竹菊梅\n        mahjongSprites.push(\"orchid\"); //兰\n        mahjongSprites.push(\"bamboo\"); //竹\n        mahjongSprites.push(\"chrysanthemum\"); //菊       \n        mahjongSprites.push(\"plum\"); //梅            \n    },\n    getMahjongSpriteByID: function getMahjongSpriteByID(id) {\n        return mahjongSprites[id];\n    },\n    getMahjongType: function getMahjongType(id) {\n        if (id >= 0 && id < 9) {\n            //筒\n            return 0;\n        } else if (id >= 9 && id < 18) {\n            //条\n            return 1;\n        } else if (id >= 18 && id < 27) {\n            //万\n            return 2;\n        } else if (id >= 27 && id < 34) {\n            //字一（东西南北中发白）\n            return 3;\n        } else if (id >= 34 && id < 42) {\n            //花一（春夏秋冬兰竹菊梅）\n            return 4;\n        }\n    },\n    getSpriteFrameByMJID: function getSpriteFrameByMJID(pre, mjid) {\n        var spriteFrameName = this.getMahjongSpriteByID(mjid);\n        spriteFrameName = pre + spriteFrameName;\n        if (pre == \"M_\") {\n            return this.bottomAtlas.getSpriteFrame(spriteFrameName);\n        } else if (pre == \"B_\") {\n            return this.bottomFoldAtlas.getSpriteFrame(spriteFrameName);\n        } else if (pre == \"L_\") {\n            return this.leftAtlas.getSpriteFrame(spriteFrameName);\n        } else if (pre == \"R_\") {\n            return this.rightAtlas.getSpriteFrame(spriteFrameName);\n        }\n    },\n    // 出牌声音对应id只有筒条万和东西南北中发白才有声音\n    getAudioURLByMJID: function getAudioURLByMJID(id) {\n        var paitype = this.getMahjongType(id);\n        console.log(\"牌的类型是:\" + paitype);\n        if (paitype >= 0 && paitype < 4) {\n            return \"nv/\" + id + \".mp3\";\n        } else {\n            return null;\n        }\n    },\n    getEmptySpriteFrame: function getEmptySpriteFrame(side) {\n        if (side == \"up\") {\n            return this.emptyAtlas.getSpriteFrame(\"e_mj_b_up\");\n        } else if (side == \"myself\") {\n            return this.emptyAtlas.getSpriteFrame(\"e_mj_b_bottom\");\n        } else if (side == \"left\") {\n            return this.emptyAtlas.getSpriteFrame(\"e_mj_b_left\");\n        } else if (side == \"right\") {\n            return this.emptyAtlas.getSpriteFrame(\"e_mj_b_right\");\n        }\n    },\n    getHoldsEmptySpriteFrame: function getHoldsEmptySpriteFrame(side) {\n        if (side == \"up\") {\n            return this.emptyAtlas.getSpriteFrame(\"e_mj_up\");\n        } else if (side == \"myself\") {\n            return null;\n        } else if (side == \"left\") {\n            return this.emptyAtlas.getSpriteFrame(\"e_mj_left\");\n        } else if (side == \"right\") {\n            return this.emptyAtlas.getSpriteFrame(\"e_mj_right\");\n        }\n    },\n    sortMJ: function sortMJ(mahjongs) {\n        var self = this;\n        mahjongs.sort(function (a, b) {\n            return a - b;\n        });\n    },\n    getSide: function getSide(localIndex) {\n        return this._sides[localIndex];\n    },\n    getPre: function getPre(localIndex) {\n        return this._pres[localIndex];\n    },\n    getFoldPre: function getFoldPre(localIndex) {\n        return this._foldPres[localIndex];\n    }\n});\n\ncc._RF.pop();","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/1a/1a6a1a7c-e8d1-4be8-a644-6429dbbbbb6d.js":{"source":"\"use strict\";\ncc._RF.push(module, '1a6a1p86NFL6KZEZCnbu7tt', 'ReplayMgr');\n// scripts/ReplayMgr.js\n\n\"use strict\";\n\nvar ACTION_CHUPAI = 1;\nvar ACTION_MOPAI = 2;\nvar ACTION_PENG = 3;\nvar ACTION_GANG = 4;\nvar ACTION_HU = 5;\nvar ACTION_CHI = 7;\nvar ACTION_CAISHEN = 8;\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        // foo: {\n        //    default: null,\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n        _lastAction: null,\n        _actionRecords: null,\n        _currentIndex: 0\n    },\n    // use this for initialization\n    onLoad: function onLoad() {},\n    clear: function clear() {\n        this._lastAction = null;\n        this._actionRecords = null;\n        this._currentIndex = 0;\n    },\n    init: function init(data) {\n        this._actionRecords = data.action_records;\n        if (this._actionRecords == null) {\n            this._actionRecords = {};\n        }\n        this._currentIndex = 0;\n        this._lastAction = null;\n    },\n    isReplay: function isReplay() {\n        return this._actionRecords != null;\n    },\n    getNextAction: function getNextAction() {\n        if (this._currentIndex >= this._actionRecords.length) {\n            return null;\n        }\n        var si = this._actionRecords[this._currentIndex++];\n        var action = this._actionRecords[this._currentIndex++];\n        var pai = this._actionRecords[this._currentIndex++];\n        return {\n            si: si,\n            type: action,\n            pai: pai\n        };\n    },\n    takeAction: function takeAction() {\n        var action = this.getNextAction();\n        if (this._lastAction != null && this._lastAction.type == ACTION_CHUPAI) {\n            if (action != null && action.type != ACTION_PENG && action.type != ACTION_GANG && action.type != ACTION_HU) {\n                cc.vv.gameNetMgr.doGuo(this._lastAction.si, this._lastAction.pai);\n            }\n        }\n        this._lastAction = action;\n        if (action == null) {\n            return -1;\n        }\n        var nextActionDelay = 1.0;\n        if (action.type == ACTION_CHUPAI) {\n            //console.log(\"chupai\");\n            cc.vv.gameNetMgr.doChupai(action.si, action.pai);\n            return 1.0;\n        } else if (action.type == ACTION_MOPAI) {\n            //console.log(\"mopai\");\n            cc.vv.gameNetMgr.doMopai(action.si, action.pai);\n            cc.vv.gameNetMgr.doTurnChange(action.si);\n            return 0.5;\n        } else if (action.type == ACTION_PENG) {\n            //console.log(\"peng\");\n            cc.vv.gameNetMgr.doPeng(action.si, action.pai);\n            cc.vv.gameNetMgr.doTurnChange(action.si);\n            return 1.0;\n        } else if (action.type == ACTION_GANG) {\n            //console.log(\"gang\");\n            cc.vv.gameNetMgr.dispatchEvent('hangang_notify', action.si);\n            cc.vv.gameNetMgr.doGang(action.si, action.pai);\n            cc.vv.gameNetMgr.doTurnChange(action.si);\n            return 1.0;\n        } else if (action.type == ACTION_HU) {\n            //console.log(\"hu\");\n            cc.vv.gameNetMgr.doHu({\n                seatindex: action.si,\n                hupai: action.pai,\n                iszimo: false\n            });\n            return 1.5;\n        } else if (action.type == ACTION_CHI) {\n            //console.log(\"chi\");\n            // \n            // var pd = {\n            //     \"pai\": pai,\n            //     \"chiArray\": chiArray\n            // };\n            var pai = action.pai[\"pai\"];\n            var chiArr = action.pai[\"chiArray\"];\n            for (var i = 0; i < chiArr.length; i++) {\n                if (chiArr[i] == pai) {\n                    chiArr.splice(i, 1);\n                }\n            }\n            cc.vv.gameNetMgr.doChi(action.si, pai, chiArr);\n            return 1.5;\n        } else if (action.type == ACTION_CAISHEN) {\n            cc.vv.gameNetMgr.doCaiShen(action.si, action.pai);\n            return 1.5;\n        }\n    }\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n    // },\n});\n\ncc._RF.pop();","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/74/74d78241-a877-4329-8ea1-72463662e2fe.js":{"source":"\"use strict\";\ncc._RF.push(module, '74d78JBqHdDKY6hckY2YuL+', 'UserMgr');\n// scripts/UserMgr.js\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        account: null,\n        userId: null,\n        userName: null,\n        lv: 0,\n        exp: 0,\n        coins: 0,\n        gems: 0,\n        sign: 0,\n        ip: \"\",\n        sex: 0,\n        roomData: null,\n        oldRoomId: null,\n        yaoqingUrl: null,\n        headimg: null,\n        shareRoomId: null,\n        yaoqing_key: null,\n        chargerate: null,\n        is_sign: 0,\n        sign_days: 0,\n        room_type: -1,\n        collapse_prise: 0,\n        is_first_charge: 0,\n        scene: -1,\n        e_roomid: 0,\n        exchange: 0,\n        reconnection: 0,\n        refreshTime: 30000\n    },\n    guestAuth: function guestAuth(param) {\n        this.loadSceneName = param;\n        var account = cc.args[\"account\"];\n        if (account == null) {\n            account = cc.sys.localStorage.getItem(\"account\");\n        }\n        if (account == null) {\n            account = Date.now();\n            cc.sys.localStorage.setItem(\"account\", account);\n        }\n        cc.vv.http.sendRequest(\"/guest\", {\n            account: account\n        }, this.onAuth);\n    },\n    onAuth: function onAuth(ret) {\n        var self = cc.vv.userMgr;\n        if (ret.errcode !== 0) {\n            console.log(ret.errmsg);\n        } else {\n            self.account = ret.account;\n            self.sign = ret.sign;\n            self.shareRoomId = ret.shareRoomId;\n            cc.vv.http.url = \"http://\" + cc.vv.SI.hall;\n            self.login();\n        }\n    },\n    // 登录\n    login: function login() {\n        var self = this;\n        var onLogin = function onLogin(ret) {\n            if (ret.errcode !== 0) {\n                console.log(ret.errmsg);\n            } else {\n                self.account = ret.account;\n                self.userId = ret.userid;\n                self.userName = ret.name;\n                self.lv = ret.lv;\n                self.exp = ret.exp;\n                self.coins = ret.coins;\n                self.gems = ret.gems;\n                self.roomData = ret.roomid;\n                self.room_type = ret.room_type;\n                self.sex = ret.sex;\n                self.ip = ret.ip;\n                self.headimg = ret.headimg;\n                self.yaoqingUrl = ret.yaoqingUrl;\n                self.yaoqing_key = ret.yaoqing_key;\n                self.is_sign = ret.is_sign;\n                self.sign_days = ret.sign_days;\n                self.collapse_prise = ret.collapse_prise;\n                self.is_first_charge = ret.is_first_charge;\n                self.modules = ret.modules; //显示模块\n                self.is_open_jbs = ret.is_open_jbs; //是否开放锦标赛\n                // TODO  充值兑换率\n                // self.chargerate = ret.chargerate;\n                var shareUrl = self.yaoqingUrl;\n                if (!cc.sys.isNative) {\n                    var roomvalid = self.shareRoomId || cc.vv.gameNetMgr.roomId || self.roomData;\n                    if (roomvalid) {\n                        shareUrl = shareUrl + roomvalid;\n                    } else {\n                        shareUrl = shareUrl + \"000000\";\n                    }\n                    if (window.wxFriend) {\n                        window.wxFriend.link = shareUrl;\n                        window.wxFriend.desc = self.userName + window.wxFriend.desc;\n                        window.shareMessage();\n                    }\n                }\n                if (self.loadSceneName) {\n                    cc.director.loadScene(self.loadSceneName);\n                } else {\n                    cc.director.loadScene(\"newhall\");\n                    cc.vv.http.sendRequest(\"/injinbiao\", {\n                        userId: self.userId\n                    }, function (data) {\n                        if (data.ip) {\n                            cc.vv.match_net.ip = data.ip + \":\" + data.port;\n                            console.log(\"?????\", cc.vv.match_net.ip);\n                            cc.vv.match_net.connect(function () {\n                                cc.vv.gameNetMgr.initHandlers(100);\n                                cc.vv.match_net.send(\"login\", { userid: self.userId });\n                            }, function () {});\n                        };\n                    });\n                }\n            }\n        };\n        // cc.vv.wc.show(\"正在登录游戏\");\n        cc.vv.http.sendRequest(\"/login\", {\n            account: this.account,\n            sign: this.sign\n        }, onLogin);\n    },\n    // 进入房间\n    enterRoom: function enterRoom(roomId, callback) {\n        var self = this;\n        var onEnter = function onEnter(ret) {\n            console.log('进入房间onEnter====>', ret);\n            if (ret.errcode !== 0) {\n                if (ret.errcode == -1) {\n                    setTimeout(function () {\n                        self.enterRoom(roomId, callback);\n                    }, 5000);\n                } else {\n                    cc.vv.wc.hide();\n                    if (callback != null) {\n                        callback(ret);\n                    }\n                }\n            } else {\n                if (callback != null) {\n                    callback(ret);\n                }\n                self.room_type = ret.room_type;\n                self.scene = ret.scene;\n                self.e_roomid = ret.roomid;\n                cc.vv.gameNetMgr.connectGameServer(ret);\n            }\n        };\n        var data = {\n            account: cc.vv.userMgr.account,\n            sign: cc.vv.userMgr.sign,\n            roomid: roomId\n        };\n        cc.vv.wc.show(\"正在进入房间 \" + roomId);\n        cc.vv.http.sendRequest(\"/enter_private_room\", data, onEnter);\n    },\n    // 获取历史战斗记录\n    getHistoryList: function getHistoryList(callback) {\n        var self = this;\n        var onGet = function onGet(ret) {\n            if (ret.errcode !== 0) {\n                console.log(ret.errmsg);\n            } else {\n                console.log(ret.history);\n                if (callback != null) {\n                    callback(ret.history);\n                }\n            }\n        };\n        var data = {\n            account: cc.vv.userMgr.account,\n            sign: cc.vv.userMgr.sign\n        };\n        cc.vv.http.sendRequest(\"/get_history_list\", data, onGet);\n    },\n    // 获取金币和钻石数量\n    getGemsAndCoins: function getGemsAndCoins(callback) {\n        var self = this;\n        var onGet = function onGet(ret) {\n            if (ret.errcode !== 0) {\n                console.log(ret.errmsg);\n            } else {\n                console.log(ret);\n                if (callback != null) {\n                    callback(ret);\n                }\n            }\n        };\n        var data = {\n            account: cc.vv.userMgr.account,\n            sign: cc.vv.userMgr.sign\n        };\n        cc.vv.http.sendRequest(\"/get_user_gems_and_coins\", data, onGet);\n    },\n    // 用户签到\n    setUserSign: function setUserSign(callback) {\n        var self = this;\n        var onGet = function onGet(ret) {\n            if (ret.errcode !== 0) {\n                console.log(ret.errmsg);\n            } else {\n                if (callback != null) {\n                    callback(ret.data);\n                }\n            }\n        };\n        var data = {\n            account: cc.vv.userMgr.account,\n            sign: cc.vv.userMgr.sign\n        };\n        cc.vv.http.sendRequest(\"/set_user_sign\", data, onGet);\n    },\n    // 获取签到礼物列表\n    getSignList: function getSignList(callback) {\n        var self = this;\n        var onGet = function onGet(ret) {\n            if (ret.errcode !== 0) {\n                console.log(ret.errmsg);\n            } else {\n                if (callback != null) {\n                    callback(ret.data);\n                }\n            }\n        };\n        var data = {\n            account: cc.vv.userMgr.account,\n            sign: cc.vv.userMgr.sign\n        };\n        cc.vv.http.sendRequest(\"/get_sign_list\", data, onGet);\n    },\n    getGamesOfRoom: function getGamesOfRoom(uuid, callback) {\n        var self = this;\n        var onGet = function onGet(ret) {\n            if (ret.errcode !== 0) {\n                console.log(ret.errmsg);\n            } else {\n                console.log(ret.data);\n                callback(ret.data);\n            }\n        };\n        var data = {\n            account: cc.vv.userMgr.account,\n            sign: cc.vv.userMgr.sign,\n            uuid: uuid\n        };\n        cc.vv.http.sendRequest(\"/get_games_of_room\", data, onGet);\n    },\n    getDetailOfGame: function getDetailOfGame(uuid, index, callback) {\n        var self = this;\n        var onGet = function onGet(ret) {\n            if (ret.errcode !== 0) {\n                console.log(ret.errmsg);\n            } else {\n                console.log(ret.data);\n                callback(ret.data);\n            }\n        };\n        var data = {\n            account: cc.vv.userMgr.account,\n            sign: cc.vv.userMgr.sign,\n            uuid: uuid,\n            index: index\n        };\n        cc.vv.http.sendRequest(\"/get_detail_of_game\", data, onGet);\n    }\n});\n\ncc._RF.pop();","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/b7/b717fcf0-c348-4dcc-8aaf-35b6f5b7dc31.js":{"source":"\"use strict\";\ncc._RF.push(module, 'b717fzww0hNzIqvNbb1t9wx', 'Utils');\n// scripts/Utils.js\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        // foo: {\n        //    default: null,      // The default value will be used only when the component attaching\n        //                           to a node for the first time\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n    },\n    addClickEvent: function addClickEvent(node, target, component, handler, isReplace) {\n        console.log(component + \":\" + handler);\n        var eventHandler = new cc.Component.EventHandler();\n        eventHandler.target = target;\n        eventHandler.component = component;\n        eventHandler.handler = handler;\n        var clickEvents = node.getComponent(cc.Button).clickEvents;\n        if (isReplace) {\n            //是否覆盖掉之前的事件\n            clickEvents[0] = eventHandler;\n        } else {\n            clickEvents.push(eventHandler);\n        }\n    },\n    addSlideEvent: function addSlideEvent(node, target, component, handler) {\n        var eventHandler = new cc.Component.EventHandler();\n        eventHandler.target = target;\n        eventHandler.component = component;\n        eventHandler.handler = handler;\n        var slideEvents = node.getComponent(cc.Slider).slideEvents;\n        slideEvents.push(eventHandler);\n    },\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n    // },\n    showJinbi: function showJinbi(jinbi, suffix) {\n        if (!suffix) {\n            suffix = \"万\";\n        }\n        var jinbi = parseFloat(jinbi);\n        if (jinbi >= 10000) {\n            jinbi /= 10000;\n            jinbi = jinbi + suffix;\n            return jinbi;\n        }\n        return jinbi;\n    },\n\n    checkRate: function checkRate(nubmer) {\n        //判断字符串是否为数字//\n        // 　　var re = /^[0-9]+.?[0-9]*$/;  \n        //判断正整数 /^[1-9]+[0-9]*]*$/ \n        var re = /^[0-9]+[0-9]*]*$/;\n        if (!re.test(nubmer)) {\n            return false;\n        }\n        return true;\n    }\n});\n\ncc._RF.pop();","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/1f/1f06645b-2c0c-4a18-966d-90314eda4abf.js":{"source":"\"use strict\";\ncc._RF.push(module, '1f066RbLAxKGJZtkDFO2kq/', 'VoiceMgr');\n// scripts/VoiceMgr.js\n\n\"use strict\";\n\nvar radix = 12;\nvar base = 128 - radix;\n\nfunction crypto(value) {\n    value -= base;\n    var h = Math.floor(value / radix) + base;\n    var l = value % radix + base;\n    return String.fromCharCode(h) + String.fromCharCode(l);\n}\nvar encodermap = {};\nvar decodermap = {};\nfor (var i = 0; i < 256; ++i) {\n    var code = null;\n    var v = i + 1;\n    if (v >= base) {\n        code = crypto(v);\n    } else {\n        code = String.fromCharCode(v);\n    }\n    encodermap[i] = code;\n    decodermap[code] = i;\n}\n\nfunction encode(data) {\n    var content = \"\";\n    var len = data.length;\n    var a = len >> 24 & 0xff;\n    var b = len >> 16 & 0xff;\n    var c = len >> 8 & 0xff;\n    var d = len & 0xff;\n    content += encodermap[a];\n    content += encodermap[b];\n    content += encodermap[c];\n    content += encodermap[d];\n    for (var i = 0; i < data.length; ++i) {\n        content += encodermap[data[i]];\n    }\n    return content;\n}\n\nfunction getCode(content, index) {\n    var c = content.charCodeAt(index);\n    if (c >= base) {\n        c = content.charAt(index) + content.charAt(index + 1);\n    } else {\n        c = content.charAt(index);\n    }\n    return c;\n}\n\nfunction decode(content) {\n    var index = 0;\n    var len = 0;\n    for (var i = 0; i < 4; ++i) {\n        var c = getCode(content, index);\n        index += c.length;\n        var v = decodermap[c];\n        len |= v << (3 - i) * 8;\n    }\n    var newData = new Uint8Array(len);\n    var cnt = 0;\n    while (index < content.length) {\n        var c = getCode(content, index);\n        index += c.length;\n        newData[cnt] = decodermap[c];\n        cnt++;\n    }\n    return newData;\n}\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        // foo: {\n        //    default: null,      // The default value will be used only when the component attaching\n        //                           to a node for the first time\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n        onPlayCallback: null,\n        _voiceMediaPath: null\n    },\n    // use this for initialization\n    init: function init() {\n        if (cc.sys.isNative) {\n            this._voiceMediaPath = jsb.fileUtils.getWritablePath() + \"/voicemsgs/\";\n            this.setStorageDir(this._voiceMediaPath);\n        }\n    },\n    prepare: function prepare(filename) {\n        cc.vv.audioMgr.pauseAll();\n        if (!cc.sys.isNative) {\n            window.startRecord();\n            return;\n        }\n        this.clearCache(filename);\n        if (cc.sys.os == cc.sys.OS_ANDROID) {\n            jsb.reflection.callStaticMethod(\"com/vivigames/voicesdk/VoiceRecorder\", \"prepare\", \"(Ljava/lang/String;)V\", filename);\n        } else if (cc.sys.os == cc.sys.OS_IOS) {\n            jsb.reflection.callStaticMethod(\"VoiceSDK\", \"prepareRecord:\", filename);\n        }\n    },\n    release: function release() {\n        cc.vv.audioMgr.resumeAll();\n        if (!cc.sys.isNative) {\n            window.stopRecord();\n            return;\n        }\n        if (cc.sys.os == cc.sys.OS_ANDROID) {\n            jsb.reflection.callStaticMethod(\"com/vivigames/voicesdk/VoiceRecorder\", \"release\", \"()V\");\n        } else if (cc.sys.os == cc.sys.OS_IOS) {\n            jsb.reflection.callStaticMethod(\"VoiceSDK\", \"finishRecord\");\n        }\n    },\n    cancel: function cancel() {\n        cc.vv.audioMgr.resumeAll();\n        if (!cc.sys.isNative) {\n            window.cancelRecord();\n            window.voice.localId = null;\n            return;\n        }\n        if (cc.sys.os == cc.sys.OS_ANDROID) {\n            jsb.reflection.callStaticMethod(\"com/vivigames/voicesdk/VoiceRecorder\", \"cancel\", \"()V\");\n        } else if (cc.sys.os == cc.sys.OS_IOS) {\n            jsb.reflection.callStaticMethod(\"VoiceSDK\", \"cancelRecord\");\n        }\n    },\n    writeVoice: function writeVoice(filename, voiceData) {\n        if (!cc.sys.isNative) {\n            return;\n        }\n        if (voiceData && voiceData.length > 0) {\n            var fileData = decode(voiceData);\n            var url = this._voiceMediaPath + filename;\n            this.clearCache(filename);\n            jsb.fileUtils.writeDataToFile(fileData, url);\n        }\n    },\n    clearCache: function clearCache(filename) {\n        if (cc.sys.isNative) {\n            var url = this._voiceMediaPath + filename;\n            //console.log(\"check file:\" + url);\n            if (jsb.fileUtils.isFileExist(url)) {\n                //console.log(\"remove:\" + url);\n                jsb.fileUtils.removeFile(url);\n            }\n            if (jsb.fileUtils.isFileExist(url + \".wav\")) {\n                //console.log(\"remove:\" + url + \".wav\");\n                jsb.fileUtils.removeFile(url + \".wav\");\n            }\n        }\n    },\n    play: function play(filename) {\n        if (!cc.sys.isNative) {\n            return;\n        }\n        cc.vv.audioMgr.pauseAll();\n        if (cc.sys.os == cc.sys.OS_ANDROID) {\n            jsb.reflection.callStaticMethod(\"com/vivigames/voicesdk/VoicePlayer\", \"play\", \"(Ljava/lang/String;)V\", filename);\n        } else if (cc.sys.os == cc.sys.OS_IOS) {\n            jsb.reflection.callStaticMethod(\"VoiceSDK\", \"play:\", filename);\n        } else {}\n    },\n    stop: function stop() {\n        if (!cc.sys.isNative) {\n            return;\n        }\n        cc.vv.audioMgr.resumeAll();\n        if (cc.sys.os == cc.sys.OS_ANDROID) {\n            jsb.reflection.callStaticMethod(\"com/vivigames/voicesdk/VoicePlayer\", \"stop\", \"()V\");\n        } else if (cc.sys.os == cc.sys.OS_IOS) {\n            jsb.reflection.callStaticMethod(\"VoiceSDK\", \"stopPlay\");\n        } else {}\n    },\n    getVoiceLevel: function getVoiceLevel(maxLevel) {\n        if (cc.sys.os == cc.sys.OS_ANDROID) {\n            return jsb.reflection.callStaticMethod(\"com/vivigames/voicesdk/VoiceRecorder\", \"getVoiceLevel\", \"(I)I\", maxLevel);\n        } else if (cc.sys.os == cc.sys.OS_IOS) {} else {\n            return Math.floor(Math.random() * maxLevel + 1);\n        }\n    },\n    getVoiceData: function getVoiceData(filename) {\n        if (cc.sys.isNative) {\n            var url = this._voiceMediaPath + filename;\n            console.log(\"getVoiceData:\" + url);\n            var fileData = jsb.fileUtils.getDataFromFile(url);\n            if (fileData) {\n                var content = encode(fileData);\n                return content;\n            }\n        }\n        return \"\";\n    },\n    download: function download() {},\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n    // },\n    setStorageDir: function setStorageDir(dir) {\n        if (!cc.sys.isNative) {\n            return;\n        }\n        if (cc.sys.os == cc.sys.OS_ANDROID) {\n            jsb.reflection.callStaticMethod(\"com/vivigames/voicesdk/VoiceRecorder\", \"setStorageDir\", \"(Ljava/lang/String;)V\", dir);\n        } else if (cc.sys.os == cc.sys.OS_IOS) {\n            jsb.reflection.callStaticMethod(\"VoiceSDK\", \"setStorageDir:\", dir);\n            if (!jsb.fileUtils.isDirectoryExist(dir)) {\n                jsb.fileUtils.createDirectory(dir);\n            }\n        }\n    }\n});\n\ncc._RF.pop();","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/71/716cdd90-2387-4ec7-961e-b0b3ade1b595.js":{"source":"\"use strict\";\ncc._RF.push(module, '716cd2QI4dOx5YesLOt4bWV', 'ZjhNetMgr');\n// scripts/ZjhNetMgr.js\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n    initHandlers: function initHandlers(GameNet) {\n        var self = GameNet;\n        cc.vv.net.addHandler(\"login_result\", function (data) {\n            console.log(data);\n            if (data.errcode === 0) {\n                var data = data.data;\n                self.roomId = data.roomid;\n                self.room_type = data.conf.room_type;\n                self.conf = data.conf;\n                self.maxNumOfGames = data.conf.maxGames;\n                self.numOfGames = data.numofgames;\n                self.seats = data.seats;\n                self.seatIndex = self.getSeatIndexByID(cc.vv.userMgr.userId);\n                self.isOver = false;\n            } else if (data.errcode === 4) {\n                //重新login\n                var data = data.data;\n                cc.vv.net.send('login', data);\n            } else {\n                console.log(data.errmsg);\n            }\n        });\n        cc.vv.net.addHandler(\"login_finished\", function (data) {\n            cc.director.loadScene(\"zjhgame\");\n        });\n        cc.vv.net.addHandler(\"exit_result\", function (data) {\n            self.roomId = null;\n            self.turn = -1;\n            self.seats = null;\n            if (data) {\n                //特殊情况下（锦标赛等）可以设置这里的data，在退出的时候进行操作\n                self.actionData = data;\n            }\n        });\n        cc.vv.net.addHandler(\"exit_notify_push\", function (data) {\n            var userId = data;\n            var s = self.getSeatByID(userId);\n            if (s != null) {\n                s.userid = 0;\n                s.name = \"\";\n                self.dispatchEvent(\"user_state_changed\", s);\n            }\n        });\n        cc.vv.net.addHandler(\"count_down_push\", function (data) {\n            self.dispatchEvent(\"count_down\", data);\n        });\n        cc.vv.net.addHandler(\"dispress_push\", function (data) {\n            self.roomId = null;\n            self.turn = -1;\n            self.seats = null;\n        });\n        cc.vv.net.addHandler(\"disconnect\", function (data) {\n            var actionData = self.actionData;\n            self.dispatchEvent(\"exit_room\");\n            if (self.roomId == null) {\n                if (actionData) {\n                    if (actionData.msg) {\n                        cc.vv.alert.show(\"提示\", actionData.msg);\n                    }\n                    setTimeout(function () {\n                        self.actionData = null;\n                        cc.director.loadScene(\"newhall\");\n                    }, actionData.delay * 1000);\n                } else {\n                    cc.director.loadScene(\"newhall\");\n                }\n                self.room_type = -1;\n            } else {\n                if (self.isOver == false) {\n                    cc.vv.userMgr.oldRoomId = self.roomId;\n                    self.dispatchEvent(\"disconnect\");\n                } else {\n                    self.roomId = null;\n                    self.room_type = -1;\n                }\n            }\n        });\n        cc.vv.net.addHandler(\"chat_push\", function (data) {\n            self.dispatchEvent(\"chat_push\", data);\n        });\n        cc.vv.net.addHandler(\"quick_chat_push\", function (data) {\n            self.dispatchEvent(\"quick_chat_push\", data);\n        });\n        cc.vv.net.addHandler(\"emoji_push\", function (data) {\n            self.dispatchEvent(\"emoji_push\", data);\n        });\n        cc.vv.net.addHandler(\"new_user_comes_push\", function (data) {\n            var seatIndex = data.seatindex;\n            if (self.seats[seatIndex].userid > 0) {\n                self.seats[seatIndex].online = true;\n            } else {\n                data.online = true;\n                self.seats[seatIndex] = data;\n            }\n            self.dispatchEvent('new_user', self.seats[seatIndex]);\n        });\n        cc.vv.net.addHandler(\"game_checkPai_push\", function (data) {\n            console.log(data);\n            self.dispatchEvent('kanpai', data);\n        });\n        cc.vv.net.addHandler(\"game_losed_push\", function (data) {\n            self.dispatchEvent('qipai', data);\n        });\n        cc.vv.net.addHandler(\"game_wannaToCompare_push\", function (data) {\n            self.dispatchEvent('game_wannaToCompare_push', data);\n        });\n        //弃牌通知 game_userInlosed_push\n        cc.vv.net.addHandler(\"game_userInlosed_push\", function (data) {\n            self.dispatchEvent('qiPai_notify', data);\n        });\n        cc.vv.net.addHandler(\"game_myTurn_push\", function (data) {\n            self.dispatchEvent('game_myTurn_push', data);\n        });\n        cc.vv.net.addHandler(\"game_turnChanged_push\", function (data) {\n            self.dispatchEvent('game_turnChanged_push', data);\n        });\n        cc.vv.net.addHandler(\"guo_notify_push\", function (data) {\n            self.dispatchEvent('guo_notify_push', data);\n        });\n        cc.vv.net.addHandler(\"game_myWin_push\", function (data) {\n            //我赢了\n            // self.dispatchEvent('win', data);\n        });\n        cc.vv.net.addHandler(\"gameOver_notify_push\", function (data) {\n            //游戏结束清除定时器\n            self.dispatchEvent('gameOver_notify_push', data);\n        });\n        cc.vv.net.addHandler(\"game_oneInWin_push\", function (data) {\n            //赢了\n            self.dispatchEvent('win', data);\n        });\n        cc.vv.net.addHandler(\"game_begin_push\", function (data) {\n            self.button = data;\n            self.turn = self.button;\n            self.gamestate = \"begin\";\n            self.dispatchEvent('game_begin', {\n                currentZhu: data.currentZhu,\n                turn: data.turn\n            });\n        });\n        cc.vv.net.addHandler(\"game_myMoney_push\", function (data) {\n            console.log('game_myMoney_push');\n            console.log(data);\n            self.dispatchEvent('game_myMoney', data);\n        });\n        //没钱了通知前端，让其退出\n        cc.vv.net.addHandler(\"game_noMoney_exit\", function (data) {\n            self.dispatchEvent('noMoney_exit', data);\n        });\n        //总注通知\n        cc.vv.net.addHandler(\"game_moneyPool_push\", function (data) {\n            console.log('game_moneyPool_push');\n            console.log(data);\n            self.dispatchEvent('game_moneyPool', data);\n        });\n        //跟注通知\n        cc.vv.net.addHandler(\"genZhu_notify_push\", function (data) {\n            console.log('genZhu_notify_push');\n            console.log(data);\n            self.dispatchEvent('genZhu_notify', data);\n        });\n        //看牌通知 game_oneInCheckPai_push\n        cc.vv.net.addHandler(\"game_oneInCheckPai_push\", function (data) {\n            console.log('game_oneInCheckPai_push');\n            console.log(data);\n            self.dispatchEvent('kanPai_notify', data);\n        });\n        //加注通知 jiaZhu_notify_push\n        cc.vv.net.addHandler(\"jiaZhu_notify_push\", function (data) {\n            console.log('jiaZhu_notify_push');\n            console.log(data);\n            self.dispatchEvent('jiaZhu_notify', data);\n        });\n        //提示消息通知\n        cc.vv.net.addHandler(\"message_notify_push\", function (data) {\n            console.log('message_notify_push');\n            console.log(data);\n            self.dispatchEvent('message_notify', data);\n        });\n        //轮数通知\n        cc.vv.net.addHandler(\"game_circleCount_push\", function (data) {\n            console.log('game_circleCount_push');\n            console.log(data);\n            self.dispatchEvent('game_circleCount', data);\n        });\n        //比牌结果通知 game_userInBipai_result_push\n        cc.vv.net.addHandler(\"game_userInBipai_result_push\", function (data) {\n            console.log('game_userInBipai_result_push');\n            console.log(data);\n            self.dispatchEvent('game_userInBipai_result', data);\n        });\n        cc.vv.net.addHandler(\"game_actionChanged_push\", function (data) {\n            self.dispatchEvent('game_actionChanged_push', data);\n        });\n        cc.vv.net.addHandler(\"game_AntiResults_push\", function (data) {\n            self.dispatchEvent('game_AntiResults', data);\n        });\n        cc.vv.net.addHandler(\"game_userInfoById_push\", function (data) {\n            if (data) {\n                self.dispatchEvent('game_userInfoById', data);\n            }\n        });\n        cc.vv.net.addHandler(\"match_exit_error\", function (data) {\n            self.dispatchEvent('match_exit_error');\n        });\n        cc.vv.net.addHandler(\"game_gameInfoById_push\", function (data) {\n            if (data) {\n                self.dispatchEvent('game_gameInfoById', data);\n            }\n        });\n        cc.vv.net.addHandler(\"game_sbInAllIn_push\", function (data) {\n            if (data) {\n                self.dispatchEvent('game_sbInAllIn', data);\n            }\n        });\n    }\n});\n\ncc._RF.pop();","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/c1/c1255dec-c42c-46fe-89f4-073eeb917d1f.js":{"source":"\"use strict\";\ncc._RF.push(module, 'c12553sxCxG/on0Bz7rkX0f', 'Alert');\n// scripts/components/Alert.js\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        // foo: {\n        //    default: null,      // The default value will be used only when the component attaching\n        //                           to a node for the first time\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n        _alert: null,\n        _btnOK: null,\n        _btnCancel: null,\n        _title: null,\n        _content: null,\n        _onok: null\n    },\n    // use this for initialization\n    onLoad: function onLoad() {\n        if (cc.vv == null) {\n            return;\n        }\n        this._alert = cc.find(\"Canvas/alert\");\n        this._title = cc.find(\"Canvas/alert/title\").getComponent(cc.Label);\n        this._content = cc.find(\"Canvas/alert/content\").getComponent(cc.Label);\n        this._btnOK = cc.find(\"Canvas/alert/btn_ok\");\n        this._btnCancel = cc.find(\"Canvas/alert/btn_cancel\");\n        cc.vv.utils.addClickEvent(this._btnOK, this.node, \"Alert\", \"onBtnClicked\");\n        cc.vv.utils.addClickEvent(this._btnCancel, this.node, \"Alert\", \"onBtnClicked\");\n        this._alert.active = false;\n        cc.vv.alert = this;\n    },\n    onBtnClicked: function onBtnClicked(event) {\n        if (event.target.name == \"btn_ok\") {\n            if (this._onok) {\n                this._onok();\n            }\n        }\n        this._alert.active = false;\n        this._onok = null;\n    },\n    show: function show(title, content, onok, needcancel) {\n        this._alert.active = true;\n        this._onok = onok;\n        this._title.string = title;\n        this._content.string = content;\n        if (needcancel) {\n            this._btnCancel.active = true;\n            this._btnOK.x = -150;\n            this._btnCancel.x = 150;\n        } else {\n            this._btnCancel.active = false;\n            this._btnOK.x = 0;\n        }\n    },\n    onDestory: function onDestory() {\n        if (cc.vv) {\n            cc.vv.alert = null;\n        }\n    }\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n    // },\n});\n\ncc._RF.pop();","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/09/0957530d-fc2c-47f7-b1f1-a5295bba8f39.js":{"source":"\"use strict\";\ncc._RF.push(module, '09575MN/CxH97HxpSlbuo85', 'Announcement');\n// scripts/components/Announcement.js\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        ima1: {\n            type: cc.SpriteFrame,\n            default: null\n        },\n        ima2: {\n            type: cc.SpriteFrame,\n            default: null\n        },\n        lContent: cc.Node,\n        rContent: cc.Node\n    },\n    onLoad: function onLoad() {},\n    onBtnSwitch: function onBtnSwitch(event) {\n        for (var i = 0; i < this.lContent.children.length; i++) {\n            if (i == event.target.getSiblingIndex()) {\n                this.lContent.children[i].getComponent(\"cc.Sprite\").spriteFrame = this.ima1;\n                this.rContent.children[i].active = true;\n            } else {\n                this.lContent.children[i].getComponent(\"cc.Sprite\").spriteFrame = this.ima2;\n                this.rContent.children[i].active = false;\n            }\n        }\n    },\n    refreshAnnouncement: function refreshAnnouncement() {\n        for (var i = 0; i < this.lContent.children.length; i++) {\n            cc.vv.utils.addClickEvent(this.lContent.children[i], this.node, \"Announcement\", \"onBtnSwitch\");\n        };\n    },\n    getAnnouncement: function getAnnouncement() {\n        var self = this;\n        var fn = function fn(ret) {\n            if (ret.errcode) {\n                console.log(\"没有公告\");\n            } else {\n                var i = 0;\n                var y = self.lContent.children[0].y;\n                var h = self.lContent.children[0].height;\n                var node1 = self.lContent.children[0];\n                var node2 = self.rContent.children[0];\n                self.lContent.removeAllChildren();\n                self.rContent.removeAllChildren();\n                for (var key in ret) {\n                    var n1 = cc.instantiate(node1);\n                    var n2 = cc.instantiate(node2);\n                    n1.getChildByName('label').getComponent(cc.Label).string = ret[key].title;\n                    n2.getChildByName('notice_title2').getChildByName('label').getComponent(cc.Label).string = ret[key].title;\n                    n2.getChildByName('richtext').getComponent(cc.RichText).string = ret[key].content;\n                    n1.y = y - i * (20 + h);\n                    if (i != 0) {\n                        n2.active = false;\n                        n1.getComponent(\"cc.Sprite\").spriteFrame = self.ima2;\n                    } else {\n                        n2.active = true;\n                        n1.getComponent(\"cc.Sprite\").spriteFrame = self.ima1;\n                    }\n                    self.lContent.addChild(n1);\n                    self.rContent.addChild(n2);\n                    i++;\n                }\n                self.refreshAnnouncement();\n            }\n        };\n        var data = {\n            account: cc.vv.userMgr.account,\n            sign: cc.vv.userMgr.sign\n        };\n        cc.vv.http.sendRequest(\"/get_announcement\", data, fn);\n    },\n    onBtnClose: function onBtnClose() {\n        this.node.active = false;\n    },\n    update: function update(dt) {}\n});\n\ncc._RF.pop();","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/55/55caea5c-a6f1-4ae6-bd00-c797fc8ecb38.js":{"source":"\"use strict\";\ncc._RF.push(module, '55caepcpvFK5r0Ax5f8jss4', 'AudioMgr');\n// scripts/AudioMgr.js\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        bgmVolume: 1.0,\n        sfxVolume: 1.0,\n        bgmAudioID: -1\n    },\n    // use this for initialization\n    init: function init() {\n        var t = cc.sys.localStorage.getItem(\"bgmVolume\");\n        if (t != null && t > 0) {\n            this.bgmVolume = parseFloat(t);\n        } else {\n            cc.sys.localStorage.setItem(\"bgmVolume\", 1.0);\n        };\n        var t = cc.sys.localStorage.getItem(\"sfxVolume\");\n        if (t != null && t > 0) {\n            this.sfxVolume = parseFloat(t);\n        } else {\n            cc.sys.localStorage.setItem(\"sfxVolume\", 1.0);\n        };\n        cc.game.on(cc.game.EVENT_HIDE, function () {\n            console.log(\"cc.audioEngine.pauseAll\");\n            cc.audioEngine.pauseAll();\n        });\n        cc.game.on(cc.game.EVENT_SHOW, function () {\n            console.log(\"cc.audioEngine.resumeAll\");\n            cc.audioEngine.resumeAll();\n        });\n    },\n    getUrl: function getUrl(url) {\n        return cc.url.raw(\"resources/sounds/\" + url);\n    },\n    playBGM: function playBGM(url) {\n        var audioUrl = this.getUrl(url);\n        console.log(audioUrl);\n        if (this.bgmAudioID >= 0) {\n            cc.audioEngine.stop(this.bgmAudioID);\n        }\n        this.bgmAudioID = cc.audioEngine.play(audioUrl, true, this.bgmVolume);\n        var t = cc.sys.localStorage.getItem(\"bgmVolume\");\n        if (t == null) {\n            t = 0;\n        }\n        console.log('当前音量是多少' + t);\n        this.setBGMVolume(t);\n        // alert(\"当前的id是--\"+this.bgmAudioID);\n    },\n    playSFX: function playSFX(url) {\n        var audioUrl = this.getUrl(url);\n        if (this.sfxVolume > 0) {\n            var audioId = cc.audioEngine.play(audioUrl, false, this.sfxVolume);\n        }\n    },\n\n    setSFXVolume: function setSFXVolume(v) {\n        if (this.sfxVolume != v) {\n            cc.sys.localStorage.setItem(\"sfxVolume\", v);\n            this.sfxVolume = v;\n        }\n    },\n    setBGMVolume: function setBGMVolume(v, force) {\n        if (this.bgmAudioID >= 0) {\n            if (v > 0) {\n                cc.audioEngine.resume(this.bgmAudioID);\n            } else {\n                cc.audioEngine.pause(this.bgmAudioID);\n            }\n            //cc.audioEngine.setVolume(this.bgmAudioID,this.bgmVolume);\n        }\n        if (this.bgmVolume != v || force) {\n            cc.sys.localStorage.setItem(\"bgmVolume\", v);\n            this.bgmVolume = v;\n            cc.audioEngine.setVolume(this.bgmAudioID, v);\n        }\n    },\n    pauseAll: function pauseAll() {\n        cc.audioEngine.pauseAll();\n    },\n    resumeAll: function resumeAll() {\n        cc.audioEngine.resumeAll();\n    }\n});\n\ncc._RF.pop();","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/51/51026f7a-a298-4b99-924e-f1774056c619.js":{"source":"\"use strict\";\ncc._RF.push(module, '5102696ophLmZJO8XdAVsYZ', 'Charge');\n// scripts/components/Charge.js\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        _charge: null,\n        // 标题\n        _title: null,\n        // 确认按钮\n        _btnOK: null,\n        // 取消按钮\n        _btnCancel: null,\n        // 输入框\n        _editbox: null,\n        // 显示输入的金币数量\n        _content: null,\n        // 显示兑换率\n        _rateTxt: null,\n        _chargeCnt: null,\n        _rate: 1,\n        _costRMB: 0,\n        // 最少充值数量\n        _MINCOST: 1,\n        _MAXCOSTRMB: 99999,\n        _payParam: null\n    },\n    // use this for initialization\n    onLoad: function onLoad() {\n        if (cc.vv == null) {\n            return;\n        }\n        this.initUI();\n        //FIXME:  当前的兑换率是\n        this.refreshInfo();\n        cc.vv.charge = this;\n    },\n    initUI: function initUI() {\n        this._charge = cc.find(\"Canvas/charge\");\n        this._title = cc.find(\"Canvas/charge/title\").getComponent(cc.Label);\n        this._btnOK = cc.find(\"Canvas/charge/btn_ok\").getComponent(cc.Button);\n        this._btnCancel = cc.find(\"Canvas/charge/btn_cancel\").getComponent(cc.Button);\n        this._editbox = cc.find(\"Canvas/charge/editbox\").getComponent(cc.EditBox);\n        this._content = cc.find(\"Canvas/charge/content\").getComponent(cc.Label);\n        this._rateTxt = cc.find(\"Canvas/charge/rate\").getComponent(cc.Label);\n    },\n    onCloseBtnClicked: function onCloseBtnClicked() {\n        console.log(\"关闭界面\");\n        this._editbox.string = \"\";\n        this._charge.active = false;\n        cc.vv.wc.hide();\n    },\n    onConfirmBtnClicked: function onConfirmBtnClicked() {\n        this.refreshInfo();\n        // 验证是不是整数，不是整数要求重新输入\n        console.log(\"金额是\", this._costRMB);\n        var flag = this.validateIntNum(this._costRMB);\n        if (!flag) {\n            var str = \"请输入整数金额,且最小充值金额\" + this._MINCOST + \"元\";\n            cc.vv.alert.show(\"注意\", str);\n        } else {\n            var fn = function fn(ret) {\n                cc.vv.wc.hide();\n                if (ret == null) {\n                    cc.vv.alert.show(\"注意\", \"充值失败请稍后重试\");\n                    return;\n                }\n                this.sendChargeRequest(ret);\n                cc.vv.wc.show(\"正在充值，请稍后\");\n                cc.vv.userMgr.refreshTime = 2000;\n            };\n            var data = {\n                account: cc.vv.userMgr.account,\n                sign: cc.vv.userMgr.sign,\n                userid: cc.vv.userMgr.userId,\n                costRMB: this._costRMB,\n                ship_type: 0\n            };\n            cc.vv.wc.show(\"正在充值，请稍后\");\n            cc.vv.http.sendRequest(\"/go_to_charge\", data, fn.bind(this));\n        }\n    },\n    show: function show() {\n        this._charge.active = true;\n    },\n    refreshInfo: function refreshInfo() {\n        this._rate = 1 || cc.vv.userMgr.chargerate;\n        this._costRMB = Number(this._editbox.string);\n        console.log('this.cost', this._costRMB);\n        // this._chargeCnt = (this._chargeCnt * this._rate).toFixed(0);\n        if (!this._costRMB) {\n            this._content.string = \"您当前未输入充值金额\";\n        } else {\n            this._content.string = \"您输入的金额是:\" + this._costRMB;\n        }\n    },\n    // 判断是不是输入的正确的金额\n    validateIntNum: function validateIntNum(val) {\n        var patten = /^[1-9]\\d*$/;\n        var flag = patten.test(val);\n        if (!flag) {\n            return false;\n        } else {\n            console.log(\"当前输入的数字是正整数\", val, this._MINCOST);\n            return val >= this._MINCOST;\n        }\n    },\n    // 发送申请充值请求\n    sendChargeRequest: function sendChargeRequest(data) {\n        if (data == null) {\n            cc.vv.alert.show(\"注意\", \"充值失败请稍后重试\");\n            return;\n        }\n        console.log(\"发送 充值请求\");\n        var url = \"http://mj.yajugame.com/manage1/?/go/index/payDo/\";\n        var xhr = cc.loader.getXMLHttpRequest();\n        xhr.open(\"POST\", url, true);\n        xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n        xhr.onreadystatechange = function () {\n            if (xhr.readyState == 4 && xhr.status >= 200 && xhr.status <= 207) {\n                var httpStatus = xhr.statusText;\n                var response = JSON.parse(xhr.responseText);\n                console.log(\"返回！！！！！\" + response.errmsg + \"response.errcode:\" + response.errcode);\n                if (response.errcode == 0) {\n                    var ret = response.errmsg;\n                    console.log(\"返回的结果是!!!!!!\" + ret);\n                    this._payParam = ret;\n                    if (!cc.sys.isNative) {\n                        console.log(\"是H5游戏\");\n                        window.pay(this._payParam);\n                    }\n                    // 接收完后，隐藏充值窗口\n                    this.onCloseBtnClicked();\n                } else {\n                    cc.vv.alert.show(\"注意\", \"充值失败请稍后重试\");\n                    cc.vv.wc.hide();\n                    console.log(\"返回的结果出错\");\n                }\n            } else {\n                console.log(\"无结果返回\");\n            }\n        }.bind(this);\n        xhr.timeout = 5000; // 5 seconds for timeout\n        var req = JSON.stringify(data);\n        xhr.send(req);\n    }\n});\n\ncc._RF.pop();","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/13/13f267bf-e5e5-4559-b639-df5d769ee1c5.js":{"source":"\"use strict\";\ncc._RF.push(module, '13f26e/5eVFWbY53112nuHF', 'ChargeType');\n// scripts/components/ChargeType.js\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        _charge: null,\n        // 标题\n        _title: null,\n        // 确认按钮\n        _btnOK: null,\n        // 取消按钮\n        _btnCancel: null,\n        // 输入框\n        _editbox: null,\n        // 显示输入的金币数量\n        _content: null,\n        // 显示兑换率\n        _rateTxt: null,\n        _chargeCnt: null,\n        _rate: 1,\n        _costRMB: 0,\n        // 最少充值数量\n        _MINCOST: 1,\n        _MAXCOSTRMB: 99999,\n        _payParam: null\n    },\n    // use this for initialization\n    onLoad: function onLoad() {\n        if (cc.vv == null) {\n            return;\n        }\n        this.initUI();\n        //FIXME:  当前的兑换率是\n        this.refreshInfo();\n        cc.vv.chargeType = this;\n    },\n    initUI: function initUI() {\n        this._charge = cc.find(\"Canvas/zuanshiChange\");\n        this._btnOK = cc.find(\"Canvas/zuanshiChange/yes\").getComponent(cc.Button);\n        this._btnCancel = cc.find(\"Canvas/zuanshiChange/no\").getComponent(cc.Button);\n        this._editbox = cc.find(\"Canvas/zuanshiChange/editbox\").getComponent(cc.EditBox);\n    },\n    onCloseBtnClicked: function onCloseBtnClicked() {\n        console.log(\"关闭界面\");\n        this._editbox.string = \"\";\n        this._charge.active = false;\n        cc.vv.wc.hide();\n    },\n    onConfirmBtnClicked: function onConfirmBtnClicked() {\n        this.refreshInfo();\n        // 验证是不是整数，不是整数要求重新输入\n        console.log(\"金额是\", this._costRMB);\n        var flag = this.validateIntNum(this._costRMB);\n        if (!flag) {\n            var str = \"请输入整数金额,且最小充值金额\" + this._MINCOST + \"元\";\n            cc.vv.alert.show(\"注意\", str);\n        } else {\n            var fn = function fn(ret) {\n                cc.vv.wc.hide();\n                if (ret == null) {\n                    cc.vv.alert.show(\"注意\", \"充值失败请稍后重试\");\n                    return;\n                }\n                this.sendChargeRequest(ret);\n                cc.vv.wc.show(\"正在充值，请稍后\");\n                cc.vv.userMgr.refreshTime = 2000;\n            };\n            var data = {\n                account: cc.vv.userMgr.account,\n                sign: cc.vv.userMgr.sign,\n                userid: cc.vv.userMgr.userId,\n                costRMB: this._costRMB,\n                ship_type: 1\n            };\n            cc.vv.wc.show(\"正在充值，请稍后\");\n            cc.vv.http.sendRequest(\"/go_to_charge\", data, fn.bind(this));\n        }\n    },\n    show: function show() {\n        this._charge.active = true;\n    },\n    refreshInfo: function refreshInfo() {\n        this._rate = 1 || cc.vv.userMgr.chargerate;\n        this._costRMB = Number(this._editbox.string);\n        console.log('this.cost', this._costRMB);\n        // this._chargeCnt = (this._chargeCnt * this._rate).toFixed(0);\n        // if (!this._costRMB) {\n        //     this._content.string = \"您当前未输入充值金额\";\n        // } else {\n        //     this._content.string = \"您输入的金额是:\" + this._costRMB;\n        // }\n    },\n    // 判断是不是输入的正确的金额\n    validateIntNum: function validateIntNum(val) {\n        var patten = /^[1-9]\\d*$/;\n        var flag = patten.test(val);\n        if (!flag) {\n            return false;\n        } else {\n            console.log(\"当前输入的数字是正整数\", val, this._MINCOST);\n            return val >= this._MINCOST;\n        }\n    },\n    // 发送申请充值请求\n    sendChargeRequest: function sendChargeRequest(data) {\n        if (data == null) {\n            cc.vv.alert.show(\"注意\", \"充值失败请稍后重试\");\n            return;\n        }\n        console.log(\"发送 充值请求\");\n        var url = data.url;\n        var xhr = cc.loader.getXMLHttpRequest();\n        xhr.open(\"POST\", url, true);\n        xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n        xhr.onreadystatechange = function () {\n            if (xhr.readyState == 4 && xhr.status >= 200 && xhr.status <= 207) {\n                var httpStatus = xhr.statusText;\n                var response = JSON.parse(xhr.responseText);\n                console.log(\"返回！！！！！\" + response.errmsg + \"response.errcode:\" + response.errcode);\n                if (response.errcode == 0) {\n                    var ret = response.errmsg;\n                    console.log(\"返回的结果是!!!!!!\" + ret);\n                    this._payParam = ret;\n                    if (!cc.sys.isNative) {\n                        console.log(\"是H5游戏\");\n                        window.pay(this._payParam);\n                    }\n                    // 接收完后，隐藏充值窗口\n                    this.onCloseBtnClicked();\n                } else {\n                    cc.vv.alert.show(\"注意\", \"充值失败请稍后重试\");\n                    cc.vv.wc.hide();\n                    console.log(\"返回的结果出错\");\n                }\n            } else {\n                console.log(\"无结果返回\");\n            }\n        }.bind(this);\n        xhr.timeout = 5000; // 5 seconds for timeout\n        var req = JSON.stringify(data);\n        xhr.send(req);\n    }\n});\n\ncc._RF.pop();","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/58/58f27af1-bacb-4db1-8951-5f77ebc8df17.js":{"source":"\"use strict\";\ncc._RF.push(module, '58f27rxustNsYlRX3fryN8X', 'Chat');\n// scripts/components/Chat.js\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        // foo: {\n        //    default: null,\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n        _chatRoot: null,\n        _tabQuick: null,\n        _tabEmoji: null,\n        _iptChat: null,\n        _quickChatInfo: null,\n        _btnChat: null\n    },\n    // use this for initialization\n    onLoad: function onLoad() {\n        if (cc.vv == null) {\n            return;\n        }\n        cc.vv.chat = this;\n        this._btnChat = this.node.getChildByName(\"btn_chat\");\n        this._btnChat.active = cc.vv.replayMgr.isReplay() == false;\n        this._chatRoot = this.node.getChildByName(\"chat\");\n        this._chatRoot.active = false;\n        this._tabQuick = this._chatRoot.getChildByName(\"quickchatlist\");\n        this._tabEmoji = this._chatRoot.getChildByName(\"emojis\");\n        this._iptChat = this._chatRoot.getChildByName(\"iptChat\").getComponent(cc.EditBox);\n        this._quickChatInfo = {};\n        this._quickChatInfo[\"item0\"] = {\n            index: 0,\n            content: \"快点啊，都等到我花儿都谢谢了！\",\n            sound: \"fix_msg_1.mp3\"\n        };\n        this._quickChatInfo[\"item1\"] = {\n            index: 1,\n            content: \"怎么又断线了，网络怎么这么差啊！\",\n            sound: \"fix_msg_2.mp3\"\n        };\n        this._quickChatInfo[\"item2\"] = {\n            index: 2,\n            content: \"不要走，决战到天亮！\",\n            sound: \"fix_msg_3.mp3\"\n        };\n        this._quickChatInfo[\"item3\"] = {\n            index: 3,\n            content: \"你的牌打得也太好了！\",\n            sound: \"fix_msg_4.mp3\"\n        };\n        this._quickChatInfo[\"item4\"] = {\n            index: 4,\n            content: \"你是妹妹还是哥哥啊？\",\n            sound: \"fix_msg_5.mp3\"\n        };\n        this._quickChatInfo[\"item5\"] = {\n            index: 5,\n            content: \"和你合作真是太愉快了！\",\n            sound: \"fix_msg_6.mp3\"\n        };\n        this._quickChatInfo[\"item6\"] = {\n            index: 6,\n            content: \"大家好，很高兴见到各位！\",\n            sound: \"fix_msg_7.mp3\"\n        };\n        this._quickChatInfo[\"item7\"] = {\n            index: 7,\n            content: \"各位，真是不好意思，我得离开一会儿。\",\n            sound: \"fix_msg_8.mp3\"\n        };\n        this._quickChatInfo[\"item8\"] = {\n            index: 8,\n            content: \"不要吵了，专心玩游戏吧！\",\n            sound: \"fix_msg_9.mp3\"\n        };\n    },\n    getQuickChatInfo: function getQuickChatInfo(index) {\n        var key = \"item\" + index;\n        return this._quickChatInfo[key];\n    },\n\n    onBtnChatClicked: function onBtnChatClicked() {\n        this._chatRoot.active = true;\n    },\n    onBgClicked: function onBgClicked() {\n        this._chatRoot.active = false;\n    },\n    onTabClicked: function onTabClicked(event) {\n        if (event.target.name == \"tabQuick\") {\n            this._tabQuick.active = true;\n            this._tabEmoji.active = false;\n        } else if (event.target.name == \"tabEmoji\") {\n            this._tabQuick.active = false;\n            this._tabEmoji.active = true;\n        }\n    },\n    onQuickChatItemClicked: function onQuickChatItemClicked(event) {\n        this._chatRoot.active = false;\n        var info = this._quickChatInfo[event.target.name];\n        cc.vv.net.send(\"quick_chat\", info.index);\n    },\n    onEmojiItemClicked: function onEmojiItemClicked(event) {\n        console.log(event.target.name);\n        this._chatRoot.active = false;\n        cc.vv.net.send(\"emoji\", event.target.name);\n    },\n    onBtnSendChatClicked: function onBtnSendChatClicked() {\n        this._chatRoot.active = false;\n        if (this._iptChat.string == \"\") {\n            return;\n        }\n        cc.vv.net.send(\"chat\", this._iptChat.string);\n        this._iptChat.string = \"\";\n    }\n});\n\ncc._RF.pop();","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/dc/dc9e585c-7a01-4116-96e1-d02c14170f15.js":{"source":"\"use strict\";\ncc._RF.push(module, 'dc9e5hcegFBFpbh0CwUFw8V', 'CheckBox');\n// scripts/components/CheckBox.js\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        // foo: {\n        //    default: null,\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n        target: cc.Node,\n        sprite: cc.SpriteFrame,\n        checkedSprite: cc.SpriteFrame,\n        checked: false\n    },\n    // use this for initialization\n    onLoad: function onLoad() {\n        this.refresh();\n    },\n    onClicked: function onClicked() {\n        this.checked = !this.checked;\n        this.refresh();\n    },\n    refresh: function refresh() {\n        var targetSprite = this.target.getComponent(cc.Sprite);\n        if (this.checked) {\n            targetSprite.spriteFrame = this.checkedSprite;\n        } else {\n            targetSprite.spriteFrame = this.sprite;\n        }\n    }\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n    // },\n});\n\ncc._RF.pop();","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/ee/eec071ec-2f8a-419f-9fcf-893dd26017b0.js":{"source":"\"use strict\";\ncc._RF.push(module, 'eec07HsL4pBn5/PiT3SYBew', 'CreateRoom');\n// scripts/components/CreateRoom.js\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        _difenxuanze: null,\n        _zimo: null,\n        _wanfaxuanze: null,\n        _jushuxuanze: null,\n        _dianganghua: null\n    },\n    // use this for initialization\n    onLoad: function onLoad() {\n        this._difenxuanze = [];\n        var t = this.node.getChildByName(\"difenxuanze\");\n        for (var i = 0; i < t.childrenCount; ++i) {\n            var n = t.children[i].getComponent(\"RadioButton\");\n            if (n != null) {\n                this._difenxuanze.push(n);\n            }\n        }\n        console.log(this._difenxuanze);\n        this._wanfaxuanze = [];\n        var t = this.node.getChildByName(\"wanfaxuanze\");\n        for (var i = 0; i < t.childrenCount; ++i) {\n            var n = t.children[i].getComponent(\"CheckBox\");\n            if (n != null) {\n                this._wanfaxuanze.push(n);\n            }\n        }\n        console.log(this._wanfaxuanze);\n        this._jushuxuanze = [];\n        var t = this.node.getChildByName(\"xuanzejushu\");\n        for (var i = 0; i < t.childrenCount; ++i) {\n            var n = t.children[i].getComponent(\"RadioButton\");\n            if (n != null) {\n                this._jushuxuanze.push(n);\n            }\n        }\n    },\n    onBtnBack: function onBtnBack() {\n        this.node.active = false;\n    },\n    onBtnOK: function onBtnOK() {\n        this.node.active = false;\n        this.createRoom();\n    },\n    createRoom: function createRoom() {\n        var self = this;\n        var onCreate = function onCreate(ret) {\n            if (ret.errcode !== 0) {\n                cc.vv.wc.hide();\n                //console.log(ret.errmsg);\n                if (ret.errcode == 2222) {\n                    cc.vv.alert.show(\"提示\", \"金币不足，创建房间失败!\");\n                } else {\n                    cc.vv.alert.show(\"提示\", \"创建房间失败,错误码:\" + ret.errcode);\n                }\n            } else {\n                cc.vv.userMgr.room_type = 0;\n                cc.vv.gameNetMgr.connectGameServer(ret);\n            }\n        };\n        var difen = 0;\n        for (var i = 0; i < self._difenxuanze.length; ++i) {\n            if (self._difenxuanze[i].checked) {\n                difen = i;\n                break;\n            }\n        }\n        var yikouxiang = self._wanfaxuanze[0].checked;\n        var yipaoduoxiang = self._wanfaxuanze[1].checked;\n        // 类型选择一口香，默认设置不可修改\n        var type = \"ykx\";\n        var jushuxuanze = 0;\n        for (var i = 0; i < self._jushuxuanze.length; ++i) {\n            if (self._jushuxuanze[i].checked) {\n                jushuxuanze = i;\n                break;\n            }\n        }\n        var conf = {\n            room_type: 0, //0代表麻将房间\n            type: type,\n            difen: difen,\n            jushuxuanze: jushuxuanze,\n            yipaoduoxiang: yipaoduoxiang\n        };\n        var data = {\n            account: cc.vv.userMgr.account,\n            sign: cc.vv.userMgr.sign,\n            conf: JSON.stringify(conf)\n        };\n        console.log(data);\n        cc.vv.wc.show(\"正在创建房间\");\n        cc.vv.http.sendRequest(\"/create_private_room\", data, onCreate);\n    }\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n    // },\n});\n\ncc._RF.pop();","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/4f/4f606a29-80bd-4de0-ae80-b1a4e0c8aeec.js":{"source":"\"use strict\";\ncc._RF.push(module, '4f606opgL1N4K6AsaTgyK7s', 'Set');\n// scripts/components/Set.js\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        voice: cc.Node,\n        help: cc.Node,\n        _btnYXOpen: null,\n        _btnYXClose: null,\n        _btnYYOpen: null,\n        _btnYYClose: null\n    },\n    // use this for initialization\n    onLoad: function onLoad() {\n        if (cc.vv == null) {\n            return;\n        }\n        this._btnYXOpen = this.node.getChildByName(\"voice\").getChildByName(\"jbs_details\").getChildByName(\"sound_on\");\n        this._btnYXClose = this.node.getChildByName(\"voice\").getChildByName(\"jbs_details\").getChildByName(\"sound_off\");\n        this._btnYYOpen = this.node.getChildByName(\"voice\").getChildByName(\"jbs_details\").getChildByName(\"music_on\");\n        this._btnYYClose = this.node.getChildByName(\"voice\").getChildByName(\"jbs_details\").getChildByName(\"music_off\");\n        cc.vv.utils.addClickEvent(this._btnYXOpen, this.node, \"Set\", \"onBtnClicked\");\n        cc.vv.utils.addClickEvent(this._btnYXClose, this.node, \"Set\", \"onBtnClicked\");\n        cc.vv.utils.addClickEvent(this._btnYYOpen, this.node, \"Set\", \"onBtnClicked\");\n        cc.vv.utils.addClickEvent(this._btnYYClose, this.node, \"Set\", \"onBtnClicked\");\n        this.refreshVolume();\n    },\n    refreshVolume: function refreshVolume() {\n        this._btnYXClose.active = cc.vv.audioMgr.sfxVolume > 0;\n        this._btnYXOpen.active = !this._btnYXClose.active;\n        this._btnYYClose.active = cc.vv.audioMgr.bgmVolume > 0;\n        this._btnYYOpen.active = !this._btnYYClose.active;\n    },\n    onBtnClicked: function onBtnClicked(event) {\n        if (event.target.name == \"guanbi\") {\n            this.node.active = false;\n        } else if (event.target.name == \"sound_on\") {\n            cc.vv.audioMgr.setSFXVolume(1);\n            this.refreshVolume();\n        } else if (event.target.name == \"sound_off\") {\n            cc.vv.audioMgr.setSFXVolume(0);\n            this.refreshVolume();\n        } else if (event.target.name == \"music_on\") {\n            cc.vv.audioMgr.setBGMVolume(1);\n            this.refreshVolume();\n        } else if (event.target.name == \"music_off\") {\n            cc.vv.audioMgr.setBGMVolume(0);\n            this.refreshVolume();\n        } else if (event.target.name == \"set_music1\") {\n            this.voice.active = true;\n            this.help.active = false;\n        } else if (event.target.name == \"set_faq0\") {\n            this.voice.active = false;\n            this.help.active = true;\n        }\n    }\n});\n\ncc._RF.pop();","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/4f/4f140786-88b8-453c-a8cb-a6490e9051a8.js":{"source":"\"use strict\";\ncc._RF.push(module, '4f140eGiLhFPKjLpkkOkFGo', 'DnChat');\n// scripts/components/DnChat.js\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        // foo: {\n        //    default: null,\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n        _chatRoot: null,\n        _tabQuick: null,\n        _tabEmoji: null,\n        _iptChat: null,\n        _quickChatInfo: null,\n        _btnChat: null\n    },\n    // use this for initialization\n    onLoad: function onLoad() {\n        if (cc.vv == null) {\n            return;\n        }\n        cc.vv.zjhchat = this;\n        // this._btnChat = this.node.getChildByName(\"xinxi\");\n        // this._btnChat.active = cc.vv.replayMgr.isReplay() == false;\n        this._chatRoot = this.node.getChildByName(\"chat\");\n        this._chatRoot.active = false;\n        this._tabQuick = this._chatRoot.getChildByName(\"quickchatlist\");\n        this._tabEmoji = this._chatRoot.getChildByName(\"emojis\");\n        this._iptChat = this._chatRoot.getChildByName(\"iptChat\").getComponent(cc.EditBox);\n        this._quickChatInfo = {};\n        this._quickChatInfo[\"item0\"] = {\n            index: 0,\n            content: \"快点啊，都等到我花儿都谢谢了！\",\n            sound: \"fix_msg_1.mp3\"\n        };\n        this._quickChatInfo[\"item1\"] = {\n            index: 1,\n            content: \"怎么又断线了，网络怎么这么差啊！\",\n            sound: \"fix_msg_2.mp3\"\n        };\n        this._quickChatInfo[\"item2\"] = {\n            index: 2,\n            content: \"不要走，决战到天亮！\",\n            sound: \"fix_msg_3.mp3\"\n        };\n        this._quickChatInfo[\"item3\"] = {\n            index: 3,\n            content: \"你的牌打得也太好了！\",\n            sound: \"fix_msg_4.mp3\"\n        };\n        this._quickChatInfo[\"item4\"] = {\n            index: 4,\n            content: \"你是妹妹还是哥哥啊？\",\n            sound: \"fix_msg_5.mp3\"\n        };\n        this._quickChatInfo[\"item5\"] = {\n            index: 5,\n            content: \"和你合作真是太愉快了！\",\n            sound: \"fix_msg_6.mp3\"\n        };\n        this._quickChatInfo[\"item6\"] = {\n            index: 6,\n            content: \"大家好，很高兴见到各位！\",\n            sound: \"fix_msg_7.mp3\"\n        };\n        this._quickChatInfo[\"item7\"] = {\n            index: 7,\n            content: \"各位，真是不好意思，我得离开一会儿。\",\n            sound: \"fix_msg_8.mp3\"\n        };\n        this._quickChatInfo[\"item8\"] = {\n            index: 8,\n            content: \"不要吵了，专心玩游戏吧！\",\n            sound: \"fix_msg_9.mp3\"\n        };\n    },\n    getQuickChatInfo: function getQuickChatInfo(index) {\n        var key = \"item\" + index;\n        return this._quickChatInfo[key];\n    },\n\n    onBtnChatClicked: function onBtnChatClicked() {\n        this._chatRoot.active = true;\n    },\n    onBgClicked: function onBgClicked() {\n        this._chatRoot.active = false;\n    },\n    onTabClicked: function onTabClicked(event) {\n        if (event.target.name == \"tabQuick\") {\n            this._tabQuick.active = true;\n            this._tabEmoji.active = false;\n        } else if (event.target.name == \"tabEmoji\") {\n            this._tabQuick.active = false;\n            this._tabEmoji.active = true;\n        }\n    },\n    onQuickChatItemClicked: function onQuickChatItemClicked(event) {\n        this._chatRoot.active = false;\n        var info = this._quickChatInfo[event.target.name];\n        cc.vv.net.send(\"quick_chat\", info.index);\n    },\n    onEmojiItemClicked: function onEmojiItemClicked(event) {\n        console.log(event.target.name);\n        this._chatRoot.active = false;\n        cc.vv.net.send(\"emoji\", event.target.name);\n    },\n    onBtnSendChatClicked: function onBtnSendChatClicked() {\n        this._chatRoot.active = false;\n        if (this._iptChat.string == \"\") {\n            return;\n        }\n        cc.vv.net.send(\"chat\", this._iptChat.string);\n        this._iptChat.string = \"\";\n    }\n});\n\ncc._RF.pop();","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/e9/e962c8be-2efc-47f8-8c48-68a2906752f2.js":{"source":"\"use strict\";\ncc._RF.push(module, 'e962ci+LvxH+IxIaKKQZ1Ly', 'DzpkChat');\n// scripts/components/DzpkChat.js\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        // foo: {\n        //    default: null,\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n        _chatRoot: null,\n        _tabQuick: null,\n        _tabEmoji: null,\n        _iptChat: null,\n        _quickChatInfo: null,\n        _btnChat: null\n    },\n    // use this for initialization\n    onLoad: function onLoad() {\n        if (cc.vv == null) {\n            return;\n        }\n        cc.vv.zjhchat = this;\n        // this._btnChat = this.node.getChildByName(\"xinxi\");\n        // this._btnChat.active = cc.vv.replayMgr.isReplay() == false;\n        this._chatRoot = this.node.getChildByName(\"chat\");\n        this._chatRoot.active = false;\n        this._tabQuick = this._chatRoot.getChildByName(\"quickchatlist\");\n        this._tabEmoji = this._chatRoot.getChildByName(\"emojis\");\n        this._iptChat = this._chatRoot.getChildByName(\"iptChat\").getComponent(cc.EditBox);\n        this._quickChatInfo = {};\n        this._quickChatInfo[\"item0\"] = {\n            index: 0,\n            content: \"快点啊，都等到我花儿都谢谢了！\",\n            sound: \"fix_msg_1.mp3\"\n        };\n        this._quickChatInfo[\"item1\"] = {\n            index: 1,\n            content: \"怎么又断线了，网络怎么这么差啊！\",\n            sound: \"fix_msg_2.mp3\"\n        };\n        this._quickChatInfo[\"item2\"] = {\n            index: 2,\n            content: \"不要走，决战到天亮！\",\n            sound: \"fix_msg_3.mp3\"\n        };\n        this._quickChatInfo[\"item3\"] = {\n            index: 3,\n            content: \"你的牌打得也太好了！\",\n            sound: \"fix_msg_4.mp3\"\n        };\n        this._quickChatInfo[\"item4\"] = {\n            index: 4,\n            content: \"你是妹妹还是哥哥啊？\",\n            sound: \"fix_msg_5.mp3\"\n        };\n        this._quickChatInfo[\"item5\"] = {\n            index: 5,\n            content: \"和你合作真是太愉快了！\",\n            sound: \"fix_msg_6.mp3\"\n        };\n        this._quickChatInfo[\"item6\"] = {\n            index: 6,\n            content: \"大家好，很高兴见到各位！\",\n            sound: \"fix_msg_7.mp3\"\n        };\n        this._quickChatInfo[\"item7\"] = {\n            index: 7,\n            content: \"各位，真是不好意思，我得离开一会儿。\",\n            sound: \"fix_msg_8.mp3\"\n        };\n        this._quickChatInfo[\"item8\"] = {\n            index: 8,\n            content: \"不要吵了，专心玩游戏吧！\",\n            sound: \"fix_msg_9.mp3\"\n        };\n    },\n    getQuickChatInfo: function getQuickChatInfo(index) {\n        var key = \"item\" + index;\n        return this._quickChatInfo[key];\n    },\n\n    onBtnChatClicked: function onBtnChatClicked() {\n        this._chatRoot.active = true;\n    },\n    onBgClicked: function onBgClicked() {\n        this._chatRoot.active = false;\n    },\n    onTabClicked: function onTabClicked(event) {\n        if (event.target.name == \"tabQuick\") {\n            this._tabQuick.active = true;\n            this._tabEmoji.active = false;\n        } else if (event.target.name == \"tabEmoji\") {\n            this._tabQuick.active = false;\n            this._tabEmoji.active = true;\n        }\n    },\n    onQuickChatItemClicked: function onQuickChatItemClicked(event) {\n        this._chatRoot.active = false;\n        var info = this._quickChatInfo[event.target.name];\n        cc.vv.net.send(\"quick_chat\", info.index);\n    },\n    onEmojiItemClicked: function onEmojiItemClicked(event) {\n        console.log(event.target.name);\n        this._chatRoot.active = false;\n        cc.vv.net.send(\"emoji\", event.target.name);\n    },\n    onBtnSendChatClicked: function onBtnSendChatClicked() {\n        this._chatRoot.active = false;\n        if (this._iptChat.string == \"\") {\n            return;\n        }\n        cc.vv.net.send(\"chat\", this._iptChat.string);\n        this._iptChat.string = \"\";\n    }\n});\n\ncc._RF.pop();","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/0b/0bf637a2-6441-4c59-b5b4-de8f217aa6b9.js":{"source":"\"use strict\";\ncc._RF.push(module, '0bf63eiZEFMWbW03o8heqa5', 'Folds');\n// scripts/components/Folds.js\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        // foo: {\n        //    default: null,\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n        _folds: null\n    },\n    // use this for initialization\n    onLoad: function onLoad() {\n        if (cc.vv == null) {\n            return;\n        }\n        this.initView();\n        this.initEventHandler();\n        this.initAllFolds();\n    },\n    initView: function initView() {\n        this._folds = {};\n        var game = this.node.getChildByName(\"game\");\n        var sides = [\"myself\", \"right\", \"up\", \"left\"];\n        for (var i = 0; i < sides.length; ++i) {\n            var sideName = sides[i];\n            var sideRoot = game.getChildByName(sideName);\n            var folds = [];\n            var foldRoot = sideRoot.getChildByName(\"folds\");\n            for (var j = 0; j < foldRoot.children.length; ++j) {\n                var n = foldRoot.children[j];\n                n.active = false;\n                var sprite = n.getComponent(cc.Sprite);\n                sprite.spriteFrame = null;\n                folds.push(sprite);\n            }\n            this._folds[sideName] = folds;\n        }\n        this.hideAllFolds();\n    },\n    hideAllFolds: function hideAllFolds() {\n        for (var k in this._folds) {\n            var f = this._folds[i];\n            for (var i in f) {\n                f[i].node.active = false;\n            }\n        }\n    },\n    initEventHandler: function initEventHandler() {\n        var self = this;\n        this.node.on('game_begin', function (data) {\n            self.initAllFolds();\n        });\n        this.node.on('game_sync', function (data) {\n            self.initAllFolds();\n        });\n        this.node.on('game_chupai_notify', function (data) {\n            self.initFolds(data.detail);\n        });\n        this.node.on('guo_notify', function (data) {\n            self.initFolds(data.detail);\n        });\n    },\n    initAllFolds: function initAllFolds() {\n        var seats = cc.vv.gameNetMgr.seats;\n        for (var i in seats) {\n            this.initFolds(seats[i]);\n        }\n    },\n    initFolds: function initFolds(seatData) {\n        var folds = seatData.folds;\n        if (folds == null) {\n            return;\n        }\n        var localIndex = cc.vv.gameNetMgr.getLocalIndex(seatData.seatindex);\n        var pre = cc.vv.mahjongmgr.getFoldPre(localIndex);\n        var side = cc.vv.mahjongmgr.getSide(localIndex);\n        var foldsSprites = this._folds[side];\n        for (var i = 0; i < folds.length; ++i) {\n            var index = i;\n            if (side == \"right\" || side == \"up\") {\n                index = foldsSprites.length - i - 1;\n            }\n            var sprite = foldsSprites[index];\n            this.setSpriteFrameByMJID(pre, sprite, folds[i]);\n            if (side == \"myself\" && i == folds.length - 1) {\n                //如果是最后一个\n                var target_node = sprite.node;\n                var old_x = target_node.x;\n                var old_y = target_node.y;\n                var pos = {\n                    x: 0,\n                    y: 0\n                };\n                var folds_diff_x = cc.find(\"Canvas/game/myself/folds\").x;\n                if (pos) {\n                    target_node.x = pos.x / 0.8 - folds_diff_x / 0.8; //移到出牌位置\n                    target_node.y = 70;\n                    var action = cc.moveTo(0.2, cc.p(old_x, old_y));\n                    target_node.runAction(action);\n                }\n            } else {\n                sprite.node.active = true;\n            }\n        }\n        for (var i = folds.length; i < foldsSprites.length; ++i) {\n            var index = i;\n            if (side == \"right\" || side == \"up\") {\n                index = foldsSprites.length - i - 1;\n            }\n            var sprite = foldsSprites[index];\n            sprite.spriteFrame = null;\n            sprite.node.active = false;\n        }\n    },\n    setSpriteFrameByMJID: function setSpriteFrameByMJID(pre, sprite, mjid) {\n        sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(pre, mjid);\n        sprite.node.active = true;\n    }\n});\n\ncc._RF.pop();","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/fa/facfd963-9f1e-45fa-b143-02ae506e6a9a.js":{"source":"\"use strict\";\ncc._RF.push(module, 'facfdljnx5F+rFDAq5Qbmqa', 'GameOver');\n// scripts/components/GameOver.js\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        _gameover: null,\n        _gameresult: null,\n        _seats: [],\n        _isGameEnd: false,\n        _pingju: null,\n        _win: null,\n        _lose: null\n    },\n    // use this for initialization\n    onLoad: function onLoad() {\n        if (cc.vv == null) {\n            return;\n        }\n        if (cc.vv.gameNetMgr.conf == null) {\n            return;\n        }\n        this._gameover = this.node.getChildByName(\"game_over\");\n        this._gameover.active = false;\n        this._pingju = this._gameover.getChildByName(\"pingju\");\n        this._win = this._gameover.getChildByName(\"win\");\n        this._lose = this._gameover.getChildByName(\"lose\");\n        this._liuju = this._gameover.getChildByName(\"huangzhuang\");\n        this._gameresult = this.node.getChildByName(\"game_result\");\n        var wanfa = this._gameover.getChildByName(\"wanfa\").getComponent(cc.Label);\n        wanfa.string = cc.vv.gameNetMgr.getWanfa();\n        var listRoot = this._gameover.getChildByName(\"result_list\");\n        for (var i = 1; i <= 4; ++i) {\n            var s = \"s\" + i;\n            var sn = listRoot.getChildByName(s);\n            var viewdata = {};\n            viewdata.username = sn.getChildByName('username').getComponent(cc.Label);\n            viewdata.reason = sn.getChildByName('reason').getComponent(cc.Label);\n            var f = sn.getChildByName('fan');\n            if (f != null) {\n                viewdata.fan = f.getComponent(cc.Label);\n            }\n            viewdata.score = sn.getChildByName('score').getComponent(cc.Label);\n            viewdata.hu = sn.getChildByName('hu');\n            viewdata.mahjongs = sn.getChildByName('pai');\n            viewdata.zhuang = sn.getChildByName('zhuang');\n            viewdata.hupai = sn.getChildByName('hupai');\n            viewdata.hua = sn.getChildByName('hua');\n            viewdata._pengandgang = [];\n            this._seats.push(viewdata);\n        }\n        //初始化网络事件监听器\n        var self = this;\n        this.node.on('game_over', function (data) {\n            self.onGameOver(data.detail);\n        });\n        this.node.on('game_end', function (data) {\n            self._isGameEnd = true;\n        });\n    },\n    onGameOver: function onGameOver(data) {\n        console.log(data);\n        if (data.length == 0) {\n            this._gameresult.active = true;\n            return;\n        }\n        this._gameover.active = true;\n        this._pingju.active = false;\n        this._win.active = false;\n        this._lose.active = false;\n        this._liuju.active = false;\n        var myscore = data[cc.vv.gameNetMgr.seatIndex].score;\n        var isLiuJu = data[cc.vv.gameNetMgr.seatIndex].isLiuJu;\n        if (isLiuJu) {\n            this._liuju.active = true;\n        } else {\n            if (myscore > 0) {\n                this._win.active = true;\n            } else if (myscore < 0) {\n                this._lose.active = true;\n            } else {\n                this._pingju.active = true;\n            }\n        }\n        //显示玩家信息\n        for (var i = 0; i < 4; ++i) {\n            var seatView = this._seats[i];\n            var userData = data[i];\n            var hued = false;\n            //胡牌的玩家才显示 是否清一色 根xn的字样\n            var numOfGangs = userData.angangs.length + userData.wangangs.length + userData.diangangs.length;\n            var numOfGen = userData.numofgen;\n            var actionArr = [];\n            var is7pairs = false;\n            var ischadajiao = false;\n            for (var j = 0; j < userData.actions.length; ++j) {\n                var ac = userData.actions[j];\n                if (ac.type == \"zimo\" || ac.type == \"ganghua\" || ac.type == \"dianganghua\" || ac.type == \"hu\" || ac.type == \"gangpaohu\" || ac.type == \"qiangganghu\" || ac.type == \"chadajiao\") {\n                    if (ac.type == \"zimo\") {\n                        actionArr.push(\"自摸\");\n                    } else if (ac.type == \"ganghua\") {\n                        actionArr.push(\"杠上花\");\n                    }\n                    hued = true;\n                } else if (ac.type == \"fangpao\") {\n                    actionArr.push(\"放炮\");\n                } else if (ac.type == \"angang\") {\n                    actionArr.push(\"暗杠\");\n                } else if (ac.type == \"diangang\") {\n                    actionArr.push(\"明杠\");\n                }\n            }\n            if (hued) {\n                if (userData.isHaoQiDui) {\n                    actionArr.push(\"豪七对\");\n                } else if (userData.pattern == \"therity\") {\n                    actionArr.push(\"十三幺\");\n                } else {\n                    if (userData.pattern == \"7pairs\") {\n                        actionArr.push(\"七对\");\n                    }\n                    if (userData.qingyise) {\n                        actionArr.push(\"清一色\");\n                    }\n                    if (userData.menqing) {\n                        actionArr.push(\"门清\");\n                    }\n                    if (userData.haidihu) {\n                        actionArr.push(\"海底捞月\");\n                    }\n                    if (userData.isFourOne) {\n                        actionArr.push(\"四归一\");\n                    }\n                    if (userData.zhuoWuKui) {\n                        actionArr.push(\"捉五魁\");\n                    }\n                    if (userData.hunyise) {\n                        actionArr.push(\"混一色\");\n                    }\n                    if (userData.baZhang) {\n                        actionArr.push(\"八张\");\n                    }\n                    if (userData.laoShao) {\n                        actionArr.push(\"老少\");\n                    }\n                    if (userData.yiTiaoLong) {\n                        actionArr.push(\"一条龙\");\n                    }\n                    if (userData.xiaoLian) {\n                        actionArr.push(\"小连\");\n                    }\n                    if (userData.daLian) {\n                        actionArr.push(\"大连\");\n                    }\n                    if (userData.huCnt == 1) {\n                        actionArr.push(\"单吊\");\n                    }\n                    if (userData.xiaoGao) {\n                        actionArr.push(\"小高\");\n                    }\n                    if (userData.daGao) {\n                        actionArr.push(\"大高\");\n                    }\n                    if (userData.queMen) {\n                        actionArr.push(\"缺门\");\n                    }\n                    if (userData.kezi) {\n                        actionArr.push(\"刻\");\n                    }\n                    if (userData.pengpenghu) {\n                        actionArr.push(\"碰碰胡\");\n                    }\n                    var lianZhuangNum = parseInt(userData.lianZhuangNum) - 1;\n                    if (lianZhuangNum > 0) {\n                        actionArr.push(\"连庄\" + lianZhuangNum + \"次\");\n                    }\n                }\n            }\n            for (var o = 0; o < 3; ++o) {\n                seatView.hu.children[o].active = false;\n            }\n            //FIXME 隐藏第几个胡牌的\n            if (userData.huorder >= 0) {\n                seatView.hu.children[userData.huorder].active = true;\n            }\n            seatView.username.string = cc.vv.gameNetMgr.seats[i].name;\n            seatView.zhuang.active = cc.vv.gameNetMgr.button == i;\n            seatView.reason.string = actionArr.join(\"、\");\n            //胡牌的玩家才有番\n            var fan = 0;\n            if (hued) {\n                fan = userData.fan;\n            }\n            seatView.fan.string = fan + \"番\";\n            //\n            if (userData.score > 0) {\n                seatView.score.string = \"+\" + userData.score;\n            } else {\n                seatView.score.string = userData.score;\n            }\n            var hupai = -1;\n            if (hued) {\n                hupai = userData.hupai;\n                //从手牌中剔除胡的那张牌 \n                var hu_index = userData.holds.indexOf(hupai);\n                userData.holds.splice(hu_index, 1);\n            }\n            cc.vv.mahjongmgr.sortMJ(userData.holds);\n            //胡牌不参与排序\n            if (hued) {\n                userData.holds.push(hupai);\n            }\n            //隐藏所有牌\n            for (var k = 0; k < seatView.mahjongs.childrenCount; ++k) {\n                var n = seatView.mahjongs.children[k];\n                n.active = false;\n            }\n            var lackingNum = (userData.pengs.length + numOfGangs + userData.chis.length) * 3;\n            //显示相关的牌\n            for (var k = 0; k < userData.holds.length; ++k) {\n                var pai = userData.holds[k];\n                var n = seatView.mahjongs.children[k + lackingNum];\n                n.active = true;\n                var sprite = n.getComponent(cc.Sprite);\n                sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\", pai);\n            }\n            for (var k = 0; k < seatView._pengandgang.length; ++k) {\n                seatView._pengandgang[k].active = false;\n            }\n            //初始化杠牌\n            var index = 0;\n            var gangs = userData.angangs;\n            for (var k = 0; k < gangs.length; ++k) {\n                var mjid = gangs[k];\n                this.initPengAndGangs(seatView, index, mjid, \"angang\");\n                index++;\n            }\n            var gangs = userData.diangangs;\n            for (var k = 0; k < gangs.length; ++k) {\n                var mjid = gangs[k];\n                this.initPengAndGangs(seatView, index, mjid, \"diangang\");\n                index++;\n            }\n            var gangs = userData.wangangs;\n            for (var k = 0; k < gangs.length; ++k) {\n                var mjid = gangs[k];\n                this.initPengAndGangs(seatView, index, mjid, \"wangang\");\n                index++;\n            }\n            //初始化碰牌\n            var pengs = userData.pengs;\n            if (pengs) {\n                for (var k = 0; k < pengs.length; ++k) {\n                    var mjid = pengs[k];\n                    this.initPengAndGangs(seatView, index, mjid, \"peng\");\n                    index++;\n                }\n            }\n            //初始化吃牌\n            var chis = userData.chis;\n            if (chis) {\n                for (var k = 0; k < chis.length; ++k) {\n                    var mjids = chis[k];\n                    if (mjids) {\n                        this.initPengAndGangs(seatView, index, mjids, \"chi\");\n                        index++;\n                    }\n                }\n            }\n            //初始化花牌\n            var hua = userData.caiShen;\n            this.initHua(seatView, hua);\n        }\n    },\n\n    initHua: function initHua(seatView, mjids) {\n        for (var i = 0; i < seatView.hua.children.length; i++) {\n            seatView.hua.children[i].active = false;\n        }\n        if (mjids) {\n            for (var i = 0; i < mjids.length; i++) {\n                seatView.hua.children[i].active = true;\n                seatView.hua.children[i].getComponent(cc.Sprite).spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"B_\", mjids[i]);\n            }\n        }\n    },\n    initPengAndGangs: function initPengAndGangs(seatView, index, mjid, flag) {\n        var pgroot = null;\n        if (seatView._pengandgang.length <= index) {\n            pgroot = cc.instantiate(cc.vv.mahjongmgr.pengPrefabSelf);\n            seatView._pengandgang.push(pgroot);\n            seatView.mahjongs.addChild(pgroot);\n        } else {\n            pgroot = seatView._pengandgang[index];\n            pgroot.active = true;\n        }\n        var sprites = pgroot.getComponentsInChildren(cc.Sprite);\n        for (var s = 0; s < sprites.length; ++s) {\n            var sprite = sprites[s];\n            if (sprite.node.name == \"gang\") {\n                var isGang = flag != \"peng\" && flag != \"chi\";\n                sprite.node.active = isGang;\n                sprite.node.scaleX = 1.0;\n                sprite.node.scaleY = 1.0;\n                if (flag == \"angang\") {\n                    sprite.spriteFrame = cc.vv.mahjongmgr.getEmptySpriteFrame(\"myself\");\n                    sprite.node.scaleX = 1.4;\n                    sprite.node.scaleY = 1.4;\n                } else {\n                    if (flag == \"chi\") {\n                        sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"B_\", mjid[s]);\n                    } else {\n                        sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"B_\", mjid);\n                    }\n                }\n            } else {\n                if (flag == \"chi\") {\n                    sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"B_\", mjid[s]);\n                } else {\n                    sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"B_\", mjid);\n                }\n            }\n        }\n        pgroot.x = index * 55 * 3 + index * 10;\n    },\n    onBtnReadyClicked: function onBtnReadyClicked() {\n        console.log(\"onBtnReadyClicked\");\n        if (this._isGameEnd) {\n            this._gameresult.active = true;\n        } else {\n            cc.vv.net.send('ready');\n        }\n        this._gameover.active = false;\n    },\n    onBtnShareClicked: function onBtnShareClicked() {\n        console.log(\"onBtnShareClicked\");\n    }\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n    // },\n});\n\ncc._RF.pop();","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/2b/2b08df29-9b45-410c-b625-64875f2ee3d2.js":{"source":"\"use strict\";\ncc._RF.push(module, '2b08d8pm0VBDLYlZIdfLuPS', 'GameResult');\n// scripts/components/GameResult.js\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        // foo: {\n        //    default: null,\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n        _gameresult: null,\n        _seats: []\n    },\n    // use this for initialization\n    onLoad: function onLoad() {\n        if (cc.vv == null) {\n            return;\n        }\n        this._gameresult = this.node.getChildByName(\"game_result\");\n        //this._gameresult.active = false;\n        var seats = this._gameresult.getChildByName(\"seats\");\n        for (var i = 0; i < seats.children.length; ++i) {\n            this._seats.push(seats.children[i].getComponent(\"Seat\"));\n        }\n        var btnClose = cc.find(\"Canvas/game_result/btnClose\");\n        if (btnClose) {\n            cc.vv.utils.addClickEvent(btnClose, this.node, \"GameResult\", \"onBtnCloseClicked\");\n        }\n        var btnShare = cc.find(\"Canvas/game_result/btnShare\");\n        if (btnShare) {\n            cc.vv.utils.addClickEvent(btnShare, this.node, \"GameResult\", \"onBtnShareClicked\");\n        }\n        //初始化网络事件监听器\n        var self = this;\n        this.node.on('game_end', function (data) {\n            self.onGameEnd(data.detail);\n        });\n    },\n    showResult: function showResult(seat, info, isZuiJiaPaoShou) {\n        seat.node.getChildByName(\"zuijiapaoshou\").active = isZuiJiaPaoShou;\n        seat.node.getChildByName(\"zimocishu\").getComponent(cc.Label).string = info.numzimo;\n        seat.node.getChildByName(\"jiepaocishu\").getComponent(cc.Label).string = info.numjiepao;\n        seat.node.getChildByName(\"dianpaocishu\").getComponent(cc.Label).string = info.numdianpao;\n        seat.node.getChildByName(\"angangcishu\").getComponent(cc.Label).string = info.numangang;\n        seat.node.getChildByName(\"minggangcishu\").getComponent(cc.Label).string = info.numminggang;\n        // seat.node.getChildByName(\"chajiaocishu\").getComponent(cc.Label).string = info.numchadajiao;\n    },\n    onGameEnd: function onGameEnd(endinfo) {\n        var seats = cc.vv.gameNetMgr.seats;\n        var maxscore = -1;\n        var maxdianpao = 0;\n        var dianpaogaoshou = -1;\n        for (var i = 0; i < seats.length; ++i) {\n            var seat = seats[i];\n            if (seat.score > maxscore) {\n                maxscore = seat.score;\n            }\n            if (endinfo[i].numdianpao > maxdianpao) {\n                maxdianpao = endinfo[i].numdianpao;\n                dianpaogaoshou = i;\n            }\n        }\n        for (var i = 0; i < seats.length; ++i) {\n            var seat = seats[i];\n            var isBigwin = false;\n            if (seat.score > 0) {\n                isBigwin = seat.score == maxscore;\n            }\n            this._seats[i].setInfo(seat.name, seat.score, isBigwin);\n            this._seats[i].setID(seat.userid);\n            var isZuiJiaPaoShou = dianpaogaoshou == i;\n            this.showResult(this._seats[i], endinfo[i], isZuiJiaPaoShou);\n        }\n    },\n    onBtnCloseClicked: function onBtnCloseClicked() {\n        //刷新客户端金币和钻石\n        cc.vv.userMgr.getGemsAndCoins(function (data) {\n            cc.vv.userMgr.gems = data.gems;\n            cc.vv.userMgr.coins = data.coins;\n        });\n        cc.director.loadScene(\"newhall\");\n    },\n    onBtnShareClicked: function onBtnShareClicked() {\n        cc.vv.share.show();\n        // cc.vv.anysdkMgr.shareResult();\n    }\n});\n\ncc._RF.pop();","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/ed/ed057060-a7c1-4794-96c6-23e96300dedd.js":{"source":"\"use strict\";\ncc._RF.push(module, 'ed057Bgp8FHlJbGI+ljAN7d', 'ImageLoader');\n// scripts/components/ImageLoader.js\n\n'use strict';\n\nfunction loadImage(url, code, callback) {\n    cc.loader.load(url, function (err, tex) {\n        var spriteFrame = new cc.SpriteFrame(tex, cc.Rect(0, 0, tex.width, tex.height));\n        callback(code, spriteFrame);\n    });\n};\n\nfunction getBaseInfo(userid, callback) {\n    if (cc.vv.baseInfoMap == null) {\n        cc.vv.baseInfoMap = {};\n    }\n    if (cc.vv.baseInfoMap[userid] != null) {\n        callback(userid, cc.vv.baseInfoMap[userid]);\n    } else {\n        cc.vv.http.sendRequest('/base_info', {\n            userid: userid\n        }, function (ret) {\n            var url = null;\n            if (ret.headimgurl) {\n                url = ret.headimgurl;\n            }\n            var info = {\n                name: ret.name,\n                sex: ret.sex,\n                url: url\n            };\n            cc.vv.baseInfoMap[userid] = info;\n            callback(userid, info);\n        }, cc.vv.http.master_url);\n    }\n};\ncc.Class({\n    extends: cc.Component,\n    properties: {},\n    // use this for initialization\n    onLoad: function onLoad() {\n        this.setupSpriteFrame();\n    },\n    setUserID: function setUserID(userid, ttype) {\n        if (!userid) {\n            return;\n        }\n        if (cc.vv.images == null) {\n            cc.vv.images = {};\n        }\n        var self = this;\n        // 如果指定类型为1表示显示二维码信息\n        if (ttype == 1) {\n            var yaoqing = 'btmj' + cc.vv.userMgr.yaoqing_key;\n            var roomid = cc.vv.userMgr.shareRoomId || cc.vv.gameNetMgr.roomId || \"000000\";\n            var url = 'http://mj.yajugame.com/manage1/?/member/user/qrcode_app/';\n            if (!yaoqing) {\n                return;\n            }\n            url = url + yaoqing + '/' + roomid + '.png';\n            loadImage(url, userid, function (err, spriteFrame) {\n                self._spriteFrame = spriteFrame;\n                self.setupSpriteFrame();\n            });\n        } else {\n            getBaseInfo(userid, function (code, info) {\n                if (info && info.url) {\n                    loadImage(info.url, userid, function (err, spriteFrame) {\n                        self._spriteFrame = spriteFrame;\n                        self.setupSpriteFrame();\n                    });\n                }\n            });\n        }\n    },\n    setupSpriteFrame: function setupSpriteFrame() {\n        if (this._spriteFrame) {\n            var spr = this.getComponent(cc.Sprite);\n            if (spr) {\n                spr.spriteFrame = this._spriteFrame;\n            }\n        }\n    }\n});\n\ncc._RF.pop();","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/85/857c5af9-1e0a-4e42-9bb3-3ba21350abb7.js":{"source":"\"use strict\";\ncc._RF.push(module, '857c5r5HgpOQpuzO6ITUKu3', 'Jbs');\n// scripts/components/Jbs.js\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n    properties: {},\n    // use this for initialization\n    onLoad: function onLoad() {\n        if (cc.vv == null) {\n            return;\n        }\n        this._btnClose = this.node.getChildByName(\"btnClose\"); //返回按钮\n        this._zjhmatch = this.node.getChildByName(\"zjhmatch\"); //扎金花界面\n        this._dnmatch = this.node.getChildByName(\"dnmatch\"); //斗牛界面\n        this._mjmatch = this.node.getChildByName(\"mjmatch\"); //麻将界面\n        this._detail = this.node.getChildByName('detail'); //比赛详情界面\n        this._detail_rule = this._detail.getChildByName('rule'); //规则详情\n        this._detail_reward = this._detail.getChildByName('reward'); //奖励详情\n        this._detail_record = this._detail.getChildByName('record'); //战绩详情\n        cc.vv.utils.addClickEvent(this._btnClose, this.node, \"Jbs\", \"onBtnClose\");\n        this.initEventWanfa(this._zjhmatch);\n        this.initEventWanfa(this._dnmatch);\n        this.initEventWanfa(this._mjmatch);\n        this.initEventDetail(this._detail_rule);\n        this.initEventDetail(this._detail_reward);\n        this.initEventDetail(this._detail_record);\n    },\n    onBtnClose: function onBtnClose() {\n        this.node.active = false;\n    },\n    onBtnWanfa: function onBtnWanfa(event) {\n        var name = event.target.name;\n        name = name.replace(\"jbs_\", \"\");\n        if (name.indexOf(\"_\") > -1) {\n            //可点击\n            name = name.replace(\"_\", \"\");\n            switch (name) {\n                case 'dou':\n                    //斗牛\n                    this._dnmatch.active = true;\n                    break;\n                case 'ma':\n                    //麻将\n                    this._mjmatch.active = true;\n                    break;\n                case 'zha':\n                    //扎金花\n                    this._zjhmatch.active = true;\n                    break;\n            }\n            //隐藏当前panel\n            event.target.parent.parent.active = false;\n        }\n    },\n    onBtnDetailChange: function onBtnDetailChange(event) {\n        var name = event.target.name;\n        name = name.replace(\"_button\", \"\");\n        this._detail_rule.active = false;\n        this._detail_reward.active = false;\n        this._detail_record.active = false;\n\n        switch (name) {\n            case 'rule':\n                //规则\n                this._detail_rule.active = true;\n                break;\n            case 'reward':\n                //奖励\n                this._detail_reward.active = true;\n                break;\n            case 'record':\n                //战绩\n                this._detail_record.active = true;\n                break;\n        }\n    },\n    onBtnBaoMing: function onBtnBaoMing(event) {\n        var self = this;\n        var btn = event.target;\n        var match_data = btn.data;\n        var send_data = {\n            account: cc.vv.userMgr.account,\n            sign: cc.vv.userMgr.sign,\n            userid: cc.vv.userMgr.userId,\n            match_id: match_data['id']\n        };\n        cc.vv.http.sendRequest(\"/jinbiao_room\", send_data, function (ret) {\n            if (!ret || ret.errcode != 0) {\n                if (ret.errmsg) {\n                    cc.vv.alert.show('注意', ret.errmsg);\n                } else {\n                    cc.vv.alert.show('注意', '报名失败，不满足报名条件');\n                }\n                return;\n            };\n            //刷新客户端金币和钻石\n            cc.vv.userMgr.getGemsAndCoins(function (data) {\n                cc.vv.userMgr.gems = data.gems;\n                cc.vv.userMgr.coins = data.coins;\n            });\n            var connect_data = {\n                ip: ret.ip,\n                port: ret.port\n            };\n            cc.vv.gameNetMgr.connectMatchServer(connect_data, match_data);\n            self.node.active = false; //报名后，自动隐藏报名界面，用于再次打开的时候可以刷新数据\n        });\n    },\n    //退赛按钮\n    onBtnTuiSai: function onBtnTuiSai(event) {\n        var self = this;\n        var match_id = event.target.data['match_id'];\n        var send_data = {\n            account: cc.vv.userMgr.account,\n            sign: cc.vv.userMgr.sign,\n            userid: cc.vv.userMgr.userId,\n            match_id: match_id\n        };\n        cc.vv.http.sendRequest(\"/tuisai\", send_data, function (ret) {\n            if (!ret || ret.errcode != 0) {\n                if (ret.errmsg) {\n                    cc.vv.alert.show('注意', ret.errmsg);\n                } else {\n                    cc.vv.alert.show('注意', '退赛失败');\n                }\n                return;\n            };\n\n            //刷新客户端金币和钻石\n            cc.vv.userMgr.getGemsAndCoins(function (data) {\n                cc.vv.userMgr.gems = data.gems;\n                cc.vv.userMgr.coins = data.coins;\n            });\n            var connect_data = {\n                ip: ret.ip,\n                port: ret.port\n            };\n            self._detail.active = false;\n            self.node.active = false; //报名后，自动隐藏报名界面，用于再次打开的时候可以刷新数据\n            cc.vv.alert.show('提示', '退赛成功，80%报名费已返还！');\n        });\n    },\n    //顶部按钮切换页面\n    initEventWanfa: function initEventWanfa(target) {\n        var children = target.getChildByName('jbs_wanfa').children;\n        var hasMaJiang = true;\n        if (cc.vv.userMgr.modules && cc.vv.userMgr.modules.indexOf(2) == -1) {\n            //没有麻将\n            hasMaJiang = false;\n        }\n        for (var i in children) {\n            var child = children[i];\n            if (!hasMaJiang && child.name.indexOf('jbs_ma') > -1) {\n                //如果不包含麻将，就隐藏麻将按钮\n                child.active = false;\n            }\n            cc.vv.utils.addClickEvent(child, this.node, \"Jbs\", \"onBtnWanfa\", true);\n        }\n    },\n    //详情顶部按钮切换\n    initEventDetail: function initEventDetail(target) {\n        var rule_button = target.getChildByName('rule_button');\n        var reward_button = target.getChildByName('reward_button');\n        var record_button = target.getChildByName('record_button');\n        cc.vv.utils.addClickEvent(rule_button, this.node, \"Jbs\", \"onBtnDetailChange\", true);\n        cc.vv.utils.addClickEvent(reward_button, this.node, \"Jbs\", \"onBtnDetailChange\", true);\n        cc.vv.utils.addClickEvent(record_button, this.node, \"Jbs\", \"onBtnDetailChange\", true);\n    },\n    //刷新报名界面数据\n    freshMatch: function freshMatch(matchDatas) {\n        var self = this;\n        if (!matchDatas) return;\n        for (var i in matchDatas) {\n            var matchData = matchDatas[i];\n            var target = null;\n            switch (i) {\n                case 'zha':\n                    target = self._zjhmatch;\n                    break;\n                case 'dou':\n                    target = self._dnmatch;\n                    break;\n                case 'ma':\n                    target = self._mjmatch;\n                    break;\n            }\n            var content = target.getChildByName('scrollview').getChildByName('view').getChildByName('content');\n            for (var j in matchData) {\n                var data = matchData[j];\n                var list = content.children[j];\n                var info = list.getChildByName('info');\n                info.getChildByName('label').getComponent(cc.Label).string = data.name; //比赛名称\n\n                var layout = list.getChildByName('layout');\n                layout.data = data;\n                cc.vv.utils.addClickEvent(layout, self.node, \"Jbs\", \"showBaoMingDetail\", true); //给报名信息添加点击事件，显示详细信息\n\n                var num_in_match = 13;\n                if (data['num_in_match'] != null && typeof data['num_in_match'] != 'undefined') {\n                    num_in_match = data['num_in_match'];\n                    num_in_match = parseInt(num_in_match) % parseInt(data.enterNum);\n                }\n                info.getChildByName('hasEnter').getChildByName('num').getComponent(cc.Label).string = num_in_match + '人'; //已经加入的人数\n                info.getChildByName('enough').getComponent(cc.Label).string = '满' + data.enterNum + '人开赛';\n\n                var baoming_btn = list.getChildByName('button'); //报名按钮\n                baoming_btn.data = data;\n                cc.vv.utils.addClickEvent(baoming_btn, self.node, \"Jbs\", \"onBtnBaoMing\", true); //给报名按钮添加点击事件\n                baoming_btn.getChildByName('label').getComponent(cc.Label).string = data.fee; //显示报名费\n\n                var yibaoming_btn = list.getChildByName('yibaoming'); //已报名按钮\n                yibaoming_btn.getChildByName('label').getComponent(cc.Label).string = data.fee; //显示报名费\n\n                var is_ing = num_in_match == data.enterNum;\n                var jbs_ing = list.getChildByName('jbs_ing');\n                var is_bao_ming = data['is_bao_ming'];\n                if (is_bao_ming) {\n                    baoming_btn.active = false;\n                    jbs_ing.active = false;\n                    yibaoming_btn.active = true;\n                } else {\n                    baoming_btn.active = true;\n                    yibaoming_btn.active = false;\n                    jbs_ing.active = false;\n                }\n            }\n        }\n    },\n    showMatchList: function showMatchList(matchData) {\n        this.node.active = true;\n        console.log('matchData', matchData);\n\n        this.freshMatch(matchData);\n    },\n    showBaoMingDetail: function showBaoMingDetail(event) {\n        var data = event.target.data;\n        console.log('showDetails===>', data);\n        if (data) {\n            this._detail.active = true;\n            var view = this._detail_rule.getChildByName('scrollview').getChildByName('view');\n            var rule_content = view.getChildByName('rule_content');\n            var num = rule_content.getChildByName('num');\n            var fee = rule_content.getChildByName('fee');\n            var description = rule_content.getChildByName('description');\n            num.getComponent(cc.Label).string = \"开赛人数：\" + data.enterNum + \"人\";\n            var fee_type;\n            if (data.feeType == 2) {\n                fee_type = \"钻石\";\n            } else {\n                fee_type = \"金币\";\n            }\n            fee.getComponent(cc.Label).string = \"报名费用：\" + data.fee + fee_type;\n            // description.getComponent(cc.Label).string = \n            var reward_view = this._detail_reward.getChildByName('scrollview').getChildByName('view');\n            var info = reward_view.getChildByName('content').getChildByName('info');\n            var first = info.getChildByName('first').getChildByName('reward');\n            first.getComponent(cc.Label).string = data.rewardFirst + fee_type;\n\n            var second = info.getChildByName('second');\n            if (data.rewardSecond) {\n                second.active = true;\n                var second_reward = second.getChildByName('reward');\n                second_reward.getComponent(cc.Label).string = data.rewardSecond + fee_type;\n            } else {\n                second.active = false;\n            }\n\n            var third = info.getChildByName('third');\n            if (data.rewardThird) {\n                third.active = true;\n                var third_award = third.getChildByName('reward');\n                third_award.getComponent(cc.Label).string = data.rewardThird + fee_type;\n            } else {\n                third.active = false;\n            }\n\n            var tuisai_btn = this._detail_rule.getChildByName('jbs_tuisai');\n            if (data.is_bao_ming && data.num_in_match != data.enterNum) {\n                cc.vv.utils.addClickEvent(tuisai_btn, this.node, \"Jbs\", \"onBtnTuiSai\", true);\n                tuisai_btn.active = true;\n                tuisai_btn.data = {\n                    match_id: data.id\n                };\n            } else {\n                tuisai_btn.active = false;\n            }\n        }\n    },\n    hideBaoMingDetail: function hideBaoMingDetail() {\n        this._detail.active = false;\n    }\n});\n\ncc._RF.pop();","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/10/10e328c3-b2da-4b84-8187-5ab404ab6bcd.js":{"source":"\"use strict\";\ncc._RF.push(module, '10e32jDstpLhIGHWrQEq2vN', 'WaitingConnection');\n// scripts/components/WaitingConnection.js\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        target: cc.Node,\n        // foo: {\n        //    default: null,\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n        _isShow: false,\n        lblContent: cc.Label\n    },\n    // use this for initialization\n    onLoad: function onLoad() {\n        if (cc.vv == null) {\n            return null;\n        }\n        cc.vv.wc = this;\n        this.node.active = this._isShow;\n    },\n    // called every frame, uncomment this function to activate update callback\n    update: function update(dt) {\n        this.target.rotation = this.target.rotation - dt * 45;\n    },\n    show: function show(content) {\n        this._isShow = true;\n        if (this.node) {\n            this.node.active = this._isShow;\n        }\n        if (this.lblContent) {\n            if (content == null) {\n                content = \"\";\n            }\n            this.lblContent.string = content;\n        }\n    },\n    hide: function hide() {\n        this._isShow = false;\n        if (this.node) {\n            this.node.active = this._isShow;\n        }\n    }\n});\n\ncc._RF.pop();","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/10/10a1cf23-cfde-49bb-8367-a6439651f8a7.js":{"source":"\"use strict\";\ncc._RF.push(module, '10a1c8jz95Ju4NnpkOWUfin', 'JoinGameInput');\n// scripts/components/JoinGameInput.js\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        nums: {\n            default: [],\n            type: [cc.Label]\n        },\n        _inputIndex: 0\n    },\n    // use this for initialization\n    onLoad: function onLoad() {},\n    onEnable: function onEnable() {\n        this.onResetClicked();\n    },\n    onInputFinished: function onInputFinished(roomId) {\n        cc.vv.userMgr.enterRoom(roomId, function (ret) {\n            if (ret.errcode == 0) {\n                this.node.active = false;\n            } else {\n                var content = \"麻将房间[\" + roomId + \"]不存在，请重新输入!\";\n                if (ret.errcode == 4) {\n                    content = \"麻将房间[\" + roomId + \"]已满!\";\n                }\n                cc.vv.alert.show(\"提示\", content);\n                this.onResetClicked();\n            }\n        }.bind(this));\n    },\n    onInput: function onInput(num) {\n        if (this._inputIndex >= this.nums.length) {\n            return;\n        }\n        this.nums[this._inputIndex].string = num;\n        this._inputIndex += 1;\n        var self = this;\n        if (this._inputIndex == this.nums.length) {\n            var roomId = this.parseRoomID();\n            console.log(\"ok:\" + roomId);\n            var content = null;\n            var data = {\n                account: cc.vv.userMgr.account,\n                sign: cc.vv.userMgr.sign,\n                room_type: 0,\n                roomId: roomId\n            };\n            var fn = function fn(ret) {\n                if (ret.errcode == 0) {\n                    self.onInputFinished(roomId);\n                } else if (ret.errcode == 1) {\n                    content = \"麻将房间[\" + roomId + \"]不存在，请重新输入!\";\n                }\n                if (content) {\n                    cc.vv.alert.show(\"提示\", content);\n                    self.onResetClicked();\n                }\n            };\n            cc.vv.http.sendRequest(\"/judge_room\", data, fn);\n        }\n    },\n    onN0Clicked: function onN0Clicked() {\n        this.onInput(0);\n    },\n    onN1Clicked: function onN1Clicked() {\n        this.onInput(1);\n    },\n    onN2Clicked: function onN2Clicked() {\n        this.onInput(2);\n    },\n    onN3Clicked: function onN3Clicked() {\n        this.onInput(3);\n    },\n    onN4Clicked: function onN4Clicked() {\n        this.onInput(4);\n    },\n    onN5Clicked: function onN5Clicked() {\n        this.onInput(5);\n    },\n    onN6Clicked: function onN6Clicked() {\n        this.onInput(6);\n    },\n    onN7Clicked: function onN7Clicked() {\n        this.onInput(7);\n    },\n    onN8Clicked: function onN8Clicked() {\n        this.onInput(8);\n    },\n    onN9Clicked: function onN9Clicked() {\n        this.onInput(9);\n    },\n    onResetClicked: function onResetClicked() {\n        for (var i = 0; i < this.nums.length; ++i) {\n            this.nums[i].string = \"\";\n        }\n        this._inputIndex = 0;\n    },\n    onDelClicked: function onDelClicked() {\n        if (this._inputIndex > 0) {\n            this._inputIndex -= 1;\n            this.nums[this._inputIndex].string = \"\";\n        }\n    },\n    onCloseClicked: function onCloseClicked() {\n        this.node.active = false;\n    },\n    parseRoomID: function parseRoomID() {\n        var str = \"\";\n        for (var i = 0; i < this.nums.length; ++i) {\n            str += this.nums[i].string;\n        }\n        return str;\n    }\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n    // },\n});\n\ncc._RF.pop();","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/7f/7f5531b4-6e84-47e8-aad3-13bc0009a5f1.js":{"source":"\"use strict\";\ncc._RF.push(module, '7f553G0boRH6KrTE7wACaXx', 'ReConnect');\n// scripts/components/ReConnect.js\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        // foo: {\n        //    default: null,      // The default value will be used only when the component attaching\n        //                           to a node for the first time\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n        _reconnect: null,\n        _lblTip: null,\n        _lastPing: 0\n    },\n    // use this for initialization\n    onLoad: function onLoad() {\n        this._reconnect = cc.find(\"Canvas/reconnect\");\n        this._lblTip = cc.find(\"Canvas/reconnect/tip\").getComponent(cc.Label);\n        var self = this;\n        var fnTestServerOn = function fnTestServerOn() {\n            cc.vv.net.test(function (ret) {\n                if (ret) {\n                    cc.director.loadScene('newhall');\n                } else {\n                    setTimeout(fnTestServerOn, 3000);\n                }\n            });\n        };\n        var fn = function fn(data) {\n            self.node.off('disconnect', fn);\n            self._reconnect.active = true;\n            fnTestServerOn();\n        };\n        this.node.on('disconnect', fn);\n        this.node.on('loadHall', function (ret) {\n            cc.director.loadScene('newhall');\n        });\n    },\n    // called every frame, uncomment this function to activate update callback\n    update: function update(dt) {\n        if (this._reconnect.active) {\n            var t = Math.floor(Date.now() / 1000) % 4;\n            this._lblTip.string = \"与服务器断开连接，正在尝试重连\";\n            for (var i = 0; i < t; ++i) {\n                this._lblTip.string += '.';\n            }\n        }\n    }\n});\n\ncc._RF.pop();","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/7f/7fa8f72f-aea1-4e8f-a961-87ac47cddddc.js":{"source":"\"use strict\";\ncc._RF.push(module, '7fa8fcvrqFOj6lhh6xHzd3c', 'MJGame');\n// scripts/components/MJGame.js\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        gameRoot: {\n            default: null,\n            type: cc.Node\n        },\n        prepareRoot: {\n            default: null,\n            type: cc.Node\n        },\n        _myMJArr: [],\n        _options: null,\n        _selectedMJ: null,\n        _chupaiSprite: [],\n        _mjcount: null,\n        _gamecount: null,\n        _hupaiTips: [],\n        _hupaiLists: [],\n        _playEfxs: [],\n        _opts: [],\n        // 用于存放服务端发过来的可以吃的组合\n        _chiArrays: [],\n        // 用来存放玩家选中的吃的组合\n        _chiOptionArray: [],\n        _chiOpts: null,\n        _optionsData: null,\n        _canChupai: false\n    },\n    onLoad: function onLoad() {\n        if (!cc.sys.isNative && cc.sys.isMobile) {\n            var cvs = this.node.getComponent(cc.Canvas);\n            cvs.fitHeight = true;\n            cvs.fitWidth = true;\n        }\n        if (!cc.vv) {\n            cc.director.loadScene(\"login\");\n            return;\n        }\n        this.addComponent(\"NoticeTip\");\n        this.addComponent(\"GameOver\");\n        this.addComponent(\"PengGangs\");\n        this.addComponent(\"MJRoom\");\n        this.addComponent(\"TimePointer\");\n        this.addComponent(\"GameResult\");\n        this.addComponent(\"Chat\");\n        this.addComponent(\"Folds\");\n        this.addComponent(\"ReplayCtrl\");\n        this.addComponent(\"PopupMgr\");\n        this.addComponent(\"ReConnect\");\n        this.addComponent(\"Voice\");\n        this.initView();\n        this.initEventHandlers();\n        this.gameRoot.active = false;\n        this.prepareRoot.active = true;\n        this._chiArrays = [];\n        this._chiOptionArray = [];\n        this.initWanfaLabel();\n        this.onGameBeign();\n    },\n    initView: function initView() {\n        //搜索需要的子节点\n        var gameChild = this.node.getChildByName(\"game\");\n        this._mjcount = gameChild.getChildByName('mjcount').getComponent(cc.Label);\n        this._mjcount.string = \"剩余\" + cc.vv.gameNetMgr.numOfMJ + \"张\";\n        this._gamecount = gameChild.getChildByName('gamecount').getComponent(cc.Label);\n        this._gamecount.string = \"\" + cc.vv.gameNetMgr.numOfGames + \"/\" + cc.vv.gameNetMgr.maxNumOfGames + \"局\";\n        var myselfChild = gameChild.getChildByName(\"myself\");\n        var myholds = myselfChild.getChildByName(\"holds\");\n        for (var i = 0; i < myholds.children.length; ++i) {\n            var sprite = myholds.children[i].getComponent(cc.Sprite);\n            this._myMJArr.push(sprite);\n            this.onMjToUp(sprite.node);\n            sprite.spriteFrame = null;\n        }\n        var realwidth = cc.director.getVisibleSize().width;\n        myholds.scaleX *= realwidth / 1280;\n        myholds.scaleY *= realwidth / 1280;\n        var sides = [\"myself\", \"right\", \"up\", \"left\"];\n        for (var i = 0; i < sides.length; ++i) {\n            var side = sides[i];\n            var sideChild = gameChild.getChildByName(side);\n            this._hupaiTips.push(sideChild.getChildByName(\"HuPai\"));\n            this._hupaiLists.push(sideChild.getChildByName(\"hupailist\"));\n            this._playEfxs.push(sideChild.getChildByName(\"play_efx\").getComponent(cc.Animation));\n            this._chupaiSprite.push(sideChild.getChildByName(\"ChuPai\").children[0].getComponent(cc.Sprite));\n            var opt = sideChild.getChildByName(\"opt\");\n            opt.active = false;\n            var sprite = opt.getChildByName(\"pai\").getComponent(cc.Sprite);\n            var data = {\n                node: opt,\n                sprite: sprite\n            };\n            this._opts.push(data);\n        }\n        var opts = gameChild.getChildByName(\"ops\");\n        this._options = opts;\n        var chiOpts = gameChild.getChildByName(\"chiops\");\n        this._chiOpts = chiOpts;\n        this.hideOptions();\n        this.hideChupai();\n        this.hideChiOptions();\n        if (this._myMJArr.length == 14) {\n            this._canChupai = true;\n        }\n    },\n    hideChupai: function hideChupai() {\n        for (var i = 0; i < this._chupaiSprite.length; ++i) {\n            this._chupaiSprite[i].node.active = false;\n        }\n    },\n    checkHasCaiShen: function checkHasCaiShen() {\n        // console.log('判断是否有财神');\n        var hasCaiShen = false;\n        if (cc.vv.gameNetMgr.seatIndex == cc.vv.gameNetMgr.turn) {\n            for (var i = 0; i < this._myMJArr.length; ++i) {\n                var sprite = this._myMJArr[i];\n                if (sprite.node.mjId != null) {\n                    var type = cc.vv.mahjongmgr.getMahjongType(sprite.node.mjId);\n                    if (type == 4) {\n                        console.log(\"有财神\");\n                        hasCaiShen = true;\n                        break;\n                    }\n                }\n            }\n        }\n        return hasCaiShen;\n    },\n    // 每摸一次牌,判断一下是否是财神\n    checkCaiShen: function checkCaiShen() {\n        if (this.checkHasCaiShen()) {\n            var self = this;\n            //自动出花牌\n            var fn = function fn(node) {\n                var type = cc.vv.mahjongmgr.getMahjongType(node.mjId);\n                node.active = false;\n                self.shootCaiShen(node.mjId);\n                node.y = 0;\n                self.recordShootPos(node);\n            };\n            var node;\n            for (var i = 0; i < self._myMJArr.length; ++i) {\n                var sprite = self._myMJArr[i];\n                if (sprite.node.mjId != null) {\n                    var type = cc.vv.mahjongmgr.getMahjongType(sprite.node.mjId);\n                    if (type != 4) {\n                        sprite.node.getComponent(cc.Button).interactable = false;\n                    } else {\n                        cc.vv.global.touch_target = sprite.node;\n                        // cc.vv.gameNetMgr.turn = sprite.node;\n                        node = sprite.node;\n                        break;\n                    }\n                }\n            }\n            var fun = fn(node);\n            setTimeout(fun, 100);\n            //遍历检查看是否有未打缺的牌 如果有，则需要将不是定缺的牌设置为不可用\n            // console.log(\"检查是否有财神\");\n        } else {\n            // console.log(\"没有财神\");\n            if (cc.vv.gameNetMgr.seatIndex == cc.vv.gameNetMgr.turn) {\n                // console.log(\"没有财神:\", cc.vv.gameNetMgr.seatIndex, cc.vv.gameNetMgr.turn);\n                for (var i = 0; i < 14; ++i) {\n                    var sprite = this._myMJArr[i];\n                    if (sprite.node.active == true) {\n                        sprite.node.getComponent(cc.Button).interactable = true;\n                    }\n                }\n            } else {\n                // 没有轮到出牌顺序,不能点击麻将\n                for (var i = 0; i < 14; ++i) {\n                    var sprite = this._myMJArr[i];\n                    if (sprite.node.active == true) {\n                        // 出牌默认还是可以点击的\n                        sprite.node.getComponent(cc.Button).interactable = true;\n                    }\n                }\n            }\n        }\n    },\n    //如果玩家手上还有缺的牌没有打，则只能打缺牌\n    initTingedHolds: function initTingedHolds() {\n        // 如果有财神,当然不能显示听牌哎\n        if (this.checkHasCaiShen()) {\n            return;\n        }\n        if (cc.vv.gameNetMgr.conf == null || !cc.vv.gameNetMgr.getSelfData().tinged) {\n            for (var i = 0; i < this._myMJArr.length; ++i) {\n                var sprite = this._myMJArr[i];\n                if (sprite.node.mjId != null) {\n                    sprite.node.getComponent(cc.Button).interactable = true;\n                }\n            }\n        } else {\n            if (cc.vv.gameNetMgr.seatIndex == cc.vv.gameNetMgr.turn) {\n                for (var i = 0; i < 14; ++i) {\n                    var sprite = this._myMJArr[i];\n                    if (sprite.node.active == true) {\n                        sprite.node.getComponent(cc.Button).interactable = i == 13;\n                    }\n                }\n            } else {\n                for (var i = 0; i < 14; ++i) {\n                    var sprite = this._myMJArr[i];\n                    if (sprite.node.active == true) {\n                        sprite.node.getComponent(cc.Button).interactable = true;\n                    }\n                }\n            }\n        }\n    },\n    initExtraPaiHolds: function initExtraPaiHolds() {\n        console.log(\"运行到这里哦extraPaiHolds\");\n        if (this.checkHasCaiShen()) {\n            return;\n        }\n        var selfData = cc.vv.gameNetMgr.getSelfData();\n        if (selfData.extraPais.length <= 0) {\n            console.log(\"当前多余的牌不存在,不需要额外处理手牌\");\n            return;\n        }\n        if (cc.vv.gameNetMgr.conf == null || !selfData.tinged) {\n            for (var i = 0; i < this._myMJArr.length; ++i) {\n                var sprite = this._myMJArr[i];\n                if (sprite.node.mjId != null) {\n                    sprite.node.getComponent(cc.Button).interactable = true;\n                }\n            }\n        } else {\n            if (cc.vv.gameNetMgr.seatIndex == cc.vv.gameNetMgr.turn) {\n                console.log(\"判断是否是自己\");\n                for (var j = 0; j < 14; ++j) {\n                    var sprite = this._myMJArr[j];\n                    console.log(\" 当前的麻将的id是\", sprite.node.mjId);\n                    if (sprite.node.active == true && sprite.node.mjId != null) {\n                        if (selfData.extraPais.indexOf(sprite.node.mjId) > -1) {\n                            console.log(\"准备选择哪些可用\", sprite.node.mjId);\n                            sprite.node.getComponent(cc.Button).interactable = true;\n                        } else {\n                            console.log(\"准备选择哪些可以禁用的\", sprite.node.mjId);\n                            sprite.node.getComponent(cc.Button).interactable = false;\n                        }\n                    }\n                }\n                //ly鉴定。这样写是错误的。因为这样始终是最后一个可操作，与需求不符\n                // for (var i = 0; i < selfData.extraPais.length; i++) {\n                //     console.log(\"当前牌是\", selfData.extraPais[i]);\n                //     var paiId = selfData.extraPais[i];\n                //     for (var j = 0; j < 14; ++j) {\n                //         var sprite = this._myMJArr[j];\n                //         console.log(\" 当前的麻将的id是\", sprite.node.mjId);\n                //         if ((sprite.node.active == true) && (sprite.node.mjId != null)) {\n                //             if (sprite.node.mjId == paiId) {\n                //                 console.log(\"准备选择哪些可用\", sprite.node.mjId);\n                //                 sprite.node.getComponent(cc.Button).interactable = true;\n                //             } else {\n                //                 console.log(\"准备选择哪些可以禁用的\", sprite.node.mjId);\n                //                 sprite.node.getComponent(cc.Button).interactable = false;\n                //             }\n                //         }\n                //     }\n                // }\n            } else {\n                for (var i = 0; i < 14; ++i) {\n                    var sprite = this._myMJArr[i];\n                    if (sprite.node.active == true) {\n                        sprite.node.getComponent(cc.Button).interactable = true;\n                    }\n                }\n            }\n        }\n    },\n    showTingedFlag: function showTingedFlag() {\n        console.log(\"showTingedFlag\");\n        for (var i = 0; i < cc.vv.gameNetMgr.seats.length; ++i) {\n            var seatData = cc.vv.gameNetMgr.seats[i];\n            var localIndex = cc.vv.gameNetMgr.getLocalIndex(i);\n            var hupai = this._hupaiTips[localIndex];\n            hupai.active = seatData.tinged;\n            if (seatData.tinged) {\n                hupai.getChildByName(\"sprHu\").active = !seatData.tinged;\n                hupai.getChildByName(\"sprZimo\").active = !seatData.tinged;\n                hupai.getChildByName(\"sprTing\").active = seatData.tinged;\n            }\n        }\n    },\n    resetPai: function resetPai(isShow) {\n        //还原被拖动的牌的位置\n        var touch_target = cc.vv.global.touch_target;\n        if (touch_target) {\n            touch_target.x = touch_target.old_node_x;\n            touch_target.y = 0;\n            if (isShow) {\n                touch_target.active = true;\n            }\n        }\n    },\n    initEventHandlers: function initEventHandlers() {\n        cc.vv.gameNetMgr.dataEventHandler = this.node;\n        //初始化事件监听器\n        var self = this;\n        this.node.on('game_holds', function (data) {\n            self.initMahjongs();\n            self.checkCaiShen();\n            var selfData = cc.vv.gameNetMgr.getSelfData();\n            console.log('------------------------------------');\n            console.log(\"selfData\", selfData.extraPais);\n            console.log('------------------------------------');\n            if (selfData != null && selfData.extraPais != null) {\n                if (selfData.extraPais.length > 0) {\n                    console.log(\"当前多余的牌存在,则需要额外处理手牌\");\n                    self.initExtraPaiHolds();\n                    selfData.extraPais = [];\n                } else {\n                    self.initTingedHolds();\n                }\n            }\n        });\n        this.node.on('game_begin', function (data) {\n            self.onGameBeign();\n        });\n        this.node.on('game_sync', function (data) {\n            self.onGameBeign();\n        });\n        this.node.on('game_chupai', function (data) {\n            data = data.detail;\n            self.hideChupai();\n            self.checkCaiShen();\n            var selfData = cc.vv.gameNetMgr.getSelfData();\n            console.log('------------------------------------');\n            console.log(\"selfData\", selfData.extraPais);\n            console.log('------------------------------------');\n            if (selfData != null && selfData.extraPais != null) {\n                if (selfData.extraPais.length > 0) {\n                    console.log(\"当前多余的牌存在,则需要额外处理手牌\");\n                    self.initExtraPaiHolds();\n                    selfData.extraPais = [];\n                } else {\n                    self.initTingedHolds();\n                }\n            }\n            if (data.last != cc.vv.gameNetMgr.seatIndex) {\n                self.initMopai(data.last, null);\n            }\n            if (!cc.vv.replayMgr.isReplay() && data.turn != cc.vv.gameNetMgr.seatIndex) {\n                self.initMopai(data.turn, -1);\n            }\n            //默认不可以出牌\n            self._canChupai = false;\n            if (!self.checkHasCaiShen() && data.turn == cc.vv.gameNetMgr.seatIndex) {\n                //判断是否可以出牌,只有当玩家没有财神,且持有话语权才能出牌(因为'game_chupai' 是发给所有人的)。\n                self._canChupai = true;\n            }\n        });\n        this.node.on('game_mopai', function (data) {\n            self.hideChupai();\n            data = data.detail;\n            var pai = data.pai;\n            var localIndex = cc.vv.gameNetMgr.getLocalIndex(data.seatIndex);\n            if (localIndex == 0) {\n                var index = 13;\n                var sprite = self._myMJArr[index];\n                self.setSpriteFrameByMJID(\"M_\", sprite, pai, index);\n                sprite.node.active = true;\n                sprite.node.mjId = pai;\n                self._canChupai = true;\n            } else if (cc.vv.replayMgr.isReplay()) {\n                self.initMopai(data.seatIndex, pai);\n                self._canChupai = false;\n            }\n            cc.vv.global.touch_target = null;\n            cc.vv.global.shootPos = null;\n        });\n        this.node.on('game_action', function (data) {\n            self._optionsData = data.detail;\n            self.showAction(data.detail);\n            // console.log(\"game_action-----是否可以吃牌\", data);\n            // if (data.detail && data.detail.chi) {\n            //     console.log(\"可以吃牌\");\n            //     self.showChiAction(data.detail);\n            // }\n            // if (data.detail) {\n            //     if (data.detail.peng || data.detail.gang || data.detail.hu) {\n            //         console.log(\"碰杠胡\");\n            //         self.showAction(data.detail);\n            //     }\n            // }\n        });\n        this.node.on('hupai', function (data) {\n            console.log(\"ly:有人胡牌了\");\n            self.hideChiOptions();\n            var data = data.detail;\n            //如果不是玩家自己，则将玩家的牌都放倒\n            var seatIndex = data.seatindex;\n            var localIndex = cc.vv.gameNetMgr.getLocalIndex(seatIndex);\n            var hupai = self._hupaiTips[localIndex];\n            hupai.active = true;\n            if (localIndex == 0) {\n                self.hideOptions();\n            }\n            var seatData = cc.vv.gameNetMgr.seats[seatIndex];\n            seatData.hued = true;\n            if (cc.vv.gameNetMgr.conf.type == \"ykx\") {\n                hupai.getChildByName(\"sprHu\").active = true;\n                hupai.getChildByName(\"sprZimo\").active = false;\n                hupai.getChildByName(\"sprTing\").active = false;\n                self.initHupai(localIndex, data.hupai);\n                if (data.iszimo) {\n                    if (seatData.seatindex == cc.vv.gameNetMgr.seatIndex) {\n                        seatData.holds.pop();\n                        self.initMahjongs();\n                    } else {\n                        self.initOtherMahjongs(seatData);\n                    }\n                }\n            } else {\n                hupai.getChildByName(\"sprHu\").active = !data.iszimo;\n                hupai.getChildByName(\"sprZimo\").active = data.iszimo;\n                if (!(data.iszimo && localIndex == 0)) {\n                    //if(cc.vv.replayMgr.isReplay() == false && localIndex != 0){\n                    //    self.initEmptySprites(seatIndex);                \n                    //}\n                    self.initMopai(seatIndex, data.hupai);\n                }\n            }\n            // if (cc.vv.replayMgr.isReplay() == true && cc.vv.gameNetMgr.conf.type != \"ykx\") {\n            //     var opt = self._opts[localIndex];\n            //     opt.node.active = true;\n            //     opt.sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\", data.hupai);\n            // }\n            if (data.iszimo) {\n                self.playEfx(localIndex, \"play_zimo\");\n            } else {\n                self.playEfx(localIndex, \"play_hu\");\n            }\n            cc.vv.audioMgr.playSFX(\"nv/hu.mp3\");\n        });\n        this.node.on('mj_count', function (data) {\n            self._mjcount.string = \"剩余\" + cc.vv.gameNetMgr.numOfMJ + \"张\";\n        });\n        this.node.on('game_num', function (data) {\n            self._gamecount.string = \"\" + cc.vv.gameNetMgr.numOfGames + \"/\" + cc.vv.gameNetMgr.maxNumOfGames + \"局\";\n        });\n        this.node.on('game_over', function (data) {\n            self.gameRoot.active = false;\n            self.prepareRoot.active = true;\n        });\n        this.node.on('game_chupai_notify', function (data) {\n            self.hideChupai();\n            var seatData = data.detail.seatData;\n            //如果是自己，则刷新手牌\n            if (seatData.seatindex == cc.vv.gameNetMgr.seatIndex) {\n                self._canChupai = false;\n                //还原被拖动的牌的位置\n                self.resetPai();\n                setTimeout(function () {\n                    var touch_target = cc.vv.global.touch_target;\n                    if (touch_target) {\n                        touch_target.active = true;\n                    }\n                    self.initMahjongs();\n                }, 500);\n            } else {\n                self.initOtherMahjongs(seatData);\n            }\n            self.showChupai();\n            // 花牌没有对应的声音\n            if (data.detail.pai < 34) {\n                var audioUrl = cc.vv.mahjongmgr.getAudioURLByMJID(data.detail.pai);\n                // console.log(\"audioUrl!!!\" + audioUrl);\n                cc.vv.audioMgr.playSFX(audioUrl);\n            }\n        });\n        //财神处理\n        this.node.on('game_caishen_notify', function (data) {\n            // console.log(\"财神事件监听!!!!!!!!!!!!!\", data);\n            var seatData = data.detail;\n            // console.log('财神事件监听', seatData);\n            //如果是自己，则刷新手牌\n            // if (seatData.seatindex == cc.vv.gameNetMgr.seatIndex) {\n            //     setTimeout(function() {\n            //         var touch_target = cc.vv.global.touch_target;\n            //         if (touch_target) {\n            //             touch_target.active = true;\n            //         }\n            //         self.initCaiShenList();\n            //         self.initMahjongs();\n            //     }, 500);\n            // } else {\n            //      self.initOtherMahjongs(seatData);\n            //     self.initOtherCaiShenList(seatData);\n            // }\n            // self.showChupai();\n            if (seatData.seatindex == cc.vv.gameNetMgr.seatIndex) {\n                self.initCaiShenList();\n                self.initMahjongs();\n            } else {\n                self.initOtherMahjongs(seatData);\n                self.initOtherCaiShenList(seatData);\n            }\n        });\n        this.node.on('match_exit_error', function (data) {\n            //锦标赛不能退出游戏\n            cc.vv.alert.show(\"提示\", \"锦标赛中不能退出游戏\");\n        });\n        this.node.on('guo_notify', function (data) {\n            self.hideChupai();\n            self.hideOptions();\n            self.hideChiOptions();\n            var seatData = data.detail;\n            //如果是自己，则刷新手牌\n            if (seatData.seatindex == cc.vv.gameNetMgr.seatIndex) {\n                self.initMahjongs();\n            }\n            cc.vv.audioMgr.playSFX(\"give.mp3\");\n        });\n        this.node.on('guo_result', function (data) {\n            self.hideOptions();\n        });\n        // 游戏\n        this.node.on('game_playing', function (data) {\n            self.initMahjongs();\n        });\n        this.node.on('peng_notify', function (data) {\n            self.hideChiOptions();\n            self.hideChupai();\n            var seatData = data.detail;\n            console.log(\"此时玩家的seatdate\", seatData);\n            if (seatData.seatindex == cc.vv.gameNetMgr.seatIndex) {\n                self.initMahjongs();\n            } else {\n                self.initOtherMahjongs(seatData);\n            }\n            var localIndex = self.getLocalIndex(seatData.seatindex);\n            self.playEfx(localIndex, \"play_peng\");\n            cc.vv.audioMgr.playSFX(\"nv/peng.mp3\");\n            self.hideOptions();\n            seatData.tinged = true;\n            self.showTingedFlag();\n        });\n        // 吃\n        this.node.on(\"chi_notify\", function (data) {\n            var seatData = data.detail;\n            var localIndex = self.getLocalIndex(seatData);\n            if (seatData.seatindex == cc.vv.gameNetMgr.seatIndex) {\n                self.initMahjongs();\n            } else {\n                self.initOtherMahjongs(seatData);\n            }\n            // TODO 吃牌特效有bug\n            // self.playEfx(localIndex, \"play_peng\");\n            cc.vv.audioMgr.playSFX(\"nv/chi.mp3\");\n            self.hideChiOptions();\n            self.hideOptions();\n            seatData.tinged = true;\n            self.showTingedFlag();\n        });\n        this.node.on('gang_notify', function (data) {\n            self.hideChiOptions();\n            self.hideChupai();\n            var data = data.detail;\n            var seatData = data.seatData;\n            var gangtype = data.gangtype;\n            if (seatData.seatindex == cc.vv.gameNetMgr.seatIndex) {\n                self.initMahjongs();\n            } else {\n                self.initOtherMahjongs(seatData);\n            }\n            var localIndex = self.getLocalIndex(seatData.seatindex);\n            self.playEfx(localIndex, \"play_gang\");\n            cc.vv.audioMgr.playSFX(\"nv/gang.mp3\");\n            console.log(\"---------seatData------------->>\", seatData.tinged, seatData);\n            if (seatData.angangs.length == 0) {\n                seatData.tinged = true;\n            }\n            self.showTingedFlag();\n        });\n        this.node.on(\"hangang_notify\", function (data) {\n            var data = data.detail;\n            var localIndex = self.getLocalIndex(data);\n            self.playEfx(localIndex, \"play_gang\");\n            cc.vv.audioMgr.playSFX(\"nv/gang.mp3\");\n            self.hideOptions();\n        });\n    },\n    showChupai: function showChupai() {\n        var pai = cc.vv.gameNetMgr.chupai;\n        if (pai >= 0) {\n            var localIndex = this.getLocalIndex(cc.vv.gameNetMgr.turn);\n            var sprite = this._chupaiSprite[localIndex];\n            sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\", pai);\n            var target_node = sprite.node;\n            var old_x = target_node.x;\n            var old_y = target_node.y;\n            sprite.node.active = true;\n            var pos = cc.vv.global.shootPos;\n            switch (localIndex) {\n                case 0:\n                    if (pos) {\n                        target_node.x = pos.x * 1.1; //移到出牌位置\n                        target_node.y = pos.y * 1.1 - 158; //移到出牌位置\n                    }\n                    break;\n                case 1:\n                    target_node.x = cc.find(\"Canvas/game/right\").x;\n                    target_node.y = -150;\n                    break;\n                case 2:\n                    target_node.x = -50;\n                    target_node.y = 276;\n                    break;\n                case 3:\n                    target_node.x = cc.find(\"Canvas/game/left\").x;\n                    target_node.y = 150;\n                    break;\n            }\n            var action = cc.moveTo(0.05, cc.p(old_x, old_y));\n            //动画需要隐藏自己出的牌\n            if (cc.vv.gameNetMgr.seatIndex == cc.vv.gameNetMgr.turn && cc.vv.global.touch_target) {\n                cc.vv.global.touch_target.active = false;\n            }\n            target_node.runAction(action);\n        }\n    },\n    toChiActionPage: function toChiActionPage() {\n        // console.log(\"to 吃 操作的页面\");\n        this.showChiAction(this._optionsData);\n    },\n    // 碰，杠，胡，过操作\n    addOption: function addOption(btnName, pai) {\n        for (var i = 0; i < this._options.childrenCount; ++i) {\n            var child = this._options.children[i];\n            if (child.name == \"op\" && child.active == false) {\n                child.active = true;\n                var sprite = child.getChildByName(\"opTarget\").getComponent(cc.Sprite);\n                sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\", pai);\n                var btn = child.getChildByName(btnName);\n                btn.active = true;\n                btn.pai = pai;\n                return;\n            }\n        }\n    },\n    // 吃牌操作\n    addChiOption: function addChiOption(btnName, data) {\n        console.log(\"吃牌操作addchioption\", data);\n        // 显示全部\n        for (var i = 0; i < this._chiOpts.childrenCount; ++i) {\n            var child = this._chiOpts.children[i];\n            child.active = true;\n            if (child.name == \"btnChi\") {\n                if (data.pai != null) {\n                    child.pai = data.pai;\n                }\n            }\n        }\n        for (var i = 0; i < this._chiOpts.childrenCount; ++i) {\n            var child = this._chiOpts.children[i];\n            for (var j = 0; j < 3; j++) {\n                var id = \"op\" + j;\n                if (child.name == id) {\n                    child.active = false;\n                }\n            }\n        }\n        for (var i = 0; i < this._chiOpts.childrenCount; ++i) {\n            var parentname = this._chiOpts.children[i];\n            var info = data.chiArrayInfo;\n            if (info.length <= 0) {\n                return;\n            }\n            // 目标牌\n            if (parentname.name == \"opTarget\") {\n                if (data.pai != null) {\n                    var sprite = parentname.getComponent(cc.Sprite);\n                    sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\", data.pai);\n                }\n            }\n            for (var k = 0; k < info.length; k++) {\n                var name = \"op\" + k;\n                if (parentname.name == name) {\n                    parentname.active = true;\n                    var childName = \"pai\" + k;\n                    var paiInfo = info[k];\n                    this._chiArrays.push(paiInfo);\n                    console.log('this._chiArraysthis._chiArraysthis._chiArraysthis._chiArrays', this._chiArrays);\n                    this.showChiPaiArray(parentname, paiInfo);\n                }\n            }\n        }\n    },\n    // 显示吃牌的组合\n    showChiPaiArray: function showChiPaiArray(parentname, data) {\n        console.log(\"显示吃牌的组合\", data, this._chiArrays);\n        if (data != null && data.length > 0) {\n            for (var index = 0; index < 2; index++) {\n                var pai = data[index];\n                var painame = \"pai\" + index;\n                var sprite = parentname.getChildByName(painame).getComponent(cc.Sprite);\n                sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\", pai);\n            }\n        }\n    },\n    // 隐藏碰杠胡牌操作\n    hideOptions: function hideOptions(data) {\n        this._options.active = false;\n        this.hideChiOptions();\n        for (var i = 0; i < this._options.childrenCount; ++i) {\n            var child = this._options.children[i];\n            if (child.name == \"op\") {\n                child.active = false;\n                child.getChildByName(\"btnPeng\").active = false;\n                child.getChildByName(\"btnGang\").active = false;\n                child.getChildByName(\"btnHu\").active = false;\n                child.getChildByName(\"btnChi\").active = false;\n            }\n        }\n    },\n    // 隐藏吃牌的操作\n    hideChiOptions: function hideChiOptions() {\n        console.log(\"隐藏hideChiOptions\", this._chiOpts.childrenCount);\n        this._chiOpts.active = false;\n        for (var i = 0; i < this._chiOpts.childrenCount; ++i) {\n            var child = this._chiOpts.children[i];\n            child.active = false;\n        }\n    },\n    showAction: function showAction(data) {\n        if (this._options.active) {\n            this.hideOptions();\n        }\n        if (data && (data.hu || data.gang || data.peng || data.chi)) {\n            this._options.active = true;\n            if (data.hu) {\n                this.addOption(\"btnHu\", data.pai);\n            }\n            if (data.peng) {\n                this.addOption(\"btnPeng\", data.pai);\n            }\n            if (data.gang) {\n                for (var i = 0; i < data.gangpai.length; ++i) {\n                    var gp = data.gangpai[i];\n                    this.addOption(\"btnGang\", gp);\n                }\n            }\n            if (data.chi) {\n                this.addOption(\"btnChi\");\n            }\n        } else {\n            var selfData = cc.vv.gameNetMgr.getSelfData();\n            if (selfData.tinged) {\n                return;\n                //注1):2017 07 26 ly\n                //下面自动出牌不在需要，由服务器端去完成\n                //原因是： 下面语句执行后会产生一种牌不显示的bug。 \n                //      bug是必现。原因不明。\n                // //如果已经听牌，并且没有操作，则自动打牌\n                // var sprite = this._myMJArr[this._myMJArr.length - 1];\n                // var node = sprite.node;\n                // cc.vv.global.touch_target = node;\n                // node.active = false;\n                // this.shoot(node.mjId);\n                // node.y = 0;\n                // this.recordShootPos(node);\n            }\n        }\n    },\n    // 吃牌的操作\n    showChiAction: function showChiAction(data) {\n        console.log(\"吃牌操作\", data);\n        // 如果碰牌的操作界面显示了,先隐藏,正常情况下这是不可能的\n        if (this._options.active) {\n            this.hideOptions();\n        }\n        if (this._chiOpts.active) {\n            this.hideChiOptions();\n        }\n        if (data && data.chi) {\n            this._chiOpts.active = true;\n            this._chiArrays = [];\n            this._chiOptionArray = [];\n            this.addChiOption('btnChi', data);\n        }\n    },\n    initWanfaLabel: function initWanfaLabel() {\n        var wanfa = cc.find(\"Canvas/infobar/wanfa\").getComponent(cc.Label);\n        wanfa.string = cc.vv.gameNetMgr.getWanfa();\n    },\n    initHupai: function initHupai(localIndex, pai) {\n        if (cc.vv.gameNetMgr.conf.type == \"ykx\") {\n            var hupailist = this._hupaiLists[localIndex];\n            for (var i = 0; i < hupailist.children.length; ++i) {\n                var hupainode = hupailist.children[i];\n                if (hupainode.active == false) {\n                    var pre = cc.vv.mahjongmgr.getFoldPre(localIndex);\n                    hupainode.getComponent(cc.Sprite).spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(pre, pai);\n                    hupainode.active = true;\n                    break;\n                }\n            }\n        }\n    },\n    // 在胡牌堆里面处理财神显示\n    initCaiShen: function initCaiShen(localIndex, pai) {\n        var hupailist = this._hupaiLists[localIndex];\n        for (var i = 0; i < hupailist.children.length; ++i) {\n            var hupainode = hupailist.children[i];\n            if (hupainode.active == false) {\n                var pre = cc.vv.mahjongmgr.getFoldPre(localIndex);\n                hupainode.getComponent(cc.Sprite).spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(pre, pai);\n                hupainode.active = true;\n                break;\n            }\n        }\n    },\n    playEfx: function playEfx(index, name) {\n        this._playEfxs[index].node.active = true;\n        this._playEfxs[index].play(name);\n    },\n    onGameBeign: function onGameBeign() {\n        for (var i = 0; i < this._playEfxs.length; ++i) {\n            this._playEfxs[i].node.active = false;\n        }\n        for (var i = 0; i < this._hupaiLists.length; ++i) {\n            for (var j = 0; j < this._hupaiLists[i].childrenCount; ++j) {\n                this._hupaiLists[i].children[j].active = false;\n            }\n        }\n        for (var i = 0; i < cc.vv.gameNetMgr.seats.length; ++i) {\n            var seatData = cc.vv.gameNetMgr.seats[i];\n            var localIndex = cc.vv.gameNetMgr.getLocalIndex(i);\n            var hupai = this._hupaiTips[localIndex];\n            hupai.active = seatData.hued;\n            if (seatData.hued) {\n                // 如果胡牌了.肯定不显示听牌了\n                hupai.getChildByName(\"sprHu\").active = !seatData.iszimo;\n                hupai.getChildByName(\"sprZimo\").active = seatData.iszimo;\n                hupai.getChildByName(\"sprTing\").active = false;\n            }\n        }\n        this.hideChupai();\n        this.hideOptions();\n        var sides = [\"right\", \"up\", \"left\"];\n        var gameChild = this.node.getChildByName(\"game\");\n        for (var i = 0; i < sides.length; ++i) {\n            var sideChild = gameChild.getChildByName(sides[i]);\n            var holds = sideChild.getChildByName(\"holds\");\n            for (var j = 0; j < holds.childrenCount; ++j) {\n                var nc = holds.children[j];\n                nc.active = true;\n                nc.scaleX = 1.0;\n                nc.scaleY = 1.0;\n                var sprite = nc.getComponent(cc.Sprite);\n                sprite.spriteFrame = cc.vv.mahjongmgr.holdsEmpty[i + 1];\n            }\n        }\n        if (cc.vv.gameNetMgr.gamestate == \"\" && cc.vv.replayMgr.isReplay() == false) {\n            return;\n        }\n        this.gameRoot.active = true;\n        this.prepareRoot.active = false;\n        this.initMahjongs();\n        this.initCaiShenList();\n        var seats = cc.vv.gameNetMgr.seats;\n        for (var i in seats) {\n            var seatData = seats[i];\n            var localIndex = cc.vv.gameNetMgr.getLocalIndex(i);\n            if (localIndex != 0) {\n                this.initOtherMahjongs(seatData);\n                this.initOtherCaiShenList(seatData);\n                if (i == cc.vv.gameNetMgr.turn) {\n                    this.initMopai(i, -1);\n                } else {\n                    this.initMopai(i, null);\n                }\n            }\n        }\n        this.showChupai();\n        if (cc.vv.gameNetMgr.curaction != null) {\n            this._optionsData = cc.vv.gameNetMgr.curaction;\n            this.showAction(cc.vv.gameNetMgr.curaction);\n            cc.vv.gameNetMgr.curaction = null;\n        }\n        this.checkCaiShen();\n        var selfData = cc.vv.gameNetMgr.getSelfData();\n        console.log('------------------------------------');\n        console.log(\"selfData\", selfData);\n        console.log('------------------------------------');\n        if (!selfData.extraPais) {\n            return;\n        }\n        if (selfData.extraPais.length > 0) {\n            console.log(\"当前多余的牌存在,则需要额外处理手牌\");\n            this.initExtraPaiHolds();\n            selfData.extraPais = [];\n        } else {\n            this.initTingedHolds();\n        }\n        this.showTingedFlag();\n    },\n    recordShootPos: function recordShootPos(node) {\n        //记录出牌位置\n        if (node) {\n            var pos = {\n                x: node.x,\n                y: node.y\n            };\n            cc.vv.global.shootPos = pos;\n        }\n    },\n    onMjToUp: function onMjToUp(nc) {\n        var self = this;\n        nc.on(cc.Node.EventType.TOUCH_START, function (touch) {\n            if (!self._canChupai) {\n                return;\n            }\n            if (!nc.getComponent(cc.Button).interactable || cc.vv.gameNetMgr.turn != cc.vv.gameNetMgr.seatIndex) {\n                return;\n            }\n            this.old_node_x = nc.x;\n            this.old_node_y = nc.y;\n            this.old_touch_x = touch.getLocation().x;\n            this.old_touch_y = touch.getLocation().y;\n            cc.vv.global.touch_target = nc;\n        });\n        nc.on(cc.Node.EventType.TOUCH_MOVE, function (touch) {\n            if (!self._canChupai) {\n                return;\n            }\n            if (!nc.getComponent(cc.Button).interactable || cc.vv.gameNetMgr.turn != cc.vv.gameNetMgr.seatIndex) {\n                return;\n            }\n            var touchX_diff = touch.getLocation().x - this.old_touch_x;\n            var touchY_diff = touch.getLocation().y - this.old_touch_y;\n            if (touchY_diff > 0) {\n                nc.x = this.old_node_x + touchX_diff;\n                nc.y = this.old_node_y + touchY_diff;\n            }\n        });\n        nc.on(cc.Node.EventType.TOUCH_END, function (touch) {\n            if (!self._canChupai) {\n                return;\n            }\n            if (!nc.getComponent(cc.Button).interactable || cc.vv.gameNetMgr.turn != cc.vv.gameNetMgr.seatIndex) {\n                return;\n            }\n            var touchY_diff = touch.getLocation().y - this.old_touch_y;\n            if (touchY_diff > nc.height / 2) {\n                self.recordShootPos(nc);\n                var type = cc.vv.mahjongmgr.getMahjongType(nc.mjId);\n                if (type == 4) {\n                    self.shootCaiShen(nc.mjId);\n                } else {\n                    self.shoot(nc.mjId);\n                }\n                // nc.active = false;\n            }\n            //还原到原始位置\n            nc.x = this.old_node_x;\n            nc.y = this.old_node_y;\n        });\n        nc.on(cc.Node.EventType.TOUCH_CANCEL, function (touch) {\n            if (!self._canChupai) {\n                return;\n            }\n            if (!nc.getComponent(cc.Button).interactable || cc.vv.gameNetMgr.turn != cc.vv.gameNetMgr.seatIndex) {\n                return;\n            }\n            var touchCancel = touch.getLocation();\n            var delta = touchCancel.y - this.old_touch_y;\n            if (delta > nc.height / 2) {\n                self.recordShootPos(nc);\n                var type = cc.vv.mahjongmgr.getMahjongType(nc.mjId);\n                if (type == 4) {\n                    self.shootCaiShen(nc.mjId);\n                } else {\n                    self.shoot(nc.mjId);\n                }\n                nc.active = false;\n            }\n            //还原到原始位置\n            nc.x = this.old_node_x;\n            nc.y = this.old_node_y;\n        });\n    },\n    onMJClicked: function onMJClicked(event) {\n        var self = this;\n        if (!self._canChupai) {\n            return;\n        }\n        //如果不是自己的轮子，则忽略\n        if (cc.vv.gameNetMgr.turn != cc.vv.gameNetMgr.seatIndex) {\n            console.log(\"not your turn.\" + cc.vv.gameNetMgr.turn);\n            return;\n        }\n        var self = this;\n        for (var i = 0; i < this._myMJArr.length; ++i) {\n            if (event.target == this._myMJArr[i].node) {\n                //如果是再次点击，则出牌\n                if (event.target == this._selectedMJ) {\n                    // event.target.active = false;\n                    var type = cc.vv.mahjongmgr.getMahjongType(this._selectedMJ.mjId);\n                    if (type == 4) {\n                        this.shootCaiShen(this._selectedMJ.mjId);\n                    } else {\n                        this.shoot(this._selectedMJ.mjId);\n                    }\n                    this._selectedMJ.y = 0;\n                    this._selectedMJ = null;\n                    self.recordShootPos(event.target);\n                    return;\n                }\n                if (this._selectedMJ != null) {\n                    this._selectedMJ.y = 0;\n                }\n                event.target.y = 15;\n                this._selectedMJ = event.target;\n                return;\n            }\n        }\n    },\n    //出牌\n    shoot: function shoot(mjId) {\n        if (mjId == null) {\n            return;\n        }\n        cc.vv.net.send('chupai', mjId);\n    },\n    //出牌\n    shootCaiShen: function shootCaiShen(mjId) {\n        console.log(\"财神,换牌\");\n        if (mjId == null) {\n            return;\n        }\n        // 一定要是财神才能进行此操作\n        cc.vv.net.send('caishen', mjId);\n    },\n    getMJIndex: function getMJIndex(side, index) {\n        if (side == \"right\" || side == \"up\") {\n            return 13 - index;\n        }\n        return index;\n    },\n    initMopai: function initMopai(seatIndex, pai) {\n        var localIndex = cc.vv.gameNetMgr.getLocalIndex(seatIndex);\n        var side = cc.vv.mahjongmgr.getSide(localIndex);\n        var pre = cc.vv.mahjongmgr.getFoldPre(localIndex);\n        var gameChild = this.node.getChildByName(\"game\");\n        var sideChild = gameChild.getChildByName(side);\n        var holds = sideChild.getChildByName(\"holds\");\n        var lastIndex = this.getMJIndex(side, 13);\n        var nc = holds.children[lastIndex];\n        nc.scaleX = 1.0;\n        nc.scaleY = 1.0;\n        if (pai == null) {\n            nc.active = false;\n        } else if (pai >= 0) {\n            nc.active = true;\n            if (side == \"up\") {\n                nc.scaleX = 0.73;\n                nc.scaleY = 0.73;\n            }\n            var sprite = nc.getComponent(cc.Sprite);\n            sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(pre, pai);\n        } else if (pai != null) {\n            nc.active = true;\n            if (side == \"up\") {\n                nc.scaleX = 1.0;\n                nc.scaleY = 1.0;\n            }\n            var sprite = nc.getComponent(cc.Sprite);\n            sprite.spriteFrame = cc.vv.mahjongmgr.getHoldsEmptySpriteFrame(side);\n        }\n    },\n    initEmptySprites: function initEmptySprites(seatIndex) {\n        var localIndex = cc.vv.gameNetMgr.getLocalIndex(seatIndex);\n        var side = cc.vv.mahjongmgr.getSide(localIndex);\n        var pre = cc.vv.mahjongmgr.getFoldPre(localIndex);\n        var gameChild = this.node.getChildByName(\"game\");\n        var sideChild = gameChild.getChildByName(side);\n        var holds = sideChild.getChildByName(\"holds\");\n        var spriteFrame = cc.vv.mahjongmgr.getEmptySpriteFrame(side);\n        for (var i = 0; i < holds.childrenCount; ++i) {\n            var nc = holds.children[i];\n            nc.scaleX = 1.0;\n            nc.scaleY = 1.0;\n            var sprite = nc.getComponent(cc.Sprite);\n            sprite.spriteFrame = spriteFrame;\n        }\n    },\n    initOtherMahjongs: function initOtherMahjongs(seatData) {\n        console.log(\"seat:\" + seatData.seatindex, seatData);\n        var localIndex = this.getLocalIndex(seatData.seatindex);\n        if (localIndex == 0 || seatData) {\n            return;\n        }\n        var side = cc.vv.mahjongmgr.getSide(localIndex);\n        var game = this.node.getChildByName(\"game\");\n        var sideRoot = game.getChildByName(side);\n        var sideHolds = sideRoot.getChildByName(\"holds\");\n        console.log('sideholds', sideHolds);\n        var num = seatData.pengs.length + seatData.angangs.length + seatData.diangangs.length + seatData.wangangs.length + seatData.chis.length;\n        num *= 3;\n        for (var i = 0; i < num; ++i) {\n            var idx = this.getMJIndex(side, i);\n            sideHolds.children[idx].active = false;\n        }\n        var pre = cc.vv.mahjongmgr.getFoldPre(localIndex);\n        var holds = this.sortHolds(seatData);\n        if (holds != null && holds.length > 0) {\n            for (var i = 0; i < holds.length; ++i) {\n                var idx = this.getMJIndex(side, i + num);\n                var sprite = sideHolds.children[idx].getComponent(cc.Sprite);\n                if (side == \"up\") {\n                    sprite.node.scaleX = 0.73;\n                    sprite.node.scaleY = 0.73;\n                }\n                sprite.node.active = true;\n                sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(pre, holds[i]);\n            }\n            if (holds.length + num == 13) {\n                var lasetIdx = this.getMJIndex(side, 13);\n                sideHolds.children[lasetIdx].active = false;\n            }\n        }\n    },\n    sortHolds: function sortHolds(seatData) {\n        var holds = seatData.holds;\n        if (holds == null) {\n            return null;\n        }\n        //如果手上的牌的数目是2,5,8,11,14，表示最后一张牌是刚摸到的牌\n        var mopai = null;\n        var l = holds.length;\n        if (l == 2 || l == 5 || l == 8 || l == 11 || l == 14) {\n            mopai = holds.pop();\n        }\n        cc.vv.mahjongmgr.sortMJ(holds);\n        //将摸牌添加到最后\n        if (mopai != null) {\n            holds.push(mopai);\n        }\n        return holds;\n    },\n    initMahjongs: function initMahjongs() {\n        var seats = cc.vv.gameNetMgr.seats;\n        var seatData = seats[cc.vv.gameNetMgr.seatIndex];\n        var holds = this.sortHolds(seatData);\n        if (holds == null) {\n            return;\n        }\n        console.log(\"seatData.chis.length\", seatData.chis.length);\n        console.log(\"this._myMJArrthis._myMJArrthis._myMJArrthis._myMJArr\", this._myMJArr);\n        //初始化手牌\n        var lackingNum = (seatData.pengs.length + seatData.angangs.length + seatData.diangangs.length + seatData.wangangs.length + seatData.chis.length) * 3;\n        console.log(\"lackingNum\", lackingNum);\n        for (var i = 0; i < holds.length; ++i) {\n            var mjid = holds[i];\n            var sprite = this._myMJArr[i + lackingNum];\n            if (sprite && sprite.node) {\n                sprite.node.mjId = mjid;\n                sprite.node.y = 0;\n                sprite.node.active = true;\n                this.setSpriteFrameByMJID(\"M_\", sprite, mjid);\n            }\n        }\n        for (var i = 0; i < lackingNum; ++i) {\n            var sprite = this._myMJArr[i];\n            sprite.node.mjId = null;\n            sprite.spriteFrame = null;\n            sprite.node.active = false;\n        }\n        for (var i = lackingNum + holds.length; i < this._myMJArr.length; ++i) {\n            var sprite = this._myMJArr[i];\n            sprite.node.mjId = null;\n            sprite.spriteFrame = null;\n            sprite.node.active = false;\n        }\n    },\n    setSpriteFrameByMJID: function setSpriteFrameByMJID(pre, sprite, mjid) {\n        sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(pre, mjid);\n        sprite.node.active = true;\n    },\n    getLocalIndex: function getLocalIndex(index) {\n        var ret = (index - cc.vv.gameNetMgr.seatIndex + 4) % 4;\n        console.log(\"old:\" + index + \",base:\" + cc.vv.gameNetMgr.seatIndex + \",new:\" + ret);\n        return ret;\n    },\n    onOptionClicked: function onOptionClicked(event) {\n        console.log(\"吃碰杠牌操作\");\n        console.log(event.target.pai);\n        if (event.target.name == \"btnPeng\") {\n            cc.vv.net.send(\"peng\");\n        } else if (event.target.name == \"btnGang\") {\n            cc.vv.net.send(\"gang\", event.target.pai);\n        } else if (event.target.name == \"btnHu\") {\n            cc.vv.net.send(\"hu\");\n        } else if (event.target.name == \"btnGuo\") {\n            cc.vv.net.send(\"guo\");\n        } else if (event.target.name == \"btnChi\") {\n            console.log(\"吃牌操作按钮点击\");\n            cc.vv.net.send(\"chi\", event.target.pai);\n            console.log(\"向服务器发送吃牌操作--\", {\n                pai: event.target.pai,\n                chiArray: this._chiOptionArray\n            });\n        }\n    },\n    // 吃牌操作\n    onChiOptionClicked: function onChiOptionClicked(event) {\n        console.log(\"吃牌操作事件绑定\");\n        // 用来存放玩家选中的吃的组合\n        console.log(event.target.pai);\n        if (event.target.name == \"op0\") {\n            if (this._chiArrays.length <= 0) {\n                this._chiOptionArray = [];\n            } else {\n                this._chiOptionArray = this._chiArrays[0];\n            }\n            console.log(\"玩家选中了第一组组合\", this._chiOptionArray);\n        } else if (event.target.name == \"op1\") {\n            if (this._chiArrays.length <= 0) {\n                this._chiOptionArray = [];\n            } else {\n                this._chiOptionArray = this._chiArrays[1];\n            }\n            console.log(\"选择了第二组组合\", this._chiOptionArray);\n        } else if (event.target.name == \"op2\") {\n            if (this._chiArrays.length <= 0) {\n                this._chiOptionArray = [];\n            } else {\n                this._chiOptionArray = this._chiArrays[2];\n            }\n            console.log(\"选择了第三组组合\", this._chiOptionArray);\n        } else if (event.target.name == \"btnGuo\") {\n            cc.vv.net.send(\"guo\");\n        } else if (event.target.name == \"btnChi\") {\n            console.log(\"吃牌操作按钮点击\");\n            if (this._chiOptionArray.length > 0) {\n                console.log(\"可以吃的组合选中了,发送数据到服务器\", this._chiOptionArray);\n                var data = {\n                    pai: event.target.pai,\n                    chiOptioned: this._chiOptionArray\n                };\n                console.log(\"吃牌的组合是\", data);\n                cc.vv.net.send(\"chi\", data);\n            } else {\n                cc.vv.alert.show(\"注意\", \"请选择一组吃牌的组合\");\n            }\n            console.log(\"向服务器发送吃牌操作--\", event.target.pai);\n        }\n    },\n    initCaiShenList: function initCaiShenList() {\n        // console.log('开始游戏,调用财神初始化信息');\n        var seats = cc.vv.gameNetMgr.seats;\n        var seatData = seats[cc.vv.gameNetMgr.seatIndex];\n        var caishen = seatData.caiShen;\n        // console.log('caiShen initCaiShenList', caishen);\n        if (caishen == null) {\n            return;\n        }\n        var gameChild = this.node.getChildByName(\"game\");\n        var myselfChild = gameChild.getChildByName(\"myself\");\n        var caishen_list = myselfChild.getChildByName(\"hupailist\");\n        for (var i = 0; i < caishen.length; ++i) {\n            var mj_caishen_id = caishen[i];\n            var sprite = caishen_list.children[i].getComponent(cc.Sprite);\n            sprite.node.mjId = mj_caishen_id;\n            this.setSpriteFrameByMJID(\"M_\", sprite, mj_caishen_id);\n        }\n    },\n    initOtherCaiShenList: function initOtherCaiShenList(seatData) {\n        // console.log('初始化其他人的财神');\n        var caishen = seatData.caiShen;\n        // console.log('caiShen initOtherCaiShenList', caishen);\n        if (caishen == null) {\n            return;\n        }\n        var localIndex = this.getLocalIndex(seatData.seatindex);\n        var side = cc.vv.mahjongmgr.getSide(localIndex);\n        var game = this.node.getChildByName(\"game\");\n        var sideRoot = game.getChildByName(side);\n        var side_caishen_list = sideRoot.getChildByName(\"hupailist\");\n        var pre = cc.vv.mahjongmgr.getFoldPre(localIndex);\n        for (var i = 0; i < caishen.length; ++i) {\n            var mj_caishen_id = caishen[i];\n            var sprite = side_caishen_list.children[i].getComponent(cc.Sprite);\n            sprite.node.mjId = mj_caishen_id;\n            this.setSpriteFrameByMJID(pre, sprite, mj_caishen_id);\n        }\n    },\n    // called every frame, uncomment this function to activate update callback\n    update: function update(dt) {},\n    onDestroy: function onDestroy() {\n        console.log(\"onDestroy\");\n        if (cc.vv) {\n            cc.vv.gameNetMgr.clear();\n        }\n    }\n});\n\ncc._RF.pop();","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/92/921df409-65d7-49fb-9185-517ab198c993.js":{"source":"\"use strict\";\ncc._RF.push(module, '921dfQJZddJ+5GFUXqxmMmT', 'MJRoom');\n// scripts/components/MJRoom.js\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        lblRoomNo: {\n            default: null,\n            type: cc.Label\n        },\n        _seats: [],\n        _seats2: [],\n        _timeLabel: null,\n        _voiceMsgQueue: [],\n        _lastPlayingSeat: null,\n        _playingSeat: null,\n        _lastPlayTime: null,\n        _shareContent: null\n    },\n    // use this for initialization\n    onLoad: function onLoad() {\n        if (cc.vv == null) {\n            return;\n        }\n        this.initView();\n        this.initSeats();\n        this.initEventHandlers();\n    },\n    initView: function initView() {\n        var prepare = this.node.getChildByName(\"prepare\");\n        var seats = prepare.getChildByName(\"seats\");\n        for (var i = 0; i < seats.children.length; ++i) {\n            this._seats.push(seats.children[i].getComponent(\"Seat\"));\n        }\n        this.refreshBtns();\n        this.lblRoomNo = cc.find(\"Canvas/infobar/Z_room_txt/New Label\").getComponent(cc.Label);\n        this._timeLabel = cc.find(\"Canvas/infobar/time\").getComponent(cc.Label);\n        this.lblRoomNo.string = cc.vv.gameNetMgr.roomId;\n        var gameChild = this.node.getChildByName(\"game\");\n        var sides = [\"myself\", \"right\", \"up\", \"left\"];\n        for (var i = 0; i < sides.length; ++i) {\n            var sideNode = gameChild.getChildByName(sides[i]);\n            var seat = sideNode.getChildByName(\"seat\");\n            this._seats2.push(seat.getComponent(\"Seat\"));\n        }\n        var btnWechat = cc.find(\"Canvas/prepare/btnWeichat\");\n        if (btnWechat) {\n            cc.vv.utils.addClickEvent(btnWechat, this.node, \"MJRoom\", \"onBtnWeichatClicked\");\n        }\n    },\n    refreshBtns: function refreshBtns() {\n        var prepare = this.node.getChildByName(\"prepare\");\n        var btnExit = prepare.getChildByName(\"btnExit\");\n        var btnDispress = prepare.getChildByName(\"btnDissolve\");\n        var btnWeichat = prepare.getChildByName(\"btnWeichat\");\n        var btnBack = prepare.getChildByName(\"btnBack\");\n        var isIdle = cc.vv.gameNetMgr.numOfGames == 0;\n        btnExit.active = !cc.vv.gameNetMgr.isOwner() && isIdle;\n        btnDispress.active = cc.vv.gameNetMgr.isOwner() && isIdle;\n        btnWeichat.active = isIdle;\n        btnBack.active = isIdle;\n    },\n    initEventHandlers: function initEventHandlers() {\n        var self = this;\n        this.node.on('new_user', function (data) {\n            self.initSingleSeat(data.detail);\n        });\n        this.node.on('user_state_changed', function (data) {\n            self.initSingleSeat(data.detail);\n        });\n        this.node.on('game_begin', function (data) {\n            self.refreshBtns();\n            self.initSeats();\n        });\n        this.node.on('game_num', function (data) {\n            self.refreshBtns();\n        });\n        this.node.on('voice_msg', function (data) {\n            var data = data.detail;\n            self._voiceMsgQueue.push(data);\n            self.playVoice();\n        });\n        this.node.on('chat_push', function (data) {\n            var data = data.detail;\n            var idx = cc.vv.gameNetMgr.getSeatIndexByID(data.sender);\n            var localIdx = cc.vv.gameNetMgr.getLocalIndex(idx);\n            self._seats[localIdx].chat(data.content);\n            self._seats2[localIdx].chat(data.content);\n        });\n        this.node.on('quick_chat_push', function (data) {\n            var data = data.detail;\n            var idx = cc.vv.gameNetMgr.getSeatIndexByID(data.sender);\n            var localIdx = cc.vv.gameNetMgr.getLocalIndex(idx);\n            var index = data.content;\n            var info = cc.vv.chat.getQuickChatInfo(index);\n            self._seats[localIdx].chat(info.content);\n            self._seats2[localIdx].chat(info.content);\n            cc.vv.audioMgr.playSFX(info.sound);\n        });\n        this.node.on('emoji_push', function (data) {\n            var data = data.detail;\n            var idx = cc.vv.gameNetMgr.getSeatIndexByID(data.sender);\n            var localIdx = cc.vv.gameNetMgr.getLocalIndex(idx);\n            console.log(data);\n            self._seats[localIdx].emoji(data.content);\n            self._seats2[localIdx].emoji(data.content);\n        });\n    },\n    initSeats: function initSeats() {\n        var seats = cc.vv.gameNetMgr.seats;\n        for (var i = 0; i < seats.length; ++i) {\n            this.initSingleSeat(seats[i]);\n        }\n    },\n    initSingleSeat: function initSingleSeat(seat) {\n        var index = cc.vv.gameNetMgr.getLocalIndex(seat.seatindex);\n        var isOffline = !seat.online;\n        var isZhuang = seat.seatindex == cc.vv.gameNetMgr.button;\n        console.log(\"isOffline:\" + isOffline);\n        this._seats[index].setInfo(seat.name, seat.score);\n        this._seats[index].setReady(seat.ready);\n        this._seats[index].setOffline(isOffline);\n        this._seats[index].setID(seat.userid);\n        this._seats[index].voiceMsg(false);\n        this._seats2[index].setInfo(seat.name, seat.score);\n        this._seats2[index].setZhuang(isZhuang);\n        this._seats2[index].setOffline(isOffline);\n        this._seats2[index].setID(seat.userid);\n        this._seats2[index].voiceMsg(false);\n    },\n    onBtnSettingsClicked: function onBtnSettingsClicked() {\n        cc.vv.popupMgr.showSettings();\n    },\n    onBtnBackClicked: function onBtnBackClicked() {\n        cc.vv.alert.show(\"返回大厅\", \"返回大厅房间仍会保留，快去邀请大伙来玩吧！\", function () {\n            cc.director.loadScene(\"newhall\");\n        }, true);\n    },\n    onBtnChatClicked: function onBtnChatClicked() {},\n    // 点击分享按钮，使用微信分享\n    onBtnWeichatClicked: function onBtnWeichatClicked() {\n        cc.vv.share.show();\n    },\n    onBtnDissolveClicked: function onBtnDissolveClicked() {\n        cc.vv.alert.show(\"解散房间\", \"解散房间不扣金币，是否确定解散？\", function () {\n            cc.vv.net.send(\"dispress\");\n        }, true);\n    },\n    onBtnExit: function onBtnExit() {\n        cc.vv.net.send(\"exit\");\n    },\n    playVoice: function playVoice() {\n        if (this._playingSeat == null && this._voiceMsgQueue.length) {\n            console.log(\"playVoice\");\n            var data = this._voiceMsgQueue.shift();\n            var idx = cc.vv.gameNetMgr.getSeatIndexByID(data.sender);\n            var localIndex = cc.vv.gameNetMgr.getLocalIndex(idx);\n            this._playingSeat = localIndex;\n            this._seats[localIndex].voiceMsg(true);\n            this._seats2[localIndex].voiceMsg(true);\n            var msgInfo = JSON.parse(data.content);\n            var msgfile = \"voicemsg.amr\";\n            console.log(msgInfo.msg.length);\n            this._lastPlayTime = Date.now() + msgInfo.time;\n            if (!cc.sys.isNative) {\n                var serverid = msgInfo['msg'];\n                window.downloadVoice(serverid);\n                return;\n            }\n            cc.vv.voiceMgr.writeVoice(msgfile, msgInfo.msg);\n            cc.vv.voiceMgr.play(msgfile);\n        }\n    },\n    // called every frame, uncomment this function to activate update callback\n    update: function update(dt) {\n        if (window.voice && window.voice.localId != null) {\n            var localId = window.voice.localId;\n            window.voice.localId = null;\n            cc.vv.audioMgr.pauseAll();\n            window.playVoice(localId);\n        }\n        var minutes = Math.floor(Date.now() / 1000 / 60);\n        if (this._lastMinute != minutes) {\n            this._lastMinute = minutes;\n            var date = new Date();\n            var h = date.getHours();\n            h = h < 10 ? \"0\" + h : h;\n            var m = date.getMinutes();\n            m = m < 10 ? \"0\" + m : m;\n            this._timeLabel.string = \"\" + h + \":\" + m;\n        }\n        if (this._lastPlayTime != null) {\n            if (Date.now() > this._lastPlayTime + 200) {\n                this.onPlayerOver();\n                this._lastPlayTime = null;\n            }\n        } else {\n            this.playVoice();\n        }\n    },\n    onPlayerOver: function onPlayerOver() {\n        if (!cc.sys.isNative) {\n            window.stopPlayVoice();\n        };\n        cc.vv.audioMgr.resumeAll();\n        console.log(\"onPlayCallback:\" + this._playingSeat);\n        var localIndex = this._playingSeat;\n        this._playingSeat = null;\n        this._seats[localIndex].voiceMsg(false);\n        this._seats2[localIndex].voiceMsg(false);\n    },\n    onDestroy: function onDestroy() {\n        cc.vv.voiceMgr.stop();\n        //        cc.vv.voiceMgr.onPlayCallback = null;\n    }\n});\n\ncc._RF.pop();","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/21/21e6af9a-8c63-434c-9c03-1db57703bda6.js":{"source":"\"use strict\";\ncc._RF.push(module, '21e6a+ajGNDTJwDHbV3A72m', 'ReplayCtrl');\n// scripts/components/ReplayCtrl.js\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        // foo: {\n        //    default: null,\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n        _nextPlayTime: 1,\n        _replay: null,\n        _isPlaying: true\n    },\n    // use this for initialization\n    onLoad: function onLoad() {\n        if (cc.vv == null) {\n            return;\n        }\n        this._replay = cc.find(\"Canvas/replay\");\n        this._replay.active = cc.vv.replayMgr.isReplay();\n    },\n    onBtnPauseClicked: function onBtnPauseClicked() {\n        this._isPlaying = false;\n    },\n    onBtnPlayClicked: function onBtnPlayClicked() {\n        this._isPlaying = true;\n    },\n    onBtnBackClicked: function onBtnBackClicked() {\n        cc.vv.replayMgr.clear();\n        cc.vv.gameNetMgr.reset();\n        cc.vv.gameNetMgr.roomId = null;\n        cc.director.loadScene(\"newhall\");\n    },\n    // called every frame, uncomment this function to activate update callback\n    update: function update(dt) {\n        if (cc.vv) {\n            if (this._isPlaying && cc.vv.replayMgr.isReplay() == true && this._nextPlayTime > 0) {\n                this._nextPlayTime -= dt;\n                if (this._nextPlayTime < 0) {\n                    this._nextPlayTime = cc.vv.replayMgr.takeAction();\n                }\n            }\n        }\n    }\n});\n\ncc._RF.pop();","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/21/21606fef-cbb4-4393-86a2-8b157a969635.js":{"source":"\"use strict\";\ncc._RF.push(module, '21606/vy7RDk4aiixV6lpY1', 'Morra');\n// scripts/components/Morra.js\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        _guessV: null,\n        _createboxV: null,\n        _create_gemsV: null,\n        _create_coinsV: null,\n        _create_tagV: null,\n        _seekboxV: null,\n        _alertV: null,\n        _alertContentV: null,\n        consu: 0 },\n    // use this for initialization\n    onLoad: function onLoad() {\n        this._guessV = cc.find(\"Canvas/guess\");\n        this._createboxV = this._guessV.getChildByName(\"createbox\");\n        this._create_gemsV = this._createboxV.getChildByName(\"create_gems\");\n        this._create_coinsV = this._createboxV.getChildByName(\"create_coins\");\n        this._create_tagV = this._createboxV.getChildByName(\"create_tag\");\n        this._seekboxV = this._guessV.getChildByName(\"seekbox\");\n        this._alertV = cc.find(\"Canvas/guessboxAlert\");\n        this._alertContentV = this._alertV.getChildByName(\"content\").getComponent(cc.Label);\n    },\n    //显示创建猜拳页面\n    onBtnShowMorra: function onBtnShowMorra() {\n        this._guessV.active = true;\n    },\n    //关闭猜拳页面\n    onBtnCloseMorra: function onBtnCloseMorra() {\n        this._guessV.active = false;\n    },\n    onBtnSetConsu: function onBtnSetConsu(ev, data) {\n        if (data == 1) {\n            this.consu = 1;\n            this._create_tagV.getChildByName(\"gems_n\").active = false;\n            this._create_tagV.getChildByName(\"coins_n\").active = true;\n            this._create_gemsV.active = false;\n            this._create_coinsV.active = true;\n        } else {\n            this.consu = 0;\n            this._create_tagV.getChildByName(\"gems_n\").active = true;\n            this._create_tagV.getChildByName(\"coins_n\").active = false;\n            this._create_gemsV.active = true;\n            this._create_coinsV.active = false;\n        }\n    },\n    //显示创建房间页面\n    onBtnShowCreat: function onBtnShowCreat() {\n        this._createboxV.active = true;\n        this._create_tagV.getChildByName(\"gems_n\").active = true;\n        this._create_tagV.getChildByName(\"coins_n\").active = false;\n        this._create_gemsV.active = true;\n        this._create_coinsV.active = false;\n        this.consu = 0;\n    },\n    //关闭创建房间页面\n    onBtnCloseCreat: function onBtnCloseCreat() {\n        this._createboxV.active = false;\n        this._create_gemsV.active = false;\n        this._create_coinsV.active = false;\n        this.consu = 0;\n    },\n    //显示加入房间页面\n    onBtnShowJoin: function onBtnShowJoin() {\n        this._seekboxV.active = true;\n    },\n    //关闭加入房间页面\n    onBtnCloseJoin: function onBtnCloseJoin() {\n        this._seekboxV.active = false;\n    },\n    //关闭弹框通知\n    onBtnCloseAlert: function onBtnCloseAlert() {\n        this._alertV.active = false;\n    },\n    onBtnSetBonus: function onBtnSetBonus(ev, data) {\n        if (this.consu == 0) {\n            this._create_gemsV.getChildByName(\"editbox\").getComponent(cc.EditBox).string = data;\n        } else {\n            this._create_coinsV.getChildByName(\"editbox\").getComponent(cc.EditBox).string = data;\n        }\n    },\n    //创建房间\n    creatMorraRoom: function creatMorraRoom() {\n        var self = this;\n        var difen;\n        if (this.consu == 0) {\n            difen = self._create_gemsV.getChildByName(\"editbox\").getComponent(cc.EditBox).string;\n        } else {\n            difen = self._create_coinsV.getChildByName(\"editbox\").getComponent(cc.EditBox).string;\n        }\n        console.log(\"--------difen------->>\", difen);\n        if (!cc.vv.utils.checkRate(difen) || parseInt(difen) <= 0) {\n            cc.vv.alert.show(\"提示\", \"请设置奖金数量！(只限整数)\");\n            // self._alertContentV.string = \"请设置奖金数量！(只限整数)\";\n            // self._alertV.active = true;\n            return;\n        }\n        var seiriNum = function seiriNum() {\n            if (difen.charAt(0) == '0') {\n                difen = difen.substr(1);\n                seiriNum();\n            }\n        };\n        seiriNum();\n        if (this.consu == 0) {\n            difen += \"0000\";\n        }\n        var onCreate = function onCreate(ret) {\n            if (ret.errcode !== 0) {\n                //console.log(ret.errmsg);\n                cc.vv.wc.hide();\n                var content = \"\";\n                if (ret.errcode == 2222) {\n                    content = \"金币不足，创建房间失败!\";\n                    console.log(\"金币不足，创建房间失败!\");\n                    // cc.vv.alert.show(\"提示\", \"金币不足，创建房间失败!\");\n                } else {\n                    content = \"创建房间失败,错误码\" + ret.errcode;\n                    console.log(\"创建房间失败,错误码\" + ret.errcode);\n                    // cc.vv.alert.show(\"提示\", \"创建房间失败,错误码:\" + ret.errcode);\n                }\n                cc.vv.alert.show(\"提示\", content);\n                // self._alertContentV.string = content;\n                // self._alertV.active = true;\n            } else {\n                console.log('创建房间成功！！！！！！');\n                //显示猜拳大厅\n                // self._morraHallV.active = true;\n                self.loadMorraHall();\n                cc.vv.userMgr.room_type = 1;\n                cc.vv.gameNetMgr.connectGameServer(ret);\n            }\n        };\n        var conf = {\n            room_type: 1, //1代表猜拳房间\n            difen: difen,\n            consu: self.consu };\n        var data = {\n            account: cc.vv.userMgr.account,\n            sign: cc.vv.userMgr.sign,\n            conf: JSON.stringify(conf)\n        };\n        console.log(data);\n        cc.vv.wc.show(\"正在创建房间\");\n        cc.vv.http.sendRequest(\"/create_private_room\", data, onCreate);\n    },\n    //加入房间\n    joinMorraRoom: function joinMorraRoom() {\n        var self = this;\n        var roomId = self._seekboxV.getChildByName(\"editbox\").getComponent(cc.EditBox).string;\n        if (!cc.vv.utils.checkRate(roomId)) {\n            // self._alertContentV.string = \"请输入正确的房间号\";\n            // self._alertV.active = true;\n            cc.vv.alert.show(\"提示\", \"请输入正确的房间号\");\n            return;\n        }\n        var content = null;\n        var data = {\n            account: cc.vv.userMgr.account,\n            sign: cc.vv.userMgr.sign,\n            room_type: 1,\n            roomId: roomId\n        };\n        var fn = function fn(ret) {\n            if (ret.errcode == 0) {\n                self.join(roomId);\n            } else if (ret.errcode == 1) {\n                content = \"猜拳房间[\" + roomId + \"]不存在，请重新输入!\";\n            }\n            if (content) cc.vv.alert.show(\"提示\", content);\n        };\n        cc.vv.http.sendRequest(\"/judge_room\", data, fn);\n    },\n    join: function join(roomId) {\n        var self = this;\n        console.log(\"----roomId---->>\", roomId);\n        cc.vv.wc.show(\"正在进入房间\");\n        cc.vv.userMgr.enterRoom(roomId, function (ret) {\n            cc.vv.wc.hide();\n            console.log(\"----ret.errcode---->>\", ret);\n            if (ret.errcode == 0) {\n                //显示猜拳大厅\n                // self._morraHallV.active = true;\n                cc.vv.gameNetMgr.initHandlers(1);\n                self.loadMorraHall();\n            } else {\n                var content = \"猜拳房间[\" + roomId + \"]不存在，请重新输入!\";\n                if (ret.errcode == 4) {\n                    content = \"房间[\" + roomId + \"]已满!\";\n                } else if (ret.errcode == 5) {\n                    content = \"钻石或金币不足！\";\n                }\n                // self._alertContentV.string = content;\n                // self._alertV.active = true;\n                cc.vv.alert.show(\"提示\", content);\n            }\n        });\n    },\n    //加载猜拳大厅\n    loadMorraHall: function loadMorraHall() {\n        cc.director.loadScene(\"caiquan\");\n    }\n});\n\ncc._RF.pop();","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/cc/cce5aed3-b1ab-4721-a35a-a0caae6cb36f.js":{"source":"\"use strict\";\ncc._RF.push(module, 'cce5a7TsatHIaNaoMqubLNv', 'MorraGame');\n// scripts/components/MorraGame.js\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        // _hallGemsV: null,\n        // _hallCoinsV: null,\n        _alertV: null, //提示框\n        _alertContentV: null,\n        _morraHallV: null, //大厅view\n        _roomIdV: null,\n        _seatsV: [], //座位view\n        _caiquanV: [],\n        //动画相关\n        _leftAnimation: null,\n        _rightAnimation: null,\n        _leftOpenAnim: null,\n        _rightOpenAnim: null,\n        _animTime: 3000,\n        _resultsV: null, //结果显示view\n        _currentQuanV: null, //当前选择手势的view\n        _winlabelV: null,\n        _winBgV: null,\n        currentQuan: -1, //当前选择的手势\n        isRandom: false, //是否随机手势\n        gameEndData: null, //对局结束数据\n        jianzi: 0,\n        shitou: 1,\n        bu: 2,\n        seatindex: 0, //当前位置 0左1右\n        seats: null,\n        canAgain: false, //能否继续游戏（当有人掉线或退出）\n        guize: null\n    },\n    // use this for initialization\n    onLoad: function onLoad() {\n        // this._hallGemsV = cc.find(\"Canvas/header/jinbi/gems\").getComponent(cc.Label);\n        // this._hallCoinsV = cc.find(\"Canvas/header/zuanshi/coins\").getComponent(cc.Label);\n        this.guize = cc.find(\"Canvas/guessbox/guize\");\n        this._alertV = cc.find(\"Canvas/guessboxAlert\");\n        this._alertContentV = this._alertV.getChildByName(\"content\").getComponent(cc.Label);\n        this._morraHallV = cc.find(\"Canvas/guessbox\");\n        this._roomIdV = this._morraHallV.getChildByName(\"roomId\").getComponent(cc.Label);\n        this.initSeatsView();\n        this.showWinCount(false);\n        this.initCaiquanView();\n        this.initEventHandlers();\n        this.setGemsAndCoins(cc.vv.userMgr.gems, cc.vv.userMgr.coins);\n        if (cc.vv.gameNetMgr.cq_data) {\n            console.log(\"------cq_data----\", cc.vv.gameNetMgr.cq_data);\n            this.seats = cc.vv.gameNetMgr.cq_data.seats;\n            this.initSeatsData(cc.vv.gameNetMgr.cq_data);\n        }\n        cc.vv.net.send('ready');\n    },\n    initSeatsView: function initSeatsView() {\n        var seat = [];\n        seat[0] = this._morraHallV.getChildByName(\"seat\").children[0].getComponent(cc.Label);\n        seat[1] = this._morraHallV.getChildByName(\"seat\").children[1].getComponent(cc.Label);\n        this._seatsV.seat = seat;\n        this._seatsV.difen = this._morraHallV.getChildByName(\"difen\").getComponent(cc.Label);\n        this._seatsV.gems = this._morraHallV.getChildByName(\"gemsBg\").getChildByName(\"gems\").getComponent(cc.Label);\n        this._seatsV.coins = this._morraHallV.getChildByName(\"coinsBg\").getChildByName(\"coins\").getComponent(cc.Label);\n        this._seatsV.wincont = this._morraHallV.getChildByName(\"winBg\").getChildByName(\"wincont\").getComponent(cc.Label);\n        this._winlabelV = this._morraHallV.getChildByName(\"winlabel\");\n        this._winBgV = this._morraHallV.getChildByName(\"winBg\");\n        this._seatsV.lastTime = this._morraHallV.getChildByName(\"lastTimeBg\").getChildByName(\"lastTime\").getComponent(cc.Label);\n    },\n    initCaiquanView: function initCaiquanView() {\n        var layout = this._morraHallV.getChildByName(\"content\").getChildByName(\"layout\");\n        this._caiquanV.left = layout.getChildByName(\"left\");\n        this._caiquanV.left.active = false;\n        this._caiquanV.right = layout.getChildByName(\"right\");\n        this._caiquanV.right.active = false;\n        this._leftAnimation = layout.getChildByName(\"l_anim\");\n        this._rightAnimation = layout.getChildByName(\"r_anim\");\n        this._leftOpenAnim = this._leftAnimation.getComponent(cc.Animation);\n        this._rightOpenAnim = this._rightAnimation.getComponent(cc.Animation);\n        this._leftXuanding = this._caiquanV.left.getChildByName('xuanding');\n        this._rightXuanding = this._caiquanV.right.getChildByName('xuanding');\n        this._resultsV = new Array();\n        this._resultsV.push(layout.getChildByName(\"result1\"));\n        this._resultsV.push(layout.getChildByName(\"result2\"));\n        this._resultsV.push(layout.getChildByName(\"result3\"));\n    },\n    initEventHandlers: function initEventHandlers() {\n        cc.vv.gameNetMgr.cqEventHandler = this.node;\n        var self = this;\n        //游戏开始\n        this.node.on('cq_begin', function (data) {\n            console.log('cq_begin====================>', data);\n            self.playOpenAnim();\n        });\n        //新增用户\n        this.node.on('cq_new_user', function (res) {\n            var data = res.detail.data;\n            cc.vv.gameNetMgr.cq_data = data;\n            self.seats = data.seats;\n            self.initSeatsData(data);\n        });\n        //游戏结束\n        this.node.on('cq_game_over', function (res) {\n            var data = res.detail.data;\n            self.gameEndData = data;\n            // self.playOpenAnim();\n            self.gameEnd();\n            var s = self;\n            var again = function again() {\n                if (s.seatindex == 0 && s.canAgain) {\n                    //如果是房主\n                    cc.vv.net.send('cq_again');\n                }\n                s.clearCq();\n            };\n            setTimeout(again, 2000);\n            // var data = data.detail.data;\n        });\n        //攻擂退出房间\n        this.node.on('cq_exit_notify', function (res) {\n            var userid = res.detail;\n            self.canAgain = false;\n            if (userid == cc.vv.userMgr.userId) {\n                self.clearCq();\n                self.seats = null;\n                self.seatindex = 0;\n            } else {\n                if (self.seats) {\n                    self.seats.pop();\n                    console.log(\"-------------self.seats--------->>\", self.seats);\n                    self._seatsV.seat[1].string = \"\";\n                    self.showWinCount(false);\n                }\n            }\n            self.getGemsAndCoins();\n        });\n        //房主解散房间\n        this.node.on('cq_dispress', function (res) {\n            var context = self;\n            var userid = res.detail;\n            if (userid == cc.vv.userMgr.userId) {} else {\n                cc.vv.alert.show(\"提示\", \"擂主逃跑了！,并赠送了你全部奖金！\", function () {\n                    context.loadHomeHall();\n                });\n            }\n            self.canAgain = false;\n            self.clearCq();\n            self.seats = null;\n            self.seatindex = 0;\n            self.getGemsAndCoins();\n        });\n        //倒计时\n        this.node.on('cq_game_time', function (res) {\n            var data = res.detail.data;\n            self._seatsV.lastTime.string = data;\n            if (data == 0) {\n                if (self.currentQuan == -1) {\n                    //倒计时结束随机选择手势\n                    self.isRandom = true;\n                    var num = Math.floor(Math.random() * 10) % 3;\n                    if (num == 0) {\n                        self.chuJianzi();\n                    } else if (num == 1) {\n                        self.chuShitou();\n                    } else {\n                        self.chuBu();\n                    }\n                }\n            }\n        });\n        //攻擂失败\n        this.node.on('cq_loser_notify', function (res) {\n            var context = self;\n            var userid = res.detail;\n            self.canAgain = false;\n            if (userid == cc.vv.userMgr.userId) {\n                self.clearCq();\n                self.seats = null;\n                self.seatindex = 0;\n                cc.vv.alert.show(\"提示\", \"您挑战失败！自动退出房间\", function () {\n                    context.loadHomeHall();\n                });\n            } else {\n                if (self.seats) {\n                    self.seats.pop();\n                    console.log(\"-------------cq_loser_notify--------->>\", self.seats);\n                    self._seatsV.seat[1].string = \"\";\n                }\n                self.showWinCount(false);\n            }\n            self.getGemsAndCoins();\n        });\n        //攻擂成功\n        this.node.on('cq_winner_notify', function (res) {\n            var context = self;\n            var userid = res.detail;\n            var str = \"\";\n            if (userid == cc.vv.userMgr.userId) {\n                cc.vv.alert.show(\"提示\", \"攻擂成功！并获得了全部奖金！\", function () {\n                    context.loadHomeHall();\n                });\n            } else {\n                cc.vv.alert.show(\"提示\", \"您被打败了！并将奖金赠送给了对手！\", function () {\n                    context.loadHomeHall();\n                });\n            }\n            self.canAgain = false;\n            self.clearCq();\n            self.seats = null;\n            self.seatindex = 0;\n            self.getGemsAndCoins();\n        });\n        //出拳通知\n        this.node.on('cq_chuquan_notify', function (data) {\n            //停止动画，显示已出拳\n            var userId = data.detail;\n            if (self.seats[0].userid == userId) {\n                // 擂主出拳\n                self._leftOpenAnim.stop();\n                self._leftAnimation.active = false;\n                self._caiquanV.left.active = true;\n                if (cc.vv.userMgr.userId != userId) {\n                    //不是本人的时候，显示已选定\n                    self._leftXuanding.active = true;\n                }\n            } else {\n                //userid\n                self._rightOpenAnim.stop();\n                self._rightAnimation.active = false;\n                self._caiquanV.right.active = true;\n                if (cc.vv.userMgr.userId != userId) {\n                    //不是本人的时候，显示已选定\n                    self._rightXuanding.active = true;\n                }\n            }\n        });\n        this.node.on('disconnect', function (res) {\n            var context = self;\n            self.canAgain = false;\n            self.seats = null;\n            self.seatindex = 0;\n        });\n    },\n    initSeatsData: function initSeatsData(data) {\n        var self = this;\n        var consu = data.conf.consu;\n        if (consu == 0) {\n            //金币\n            self._seatsV.difen.string = cc.vv.utils.showJinbi(data.conf.baseScore) + \"金币\";\n        } else {\n            //钻石\n            self._seatsV.difen.string = cc.vv.utils.showJinbi(data.conf.baseScore) + \"钻石\";\n        }\n        if (self.seats) {\n            self._roomIdV.string = \"房间号：\" + cc.vv.gameNetMgr.roomId;\n            for (var i = 0; i < self.seats.length; i++) {\n                self._seatsV.seat[i].string = self.seats[i].name;\n                if (self.seats[i].userid == cc.vv.userMgr.userId) {\n                    self._seatsV.wincont.string = self.seats[i].score;\n                    self.seatindex = self.seats[i].seatindex;\n                    self.getGemsAndCoins();\n                }\n            }\n            if (self.seats.length == 2 && self.seats[1].userid != 0) {\n                if (self.seats[0].userid == cc.vv.userMgr.userId) {\n                    //房主提示有人进入房间\n                    self._alertContentV.string = self.seats[1].name + \"进入了房间\";\n                    self._alertV.active = true;\n                    var context = self;\n                    setTimeout(function () {\n                        context._alertV.active = false;\n                    }, 3000);\n                }\n                this.showWinCount(true);\n            } else {\n                this.showWinCount(false);\n            }\n        }\n        self.canAgain = self.seats.length == 2 && self.seats[1].userid != 0;\n        self.clearCq();\n    },\n    gameEnd: function gameEnd() {\n        if (!this.gameEndData || this.gameEndData == null) {\n            return;\n        }\n        this._rightXuanding.active = false;\n        this._leftXuanding.active = false;\n        for (var i = 0; i < this.gameEndData.length; i++) {\n            if (this.gameEndData[i].seatIndex == this.seatindex) {\n                //如果是自己\n                // this._resultsV[this.gameEndData[i].wined].active = true;\n                this._resultsV[this.gameEndData[1].wined].active = true; //只显示攻擂者的输赢\n            } else {\n                this.gameOverShowGesture(this.gameEndData[i].chuQuan, i);\n            }\n            this._seatsV.wincont.string = i == 0 ? 0 : this.gameEndData[i].winCount; //显示攻擂者得分\n        }\n    },\n    clearCq: function clearCq() {\n        if (this._caiquanV) {\n            var left = this._caiquanV.left.children;\n            var right = this._caiquanV.right.children;\n            for (var i = 0; i < left.length; i++) {\n                for (var j = 0; j < left[i].children.length; j++) {\n                    left[i].children[j].active = false;\n                }\n            }\n            for (var i = 0; i < right.length; i++) {\n                for (var j = 0; j < right[i].children.length; j++) {\n                    right[i].children[j].active = false;\n                }\n            }\n        }\n        if (this._resultsV) {\n            for (var i = 0; i < this._resultsV.length; i++) {\n                this._resultsV[i].active = false;\n            }\n        }\n        this._currentQuanV = null;\n        this.currentQuan = -1;\n        this.isRandom = false;\n        this.gameEndData = null;\n        if (this._caiquanV) {\n            this._caiquanV.left.active = false;\n        }\n        if (this._caiquanV) {\n            this._caiquanV.right.active = false;\n        }\n    },\n    // 猜拳动画播放\n    playOpenAnim: function playOpenAnim() {\n        var self = this;\n        this._caiquanV.left.active = false;\n        this._caiquanV.right.active = false;\n        var leftAnim = function leftAnim() {\n            self._leftAnimation.active = true;\n            var animState1 = self._leftOpenAnim.play('caiquan2');\n            animState1.wrapMode = cc.WrapMode.Loop;\n        };\n        var rightAnim = function rightAnim() {\n            self._rightAnimation.active = true;\n            var animState2 = self._rightOpenAnim.play('caiquan1');\n            animState2.wrapMode = cc.WrapMode.Loop;\n        };\n        if (self.isRandom) {\n            leftAnim();\n            rightAnim();\n            return;\n        }\n        leftAnim();\n        rightAnim();\n    },\n    showGesture: function showGesture(type) {\n        //手势显示\n        if (this._currentQuanV && this._currentQuanV != null) {\n            this._currentQuanV.active = false;\n        }\n        var left = this._caiquanV.left.children;\n        var right = this._caiquanV.right.children;\n        for (var i in left) {\n            left[i].active = false;\n        }\n        for (var i in right) {\n            right[i].active = false;\n        }\n        if (this.seatindex == 0) {\n            //左边\n            left[0].active = true;\n            this._currentQuanV = left[0].children[type];\n        } else {\n            right[1].active = true;\n            this._currentQuanV = right[1].children[type];\n        }\n        this._currentQuanV.active = true;\n        this.currentQuan = type;\n        this._caiquanV.left.active = true;\n        this._caiquanV.right.active = true;\n    },\n    gameOverShowGesture: function gameOverShowGesture(type, index) {\n        var left = this._caiquanV.left.children;\n        var right = this._caiquanV.right.children;\n        if (index == 0) {\n            left[0].active = true;\n            left[0].children[type].active = true;\n        } else {\n            right[1].active = true;\n            right[1].children[type].active = true;\n        }\n        return;\n    },\n    //是否显示赢句次数\n    showWinCount: function showWinCount(flag) {\n        this._winlabelV.active = flag;\n        this._winBgV.active = flag;\n    },\n    //设置金币钻石数量\n    getGemsAndCoins: function getGemsAndCoins() {\n        var self = this;\n        cc.vv.userMgr.getGemsAndCoins(function (data) {\n            console.log(\"------getGemsAndCoins-------->\", data);\n            cc.vv.userMgr.gems = data.gems;\n            cc.vv.userMgr.coins = data.coins;\n            // self._hallGemsV.string = data.gems;\n            // self._hallCoinsV.string = data.coins;\n            self.setGemsAndCoins(data.gems, data.coins);\n        });\n    },\n    setGemsAndCoins: function setGemsAndCoins(gems, coins) {\n        if (this._seatsV && this._seatsV.gems && this._seatsV.coins) {\n            this._seatsV.gems.string = cc.vv.utils.showJinbi(gems);\n            this._seatsV.coins.string = coins;\n        }\n    },\n    //出剪子\n    chuJianzi: function chuJianzi() {\n        if (this.currentQuan == -1) {\n            this.showGesture(this.jianzi);\n            cc.vv.net.send('cq_shot', this.jianzi);\n        }\n    },\n    //出石头\n    chuShitou: function chuShitou() {\n        if (this.currentQuan == -1) {\n            this.showGesture(this.shitou);\n            cc.vv.net.send('cq_shot', this.shitou);\n        }\n    },\n    //出布\n    chuBu: function chuBu() {\n        if (this.currentQuan == -1) {\n            this.showGesture(this.bu);\n            cc.vv.net.send('cq_shot', this.bu);\n        }\n    },\n    //关闭弹框通知\n    onBtnCloseAlert: function onBtnCloseAlert() {\n        this._alertV.active = false;\n        this.loadHomeHall();\n        // this._morraHallV.active = false;\n    },\n    //关闭猜拳大厅\n    onBtnCloseRoom: function onBtnCloseRoom() {\n        var context = this;\n        var str = \"\";\n        if (this.seatindex == 0) {\n            //房主\n            if (this.seats.length == 2 && this.seats[1].userid != 0) {\n                str = \"您确定要放弃守擂！并将奖金赠送给了对手？\";\n            } else {\n                str = \"您确定要离开擂台？\";\n            }\n            cc.vv.alert.show(\"提示\", str, function () {\n                cc.vv.net.send('cq_dispress');\n                context.loadHomeHall();\n            }, true);\n        } else {\n            str = \"您手续费已扣除！您确定放弃攻擂？\";\n            cc.vv.alert.show(\"提示\", str, function () {\n                cc.vv.net.send('cq_exit');\n                context.loadHomeHall();\n            }, true);\n        }\n    },\n    //加载首页大厅\n    loadHomeHall: function loadHomeHall() {\n        cc.director.loadScene(\"newhall\");\n    },\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n    // },\n    //打开猜拳规则\n    onOpenguize: function onOpenguize() {\n        this.guize.active = true;\n    },\n    //打开猜拳规则\n    onCloseguize: function onCloseguize() {\n        this.guize.active = false;\n    }\n});\n\ncc._RF.pop();","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/df/df61be3e-1731-43bd-ba4e-e60f1435520c.js":{"source":"\"use strict\";\ncc._RF.push(module, 'df61b4+FzFDvbpO5g8UNVIM', 'NoticeTip');\n// scripts/components/NoticeTip.js\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        // foo: {\n        //    default: null,      // The default value will be used only when the component attaching\n        //                           to a node for the first time\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n        _guohu: null,\n        _info: null,\n        _guohuTime: -1\n    },\n    // use this for initialization\n    onLoad: function onLoad() {\n        this._guohu = cc.find(\"Canvas/tip_notice\");\n        this._guohu.active = false;\n        this._info = cc.find(\"Canvas/tip_notice/info\").getComponent(cc.Label);\n        var self = this;\n        this.node.on('push_notice', function (data) {\n            var data = data.detail;\n            self._guohu.active = true;\n            self._guohuTime = data.time;\n            self._info.string = data.info;\n        });\n    },\n    // called every frame, uncomment this function to activate update callback\n    update: function update(dt) {\n        if (this._guohuTime > 0) {\n            this._guohuTime -= dt;\n            if (this._guohuTime < 0) {\n                this._guohu.active = false;\n            }\n        }\n    }\n});\n\ncc._RF.pop();","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/6f/6fd6e021-897a-492e-8cee-2a5b1125d658.js":{"source":"\"use strict\";\ncc._RF.push(module, '6fd6eAhiXpJLozuKlsRJdZY', 'ZjhChat');\n// scripts/components/ZjhChat.js\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        // foo: {\n        //    default: null,\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n        _chatRoot: null,\n        _tabQuick: null,\n        _tabEmoji: null,\n        _iptChat: null,\n        _quickChatInfo: null,\n        _btnChat: null\n    },\n    // use this for initialization\n    onLoad: function onLoad() {\n        if (cc.vv == null) {\n            return;\n        }\n        cc.vv.zjhchat = this;\n        // this._btnChat = this.node.getChildByName(\"xinxi\");\n        // this._btnChat.active = cc.vv.replayMgr.isReplay() == false;\n        this._chatRoot = this.node.getChildByName(\"chat\");\n        this._chatRoot.active = false;\n        this._tabQuick = this._chatRoot.getChildByName(\"quickchatlist\");\n        this._tabEmoji = this._chatRoot.getChildByName(\"emojis\");\n        this._iptChat = this._chatRoot.getChildByName(\"iptChat\").getComponent(cc.EditBox);\n        this._quickChatInfo = {};\n        this._quickChatInfo[\"item0\"] = {\n            index: 0,\n            content: \"快点啊，都等到我花儿都谢谢了！\",\n            sound: \"fix_msg_1.mp3\"\n        };\n        this._quickChatInfo[\"item1\"] = {\n            index: 1,\n            content: \"怎么又断线了，网络怎么这么差啊！\",\n            sound: \"fix_msg_2.mp3\"\n        };\n        this._quickChatInfo[\"item2\"] = {\n            index: 2,\n            content: \"不要走，决战到天亮！\",\n            sound: \"fix_msg_3.mp3\"\n        };\n        this._quickChatInfo[\"item3\"] = {\n            index: 3,\n            content: \"你的牌打得也太好了！\",\n            sound: \"fix_msg_4.mp3\"\n        };\n        this._quickChatInfo[\"item4\"] = {\n            index: 4,\n            content: \"你是妹妹还是哥哥啊？\",\n            sound: \"fix_msg_5.mp3\"\n        };\n        this._quickChatInfo[\"item5\"] = {\n            index: 5,\n            content: \"和你合作真是太愉快了！\",\n            sound: \"fix_msg_6.mp3\"\n        };\n        this._quickChatInfo[\"item6\"] = {\n            index: 6,\n            content: \"大家好，很高兴见到各位！\",\n            sound: \"fix_msg_7.mp3\"\n        };\n        this._quickChatInfo[\"item7\"] = {\n            index: 7,\n            content: \"各位，真是不好意思，我得离开一会儿。\",\n            sound: \"fix_msg_8.mp3\"\n        };\n        this._quickChatInfo[\"item8\"] = {\n            index: 8,\n            content: \"不要吵了，专心玩游戏吧！\",\n            sound: \"fix_msg_9.mp3\"\n        };\n    },\n    getQuickChatInfo: function getQuickChatInfo(index) {\n        var key = \"item\" + index;\n        return this._quickChatInfo[key];\n    },\n\n    onBtnChatClicked: function onBtnChatClicked() {\n        this._chatRoot.active = true;\n    },\n    onBgClicked: function onBgClicked() {\n        this._chatRoot.active = false;\n    },\n    onTabClicked: function onTabClicked(event) {\n        if (event.target.name == \"tabQuick\") {\n            this._tabQuick.active = true;\n            this._tabEmoji.active = false;\n        } else if (event.target.name == \"tabEmoji\") {\n            this._tabQuick.active = false;\n            this._tabEmoji.active = true;\n        }\n    },\n    onQuickChatItemClicked: function onQuickChatItemClicked(event) {\n        this._chatRoot.active = false;\n        var info = this._quickChatInfo[event.target.name];\n        cc.vv.net.send(\"quick_chat\", info.index);\n    },\n    onEmojiItemClicked: function onEmojiItemClicked(event) {\n        console.log(event.target.name);\n        this._chatRoot.active = false;\n        cc.vv.net.send(\"emoji\", event.target.name);\n    },\n    onBtnSendChatClicked: function onBtnSendChatClicked() {\n        this._chatRoot.active = false;\n        if (this._iptChat.string == \"\") {\n            return;\n        }\n        cc.vv.net.send(\"chat\", this._iptChat.string);\n        this._iptChat.string = \"\";\n    }\n});\n\ncc._RF.pop();","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/6f/6fd98d93-ca2e-4d39-8256-b7f7c663c2e3.js":{"source":"\"use strict\";\ncc._RF.push(module, '6fd982Tyi5NOYJWt/fGY8Lj', 'OnBack');\n// scripts/components/OnBack.js\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        // foo: {\n        //    default: null,      // The default value will be used only when the component attaching\n        //                           to a node for the first time\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n    },\n    // use this for initialization\n    onLoad: function onLoad() {\n        var btn = this.node.getChildByName(\"btn_back\");\n        cc.vv.utils.addClickEvent(btn, this.node, \"OnBack\", \"onBtnClicked\");\n    },\n    onBtnClicked: function onBtnClicked(event) {\n        if (event.target.name == \"btn_back\") {\n            this.node.active = false;\n        }\n    }\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n    // },\n});\n\ncc._RF.pop();","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/27/279d9a4d-1464-41de-b0ff-9e0af52c85d0.js":{"source":"\"use strict\";\ncc._RF.push(module, '279d9pNFGRB3rD/ngr1LIXQ', 'PengGangs');\n// scripts/components/PengGangs.js\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        // foo: {\n        //    default: null,\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n    },\n    // use this for initialization\n    onLoad: function onLoad() {\n        if (!cc.vv) {\n            return;\n        }\n        var gameChild = this.node.getChildByName(\"game\");\n        var myself = gameChild.getChildByName(\"myself\");\n        var pengangroot = myself.getChildByName(\"penggangs\");\n        var realwidth = cc.director.getVisibleSize().width;\n        var scale = realwidth / 1280;\n        pengangroot.scaleX *= scale;\n        pengangroot.scaleY *= scale;\n        var self = this;\n        this.node.on('peng_notify', function (data) {\n            //刷新所有的牌\n            console.log(\"peng_notify\", data.detail);\n            var data = data.detail;\n            self.onPengGangChanged(data);\n        });\n        this.node.on('chi_notify', function (data) {\n            //刷新所有的牌\n            console.log(\"chi_notify-----penggang\", data.detail);\n            var data = data.detail;\n            self.onPengGangChanged(data);\n        });\n        this.node.on('gang_notify', function (data) {\n            //刷新所有的牌\n            //console.log(data.detail);\n            var data = data.detail;\n            self.onPengGangChanged(data.seatData);\n        });\n        this.node.on('game_begin', function (data) {\n            self.onGameBein();\n        });\n        var seats = cc.vv.gameNetMgr.seats;\n        for (var i in seats) {\n            this.onPengGangChanged(seats[i]);\n        }\n    },\n    onGameBein: function onGameBein() {\n        this.hideSide(\"myself\");\n        this.hideSide(\"right\");\n        this.hideSide(\"up\");\n        this.hideSide(\"left\");\n    },\n    hideSide: function hideSide(side) {\n        var gameChild = this.node.getChildByName(\"game\");\n        var myself = gameChild.getChildByName(side);\n        var pengangroot = myself.getChildByName(\"penggangs\");\n        if (pengangroot) {\n            for (var i = 0; i < pengangroot.childrenCount; ++i) {\n                pengangroot.children[i].active = false;\n            }\n        }\n    },\n    onPengGangChanged: function onPengGangChanged(seatData) {\n        if (seatData.angangs == null && seatData.diangangs == null && seatData.wangangs == null && seatData.pengs == null && seatData.chis == null) {\n            return;\n        }\n        var localIndex = cc.vv.gameNetMgr.getLocalIndex(seatData.seatindex);\n        var side = cc.vv.mahjongmgr.getSide(localIndex);\n        var pre = cc.vv.mahjongmgr.getFoldPre(localIndex);\n        console.log(\"onPengGangChanged\" + localIndex);\n        var gameChild = this.node.getChildByName(\"game\");\n        var myself = gameChild.getChildByName(side);\n        var pengangroot = myself.getChildByName(\"penggangs\");\n        for (var i = 0; i < pengangroot.childrenCount; ++i) {\n            pengangroot.children[i].active = false;\n        }\n        //初始化杠牌\n        var index = 0;\n        var gangs = seatData.angangs;\n        if (gangs) {\n            for (var i = 0; i < gangs.length; ++i) {\n                var mjid = gangs[i];\n                this.initPengAndGangs(pengangroot, side, pre, index, mjid, \"angang\");\n                index++;\n            }\n        }\n        var gangs = seatData.diangangs;\n        if (gangs) {\n            for (var i = 0; i < gangs.length; ++i) {\n                var mjid = gangs[i];\n                this.initPengAndGangs(pengangroot, side, pre, index, mjid, \"diangang\");\n                index++;\n            }\n        }\n        var gangs = seatData.wangangs;\n        if (gangs) {\n            for (var i = 0; i < gangs.length; ++i) {\n                var mjid = gangs[i];\n                this.initPengAndGangs(pengangroot, side, pre, index, mjid, \"wangang\");\n                index++;\n            }\n        }\n        //初始化碰牌\n        var pengs = seatData.pengs;\n        if (pengs) {\n            for (var i = 0; i < pengs.length; ++i) {\n                var mjid = pengs[i];\n                this.initPengAndGangs(pengangroot, side, pre, index, mjid, \"peng\");\n                index++;\n            }\n        }\n        // 吃的牌一定要以数组的形式存放,类似[[1,2,3],[3,4,5]];\n        //初始化吃牌\n        var chis = seatData.chis;\n        console.debug(\"显示吃牌操作\", chis);\n        if (chis) {\n            console.debug(\"吃的\", chis.length);\n            for (var i = 0; i < chis.length; ++i) {\n                var mjids = chis[i];\n                this.initChis(pengangroot, side, pre, index, mjids);\n                index++;\n            }\n        }\n    },\n    initPengAndGangs: function initPengAndGangs(pengangroot, side, pre, index, mjid, flag) {\n        console.info(\"initPengAndGangs\", pengangroot, side, pre, index, mjid, flag);\n        var pgroot = null;\n        if (pengangroot.childrenCount <= index) {\n            if (side == \"left\" || side == \"right\") {\n                pgroot = cc.instantiate(cc.vv.mahjongmgr.pengPrefabLeft);\n            } else {\n                pgroot = cc.instantiate(cc.vv.mahjongmgr.pengPrefabSelf);\n            }\n            pengangroot.addChild(pgroot);\n        } else {\n            pgroot = pengangroot.children[index];\n            pgroot.active = true;\n        }\n        if (side == \"left\") {\n            pgroot.y = -(index * 25 * 3);\n        } else if (side == \"right\") {\n            pgroot.y = index * 25 * 3;\n            pgroot.setLocalZOrder(-index);\n        } else if (side == \"myself\") {\n            pgroot.x = index * 55 * 3 + index * 10;\n        } else {\n            pgroot.x = -(index * 55 * 3);\n        }\n        var sprites = pgroot.getComponentsInChildren(cc.Sprite);\n        for (var s = 0; s < sprites.length; ++s) {\n            var sprite = sprites[s];\n            if (sprite.node.name == \"gang\") {\n                var isGang = flag != \"peng\";\n                sprite.node.active = isGang;\n                sprite.node.scaleX = 1.0;\n                sprite.node.scaleY = 1.0;\n                if (flag == \"angang\") {\n                    sprite.spriteFrame = cc.vv.mahjongmgr.getEmptySpriteFrame(side);\n                    if (side == \"myself\" || side == \"up\") {\n                        sprite.node.scaleX = 1.4;\n                        sprite.node.scaleY = 1.4;\n                    }\n                } else {\n                    sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(pre, mjid);\n                }\n            } else {\n                sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(pre, mjid);\n            }\n        }\n    },\n    // 吃牌\n    initChis: function initChis(pengangroot, side, pre, index, mjids) {\n        console.debug(\"initChis\", mjids);\n        var pgroot = null;\n        if (pengangroot.childrenCount <= index) {\n            if (side == \"left\" || side == \"right\") {\n                pgroot = cc.instantiate(cc.vv.mahjongmgr.pengPrefabLeft);\n            } else {\n                pgroot = cc.instantiate(cc.vv.mahjongmgr.pengPrefabSelf);\n            }\n            pengangroot.addChild(pgroot);\n        } else {\n            pgroot = pengangroot.children[index];\n            pgroot.active = true;\n        }\n        if (side == \"left\") {\n            pgroot.y = -(index * 25 * 3);\n        } else if (side == \"right\") {\n            pgroot.y = index * 25 * 3;\n            pgroot.setLocalZOrder(-index);\n        } else if (side == \"myself\") {\n            pgroot.x = index * 55 * 3 + index * 10;\n        } else {\n            pgroot.x = -(index * 55 * 3);\n        }\n        var sprites = pgroot.getComponentsInChildren(cc.Sprite);\n        for (var s = 0; s < sprites.length; ++s) {\n            var sprite = sprites[s];\n            if (sprite.node.name == \"gang\") {\n                sprite.node.active = false;\n            }\n            sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(pre, mjids[s]);\n        }\n    }\n});\n\ncc._RF.pop();","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/bc/bc0d254b-80bd-40be-8d7a-ead1cbb23089.js":{"source":"\"use strict\";\ncc._RF.push(module, 'bc0d2VLgL1Avo166tHLsjCJ', 'PopupMgr');\n// scripts/components/PopupMgr.js\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        // foo: {\n        //    default: null,\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n        _popuproot: null,\n        _settings: null,\n        _dissolveNotice: null,\n        _endTime: -1,\n        _extraInfo: null,\n        _noticeLabel: null\n    },\n    // use this for initialization\n    onLoad: function onLoad() {\n        if (cc.vv == null) {\n            return;\n        }\n        cc.vv.popupMgr = this;\n        this._popuproot = cc.find(\"Canvas/popups\");\n        this._settings = cc.find(\"Canvas/popups/settings\");\n        this._dissolveNotice = cc.find(\"Canvas/popups/dissolve_notice\");\n        this._noticeLabel = this._dissolveNotice.getChildByName(\"info\").getComponent(cc.Label);\n        this.closeAll();\n        this.addBtnHandler(\"settings/btn_close\");\n        this.addBtnHandler(\"settings/btn_sqjsfj\");\n        this.addBtnHandler(\"dissolve_notice/btn_agree\");\n        this.addBtnHandler(\"dissolve_notice/btn_reject\");\n        this.addBtnHandler(\"dissolve_notice/btn_ok\");\n        var self = this;\n        this.node.on(\"dissolve_notice\", function (event) {\n            var data = event.detail;\n            self.showDissolveNotice(data);\n        });\n        this.node.on(\"dissolve_cancel\", function (event) {\n            self.closeAll();\n        });\n    },\n    start: function start() {\n        if (cc.vv.gameNetMgr.dissoveData) {\n            this.showDissolveNotice(cc.vv.gameNetMgr.dissoveData);\n        }\n    },\n    addBtnHandler: function addBtnHandler(btnName) {\n        var btn = cc.find(\"Canvas/popups/\" + btnName);\n        this.addClickEvent(btn, this.node, \"PopupMgr\", \"onBtnClicked\");\n    },\n    addClickEvent: function addClickEvent(node, target, component, handler) {\n        var eventHandler = new cc.Component.EventHandler();\n        eventHandler.target = target;\n        eventHandler.component = component;\n        eventHandler.handler = handler;\n        var clickEvents = node.getComponent(cc.Button).clickEvents;\n        clickEvents.push(eventHandler);\n    },\n    onBtnClicked: function onBtnClicked(event) {\n        this.closeAll();\n        var btnName = event.target.name;\n        if (btnName == \"btn_agree\") {\n            cc.vv.net.send(\"dissolve_agree\");\n        } else if (btnName == \"btn_reject\") {\n            cc.vv.net.send(\"dissolve_reject\");\n        } else if (btnName == \"btn_sqjsfj\") {\n            cc.vv.net.send(\"dissolve_request\");\n        } else if (btnName == \"btn_ok\") {\n            this.closeAll();\n        }\n    },\n    closeAll: function closeAll() {\n        this._popuproot.active = false;\n        this._settings.active = false;\n        this._dissolveNotice.active = false;\n    },\n    showSettings: function showSettings() {\n        this.closeAll();\n        this._popuproot.active = true;\n        this._settings.active = true;\n    },\n    showDissolveRequest: function showDissolveRequest() {\n        this.closeAll();\n        this._popuproot.active = true;\n    },\n    showDissolveNotice: function showDissolveNotice(data) {\n        this._endTime = Date.now() / 1000 + data.time;\n        this._extraInfo = \"\";\n        for (var i = 0; i < data.states.length; ++i) {\n            var b = data.states[i];\n            var name = cc.vv.gameNetMgr.seats[i].name;\n            if (b) {\n                this._extraInfo += \"\\n[已同意] \" + name;\n            } else {\n                this._extraInfo += \"\\n[待确认] \" + name;\n            }\n        }\n        this.closeAll();\n        this._popuproot.active = true;\n        this._dissolveNotice.active = true;;\n    },\n    // called every frame, uncomment this function to activate update callback\n    update: function update(dt) {\n        if (this._endTime > 0) {\n            var lastTime = this._endTime - Date.now() / 1000;\n            if (lastTime < 0) {\n                this._endTime = -1;\n            }\n            var m = Math.floor(lastTime / 60);\n            var s = Math.ceil(lastTime - m * 60);\n            var str = \"\";\n            if (m > 0) {\n                str += m + \"分\";\n            }\n            this._noticeLabel.string = str + s + \"秒后房间将自动解散\" + this._extraInfo;\n        }\n    }\n});\n\ncc._RF.pop();","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/82/82087d25-b4c6-4d0d-896f-cebfaa083109.js":{"source":"\"use strict\";\ncc._RF.push(module, '820870ltMZNDYlvzr+qCDEJ', 'Seat');\n// scripts/components/Seat.js\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        _sprIcon: null,\n        _zhuang: null,\n        _ready: null,\n        _offline: null,\n        _lblName: null,\n        _lblScore: null,\n        _scoreBg: null,\n        _nddayingjia: null,\n        _voicemsg: null,\n        _chatBubble: null,\n        _emoji: null,\n        _lastChatTime: -1,\n        _userName: \"\",\n        _score: 0,\n        _dayingjia: false,\n        _isOffline: false,\n        _isReady: false,\n        _isZhuang: false,\n        _userId: null\n    },\n    // use this for initialization\n    onLoad: function onLoad() {\n        if (cc.vv == null) {\n            return;\n        }\n        this._sprIcon = this.node.getChildByName(\"icon\").getComponent(\"ImageLoader\");\n        this._lblName = this.node.getChildByName(\"name\").getComponent(cc.Label);\n        this._lblScore = this.node.getChildByName(\"score\").getComponent(cc.Label);\n        this._voicemsg = this.node.getChildByName(\"voicemsg\");\n        if (this._voicemsg) {\n            this._voicemsg.active = false;\n        }\n        if (this._sprIcon && this._sprIcon.getComponent(cc.Button)) {\n            cc.vv.utils.addClickEvent(this._sprIcon, this.node, \"Seat\", \"onIconClicked\");\n        }\n        this._offline = this.node.getChildByName(\"offline\");\n        this._ready = this.node.getChildByName(\"ready\");\n        this._zhuang = this.node.getChildByName(\"zhuang\");\n        this._scoreBg = this.node.getChildByName(\"Z_money_frame\");\n        this._nddayingjia = this.node.getChildByName(\"dayingjia\");\n        this._chatBubble = this.node.getChildByName(\"ChatBubble\");\n        if (this._chatBubble != null) {\n            this._chatBubble.active = false;\n        }\n        this._emoji = this.node.getChildByName(\"emoji\");\n        if (this._emoji != null) {\n            this._emoji.active = false;\n        }\n        this.refresh();\n        if (this._sprIcon && this._userId) {\n            this._sprIcon.setUserID(this._userId);\n        }\n    },\n    onIconClicked: function onIconClicked() {\n        var iconSprite = this._sprIcon.node.getComponent(cc.Sprite);\n        if (this._userId != null && this._userId > 0) {\n            var seat = cc.vv.gameNetMgr.getSeatByID(this._userId);\n            var sex = 0;\n            if (cc.vv.baseInfoMap) {\n                var info = cc.vv.baseInfoMap[this._userId];\n                if (info) {\n                    sex = info.sex;\n                }\n            }\n        }\n    },\n    refresh: function refresh() {\n        if (this._lblName != null) {\n            this._lblName.string = this._userName;\n        }\n        if (this._lblScore != null) {\n            this._lblScore.string = this._score;\n        }\n        if (this._nddayingjia != null) {\n            this._nddayingjia.active = this._dayingjia == true;\n        }\n        if (this._offline) {\n            this._offline.active = this._isOffline && this._userName != \"\";\n        }\n        if (this._ready) {\n            this._ready.active = this._isReady && cc.vv.gameNetMgr.numOfGames > 0;\n        }\n        if (this._zhuang) {\n            this._zhuang.active = this._isZhuang;\n        }\n        this.node.active = this._userName != null && this._userName != \"\";\n    },\n    setInfo: function setInfo(name, score, dayingjia) {\n        this._userName = name;\n        this._score = score;\n        if (this._score == null) {\n            this._score = 0;\n        }\n        this._dayingjia = dayingjia;\n        if (this._scoreBg != null) {\n            this._scoreBg.active = this._score != null;\n        }\n        if (this._lblScore != null) {\n            this._lblScore.node.active = this._score != null;\n        }\n        this.refresh();\n    },\n\n    setZhuang: function setZhuang(value) {\n        this._isZhuang = value;\n        if (this._zhuang) {\n            this._zhuang.active = value;\n        } else {\n            this._zhuang = this.node.getChildByName(\"zhuang\");\n            this._zhuang.active = value;\n        }\n    },\n    setReady: function setReady(isReady) {\n        this._isReady = isReady;\n        if (this._ready) {\n            this._ready.active = this._isReady && cc.vv.gameNetMgr.numOfGames > 0;\n        }\n    },\n    setID: function setID(id) {\n        var idNode = this.node.getChildByName(\"id\");\n        if (idNode) {\n            var lbl = idNode.getComponent(cc.Label);\n            lbl.string = \"ID:\" + id;\n        }\n        this._userId = id;\n        if (this._sprIcon) {\n            this._sprIcon.setUserID(id);\n        }\n    },\n    setOffline: function setOffline(isOffline) {\n        this._isOffline = isOffline;\n        if (this._offline) {\n            this._offline.active = this._isOffline && this._userName != \"\";\n        }\n    },\n    chat: function chat(content) {\n        if (this._chatBubble == null || this._emoji == null) {\n            return;\n        }\n        this._emoji.active = false;\n        this._chatBubble.active = true;\n        this._chatBubble.getComponent(cc.Label).string = content;\n        this._chatBubble.getChildByName(\"New Label\").getComponent(cc.Label).string = content;\n        this._lastChatTime = 3;\n    },\n    emoji: function emoji(_emoji) {\n        //emoji = JSON.parse(emoji);\n        if (this._emoji == null || this._emoji == null) {\n            return;\n        }\n        console.log(_emoji);\n        this._chatBubble.active = false;\n        this._emoji.active = true;\n        this._emoji.getComponent(cc.Animation).play(_emoji);\n        this._lastChatTime = 3;\n    },\n    voiceMsg: function voiceMsg(show) {\n        if (this._voicemsg) {\n            this._voicemsg.active = show;\n        }\n    },\n    // called every frame, uncomment this function to activate update callback\n    update: function update(dt) {\n        if (this._lastChatTime > 0) {\n            this._lastChatTime -= dt;\n            if (this._lastChatTime < 0) {\n                this._chatBubble.active = false;\n                this._emoji.active = false;\n                this._emoji.getComponent(cc.Animation).stop();\n            }\n        }\n    }\n});\n\ncc._RF.pop();","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/82/824eaa5e-4583-4a63-8449-ce0d99e18036.js":{"source":"\"use strict\";\ncc._RF.push(module, '824eapeRYNKY4RJzg2Z4YA2', 'RadioGroupMgr');\n// scripts/components/RadioGroupMgr.js\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        _groups: null\n    },\n    // use this for initialization\n    init: function init() {\n        this._groups = {};\n    },\n    add: function add(radioButton) {\n        var groupId = radioButton.groupId;\n        var buttons = this._groups[groupId];\n        if (buttons == null) {\n            buttons = [];\n            this._groups[groupId] = buttons;\n        }\n        buttons.push(radioButton);\n    },\n    del: function del(radioButton) {\n        var groupId = radioButton.groupId;\n        var buttons = this._groups[groupId];\n        if (buttons == null) {\n            return;\n        }\n        var idx = buttons.indexOf(radioButton);\n        if (idx != -1) {\n            buttons.splice(idx, 1);\n        }\n        if (buttons.length == 0) {\n            delete this._groups[groupId];\n        }\n    },\n    check: function check(radioButton) {\n        var groupId = radioButton.groupId;\n        var buttons = this._groups[groupId];\n        if (buttons == null) {\n            return;\n        }\n        for (var i = 0; i < buttons.length; ++i) {\n            var btn = buttons[i];\n            if (btn == radioButton) {\n                btn.check(true);\n            } else {\n                btn.check(false);\n            }\n        }\n    }\n});\n\ncc._RF.pop();","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/06/0693985b-e287-4861-abe0-25fe9d3a457d.js":{"source":"\"use strict\";\ncc._RF.push(module, '06939hb4odIYavgJf6dOkV9', 'SelectDn');\n// scripts/components/SelectDn.js\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        pm: cc.Node,\n        xz: cc.Node,\n        lb: cc.Node,\n        th: cc.Node,\n        gz: cc.Node,\n        hj: cc.Node,\n        // pmlable1: cc.Label,\n        // pmlable2: cc.Label,\n        pmlable3: cc.Label,\n        pmlable4: cc.Label,\n        // xzlable1: cc.Label,\n        // xzlable2: cc.Label,\n        xzlable3: cc.Label,\n        xzlable4: cc.Label,\n        // lblable1: cc.Label,\n        // lblable2: cc.Label,\n        lblable3: cc.Label,\n        lblable4: cc.Label,\n        // thlable1: cc.Label,\n        // thlable2: cc.Label,\n        thlable3: cc.Label,\n        thlable4: cc.Label,\n        // gzlable1: cc.Label,\n        // gzlable2: cc.Label,\n        gzlable3: cc.Label,\n        gzlable4: cc.Label,\n        // hjlable1: cc.Label,\n        // hjlable2: cc.Label,\n        hjlable3: cc.Label,\n        hjlable4: cc.Label\n    },\n    // use this for initialization\n    onLoad: function onLoad() {\n        this.initButtonHandler(this.pm);\n        this.initButtonHandler(this.xz);\n        this.initButtonHandler(this.lb);\n        this.initButtonHandler(this.th);\n        this.initButtonHandler(this.gz);\n        this.initButtonHandler(this.hj);\n    },\n    initView: function initView() {\n        var self = this;\n        var fn = function fn(ret) {\n            if (ret) {\n                for (var i = 0; i < ret.length; i++) {\n                    if (i == 0) {\n                        self.pm.scene = ret[i].id;\n                        // self.pmlable1.string = ret[i].name;\n                        // self.pmlable2.string = ret[i].consume_type ? (\"钻石\" + ret[i].consume_num) : (\"金币\" + ret[i].consume_num);\n                        self.pmlable3.string = ret[i].online;\n                        self.pmlable4.string = \"进房下限\" + (ret[i].limit_type ? ret[i].limit_num : ret[i].limit_num);\n                    } else if (i == 1) {\n                        self.xz.scene = ret[i].id;\n                        // self.xzlable1.string = ret[i].name;\n                        // self.xzlable2.string = ret[i].consume_type ? (\"钻石\" + ret[i].consume_num) : (\"金币\" + ret[i].consume_num);\n                        self.xzlable3.string = ret[i].online;\n                        self.xzlable4.string = \"进房下限\" + (ret[i].limit_type ? ret[i].limit_num : ret[i].limit_num);\n                    } else if (i == 2) {\n                        self.lb.scene = ret[i].id;\n                        // self.lblable1.string = ret[i].name;\n                        // self.lblable2.string = ret[i].consume_type ? (\"钻石\" + ret[i].consume_num) : (\"金币\" + ret[i].consume_num);\n                        self.lblable3.string = ret[i].online;\n                        self.lblable4.string = \"进房下限\" + (ret[i].limit_type ? ret[i].limit_num : ret[i].limit_num);\n                    } else if (i == 3) {\n                        self.th.scene = ret[i].id;\n                        // self.thlable1.string = ret[i].name;\n                        // self.thlable2.string = ret[i].consume_type ? (\"钻石\" + ret[i].consume_num) : (\"金币\" + ret[i].consume_num);\n                        self.thlable3.string = ret[i].online;\n                        self.thlable4.string = \"进房下限\" + (ret[i].limit_type ? ret[i].limit_num : ret[i].limit_num);\n                    } else if (i == 4) {\n                        self.gz.scene = ret[i].id;\n                        // self.gzlable1.string = ret[i].name;\n                        // self.gzlable2.string = ret[i].consume_type ? (\"钻石\" + ret[i].consume_num) : (\"金币\" + ret[i].consume_num);\n                        self.gzlable3.string = ret[i].online;\n                        self.gzlable4.string = \"进房下限\" + (ret[i].limit_type ? ret[i].limit_num : ret[i].limit_num);\n                    } else if (i == 5) {\n                        self.hj.scene = ret[i].id;\n                        // self.hjlable1.string = ret[i].name;\n                        // self.hjlable2.string = ret[i].consume_type ? (\"钻石\" + ret[i].consume_num) : (\"金币\" + ret[i].consume_num);\n                        self.hjlable3.string = ret[i].online;\n                        self.hjlable4.string = \"进房下限\" + (ret[i].limit_type ? ret[i].limit_num : ret[i].limit_num);\n                    }\n                };\n            }\n        };\n        var data = {\n            account: cc.vv.userMgr.account,\n            sign: cc.vv.userMgr.sign,\n            room_type: 3\n        };\n        cc.vv.http.sendRequest(\"/get_scene\", data, fn);\n    },\n    onBtnBack: function onBtnBack() {\n        this.node.active = false;\n    },\n    initButtonHandler: function initButtonHandler(btn) {\n        cc.vv.utils.addClickEvent(btn, this.node, \"SelectDn\", \"matchRoom\");\n    },\n    matchRoom: function matchRoom(event) {\n        var conf = {\n            room_type: 3, //3代表斗牛房间\n            scene: event.target.scene,\n            genre: 1,\n            type: 'dn'\n        };\n        var data = {\n            account: cc.vv.userMgr.account,\n            sign: cc.vv.userMgr.sign,\n            conf: JSON.stringify(conf)\n        };\n        cc.vv.wc.show(\"寻找房间\");\n        var onSearch = function onSearch(ret) {\n            if (ret.errcode !== 0) {\n                cc.vv.wc.hide();\n                //console.log(ret.errmsg);\n                if (ret.errcode == 2) {\n                    if (ret.errmsg == -1) {\n                        cc.vv.alert.show(\"提示\", \"钻石不够，无法匹配\");\n                    } else {\n                        cc.vv.alert.show(\"提示\", \"金币不够，无法匹配\");\n                    }\n                } else {\n                    if (ret.errcode == -3) {\n                        cc.vv.alert.show(\"提示\", \"您已加入房间，无法匹配\");\n                    } else {\n                        cc.vv.alert.show(\"提示\", \"创建房间失败,错误码:\" + ret.errcode);\n                    }\n                }\n            } else {\n                cc.vv.userMgr.room_type = conf.room_type;\n                cc.vv.userMgr.scene = conf.scene;\n                cc.vv.userMgr.e_roomid = ret.roomid;\n                cc.vv.gameNetMgr.connectGameServer(ret);\n            }\n        };\n        cc.vv.http.sendRequest(\"/match_room\", data, onSearch);\n    }\n});\n\ncc._RF.pop();","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/0c/0ceece6b-9a45-4dc1-b298-88c0dff09a56.js":{"source":"\"use strict\";\ncc._RF.push(module, '0ceec5rmkVNwbKYiMDf8JpW', 'SelectZjh');\n// scripts/components/SelectZjh.js\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        pm: cc.Node,\n        xz: cc.Node,\n        lb: cc.Node,\n        th: cc.Node,\n        gz: cc.Node,\n        hj: cc.Node,\n        // pmlable1: cc.Label,\n        // pmlable2: cc.Label,\n        pmlable3: cc.Label,\n        pmlable4: cc.Label,\n        // xzlable1: cc.Label,\n        // xzlable2: cc.Label,\n        xzlable3: cc.Label,\n        xzlable4: cc.Label,\n        // lblable1: cc.Label,\n        // lblable2: cc.Label,\n        lblable3: cc.Label,\n        lblable4: cc.Label,\n        // thlable1: cc.Label,\n        // thlable2: cc.Label,\n        thlable3: cc.Label,\n        thlable4: cc.Label,\n        // gzlable1: cc.Label,\n        // gzlable2: cc.Label,\n        gzlable3: cc.Label,\n        gzlable4: cc.Label,\n        // hjlable1: cc.Label,\n        // hjlable2: cc.Label,\n        hjlable3: cc.Label,\n        hjlable4: cc.Label\n    },\n    // use this for initialization\n    onLoad: function onLoad() {\n        this.initButtonHandler(this.pm);\n        this.initButtonHandler(this.xz);\n        this.initButtonHandler(this.lb);\n        this.initButtonHandler(this.th);\n        this.initButtonHandler(this.gz);\n        this.initButtonHandler(this.hj);\n    },\n    initView: function initView() {\n        var self = this;\n        var fn = function fn(ret) {\n            if (ret) {\n                for (var i = 0; i < ret.length; i++) {\n                    if (i == 0) {\n                        self.pm.scene = ret[i].id;\n                        // self.pmlable1.string = ret[i].name;\n                        // self.pmlable2.string = ret[i].consume_type ? (\"钻石\" + ret[i].consume_num) : (\"金币\" + ret[i].consume_num);\n                        self.pmlable3.string = ret[i].online;\n                        self.pmlable4.string = \"进房下限\" + (ret[i].limit_type ? ret[i].limit_num : ret[i].limit_num);\n                    } else if (i == 1) {\n                        self.xz.scene = ret[i].id;\n                        // self.xzlable1.string = ret[i].name;\n                        // self.xzlable2.string = ret[i].consume_type ? (\"钻石\" + ret[i].consume_num) : (\"金币\" + ret[i].consume_num);\n                        self.xzlable3.string = ret[i].online;\n                        self.xzlable4.string = \"进房下限\" + (ret[i].limit_type ? ret[i].limit_num : ret[i].limit_num);\n                    } else if (i == 2) {\n                        self.lb.scene = ret[i].id;\n                        // self.lblable1.string = ret[i].name;\n                        // self.lblable2.string = ret[i].consume_type ? (\"钻石\" + ret[i].consume_num) : (\"金币\" + ret[i].consume_num);\n                        self.lblable3.string = ret[i].online;\n                        self.lblable4.string = \"进房下限\" + (ret[i].limit_type ? ret[i].limit_num : ret[i].limit_num);\n                    } else if (i == 3) {\n                        self.th.scene = ret[i].id;\n                        // self.thlable1.string = ret[i].name;\n                        // self.thlable2.string = ret[i].consume_type ? (\"钻石\" + ret[i].consume_num) : (\"金币\" + ret[i].consume_num);\n                        self.thlable3.string = ret[i].online;\n                        self.thlable4.string = \"进房下限\" + (ret[i].limit_type ? ret[i].limit_num : ret[i].limit_num);\n                    } else if (i == 4) {\n                        self.gz.scene = ret[i].id;\n                        // self.gzlable1.string = ret[i].name;\n                        // self.gzlable2.string = ret[i].consume_type ? (\"钻石\" + ret[i].consume_num) : (\"金币\" + ret[i].consume_num);\n                        self.gzlable3.string = ret[i].online;\n                        self.gzlable4.string = \"进房下限\" + (ret[i].limit_type ? ret[i].limit_num : ret[i].limit_num);\n                    } else if (i == 5) {\n                        self.hj.scene = ret[i].id;\n                        // self.hjlable1.string = ret[i].name;\n                        // self.hjlable2.string = ret[i].consume_type ? (\"钻石\" + ret[i].consume_num) : (\"金币\" + ret[i].consume_num);\n                        self.hjlable3.string = ret[i].online;\n                        self.hjlable4.string = \"进房下限\" + (ret[i].limit_type ? ret[i].limit_num : ret[i].limit_num);\n                    }\n                };\n            }\n        };\n        var data = {\n            account: cc.vv.userMgr.account,\n            sign: cc.vv.userMgr.sign,\n            room_type: 2\n        };\n        cc.vv.http.sendRequest(\"/get_scene\", data, fn);\n    },\n    onBtnBack: function onBtnBack() {\n        this.node.active = false;\n    },\n    initButtonHandler: function initButtonHandler(btn) {\n        cc.vv.utils.addClickEvent(btn, this.node, \"SelectZjh\", \"matchRoom\");\n    },\n    matchRoom: function matchRoom(event) {\n        var conf = {\n            room_type: 2, //2代表扎金花房间\n            scene: event.target.scene,\n            genre: 1,\n            type: 'zjh'\n        };\n        var data = {\n            account: cc.vv.userMgr.account,\n            sign: cc.vv.userMgr.sign,\n            conf: JSON.stringify(conf)\n        };\n        cc.vv.wc.show(\"寻找房间\");\n        var onSearch = function onSearch(ret) {\n            if (ret.errcode !== 0) {\n                cc.vv.wc.hide();\n                //console.log(ret.errmsg);\n                if (ret.errcode == 2) {\n                    if (ret.errmsg == -1) {\n                        cc.vv.alert.show(\"提示\", \"钻石不够，无法匹配\");\n                    } else {\n                        cc.vv.alert.show(\"提示\", \"金币不够，无法匹配\");\n                    }\n                } else {\n                    if (ret.errcode == -3) {\n                        cc.vv.alert.show(\"提示\", \"您已加入房间，无法匹配\");\n                    } else {\n                        cc.vv.alert.show(\"提示\", \"创建房间失败,错误码:\" + ret.errcode);\n                    }\n                }\n            } else {\n                cc.vv.userMgr.room_type = conf.room_type;\n                cc.vv.userMgr.scene = conf.scene;\n                cc.vv.userMgr.e_roomid = ret.roomid;\n                cc.vv.gameNetMgr.connectGameServer(ret);\n            }\n        };\n        cc.vv.http.sendRequest(\"/match_room\", data, onSearch);\n    }\n});\n\ncc._RF.pop();","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/0c/0ca879af-aea6-4cb2-a3bb-3cddfc86da54.js":{"source":"\"use strict\";\ncc._RF.push(module, '0ca87mvrqZMsqO7PN38htpU', 'SelectDzpk');\n// scripts/components/SelectDzpk.js\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        pm: cc.Node,\n        xz: cc.Node,\n        lb: cc.Node,\n        th: cc.Node,\n        gz: cc.Node,\n        hj: cc.Node,\n        // pmlable1: cc.Label,\n        // pmlable2: cc.Label,\n        pmlable3: cc.Label,\n        pmlable4: cc.Label,\n        // xzlable1: cc.Label,\n        // xzlable2: cc.Label,\n        xzlable3: cc.Label,\n        xzlable4: cc.Label,\n        // lblable1: cc.Label,\n        // lblable2: cc.Label,\n        lblable3: cc.Label,\n        lblable4: cc.Label,\n        // thlable1: cc.Label,\n        // thlable2: cc.Label,\n        thlable3: cc.Label,\n        thlable4: cc.Label,\n        // gzlable1: cc.Label,\n        // gzlable2: cc.Label,\n        gzlable3: cc.Label,\n        gzlable4: cc.Label,\n        // hjlable1: cc.Label,\n        // hjlable2: cc.Label,\n        hjlable3: cc.Label,\n        hjlable4: cc.Label\n    },\n    // use this for initialization\n    onLoad: function onLoad() {\n        this.initButtonHandler(this.pm);\n        this.initButtonHandler(this.xz);\n        this.initButtonHandler(this.lb);\n        this.initButtonHandler(this.th);\n        this.initButtonHandler(this.gz);\n        this.initButtonHandler(this.hj);\n    },\n    initView: function initView() {\n        var self = this;\n        var fn = function fn(ret) {\n            if (ret) {\n                for (var i = 0; i < ret.length; i++) {\n                    if (i == 0) {\n                        self.pm.scene = ret[i].id;\n                        // self.pmlable1.string = ret[i].name;\n                        // self.pmlable2.string = ret[i].consume_type ? (\"钻石\" + ret[i].consume_num) : (\"金币\" + ret[i].consume_num);\n                        self.pmlable3.string = ret[i].online;\n                        self.pmlable4.string = \"进房下限\" + (ret[i].limit_type ? ret[i].limit_num : ret[i].limit_num);\n                    } else if (i == 1) {\n                        self.xz.scene = ret[i].id;\n                        // self.xzlable1.string = ret[i].name;\n                        // self.xzlable2.string = ret[i].consume_type ? (\"钻石\" + ret[i].consume_num) : (\"金币\" + ret[i].consume_num);\n                        self.xzlable3.string = ret[i].online;\n                        self.xzlable4.string = \"进房下限\" + (ret[i].limit_type ? ret[i].limit_num : ret[i].limit_num);\n                    } else if (i == 2) {\n                        self.lb.scene = ret[i].id;\n                        // self.lblable1.string = ret[i].name;\n                        // self.lblable2.string = ret[i].consume_type ? (\"钻石\" + ret[i].consume_num) : (\"金币\" + ret[i].consume_num);\n                        self.lblable3.string = ret[i].online;\n                        self.lblable4.string = \"进房下限\" + (ret[i].limit_type ? ret[i].limit_num : ret[i].limit_num);\n                    } else if (i == 3) {\n                        self.th.scene = ret[i].id;\n                        // self.thlable1.string = ret[i].name;\n                        // self.thlable2.string = ret[i].consume_type ? (\"钻石\" + ret[i].consume_num) : (\"金币\" + ret[i].consume_num);\n                        self.thlable3.string = ret[i].online;\n                        self.thlable4.string = \"进房下限\" + (ret[i].limit_type ? ret[i].limit_num : ret[i].limit_num);\n                    } else if (i == 4) {\n                        self.gz.scene = ret[i].id;\n                        // self.gzlable1.string = ret[i].name;\n                        // self.gzlable2.string = ret[i].consume_type ? (\"钻石\" + ret[i].consume_num) : (\"金币\" + ret[i].consume_num);\n                        self.gzlable3.string = ret[i].online;\n                        self.gzlable4.string = \"进房下限\" + (ret[i].limit_type ? ret[i].limit_num : ret[i].limit_num);\n                    } else if (i == 5) {\n                        self.hj.scene = ret[i].id;\n                        // self.hjlable1.string = ret[i].name;\n                        // self.hjlable2.string = ret[i].consume_type ? (\"钻石\" + ret[i].consume_num) : (\"金币\" + ret[i].consume_num);\n                        self.hjlable3.string = ret[i].online;\n                        self.hjlable4.string = \"进房下限\" + (ret[i].limit_type ? ret[i].limit_num : ret[i].limit_num);\n                    }\n                };\n            }\n        };\n        var data = {\n            account: cc.vv.userMgr.account,\n            sign: cc.vv.userMgr.sign,\n            room_type: 4\n        };\n        cc.vv.http.sendRequest(\"/get_scene\", data, fn);\n    },\n    onBtnBack: function onBtnBack() {\n        this.node.active = false;\n    },\n    initButtonHandler: function initButtonHandler(btn) {\n        cc.vv.utils.addClickEvent(btn, this.node, \"SelectDzpk\", \"matchRoom\");\n    },\n    matchRoom: function matchRoom(event) {\n        var conf = {\n            room_type: 4, //4代表德州扑克房间\n            scene: event.target.scene,\n            genre: 1,\n            type: 'dzpk'\n        };\n        var data = {\n            account: cc.vv.userMgr.account,\n            sign: cc.vv.userMgr.sign,\n            conf: JSON.stringify(conf)\n        };\n        cc.vv.wc.show(\"寻找房间\");\n        var onSearch = function onSearch(ret) {\n            if (ret.errcode !== 0) {\n                cc.vv.wc.hide();\n                //console.log(ret.errmsg);\n                if (ret.errcode == 2) {\n                    if (ret.errmsg == -1) {\n                        cc.vv.alert.show(\"提示\", \"钻石不够，无法匹配\");\n                    } else {\n                        cc.vv.alert.show(\"提示\", \"金币不够，无法匹配\");\n                    }\n                } else {\n                    if (ret.errcode == -3) {\n                        cc.vv.alert.show(\"提示\", \"您已加入房间，无法匹配\");\n                    } else {\n                        cc.vv.alert.show(\"提示\", \"创建房间失败,错误码:\" + ret.errcode);\n                    }\n                }\n            } else {\n                cc.vv.userMgr.room_type = conf.room_type;\n                cc.vv.userMgr.scene = conf.scene;\n                cc.vv.userMgr.e_roomid = ret.roomid;\n                cc.vv.gameNetMgr.connectGameServer(ret);\n            }\n        };\n        cc.vv.http.sendRequest(\"/match_room\", data, onSearch);\n    }\n});\n\ncc._RF.pop();","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/bd/bd8f24f3-2507-47f8-b338-718400ccf0b7.js":{"source":"\"use strict\";\ncc._RF.push(module, 'bd8f2TzJQdH+LM4cYQAzPC3', 'SelectMj');\n// scripts/components/SelectMj.js\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        btmj: cc.Node,\n        whmj: cc.Node,\n        jrfj: cc.Node,\n        fhfj: cc.Node\n    },\n    // use this for initialization\n    onLoad: function onLoad() {\n        this.initButtonHandler(this.btmj);\n        this.initButtonHandler(this.whmj);\n        this.initButtonHandler(this.jrfj);\n        this.initButtonHandler(this.fhfj);\n        if (cc.vv.gameNetMgr.roomId) {\n            this.jrfj.active = false;\n            this.fhfj.active = true;\n        } else {\n            this.jrfj.active = true;\n            this.fhfj.active = false;\n        }\n    },\n    initView: function initView() {},\n    onBtnBack: function onBtnBack() {\n        this.node.active = false;\n    },\n    initButtonHandler: function initButtonHandler(btn) {\n        cc.vv.utils.addClickEvent(btn, this.node, \"SelectMj\", \"onClickBtn\");\n    },\n    onClickBtn: function onClickBtn(event) {\n        switch (event.target.name) {\n            case 'mj_join':\n                cc.find(\"Canvas/JoinGame\").active = true;\n                break;\n            case 'mj_back':\n                this.onReturnGameClicked();\n                break;\n            case 'baotou':\n                if (cc.vv.gameNetMgr.roomId) {\n                    this.onReturnGameClicked();\n                } else {\n                    cc.find(\"Canvas/CreateRoom\").active = true;\n                }\n                break;\n            case 'wuhan':\n                // cc.find(\"Canvas/JoinGame\").active = true;\n                break;\n        }\n    },\n    onReturnGameClicked: function onReturnGameClicked() {\n        cc.director.loadScene(\"mjgame\");\n    }\n});\n\ncc._RF.pop();","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/4c/4c04fc9d-f3d2-4065-8eea-1a3bee6e2f9f.js":{"source":"\"use strict\";\ncc._RF.push(module, '4c04fyd89JAZY7qGjvubi+f', 'Settings');\n// scripts/components/Settings.js\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        // foo: {\n        //    default: null,      // The default value will be used only when the component attaching\n        //                           to a node for the first time\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n        _btnYXOpen: null,\n        _btnYXClose: null,\n        _btnYYOpen: null,\n        _btnYYClose: null\n    },\n    // use this for initialization\n    onLoad: function onLoad() {\n        if (cc.vv == null) {\n            return;\n        }\n        this._btnYXOpen = this.node.getChildByName(\"yinxiao\").getChildByName(\"btn_yx_open\");\n        this._btnYXClose = this.node.getChildByName(\"yinxiao\").getChildByName(\"btn_yx_close\");\n        this._btnYYOpen = this.node.getChildByName(\"yinyue\").getChildByName(\"btn_yy_open\");\n        this._btnYYClose = this.node.getChildByName(\"yinyue\").getChildByName(\"btn_yy_close\");\n        this.initButtonHandler(this.node.getChildByName(\"btn_close\"));\n        this.initButtonHandler(this.node.getChildByName(\"btn_exit\"));\n        this.initButtonHandler(this._btnYXOpen);\n        this.initButtonHandler(this._btnYXClose);\n        this.initButtonHandler(this._btnYYOpen);\n        this.initButtonHandler(this._btnYYClose);\n        var slider = this.node.getChildByName(\"yinxiao\").getChildByName(\"progress\");\n        cc.vv.utils.addSlideEvent(slider, this.node, \"Settings\", \"onSlided\");\n        var slider = this.node.getChildByName(\"yinyue\").getChildByName(\"progress\");\n        cc.vv.utils.addSlideEvent(slider, this.node, \"Settings\", \"onSlided\");\n        this.refreshVolume();\n    },\n    onSlided: function onSlided(slider) {\n        if (slider.node.parent.name == \"yinxiao\") {\n            cc.vv.audioMgr.setSFXVolume(slider.progress);\n        } else if (slider.node.parent.name == \"yinyue\") {\n            cc.vv.audioMgr.setBGMVolume(slider.progress);\n        }\n        this.refreshVolume();\n    },\n    initButtonHandler: function initButtonHandler(btn) {\n        cc.vv.utils.addClickEvent(btn, this.node, \"Settings\", \"onBtnClicked\");\n    },\n    refreshVolume: function refreshVolume() {\n        this._btnYXClose.active = cc.vv.audioMgr.sfxVolume > 0;\n        this._btnYXOpen.active = !this._btnYXClose.active;\n        var yx = this.node.getChildByName(\"yinxiao\");\n        var width = 430 * cc.vv.audioMgr.sfxVolume;\n        var progress = yx.getChildByName(\"progress\");\n        progress.getComponent(cc.Slider).progress = cc.vv.audioMgr.sfxVolume;\n        progress.getChildByName(\"progress\").width = width;\n        //yx.getChildByName(\"btn_progress\").x = progress.x + width;\n        this._btnYYClose.active = cc.vv.audioMgr.bgmVolume > 0;\n        this._btnYYOpen.active = !this._btnYYClose.active;\n        var yy = this.node.getChildByName(\"yinyue\");\n        var width = 430 * cc.vv.audioMgr.bgmVolume;\n        var progress = yy.getChildByName(\"progress\");\n        progress.getComponent(cc.Slider).progress = cc.vv.audioMgr.bgmVolume;\n        progress.getChildByName(\"progress\").width = width;\n        //yy.getChildByName(\"btn_progress\").x = progress.x + width;\n    },\n    onBtnClicked: function onBtnClicked(event) {\n        if (event.target.name == \"btn_close\") {\n            this.node.active = false;\n        } else if (event.target.name == \"btn_exit\") {\n            cc.sys.localStorage.removeItem(\"wx_account\");\n            cc.sys.localStorage.removeItem(\"wx_sign\");\n            cc.director.loadScene(\"login\");\n        } else if (event.target.name == \"btn_yx_open\") {\n            cc.vv.audioMgr.setSFXVolume(1.0);\n            this.refreshVolume();\n        } else if (event.target.name == \"btn_yx_close\") {\n            cc.vv.audioMgr.setSFXVolume(0);\n            this.refreshVolume();\n        } else if (event.target.name == \"btn_yy_open\") {\n            cc.vv.audioMgr.setBGMVolume(1);\n            this.refreshVolume();\n        } else if (event.target.name == \"btn_yy_close\") {\n            cc.vv.audioMgr.setBGMVolume(0);\n            this.refreshVolume();\n        }\n    }\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n    // },\n});\n\ncc._RF.pop();","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/8f/8fc5ba4a-51d4-4474-8e5a-5643ded39dca.js":{"source":"\"use strict\";\ncc._RF.push(module, '8fc5bpKUdREdI5aVkPe053K', 'Share');\n// scripts/components/Share.js\n\n\"use strict\";\n\n// 微信分享相关逻辑处理\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        _share: null,\n        _linkPanel: cc.Node,\n        _QRCodePanel: cc.Node,\n        _headIcon: cc.Sprite,\n        _shareInfo: cc.Label,\n        _shareType: 0,\n        _btnLink: {\n            default: null,\n            type: cc.Button\n        },\n        _btnQRCode: {\n            default: null,\n            type: cc.Button\n        },\n        _spriteFrame: null,\n        _shareRoomId: null,\n        _sprQRCode: cc.Sprite\n    },\n    onLoad: function onLoad() {\n        if (cc.vv == null) {\n            return;\n        }\n        this.initUI();\n        cc.vv.share = this;\n    },\n    initUI: function initUI() {\n        this._share = cc.find(\"Canvas/share\");\n        this._linkPanel = cc.find(\"Canvas/share/link_panel\");\n        this._QRCodePanel = cc.find(\"Canvas/share/QR_code_panel\");\n        this._headIcon = this._linkPanel.getChildByName(\"headicon\");\n        this._shareInfo = this._linkPanel.getChildByName(\"shareinfo\");\n        this._btnLink = cc.find(\"Canvas/share/button_link\").getComponent(cc.Button);\n        this._btnQRCode = cc.find(\"Canvas/share/button_qrcode\").getComponent(cc.Button);\n        this._sprQRCode = cc.find(\"Canvas/share/QR_code_panel/QRCodeImg\").getComponent(cc.Sprite);\n        this._shareRoomId = cc.vv.userMgr.shareRoomId || cc.vv.gameNetMgr.roomId;\n    },\n    onCloseBtnClicked: function onCloseBtnClicked() {\n        console.log('关闭按钮点击');\n        this._share.active = false;\n    },\n    onLinkBtnClicked: function onLinkBtnClicked() {\n        console.log('链接邀请按钮点击');\n        this._shareType = 1;\n        this.toggleStatue();\n    },\n    onQRcodeBtnClicked: function onQRcodeBtnClicked() {\n        console.log('二维码分享按钮点击');\n        this._shareType = 2;\n        this.toggleStatue();\n    },\n    toggleStatue: function toggleStatue() {\n        if (this._shareType == 1) {\n            this._linkPanel.active = true;\n            this._QRCodePanel.active = false;\n            this._btnLink.interactable = false;\n            this._btnQRCode.interactable = true;\n            this.getShareLinkInfo();\n        } else {\n            this._btnLink.interactable = true;\n            this._btnQRCode.interactable = false;\n            this._linkPanel.active = false;\n            this._QRCodePanel.active = true;\n            this.getShareQRCodeInfo();\n        }\n    },\n    show: function show() {\n        this._share.active = true;\n        this._shareType = 1;\n        this.toggleStatue();\n    },\n    getShareLinkInfo: function getShareLinkInfo() {\n        var shareTitle = \"亚巨棋牌\";\n        var shareContent = \"我邀请你来玩亚巨棋牌，最火热的棋牌游戏，包含各种主流及地方棋牌游戏种类，快上车吧！\";\n        if (cc.vv.userMgr.userName) {\n            shareContent = cc.vv.userMgr.userName + \"邀请你来玩亚巨棋牌，最火热的棋牌游戏，包含各种主流及地方棋牌游戏种类，快上车吧！\";\n        };\n        if (this._shareRoomId) {\n            shareContent = shareContent + \"房间号是:\" + this._shareRoomId;\n        };\n        this._shareInfo.getComponent(cc.Label).string = shareContent;\n        if (!cc.sys.isNative) {\n            document.title = window.wxFriend.title = shareTitle;\n            window.wxFriend.desc = shareContent;\n            if (cc.vv.gameNetMgr.roomId && cc.vv.gameNetMgr.roomId != null) {\n                var shareUrl = cc.vv.userMgr.yaoqingUrl + cc.vv.gameNetMgr.roomId;\n            } else {\n                var shareUrl = cc.vv.userMgr.yaoqingUrl + \"000000\";\n            }\n            window.wxFriend.link = shareUrl;\n            window.shareMessage();\n        }\n    },\n    // 加载二维码\n    getShareQRCodeInfo: function getShareQRCodeInfo() {\n        var ImageLoader = this._sprQRCode.node.getComponent(\"ImageLoader\");\n        ImageLoader.setUserID(cc.vv.userMgr.userId, 1);\n    },\n    onDestory: function onDestory() {\n        if (cc.vv) {\n            cc.vv.share = null;\n        }\n    }\n});\n\ncc._RF.pop();","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/5b/5b5867ab-3cad-47e5-b15f-acc296b3e63a.js":{"source":"\"use strict\";\ncc._RF.push(module, '5b586erPK1H5bFfrMKWs+Y6', 'TimePointer');\n// scripts/components/TimePointer.js\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        _arrow: null,\n        _pointer: null,\n        _timeLabel: null,\n        _time: -1,\n        _alertTime: -1\n    },\n    // use this for initialization\n    onLoad: function onLoad() {\n        var gameChild = this.node.getChildByName(\"game\");\n        this._arrow = gameChild.getChildByName(\"arrow\");\n        this._pointer = this._arrow.getChildByName(\"pointer\");\n        this.initPointer();\n        this._timeLabel = this._arrow.getChildByName(\"lblTime\").getComponent(cc.Label);\n        this._timeLabel.string = \"00\";\n        var self = this;\n        this.node.on('game_begin', function (data) {\n            self.initPointer();\n        });\n        this.node.on('game_chupai', function (data) {\n            self.initPointer();\n            self._time = 10;\n            self._alertTime = 3;\n        });\n        this.node.on('game_timerBegin', function (data) {\n            self.initPointer();\n            self._time = 10;\n            self._alertTime = 3;\n        });\n    },\n    initPointer: function initPointer() {\n        if (cc.vv == null) {\n            return;\n        }\n        this._arrow.active = cc.vv.gameNetMgr.gamestate == \"playing\";\n        if (!this._arrow.active) {\n            return;\n        }\n        var turn = cc.vv.gameNetMgr.turn;\n        var localIndex = cc.vv.gameNetMgr.getLocalIndex(turn);\n        for (var i = 0; i < this._pointer.children.length; ++i) {\n            this._pointer.children[i].active = i == localIndex;\n        }\n    },\n    // called every frame, uncomment this function to activate update callback\n    update: function update(dt) {\n        if (this._time > 0) {\n            this._time -= dt;\n            if (this._alertTime > 0 && this._time < this._alertTime) {\n                cc.vv.audioMgr.playSFX(\"timeup_alarm.mp3\");\n                this._alertTime = -1;\n            }\n            var pre = \"\";\n            if (this._time < 0) {\n                this._time = 0;\n            }\n            var t = Math.ceil(this._time);\n            if (t < 10) {\n                pre = \"0\";\n            }\n            this._timeLabel.string = pre + t;\n        }\n    }\n});\n\ncc._RF.pop();","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/03/03612852-edc8-468e-9250-2a78b85abaab.js":{"source":"\"use strict\";\ncc._RF.push(module, '03612hS7chGjpJQKni4Wrqr', 'UserSign');\n// scripts/components/UserSign.js\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        _DayListV: null,\n        _sign: null,\n        _btn_sign: null,\n        _btn_signed: null,\n        _isShowView: false,\n        _time: null\n    },\n    // use this for initialization\n    onLoad: function onLoad() {\n        this._sign = cc.find(\"Canvas/sign\");\n        this._btn_sign = this._sign.getChildByName(\"btn_sign\");\n        this._btn_signed = this._sign.getChildByName(\"btn_signed\");\n        this._time = this._sign.getChildByName(\"time\");\n        this._DayListV = new Array();\n        for (var i = 0; i < 7; i++) {\n            var path = \"day\" + (i + 1);\n            this._DayListV.push(this._sign.getChildByName(path));\n        }\n        this._isShowView = cc.vv.userMgr.is_sign == 0;\n        this.initSignData();\n    },\n    initSignData: function initSignData() {\n        var self = this;\n        if (this._isShowView) {\n            //签到按钮不可点击\n            this._time.getComponent(cc.Label).string = \"已登录\" + cc.vv.userMgr.sign_days + \"天\";\n            this._btn_sign.active = cc.vv.userMgr.sign_days < 6 && cc.vv.userMgr.is_sign == 0;\n            this._btn_signed.active = cc.vv.userMgr.sign_days < 6 && cc.vv.userMgr.is_sign == 1;\n            // this._btn_sign.getComponent(cc.Button).interactable = (cc.vv.userMgr.is_sign == 0);\n            cc.vv.userMgr.getSignList(function (data) {\n                console.log(\"------initSignData------->>\", data);\n                if (data) {\n                    for (var i = 0; i < data.length; i++) {\n                        var d = data[i];\n                        var view = self._DayListV[i];\n                        if (view) {\n                            var name = view.getChildByName(\"name\").getComponent(cc.Label);\n                            name.string = d.name + \"×\" + d.amount;\n                            var signed = view.getChildByName(\"signed\");\n                            if (signed) {\n                                if (cc.vv.userMgr.sign_days > i) {\n                                    signed.active = true;\n                                    if (i == data.length - 1 && cc.vv.userMgr.sign_days > 6 && cc.vv.userMgr.is_sign == 0) {\n                                        signed.active = false;\n                                    }\n                                }\n                            }\n                            var btn_sign = view.getChildByName(\"btn_sign\");\n                            if (btn_sign) {\n                                btn_sign.active = cc.vv.userMgr.sign_days >= 6 && cc.vv.userMgr.is_sign == 0;\n                                // btn_sign.getComponent(cc.Button).interactable = (cc.vv.userMgr.is_sign == 0);\n                            }\n                        }\n                    }\n                    self._sign.active = self._isShowView;\n                }\n            });\n        } else {\n            self._sign.active = self._isShowView;\n        }\n    },\n    //签到\n    onSignBtnClicked: function onSignBtnClicked() {\n        if (cc.vv.userMgr.is_sign == 0) {\n            var self = this;\n            cc.vv.userMgr.setUserSign(function (data) {\n                if (data) {\n                    cc.vv.userMgr.is_sign = 1;\n                    cc.vv.userMgr.sign_days++;\n                    if (data.type == 1) {\n                        cc.vv.userMgr.gems += data.amount;\n                    }\n                    self.initSignData();\n                }\n            });\n        } else {\n            cc.vv.alert.show(\"提示\", \"今日已签到!\");\n        }\n    },\n    onCloseBtnClicked: function onCloseBtnClicked() {\n        this._sign.active = false;\n        this._isShowView = false;\n    }\n});\n\ncc._RF.pop();","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/f6/f6db9cf4-0b17-44ce-9455-814e7af5d0ee.js":{"source":"\"use strict\";\ncc._RF.push(module, 'f6db9z0CxdEzpRVgU569dDu', 'Voice');\n// scripts/components/Voice.js\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        // foo: {\n        //    default: null,      // The default value will be used only when the component attaching\n        //                           to a node for the first time\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n        _lastTouchTime: null,\n        _voice: null,\n        _volume: null,\n        _voice_failed: null,\n        _lastCheckTime: -1,\n        _timeBar: null,\n        MAX_TIME: 15000,\n        _voiceTime: null\n    },\n    // use this for initialization\n    onLoad: function onLoad() {\n        this._voice = cc.find(\"Canvas/voice\");\n        this._voice.active = false;\n        this._voice_failed = cc.find(\"Canvas/voice/voice_failed\");\n        this._voice_failed.active = false;\n        this._timeBar = cc.find(\"Canvas/voice/time\");\n        this._timeBar.scaleX = 0.0;\n        this._volume = cc.find(\"Canvas/voice/volume\");\n        for (var i = 1; i < this._volume.children.length; ++i) {\n            this._volume.children[i].active = false;\n        }\n        var btnVoice = cc.find(\"Canvas/voice/voice_failed/btn_ok\");\n        if (btnVoice) {\n            cc.vv.utils.addClickEvent(btnVoice, this.node, \"Voice\", \"onBtnOKClicked\");\n        }\n        var self = this;\n        var btnVoice = cc.find(\"Canvas/btn_voice\");\n        if (btnVoice) {\n            btnVoice.on(cc.Node.EventType.TOUCH_START, function () {\n                console.log(\"cc.Node.EventType.TOUCH_START\");\n                // 关掉所有音乐\n                cc.vv.voiceMgr.prepare(\"record.amr\");\n                self._lastTouchTime = Date.now();\n                self._voice.active = true;\n                self._voice_failed.active = false;\n            });\n            btnVoice.on(cc.Node.EventType.TOUCH_MOVE, function () {\n                console.log(\"cc.Node.EventType.TOUCH_MOVE\");\n            });\n            btnVoice.on(cc.Node.EventType.TOUCH_END, function () {\n                console.log(\"cc.Node.EventType.TOUCH_END\");\n                if (Date.now() - self._lastTouchTime < 1000) {\n                    self._voice_failed.active = true;\n                    cc.vv.voiceMgr.cancel();\n                } else {\n                    // 录音结束并上传\n                    cc.vv.voiceMgr.release();\n                    self.onVoiceOK();\n                }\n            });\n            btnVoice.on(cc.Node.EventType.TOUCH_CANCEL, function () {\n                console.log(\"cc.Node.EventType.TOUCH_CANCEL\");\n                cc.vv.voiceMgr.cancel();\n                this._voice.active = false;\n                self._lastTouchTime = null;\n                self._voice.active = false;\n            });\n        }\n    },\n    onVoiceOK: function onVoiceOK() {\n        console.log(\"onVoiceOK!!!!\" + this._lastTouchTime);\n        this._voice.active = false;\n        if (this._lastTouchTime != null) {\n            this._voiceTime = Date.now() - this._lastTouchTime;\n            console.log('时长是多少' + this._voiceTime);\n        }\n        self._lastTouchTime = null;\n    },\n    // 发送语音到服务器\n    sendVoice: function sendVoice() {\n        if (window.voice.serverId && this._voiceTime) {\n            console.log(\"发送语音消息到服务器\");\n            cc.vv.net.send(\"voice_msg\", {\n                msg: window.voice.serverId,\n                time: this._voiceTime\n            });\n        }\n        this._voiceTime = null;\n        window.voice.serverId = null;\n    },\n    onBtnOKClicked: function onBtnOKClicked() {\n        this._voice.active = false;\n    },\n    // called every frame, uncomment this function to activate update callback\n    update: function update(dt) {\n        if (this._voice.active == true && this._voice_failed.active == false) {\n            if (Date.now() - this._lastCheckTime > 300) {\n                for (var i = 0; i < this._volume.children.length; ++i) {\n                    this._volume.children[i].active = false;\n                }\n                var v = cc.vv.voiceMgr.getVoiceLevel(7);\n                if (v >= 1 && v <= 7) {\n                    this._volume.children[v - 1].active = true;\n                }\n                this._lastCheckTime = Date.now();\n            }\n        }\n        if (this._lastTouchTime) {\n            var time = Date.now() - this._lastTouchTime;\n            if (time >= this.MAX_TIME) {\n                cc.vv.voiceMgr.release();\n                this.onVoiceOK();\n                this._voice.active = false;\n                this._lastTouchTime = null;\n            } else {\n                var percent = time / this.MAX_TIME;\n                this._timeBar.scaleX = 1 - percent;\n            }\n        };\n        if (window.voice && window.voice.serverId != null) {\n            console.log(\"id是多少\" + window.voice.serverId);\n            this.sendVoice();\n        };\n    }\n});\n\ncc._RF.pop();","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/5d/5d3d732d-253c-40a7-95d6-00c0002be44b.js":{"source":"\"use strict\";\ncc._RF.push(module, '5d3d7MtJTxAp5XWAMAAK+RL', 'dnAll');\n// scripts/dn/dnAll.js\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        lblRoomNo: {\n            default: null,\n            type: cc.Label\n        },\n        _seats: [],\n        _timeLabel: null,\n        _voiceMsgQueue: [],\n        _lastPlayingSeat: null,\n        _playingSeat: null,\n        _lastPlayTime: null,\n        _shareContent: null,\n        paigroup: {\n            default: null,\n            type: cc.SpriteAtlas\n        },\n        back: cc.Node,\n        fanhui: cc.Node,\n        bg: cc.Node,\n        backAlert: cc.Node,\n        backAlert_no: cc.Node,\n        fan: cc.Node,\n        jinbi: cc.Node,\n        countdown: cc.Label\n    },\n    onLoad: function onLoad() {\n        if (cc.vv == null) {\n            return;\n        }\n        for (var i = 0; i < 5; i++) {\n            this._seats.push(cc.find(\"Canvas/seat\" + i).getComponent(\"dnSeat\"));\n        }\n        this._timeLabel = cc.find(\"Canvas/time\").getComponent(cc.Label);\n        this._tips = cc.find(\"Canvas/tips\").getComponent(cc.Label);\n        this._difen = cc.find(\"Canvas/difen\").getComponent(cc.Label);\n        this._qiangZhuTips = cc.find(\"Canvas/text1\").getComponent(cc.Label);\n        this._xiaBeiTips = cc.find(\"Canvas/text3\").getComponent(cc.Label);\n        this._lastResult = cc.find(\"Canvas/lastResult\");\n        this.addComponent(\"ReConnect\");\n        cc.vv.utils.addClickEvent(this.back, this.node, \"dnAll\", \"onBtnClicked\");\n        cc.vv.utils.addClickEvent(this.fanhui, this.node, \"dnAll\", \"onBtnClicked\");\n        cc.vv.utils.addClickEvent(this.fan, this.node, \"dnAll\", \"onBtnClicked\");\n        cc.vv.utils.addClickEvent(this.bg, this.node, \"dnAll\", \"onBtnClicked\");\n        cc.vv.utils.addClickEvent(this.backAlert_no, this.node, \"dnAll\", \"onBtnClicked\");\n        this.initView();\n        this.initSeats();\n        this.initEventHandlers();\n        cc.vv.net.send(\"ready\");\n        cc.vv.audioMgr.playBGM(\"back.mp3\");\n        this.qiangZhuLevel = [0, 1, 2, 3, 4]; //抢注的档次\n        this.jinbi_node_arr = [];\n    },\n    initView: function initView() {\n        this._tips.node.active = true;\n        this._lastResult.active = false;\n    },\n    initSeats: function initSeats() {\n        var seats = cc.vv.gameNetMgr.seats;\n        for (var i = 0; i < seats.length; ++i) {\n            this.initSingleSeat(seats[i]);\n        }\n    },\n    initSingleSeat: function initSingleSeat(seat) {\n        var index = cc.vv.gameNetMgr.getLocalIndexZJH(seat.seatindex);\n        var isOffline = !seat.online;\n        // var isZhuang = seat.seatindex == cc.vv.gameNetMgr.button;\n        this._seats[index].setInfo(seat.name, seat.score);\n        this._seats[index].setReady(seat.ready);\n        this._seats[index].setOffline(isOffline);\n        this._seats[index].setID(seat.userid);\n        this._seats[index].voiceMsg(false);\n    },\n    onBtnSettingsClicked: function onBtnSettingsClicked() {\n        cc.vv.popupMgr.showSettings();\n    },\n    // 点击分享按钮，使用微信分享\n    onBtnWeichatClicked: function onBtnWeichatClicked() {\n        cc.vv.share.show();\n    },\n    onBtnDissolveClicked: function onBtnDissolveClicked() {\n        cc.vv.alert.show(\"解散房间\", \"解散房间不扣金币，是否确定解散？\", function () {\n            cc.vv.net.send(\"dispress\");\n        }, true);\n    },\n    onBtnClicked: function onBtnClicked(event) {\n        if (event.target.name == \"back\") {\n            this.fanhui.active = true;\n        }\n        if (event.target.name == \"bg\") {\n            this.fanhui.active = false;\n        }\n        if (event.target.name == \"fan\") {\n            this.fanhui.active = false;\n            this.backAlert.active = true;\n        }\n        if (event.target.name == \"no\") {\n            this.fanhui.active = false;\n            this.backAlert.active = false;\n        }\n    },\n    onBtnExit: function onBtnExit() {\n        this.backAlert.active = false;\n        cc.vv.net.send(\"exit\");\n    },\n    onBtnExchange: function onBtnExchange() {\n        this.backAlert.active = false;\n        this.fanhui.active = false;\n        cc.vv.userMgr.exchange = 1;\n        cc.vv.net.send(\"exit\");\n    },\n    playVoice: function playVoice() {\n        if (this._playingSeat == null && this._voiceMsgQueue.length) {\n            console.log(\"playVoice\");\n            var data = this._voiceMsgQueue.shift();\n            var idx = cc.vv.gameNetMgr.getSeatIndexByID(data.sender);\n            var localIndex = cc.vv.gameNetMgr.getLocalIndexZJH(idx);\n            this._playingSeat = localIndex;\n            this._seats[localIndex].voiceMsg(true);\n            var msgInfo = JSON.parse(data.content);\n            var msgfile = \"voicemsg.amr\";\n            this._lastPlayTime = Date.now() + msgInfo.time;\n            if (!cc.sys.isNative) {\n                var serverid = msgInfo['msg'];\n                window.downloadVoice(serverid);\n                return;\n            }\n            cc.vv.voiceMgr.writeVoice(msgfile, msgInfo.msg);\n            cc.vv.voiceMgr.play(msgfile);\n        }\n    },\n    initEventHandlers: function initEventHandlers() {\n        cc.vv.gameNetMgr.dataEventHandler = this.node;\n        var self = this;\n        this.node.on('new_user', function (data) {\n            //新人加入房间\n            self.initSingleSeat(data.detail);\n        });\n        this.node.on('user_state_changed', function (data) {\n            var seat = data.detail;\n            var index = cc.vv.gameNetMgr.getLocalIndexZJH(seat.seatindex);\n            self._seats[index].seatHide();\n        });\n        this.node.on('game_init', function (data) {\n            var gameInfo = data.detail;\n            if (!gameInfo) return;\n            self.showDiFen(gameInfo.baseFen);\n            self._tips.node.active = false;\n            var seatDatas = {};\n            if (gameInfo['players']) {\n                for (var i in gameInfo['players']) {\n                    var seatData = gameInfo['players'][i];\n                    seatDatas[seatData['userid']] = seatData;\n                }\n            }\n\n            self.refreshSeats(seatDatas);\n        });\n        this.node.on('not_exit', function (data) {\n            cc.vv.userMgr.exchange = 0;\n            cc.vv.alert.show('提示', '游戏进行中，无法退出房间');\n        });\n        this.node.on('game_begin', function (data) {\n            self.countdown.node.active = false;\n            var data = data.detail;\n            //游戏开始\n            console.log('游戏开始', data);\n            var holds = data.holds;\n            var maxQiangZhuangBeiShu = data.maxQiangZhuangBeiShu;\n            console.log('holds===>', holds);\n            self.showSelfPai(holds); //展示自己手上的四张手牌\n            self.showQiangZhu(maxQiangZhuangBeiShu); //展示抢庄倍数\n            self.showOtherSeat();\n            self.showQiangZhuTips();\n        });\n        this.node.on('voice_msg', function (data) {\n            var data = data.detail;\n            self._voiceMsgQueue.push(data);\n            self.playVoice();\n        });\n        this.node.on('chat_push', function (data) {\n            var data = data.detail;\n            var idx = cc.vv.gameNetMgr.getSeatIndexByID(data.sender);\n            var localIdx = cc.vv.gameNetMgr.getLocalIndexZJH(idx);\n            self._seats[localIdx].chat(data.content);\n        });\n        this.node.on('quick_chat_push', function (data) {\n            var data = data.detail;\n            var idx = cc.vv.gameNetMgr.getSeatIndexByID(data.sender);\n            var localIdx = cc.vv.gameNetMgr.getLocalIndexZJH(idx);\n            var index = data.content;\n            var info = cc.vv.zjhchat.getQuickChatInfo(index);\n            self._seats[localIdx].chat(info.content);\n            cc.vv.audioMgr.playSFX(info.sound);\n        });\n        this.node.on('emoji_push', function (data) {\n            var data = data.detail;\n            var idx = cc.vv.gameNetMgr.getSeatIndexByID(data.sender);\n            var localIdx = cc.vv.gameNetMgr.getLocalIndexZJH(idx);\n            self._seats[localIdx].emoji(data.content);\n        });\n        this.node.on('show_qiang', function (data) {\n            //有人抢庄\n            var data = data.detail;\n            var userId = data.userid;\n            var beishu = data.beiShu;\n            var seatIndex = cc.vv.gameNetMgr.getSeatIndexByID(userId);\n            var localIndex = cc.vv.gameNetMgr.getLocalIndexZJH(seatIndex);\n            var seat = self._seats[localIndex];\n            seat.showQiangZhuText(beishu);\n        });\n        this.node.on('count_down', function (data) {\n            if (self._tips.node.active) {\n                self._tips.node.active = false;\n            }\n            var data = data.detail;\n            self.countdown.string = data.countDown;\n            self.countdown.node.active = true;\n            if (data.countDown <= 0) {\n                self.countdown.node.active = false;\n            }\n        });\n        this.node.on('game_zhuangSelected', function (data) {\n            //抢庄结束\n            self.hideQiangZhuTips();\n            self._seats[0].hideQiangZhu();\n            //定庄\n            var userId = data.detail;\n            for (var i in self._seats) {\n                var seat = self._seats[i];\n                seat.hideQiangZhuText();\n            }\n            var seatIndex = cc.vv.gameNetMgr.getSeatIndexByID(userId);\n            var localIndex = cc.vv.gameNetMgr.getLocalIndexZJH(seatIndex);\n            var localSeat = self._seats[localIndex];\n            localSeat.showZhuang();\n            //定完庄后，激活服务器\n            cc.vv.net.send('zhuangEndFromClient');\n        });\n        this.node.on('game_myXzBegin', function (data) {\n            //下注\n            self.showXiaZhuTips(); //显示下注提示\n            var data = data.detail;\n            var seat = self._seats[0];\n            seat.showXiaBei(data);\n        });\n        this.node.on('game_myXzEnd', function (data) {\n            //下注结束\n            self.hideXiaZhuTips();\n            self._seats[0].hideXiaBei();\n        });\n        this.node.on('show_beiShuText', function (data) {\n            //显示下的倍数\n            var data = data.detail;\n            var userId = data.userid;\n            var beiShu = data.beiShu;\n            self.showBeiShuText(userId, beiShu);\n        });\n        this.node.on('game_myHoldsUpdate', function (data) {\n            //发最后一张手牌\n            var holds = data.detail;\n            self.showSelfPai(holds); //展示手牌\n            self.showYouShi();\n            self.showCount();\n        });\n        this.node.on('game_b_OneSnEnd', function (data) {\n            //算牛结束\n            var userId = data.detail;\n            var seatIndex = cc.vv.gameNetMgr.getSeatIndexByID(userId);\n            var localIndex = cc.vv.gameNetMgr.getLocalIndexZJH(seatIndex);\n            var localSeat = self._seats[localIndex];\n            localSeat.snEnd();\n        });\n        this.node.on('match_exit_error', function (data) {\n            //锦标赛不能退出游戏\n            cc.vv.alert.show(\"提示\", \"锦标赛中不能退出游戏\");\n        });\n        this.node.on('game_showAllUser', function (data) {\n            //游戏结束\n            var data = data.detail;\n            var moneyFlows = data.moneyFlows;\n            var players = data.players;\n            var zhuang_userId = null;\n            var type = null;\n            for (var i in players) {\n                var player = players[i];\n                if (player.isZhuang) {\n                    zhuang_userId = player.userid;\n                }\n                if (cc.vv.userMgr.userId == player.userid) {\n                    //判断自己的输赢\n                    if (player.status == 'win') {\n                        type = 1;\n                    } else {\n                        type = 2;\n                    }\n                }\n            }\n            var user_arr_toZhuang = []; //流向庄\n            var user_arr_fromZhuang = []; //从庄来\n            for (var j in moneyFlows) {\n                var moneyFlow = moneyFlows[j];\n                if (moneyFlow.to == zhuang_userId) {\n                    user_arr_toZhuang.push(moneyFlow);\n                }\n                if (moneyFlow.from == zhuang_userId) {\n                    user_arr_fromZhuang.push(moneyFlow);\n                }\n            }\n            self.showLastPai(players, function () {\n                self.showLastResult(type); //显示本人输赢\n                setTimeout(function () {\n                    self.hideLastResult();\n                    self.hideLastPai();\n                    if (self._tips) {\n                        self._tips.node.active = true;\n                    }\n                    self.showMoneyFlowsAnim(user_arr_toZhuang, user_arr_fromZhuang, function () {\n                        self.showMoneyChange(players);\n                        setTimeout(function () {\n                            //showMoneyChange执行时间为2秒\n                            cc.vv.net.send('ready');\n                        }, 2000);\n                    });\n                }, 1500); //显示输赢的时间\n            });\n        });\n        this.node.on('exit_room', function (data) {\n            //刷新用户钱币数量\n            self.getGemsAndCoins();\n        });\n    },\n    refreshSeats: function refreshSeats(seatDatas) {\n        for (var i in this._seats) {\n            var seat = this._seats[i];\n            var seatData = seatDatas[seat._userId];\n            if (seatData) {\n                seat._score = seatData['money'];\n            }\n            seat.refresh();\n        }\n    },\n    //设置金币钻石数量\n    getGemsAndCoins: function getGemsAndCoins() {\n        var self = this;\n        cc.vv.userMgr.getGemsAndCoins(function (data) {\n            cc.vv.userMgr.gems = data.gems;\n            cc.vv.userMgr.coins = data.coins;\n        });\n    },\n    showLastPai: function showLastPai(players, callback) {\n        var self = this;\n        //显示每个人的牌\n        // var players_num = players.length;\n        var player_index = 0;\n        var fun = function fun() {\n            if (player_index > players.length - 1) {\n                clearInterval(interval);\n                if (callback) {\n                    callback();\n                }\n                return;\n            }\n            var player = players[player_index];\n            var userId = player.userid;\n            var holds = player.holds;\n            var seat = self.getSeatByUserId(userId);\n            var spriteFrames = [];\n            for (var i in holds) {\n                spriteFrames.push(self.getpaiRes(holds[i]));\n            }\n            seat.showLastPai(spriteFrames, player.score);\n            player_index++;\n        };\n        var interval = setInterval(fun, 1000); //1秒显示一个\n        fun();\n    },\n    hideLastPai: function hideLastPai() {\n        for (var i in this._seats) {\n            var seat = this._seats[i];\n            seat.hideLastPai();\n            seat.hideBeiShuText();\n        }\n    },\n    showMoneyChange: function showMoneyChange(players) {\n        var self = this;\n        for (var i in players) {\n            var player = players[i];\n            var userId = player.userid;\n            var seat = self.getSeatByUserId(userId);\n            var money = player.money;\n            if (seat) {\n                seat.changeMoney(money);\n            }\n        }\n    },\n    getSeatByUserId: function getSeatByUserId(userId) {\n        var self = this;\n        var seatIndex = cc.vv.gameNetMgr.getSeatIndexByID(userId);\n        var localIndex = cc.vv.gameNetMgr.getLocalIndexZJH(seatIndex);\n        if (!self._seats) return null;\n        var localSeat = self._seats[localIndex];\n        return localSeat;\n    },\n    showMoneyFlowsAnim: function showMoneyFlowsAnim(user_arr_toZhuang, user_arr_fromZhuang, callback) {\n        var self = this;\n        //资金流动画\n        //流向庄的金币动画\n        self.buildMoneyFlowsAnimData(user_arr_toZhuang);\n        self.execMoneyFlowsAnim(function () {\n            //从庄流出的金币动画\n            self.buildMoneyFlowsAnimData(user_arr_fromZhuang);\n            self.execMoneyFlowsAnim(function () {\n                if (callback) {\n                    callback();\n                }\n            });\n        });\n    },\n    buildMoneyFlowsAnimData: function buildMoneyFlowsAnimData(user_arr) {\n        var self = this;\n        //构造金币流数据\n        for (var i in user_arr) {\n            //起点\n            var from_userId = user_arr[i].from;\n            var fromSeat = self.getSeatByUserId(from_userId);\n            var from_node = fromSeat.node;\n            var start_x = from_node.x;\n            var start_y = from_node.y;\n            //终点\n            var to_userId = user_arr[i].to;\n            var toSeat = self.getSeatByUserId(to_userId);\n            var to_node = toSeat.node;\n            var end_x = to_node.x;\n            var end_y = to_node.y;\n            var dis_x = end_x - start_x;\n            var dis_y = end_y - start_y;\n            var jin_num = 15;\n            var per_x = Math.floor(dis_x / jin_num);\n            var per_y = Math.floor(dis_y / jin_num);\n            var new_node_arr = [];\n            // if (type == 1) {\n            for (var j = 0; j <= jin_num; j++) {\n                var new_x = start_x + j * per_x;\n                var new_y = start_y + j * per_y;\n                var new_node = cc.instantiate(self.jinbi);\n                new_node.active = false;\n                new_node.x = new_x;\n                new_node.y = new_y;\n                cc.find(\"Canvas\").addChild(new_node);\n                new_node_arr.push(new_node);\n            }\n            self.jinbi_node_arr.push(new_node_arr);\n        }\n    },\n    execMoneyFlowsAnim: function execMoneyFlowsAnim(callback) {\n        //执行金币流动画\n        var self = this;\n        if (!self.jinbi_node_arr) return;\n        if (self.jinbi_node_arr.length == 0) {\n            self.clearFlowAnim();\n            if (callback) {\n                callback();\n            }\n            return;\n        }\n        var interVal = setInterval(function () {\n            if (!self.showJinbiIndex) {\n                self.showJinbiIndex = 0;\n            }\n            for (var i in self.jinbi_node_arr) {\n                var new_node_arr = self.jinbi_node_arr[i];\n                new_node_arr[self.showJinbiIndex].active = true;\n            }\n            if (self.showJinbiIndex >= 10) {\n                self.showJinbiIndex = 0;\n                self.flowEndAnim(callback);\n                clearInterval(interVal);\n            } else {\n                self.showJinbiIndex++;\n            }\n        }, 100);\n    },\n    flowEndAnim: function flowEndAnim(callback) {\n        var self = this;\n        var duration = 0.4;\n        for (var i in self.jinbi_node_arr) {\n            var node_arr = self.jinbi_node_arr[i];\n            var endNode = node_arr[node_arr.length - 1];\n            for (var j in node_arr) {\n                var node = node_arr[j];\n                var action = cc.moveTo(duration, cc.p(endNode.x, endNode.y));\n                node.runAction(action);\n            }\n        }\n        setTimeout(function () {\n            //清理金币\n            self.clearFlowAnim();\n            if (callback) {\n                callback();\n            }\n        }, duration * 1000);\n    },\n    clearFlowAnim: function clearFlowAnim() {\n        var self = this;\n        for (var i in self.jinbi_node_arr) {\n            var node_arr = self.jinbi_node_arr[i];\n            for (var j in node_arr) {\n                var node = node_arr[j];\n                cc.find(\"Canvas\").removeChild(node);\n            }\n        }\n        self.jinbi_node_arr = [];\n    },\n    showBeiShuText: function showBeiShuText(userId, beiShu) {\n        var self = this;\n        var seatIndex = cc.vv.gameNetMgr.getSeatIndexByID(userId);\n        var localIndex = cc.vv.gameNetMgr.getLocalIndexZJH(seatIndex);\n        var seat = self._seats[localIndex];\n        seat.showBeiShuText(beiShu);\n    },\n    showCount: function showCount() {\n        this._seats[0].showCount();\n    },\n    showYouShi: function showYouShi() {\n        this._seats[0].showYouShi();\n    },\n    showQiangZhuTips: function showQiangZhuTips() {\n        //显示抢主tips\n        this._qiangZhuTips.node.active = true;\n    },\n    hideQiangZhuTips: function hideQiangZhuTips() {\n        this._qiangZhuTips.node.active = false;\n    },\n    showXiaZhuTips: function showXiaZhuTips() {\n        this._xiaBeiTips.node.active = true;\n    },\n    hideXiaZhuTips: function hideXiaZhuTips() {\n        this._xiaBeiTips.node.active = false;\n    },\n    showOtherSeat: function showOtherSeat() {\n        var self = this;\n        for (var i = 1; i < 5; i++) {\n            var seat = self._seats[i];\n            seat.showBeiPai(4); //显示牌的背面\n        }\n    },\n    showQiangZhu: function showQiangZhu(maxQiangZhuangBeiShu) {\n        var self = this;\n        var level = 0;\n        for (var i in self.qiangZhuLevel) {\n            if (self.qiangZhuLevel[i] <= maxQiangZhuangBeiShu) {\n                level = i;\n            }\n        }\n        var seat = self._seats[0];\n        seat.showQiangZhu(level);\n    },\n    showSelfPai: function showSelfPai(holds) {\n        var self = this;\n        var seat = self._seats[0];\n        var spriteFrames = [];\n        for (var i in holds) {\n            spriteFrames.push(self.getpaiRes(holds[i]));\n        }\n        seat.showSelfPai(spriteFrames);\n    },\n    getpaiRes: function getpaiRes(data) {\n        var self = this;\n        data = data + 1;\n        var type, num, huase_big, huase_small;\n        num = (data % 100).toString();\n        if (data > 0 && data < 14) {\n            type = '04'; //黑桃\n            num = num + '-1'; //黑牌\n        } else if (data > 100 && data < 114) {\n            type = '03'; //红桃\n            num = num + '-2'; //红牌\n        } else if (data > 200 && data < 214) {\n            type = '02'; //梅花\n            num = num + '-1'; //黑牌\n        } else if (data > 300 && data < 314) {\n            type = '01'; //方块\n            num = num + '-2'; //红牌\n        }\n        huase_big = \"huase_big\" + type;\n        huase_small = \"huase_small\" + type;\n        var hold = data - 1;\n        var result = {\n            num: self.paigroup.getSpriteFrame(num),\n            huase_big: self.paigroup.getSpriteFrame(huase_big),\n            huase_small: self.paigroup.getSpriteFrame(huase_small),\n            hold: hold\n        };\n        return result;\n    },\n    showDiFen: function showDiFen(difen) {\n        var self = this;\n        self._difen.node.active = true;\n        self._difen.string = \"底分：\" + difen;\n    },\n    showLastResult: function showLastResult(type) {\n        var seatIndex = cc.vv.gameNetMgr.getSeatIndexByID(cc.vv.userMgr.userId);\n        var localIndex = cc.vv.gameNetMgr.getLocalIndexZJH(seatIndex);\n        if (!this._seats) return;\n        var seat = this._seats[localIndex];\n        if (this._lastResult && seat._lastpai.active) {\n            this._lastResult.active = true;\n        }\n        if (type == 1) {\n            this._lastResult.getChildByName('win').active = true;\n            this._lastResult.getChildByName('lose').active = false;\n        } else if (type == 2) {\n            this._lastResult.getChildByName('win').active = false;\n            this._lastResult.getChildByName('lose').active = true;\n        }\n    },\n    hideLastResult: function hideLastResult() {\n        if (this._lastResult) {\n            this._lastResult.active = false;\n        }\n    },\n    // called every frame, uncomment this function to activate update callback\n    update: function update(dt) {\n        if (window.voice && window.voice.localId != null) {\n            var localId = window.voice.localId;\n            window.voice.localId = null;\n            cc.vv.audioMgr.pauseAll();\n            window.playVoice(localId);\n        }\n        var minutes = Math.floor(Date.now() / 1000 / 60);\n        if (this._lastMinute != minutes) {\n            this._lastMinute = minutes;\n            var date = new Date();\n            var h = date.getHours();\n            h = h < 10 ? \"0\" + h : h;\n            var m = date.getMinutes();\n            m = m < 10 ? \"0\" + m : m;\n            this._timeLabel.string = \"\" + h + \":\" + m;\n        }\n        if (this._lastPlayTime != null) {\n            if (Date.now() > this._lastPlayTime + 200) {\n                this.onPlayerOver();\n                this._lastPlayTime = null;\n            }\n        } else {\n            this.playVoice();\n        }\n    },\n    onPlayerOver: function onPlayerOver() {\n        if (!cc.sys.isNative) {\n            window.stopPlayVoice();\n        };\n        cc.vv.audioMgr.resumeAll();\n        console.log(\"onPlayCallback:\" + this._playingSeat);\n        var localIndex = this._playingSeat;\n        this._playingSeat = null;\n        this._seats[localIndex].voiceMsg(false);\n    },\n    onDestroy: function onDestroy() {\n        cc.vv.voiceMgr.stop();\n        //        cc.vv.voiceMgr.onPlayCallback = null;\n    },\n    onQiangZhuangClick: function onQiangZhuangClick(e) {\n        var self = this;\n        var node = e.target;\n        var opacity = node.opacity;\n        if (opacity == 255) {\n            var beishu = 0;\n            var nodeName = node.name;\n            beishu = nodeName.replace('qiang', '');\n            cc.vv.net.send(\"qiang_zhuang\", beishu);\n            self.hideQiangZhuTips();\n            self._seats[0].hideQiangZhu();\n        }\n    },\n    onXiaZhuClick: function onXiaZhuClick(e) {\n        var self = this;\n        var node = e.target;\n        var opacity = node.opacity;\n        if (opacity == 255) {\n            var beishu = 0;\n            var str = node.getChildByName('num').getComponent(cc.Label).string;\n            beishu = str.replace('倍', '');\n            cc.vv.net.send(\"xia_zhu\", beishu);\n            self.hideXiaZhuTips();\n            self._seats[0].hideXiaBei();\n        }\n    },\n    onYouShiClick: function onYouShiClick(e) {\n        console.log('有十', e.target);\n        var niu_arr = this._seats[0].getNiuArr();\n        console.log('niu_arr', niu_arr);\n        cc.vv.net.send(\"you_shi\", niu_arr);\n    },\n    onSanPaiClick: function onSanPaiClick(e) {\n        console.log('散牌', e.target);\n        cc.vv.net.send(\"san_pai\");\n    },\n    onPaiClick: function onPaiClick(e) {\n        if (!this._seats[0]._count.active) return;\n        var node = e.target;\n        var nodeName = node.name;\n        var hold = node.hold;\n        var num = hold % 100;\n        console.log('hold', hold);\n        if (node.isClicked) {\n            node.isClicked = false;\n            node.y -= 20;\n            this._seats[0].unsetCount(nodeName);\n        } else {\n            node.isClicked = true;\n            node.y += 20;\n            this._seats[0].setCount(num, nodeName);\n        }\n    }\n});\n\ncc._RF.pop();","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/e7/e73ac6a8-3196-4c0a-8799-066bc006d168.js":{"source":"\"use strict\";\ncc._RF.push(module, 'e73acaoMZZMCoeZBmvABtFo', 'dnSeat');\n// scripts/dn/dnSeat.js\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        _sprIcon: null,\n        _zhuang: null,\n        _ready: null,\n        _offline: null,\n        _lblName: null,\n        _lblScore: null,\n        _scoreBg: null,\n        _voicemsg: null,\n        _chatBubble: null,\n        _emoji: null,\n        _lastChatTime: -1,\n        _userName: \"\",\n        _score: 0,\n        _isOffline: false,\n        _isReady: false,\n        _isZhuang: false,\n        _userId: null,\n        _isKanPai: false,\n        _isQiPai: false,\n        _isShu: false,\n        // _timeLabel: null,\n        _time: -1\n    },\n    // use this for initialization\n    onLoad: function onLoad() {\n        if (cc.vv == null) {\n            return;\n        }\n        this._sprIcon = this.node.getChildByName(\"head\").getComponent(\"ImageLoader\");\n        this._lblName = this.node.getChildByName(\"name\").getComponent(cc.Label);\n        this._lblScore = this.node.getChildByName(\"money\").getComponent(cc.Label);\n        this._diff_money = this.node.getChildByName(\"diff_money\").getComponent(cc.Label);\n        this._chatBubble = this.node.getChildByName(\"ChatBubble\");\n        this._lastpai = this.node.getChildByName(\"lastpai\");\n        this._complete = this.node.getChildByName(\"complete\");\n        this._qiangzhu = this.node.getChildByName(\"qiangzhu\");\n        this._qiangzhuText = this.node.getChildByName(\"qiangzhuText\");\n        this._douniu_zhu = this.node.getChildByName(\"douniu_zhu\");\n        this._pai = this.node.getChildByName(\"pai\"); //只有seat0才会有\n        this._emoji = this.node.getChildByName(\"emoji\");\n        this._xiabei = this.node.getChildByName('xiabei');\n        this._beishuText = this.node.getChildByName(\"beishuText\");\n        this._youshi = this.node.getChildByName('youshi');\n        this._count = this.node.getChildByName('count');\n        this.refresh();\n        if (this._sprIcon && this._userId) {\n            this._sprIcon.setUserID(this._userId);\n        }\n    },\n    onIconClicked: function onIconClicked() {\n        var iconSprite = this._sprIcon.node.getComponent(cc.Sprite);\n        if (this._userId != null && this._userId > 0) {\n            var seat = cc.vv.gameNetMgr.getSeatByID(this._userId);\n            var sex = 0;\n            if (cc.vv.baseInfoMap) {\n                var info = cc.vv.baseInfoMap[this._userId];\n                if (info) {\n                    sex = info.sex;\n                }\n            }\n        }\n    },\n    refresh: function refresh() {\n        if (this._lblName != null) {\n            this._lblName.string = this._userName;\n        }\n        if (this._lblScore != null) {\n            this._lblScore.string = this._score;\n        }\n        if (this._diff_money != null) {\n            this._diff_money.node.active = false;\n        }\n        if (this._offline) {\n            this._offline.active = this._isOffline && this._userName != \"\";\n        }\n        if (this._ready) {\n            this._ready.active = this._isReady && cc.vv.gameNetMgr.numOfGames > 0;\n        }\n        if (this._zhuang) {\n            this._zhuang.active = false;\n        }\n        this.node.active = this._userName != null && this._userName != \"\";\n        if (this._chatBubble) {\n            this._chatBubble.active = false;\n        }\n        if (this._emoji) {\n            this._emoji.active = false;\n        }\n        if (this._lastpai) {\n            this._lastpai.active = false;\n        }\n        if (this._complete) {\n            // this._complete.getChildByName('douniu_bg1').active = false;\n            // this._complete.getChildByName('wancheng').active = false;\n            this._complete.active = false;\n        }\n        if (this._beishuText) {\n            this._beishuText.active = false;\n        }\n        if (this._qiangzhu) {\n            this._qiangzhu.active = false;\n        }\n        if (this._qiangzhuText) {\n            this._qiangzhuText.active = false;\n        }\n        if (this._douniu_zhu) {\n            this._douniu_zhu.active = false;\n        }\n        if (this._pai) {\n            this._pai.active = false;\n        }\n        if (this._xiabei) {\n            this._xiabei.active = false;\n        }\n        if (this._youshi) {\n            this._youshi.active = false;\n        }\n    },\n    setInfo: function setInfo(name, score) {\n        this._userName = name;\n        this._score = score;\n        if (this._score == null) {\n            this._score = 0;\n        }\n        if (this._scoreBg != null) {\n            this._scoreBg.active = this._score != null;\n        }\n        if (this._lblScore != null) {\n            this._lblScore.node.active = this._score != null;\n        }\n        this.refresh();\n    },\n    seatHide: function seatHide() {\n        this.node.active = false;\n        this._userName = \"\";\n        this._userId = 0;\n    },\n    setZhuang: function setZhuang(value) {\n        this._isZhuang = value;\n        if (this._zhuang) {\n            this._zhuang.active = value;\n        } else {\n            this._zhuang = this.node.getChildByName(\"zhuang\");\n            this._zhuang.active = value;\n        }\n    },\n    setReady: function setReady(isReady) {\n        this._isReady = isReady;\n        if (this._ready) {\n            this._ready.active = this._isReady && cc.vv.gameNetMgr.numOfGames > 0;\n        }\n    },\n    setID: function setID(id) {\n        var idNode = this.node.getChildByName(\"id\");\n        if (idNode) {\n            var lbl = idNode.getComponent(cc.Label);\n            lbl.string = \"ID:\" + id;\n        }\n        this._userId = id;\n        if (this._sprIcon) {\n            this._sprIcon.setUserID(id);\n        }\n    },\n    getID: function getID() {\n        return this._userId;\n    },\n    setOffline: function setOffline(isOffline) {\n        this._isOffline = isOffline;\n        if (this._offline) {\n            this._offline.active = this._isOffline && this._userName != \"\";\n        }\n    },\n    chat: function chat(content) {\n        if (this._chatBubble == null) {\n            return;\n        }\n        this._emoji.active = false;\n        this._chatBubble.active = true;\n        this._chatBubble.getComponent(cc.Label).string = content;\n        this._chatBubble.getChildByName(\"New Label\").getComponent(cc.Label).string = content;\n        this._lastChatTime = 3;\n    },\n    emoji: function emoji(_emoji) {\n        //emoji = JSON.parse(emoji);\n        if (this._emoji == null) {\n            return;\n        }\n        console.log(_emoji);\n        this._chatBubble.active = false;\n        this._emoji.active = true;\n        this._emoji.getComponent(cc.Animation).play(_emoji);\n        this._lastChatTime = 3;\n    },\n    voiceMsg: function voiceMsg(show) {\n        if (this._voicemsg) {\n            this._voicemsg.active = show;\n        }\n    },\n    setMoney: function setMoney(data) {\n        //设置该玩家所拥有的的钱\n        this._lblScore.string = data;\n        this._score = data;\n    },\n    setTime: function setTime(o) {\n        if (o) {\n            this._time = 0;\n        } else {\n            this._time = 30;\n        }\n    },\n    showQiangZhu: function showQiangZhu(level) {\n        var self = this;\n        if (!self._qiangzhu) return;\n        self._qiangzhu.active = true;\n        for (var i in self._qiangzhu.children) {\n            if (level < i) {\n                self._qiangzhu.children[i].opacity = 128;\n            } else {\n                self._qiangzhu.children[i].opacity = 255;\n            }\n        }\n    },\n    hideQiangZhu: function hideQiangZhu() {\n        this._qiangzhu.active = false;\n    },\n    showSelfPai: function showSelfPai(spriteFrames) {\n        var self = this;\n        if (self._pai) {\n            self._pai.active = true;\n            for (var i in self._pai.children) {\n                var pai = self._pai.children[i];\n                var paiObj = spriteFrames[i];\n                if (paiObj) {\n                    //如果有资源则显示，没有则隐藏\n                    pai.active = true;\n                    self.setPai(pai, paiObj);\n                } else {\n                    pai.active = false;\n                }\n            }\n        }\n    },\n    /**\r\n     * [setPai description]\r\n     * @param {[type]} pai    [牌的node]\r\n     * @param {[type]} paiObj [牌的资源]\r\n     */\n    setPai: function setPai(pai, paiObj) {\n        var numRes = paiObj['num'];\n        var huase_bigRes = paiObj['huase_big'];\n        var huase_smallRes = paiObj['huase_small'];\n        var hold = paiObj['hold'];\n        pai.getChildByName('num').getComponent(cc.Sprite).spriteFrame = numRes;\n        pai.getChildByName('hua2').getComponent(cc.Sprite).spriteFrame = huase_bigRes;\n        pai.getChildByName('hua1').getComponent(cc.Sprite).spriteFrame = huase_smallRes;\n        pai.hold = hold;\n    },\n    showBeiPai: function showBeiPai(num) {\n        var self = this;\n        if (!self._complete) return;\n        self._complete.active = true;\n        for (var i in self._complete.children) {\n            if (i < num) {\n                self._complete.children[i].active = true;\n            } else {\n                self._complete.children[i].active = false;\n            }\n        }\n    },\n    showQiangZhuText: function showQiangZhuText(beishu) {\n        var self = this;\n        if (!self._qiangzhuText) return;\n        self._qiangzhuText.active = true;\n        for (var i in self._qiangzhuText.children) {\n            if (i == beishu) {\n                self._qiangzhuText.children[i].active = true;\n            } else {\n                self._qiangzhuText.children[i].active = false;\n            }\n        }\n    },\n    hideQiangZhuText: function hideQiangZhuText() {\n        var self = this;\n        if (!self._qiangzhuText) return;\n        self._qiangzhuText.active = false;\n    },\n    showZhuang: function showZhuang() {\n        //庄的显示\n        var self = this;\n        if (!self._douniu_zhu) return;\n        self._douniu_zhu.active = true;\n    },\n    hideZhuang: function hideZhuang() {\n        //隐藏庄\n        var self = this;\n        if (!self._douniu_zhu) return;\n        self._douniu_zhu.active = false;\n    },\n    showXiaBei: function showXiaBei(data) {\n        //下注\n        var self = this;\n        if (!self._xiabei) return;\n        self._xiabei.active = true;\n        var maxBeishu = data.maxXiaZhuBeiShu;\n        var xiaZhuOps = data.xiaZhuOps;\n        for (var i in self._xiabei.children) {\n            var temp = self._xiabei.children[i];\n            if (xiaZhuOps[i] <= maxBeishu) {\n                temp.opacity = 255;\n            } else {\n                temp.opacity = 128;\n            }\n            temp.getChildByName('num').getComponent(cc.Label).string = xiaZhuOps[i] + \"倍\";\n        }\n    },\n    hideXiaBei: function hideXiaBei() {\n        var self = this;\n        if (!self._xiabei) return;\n        self._xiabei.active = false;\n    },\n    showYouShi: function showYouShi() {\n        var self = this;\n        if (!self._youshi) return;\n        self._youshi.active = true;\n    },\n    hideYouShi: function hideYouShi() {\n        var self = this;\n        if (!self._youshi) return;\n        self._youshi.active = false;\n    },\n    showCount: function showCount() {\n        var self = this;\n        if (!self._count) return;\n        self._count.active = true;\n        for (var i in self._count.children) {\n            self._count.children[i].active = false;\n        }\n    },\n    hideCount: function hideCount() {\n        var self = this;\n        if (!self._count) return;\n        self._count.active = false;\n    },\n    setCount: function setCount(num, nodeName) {\n        var self = this;\n        if (!self._count) return;\n        var index = null;\n        for (var i in self._count.children) {\n            if (i > 2) continue;\n            var temp = self._count.children[i];\n            if (temp.active == false) {\n                index = i;\n                break;\n            }\n        }\n        if (index == null) return;\n        var child = self._count.children[index];\n        child.active = true;\n        child.nodeName = nodeName;\n        if (num > 9) {\n            num = 9;\n        }\n        child.num = num;\n        for (var i in child.children) {\n            var temp = child.children[i];\n            if (i == num) {\n                temp.active = true;\n            } else {\n                temp.active = false;\n            }\n        }\n        if (index == 2) {\n            //如果前三个填满了，则在第四格算出\n            var num0 = parseInt(self._count.children[0].num);\n            var num1 = parseInt(self._count.children[1].num);\n            var num2 = parseInt(self._count.children[2].num);\n            var total_num = num0 + num1 + num2 + 3; //+3算出真实的值\n            var total_num_shi = Math.floor(total_num / 10); //十位数\n            var total_num_ge = total_num % 10; //个位数\n            self._count.getChildByName('result').active = true;\n            //子元素先全部隐藏\n            var result = self._count.getChildByName('result').children;\n            for (var i in result) {\n                result[i].active = false;\n            }\n            //分类显示\n            if (total_num > 9) {\n                var index_shi = total_num_shi - 1;\n                var index_ge = total_num_ge;\n                var n9 = result[9];\n                n9.active = true;\n                //n9的子元素\n                for (var j in n9.children) {\n                    var child_n9 = n9.children[j];\n                    for (var k in child_n9.children) {\n                        if (j == 0 && k == index_shi) {\n                            //显示十位数\n                            child_n9.children[k].active = true;\n                        } else if (j == 1 && k == index_ge) {\n                            //显示个位数\n                            child_n9.children[k].active = true;\n                        } else {\n                            child_n9.children[k].active = false;\n                        }\n                    }\n                }\n            } else {\n                var index_ge = total_num_ge - 1;\n                result[index_ge].active = true;\n            }\n        }\n    },\n    unsetCount: function unsetCount(nodeName) {\n        var self = this;\n        if (!self._count) return;\n        var index = null;\n        for (var i in self._count.children) {\n            var temp = self._count.children[i];\n            if (temp.nodeName == nodeName) {\n                index = i;\n            }\n        }\n        if (index == null) return;\n        self._count.children[index].active = false;\n        self._count.getChildByName('result').active = false;\n    },\n    showBeiShuText: function showBeiShuText(beishu) {\n        var self = this;\n        if (!self._beishuText || !beishu) return;\n        self._beishuText.active = true;\n        var num0 = Math.floor(parseInt(beishu) / 10);\n        var num1 = parseInt(beishu) % 10;\n        var num0_arr = self._beishuText.getChildByName('num0').children;\n        var num1_arr = self._beishuText.getChildByName('num1').children;\n        for (var i in num0_arr) {\n            var temp = num0_arr[i];\n            if (i == num0) {\n                temp.active = true;\n            } else {\n                temp.active = false;\n            }\n        }\n        for (var i in num1_arr) {\n            var temp = num1_arr[i];\n            if (i == num1) {\n                temp.active = true;\n            } else {\n                temp.active = false;\n            }\n        }\n    },\n    hideBeiShuText: function hideBeiShuText() {\n        var self = this;\n        if (!self._beishuText) return;\n        self._beishuText.active = false;\n    },\n    getNiuArr: function getNiuArr() {\n        var self = this;\n        if (!self._count) return;\n        var niu_arr = [];\n        for (var i in self._count.children) {\n            var niu = self._count.children[i].num;\n            if (i > 2 || !niu) return;\n            niu_arr.push(niu);\n        }\n        return niu_arr;\n    },\n    snEnd: function snEnd() {\n        //算牛结束，隐藏count界面，显示已完成\n        var self = this;\n        if (self._count) {\n            self._count.active = false;\n        }\n        if (self._pai) {\n            self._pai.active = false;\n            for (var i in self._pai.children) {\n                var child = self._pai.children[i];\n                child.isClicked = false;\n                child.y = -9;\n            }\n        }\n        if (self._youshi) {\n            self._youshi.active = false;\n        }\n        self._complete.active = true;\n        for (var i in self._complete.children) {\n            self._complete.children[i].active = true;\n        }\n    },\n    changeMoney: function changeMoney(money) {\n        if (!this._diff_money) return;\n        var old_money = this._score;\n        var diff_money = parseInt(money) - parseInt(old_money);\n        if (diff_money > 0) {\n            diff_money = \"+\" + diff_money;\n        }\n        this._diff_money.string = diff_money;\n        this._diff_money.node.active = true;\n        this._diff_money.node.opacity = 255;\n        this.setMoney(money);\n        var action = cc.fadeOut(2);\n        this._diff_money.node.runAction(action);\n    },\n    showLastPai: function showLastPai(spriteFrames, score) {\n        var self = this;\n        if (self._lastpai) {\n            self._lastpai.active = true;\n            for (var i in self._lastpai.children) {\n                if (i <= 4) {\n                    //牌\n                    var pai = self._lastpai.children[i];\n                    var paiObj = spriteFrames[i];\n                    if (paiObj) {\n                        //如果有资源则显示，没有则隐藏\n                        pai.active = true;\n                        self.setPai(pai, paiObj);\n                    } else {\n                        pai.active = false;\n                    }\n                } else if (i == 6) {\n                    //结果，“十带一”之类\n                    var jieguo = self._lastpai.children[i];\n                    if (score) {\n                        jieguo.active = true;\n                        for (var j in jieguo.children) {\n                            var temp = jieguo.children[j];\n                            temp.active = false;\n                        }\n                        if (score[3] == '1') {\n                            //没有牛\n                            jieguo.getChildByName('san').active = true;\n                        } else if (score[3] == '4') {\n                            //单牛\n                            var index = parseInt(score[0]);\n                            jieguo.getChildByName('jg' + index).active = true;\n                        } else if (score[3] == '5') {\n                            //双牛\n                            jieguo.getChildByName('jg0').active = true;\n                        } else if (score[3] == '6') {\n                            //炸弹\n                            jieguo.getChildByName('zhadan').active = true;\n                        } else if (score[3] == '7') {\n                            //五花\n                            jieguo.getChildByName('wuhua').active = true;\n                        } else if (score[3] == '8') {\n                            //五小\n                            jieguo.getChildByName('wuxiao').active = true;\n                        }\n                    } else {\n                        jieguo.active = false;\n                    }\n                }\n            }\n        }\n        if (this._complete) {\n            this._complete.active = false;\n        }\n    },\n    hideLastPai: function hideLastPai() {\n        if (this._lastpai) {\n            this._lastpai.active = false;\n        }\n    },\n    // called every frame, uncomment this function to activate update callback\n    update: function update(dt) {\n        if (this._lastChatTime > 0) {\n            this._lastChatTime -= dt;\n            if (this._lastChatTime < 0) {\n                this._chatBubble.active = false;\n                this._emoji.active = false;\n                this._emoji.getComponent(cc.Animation).stop();\n            }\n        }\n        if (this._time > 0) {\n            this._time -= dt;\n            var pre = \"\";\n            if (this._time < 0) {\n                this._time = 0;\n            }\n            var t = Math.ceil(this._time);\n            if (t < 10) {\n                pre = \"0\";\n            }\n            this._timeLabel.string = pre + t;\n        }\n    }\n});\n\ncc._RF.pop();","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/08/08e46e30-6334-412e-a3f3-7ce74430e66c.js":{"source":"\"use strict\";\ncc._RF.push(module, '08e464wYzRBLqPzfOdEMOZs', 'dzpkAll');\n// scripts/dzpk/dzpkAll.js\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        _seats: [],\n        _timeLabel: null,\n        _voiceMsgQueue: [],\n        _lastPlayingSeat: null,\n        _playingSeat: null,\n        _lastPlayTime: null,\n        _shareContent: null,\n        paigroup: {\n            default: null,\n            type: cc.SpriteAtlas\n        },\n        back: cc.Node,\n        fanhui: cc.Node,\n        bg: cc.Node,\n        helpshow: cc.Node,\n        backAlert: cc.Node,\n        backAlert_no: cc.Node,\n        fan: cc.Node,\n        jinbi: cc.Node,\n        countdown: cc.Label,\n        win: cc.Node,\n        lose: cc.Node,\n        _pai: null,\n        _pais: [],\n        _text: null,\n        _zongzhu: null,\n        _btnFirst: null,\n        _btnSecond: null,\n        _btnThird: null,\n        _Checkbox: [],\n        _secondLeft: [],\n        _secondOther: [],\n        _thirdLeft: [],\n        _thirdOther: [],\n        _thirdAllIn: null,\n        _thirdJiazhu: null,\n        _jiaZhu: null,\n        _jiaZhu_cover: null,\n        _timeout: null,\n        timerCounter: 0\n    },\n    onLoad: function onLoad() {\n        if (cc.vv == null) {\n            return;\n        }\n        this.addComponent(\"ReConnect\");\n        for (var i = 0; i < 5; i++) {\n            this._seats.push(cc.find(\"Canvas/seat\" + i).getComponent(\"dzpkSeat\"));\n        }\n        this._timeLabel = cc.find(\"Canvas/time\").getComponent(cc.Label);\n        this._tips = cc.find(\"Canvas/tips\").getComponent(cc.Label);\n        this._difen = cc.find(\"Canvas/difen\").getComponent(cc.Label);\n        this._zongzhu = cc.find(\"Canvas/zongxiazhu/label\").getComponent(cc.Label);\n        this._text = cc.find(\"Canvas/text0\").getComponent(cc.Label);\n        this._text.string = \"白手起家(6人)：\" + cc.vv.NetMgr.consume_num + \"/\" + 2 * cc.vv.NetMgr.consume_num + \" 扑克牌：5-A 限注(1倍底池)\";\n        this._pai = cc.find(\"Canvas/pai\");\n        for (var i = 0; i < this._pai.childrenCount; i++) {\n            this._pais[i] = this._pai.getChildByName(\"pai\" + i);\n        };\n        this._pai.active = false;\n        this._difen.node.active = true;\n        this._btnFirst = cc.find(\"Canvas/buttons/first\");\n        this._btnSecond = cc.find(\"Canvas/buttons/second\");\n        this._btnThird = cc.find(\"Canvas/buttons/third\");\n        this._btnThird.active = false;\n        this._btnSecond.active = false;\n        this._btnFirst.active = false;\n        for (var i = 0; i < this._btnFirst.childrenCount; i++) {\n            this._Checkbox[i] = this._btnFirst.children[i];\n            this._Checkbox[i].getChildByName('button').index = i;\n            cc.vv.utils.addClickEvent(this._Checkbox[i].getChildByName('button'), this.node, \"dzpkAll\", \"onBtnClicked\");\n        };\n        for (var i = 0; i < 3; i++) {\n            this._secondLeft[i] = this._btnSecond.getChildByName('dichi' + i);\n            this._secondLeft[i].index = i;\n            cc.vv.utils.addClickEvent(this._secondLeft[i], this.node, \"dzpkAll\", \"onBtnClicked\");\n        };\n        for (var i = 0; i < 3; i++) {\n            this._secondOther[i] = this._btnSecond.getChildByName('dichi_cover' + i);\n            this._secondOther[i].index = i;\n        };\n        for (var i = 0; i < 5; i++) {\n            this._thirdLeft[i] = this._btnThird.getChildByName('tnum' + i);\n            this._thirdLeft[i].index = i;\n            cc.vv.utils.addClickEvent(this._thirdLeft[i], this.node, \"dzpkAll\", \"onBtnClicked\");\n        };\n        for (var i = 0; i < 5; i++) {\n            this._thirdOther[i] = this._btnThird.getChildByName('tnum_cover' + i);\n            this._thirdOther[i].index = i;\n        };\n        this._thirdJiazhu = this._btnThird.getChildByName('tjiazhu');\n        cc.vv.utils.addClickEvent(this._thirdJiazhu, this.node, \"dzpkAll\", \"onBtnClicked\");\n        this._thirdAllIn = this._btnThird.getChildByName('select').getChildByName('quanxia');\n        cc.vv.utils.addClickEvent(this._thirdAllIn, this.node, \"dzpkAll\", \"onBtnClicked\");\n        this._genPai = this._btnSecond.getChildByName('genpai');\n        this._rangPai = this._btnSecond.getChildByName('rangpai');\n        this._qiPai = this._btnSecond.getChildByName('qipai');\n        this._jiaZhu = this._btnSecond.getChildByName('jiazhu');\n        this._jiaZhu_cover = this._btnSecond.getChildByName('jiazhu_cover');\n        cc.vv.utils.addClickEvent(this._genPai, this.node, \"dzpkAll\", \"onBtnClicked\");\n        cc.vv.utils.addClickEvent(this._rangPai, this.node, \"dzpkAll\", \"onBtnClicked\");\n        cc.vv.utils.addClickEvent(this._qiPai, this.node, \"dzpkAll\", \"onBtnClicked\");\n        cc.vv.utils.addClickEvent(this._jiaZhu, this.node, \"dzpkAll\", \"onBtnClicked\");\n        cc.vv.utils.addClickEvent(this.back, this.node, \"dzpkAll\", \"onBtnClicked\");\n        cc.vv.utils.addClickEvent(this.fanhui, this.node, \"dzpkAll\", \"onBtnClicked\");\n        cc.vv.utils.addClickEvent(this.fan, this.node, \"dzpkAll\", \"onBtnClicked\");\n        cc.vv.utils.addClickEvent(this.bg, this.node, \"dzpkAll\", \"onBtnClicked\");\n        cc.vv.utils.addClickEvent(this.backAlert_no, this.node, \"dzpkAll\", \"onBtnClicked\");\n        this.initView();\n        this.initSeats();\n        this.initEventHandlers();\n        cc.vv.net.send(\"ready\");\n        if (cc.vv.userMgr.reconnection == 1) {\n            //断线重连\n            cc.vv.userMgr.reconnection = 0;\n            cc.vv.net.send(\"getGameInfoByUserid\");\n        }\n        cc.vv.audioMgr.playBGM(\"back.mp3\");\n        cc.vv.net.send(\"getUserHolds\");\n    },\n    initView: function initView() {\n        this._tips.node.active = true;\n        this._zongzhu.string = 0;\n        this._difen.string = \"底池：\" + 0;\n        this._difen.money = 0;\n    },\n    restart: function restart() {\n        if (this._zongzhu) this._zongzhu.string = 0;\n        if (this._difen) {\n            this._difen.string = \"底池：\" + 0;\n            this._difen.money = 0;\n        }\n        this.win.active = false;\n        this.lose.active = false;\n        this._pai.active = false;\n        this._tips.node.active = true;\n        var seats = cc.vv.NetMgr.seats;\n        if (seats) {\n            for (var i = 0; i < seats.length; ++i) {\n                var index = cc.vv.NetMgr.getLocalIndexByUserId(seats[i].userid);\n                this._seats[index].restart();\n                this._seats[index].status = \"\";\n            }\n        }\n        cc.vv.net.send(\"ready\");\n    },\n    initSeats: function initSeats() {\n        var seats = cc.vv.NetMgr.seats;\n        for (var i = 0; i < seats.length; ++i) {\n            this.initSingleSeat(seats[i]);\n        }\n    },\n    initSingleSeat: function initSingleSeat(seat) {\n        var index = cc.vv.NetMgr.getLocalIndexByUserId(seat.userid);\n        this._seats[index].setInfo(seat.name, seat.score);\n        this._seats[index].setReady(seat.ready);\n        this._seats[index].setID(seat.userid);\n        this._seats[index].voiceMsg(false);\n    },\n    onBtnSettingsClicked: function onBtnSettingsClicked() {\n        cc.vv.popupMgr.showSettings();\n    },\n    // 点击分享按钮，使用微信分享\n    onBtnWeichatClicked: function onBtnWeichatClicked() {\n        cc.vv.share.show();\n    },\n    onBtnClicked: function onBtnClicked(event) {\n        if (event.target.name == \"back\") {\n            this.fanhui.active = true;\n        }\n        if (event.target.name == \"bg\") {\n            this.fanhui.active = false;\n            this.helpshow.active = false;\n            if (this._btnThird.active) {\n                this._btnThird.active = false;\n                this._btnSecond.active = true;\n            }\n        }\n        if (event.target.name == \"fan\") {\n            this.fanhui.active = false;\n            this.backAlert.active = true;\n        }\n        if (event.target.name == \"pai\") {\n            this.fanhui.active = false;\n            this.helpshow.active = true;\n        }\n        if (event.target.name == \"no\") {\n            this.fanhui.active = false;\n            this.backAlert.active = false;\n        }\n        if (event.target.name == \"button\") {\n            for (var i = 0; i < this._Checkbox.length; i++) {\n                if (event.target.index == i) {\n                    continue;\n                } else {\n                    this._Checkbox[i].getComponent(\"CheckBox\").checked = false;\n                    this._Checkbox[i].getComponent(\"CheckBox\").refresh();\n                }\n            };\n        }\n        if (event.target.name == \"rangpai\") {\n            cc.vv.net.send(\"rangpai\");\n        }\n        if (event.target.name == \"qipai\") {\n            cc.vv.net.send(\"qipai\");\n        }\n        if (event.target.name == \"genpai\") {\n            cc.vv.net.send(\"genpai\", event.target.money);\n        }\n        if (event.target.name == \"jiazhu\") {\n            this._btnThird.active = true;\n            this._btnSecond.active = false;\n        }\n        if (event.target.name.indexOf('dichi') > -1) {\n            cc.vv.net.send(\"jiazhu\", event.target.money);\n        }\n        if (event.target.name.indexOf('tnum') > -1) {\n            cc.vv.net.send(\"jiazhu\", event.target.money);\n        }\n        if (event.target.name.indexOf('tjiazhu') > -1) {\n            cc.vv.net.send(\"jiazhu\", event.target.money);\n        }\n        if (event.target.name.indexOf('quanxia') > -1) {\n            cc.vv.net.send(\"jiazhu\", event.target.money);\n        }\n    },\n    onBtnExit: function onBtnExit() {\n        this.backAlert.active = false;\n        cc.vv.net.send(\"exit\");\n    },\n    onBtnExchange: function onBtnExchange() {\n        this.backAlert.active = false;\n        this.fanhui.active = false;\n        cc.vv.userMgr.exchange = 1;\n        cc.vv.net.send(\"exit\");\n    },\n    playVoice: function playVoice() {\n        if (this._playingSeat == null && this._voiceMsgQueue.length) {\n            console.log(\"playVoice\");\n            var data = this._voiceMsgQueue.shift();\n            var idx = cc.vv.NetMgr.getSeatIndexByID(data.sender);\n            var localIndex = cc.vv.NetMgr.getLocalIndex(idx);\n            this._playingSeat = localIndex;\n            this._seats[localIndex].voiceMsg(true);\n            var msgInfo = JSON.parse(data.content);\n            var msgfile = \"voicemsg.amr\";\n            this._lastPlayTime = Date.now() + msgInfo.time;\n            if (!cc.sys.isNative) {\n                var serverid = msgInfo['msg'];\n                window.downloadVoice(serverid);\n                return;\n            }\n            cc.vv.voiceMgr.writeVoice(msgfile, msgInfo.msg);\n            cc.vv.voiceMgr.play(msgfile);\n        }\n    },\n    //转换对应的牌\n    ConversionCardRes: function ConversionCardRes(n) {\n        var type = 4;\n        var color = 1;\n        if (n >= 13 && n < 26) {\n            type = 3;\n            n = n - 13;\n            color = 2;\n        } else if (n >= 26 && n < 39) {\n            type = 2;\n            n = n - 26;\n        } else if (n >= 39 && n < 52) {\n            type = 1;\n            n = n - 39;\n            color = 2;\n        } else {\n            type = 4;\n        }\n        var num = 0;\n        num = n + 2;\n        if (num == 14) {\n            num = 1;\n        }\n        var data = {\n            num: this.paigroup.getSpriteFrame(num + \"-\" + color),\n            h_s: this.paigroup.getSpriteFrame(\"huase_small0\" + type),\n            h_b: this.paigroup.getSpriteFrame(\"huase_big0\" + type)\n        };\n        return data;\n    },\n    showOtherSeat: function showOtherSeat(type) {\n        var seats = cc.vv.NetMgr.seats;\n        for (var i = 0; i < seats.length; i++) {\n            var index = cc.vv.NetMgr.getLocalIndexByUserId(seats[i].userid);\n            if (type == 1) {\n                this._seats[index].showBeiPai(true); //显示牌的背面\n            }\n            if (type == 2) {\n                this._seats[index].showOps(); //隐藏其他桌子的操作icon\n                this._seats[index].hideScore();\n            }\n        };\n    },\n    setBtnOps: function setBtnOps(type, obj) {\n        if (type == 1) {\n            this._btnFirst.active = false;\n            this._btnThird.active = false;\n            this._btnSecond.active = true;\n            this._btnThird.getChildByName(\"select\").getChildByName(\"slider\").getChildByName(\"Handle\").y = -172;\n        }\n        if (type == 2) {\n            this._btnSecond.active = false;\n            this._btnFirst.active = true;\n            this._btnThird.active = false;\n            this._Checkbox[1].active = true;\n            this._Checkbox[2].active = false;\n            this._Checkbox[3].active = true;\n            this._Checkbox[4].active = false;\n        }\n        if (type == 3) {\n            this._btnThird.active = true;\n            this._btnSecond.active = false;\n            this._btnFirst.active = false;\n        }\n        if (type == 4) {\n            this._btnThird.active = false;\n            this._btnSecond.active = false;\n            this._btnFirst.active = false;\n        }\n        if (type == 5) {\n            for (var i = 0; i < this._thirdLeft.length; i++) {\n                this._thirdLeft[i].getChildByName('num').getComponent(cc.Label).string = obj[i];\n                this._thirdLeft[i].money = obj[i];\n                this._thirdOther[i].getChildByName('num').getComponent(cc.Label).string = obj[i];\n            }\n        }\n        if (obj && type != 5) {\n            if (obj.canGen) {\n                this._genPai.active = true;\n                this._rangPai.active = false;\n                this._genPai.money = obj.GenMoney;\n                this._genPai.getChildByName('num').getComponent(cc.Label).string = \"跟\" + obj.GenMoney;\n                if (obj.needAllIn) {\n                    this._genPai.getChildByName('num').getComponent(cc.Label).string = \"全下\";\n                    this._jiaZhu.active = false;\n                    this._jiaZhu_cover.active = true;\n                } else {\n                    this._jiaZhu.active = true;\n                    this._jiaZhu_cover.active = false;\n                }\n            } else {\n                this._genPai.active = false;\n                this._rangPai.active = true;\n                this._jiaZhu_cover.active = false;\n            }\n            for (var i = 0; i < 3; i++) {\n                this._secondLeft[i].getChildByName('title').getComponent(cc.Label).string = obj.extraAddOps[i].desc;\n                this._secondLeft[i].money = obj.extraAddOps[i].money;\n                this._secondOther[i].getChildByName('title').getComponent(cc.Label).string = obj.extraAddOps[i].desc;\n                if (obj.addMaxMoney >= obj.extraAddOps[i].money) {\n                    this._secondLeft[i].active = true;\n                    this._secondOther[i].active = false;\n                } else {\n                    this._secondLeft[i].active = false;\n                    this._secondOther[i].active = true;\n                }\n                if (obj.needAllIn && this._genPai.money < obj.extraAddOps[i].money) {\n                    this._secondLeft[i].active = false;\n                    this._secondOther[i].active = true;\n                }\n            }\n            for (var i = 0; i < 5; i++) {\n                if (obj.addMaxMoney >= this._thirdLeft[i].money && obj.addMinMoney <= this._thirdLeft[i].money) {\n                    this._thirdLeft[i].active = true;\n                    this._thirdOther[i].active = false;\n                } else {\n                    this._thirdLeft[i].active = false;\n                    this._thirdOther[i].active = true;\n                }\n            };\n        }\n    },\n    refreshFirstBtn: function refreshFirstBtn(data) {\n        if (parseInt(data.argStatus) == 1) {\n            this._Checkbox[1].active = false;\n            this._Checkbox[2].getChildByName(\"text\").getComponent(cc.Label).string = \"跟\" + data.genMoney;\n            this._Checkbox[1].getComponent(\"CheckBox\").checked = false;\n            this._Checkbox[1].getComponent(\"CheckBox\").refresh();\n            this._Checkbox[2].active = true;\n        } else if (parseInt(data.argStatus) == 2) {\n            this._Checkbox[1].active = false;\n            this._Checkbox[2].active = true;\n            this._Checkbox[2].getChildByName(\"text\").getComponent(cc.Label).string = \"全下\";\n            this._Checkbox[3].active = false;\n            this._Checkbox[4].active = true;\n            this._Checkbox[1].getComponent(\"CheckBox\").checked = false;\n            this._Checkbox[1].getComponent(\"CheckBox\").refresh();\n            this._Checkbox[3].getComponent(\"CheckBox\").checked = false;\n            this._Checkbox[3].getComponent(\"CheckBox\").refresh();\n        } else {\n            this._Checkbox[1].active = true;\n            this._Checkbox[2].active = false;\n            this._Checkbox[3].active = true;\n            this._Checkbox[4].active = false;\n        }\n        this._Checkbox[2].money = data.genMoney;\n        this._Checkbox[2].getComponent(\"CheckBox\").checked = false;\n        this._Checkbox[2].getComponent(\"CheckBox\").refresh();\n    },\n    prepOps: function prepOps(data) {\n        for (var i = 0; i < this._btnFirst.childrenCount; i++) {\n            if (this._Checkbox[i].getComponent(\"CheckBox\").checked) {\n                if (i == 0 && data.canGuo) {\n                    cc.vv.net.send(\"rangpai\");\n                } else if (i == 0 && !data.canGuo) {\n                    cc.vv.net.send(\"qipai\");\n                }\n                if (i == 1 && data.canGuo) {\n                    cc.vv.net.send(\"rangpai\");\n                }\n                if (i == 2 && data.canGen) {\n                    cc.vv.net.send(\"genpai\");\n                    // cc.vv.net.send(\"jiazhu\", this._Checkbox[i].money);\n                }\n                if (i == 3 && data.canGen) {\n                    cc.vv.net.send(\"genpai\", this._Checkbox[2].money);\n                }\n                this._Checkbox[i].getComponent(\"CheckBox\").checked = false;\n                this._Checkbox[i].getComponent(\"CheckBox\").refresh();\n            }\n        }\n    },\n    unchecked: function unchecked() {\n        for (var i = 0; i < this._btnFirst.childrenCount; i++) {\n            this._Checkbox[i].getComponent(\"CheckBox\").checked = false;\n            this._Checkbox[i].getComponent(\"CheckBox\").refresh();\n        }\n    },\n    onSliderBack: function onSliderBack(event) {\n        this._thirdAllIn.active = false;\n        var num = 0;\n        if (event.progress >= 0.1 && event.progress < 0.2) {\n            num = 100;\n        } else if (event.progress >= 0.2 && event.progress < 0.3) {\n            num = 200;\n        } else if (event.progress >= 0.3 && event.progress < 0.4) {\n            num = 300;\n        } else if (event.progress >= 0.4 && event.progress < 0.5) {\n            num = 400;\n        } else if (event.progress >= 0.5 && event.progress < 0.6) {\n            num = 500;\n        } else if (event.progress >= 0.6 && event.progress < 0.7) {\n            num = 600;\n        } else if (event.progress >= 0.7 && event.progress < 0.8) {\n            num = 700;\n        } else if (event.progress >= 0.8 && event.progress < 0.9) {\n            num = 800;\n        } else if (event.progress >= 0.9 && event.progress < 1) {\n            num = 900;\n        } else if (event.progress == 1) {\n            if (this._seats[0]._score == this._thirdJiazhu.maxMoney) {\n                this._thirdAllIn.active = true;\n                this._thirdAllIn.money = this._thirdJiazhu.maxMoney;\n            }\n            num = 1000;\n        }\n        if (this._thirdJiazhu.firstMoney + num >= this._thirdJiazhu.maxMoney) {\n            this._thirdJiazhu.money = this._thirdJiazhu.maxMoney;\n        } else {\n            this._thirdJiazhu.money = this._thirdJiazhu.firstMoney + num;\n        }\n        this._thirdJiazhu.getChildByName('label').getComponent(cc.Label).string = this._thirdJiazhu.money;\n    },\n    //断线重连刷新信息\n    ReconnectionInfo: function ReconnectionInfo(data) {\n        if (data.addOptions.length == 5) this.setBtnOps(5, data.addOptions);\n        this._difen.string = \"底池：\" + data.diChi;\n        this._difen.money = data.diChi;\n        this._tips.node.active = false;\n        if (data.circleHolds.length > 0) {\n            for (var i = 0; i < data.circleHolds.length; i++) {\n                var paiRes = this.ConversionCardRes(parseInt(data.circleHolds[i]));\n                this._pais[i].getChildByName('num').getComponent(cc.Sprite).spriteFrame = paiRes['num'];\n                this._pais[i].getChildByName('hua1').getComponent(cc.Sprite).spriteFrame = paiRes['h_s'];\n                this._pais[i].getChildByName('hua2').getComponent(cc.Sprite).spriteFrame = paiRes['h_b'];\n            };\n            if (this._pais[data.circleHolds.length - 1]) this._pais[data.circleHolds.length - 1].active = true;\n            if (this._pais[data.circleHolds.length]) this._pais[data.circleHolds.length].active = false;\n            if (this._pais[data.circleHolds.length + 1]) this._pais[data.circleHolds.length + 1].active = false;\n            this._pai.active = true;\n        }\n        for (var i = 0; i < data.players.length; i++) {\n            var index = cc.vv.NetMgr.getLocalIndexByUserId(data.players[i].userid);\n            if (data.players[i].canOps) {\n                cc.find('Canvas/seat' + index + '/toggle').active = true;\n                this._seats[index].setTime(data.timer_Counter);\n            } else {\n                cc.find('Canvas/seat' + index + '/toggle').active = false;\n            }\n            var zhu = {\n                money: data.players[i].cZhu,\n                type: 1\n            };\n            this._seats[index].setZhu(zhu);\n            this._seats[index].setMoney(data.players[i].money);\n        }\n        this.showOtherSeat(1);\n        cc.vv.net.send(\"getUserInfoByUserid\");\n    },\n    initEventHandlers: function initEventHandlers() {\n        cc.vv.NetMgr.dataEventHandler = this.node;\n        var self = this;\n        this.node.on('new_user', function (data) {\n            //新人加入房间\n            self.initSingleSeat(data.detail);\n        });\n        this.node.on('game_begin', function (data) {\n            var data = data.detail;\n            self._tips.node.active = false;\n            for (var i = 0; i < data.players.length; i++) {\n                var seat = cc.vv.NetMgr.getSeatByID(data.players[i].userid);\n                seat.score = data.players[i].money;\n                var index = cc.vv.NetMgr.getLocalIndexByUserId(data.players[i].userid);\n                var zhu = {\n                    money: data.players[i].cZhu,\n                    type: 1\n                };\n                self._seats[index].setZhu(zhu);\n                self._seats[index].setMoney(seat.score);\n            };\n            if (data.gameInfo.addOptions.length == 5) self.setBtnOps(5, data.gameInfo.addOptions);\n        });\n        this.node.on('socket_MyHolds', function (data) {\n            var data = data.detail;\n            if (data) {\n                if (!self._seats[0]._pai.active) {\n                    self._tips.node.active = false;\n                    self._seats[0].setPai(data, self);\n                }\n            }\n        });\n        this.node.on('game_diChiUpdate', function (data) {\n            self._difen.string = \"底池：\" + data.detail;\n            self._difen.money = data.detail;\n        });\n        this.node.on('game_myInfo', function (data) {\n            var data = data.detail;\n            var index = cc.vv.NetMgr.getLocalIndexByUserId(data.userid);\n            self._seats[index].setPai(data.holds, self);\n            self._seats[index].setMoney(data.money);\n            self.showOtherSeat(1);\n        });\n        this.node.on('game_myTurn', function (data) {\n            var data = data.detail;\n            var index = cc.vv.NetMgr.getLocalIndexByUserId(data.userid);\n            for (var t = 0; t < 5; t++) {\n                cc.find('Canvas/seat' + t + '/toggle').active = false;\n            }\n            cc.find('Canvas/seat' + index + '/toggle').active = true;\n            self._seats[index].setTime();\n            self.setBtnOps(1, data);\n            self._thirdJiazhu.getChildByName('label').getComponent(cc.Label).string = data.addMinMoney;\n            self._thirdJiazhu.money = data.addMinMoney;\n            self._thirdJiazhu.firstMoney = data.addMinMoney;\n            self._thirdJiazhu.maxMoney = data.addMaxMoney;\n            self.prepOps(data);\n        });\n        this.node.on('game_turnChanged', function (data) {\n            var index = cc.vv.NetMgr.getLocalIndexByUserId(data.detail);\n            for (var t = 0; t < 5; t++) {\n                cc.find('Canvas/seat' + t + '/toggle').active = false;\n            }\n            cc.find('Canvas/seat' + index + '/toggle').active = true;\n            self._seats[index].setTime();\n            cc.find('Canvas/seat0/toggle').active = false;\n            if (self._seats[0]._pai.active) {\n                if (self._seats[0].status == \"AllIn\") {\n                    self.setBtnOps(4);\n                } else {\n                    self.setBtnOps(2);\n                }\n            }\n        });\n        this.node.on('game_oneGuo', function (data) {\n            var index = cc.vv.NetMgr.getLocalIndexByUserId(data.detail);\n            cc.find('Canvas/seat' + index + '/toggle').active = false;\n            self._seats[index].showOps('rangpai');\n            if (self._seats[0]._pai.active) {\n                self.setBtnOps(2);\n            }\n        });\n        this.node.on('game_oneGen', function (data) {\n            var data = data.detail;\n            var index = cc.vv.NetMgr.getLocalIndexByUserId(data.userid);\n            self._seats[index].showOps('genpai');\n            var d = {\n                money: data.cZhu,\n                type: 1\n            };\n            self._seats[index].setMoney(data.money);\n            self._seats[index].setZhu(d);\n            if (self._seats[0]._pai.active) {\n                self.setBtnOps(2);\n            }\n        });\n        this.node.on('game_oneAdd', function (data) {\n            var data = data.detail;\n            var index = cc.vv.NetMgr.getLocalIndexByUserId(data.userid);\n            self._seats[index].showOps('jiazhu');\n            var d = {\n                money: data.cZhu,\n                type: 1\n            };\n            self._seats[index].setMoney(data.money);\n            self._seats[index].setZhu(d);\n            if (self._seats[0]._pai.active) {\n                self.setBtnOps(2);\n            }\n        });\n        this.node.on('game_oneAllIn', function (data) {\n            var data = data.detail;\n            var index = cc.vv.NetMgr.getLocalIndexByUserId(data.userid);\n            self._seats[index].showOps('quanxia');\n            var d = {\n                money: data.cZhu,\n                type: 1\n            };\n            self._seats[index].setMoney(data.money);\n            self._seats[index].setZhu(d);\n            self._seats[index].status = data.status;\n            if (self._seats[0]._pai.active) {\n                if (cc.vv.userMgr.userId == data.userid) {\n                    self.setBtnOps(4);\n                }\n            }\n        });\n        this.node.on('game_oneQuit', function (data) {\n            var index = cc.vv.NetMgr.getLocalIndexByUserId(data.detail);\n            cc.find('Canvas/seat' + index + '/toggle').active = false;\n            self._seats[index].showOps('qipai');\n            self._seats[index].showBeiPai(false);\n            if (cc.vv.userMgr.userId == data.detail) self.setBtnOps(4);\n        });\n        this.node.on('game_allGuo', function (data) {\n            for (var i = 0; i < self._seats.length; i++) {\n                if (self._seats[i].node.active) {\n                    var d = {\n                        money: 0,\n                        type: 1\n                    };\n                    self._seats[i].setZhu(d);\n                }\n            };\n        });\n        this.node.on('game_playersInNewCircle', function (data) {\n            var data = data.detail;\n            for (var i = 0; i < data.length; i++) {\n                var seat = cc.vv.NetMgr.getSeatByID(data[i].userid);\n                if (seat) {\n                    seat.score = data.money;\n                    var index = cc.vv.NetMgr.getLocalIndexByUserId(data[i].userid);\n                    cc.find('Canvas/seat' + index + '/toggle').active = false;\n                    if (self._seats[index].status != \"AllIn\") self._seats[index].showOps();\n                    self._seats[index].setMoney(data[i].money);\n                    // var d = {\n                    //     money: data[i].cZhu,\n                    //     type: 1\n                    // }\n                    // self._seats[index].setZhu(d);\n                    if (self._seats[index]._paimian && !self._seats[index]._paimian.active) {\n                        self._seats[index].hideScore();\n                    }\n                    if (self._seats[0]._pai.active) {\n                        if (self._seats[index].status == \"AllIn\") {\n                            self.setBtnOps(4);\n                        } else {\n                            self.setBtnOps(2);\n                        }\n                    } else {\n                        self._seats[0].hideScore();\n                    }\n                }\n            };\n        });\n        this.node.on('game_newCircle', function (data) {\n            self._zongzhu.string = self._difen.money;\n            var data = data.detail;\n            for (var i = 0; i < data.circleHolds.length; i++) {\n                var paiRes = self.ConversionCardRes(parseInt(data.circleHolds[i]));\n                self._pais[i].getChildByName('num').getComponent(cc.Sprite).spriteFrame = paiRes['num'];\n                self._pais[i].getChildByName('hua1').getComponent(cc.Sprite).spriteFrame = paiRes['h_s'];\n                self._pais[i].getChildByName('hua2').getComponent(cc.Sprite).spriteFrame = paiRes['h_b'];\n            };\n            if (self._pais[data.circleHolds.length - 1]) self._pais[data.circleHolds.length - 1].active = true;\n            if (self._pais[data.circleHolds.length]) self._pais[data.circleHolds.length].active = false;\n            if (self._pais[data.circleHolds.length + 1]) self._pais[data.circleHolds.length + 1].active = false;\n            self._pai.active = true;\n        });\n        this.node.on('game_caculateResult', function (data) {\n            cc.find('Canvas/seat0/toggle').active = false;\n        });\n        this.node.on('game_myARGStatusChanged', function (data) {\n            self.refreshFirstBtn(data.detail);\n        });\n        this.node.on('game_gameInfoById', function (data) {\n            self.ReconnectionInfo(data.detail);\n        });\n        this.node.on('game_userInfoById', function (data) {\n            var data = data.detail;\n            var index = cc.vv.NetMgr.getLocalIndexByUserId(data.userid);\n            self._seats[index].setPai(data.holds, self);\n            if (data.canOps) {\n                self.setBtnOps(1, data);\n            } else {\n                self.setBtnOps(2, data);\n            }\n            self._thirdJiazhu.getChildByName('label').getComponent(cc.Label).string = data.addMinMoney;\n            self._thirdJiazhu.money = data.addMinMoney;\n            self._thirdJiazhu.firstMoney = data.addMinMoney;\n            self._thirdJiazhu.maxMoney = data.addMaxMoney;\n            self.prepOps(data);\n        });\n        this.node.on('game_winner', function (data) {\n            self.win.active = true;\n        });\n        this.node.on('game_loser', function (data) {\n            self.lose.active = true;\n        });\n        this.node.on('game_over', function (data) {\n            var data = data.detail;\n            self.showOtherSeat(2);\n            for (var i = 0; i < data.length; i++) {\n                var seat = cc.vv.NetMgr.getSeatByID(data[i].userid);\n                if (seat) {\n                    seat.score = data[i].money;\n                    var index = cc.vv.NetMgr.getLocalIndexByUserId(data[i].userid);\n                    self._seats[index].showHoldsPai(data[i].holds, self);\n                    self._seats[index].setMoney(data[i].money);\n                    if (data[i].isWinner) {\n                        self._seats[index].showWinText(parseInt(data[i].score[0]));\n                    } else {\n                        self._seats[index].showWinText();\n                    }\n                }\n            }\n            self.setBtnOps(4);\n            self._timeout = setTimeout(function () {\n                self.restart();\n            }, 3000);\n        });\n        this.node.on('user_state_changed', function (data) {\n            var seat = data.detail;\n            var index = cc.vv.NetMgr.getLocalIndexByUserId(seat.userid);\n            self._seats[index].seatHide();\n        });\n        this.node.on('exit_result', function (data) {\n            clearInterval(self._timeout);\n        });\n        this.node.on('voice_msg', function (data) {\n            var data = data.detail;\n            self._voiceMsgQueue.push(data);\n            self.playVoice();\n        });\n        this.node.on('chat_push', function (data) {\n            var data = data.detail;\n            var idx = cc.vv.NetMgr.getSeatIndexByID(data.sender);\n            var localIdx = cc.vv.NetMgr.getLocalIndex(idx);\n            self._seats[localIdx].chat(data.content);\n        });\n        this.node.on('quick_chat_push', function (data) {\n            var data = data.detail;\n            var idx = cc.vv.NetMgr.getSeatIndexByID(data.sender);\n            var localIdx = cc.vv.NetMgr.getLocalIndex(idx);\n            var index = data.content;\n            var info = cc.vv.zjhchat.getQuickChatInfo(index);\n            self._seats[localIdx].chat(info.content);\n            cc.vv.audioMgr.playSFX(info.sound);\n        });\n        this.node.on('emoji_push', function (data) {\n            var data = data.detail;\n            var idx = cc.vv.NetMgr.getSeatIndexByID(data.sender);\n            var localIdx = cc.vv.NetMgr.getLocalIndex(idx);\n            self._seats[localIdx].emoji(data.content);\n        });\n        this.node.on('count_down', function (data) {\n            var data = data.detail;\n            self.countdown.string = data.countDown;\n            self.countdown.node.active = true;\n            if (data.countDown <= 0) {\n                self.countdown.node.active = false;\n            }\n        });\n        this.node.on('exit_room', function (data) {\n            clearInterval(self._timeout);\n            //刷新用户钱币数量\n            self.getGemsAndCoins();\n        });\n    },\n    //设置金币钻石数量\n    getGemsAndCoins: function getGemsAndCoins() {\n        var self = this;\n        cc.vv.userMgr.getGemsAndCoins(function (data) {\n            cc.vv.userMgr.gems = data.gems;\n            cc.vv.userMgr.coins = data.coins;\n        });\n    },\n    onPlayerOver: function onPlayerOver() {\n        if (!cc.sys.isNative) {\n            window.stopPlayVoice();\n        };\n        cc.vv.audioMgr.resumeAll();\n        console.log(\"onPlayCallback:\" + this._playingSeat);\n        var localIndex = this._playingSeat;\n        this._playingSeat = null;\n        this._seats[localIndex].voiceMsg(false);\n    },\n    onDestroy: function onDestroy() {\n        cc.vv.voiceMgr.stop();\n        //        cc.vv.voiceMgr.onPlayCallback = null;\n    },\n    // called every frame, uncomment this function to activate update callback\n    update: function update(dt) {\n        if (window.voice && window.voice.localId != null) {\n            var localId = window.voice.localId;\n            window.voice.localId = null;\n            cc.vv.audioMgr.pauseAll();\n            window.playVoice(localId);\n        }\n        var minutes = Math.floor(Date.now() / 1000 / 60);\n        if (this._lastMinute != minutes) {\n            this._lastMinute = minutes;\n            var date = new Date();\n            var h = date.getHours();\n            h = h < 10 ? \"0\" + h : h;\n            var m = date.getMinutes();\n            m = m < 10 ? \"0\" + m : m;\n            this._timeLabel.string = \"\" + h + \":\" + m;\n        }\n        if (this._lastPlayTime != null) {\n            if (Date.now() > this._lastPlayTime + 200) {\n                this.onPlayerOver();\n                this._lastPlayTime = null;\n            }\n        } else {\n            this.playVoice();\n        }\n    }\n});\n\ncc._RF.pop();","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/c3/c3d5f890-02b1-4a63-b1f6-f6c18fe3b147.js":{"source":"\"use strict\";\ncc._RF.push(module, 'c3d5fiQArFKY7H29sGP47FH', 'dzpkSeat');\n// scripts/dzpk/dzpkSeat.js\n\n\"use strict\";\n\nvar _properties;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\ncc.Class({\n    extends: cc.Component,\n    properties: (_properties = {\n        _sprIcon: null,\n        _ready: null,\n        _lblName: null,\n        _lblScore: null,\n        _voicemsg: null,\n        _chatBubble: null,\n        _emoji: null,\n        _lastChatTime: -1,\n        _userName: \"\",\n        _score: 0,\n        _isOffline: false,\n        _userId: null,\n        _time: -1,\n        _op: null,\n        _pai: null,\n        _pais: [],\n        _pai1: null,\n        _pais1: [],\n        _paimian: null,\n        _timeLabel: null\n    }, _defineProperty(_properties, \"_time\", -1), _defineProperty(_properties, \"_toggle\", null), _properties),\n    // use this for initialization\n    onLoad: function onLoad() {\n        if (cc.vv == null) {\n            return;\n        }\n        this._sprIcon = this.node.getChildByName(\"head\").getComponent(\"ImageLoader\");\n        this._lblName = this.node.getChildByName(\"name\").getComponent(cc.Label);\n        this._lblScore = this.node.getChildByName(\"money\").getComponent(cc.Label);\n        this._op = this.node.getChildByName(\"text\");\n        this._xiazhu = this.node.getChildByName(\"xiazhu\").getChildByName(\"money\").getComponent(cc.Label);\n        this._pai = this.node.getChildByName(\"pai\");\n        this._pai1 = this.node.getChildByName(\"jieguo\");\n        if (this._pai) {\n            for (var i = 0; i < this._pai.childrenCount; i++) {\n                this._pais[i] = this._pai.getChildByName(\"pai\" + i);\n            };\n        }\n        if (this._pai1) {\n            for (var i = 0; i < this._pai1.childrenCount; i++) {\n                this._pais1[i] = this._pai1.getChildByName(\"pai\" + i);\n            };\n        }\n        this._paimian = this.node.getChildByName(\"paimian\");\n        this._chatBubble = this.node.getChildByName(\"ChatBubble\");\n        this._emoji = this.node.getChildByName(\"emoji\");\n        this._count = this.node.getChildByName('count');\n        this._op.active = false;\n        this._xiazhu.string = 0;\n        if (this._pai) this._pai.active = false;\n        if (this._paimian) this._paimian.active = false;\n        if (this._sprIcon && this._userId) {\n            this._sprIcon.setUserID(this._userId);\n        }\n        this._toggle = this.node.getChildByName(\"toggle\");\n        this._timeLabel = this.node.getChildByName(\"toggle\").getChildByName(\"lblTime\").getComponent(cc.Label);\n        this._timeLabel.string = \"00\";\n        this.refresh();\n    },\n    refresh: function refresh() {\n        if (this._lblName != null) {\n            this._lblName.string = this._userName;\n        }\n        if (this._lblScore != null) {\n            this._lblScore.string = this._score;\n        }\n        if (this._chatBubble) {\n            this._chatBubble.active = false;\n        }\n        if (this._emoji) {\n            this._emoji.active = false;\n        }\n        if (this._paimian) this._paimian.active = false;\n        if (this._pai) this._pai.active = false;\n        if (this._pai1) this._pai1.active = false;\n        this.node.active = this._userName != null && this._userName != \"\";\n    },\n    restart: function restart() {\n        if (this._paimian) this._paimian.active = false;\n        if (this._pai) this._pai.active = false;\n        if (this._pai1) this._pai1.active = false;\n        if (this._op) this._op.active = false;\n        if (this._lblName) this._lblName.node.active = true;\n        this.node.getChildByName(\"cover\").active = false;\n        this.node.getChildByName(\"xiazhu\").active = false;\n    },\n    setInfo: function setInfo(name, score) {\n        this._userName = name;\n        this._score = score;\n        if (this._score == null) {\n            this._score = 0;\n        }\n        if (this._lblScore != null) {\n            this._lblScore.node.active = this._score != null;\n        }\n        this.refresh();\n    },\n    hideScore: function hideScore() {\n        this.node.getChildByName(\"xiazhu\").active = false;\n    },\n    setZhu: function setZhu(data) {\n        var self = this;\n        var time = 0;\n        if (data.money > 0) {\n            time = 350;\n        }\n        var fn = function fn(n) {\n            setTimeout(function () {\n                n ? n.active = false : null;\n                if (!self.node.getChildByName(\"xiazhu\").active) self.node.getChildByName(\"xiazhu\").active = true;\n                if (data.money == 0) self.node.getChildByName(\"xiazhu\").active = false;\n                if (data.type == 1) {\n                    self._xiazhu.string = data.money;\n                } else {\n                    self._xiazhu.string = parseInt(self._xiazhu.string) + data.money;\n                }\n            }, time);\n        };\n        if (data.money > 0) {\n            this.showXiaZhuAnim(fn);\n        } else {\n            fn(null);\n        }\n    },\n    seatHide: function seatHide() {\n        this.node.active = false;\n        this._xiazhu.string = 0;\n        this.node.getChildByName(\"xiazhu\").active = false;\n        this._op.active = false;\n        this._userName = \"\";\n        for (var i = 0; i < this._op.childrenCount; i++) {\n            this._op.children[i].active = false;\n        }\n    },\n    setReady: function setReady(isReady) {\n        this._isReady = isReady;\n        if (this._ready) {\n            this._ready.active = this._isReady && cc.vv.gameNetMgr.numOfGames > 0;\n        }\n    },\n    setID: function setID(id) {\n        var idNode = this.node.getChildByName(\"id\");\n        if (idNode) {\n            var lbl = idNode.getComponent(cc.Label);\n            lbl.string = \"ID:\" + id;\n        }\n        this._userId = id;\n        if (this._sprIcon) {\n            this._sprIcon.setUserID(id);\n        }\n    },\n    getID: function getID() {\n        return this._userId;\n    },\n    chat: function chat(content) {\n        if (this._chatBubble == null) {\n            return;\n        }\n        this._emoji.active = false;\n        this._chatBubble.active = true;\n        this._chatBubble.getComponent(cc.Label).string = content;\n        this._chatBubble.getChildByName(\"New Label\").getComponent(cc.Label).string = content;\n        this._lastChatTime = 3;\n    },\n    emoji: function emoji(_emoji) {\n        if (this._emoji == null) {\n            return;\n        }\n        this._chatBubble.active = false;\n        this._emoji.active = true;\n        this._emoji.getComponent(cc.Animation).play(_emoji);\n        this._lastChatTime = 3;\n    },\n    voiceMsg: function voiceMsg(show) {\n        if (this._voicemsg) {\n            this._voicemsg.active = show;\n        }\n    },\n    showXiaZhuAnim: function showXiaZhuAnim(callback) {\n        var x = this._lblScore.node.x;\n        var y = this._lblScore.node.y;\n        var endX = this.node.getChildByName(\"xiazhu\").x;\n        var endY = this.node.getChildByName(\"xiazhu\").y;\n        var node = this.node.getChildByName('chips');\n        var newNode = cc.instantiate(node);\n        newNode.name = \"chips\";\n        this.node.addChild(newNode);\n        newNode.active = true;\n        newNode.spriteFrame = node.getComponent(cc.Sprite).spriteFrame;\n        newNode.x = x;\n        newNode.y = y;\n        var action = cc.moveTo(0.35, cc.p(endX, endY));\n        newNode.runAction(action);\n        callback(newNode);\n    },\n    showOps: function showOps(type) {\n        if (!this._op) return;\n        if (type) {\n            this._op.active = true;\n            for (var i = 0; i < this._op.childrenCount; i++) {\n                if (this._op.children[i].name == type) {\n                    this._op.children[i].active = true;\n                } else {\n                    this._op.children[i].active = false;\n                }\n            };\n            if (type == \"qipai\") {\n                this.node.getChildByName(\"cover\").active = true;\n            }\n            this._lblName.node.active = false;\n        } else {\n            if (this._op.getChildByName(\"qipai\").active) {\n                this._lblName.node.active = false;\n            } else {\n                this._lblName.node.active = true;\n                this._op.active = false;\n            }\n        }\n    },\n    setPai: function setPai(data, parent) {\n        if (data.length == 2 && this._pais.length > 0) {\n            for (var i = 0; i < data.length; i++) {\n                var paiRes = parent.ConversionCardRes(parseInt(data[i]));\n                this._pais[i].getChildByName('num').getComponent(cc.Sprite).spriteFrame = paiRes['num'];\n                this._pais[i].getChildByName('hua1').getComponent(cc.Sprite).spriteFrame = paiRes['h_s'];\n                this._pais[i].getChildByName('hua2').getComponent(cc.Sprite).spriteFrame = paiRes['h_b'];\n            };\n            this._pai.active = true;\n        }\n    },\n    showHoldsPai: function showHoldsPai(data, parent) {\n        if (data.length == 2 && this._pais1) {\n            for (var i = 0; i < data.length; i++) {\n                var paiRes = parent.ConversionCardRes(parseInt(data[i]));\n                this._pais1[i].getChildByName('num').getComponent(cc.Sprite).spriteFrame = paiRes['num'];\n                this._pais1[i].getChildByName('hua1').getComponent(cc.Sprite).spriteFrame = paiRes['h_s'];\n                this._pais1[i].getChildByName('hua2').getComponent(cc.Sprite).spriteFrame = paiRes['h_b'];\n            };\n            this._pai1.active = true;\n            if (this._paimian) this._paimian.active = false;\n            if (this._pai) this._pai.active = false;\n        }\n    },\n    showWinText: function showWinText(type) {\n        var title = \"\";\n        switch (type) {\n            case 9:\n                title = \"皇家同花顺赢\";\n                break;\n            case 8:\n                title = \"同花顺赢\";\n                break;\n            case 7:\n                title = \"金刚赢\";\n                break;\n            case 6:\n                title = \"葫芦赢\";\n                break;\n            case 5:\n                title = \"同花赢\";\n                break;\n            case 4:\n                title = \"顺子赢\";\n                break;\n            case 3:\n                title = \"三条赢\";\n                break;\n            case 2:\n                title = \"双对赢\";\n                break;\n            case 1:\n                title = \"一对赢\";\n                break;\n            case 0:\n                title = \"高牌赢\";\n                break;\n        }\n        if (title == \"\") {\n            this.node.getChildByName(\"cover\").active = true;\n            this._lblName.node.active = true;\n        } else {\n            if (this._pai1.active) {\n                this._lblName.node.active = false;\n            } else {\n                this._lblName.node.active = true;\n            }\n        }\n        this._pai1.getChildByName(\"text\").getComponent(cc.Label).string = title;\n        this.node.getChildByName(\"xiazhu\").active = false;\n    },\n    showBeiPai: function showBeiPai(flag) {\n        if (!this._paimian) return;\n        this._paimian.active = flag;\n    },\n    setMoney: function setMoney(data) {\n        //设置该玩家所拥有的的钱\n        this._lblScore.string = data;\n        this._score = data;\n    },\n    setTime: function setTime(o) {\n        if (o) {\n            this._time = o;\n        } else {\n            this._time = 30;\n        }\n    },\n    // called every frame, uncomment this function to activate update callback\n    update: function update(dt) {\n        if (this._lastChatTime > 0) {\n            this._lastChatTime -= dt;\n            if (this._lastChatTime < 0) {\n                this._chatBubble.active = false;\n                this._emoji.active = false;\n                this._emoji.getComponent(cc.Animation).stop();\n            }\n        }\n        if (this._time > 0) {\n            this._time -= dt;\n            var pre = \"\";\n            if (this._time < 0) {\n                this._time = 0;\n            }\n            var t = Math.ceil(this._time);\n            if (t < 10) {\n                pre = \"0\";\n            }\n            this._timeLabel.string = pre + t;\n        }\n    }\n});\n\ncc._RF.pop();","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/f9/f97f0083-47bd-427a-af50-6f3a3f812da8.js":{"source":"\"use strict\";\ncc._RF.push(module, 'f97f0CDR71Ceq9Qbzo/gS2o', 'all');\n// scripts/zjh/all.js\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        lblRoomNo: {\n            default: null,\n            type: cc.Label\n        },\n        _seats: [],\n        _timeLabel: null,\n        _voiceMsgQueue: [],\n        _lastPlayingSeat: null,\n        _playingSeat: null,\n        _lastPlayTime: null,\n        _shareContent: null,\n        paigroup: {\n            default: null,\n            type: cc.SpriteAtlas\n        },\n        back: cc.Node,\n        fanhui: cc.Node,\n        bg: cc.Node,\n        helpbtn: cc.Node,\n        helpshow: cc.Node,\n        addzhudetail: null,\n        ops: null,\n        zhuobj: null,\n        fan: cc.Node,\n        backAlert: cc.Node,\n        backAlert_no: cc.Node,\n        countdown: cc.Label,\n        _time: -1\n    },\n    onLoad: function onLoad() {\n        if (cc.vv == null) {\n            return;\n        }\n        for (var i = 0; i < 5; i++) {\n            this._seats.push(cc.find(\"Canvas/seat\" + i).getComponent(\"zjhSeat\"));\n        }\n        this._timeLabel = cc.find(\"Canvas/time\").getComponent(cc.Label);\n        this.addComponent(\"ReConnect\");\n        this._zhuomian = cc.find(\"Canvas/zhuomian\");\n        this.zhuobj = ['zhu0', 'zhu1', 'zhu2', 'zhu3', 'zhu0_hui', 'zhu1_hui', 'zhu2_hui', 'zhu3_hui'];\n        this._edit = cc.find(\"Canvas/edit\");\n        this._graykanpai = this._edit.getChildByName('graykanpai');\n        this._kanpai = this._edit.getChildByName('kanpai');\n        this._graygenzhu = this._edit.getChildByName('graygenzhu');\n        this._genzhu = this._edit.getChildByName('genzhu');\n        this._grayjiazhu = this._edit.getChildByName('grayjiazhu');\n        this._jiazhu = this._edit.getChildByName('jiazhu');\n        this._grayqipai = this._edit.getChildByName('grayqipai');\n        this._qipai = this._edit.getChildByName('qipai');\n        this._graybipai = this._edit.getChildByName('graybipai');\n        this._bipai = this._edit.getChildByName('bipai');\n        this._allin = this._edit.getChildByName('allin');\n        this._allZhuLabel = cc.find(\"Canvas/zongxiazhu/label\").getComponent(cc.Label); //牌桌上所有的注\n        this._zhu = cc.find(\"Canvas/zhu\"); //加注界面\n        this._danzhu = cc.find(\"Canvas/danzhu\").getComponent(cc.Label); //单注显示\n        this._lunshu = cc.find(\"Canvas/lunshu\").getComponent(cc.Label); //轮数显示\n        this._pkPanel = cc.find(\"Canvas/pk\"); //pk界面\n        this._flashAnim = cc.find(\"Canvas/pk/shandian/pk_shandian\").getComponent(cc.Animation); //闪电动画\n        this._bipaiAnim = cc.find(\"Canvas/pk/bipai\").getComponent(cc.Animation); //比牌动画\n        this._leftLie = this._pkPanel.getChildByName('leftLie');\n        this._rightLie = this._pkPanel.getChildByName('rightLie');\n        this._tips = cc.find(\"Canvas/tips\").getComponent(cc.Label); //tips显示\n        cc.vv.utils.addClickEvent(this._kanpai, this.node, \"all\", \"kanpai\");\n        cc.vv.utils.addClickEvent(this.back, this.node, \"all\", \"onBtnClicked\");\n        cc.vv.utils.addClickEvent(this.fanhui, this.node, \"all\", \"onBtnClicked\");\n        cc.vv.utils.addClickEvent(this.fan, this.node, \"all\", \"onBtnClicked\");\n        cc.vv.utils.addClickEvent(this.bg, this.node, \"all\", \"onBtnClicked\");\n        cc.vv.utils.addClickEvent(this.helpbtn, this.node, \"all\", \"onBtnClicked\");\n        cc.vv.utils.addClickEvent(this.helpshow, this.node, \"all\", \"onBtnClicked\");\n        cc.vv.utils.addClickEvent(this.backAlert_no, this.node, \"all\", \"onBtnClicked\");\n        cc.vv.utils.addClickEvent(this._qipai, this.node, \"all\", \"qipai\");\n        cc.vv.utils.addClickEvent(this._bipai, this.node, \"all\", \"bipai\");\n        cc.vv.utils.addClickEvent(this._genzhu, this.node, \"all\", \"genzhu\");\n        cc.vv.utils.addClickEvent(this._jiazhu, this.node, \"all\", \"jiazhu\");\n        cc.vv.utils.addClickEvent(cc.find('Canvas/zhu/zhu0'), this.node, \"all\", \"addzhu\");\n        cc.vv.utils.addClickEvent(cc.find('Canvas/zhu/zhu1'), this.node, \"all\", \"addzhu\");\n        cc.vv.utils.addClickEvent(cc.find('Canvas/zhu/zhu2'), this.node, \"all\", \"addzhu\");\n        cc.vv.utils.addClickEvent(cc.find('Canvas/zhu/zhu3'), this.node, \"all\", \"addzhu\");\n        this.initView();\n        this.initSeats();\n        this.initEventHandlers();\n        cc.vv.net.send(\"getUserInfoByUserid\");\n        cc.vv.net.send(\"getGameInfoByUserid\");\n        cc.vv.net.send(\"ready\");\n        cc.vv.audioMgr.playBGM(\"back.mp3\");\n    },\n    initView: function initView() {\n        this._kanpai.active = false;\n        this._qipai.active = false;\n        this._genzhu.active = false;\n        this._allin.active = false;\n        this._jiazhu.active = false;\n        this._bipai.active = false;\n        this._pkPanel.active = false;\n        this._zhuomian.active = false;\n        this._tips.node.active = true;\n    },\n    freshUserInfo: function freshUserInfo(data) {\n        console.log('获取断线重连后的用户信息', data);\n        var self = this;\n        var seats = cc.vv.gameNetMgr.seats;\n        for (var i = 0; i < seats.length; i++) {\n            for (var t = 0; t < 3; t++) {\n                cc.find('Canvas/seat' + i + '/fupai' + t).active = true;\n            }\n        }\n        cc.find(\"Canvas/danzhu\").active = true;\n        cc.find(\"Canvas/lunshu\").active = true;\n        cc.find(\"Canvas/zongxiazhu\").active = true;\n        self._tips.node.active = false;\n        self.countdown.node.active = false;\n        self._kanpai.active = true;\n        self._qipai.active = true;\n        self._genzhu.active = data.canGenzhu;\n        self._jiazhu.active = data.canAddZhu;\n        self._bipai.active = data.canBiPai;\n        self.ops = data.xiaZhuOptions;\n        var holds = data.holds;\n        if (holds && holds.length > 0) {\n            var seat = self._seats[0];\n            var spriteFrames = [];\n            for (var i = 0; i < 3; i++) {\n                spriteFrames.push(self.getpaiRes(holds[i]));\n            }\n            seat.fanPai(spriteFrames);\n        }\n    },\n    freshGameInfo: function freshGameInfo(data) {\n        console.log('获取断线重连后的游戏信息', data);\n        if (this.ops) {\n            var self = this;\n            this.freshCurrentZhu(data.currentZhu);\n            this.freshCircleCount(data.circleCount);\n            this._zhuomian.active = true;\n            var total = data.moneyPool;\n            self._allZhuLabel.string = total; //总数\n            //fresh其他人的数据\n            var commonInfo = data.players;\n            var allZhu = [];\n            for (var i in commonInfo) {\n                var temp = commonInfo[i];\n                var userid = temp.userid;\n                var costMoney = temp.costMoney; //下的注\n                var money = temp.money; //所有用的钱\n                //刷新这个人的信息\n                var seatIndex = cc.vv.gameNetMgr.getSeatIndexByID(userid);\n                var localIndex = cc.vv.gameNetMgr.getLocalIndexZJH(seatIndex);\n                var seat = self._seats[localIndex];\n                seat.setCostMoney(costMoney);\n                seat.setMoney(money);\n                var costArr = temp.costArr;\n                for (var j in costArr) {\n                    allZhu.push(costArr[j]);\n                }\n            }\n            //添加桌面上的注\n            for (var i in allZhu) {\n                var zhu = allZhu[i];\n                var node = self._zhuomian.children[0];\n                var newNode = cc.instantiate(node);\n                self._zhuomian.addChild(newNode);\n                newNode.getChildByName('label').getComponent(cc.Label).string = cc.vv.utils.showJinbi(zhu, 'W');\n                var zhuLevel = self.getZhuLevel(zhu);\n                var zhuObj = cc.find('Canvas/zhu/' + self.zhuobj[zhuLevel]);\n                var zhuFrameCopy = zhuObj.getComponent(cc.Sprite).spriteFrame;\n                newNode.getComponent(cc.Sprite).spriteFrame = zhuFrameCopy;\n                newNode.x = Math.random() * 200;\n                newNode.y = Math.random() * 200;\n                newNode.active = true;\n            }\n        }\n    },\n    getZhuLevel: function getZhuLevel(zhu) {\n        var ops = this.ops;\n        var zhuLevel = null;\n        for (var i in ops) {\n            if (parseInt(ops[i]) == parseInt(zhu)) {\n                zhuLevel = i;\n                break;\n            }\n        }\n        if (zhuLevel == null) {\n            for (var i in ops) {\n                if (parseInt(ops[i]) == parseInt(zhu) * 0.5) {\n                    zhuLevel = i;\n                    break;\n                }\n            }\n        }\n        if (zhuLevel == null) {\n            for (var i in ops) {\n                if (parseInt(ops[i]) == parseInt(zhu) * 2) {\n                    zhuLevel = i;\n                    break;\n                }\n            }\n        }\n        return zhuLevel;\n    },\n    refreshBtns: function refreshBtns(data) {\n        var seats = cc.vv.gameNetMgr.seats;\n        for (var i = 0; i < seats.length; i++) {\n            for (var t = 0; t < 3; t++) {\n                cc.find('Canvas/seat' + i + '/fupai' + t).active = true;\n            }\n        }\n        cc.find(\"Canvas/danzhu\").active = true;\n        cc.find(\"Canvas/lunshu\").active = true;\n        cc.find(\"Canvas/zongxiazhu\").active = true;\n        this._tips.node.active = false;\n        this.countdown.node.active = false;\n        this.freshCurrentZhu(data.currentZhu);\n        this.freshCircleCount(data.turn);\n        this._kanpai.active = true;\n        this._qipai.active = true;\n        this._genzhu.active = false;\n        this._jiazhu.active = false;\n        this._bipai.active = false;\n        this.showXiaDiZhuAnim(data.currentZhu); //下底注动画\n    },\n    showXiaDiZhuAnim: function showXiaDiZhuAnim(currentZhu) {\n        var children_baoliu = [];\n        for (var i in this._zhuomian.children) {\n            if (i < 5) {\n                //只留5个底注的筹码\n                children_baoliu.push(this._zhuomian.children[i]);\n            }\n            this._zhuomian.children[i].active = false;\n        }\n        this._zhuomian.removeAllChildren();\n        for (var j in children_baoliu) {\n            this._zhuomian.addChild(children_baoliu[j]);\n        }\n        this._zhuomian.active = true;\n        var addMoney = 100;\n        if (currentZhu) {\n            addMoney = parseInt(currentZhu) * 0.5;\n        }\n        for (var k in this._seats) {\n            if (!this._seats[k]._userName) {\n                continue;\n            };\n            var data = {\n                x: this._seats[k].node.x,\n                y: this._seats[k].node.y,\n                addMoney: addMoney,\n                addMoneyLevel: 0\n            };\n            this.showZhuAnim(data, k);\n        }\n    },\n    initEventHandlers: function initEventHandlers() {\n        cc.vv.gameNetMgr.dataEventHandler = this.node;\n        var self = this;\n        this.node.on('new_user', function (data) {\n            self.initSingleSeat(data.detail);\n        });\n        this.node.on('user_state_changed', function (data) {\n            self.initSingleSeat(data.detail);\n        });\n        this.node.on('game_begin', function (data) {\n            self.refreshBtns(data.detail);\n            // self.initSeats();\n        });\n        this.node.on('game_num', function (data) {\n            // self.refreshBtns();\n        });\n        this.node.on('voice_msg', function (data) {\n            var data = data.detail;\n            self._voiceMsgQueue.push(data);\n            self.playVoice();\n        });\n        this.node.on('chat_push', function (data) {\n            var data = data.detail;\n            var idx = cc.vv.gameNetMgr.getSeatIndexByID(data.sender);\n            var localIdx = cc.vv.gameNetMgr.getLocalIndexZJH(idx);\n            self._seats[localIdx].chat(data.content);\n        });\n        this.node.on('quick_chat_push', function (data) {\n            var data = data.detail;\n            var idx = cc.vv.gameNetMgr.getSeatIndexByID(data.sender);\n            var localIdx = cc.vv.gameNetMgr.getLocalIndexZJH(idx);\n            var index = data.content;\n            var info = cc.vv.zjhchat.getQuickChatInfo(index);\n            self._seats[localIdx].chat(info.content);\n            cc.vv.audioMgr.playSFX(info.sound);\n        });\n        this.node.on('emoji_push', function (data) {\n            var data = data.detail;\n            var idx = cc.vv.gameNetMgr.getSeatIndexByID(data.sender);\n            var localIdx = cc.vv.gameNetMgr.getLocalIndexZJH(idx);\n            self._seats[localIdx].emoji(data.content);\n        });\n        this.node.on('kanpai', function (event) {\n            var data = event.detail;\n            var holds = data.holds;\n            var seat = self._seats[0];\n            var spriteFrames = [];\n            for (var i = 0; i < 3; i++) {\n                spriteFrames.push(self.getpaiRes(holds[i]));\n            }\n            seat.fanPai(spriteFrames);\n            var currentZhu = data.currentZhu;\n            self._genzhu.getChildByName('num').getComponent(cc.Label).string = cc.vv.utils.showJinbi(currentZhu, 'W');\n        });\n        this.node.on('qipai', function (event) {\n            var data = event.detail;\n            if (data.status == 'shu') {\n                cc.find('Canvas/seat0/shuicon').active = true;\n            } else {\n                cc.find('Canvas/seat0/qiicon').active = true;\n            }\n            self._grayqipai.active = true;\n            self._qipai.active = false;\n            var holds = data.holds;\n            var seat = self._seats[0];\n            var spriteFrames = [];\n            for (var i = 0; i < 3; i++) {\n                spriteFrames.push(self.getpaiRes(holds[i]));\n            }\n            seat.fanPai(spriteFrames);\n        });\n        this.node.on('game_myTurn_push', function (event) {\n            var data = event.detail;\n            self.addzhudetail = data.xiaZhuOptions;\n            self.ops = data.xiaZhuExtra.ops;\n            //可操作按钮\n            if (data.canAddZhu) {\n                self._jiazhu.active = true;\n            }\n            if (data.canGenzhu) {\n                self._genzhu.active = true;\n                var currentZhu = data.currentZhu;\n                if (!data.hasCheckedPai) {\n                    //暗注\n                    currentZhu = currentZhu * 0.5;\n                }\n                self._genzhu.getChildByName('num').getComponent(cc.Label).string = cc.vv.utils.showJinbi(currentZhu, 'W');\n            }\n            if (data.canBiPai) {\n                //满足比牌条件\n                self._bipai.active = true;\n            }\n            if (data.allInFlag) {\n                self._allin.active = true;\n                // self._graygenzhu.active = false;\n            } else {\n                self._allin.active = false;\n            }\n        });\n        this.node.on('gameOver_notify_push', function (event) {\n            var i = cc.vv.gameNetMgr.getLocalIndexZJH(cc.vv.gameNetMgr.getSeatIndexByID(event.detail));\n            cc.find('Canvas/seat' + i + '/toggle').active = false;\n        });\n        this.node.on('game_turnChanged_push', function (event) {\n            var i = cc.vv.gameNetMgr.getLocalIndexZJH(cc.vv.gameNetMgr.getSeatIndexByID(event.detail));\n            for (var t = 0; t < 5; t++) {\n                cc.find('Canvas/seat' + t + '/toggle').active = false;\n            }\n            cc.find('Canvas/seat' + i + '/toggle').active = true;\n            self._seats[i].setTime();\n            if (i != 0) {\n                //如果没有轮到自己操作\n                self._genzhu.active = false;\n                self._jiazhu.active = false;\n                self._bipai.active = false;\n            }\n        });\n        this.node.on('game_actionChanged_push', function (event) {\n            var bp = cc.find('Canvas/edit/bipai');\n            var data = event.detail;\n            if (data.xiaZhuOptions) self.addzhudetail = data.xiaZhuOptions;\n            if (data.xiaZhuExtra.ops) self.ops = data.xiaZhuExtra.ops;\n            if (event.detail.canBiPai) {\n                bp.active = true;\n            } else {\n                bp.active = false;\n            }\n        });\n        this.node.on('guo_notify_push', function (event) {\n            cc.find('Canvas/seat0/toggle').active = false;\n        });\n        this.node.on('genZhu_notify', function (event) {\n            var userid = event.detail.userid;\n            var seatIndex = cc.vv.gameNetMgr.getSeatIndexByID(userid);\n            var localIndex = cc.vv.gameNetMgr.getLocalIndexZJH(seatIndex);\n            var seat = self._seats[localIndex];\n            seat.showGenZhu();\n            var currentZhu = event.detail.currentZhu;\n            var hasCheckedPai = event.detail.hasCheckedPai;\n            var addMoney = event.detail.addMoney;\n            var addMoneyLevel = event.detail.addMoneyLevel;\n            self.freshCurrentZhu(currentZhu);\n            var data = {\n                x: seat.node.x,\n                y: seat.node.y,\n                addMoney: addMoney,\n                addMoneyLevel: addMoneyLevel,\n                hasCheckedPai: hasCheckedPai\n            };\n            self.showZhuAnim(data);\n        });\n        this.node.on('kanPai_notify', function (event) {\n            var userid = event.detail;\n            var localIndex = cc.vv.gameNetMgr.getLocalIndexByUserIdZJH(userid);\n            var seat = self._seats[localIndex];\n            seat.showKanPai();\n        });\n        this.node.on('jiaZhu_notify', function (event) {\n            var userid = event.detail.userid;\n            var localIndex = cc.vv.gameNetMgr.getLocalIndexByUserIdZJH(userid);\n            var seat = self._seats[localIndex];\n            seat.showJiaZhu();\n            var currentZhu = event.detail.currentZhu;\n            var hasCheckedPai = event.detail.hasCheckedPai;\n            var addMoney = event.detail.addMoney;\n            var addMoneyLevel = event.detail.addMoneyLevel;\n            self.freshCurrentZhu(currentZhu);\n            var data = {\n                x: seat.node.x,\n                y: seat.node.y,\n                addMoney: addMoney,\n                addMoneyLevel: addMoneyLevel,\n                hasCheckedPai: hasCheckedPai\n            };\n            self.showZhuAnim(data);\n        });\n        this.node.on('qiPai_notify', function (event) {\n            var data = event.detail;\n            var userid = data.userId;\n            var localIndex = cc.vv.gameNetMgr.getLocalIndexByUserIdZJH(userid);\n            var seat = self._seats[localIndex];\n            seat.showQiPai(data.status);\n        });\n        this.node.on('win', function (data) {\n            //赢了一局\n            var data = data.detail;\n            console.log('赢了一局', data);\n            //赢的人显示手牌\n            var userid = data.winer;\n            var localIndex = cc.vv.gameNetMgr.getLocalIndexByUserIdZJH(userid);\n            var seat = self._seats[localIndex];\n            var holds = data.holds;\n            var spriteFrames = [];\n            for (var i = 0; i < 3; i++) {\n                spriteFrames.push(self.getpaiRes(holds[i]));\n            }\n            seat.fanPai(spriteFrames);\n            //赢了的动画\n            self.endData = data;\n            self.isEnd = true;\n            if (!self._pkPanel.active) {\n                self.showEndAnim();\n            }\n        });\n        this.node.on('game_moneyPool', function (data) {\n            //刷新总注\n            data = data.detail;\n            var total = data.moneyPool;\n            self._allZhuLabel.string = total; //总数\n            //fresh其他人的数据\n            var commonInfo = data.commonInfo;\n            for (var i in commonInfo) {\n                var userid = i;\n                var temp = commonInfo[i];\n                var costMoney = temp.costMoney; //下的注\n                var money = temp.money; //所有用的钱\n                //刷新这个人的信息\n                var seatIndex = cc.vv.gameNetMgr.getSeatIndexByID(userid);\n                var localIndex = cc.vv.gameNetMgr.getLocalIndexZJH(seatIndex);\n                var seats = cc.vv.gameNetMgr.seats;\n                seats[seatIndex].score = money;\n                var seat = self._seats[localIndex];\n                seat.setCostMoney(costMoney);\n                seat.setMoney(money);\n            }\n        });\n        this.node.on('message_notify', function (data) {\n            //消息显示\n            data = data.detail;\n            var message = data.message;\n            cc.vv.alert.show(\"注意\", message);\n        });\n        this.node.on('game_circleCount', function (data) {\n            //刷新轮数\n            var circleCount = data.detail;\n            self.freshCircleCount(circleCount);\n        });\n        this.node.on('clickPkButton', function (data) {\n            var userId2 = data.detail;\n            self.clickPkButton(userId2);\n        });\n        this.node.on('game_userInBipai_result', function (data) {\n            data = data.detail;\n            var winer = data.winer;\n            var loser = data.loser;\n            self.bipaiAnimQueue = [{\n                winer: winer,\n                loser: loser\n            }]; //比牌队列\n            self.bipaiAnimIndex = 0;\n            self.showBipaiAnim();\n        });\n        this.node.on('game_wannaToCompare_push', function (data) {\n            data = data.detail;\n            if (!data || data.length < 1) {\n                self._tips.node.active = false;\n                return;\n            }\n            self._tips.string = \"请选择比牌玩家\";\n            self._tips.node.active = true;\n            for (var i in data) {\n                var userid = data[i].userid;\n                var seatIndex = cc.vv.gameNetMgr.getSeatIndexByID(userid);\n                var localIndex = cc.vv.gameNetMgr.getLocalIndexZJH(seatIndex);\n                var seat = self._seats[localIndex];\n                seat.showPkButton();\n            }\n        });\n        this.node.on('count_down', function (data) {\n            if (self._tips.node.active) {\n                self._tips.node.active = false;\n            }\n            var data = data.detail;\n            self.countdown.string = data.countDown;\n            self.countdown.node.active = true;\n            if (data.countDown <= 0) {\n                self.countdown.node.active = false;\n            }\n        });\n        this.node.on('game_AntiResults', function (data) {\n            //最后一轮的比牌\n            data = data.detail;\n            self.bipaiAnimQueue = [];\n            for (var i in data) {\n                var bipaiData = data[i];\n                var winer = bipaiData['winUserid'];\n                var loser = bipaiData['loseUserid'];\n                self.bipaiAnimQueue.push({\n                    winer: winer,\n                    loser: loser\n                }); //比牌队列\n            }\n            self.bipaiAnimIndex = 0;\n            self.showBipaiAnim();\n        });\n        this.node.on('game_userInfoById', function (data) {\n            //获取断线重连后的用户信息\n            data = data.detail;\n            self.freshUserInfo(data);\n        });\n        this.node.on('game_gameInfoById', function (data) {\n            //获取断线重连后的游戏信息\n            data = data.detail;\n            self.freshGameInfo(data);\n        });\n        this.node.on('exit_room', function (data) {\n            //刷新用户钱币数量\n            self.getGemsAndCoins();\n        });\n        this.node.on('noMoney_exit', function (data) {\n            //提示金钱不足\n            cc.vv.alert.show(\"提示\", \"金钱不足，您将退出房间，请在活动领取每日金币补助\");\n        });\n        this.node.on('match_exit_error', function (data) {\n            //锦标赛不能退出游戏\n            cc.vv.alert.show(\"提示\", \"锦标赛中不能退出游戏\");\n        });\n        this.node.on('game_sbInAllIn', function (data) {\n            //有人allin了\n            console.log('game_sbInAllIn=====>', data.detail);\n            data = data.detail;\n            self.doAllin(data, function () {\n                cc.vv.net.send('allInActiveFromClient'); //触发下一步\n            });\n        });\n    },\n    //设置金币钻石数量\n    getGemsAndCoins: function getGemsAndCoins() {\n        var self = this;\n        cc.vv.userMgr.getGemsAndCoins(function (data) {\n            cc.vv.userMgr.gems = data.gems;\n            cc.vv.userMgr.coins = data.coins;\n        });\n    },\n    initSeats: function initSeats() {\n        var seats = cc.vv.gameNetMgr.seats;\n        if (!seats) return;\n        for (var i = 0; i < seats.length; ++i) {\n            this.initSingleSeat(seats[i]);\n        }\n    },\n    initSingleSeat: function initSingleSeat(seat) {\n        var index = cc.vv.gameNetMgr.getLocalIndexZJH(seat.seatindex);\n        var isOffline = !seat.online;\n        // var isZhuang = seat.seatindex == cc.vv.gameNetMgr.button;\n        this._seats[index].setInfo(seat.name, seat.score);\n        this._seats[index].setReady(seat.ready);\n        this._seats[index].setOffline(isOffline);\n        this._seats[index].setID(seat.userid);\n        this._seats[index].voiceMsg(false);\n    },\n    onBtnSettingsClicked: function onBtnSettingsClicked() {\n        cc.vv.popupMgr.showSettings();\n    },\n    onBtnBackClicked: function onBtnBackClicked() {\n        cc.vv.alert.show(\"返回大厅\", \"返回大厅房间仍会保留，快去邀请大伙来玩吧！\", function () {\n            cc.director.loadScene(\"hall\");\n        }, true);\n    },\n    onBtnChatClicked: function onBtnChatClicked() {},\n    // 点击分享按钮，使用微信分享\n    onBtnWeichatClicked: function onBtnWeichatClicked() {\n        cc.vv.share.show();\n    },\n    onBtnDissolveClicked: function onBtnDissolveClicked() {\n        cc.vv.alert.show(\"解散房间\", \"解散房间不扣金币，是否确定解散？\", function () {\n            cc.vv.net.send(\"dispress\");\n        }, true);\n    },\n    onBtnExit: function onBtnExit() {\n        this.backAlert.active = false;\n        cc.vv.net.send(\"exit\");\n    },\n    onBtnExchange: function onBtnExchange() {\n        this.backAlert.active = false;\n        cc.vv.userMgr.exchange = 1;\n        cc.vv.net.send(\"exit\");\n    },\n    playVoice: function playVoice() {\n        if (this._playingSeat == null && this._voiceMsgQueue.length) {\n            console.log(\"playVoice\");\n            var data = this._voiceMsgQueue.shift();\n            var idx = cc.vv.gameNetMgr.getSeatIndexByID(data.sender);\n            var localIndex = cc.vv.gameNetMgr.getLocalIndexZJH(idx);\n            this._playingSeat = localIndex;\n            this._seats[localIndex].voiceMsg(true);\n            var msgInfo = JSON.parse(data.content);\n            var msgfile = \"voicemsg.amr\";\n            this._lastPlayTime = Date.now() + msgInfo.time;\n            if (!cc.sys.isNative) {\n                var serverid = msgInfo['msg'];\n                window.downloadVoice(serverid);\n                return;\n            }\n            cc.vv.voiceMgr.writeVoice(msgfile, msgInfo.msg);\n            cc.vv.voiceMgr.play(msgfile);\n        }\n    },\n    // called every frame, uncomment this function to activate update callback\n    update: function update(dt) {\n        if (window.voice && window.voice.localId != null) {\n            var localId = window.voice.localId;\n            window.voice.localId = null;\n            cc.vv.audioMgr.pauseAll();\n            window.playVoice(localId);\n        }\n        var minutes = Math.floor(Date.now() / 1000 / 60);\n        if (this._lastMinute != minutes) {\n            this._lastMinute = minutes;\n            var date = new Date();\n            var h = date.getHours();\n            h = h < 10 ? \"0\" + h : h;\n            var m = date.getMinutes();\n            m = m < 10 ? \"0\" + m : m;\n            this._timeLabel.string = \"\" + h + \":\" + m;\n        }\n        if (this._lastPlayTime != null) {\n            if (Date.now() > this._lastPlayTime + 200) {\n                this.onPlayerOver();\n                this._lastPlayTime = null;\n            }\n        } else {\n            this.playVoice();\n        }\n    },\n    onPlayerOver: function onPlayerOver() {\n        if (!cc.sys.isNative) {\n            window.stopPlayVoice();\n        };\n        cc.vv.audioMgr.resumeAll();\n        console.log(\"onPlayCallback:\" + this._playingSeat);\n        var localIndex = this._playingSeat;\n        this._playingSeat = null;\n        this._seats[localIndex].voiceMsg(false);\n    },\n    onDestroy: function onDestroy() {\n        cc.vv.voiceMgr.stop();\n        //        cc.vv.voiceMgr.onPlayCallback = null;\n    },\n    //点击看牌按钮\n    kanpai: function kanpai() {\n        cc.vv.net.send('kanpai');\n    },\n    //点击加注按钮，打开加注界面\n    jiazhu: function jiazhu() {\n        var self = this;\n        for (var d in self.zhuobj) {\n            cc.find('Canvas/zhu/' + self.zhuobj[d]).active = false;\n        }\n        self._zhu.active = true;\n        for (var i in self.addzhudetail) {\n            if (self.inObject(self.addzhudetail[i], self.ops)) {\n                self._zhu.getChildByName('zhu' + i).active = true;\n                self._zhu.getChildByName('zhu' + i).getChildByName('label').getComponent(cc.Label).string = cc.vv.utils.showJinbi(self.addzhudetail[i], 'W');\n            } else {\n                self._zhu.getChildByName('zhu' + i + '_hui').active = true;\n                self._zhu.getChildByName('zhu' + i + '_hui').getChildByName('label').getComponent(cc.Label).string = cc.vv.utils.showJinbi(self.addzhudetail[i], 'W');\n            };\n        }\n    },\n    //点击比牌按钮\n    bipai: function bipai() {\n        cc.vv.net.send('wannaToComparePai');\n        //显示其他人的pk按钮，选择和谁比牌\n        // this.showOthersPkButton();\n    },\n    clickPkButton: function clickPkButton(userId2) {\n        this.hideOhersPkButton();\n        var userId1 = cc.vv.userMgr.userId; //自己\n        cc.vv.net.send('bipai', {\n            userId1: userId1,\n            userId2: userId2\n        });\n    },\n    //点击弃牌按钮\n    qipai: function qipai() {\n        cc.vv.net.send('qipai');\n    },\n    //点击跟注按钮\n    genzhu: function genzhu() {\n        cc.vv.net.send('genzhu');\n    },\n    addzhu: function addzhu(e) {\n        var self = this,\n            num;\n        var index = e.target.name.split('zhu')[1];\n        num = self.addzhudetail[index];\n        console.log(num);\n        cc.vv.net.send('addzhu', num);\n        this._zhu.active = false;\n    },\n    getpaiRes: function getpaiRes(data) {\n        var self = this;\n        data = data + 1;\n        var type, num, huase_big, huase_small;\n        num = (data % 100).toString();\n        if (data > 0 && data < 14) {\n            type = '04'; //黑桃\n            num = num + '-1'; //黑牌\n        } else if (data > 100 && data < 114) {\n            type = '03'; //红桃\n            num = num + '-2'; //红牌\n        } else if (data > 200 && data < 214) {\n            type = '02'; //梅花\n            num = num + '-1'; //黑牌\n        } else if (data > 300 && data < 314) {\n            type = '01'; //方块\n            num = num + '-2'; //红牌\n        }\n        huase_big = \"huase_big\" + type;\n        huase_small = \"huase_small\" + type;\n        var result = {\n            num: self.paigroup.getSpriteFrame(num),\n            huase_big: self.paigroup.getSpriteFrame(huase_big),\n            huase_small: self.paigroup.getSpriteFrame(huase_small)\n        };\n        // if (num == '1') num = 'A';\n        // if (num == '11') num = 'J';\n        // if (num == '12') num = 'Q';\n        // if (num == '13') num = 'K';\n        return result;\n    },\n    onBtnClicked: function onBtnClicked(event) {\n        if (event.target.name != \"zhu\") {\n            cc.find('Canvas/zhu').active = false;\n        }\n        if (event.target.name == \"back\") {\n            this.fanhui.active = true;\n            this.helpshow.active = false;\n            this.helpbtn.active = true;\n        }\n        if (event.target.name == \"bg\") {\n            this.fanhui.active = false;\n            this.helpshow.active = false;\n            this.helpbtn.active = true;\n        }\n        if (event.target.name == \"helpbtn\") {\n            this.helpshow.active = true;\n            this.helpbtn.active = false;\n            this.fanhui.active = false;\n        }\n        if (event.target.name == \"fan\") {\n            this.fanhui.active = false;\n            this.helpshow.active = false;\n            this.helpbtn.active = true;\n            this.backAlert.active = true;\n        }\n        if (event.target.name == \"no\") {\n            this.fanhui.active = false;\n            this.helpshow.active = false;\n            this.helpbtn.active = true;\n            this.backAlert.active = false;\n        }\n    },\n    freshCurrentZhu: function freshCurrentZhu(current_zhu) {\n        this._danzhu.string = \"单注：\" + current_zhu;\n    },\n    freshNumOfLun: function freshNumOfLun(num) {},\n    restart: function restart() {\n        this.clearEnd();\n        this.initView();\n        this.initSeats();\n    },\n    freshCircleCount: function freshCircleCount(circleCount) {\n        this._lunshu.string = \"轮数：\" + (circleCount + 1) + \"/15\";\n    },\n    showPk: function showPk() {\n        this._leftLie.active = false;\n        this._rightLie.active = false;\n        this._pkPanel.active = true;\n        //播放比牌动画\n        this._flashAnim.play('pk_shandian');\n        this._bipaiAnim.play('bipai');\n    },\n    hidePk: function hidePk(data) {\n        var self = this;\n        setTimeout(function () {\n            self.showLie(data);\n            setTimeout(function () {\n                self._pkPanel.active = false;\n                self.bipaiAnimIndex++; //下一个比牌动画\n                if (self.bipaiAnimIndex >= self.bipaiAnimQueue.length) {\n                    //没有下一个动画了\n                    if (self.isEnd) {\n                        //如果标识为游戏结束\n                        self.showEndAnim();\n                    } else {\n                        //如果没有结束,执行比牌系列动画结束后的回调函数\n                        if (self.bipaiAnimCallback) {\n                            self.bipaiAnimCallback();\n                        }\n                    }\n                } else {\n                    self.showBipaiAnim(); //执行下一个比牌动画\n                }\n            }, 1000);\n        }, 1000);\n    },\n    showLie: function showLie(data) {\n        //0-显示左边裂牌 1-显示右边裂牌\n        if (data == 1) {\n            this._rightLie.active = true;\n        } else {\n            this._leftLie.active = true;\n        }\n    },\n    hideLie: function hideLie() {\n        this._leftLie.active = false;\n        this._rightLie.active = false;\n    },\n    showOthersPkButton: function showOthersPkButton() {\n        for (var i in this._seats) {\n            if (i == 0) continue;\n            var seat = this._seats[i];\n            seat.showPkButton();\n        }\n    },\n    showZhuAnim: function showZhuAnim(data, dizhuLevel) {\n        //下注动画\n        if (!data) return;\n        var x = data.x; //起始点X\n        var y = data.y; //起始点Y\n        var random_diff = Math.random() * 50;\n        var endX = x * 0.2 + random_diff;\n        var endY = y * 0.2 + random_diff;\n        var addMoney = data.addMoney;\n        var addMoneyLevel = data.addMoneyLevel;\n        var node = this._zhuomian.children[0];\n        var newNode = cc.instantiate(node);\n        if (typeof dizhuLevel != 'undefined') {\n            //如果是底注本身\n            newNode = this._zhuomian.children[dizhuLevel];\n            endX = newNode.x;\n            endY = newNode.y;\n        } else {\n            this._zhuomian.addChild(newNode);\n        }\n        newNode.getChildByName('label').getComponent(cc.Label).string = cc.vv.utils.showJinbi(addMoney, 'W');\n        var zhuObj = cc.find('Canvas/zhu/' + this.zhuobj[addMoneyLevel]);\n        var zhuFrameCopy = zhuObj.getComponent(cc.Sprite).spriteFrame;\n        newNode.getComponent(cc.Sprite).spriteFrame = zhuFrameCopy;\n        newNode.x = x;\n        newNode.y = y;\n        newNode.active = true;\n        var action = cc.moveTo(0.4, cc.p(endX, endY));\n        newNode.runAction(action);\n    },\n    hideOhersPkButton: function hideOhersPkButton() {\n        var self = this;\n        self._tips.node.active = false;\n        for (var i in this._seats) {\n            if (i == 0) continue;\n            var seat = this._seats[i];\n            seat.hidePkButton();\n        }\n    },\n    inObject: function inObject(data, obj) {\n        var f = false;\n        for (var i in obj) {\n            if (data == obj[i]) {\n                f = true;\n                break;\n            }\n        }\n        return f;\n    },\n    //结束动画\n    showEndAnim: function showEndAnim() {\n        var self = this;\n        var data = self.endData;\n        if (data) {\n            var win_userid = data.winer;\n            var holds = data.holds;\n            var win_seatIndex = cc.vv.gameNetMgr.getLocalIndexZJH(cc.vv.gameNetMgr.getSeatIndexByID(win_userid));\n            //取得座位\n            var win_seat = self._seats[win_seatIndex];\n            win_seat.showYanhua(); //放烟花\n            //筹码移动动画\n            // self._zhuomian.active = true;\n            for (var i in self._zhuomian.children) {\n                var node = self._zhuomian.children[i];\n                var action = cc.moveTo(2, cc.p(win_seat.node.x, win_seat.node.y));\n                node.oldX = node.x;\n                node.oldY = node.y;\n                node.runAction(action);\n            }\n            setTimeout(function () {\n                // self._zhuomian.active = false;\n                if (self._zhuomian) {\n                    for (var i in self._zhuomian.children) {\n                        var node = self._zhuomian.children[i];\n                        if (node.oldX) {\n                            node.x = node.oldX;\n                        }\n                        if (node.oldY) {\n                            node.y = node.oldY;\n                        }\n                    }\n                    //重新开始一局\n                    self.restart();\n                }\n            }, 1500);\n        }\n    },\n    clearEnd: function clearEnd() {\n        var self = this;\n        self.isEnd = false;\n        self.endData = null;\n        self._tips.string = \"正在等待下一局游戏\";\n        self._tips.node.active = true;\n        setTimeout(function () {\n            cc.vv.net.send('ready');\n        }, 1000);\n    },\n    //比牌动画\n    showBipaiAnim: function showBipaiAnim() {\n        var self = this;\n        var bipaiData = self.bipaiAnimQueue[self.bipaiAnimIndex];\n        var winer = bipaiData['winer'];\n        var loser = bipaiData['loser'];\n        var lpx = cc.find('Canvas/pk/leftPai').x,\n            lpy = cc.find('Canvas/pk/leftPai').y,\n            rpx = cc.find('Canvas/pk/rightPai').x,\n            rpy = cc.find('Canvas/pk/rightPai').y;\n        var WseatIndex = cc.vv.gameNetMgr.getSeatIndexByID(winer),\n            LseatIndex = cc.vv.gameNetMgr.getSeatIndexByID(loser);\n        var WlocalIndex = cc.vv.gameNetMgr.getLocalIndexZJH(WseatIndex),\n            LlocalIndex = cc.vv.gameNetMgr.getLocalIndexZJH(LseatIndex);\n        var b1 = cc.find('Canvas/seat' + WlocalIndex),\n            b2 = cc.find('Canvas/seat' + LlocalIndex);\n        cc.find('Canvas/pk/leftPai').x = b1.x;\n        cc.find('Canvas/pk/leftPai').y = b1.y;\n        cc.find('Canvas/pk').active = true;\n        cc.find('Canvas/pk/leftPai').active = true;\n        cc.find('Canvas/pk/rightPai').x = b2.x;\n        cc.find('Canvas/pk/rightPai').y = b2.y;\n        cc.find('Canvas/pk/rightPai').active = true;\n        var action1 = cc.moveTo(0.4, cc.p(lpx, lpy)),\n            action2 = cc.moveTo(0.4, cc.p(rpx, rpy));\n        cc.find('Canvas/pk/leftPai').runAction(action1);\n        cc.find('Canvas/pk/rightPai').runAction(action2);\n        self.hideLie();\n        setTimeout(function () {\n            self.showPk();\n            self.hidePk(1);\n        }, 400);\n    },\n    //孤注一掷\n    allin: function allin() {\n        cc.vv.net.send('all_in');\n    },\n    //孤注一掷动画\n    doAllin: function doAllin(data, callback) {\n        var userid = data.userid; //发起孤注一掷的那个人\n        var status = data.status; //0-输了 1-赢了\n        var self = this;\n        self.bipaiAnimQueue = [];\n        for (var i in self._seats) {\n            var seatData = self._seats[i];\n            var seatUserId = seatData['_userId'];\n            if (!seatUserId || seatUserId == userid) continue;\n            var winer, loser;\n            if (status == 0) {\n                winer = seatUserId;\n                loser = userid;\n            } else {\n                winer = userid;\n                loser = seatUserId;\n            }\n            self.bipaiAnimQueue.push({\n                winer: winer,\n                loser: loser\n            }); //比牌队列\n        }\n        self.bipaiAnimIndex = 0;\n        self.showBipaiAnim();\n        if (callback) {\n            self.bipaiAnimCallback = callback;\n        }\n    }\n});\n\ncc._RF.pop();","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/02/020ad28b-0319-4142-9621-5fa0df5cd0cc.js":{"source":"\"use strict\";\ncc._RF.push(module, '020adKLAxlBQpYhX6DfXNDM', 'zjhSeat');\n// scripts/zjh/zjhSeat.js\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        _sprIcon: null,\n        _zhuang: null,\n        _ready: null,\n        _offline: null,\n        _lblName: null,\n        _lblScore: null,\n        _nddayingjia: null,\n        _voicemsg: null,\n        _chatBubble: null,\n        _emoji: null,\n        _lastChatTime: -1,\n        _userName: \"\",\n        _score: 0,\n        _dayingjia: false,\n        _isOffline: false,\n        _isReady: false,\n        _isZhuang: false,\n        _userId: null,\n        _isKanPai: false,\n        _isQiPai: false,\n        _isShu: false,\n        _timeLabel: null,\n        _time: -1\n    },\n    // use this for initialization\n    onLoad: function onLoad() {\n        if (cc.vv == null) {\n            return;\n        }\n        this._sprIcon = this.node.getChildByName(\"head\").getComponent(\"ImageLoader\");\n        this._lblName = this.node.getChildByName(\"name\").getComponent(cc.Label);\n        this._lblScore = this.node.getChildByName(\"money\").getComponent(cc.Label);\n        this._costMoney = this.node.getChildByName(\"zjh14\").getChildByName(\"xiazhu\").getComponent(cc.Label);\n        this._kanicon = this.node.getChildByName(\"kanicon\");\n        this._shuicon = this.node.getChildByName(\"shuicon\");\n        this._qiicon = this.node.getChildByName(\"qiicon\");\n        this._kanpai = this.node.getChildByName(\"kanpai\");\n        this._saykanpai = this.node.getChildByName(\"saykanpai\");\n        this._genzhu = this.node.getChildByName(\"genzhu\");\n        this._jiazhu = this.node.getChildByName(\"jiazhu\");\n        this._fangqi = this.node.getChildByName(\"fangqi\");\n        this._pkButton = this.node.getChildByName(\"pk_button\");\n        this._chatBubble = this.node.getChildByName(\"ChatBubble\");\n        this._yanhua = this.node.getChildByName(\"yanhua\");\n        this._yanhuaAnim = this._yanhua.getComponent(cc.Animation);\n        this._timeLabel = this.node.getChildByName(\"toggle\").getChildByName(\"lblTime\").getComponent(cc.Label);\n        this._timeLabel.string = \"00\";\n        cc.vv.utils.addClickEvent(this._pkButton, this.node, \"zjhSeat\", \"onClickPkButton\");\n        // this._voicemsg = this.node.getChildByName(\"voicemsg\");\n        // if (this._voicemsg) {\n        //     this._voicemsg.active = false;\n        // }\n        // if (this._sprIcon && this._sprIcon.getComponent(cc.Button)) {\n        //     cc.vv.utils.addClickEvent(this._sprIcon, this.node, \"Seat\", \"onIconClicked\");\n        // }\n        // this._offline = this.node.getChildByName(\"offline\");\n        // this._ready = this.node.getChildByName(\"ready\");\n        this._zhuang = this.node.getChildByName(\"zhuang\");\n        // this._nddayingjia = this.node.getChildByName(\"dayingjia\");\n        this._emoji = this.node.getChildByName(\"emoji\");\n        this.refresh();\n        if (this._sprIcon && this._userId) {\n            this._sprIcon.setUserID(this._userId);\n        }\n    },\n    onIconClicked: function onIconClicked() {\n        var iconSprite = this._sprIcon.node.getComponent(cc.Sprite);\n        if (this._userId != null && this._userId > 0) {\n            var seat = cc.vv.gameNetMgr.getSeatByID(this._userId);\n            var sex = 0;\n            if (cc.vv.baseInfoMap) {\n                var info = cc.vv.baseInfoMap[this._userId];\n                if (info) {\n                    sex = info.sex;\n                }\n            }\n        }\n    },\n    refresh: function refresh() {\n        if (this._lblName != null) {\n            this._lblName.string = this._userName;\n        }\n        if (this._lblScore != null) {\n            this._lblScore.string = this._score;\n        }\n        if (this._nddayingjia != null) {\n            this._nddayingjia.active = this._dayingjia == true;\n        }\n        if (this._offline) {\n            this._offline.active = this._isOffline && this._userName != \"\";\n        }\n        if (this._ready) {\n            this._ready.active = this._isReady && cc.vv.gameNetMgr.numOfGames > 0;\n        }\n        if (this._zhuang) {\n            this._zhuang.active = this._isZhuang;\n        }\n        this.node.active = this._userName != null && this._userName != \"\";\n        if (this._kanicon) {\n            this._kanicon.active = this._isKanPai;\n        }\n        if (this._shuicon) {\n            this._shuicon.active = this._isShu;\n        }\n        if (this._qiicon) {\n            this._qiicon.active = this._isQiPai;\n        }\n        if (this._kanpai) {\n            this._kanpai.active = false;\n        }\n        if (this._saykanpai) {\n            this._saykanpai.active = false;\n        }\n        if (this._genzhu) {\n            this._genzhu.active = false;\n        }\n        if (this._jiazhu) {\n            this._jiazhu.active = false;\n        }\n        if (this._fangqi) {\n            this._fangqi.active = false;\n        }\n        if (this._pkButton) {\n            this._pkButton.active = false;\n        }\n        if (this._chatBubble) {\n            this._chatBubble.active = false;\n        }\n        if (this._emoji) {\n            this._emoji.active = false;\n        }\n        if (this._yanhua) {\n            this._yanhua.active = false;\n        }\n    },\n    setInfo: function setInfo(name, score) {\n        this._userName = name;\n        this._score = score;\n        if (this._score == null) {\n            this._score = 0;\n        }\n        if (this._lblScore != null) {\n            this._lblScore.node.active = this._score != null;\n        }\n        this.refresh();\n    },\n    setZhuang: function setZhuang(value) {\n        this._isZhuang = value;\n        if (this._zhuang) {\n            this._zhuang.active = value;\n        } else {\n            this._zhuang = this.node.getChildByName(\"zhuang\");\n            this._zhuang.active = value;\n        }\n    },\n    setReady: function setReady(isReady) {\n        this._isReady = isReady;\n        if (this._ready) {\n            this._ready.active = this._isReady && cc.vv.gameNetMgr.numOfGames > 0;\n        }\n    },\n    setID: function setID(id) {\n        var idNode = this.node.getChildByName(\"id\");\n        if (idNode) {\n            var lbl = idNode.getComponent(cc.Label);\n            lbl.string = \"ID:\" + id;\n        }\n        this._userId = id;\n        if (this._sprIcon) {\n            this._sprIcon.setUserID(id);\n        }\n    },\n    getID: function getID() {\n        return this._userId;\n    },\n    setOffline: function setOffline(isOffline) {\n        this._isOffline = isOffline;\n        if (this._offline) {\n            this._offline.active = this._isOffline && this._userName != \"\";\n        }\n    },\n    chat: function chat(content) {\n        if (this._chatBubble == null) {\n            return;\n        }\n        this._emoji.active = false;\n        this._chatBubble.active = true;\n        this._chatBubble.getComponent(cc.Label).string = content;\n        this._chatBubble.getChildByName(\"New Label\").getComponent(cc.Label).string = content;\n        this._lastChatTime = 3;\n    },\n    emoji: function emoji(_emoji) {\n        //emoji = JSON.parse(emoji);\n        if (this._emoji == null) {\n            return;\n        }\n        console.log(_emoji);\n        this._chatBubble.active = false;\n        this._emoji.active = true;\n        this._emoji.getComponent(cc.Animation).play(_emoji);\n        this._lastChatTime = 3;\n    },\n    voiceMsg: function voiceMsg(show) {\n        if (this._voicemsg) {\n            this._voicemsg.active = show;\n        }\n    },\n    setMoney: function setMoney(data) {\n        //设置该玩家所拥有的的钱\n        this._lblScore.string = data;\n        this._score = data;\n    },\n    setCostMoney: function setCostMoney(data) {\n        //设置该玩家本局所压的注\n        if (data) {\n            this._costMoney.string = data;\n        }\n        if (!this.node.getChildByName(\"zjh14\").active) this.node.getChildByName(\"zjh14\").active = true;\n    },\n    showGenZhu: function showGenZhu() {\n        var self = this;\n        self._genzhu.active = true;\n        setTimeout(function () {\n            self._genzhu.active = false;\n        }, 1000);\n    },\n    showKanPai: function showKanPai() {\n        var self = this;\n        self._kanicon.active = true;\n        self._saykanpai.active = true;\n        setTimeout(function () {\n            self._saykanpai.active = false;\n        }, 1000);\n    },\n    showJiaZhu: function showJiaZhu() {\n        var self = this;\n        self._jiazhu.active = true;\n        setTimeout(function () {\n            self._jiazhu.active = false;\n        }, 1000);\n    },\n    showQiPai: function showQiPai(status) {\n        var self = this;\n        if (status == 'shu') {\n            self._shuicon.active = true;\n        } else {\n            self._qiicon.active = true;\n            self._fangqi.active = true;\n            setTimeout(function () {\n                if (self._fangqi) {\n                    self._fangqi.active = false;\n                }\n            }, 1000);\n        }\n    },\n    showPkButton: function showPkButton() {\n        if (this._pkButton) {\n            this._pkButton.active = true;\n        }\n    },\n    hidePkButton: function hidePkButton() {\n        if (this._pkButton) {\n            this._pkButton.active = false;\n        }\n    },\n    onClickPkButton: function onClickPkButton() {\n        cc.vv.gameNetMgr.dispatchEvent('clickPkButton', this._userId);\n    },\n    showYanhua: function showYanhua() {\n        if (this._yanhua) {\n            this._yanhua.active = true;\n            this._yanhuaAnim.play('yanhua');\n        }\n    },\n    setTime: function setTime(o) {\n        if (o) {\n            this._time = 0;\n        } else {\n            this._time = 30;\n        }\n    },\n    fanPai: function fanPai(spriteFrames) {\n        var self = this;\n        for (var i = 0; i < 3; i++) {\n            var zhengpai = self._kanpai.getChildByName('zhengpai' + i);\n            var paiObj = spriteFrames[i];\n            var numRes = paiObj['num'];\n            var huase_bigRes = paiObj['huase_big'];\n            var huase_smallRes = paiObj['huase_small'];\n            zhengpai.getChildByName('num').getComponent(cc.Sprite).spriteFrame = numRes;\n            zhengpai.getChildByName('huase_big').getComponent(cc.Sprite).spriteFrame = huase_bigRes;\n            zhengpai.getChildByName('huase_small').getComponent(cc.Sprite).spriteFrame = huase_smallRes;\n            // zhengpai.getComponent(cc.Sprite).spriteFrame = spriteFrames[i];\n        }\n        self.hideFupai();\n        self._kanpai.active = true;\n    },\n    hideFupai: function hideFupai() {\n        var self = this;\n        for (var i = 0; i < 3; i++) {\n            var fupai = self.node.getChildByName('fupai' + i);\n            fupai.active = false;\n        }\n    },\n    // called every frame, uncomment this function to activate update callback\n    update: function update(dt) {\n        if (this._lastChatTime > 0) {\n            this._lastChatTime -= dt;\n            if (this._lastChatTime < 0) {\n                this._chatBubble.active = false;\n                this._emoji.active = false;\n                this._emoji.getComponent(cc.Animation).stop();\n            }\n        }\n        if (this._time > 0) {\n            this._time -= dt;\n            var pre = \"\";\n            if (this._time < 0) {\n                this._time = 0;\n            }\n            var t = Math.ceil(this._time);\n            if (t < 10) {\n                pre = \"0\";\n            }\n            this._timeLabel.string = pre + t;\n        }\n    }\n});\n\ncc._RF.pop();","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/f5/f58ce6ba-96ba-4364-948d-b3604606ac4d.js":{"source":"\"use strict\";\ncc._RF.push(module, 'f58cea6lrpDZJSNs2BGBqxN', 'AnysdkMgr');\n// scripts/AnysdkMgr.js\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        // foo: {\n        //    default: null,      // The default value will be used only when the component attaching\n        //                           to a node for the first time\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n        _isCapturing: false\n    },\n    // use this for initialization\n    onLoad: function onLoad() {},\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n    // },\n    init: function init() {\n        this.ANDROID_API = \"com/vivigames/scmj/WXAPI\";\n        this.IOS_API = \"AppController\";\n    },\n    login: function login() {\n        if (cc.sys.os == cc.sys.OS_ANDROID) {\n            jsb.reflection.callStaticMethod(this.ANDROID_API, \"Login\", \"()V\");\n        } else if (cc.sys.os == cc.sys.OS_IOS) {\n            jsb.reflection.callStaticMethod(this.IOS_API, \"login\");\n        } else {\n            console.log(\"platform:\" + cc.sys.os + \" dosn't implement share.\");\n        }\n    },\n    share: function share(title, desc) {\n        if (cc.sys.os == cc.sys.OS_ANDROID) {\n            jsb.reflection.callStaticMethod(this.ANDROID_API, \"Share\", \"(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V\", cc.vv.SI.appweb, title, desc);\n        } else if (cc.sys.os == cc.sys.OS_IOS) {\n            jsb.reflection.callStaticMethod(this.IOS_API, \"share:shareTitle:shareDesc:\", cc.vv.SI.appweb, title, desc);\n        } else {\n            console.log(\"platform:\" + cc.sys.os + \" dosn't implement share.\");\n        }\n    },\n    shareResult: function shareResult() {\n        if (this._isCapturing) {\n            return;\n        }\n        this._isCapturing = true;\n        var size = cc.director.getWinSize();\n        var currentDate = new Date();\n        var fileName = \"result_share.jpg\";\n        var fullPath = jsb.fileUtils.getWritablePath() + fileName;\n        if (jsb.fileUtils.isFileExist(fullPath)) {\n            jsb.fileUtils.removeFile(fullPath);\n        }\n        var texture = new cc.RenderTexture(Math.floor(size.width), Math.floor(size.height));\n        texture.setPosition(cc.p(size.width / 2, size.height / 2));\n        texture.begin();\n        cc.director.getRunningScene().visit();\n        texture.end();\n        texture.saveToFile(fileName, cc.IMAGE_FORMAT_JPG);\n        var self = this;\n        var tryTimes = 0;\n        var fn = function fn() {\n            if (jsb.fileUtils.isFileExist(fullPath)) {\n                var height = 100;\n                var scale = height / size.height;\n                var width = Math.floor(size.width * scale);\n                if (cc.sys.os == cc.sys.OS_ANDROID) {\n                    jsb.reflection.callStaticMethod(self.ANDROID_API, \"ShareIMG\", \"(Ljava/lang/String;II)V\", fullPath, width, height);\n                } else if (cc.sys.os == cc.sys.OS_IOS) {\n                    jsb.reflection.callStaticMethod(self.IOS_API, \"shareIMG:width:height:\", fullPath, width, height);\n                } else {\n                    console.log(\"platform:\" + cc.sys.os + \" dosn't implement share.\");\n                }\n                self._isCapturing = false;\n            } else {\n                tryTimes++;\n                if (tryTimes > 10) {\n                    console.log(\"time out...\");\n                    return;\n                }\n                setTimeout(fn, 50);\n            }\n        };\n        setTimeout(fn, 50);\n    },\n    onLoginResp: function onLoginResp(code, uid, roomid) {\n        var fn = function fn(ret) {\n            if (ret.errcode == 0) {\n                console.log(\"返回的微信账号信息是:\" + ret.account, ret.sign, ret.shareRoomId);\n                cc.sys.localStorage.setItem(\"wx_account\", ret.account);\n                cc.sys.localStorage.setItem(\"wx_sign\", ret.sign);\n            }\n            cc.vv.userMgr.onAuth(ret);\n        };\n        console.log(\"向微信发送验证请求\");\n        cc.vv.http.sendRequest(\"/wechat_auth\", {\n            code: code,\n            uid: uid,\n            os: cc.sys.os,\n            roomid: roomid\n        }, fn);\n    }\n});\n\ncc._RF.pop();","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/86/86cf7d46-ff85-40df-9fa5-9d81e648ce9a.js":{"source":"\"use strict\";\ncc._RF.push(module, '86cf71G/4VA35+lnYHmSM6a', 'CqNetMgr');\n// scripts/CqNetMgr.js\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n    initHandlers: function initHandlers(GameNet) {\n        var self = GameNet;\n        cc.vv.net.addHandler(\"login_result\", function (data) {\n            console.log(\"login_result===>\", data);\n            if (data.errcode === 0) {\n                var data = data.data;\n                self.roomId = data.roomid;\n                self.room_type = data.conf.room_type;\n                self.conf = data.conf;\n                self.maxNumOfGames = data.conf.maxGames;\n                self.numOfGames = data.numofgames;\n                self.seats = data.seats;\n                self.seatIndex = self.getSeatIndexByID(cc.vv.userMgr.userId);\n                self.isOver = false;\n                self.cq_data = data.data;\n            } else {\n                console.log(data.errmsg);\n            }\n        });\n        cc.vv.net.addHandler(\"login_finished\", function (data) {\n            console.log(\"login_finished\");\n            cc.director.loadScene(\"caiquan\");\n        });\n        cc.vv.net.addHandler(\"exit_result\", function (data) {\n            self.roomId = null;\n            self.room_type = -1;\n            self.turn = -1;\n            self.seats = null;\n        });\n        cc.vv.net.addHandler(\"dispress_push\", function (data) {\n            self.roomId = null;\n            self.room_type = -1;\n            self.turn = -1;\n            self.seats = null;\n        });\n        cc.vv.net.addHandler(\"disconnect\", function (data) {\n            self.roomId = null;\n            self.room_type = -1;\n            self.cqDispatchEvent(\"disconnect\");\n        });\n        cc.vv.net.addHandler(\"cq_begin_push\", function (data) {\n            console.log(\"cq_begin_push\");\n            self.cqDispatchEvent(\"cq_begin\", data);\n        });\n        cc.vv.net.addHandler(\"cq_new_user_comes_push\", function (data) {\n            console.log(\"cq_new_user_comes_push\", data);\n            self.cq_data = data.data;\n            self.cqDispatchEvent(\"cq_new_user\", data);\n        });\n        cc.vv.net.addHandler(\"cq_game_over_push\", function (data) {\n            console.log(\"cq_game_over_push\", data);\n            self.cqDispatchEvent(\"cq_game_over\", data);\n        });\n        cc.vv.net.addHandler(\"cq_game_time_push\", function (data) {\n            // console.log(\"cq_game_time_push\", data);\n            self.cqDispatchEvent(\"cq_game_time\", data);\n        });\n        cc.vv.net.addHandler(\"cq_exit_notify_push\", function (data) {\n            var userId = data;\n            self.cqDispatchEvent(\"cq_exit_notify\", userId);\n        });\n        cc.vv.net.addHandler(\"cq_dispress_push\", function (data) {\n            var userId = data;\n            self.roomId = null;\n            self.room_type = -1;\n            self.turn = -1;\n            self.seats = null;\n            self.cq_data = null;\n            self.cqDispatchEvent(\"cq_dispress\", userId);\n        });\n        cc.vv.net.addHandler(\"cq_loser_notify_push\", function (data) {\n            var userId = data;\n            if (cc.vv.userMgr.userId == userId) {\n                self.roomId = null;\n                self.room_type = -1;\n                self.turn = -1;\n                self.seats = null;\n                self.cq_data = null;\n            }\n            self.cqDispatchEvent(\"cq_loser_notify\", userId);\n        });\n        cc.vv.net.addHandler(\"cq_winner_notify_push\", function (data) {\n            var userId = data;\n            self.roomId = null;\n            self.room_type = -1;\n            self.turn = -1;\n            self.seats = null;\n            self.cq_data = null;\n            self.cqDispatchEvent(\"cq_winner_notify\", userId);\n        });\n        cc.vv.net.addHandler(\"cq_chuquan_notify_push\", function (data) {\n            self.cqDispatchEvent(\"cq_chuquan_notify\", data);\n        });\n    }\n});\n\ncc._RF.pop();","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/b8/b88c0bfd-a676-4f80-a907-95f204053625.js":{"source":"\"use strict\";\ncc._RF.push(module, 'b88c0v9pnZPgKkHlfIEBTYl', 'DnNetMgr');\n// scripts/DnNetMgr.js\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n    initHandlers: function initHandlers(GameNet) {\n        var self = GameNet;\n        cc.vv.net.addHandler(\"login_result\", function (data) {\n            console.log(\"login_result===>\", data);\n            if (data.errcode === 0) {\n                var data = data.data;\n                self.roomId = data.roomid;\n                self.room_type = data.conf.room_type;\n                self.conf = data.conf;\n                self.maxNumOfGames = data.conf.maxGames;\n                self.numOfGames = data.numofgames;\n                self.seats = data.seats;\n                self.seatIndex = self.getSeatIndexByID(cc.vv.userMgr.userId);\n                self.isOver = false;\n                self.cq_data = data.data;\n            } else {\n                console.log(data.errmsg);\n            }\n        });\n        cc.vv.net.addHandler(\"login_finished\", function (data) {\n            console.log(\"login_finished\");\n            cc.director.loadScene(\"dngame\");\n        });\n        cc.vv.net.addHandler(\"exit_result\", function (data) {\n            self.roomId = null;\n            self.room_type = -1;\n            self.turn = -1;\n            // self.seats = null;\n            if (data) {\n                //特殊情况下（锦标赛等）可以设置这里的data，在退出的时候进行操作\n                self.actionData = data;\n            }\n        });\n        cc.vv.net.addHandler(\"exit_notify_push\", function (data) {\n            var userId = data;\n            var s = self.getSeatByID(userId);\n            if (s != null) {\n                s.userid = 0;\n                s.name = \"\";\n                self.dispatchEvent(\"user_state_changed\", s);\n            }\n        });\n        cc.vv.net.addHandler(\"chat_push\", function (data) {\n            self.dispatchEvent(\"chat_push\", data);\n        });\n        cc.vv.net.addHandler(\"quick_chat_push\", function (data) {\n            self.dispatchEvent(\"quick_chat_push\", data);\n        });\n        cc.vv.net.addHandler(\"emoji_push\", function (data) {\n            self.dispatchEvent(\"emoji_push\", data);\n        });\n        cc.vv.net.addHandler(\"not_exit_push\", function (data) {\n            self.dispatchEvent(\"not_exit\", data);\n        });\n        cc.vv.net.addHandler(\"count_down_push\", function (data) {\n            self.dispatchEvent(\"count_down\", data);\n        });\n        cc.vv.net.addHandler(\"match_exit_error\", function (data) {\n            self.dispatchEvent('match_exit_error');\n        });\n        cc.vv.net.addHandler(\"dispress_push\", function (data) {\n            self.roomId = null;\n            self.room_type = -1;\n            self.turn = -1;\n            self.seats = null;\n        });\n        cc.vv.net.addHandler(\"disconnect\", function (data) {\n            var actionData = self.actionData;\n            self.dispatchEvent(\"exit_room\");\n            if (self.roomId == null) {\n                if (actionData) {\n                    if (actionData.msg) {\n                        cc.vv.alert.show(\"提示\", actionData.msg);\n                    }\n                    setTimeout(function () {\n                        self.actionData = null;\n                        cc.director.loadScene(\"newhall\");\n                    }, actionData.delay * 1000);\n                } else {\n                    cc.director.loadScene(\"newhall\");\n                }\n                self.room_type = -1;\n            } else {\n                if (self.isOver == false) {\n                    cc.vv.userMgr.oldRoomId = self.roomId;\n                    self.dispatchEvent(\"disconnect\");\n                } else {\n                    self.roomId = null;\n                    self.room_type = -1;\n                }\n            }\n        });\n        // 新人加入房间\n        cc.vv.net.addHandler(\"new_user_comes_push\", function (data) {\n            var seatIndex = data.seatindex;\n            if (self.seats[seatIndex].userid > 0) {\n                self.seats[seatIndex].online = true;\n            } else {\n                data.online = true;\n                self.seats[seatIndex] = data;\n            }\n            self.dispatchEvent('new_user', self.seats[seatIndex]);\n        });\n        //游戏初始化 \n        cc.vv.net.addHandler(\"game_initInfo_push\", function (data) {\n            var gameInfo = data.gameInfo;\n            self.dispatchEvent('game_init', gameInfo);\n        });\n        cc.vv.net.addHandler(\"game_begin_push\", function (data) {\n            var data = data;\n            self.dispatchEvent('game_begin', data);\n        });\n        cc.vv.net.addHandler(\"game_b_OneQzEnd\", function (data) {\n            var data = data;\n            self.dispatchEvent('show_qiang', data);\n        });\n        cc.vv.net.addHandler(\"game_zhuangSelected_push\", function (data) {\n            var data = data;\n            self.dispatchEvent('game_zhuangSelected', data);\n        });\n        cc.vv.net.addHandler(\"game_myXzBegin_push\", function (data) {\n            var data = data;\n            self.dispatchEvent('game_myXzBegin', data);\n        });\n        cc.vv.net.addHandler(\"game_myHoldsUpdate_push\", function (data) {\n            var data = data;\n            self.dispatchEvent('game_myHoldsUpdate', data);\n        });\n        cc.vv.net.addHandler(\"game_myXzEnd_push\", function (data) {\n            var data = data;\n            self.dispatchEvent('game_myXzEnd', data);\n        });\n        cc.vv.net.addHandler(\"game_b_OneXzEnd\", function (data) {\n            var data = data;\n            self.dispatchEvent('show_beiShuText', data);\n        });\n        cc.vv.net.addHandler(\"game_b_OneSnEnd\", function (data) {\n            var data = data;\n            self.dispatchEvent('game_b_OneSnEnd', data);\n        });\n        cc.vv.net.addHandler(\"game_showAllUser_push\", function (data) {\n            var data = data;\n            self.dispatchEvent('game_showAllUser', data);\n        });\n    }\n});\n\ncc._RF.pop();","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/bf/bf725218-eca4-4a5f-b97d-7caffbe15229.js":{"source":"\"use strict\";\ncc._RF.push(module, 'bf725IY7KRKX7l9fK/74VIp', 'DzpkNetMgr');\n// scripts/DzpkNetMgr.js\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        seatIndex: -1,\n        seats: null,\n        turn: -1,\n        button: -1,\n        chu: -1,\n        maxNumOfGames: 0,\n        numOfGames: 0,\n        isOver: false,\n        consume_num: 0\n    },\n    reset: function reset() {\n        this.turn = -1;\n        this.chu = -1;\n        this.button = -1;\n        this.curaction = null;\n        for (var i = 0; i < this.seats.length; ++i) {\n            this.seats[i].op = null;\n            this.seats[i].ready = false;\n        }\n    },\n    clear: function clear() {},\n    getSeatIndexByID: function getSeatIndexByID(userId) {\n        for (var i = 0; i < this.seats.length; ++i) {\n            var s = this.seats[i];\n            if (s.userid == userId) {\n                return i;\n            }\n        }\n        return -1;\n    },\n    isOwner: function isOwner() {\n        return this.seatIndex == 0;\n    },\n    getSeatByID: function getSeatByID(userId) {\n        var seatIndex = this.getSeatIndexByID(userId);\n        var seat = this.seats[seatIndex];\n        return seat;\n    },\n    getSelfData: function getSelfData() {\n        return this.seats[this.seatIndex];\n    },\n    getLocalIndex: function getLocalIndex(index) {\n        var ret = (index - this.seatIndex + 5) % 5;\n        return ret;\n    },\n    getLocalIndexByUserId: function getLocalIndexByUserId(userId) {\n        var seatIndex = this.getSeatIndexByID(userId);\n        var ret = this.getLocalIndex(seatIndex);\n        return ret;\n    },\n    dispatchEvent: function dispatchEvent(event, data) {\n        if (this.dataEventHandler) {\n            this.dataEventHandler.emit(event, data);\n        }\n    },\n    initHandlers: function initHandlers(GameNet) {\n        var self = this;\n        cc.vv.net.addHandler(\"login_result\", function (data) {\n            if (data.errcode === 0) {\n                var data = data.data;\n                cc.vv.gameNetMgr.roomId = data.roomid;\n                cc.vv.gameNetMgr.room_type = data.conf.room_type;\n                self.maxNumOfGames = data.conf.maxGames;\n                self.numOfGames = data.numofgames;\n                self.seats = data.seats;\n                self.seatIndex = self.getSeatIndexByID(cc.vv.userMgr.userId);\n                self.isOver = false;\n                self.consume_num = data.scene.consume_num ? data.scene.consume_num : 50;\n            } else {\n                console.log(data.errmsg);\n            }\n        });\n        cc.vv.net.addHandler(\"login_finished\", function (data) {\n            cc.director.loadScene(\"dzpkgame\");\n        });\n        cc.vv.net.addHandler(\"socket_MyHolds\", function (data) {\n            if (data && data.length > 0) {\n                self.dispatchEvent(\"socket_MyHolds\", data);\n            }\n        });\n        cc.vv.net.addHandler(\"count_down_push\", function (data) {\n            self.dispatchEvent(\"count_down\", data);\n        });\n        cc.vv.net.addHandler(\"game_begin_push\", function (data) {\n            self.dispatchEvent(\"game_begin\", data);\n        });\n        cc.vv.net.addHandler(\"game_diChiUpdate_push\", function (data) {\n            self.dispatchEvent(\"game_diChiUpdate\", data);\n        });\n        cc.vv.net.addHandler(\"game_myInfo_push\", function (data) {\n            var seat = self.getSeatByID(data.userid);\n            seat.score = data.money;\n            self.dispatchEvent(\"game_myInfo\", data);\n        });\n        cc.vv.net.addHandler(\"game_myTurn_push\", function (data) {\n            self.dispatchEvent(\"game_myTurn\", data);\n        });\n        cc.vv.net.addHandler(\"game_oneClickGuo_push\", function (data) {\n            self.dispatchEvent(\"game_oneGuo\", data);\n        });\n        cc.vv.net.addHandler(\"game_oneGen_push\", function (data) {\n            var seat = self.getSeatByID(data.userid);\n            seat.score = data.money;\n            self.dispatchEvent(\"game_oneGen\", data);\n        });\n        cc.vv.net.addHandler(\"game_oneAllIn_push\", function (data) {\n            var seat = self.getSeatByID(data.userid);\n            seat.score = data.money;\n            self.dispatchEvent(\"game_oneAllIn\", data);\n        });\n        cc.vv.net.addHandler(\"game_oneQuit_push\", function (data) {\n            self.dispatchEvent(\"game_oneQuit\", data);\n        });\n        cc.vv.net.addHandler(\"game_playersInNewCircle_push\", function (data) {\n            self.dispatchEvent(\"game_playersInNewCircle\", data);\n        });\n        cc.vv.net.addHandler(\"game_newCircle_push\", function (data) {\n            self.dispatchEvent(\"game_newCircle\", data);\n        });\n        cc.vv.net.addHandler(\"game_turnChanged_push\", function (data) {\n            if (cc.vv.userMgr.userId != data) {\n                self.dispatchEvent(\"game_turnChanged\", data);\n            }\n        });\n        cc.vv.net.addHandler(\"game_caculateResult_push\", function (data) {\n            for (var i = 0; i < data.length; i++) {\n                if (cc.vv.userMgr.userId == data[i].userid && data[i].isWinner) {\n                    self.dispatchEvent(\"game_winner\", data);\n                } else if (cc.vv.userMgr.userId == data[i].userid && !data[i].isWinner) {\n                    self.dispatchEvent(\"game_loser\", data);\n                }\n            };\n            self.dispatchEvent(\"game_caculateResult\", data);\n        });\n        cc.vv.net.addHandler(\"game_myARGStatusChanged_push\", function (data) {\n            self.dispatchEvent(\"game_myARGStatusChanged\", data);\n        });\n        cc.vv.net.addHandler(\"game_over\", function (data) {\n            self.dispatchEvent(\"game_over\", data);\n        });\n        cc.vv.net.addHandler(\"game_gameInfoById_push\", function (data) {\n            if (data) self.dispatchEvent(\"game_gameInfoById\", data);\n        });\n        cc.vv.net.addHandler(\"game_userInfoById_push\", function (data) {\n            self.dispatchEvent(\"game_userInfoById\", data);\n        });\n        cc.vv.net.addHandler(\"game_allGuo_push\", function (data) {\n            self.dispatchEvent(\"game_allGuo\", data);\n        });\n        cc.vv.net.addHandler(\"exit_result\", function (data) {\n            self.roomId = null;\n            self.turn = -1;\n            self.seats = null;\n            self.dispatchEvent(\"exit_result\", data);\n        });\n        cc.vv.net.addHandler(\"exit_notify_push\", function (data) {\n            var userId = data;\n            var s = self.getSeatByID(userId);\n            if (s != null) {\n                s.userid = 0;\n                s.name = \"\";\n                self.dispatchEvent(\"user_state_changed\", s);\n            }\n        });\n        cc.vv.net.addHandler(\"dispress_push\", function (data) {\n            self.roomId = null;\n            self.turn = -1;\n            self.seats = null;\n        });\n        cc.vv.net.addHandler(\"disconnect\", function (data) {\n            self.dispatchEvent(\"exit_room\");\n            if (self.roomId == null) {\n                cc.director.loadScene(\"newhall\");\n                self.room_type = -1;\n            } else {\n                if (self.isOver == false) {\n                    cc.vv.userMgr.oldRoomId = self.roomId;\n                    self.dispatchEvent(\"disconnect\");\n                } else {\n                    self.roomId = null;\n                    self.room_type = -1;\n                }\n            }\n        });\n        cc.vv.net.addHandler(\"chat_push\", function (data) {\n            self.dispatchEvent(\"chat_push\", data);\n        });\n        cc.vv.net.addHandler(\"quick_chat_push\", function (data) {\n            self.dispatchEvent(\"quick_chat_push\", data);\n        });\n        cc.vv.net.addHandler(\"emoji_push\", function (data) {\n            self.dispatchEvent(\"emoji_push\", data);\n        });\n        // 新人加入房间\n        cc.vv.net.addHandler(\"new_user_comes_push\", function (data) {\n            var seatIndex = data.seatindex;\n            if (self.seats[seatIndex].userid > 0) {\n                self.seats[seatIndex].online = true;\n                self.seats[seatIndex].ready = data.ready;\n                self.seats[seatIndex].score = data.score;\n                self.seats[seatIndex].status = data.status;\n            } else {\n                data.online = true;\n                self.seats[seatIndex] = data;\n            }\n            self.dispatchEvent('new_user', self.seats[seatIndex]);\n        });\n    }\n});\n\ncc._RF.pop();","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/a0/a0204b46-d683-47cd-b0a9-9311af7495bc.js":{"source":"\"use strict\";\ncc._RF.push(module, 'a0204tG1oNHzbCpkxGvdJW8', 'Collapse');\n// scripts/Collapse.js\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        bthLQ1: cc.Node,\n        bthLQ2: cc.Node,\n        bthLQ3: cc.Node,\n        bthLQ4: cc.Node,\n        bthSC1: cc.Node,\n        bthSC2: cc.Node,\n        left_content: cc.Node,\n        right_content: cc.Node,\n        ima1: {\n            type: cc.SpriteFrame,\n            default: null\n        },\n        ima2: {\n            type: cc.SpriteFrame,\n            default: null\n        }\n    },\n    // use this for initialization\n    onLoad: function onLoad() {\n        cc.vv.utils.addClickEvent(this.bthLQ1, this.node, \"Collapse\", \"onBtnLq\");\n        cc.vv.utils.addClickEvent(this.bthLQ3, this.node, \"Collapse\", \"onBtnLq\");\n        for (var i = 0; i < this.left_content.children.length; i++) {\n            cc.vv.utils.addClickEvent(this.left_content.children[i], this.node, \"Collapse\", \"onBtnSwitch\");\n        };\n    },\n    onBtnSwitch: function onBtnSwitch(event) {\n        for (var i = 0; i < this.left_content.children.length; i++) {\n            if (i == event.target.getSiblingIndex()) {\n                this.left_content.children[i].getComponent(\"cc.Sprite\").spriteFrame = this.ima1;\n                this.right_content.children[i].active = true;\n            } else {\n                this.left_content.children[i].getComponent(\"cc.Sprite\").spriteFrame = this.ima2;\n                this.right_content.children[i].active = false;\n            }\n        }\n    },\n    refreshBtns: function refreshBtns() {\n        if (cc.vv.userMgr.collapse_prise >= 2) {\n            this.bthLQ1.active = false;\n            this.bthLQ2.active = true;\n            this.bthLQ3.active = false;\n            this.bthLQ4.active = true;\n        } else {\n            if (cc.vv.userMgr.collapse_prise == 1) {\n                if (parseInt(cc.vv.userMgr.gems) < 10000) {\n                    this.bthLQ1.active = false;\n                    this.bthLQ2.active = true;\n                    this.bthLQ3.active = true;\n                    this.bthLQ4.active = false;\n                } else {\n                    this.bthLQ1.active = false;\n                    this.bthLQ2.active = true;\n                    this.bthLQ3.active = false;\n                    this.bthLQ4.active = true;\n                }\n            }\n            if (cc.vv.userMgr.collapse_prise <= 0) {\n                if (parseInt(cc.vv.userMgr.gems) < 10000) {\n                    this.bthLQ1.active = true;\n                    this.bthLQ2.active = false;\n                    this.bthLQ3.active = false;\n                    this.bthLQ4.active = true;\n                } else {\n                    this.bthLQ1.active = false;\n                    this.bthLQ2.active = true;\n                    this.bthLQ3.active = false;\n                    this.bthLQ4.active = true;\n                }\n            }\n        }\n        if (cc.vv.userMgr.is_first_charge == 1) {\n            this.bthSC1.active = true;\n            this.bthSC2.active = false;\n        } else {\n            this.bthSC1.active = false;\n            this.bthSC2.active = true;\n        }\n    },\n    onBtnLq: function onBtnLq() {\n        var self = this;\n        var fn = function fn(ret) {\n            if (ret.errcode == 0) {\n                cc.vv.userMgr.gems = ret.gems;\n                cc.vv.userMgr.coins = ret.coins;\n                cc.vv.userMgr.collapse_prise = ret.collapse_prise;\n            }\n            self.refreshBtns();\n        };\n        var data = {\n            account: cc.vv.userMgr.account,\n            sign: cc.vv.userMgr.sign\n        };\n        cc.vv.http.sendRequest(\"/get_user_collapse\", data, fn);\n    },\n    onBtnSC: function onBtnSC() {\n        var self = this;\n        var fn = function fn(ret) {\n            if (ret.errcode == 0) {\n                cc.vv.userMgr.gems = ret.gems;\n                cc.vv.userMgr.coins = ret.coins;\n                cc.vv.userMgr.is_first_charge = ret.is_first_charge;\n            }\n            self.refreshBtns();\n        };\n        var data = {\n            account: cc.vv.userMgr.account,\n            sign: cc.vv.userMgr.sign\n        };\n        cc.vv.http.sendRequest(\"/get_user_first_charge\", data, fn);\n    },\n    update: function update(dt) {}\n});\n\ncc._RF.pop();","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/24/24e30649-2e07-47de-bb35-4750afa8df14.js":{"source":"\"use strict\";\ncc._RF.push(module, '24e30ZJLgdH3rs1R1CvqN8U', 'Global');\n// scripts/Global.js\n\n\"use strict\";\n\nvar Global = cc.Class({\n    extends: cc.Component,\n    statics: {\n        isstarted: false,\n        netinited: false,\n        userguid: 0,\n        nickname: \"\",\n        money: 0,\n        lv: 0,\n        roomId: 0\n    }\n});\n\ncc._RF.pop();","deps":{}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/8a/8afb3aa2-c53d-45f8-b39b-fda8c7f12570.js":{"source":"\"use strict\";\ncc._RF.push(module, '8afb3qixT1F+LOb/ajH8SVw', 'MatchNet');\n// scripts/MatchNet.js\n\n\"use strict\";\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nif (window.io == null) {\n    window.io = require(\"socket-io\");\n}\nvar Global = cc.Class({\n    extends: cc.Component,\n    statics: {\n        ip: \"\",\n        sio: null,\n        isPinging: false,\n        fnDisconnect: null,\n        handlers: {},\n        addHandler: function addHandler(event, fn) {\n            if (this.handlers[event]) {\n                console.log(\"event:\" + event + \"' handler has been registered.\");\n                return;\n            }\n            var handler = function handler(data) {\n                //console.log(event + \"(\" + typeof(data) + \"):\" + (data? data.toString():\"null\"));\n                if (event != \"disconnect\" && typeof data == \"string\") {\n                    data = JSON.parse(data);\n                }\n                fn(data);\n            };\n            this.handlers[event] = handler;\n            if (this.sio) {\n                console.log(\"register:function \" + event);\n                this.sio.on(event, handler);\n            }\n        },\n        connect: function connect(fnConnect, fnError) {\n            var self = this;\n            var opts = {\n                'reconnection': true,\n                'force new connection': true,\n                'transports': ['websocket', 'polling']\n            };\n            this.sio = window.io.connect(this.ip, opts);\n            this.sio.on('reconnect', function () {\n                console.log('reconnection');\n            });\n            this.sio.on('connect', function (data) {\n                self.sio.connected = true;\n                fnConnect(data);\n            });\n            this.sio.on('disconnect', function (data) {\n                console.log(\"disconnect\");\n                self.sio.connected = false;\n                self.close();\n            });\n            this.sio.on('connect_failed', function () {\n                console.log('connect_failed');\n            });\n            for (var key in this.handlers) {\n                var value = this.handlers[key];\n                if (typeof value == \"function\") {\n                    if (key == 'disconnect') {\n                        this.fnDisconnect = value;\n                    } else {\n                        console.log(\"register:function \" + key);\n                        this.sio.on(key, value);\n                    }\n                }\n            }\n            this.startHearbeat();\n        },\n        startHearbeat: function startHearbeat() {\n            this.sio.on('game_pong', function () {\n                self.lastRecieveTime = Date.now();\n            });\n            this.lastRecieveTime = Date.now();\n            var self = this;\n            if (!self.isPinging) {\n                self.isPinging = true;\n                setInterval(function () {\n                    if (self.sio) {\n                        //FIXME: 超时设为3s\n                        if (Date.now() - self.lastRecieveTime > 10000) {\n                            self.close();\n                        } else {\n                            self.ping();\n                        }\n                    }\n                }, 5000);\n            }\n        },\n        send: function send(event, data) {\n            if (this.sio.connected) {\n                if (data != null && (typeof data === \"undefined\" ? \"undefined\" : _typeof(data)) == \"object\") {\n                    data = JSON.stringify(data);\n                    //console.log(data);              \n                }\n                this.sio.emit(event, data);\n            }\n        },\n        ping: function ping() {\n            this.send('game_ping');\n        },\n        close: function close() {\n            console.log('close');\n            if (this.sio && this.sio.connected) {\n                this.sio.connected = false;\n                this.sio.disconnect();\n                this.sio = null;\n            }\n            if (this.fnDisconnect) {\n                this.fnDisconnect();\n                this.fnDisconnect = null;\n            }\n        },\n        test: function test(fnResult) {\n            var xhr = null;\n            var fn = function fn(ret) {\n                fnResult(ret.isonline);\n                xhr = null;\n            };\n            var arr = this.ip.split(':');\n            var data = {\n                account: cc.vv.userMgr.account,\n                sign: cc.vv.userMgr.sign,\n                ip: arr[0],\n                port: arr[1]\n            };\n            xhr = cc.vv.http.sendRequest(\"/is_server_online\", data, fn);\n            setTimeout(function () {\n                if (xhr) {\n                    xhr.abort();\n                    fnResult(false);\n                }\n            }, 1500);\n        }\n    }\n});\n\ncc._RF.pop();","deps":{"socket-io":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/39/39329d2f-3dcd-4821-87e1-f05ae6c5c359.js"}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/b1/b1cc9c91-775e-425e-a160-d2f4c6299524.js":{"source":"\"use strict\";\ncc._RF.push(module, 'b1cc9yRd15CXqFg0vTGKZUk', 'Net');\n// scripts/Net.js\n\n\"use strict\";\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nif (window.io == null) {\n    window.io = require(\"socket-io\");\n}\nvar Global = cc.Class({\n    extends: cc.Component,\n    statics: {\n        ip: \"\",\n        sio: null,\n        isPinging: false,\n        fnDisconnect: null,\n        handlers: {},\n        addHandler: function addHandler(event, fn) {\n            if (this.handlers[event]) {\n                console.log(\"event:\" + event + \"' handler has been registered.\");\n                return;\n            }\n            var handler = function handler(data) {\n                //console.log(event + \"(\" + typeof(data) + \"):\" + (data? data.toString():\"null\"));\n                if (event != \"disconnect\" && typeof data == \"string\") {\n                    data = JSON.parse(data);\n                }\n                fn(data);\n            };\n            this.handlers[event] = handler;\n            if (this.sio) {\n                console.log(\"register:function \" + event);\n                this.sio.on(event, handler);\n            }\n        },\n        connect: function connect(fnConnect, fnError) {\n            var self = this;\n            var opts = {\n                'reconnection': false,\n                'force new connection': true,\n                'transports': ['websocket', 'polling']\n            };\n            this.sio = window.io.connect(this.ip, opts);\n            this.sio.on('reconnect', function () {\n                console.log('reconnection');\n            });\n            this.sio.on('connect', function (data) {\n                self.sio.connected = true;\n                fnConnect(data);\n            });\n            this.sio.on('disconnect', function (data) {\n                console.log(\"disconnect\");\n                self.sio.connected = false;\n                self.close();\n            });\n            this.sio.on('connect_failed', function () {\n                console.log('connect_failed');\n            });\n            for (var key in this.handlers) {\n                var value = this.handlers[key];\n                if (typeof value == \"function\") {\n                    if (key == 'disconnect') {\n                        this.fnDisconnect = value;\n                    } else {\n                        console.log(\"register:function \" + key);\n                        this.sio.on(key, value);\n                    }\n                }\n            }\n            this.startHearbeat();\n        },\n        startHearbeat: function startHearbeat() {\n            this.sio.on('game_pong', function () {\n                self.lastRecieveTime = Date.now();\n            });\n            this.lastRecieveTime = Date.now();\n            var self = this;\n            if (!self.isPinging) {\n                self.isPinging = true;\n                setInterval(function () {\n                    if (self.sio) {\n                        //FIXME: 超时设为3s\n                        if (Date.now() - self.lastRecieveTime > 10000) {\n                            self.close();\n                        } else {\n                            self.ping();\n                        }\n                    }\n                }, 5000);\n            }\n        },\n        send: function send(event, data) {\n            if (this.sio.connected) {\n                if (data != null && (typeof data === \"undefined\" ? \"undefined\" : _typeof(data)) == \"object\") {\n                    data = JSON.stringify(data);\n                    //console.log(data);              \n                }\n                this.sio.emit(event, data);\n            }\n        },\n        ping: function ping() {\n            this.send('game_ping');\n        },\n        close: function close() {\n            console.log('close');\n            if (this.sio && this.sio.connected) {\n                this.sio.connected = false;\n                this.sio.disconnect();\n                this.sio = null;\n            }\n            if (this.fnDisconnect) {\n                this.fnDisconnect();\n                this.fnDisconnect = null;\n            }\n        },\n        test: function test(fnResult) {\n            var xhr = null;\n            var fn = function fn(ret) {\n                fnResult(ret.isonline);\n                xhr = null;\n            };\n            var arr = this.ip.split(':');\n            var data = {\n                account: cc.vv.userMgr.account,\n                sign: cc.vv.userMgr.sign,\n                ip: arr[0],\n                port: arr[1]\n            };\n            xhr = cc.vv.http.sendRequest(\"/is_server_online\", data, fn);\n            setTimeout(function () {\n                if (xhr) {\n                    xhr.abort();\n                    fnResult(false);\n                }\n            }, 1500);\n        }\n    }\n});\n\ncc._RF.pop();","deps":{"socket-io":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/39/39329d2f-3dcd-4821-87e1-f05ae6c5c359.js"}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/6e/6edb38e3-c7e1-417a-94b5-9a4d71283176.js":{"source":"\"use strict\";\ncc._RF.push(module, '6edb3jjx+FBepS1mk1xKDF2', 'Hall');\n// scripts/components/Hall.js\n\n\"use strict\";\n\nvar Net = require(\"Net\");\nvar Global = require(\"Global\");\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        lblName: cc.Label,\n        lblGems: cc.Label,\n        lblID: cc.Label,\n        lblNotice: cc.Label,\n        joinGameWin: cc.Node,\n        applyAgentWin: cc.Node,\n        createRoomWin: cc.Node,\n        settingsWin: cc.Node,\n        helpWin: cc.Node,\n        shareWin: cc.Node,\n        btnJoinGame: cc.Node,\n        btnReturnGame: cc.Node,\n        sprHeadImg: cc.Sprite,\n        effAnimation: cc.Node,\n        _lastCheckTime: 0\n    },\n    initNetHandlers: function initNetHandlers() {\n        var self = this;\n    },\n    onShare: function onShare() {\n        cc.vv.anysdkMgr.share(\"亚巨包头麻将\", \"亚巨包头麻将\");\n    },\n    // use this for initialization\n    onLoad: function onLoad() {\n        if (!cc.sys.isNative && cc.sys.isMobile) {\n            var cvs = this.node.getComponent(cc.Canvas);\n            cvs.fitHeight = true;\n            cvs.fitWidth = true;\n        }\n        if (!cc.vv) {\n            cc.director.loadScene(\"login\");\n            return;\n        }\n        this.preLoad();\n        this.initLabels();\n        this.effNode = cc.find(\"Canvas/eff\");\n        // 如果未创建房间，创建按钮显示特效\n        // 如果存在房间，返回房间显示特效            \n        var pos = cc.v2(310, 53);\n        this.playBtnEff(true, pos);\n        if (cc.vv.gameNetMgr.roomId) {\n            this.btnJoinGame.active = false;\n            this.btnReturnGame.active = true;\n            pos = cc.v2(310, 53);\n        } else {\n            this.btnJoinGame.active = true;\n            this.btnReturnGame.active = false;\n            pos = cc.v2(86, -108);\n        }\n        // 播放按钮特效\n        this.playBtnEff(true, pos);\n        var roomId = cc.vv.userMgr.oldRoomId;\n        if (roomId != null) {\n            cc.vv.userMgr.oldRoomId = null;\n            cc.vv.userMgr.enterRoom(roomId);\n        }\n        var imgLoader = this.sprHeadImg.node.getComponent(\"ImageLoader\");\n        imgLoader.setUserID(cc.vv.userMgr.userId);\n        cc.vv.utils.addClickEvent(this.sprHeadImg.node, this.node, \"Hall\", \"onBtnClicked\");\n        this.initButtonHandler(\"Canvas/right_bottom/btn_shezhi\");\n        this.initButtonHandler(\"Canvas/right_bottom/btn_help\");\n        this.initButtonHandler(\"Canvas/right_bottom/btn_share_wx\");\n        this.helpWin.addComponent(\"OnBack\");\n        if (!cc.vv.userMgr.notice) {\n            cc.vv.userMgr.notice = {\n                version: null,\n                msg: \"数据请求中...\"\n            };\n        }\n        if (!cc.vv.userMgr.gemstip) {\n            cc.vv.userMgr.gemstip = {\n                version: null,\n                msg: \"数据请求中...\"\n            };\n        }\n        this.lblNotice.string = cc.vv.userMgr.notice.msg;\n        this.refreshInfo();\n        this.refreshNotice();\n        this.refreshGemsTip();\n        // cc.vv.audioMgr.playBGM(\"bgMain.mp3\");\n        cc.vv.audioMgr.playBGM(\"bgFight.mp3\");\n        this.initEventHandlers();\n    },\n    refreshInfo: function refreshInfo() {\n        var self = this;\n        var onGet = function onGet(ret) {\n            if (ret.errcode !== 0) {\n                console.log(ret.errmsg);\n            } else {\n                if (ret.gems != null) {\n                    this.lblGems.string = cc.vv.utils.showJinbi(ret.gems);\n                }\n            }\n        };\n        var data = {\n            account: cc.vv.userMgr.account,\n            sign: cc.vv.userMgr.sign\n        };\n        cc.vv.http.sendRequest(\"/get_user_status\", data, onGet.bind(this));\n    },\n    refreshGemsTip: function refreshGemsTip() {\n        var self = this;\n        var onGet = function onGet(ret) {\n            if (ret.errcode !== 0) {\n                console.log(ret.errmsg);\n            } else {\n                cc.vv.userMgr.gemstip.version = ret.version;\n                cc.vv.userMgr.gemstip.msg = ret.msg.replace(\"<newline>\", \"\\n\");\n            }\n        };\n        var data = {\n            account: cc.vv.userMgr.account,\n            sign: cc.vv.userMgr.sign,\n            type: \"fkgm\",\n            version: cc.vv.userMgr.gemstip.version\n        };\n        cc.vv.http.sendRequest(\"/get_message\", data, onGet.bind(this));\n    },\n    refreshNotice: function refreshNotice() {\n        var self = this;\n        var onGet = function onGet(ret) {\n            if (ret.errcode !== 0) {\n                console.log(ret.errmsg);\n            } else {\n                cc.vv.userMgr.notice.version = ret.version;\n                cc.vv.userMgr.notice.msg = ret.msg;\n                this.lblNotice.string = ret.msg;\n            }\n        };\n        var data = {\n            account: cc.vv.userMgr.account,\n            sign: cc.vv.userMgr.sign,\n            type: \"notice\",\n            version: cc.vv.userMgr.notice.version\n        };\n        cc.vv.http.sendRequest(\"/get_message\", data, onGet.bind(this));\n    },\n    initButtonHandler: function initButtonHandler(btnPath) {\n        var btn = cc.find(btnPath);\n        cc.vv.utils.addClickEvent(btn, this.node, \"Hall\", \"onBtnClicked\");\n    },\n    preLoad: function preLoad() {\n        cc.loader.loadResDir(\"textures/images\", function (err, assets) {\n            cc.loader.loadResDir(\"textures/MJRoom\", function (err, assets) {\n                cc.loader.loadResDir(\"textures/MJ\", function (err, assets) {});\n            });\n        });\n    },\n    initLabels: function initLabels() {\n        this.lblName.string = cc.vv.userMgr.userName;\n        this.lblGems.string = cc.vv.utils.showJinbi(cc.vv.userMgr.gems);\n        this.lblID.string = \"ID:\" + cc.vv.userMgr.userId;\n    },\n    onBtnClicked: function onBtnClicked(event) {\n        if (event.target.name == \"btn_shezhi\") {\n            this.settingsWin.active = true;\n        } else if (event.target.name == \"btn_help\") {\n            this.helpWin.active = true;\n        } else if (event.target.name == \"btn_share_wx\") {\n            cc.vv.share.show();\n        }\n    },\n    onApplyAgentClicked: function onApplyAgentClicked() {\n        this.applyAgentWin.active = true;\n    },\n    onApplyAgentBtnBack: function onApplyAgentBtnBack() {\n        this.applyAgentWin.active = false;\n    },\n    onJoinGameClicked: function onJoinGameClicked() {\n        this.joinGameWin.active = true;\n    },\n    onReturnGameClicked: function onReturnGameClicked() {\n        cc.director.loadScene(\"mjgame\");\n    },\n    onBtnAddGemsClicked: function onBtnAddGemsClicked() {\n        console.log(\"点击充值按钮\");\n        cc.vv.charge.show();\n    },\n    onCreateRoomClicked: function onCreateRoomClicked() {\n        if (cc.vv.gameNetMgr.roomId != null) {\n            cc.vv.alert.show(\"提示\", \"房间已经创建!\\n必须解散当前房间才能创建新的房间\");\n            return;\n        }\n        console.log(\"onCreateRoomClicked\");\n        this.createRoomWin.active = true;\n    },\n    initEventHandlers: function initEventHandlers() {\n        this.node.on('update_gems', function (event) {\n            if (event.detail.gems != null) {\n                var str = event.detail.gems;\n                this.lblGems.string = cc.vv.utils.showJinbi(str);\n            }\n        }.bind(this));\n    },\n    // 获得更新消息\n    getRefreshInfo: function getRefreshInfo() {\n        var fn = function fn(ret) {\n            if (ret == null) {\n                console.log('消息是空的');\n                return;\n            }\n            if (ret.userid == cc.vv.userMgr.userId) {\n                if (ret.gems != null) {\n                    this.lblGems.string = cc.vv.utils.showJinbi(ret.gems);\n                }\n            }\n        };\n        this._lastCheckTime = Date.now();\n        cc.vv.http.sendRequest(\"/need_refresh\", {\n            userid: cc.vv.userMgr.userId\n        }, fn.bind(this));\n    },\n    // 播放按钮特效\n    playBtnEff: function playBtnEff(flag, pos) {\n        if (flag) {\n            this.btnEff = this.effAnimation.getComponent(cc.Animation);\n            // this.effAnimation.getComponent(cc.Node).getPosition();\n            this.effNode.setPosition(pos);\n            var animState = this.btnEff.play('anniu');\n            animState.speed = 0.3;\n            animState.wrapMode = cc.WrapMode.Loop;\n            animState.repeatCount = Infinity;\n        }\n    },\n    gotoNewHall: function gotoNewHall() {\n        cc.director.loadScene(\"newhall\");\n    },\n    // called every frame, uncomment this function to activate update callback\n    update: function update(dt) {\n        if (Date.now() - this._lastCheckTime > 30000) {\n            this.getRefreshInfo();\n        };\n        var x = this.lblNotice.node.x;\n        x -= dt * 100;\n        if (x + this.lblNotice.node.width < -1000) {\n            x = 500;\n        }\n        this.lblNotice.node.x = x;\n        // 如果当前自己有房间，不能直接进入分享过来的房间\n        if (cc.vv && cc.vv.userMgr.roomData != null) {\n            cc.vv.userMgr.enterRoom(cc.vv.userMgr.roomData);\n            cc.vv.userMgr.roomData = null;\n        } else {\n            // 如果当前没有房间，且分享过来的房间号不是空的话，可以进入房间\n            if (cc.vv && cc.vv.userMgr.shareRoomId != null) {\n                cc.vv.userMgr.roomData = null;\n                var roomid = cc.vv.userMgr.shareRoomId;\n                cc.vv.userMgr.shareRoomId = null;\n                cc.vv.userMgr.enterRoom(roomid, function (ret) {\n                    if (ret.errcode != 0) {\n                        var content = \"房间[\" + roomid + \"]不存在，请重新输入!\";\n                        if (ret.errcode == 4) {\n                            content = \"房间[\" + roomid + \"]已满!\";\n                        }\n                        cc.vv.alert.show(\"提示\", content);\n                    }\n                }.bind(this));\n            }\n        }\n    }\n});\n\ncc._RF.pop();","deps":{"Net":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/b1/b1cc9c91-775e-425e-a160-d2f4c6299524.js","Global":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/24/24e30649-2e07-47de-bb35-4750afa8df14.js"}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/57/572a741f-87af-4df5-92d7-90db6100d7e2.js":{"source":"\"use strict\";\ncc._RF.push(module, '572a7Qfh69N9ZLXkNthANfi', 'Login');\n// scripts/components/Login.js\n\n\"use strict\";\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nString.prototype.format = function (args) {\n    if (arguments.length > 0) {\n        var result = this;\n        if (arguments.length == 1 && (typeof args === \"undefined\" ? \"undefined\" : _typeof(args)) == \"object\") {\n            for (var key in args) {\n                var reg = new RegExp(\"({\" + key + \"})\", \"g\");\n                result = result.replace(reg, args[key]);\n            }\n        } else {\n            for (var i = 0; i < arguments.length; i++) {\n                if (arguments[i] == undefined) {\n                    return \"\";\n                } else {\n                    var reg = new RegExp(\"({[\" + i + \"]})\", \"g\");\n                    result = result.replace(reg, arguments[i]);\n                }\n            }\n        }\n        return result;\n    } else {\n        return this;\n    }\n};\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        _stateStr: '',\n        _progress: 0.0,\n        _isLoading: true,\n        btnWechatLogin: cc.Node,\n        loadingbar: {\n            default: null,\n            type: cc.ProgressBar\n        },\n        _time: 0,\n        i: 0\n    },\n    // use this for initialization\n    onLoad: function onLoad() {\n        this.loadingbar.progress = 0;\n        if (!cc.sys.isNative && cc.sys.isMobile) {\n            var cvs = this.node.getComponent(cc.Canvas);\n            cvs.fitHeight = true;\n            cvs.fitWidth = true;\n        }\n        this.initMgr();\n        if (!cc.vv) {\n            this.initMgr();\n        }\n        cc.vv.http.url = cc.vv.http.master_url;\n        this.btnWechatLogin.active = false;\n    },\n    start: function start() {\n        var self = this;\n        var SHOW_TIME = 3000;\n        var FADE_TIME = 500;\n        if (cc.sys.os != cc.sys.OS_IOS || !cc.sys.isNative) {\n            var t = Date.now();\n            var fn = function fn() {\n                var dt = Date.now() - t;\n                if (dt < SHOW_TIME) {\n                    setTimeout(fn, 33);\n                } else {\n                    var op = (1 - (dt - SHOW_TIME) / FADE_TIME) * 255;\n                    if (op < 0) {\n                        self.checkVersion();\n                    } else {\n                        setTimeout(fn, 33);\n                    }\n                }\n            };\n            setTimeout(fn, 33);\n        } else {\n            this.checkVersion();\n        }\n    },\n    initMgr: function initMgr() {\n        cc.vv = {};\n        var UserMgr = require(\"UserMgr\");\n        cc.vv.userMgr = new UserMgr();\n        var ReplayMgr = require(\"ReplayMgr\");\n        cc.vv.replayMgr = new ReplayMgr();\n        cc.vv.http = require(\"HTTP\");\n        cc.vv.global = require(\"Global\");\n        cc.vv.net = require(\"Net\");\n        cc.vv.match_net = require(\"MatchNet\");\n        var GameNetMgr = require(\"GameNetMgr\");\n        cc.vv.gameNetMgr = new GameNetMgr();\n        // cc.vv.gameNetMgr.initHandlers();\n        var AnysdkMgr = require(\"AnysdkMgr\");\n        cc.vv.anysdkMgr = new AnysdkMgr();\n        cc.vv.anysdkMgr.init();\n        var VoiceMgr = require(\"VoiceMgr\");\n        cc.vv.voiceMgr = new VoiceMgr();\n        cc.vv.voiceMgr.init();\n        var AudioMgr = require(\"AudioMgr\");\n        cc.vv.audioMgr = new AudioMgr();\n        cc.vv.audioMgr.init();\n        var Utils = require(\"Utils\");\n        cc.vv.utils = new Utils();\n        cc.args = this.urlParse();\n        this._isLoading = true;\n    },\n    urlParse: function urlParse() {\n        var params = {};\n        if (window.location == null) {\n            return params;\n        }\n        var name, value;\n        var str = window.location.href; //取得整个地址栏\n        var num = str.indexOf(\"?\");\n        str = str.substr(num + 1); //取得所有参数   \n        var arr = str.split(\"&\"); //各个参数放到数组里\n        for (var i = 0; i < arr.length; i++) {\n            num = arr[i].indexOf(\"=\");\n            if (num > 0) {\n                name = arr[i].substring(0, num);\n                value = arr[i].substr(num + 1);\n                params[name] = value;\n            }\n        }\n        return params;\n    },\n    checkVersion: function checkVersion() {\n        var self = this;\n        var onGetVersion = function onGetVersion(ret) {\n            if (ret.version == null) {\n                console.log(\"error.\");\n            } else {\n                console.log(\"返回的结果是\" + JSON.stringify(ret));\n                cc.vv.SI = ret;\n                self.startPreloading();\n            }\n        };\n        var xhr = null;\n        var complete = false;\n        var fnRequest = function fnRequest() {\n            self._stateStr = \"正在连接服务器\";\n            xhr = cc.vv.http.sendRequest(\"/get_serverinfo\", null, function (ret) {\n                xhr = null;\n                complete = true;\n                onGetVersion(ret);\n            });\n            setTimeout(fn, 5000);\n        };\n        var fn = function fn() {\n            if (!complete) {\n                if (xhr) {\n                    xhr.abort();\n                    self._stateStr = \"连接失败，即将重试\";\n                    setTimeout(function () {\n                        fnRequest();\n                    }, 5000);\n                } else {\n                    fnRequest();\n                }\n            }\n        };\n        fn();\n    },\n    startPreloading: function startPreloading() {\n        this._stateStr = \"正在加载资源，请稍候\";\n        // this._isLoading = true;\n        var self = this;\n        cc.loader.onProgress = function (completedCount, totalCount, item) {\n            if (self._isLoading) {\n                self._progress = completedCount / totalCount;\n            }\n        };\n        cc.loader.loadResDir(\"textures/images/login\", function (err, assets) {\n            console.log(\"登录资源加载完成\");\n            self.onLoadComplete();\n        });\n    },\n    // 加载完成\n    onLoadComplete: function onLoadComplete() {\n        this._isLoading = false;\n        this.loadingbar.node.active = false;\n        this.btnWechatLogin.active = true;\n        cc.loader.onComplete = null;\n        cc.loader.loadResDir(\"textures/home\", function (err, assets) {\n            console.log(\"hall大厅资源加载完成\");\n        });\n    },\n    // 点击微信登录按钮\n    onBtnWeichatClicked: function onBtnWeichatClicked() {\n        console.log(\"创建一个微信登录的\");\n        if (cc.args[\"account\"] == null) {\n            this.sendWXLoginXHR();\n        } else {\n            cc.vv.wc.show(\"正在登录游戏,请稍后\");\n            cc.vv.userMgr.guestAuth();\n        }\n    },\n    // 发送请求，获取到微信登录用的code\n    sendWXLoginXHR: function sendWXLoginXHR() {\n        cc.vv.wc.show(\"正在登录游戏,请稍后\");\n        var url = \"http://mj.yajugame.com/sessionid.php\";\n        var xhr = cc.loader.getXMLHttpRequest();\n        xhr.open(\"GET\", url, true);\n        xhr.onreadystatechange = function () {\n            if (xhr.readyState == 4 && xhr.status >= 200 && xhr.status <= 207) {\n                var httpStatus = xhr.statusText;\n                var response = xhr.responseText;\n                var res = JSON.parse(response);\n                this.session_id = res[\"sid\"];\n                if (this.session_id) {\n                    console.log(\"the sid is \" + this.session_id);\n                    var fn = function fn(ret) {\n                        if (ret.errcode == 0) {\n                            cc.vv.anysdkMgr.onLoginResp(ret.code, ret.uid, ret.roomid);\n                        } else {\n                            cc.vv.wc.show(\"请在微信中打开该链接地址或刷新页面！\");\n                        }\n                    };\n                    cc.vv.http.sendRequest(\"/get_wx_code\", {\n                        sid: this.session_id\n                    }, fn);\n                }\n            } else {\n                console.log(\"无结果返回\");\n            }\n        };\n        xhr.timeout = 5000; // 5 seconds for timeout\n        xhr.send();\n    },\n    time: function time() {\n        this._time = Date.now();\n    },\n    update: function update(dt) {\n        var progress = this.loadingbar.progress;\n        if (this._isLoading) {\n            if (Date.now() - this._time > 100) {\n                this.time();\n                progress += dt;\n                if (this.i >= 3) {\n                    if (progress < this._progress) {\n                        progress = this._progress;\n                    }\n                }\n                if (progress > 1) {\n                    progress = 1;\n                }\n                this.i++;\n            }\n            this.loadingbar.progress = progress;\n        }\n    }\n});\n\ncc._RF.pop();","deps":{"UserMgr":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/74/74d78241-a877-4329-8ea1-72463662e2fe.js","ReplayMgr":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/1a/1a6a1a7c-e8d1-4be8-a644-6429dbbbbb6d.js","HTTP":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/90/90ae6d49-e76e-4940-8b79-b5a17735c7b6.js","Net":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/b1/b1cc9c91-775e-425e-a160-d2f4c6299524.js","MatchNet":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/8a/8afb3aa2-c53d-45f8-b39b-fda8c7f12570.js","GameNetMgr":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/95/95456e7d-4c04-4a64-b328-1c6a97a18d8d.js","AnysdkMgr":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/f5/f58ce6ba-96ba-4364-948d-b3604606ac4d.js","VoiceMgr":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/1f/1f06645b-2c0c-4a18-966d-90314eda4abf.js","AudioMgr":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/55/55caea5c-a6f1-4ae6-bd00-c797fc8ecb38.js","Global":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/24/24e30649-2e07-47de-bb35-4750afa8df14.js","Utils":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/b7/b717fcf0-c348-4dcc-8aaf-35b6f5b7dc31.js"}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/84/84dfb0fb-4179-4050-97ce-280f948dfe2c.js":{"source":"\"use strict\";\ncc._RF.push(module, '84dfbD7QXlAUJfOKA+Ujf4s', 'NewHall');\n// scripts/components/NewHall.js\n\n\"use strict\";\n\nvar Net = require(\"Net\");\nvar Global = require(\"Global\");\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        selectZJH: cc.Node,\n        selectMJ: cc.Node,\n        selectDN: cc.Node,\n        selectDZPK: cc.Node,\n        nickname: cc.Label,\n        userGems: cc.Label,\n        userCoins: cc.Label,\n        headImg: cc.Sprite,\n        _lastCheckTime: 0,\n        _lastRefreshTime: 0,\n        mj_online: cc.Label,\n        zjh_online: cc.Label,\n        dn_online: cc.Label,\n        dzpk_online: cc.Label,\n        effAnimation: cc.Node,\n        lblNotice: cc.Label,\n        _activity: null,\n        gonggao: cc.Node,\n        statement: null,\n        statementContent: cc.RichText\n    },\n    // use this for initialization\n    onLoad: function onLoad() {\n        if (!cc.vv) {\n            cc.director.loadScene(\"login\");\n            return;\n        }\n        this.statement = cc.find(\"Canvas/statement\");\n        this._activity = cc.find(\"Canvas/activity\");\n        this._match = cc.find(\"Canvas/match\");\n        this.jbs = this._match.getComponent(\"Jbs\");\n        var imgLoader = this.headImg.node.getComponent(\"ImageLoader\");\n        imgLoader.setUserID(cc.vv.userMgr.userId);\n        this.jinbi = cc.find(\"Canvas/header/jinbi/gems\").getComponent(cc.Label);\n        this.diamond = cc.find(\"Canvas/header/zuanshi/coins\").getComponent(cc.Label);\n        this.jinbiChange = cc.find(\"Canvas/jinbiChange\");\n        this.initButtonHandler(\"Canvas/scrollview/view/content/zjhbtn\");\n        this.initButtonHandler(\"Canvas/scrollview/view/content/mjbtn\");\n        this.initButtonHandler(\"Canvas/scrollview/view/content/dnbtn\");\n        this.initButtonHandler(\"Canvas/scrollview/view/content/dzpkbtn\");\n        this.initButtonHandler(\"Canvas/footer/exchange\");\n        this.initButtonHandler(\"Canvas/header/jinbi/iconAdd\");\n        this.initJinbiChangeHandler();\n        this.initLabels();\n        this.getUserOnline();\n        this.effNode = cc.find(\"Canvas/eff\");\n        // this.playBtnEff(true);\n        if (!cc.vv.userMgr.notice) {\n            cc.vv.userMgr.notice = {\n                version: null,\n                msg: \"数据请求中...\"\n            };\n        };\n        if (!cc.vv.userMgr.gemstip) {\n            cc.vv.userMgr.gemstip = {\n                version: null,\n                msg: \"数据请求中...\"\n            };\n        };\n        var roomId = cc.vv.userMgr.oldRoomId;\n        if (roomId != null) {\n            cc.vv.userMgr.oldRoomId = null;\n            cc.vv.userMgr.enterRoom(roomId);\n        };\n        this.lblNotice.string = cc.vv.userMgr.notice.msg;\n        this.refreshNotice();\n        cc.vv.audioMgr.playBGM(\"bgFight.mp3\");\n        //模块的动态显示\n        if (cc.vv.userMgr.modules) {\n            var content = cc.find(\"Canvas/scrollview/view/content\");\n            var del_arr = [];\n            for (var i in content.children) {\n                var child = content.children[i];\n                if (cc.vv.userMgr.modules.indexOf(parseInt(i)) == -1) {\n                    del_arr.push(child);\n                }\n            }\n            for (var i in del_arr) {\n                content.removeChild(del_arr[i]);\n            }\n            var width = content.children[0].width;\n            var length = content.children.length;\n            var per = (1280 - width * length) / (length + 1);\n            per = per + 120;\n            for (var i in content.children) {\n                var child = content.children[i];\n                child.x = per + i * (width / 2 + per);\n            }\n        };\n        //锦标赛是否开放\n        this.initJbs();\n    },\n    initJbs: function initJbs() {\n        var btn = cc.find(\"Canvas/scrollview/view/content/jbsbtn\");\n        if (cc.vv.userMgr.is_open_jbs) {\n            btn.getComponent(cc.Button).interactable = true;\n            // btn.interactable = true;\n            for (var i in btn.children) {\n                btn.children[i].active = false;\n            }\n        }\n    },\n    /*// 播放按钮特效\r\n    playBtnEff: function(flag) {\r\n        if (flag) {\r\n            this.btnEff = this.effAnimation.getComponent(cc.Animation);\r\n            var animState = this.btnEff.play('anniu');\r\n            animState.speed = 0.2;\r\n            animState.wrapMode = cc.WrapMode.Loop;\r\n            animState.repeatCount = Infinity;\r\n        }\r\n    },*/\n    refreshNotice: function refreshNotice() {\n        var self = this;\n        var onGet = function onGet(ret) {\n            if (ret.errcode !== 0) {\n                console.log(ret.errmsg);\n            } else {\n                cc.vv.userMgr.notice.version = ret.version;\n                cc.vv.userMgr.notice.msg = ret.msg;\n                this.lblNotice.string = ret.msg;\n            }\n        };\n        var data = {\n            account: cc.vv.userMgr.account,\n            sign: cc.vv.userMgr.sign,\n            type: \"notice\",\n            version: cc.vv.userMgr.notice.version\n        };\n        cc.vv.http.sendRequest(\"/get_message\", data, onGet.bind(this));\n    },\n    initLabels: function initLabels() {\n        this.nickname.string = cc.vv.userMgr.userName;\n        this.userGems.string = cc.vv.utils.showJinbi(cc.vv.userMgr.gems);\n        this.userCoins.string = cc.vv.userMgr.coins;\n    },\n    initButtonHandler: function initButtonHandler(btnPath) {\n        var btn = cc.find(btnPath);\n        cc.vv.utils.addClickEvent(btn, this.node, \"NewHall\", \"onBtnClicked\");\n    },\n    initJinbiChangeHandler: function initJinbiChangeHandler() {\n        cc.vv.utils.addClickEvent(this.jinbiChange.getChildByName('yes'), this.node, \"NewHall\", \"onChangeJinbi\");\n        cc.vv.utils.addClickEvent(this.jinbiChange.getChildByName('no'), this.node, \"NewHall\", \"onChangeJinbi\");\n    },\n    onBtnClicked: function onBtnClicked(event) {\n        switch (event.target.name) {\n            case 'zjhbtn':\n                this.selectZJH.active = true;\n                this.selectZJH.getComponent(\"SelectZjh\").initView();\n                break;\n            case 'exchange':\n                this.jinbiChange.active = true;\n                break;\n            case 'mjbtn':\n                this.selectMJ.active = true;\n                break;\n            case 'dnbtn':\n                this.selectDN.active = true;\n                this.selectDN.getComponent(\"SelectDn\").initView();\n                break;\n            case 'dzpkbtn':\n                this.selectDZPK.active = true;\n                this.selectDZPK.getComponent(\"SelectDzpk\").initView();\n                break;\n            case 'btn_setting':\n                this.node.getChildByName(\"set\").active = true;\n                this.node.getChildByName(\"set\").getComponent(\"Set\").refreshVolume();\n                break;\n        }\n    },\n    showActivity: function showActivity() {\n        this._activity.active = true;\n        this._activity.getComponent(\"Collapse\").refreshBtns();\n    },\n    hideActivity: function hideActivity() {\n        this._activity.active = false;\n    },\n    //兑换金币\n    onChangeJinbi: function onChangeJinbi(event) {\n        switch (event.target.name) {\n            case 'yes':\n                var data = {\n                    sign: cc.vv.userMgr.sign,\n                    userid: cc.vv.userMgr.userId,\n                    num_diamond: cc.find(\"Canvas/jinbiChange/editbox\").getComponent(cc.EditBox).string\n                };\n                var onYes = function onYes(ret) {\n                    if (ret) {\n                        if (ret.userid == cc.vv.userMgr.userId) {\n                            if (ret.jinbi != null) {\n                                this.jinbi.string = cc.vv.utils.showJinbi(ret.jinbi); //刷新金币显示\n                                this.diamond.string = ret.diamond; //刷新钻石显示\n                                console.log('兑换成功！');\n                            } else {\n                                console.log('无金币数量返回！');\n                            }\n                        } else {\n                            console.log('userid不匹配！');\n                        }\n                    } else {\n                        console.log('兑换失败！');\n                    }\n                    this.jinbiChange.active = false;\n                };\n                cc.vv.http.sendRequest(\"/changeJinbi\", data, onYes.bind(this));\n                break;\n            case 'no':\n                this.jinbiChange.active = false;\n                break;\n        }\n    },\n    onBtnAddCoinsClicked: function onBtnAddCoinsClicked() {\n        cc.vv.chargeType.show();\n    },\n    onBtnAddGemsClicked: function onBtnAddGemsClicked() {\n        this.jinbiChange.active = true;\n    },\n    showAnnouncement: function showAnnouncement() {\n        this.gonggao.active = true;\n        this.gonggao.getComponent(\"Announcement\").getAnnouncement();\n    },\n    // 获得更新消息\n    getRefreshInfo: function getRefreshInfo() {\n        var self = this;\n        var fn = function fn(ret) {\n            if (ret == null) {\n                console.log('消息是空的');\n                return;\n            }\n            if (ret.userid == cc.vv.userMgr.userId) {\n                if (ret.gems != null) {\n                    // self.userGems.string = cc.vv.utils.showJinbi(ret.gems);\n                    cc.vv.userMgr.gems = ret.gems;\n                }\n                if (ret.coins != null) {\n                    cc.vv.userMgr.coins = ret.coins;\n                    // self.userCoins.string = ret.coins;\n                }\n                cc.vv.userMgr.refreshTime = 30000;\n            }\n        };\n        this._lastRefreshTime = Date.now();\n        cc.vv.http.sendRequest(\"/need_refresh\", {\n            userid: cc.vv.userMgr.userId\n        }, fn);\n    },\n    getUserOnline: function getUserOnline() {\n        var self = this;\n        var fn = function fn(ret) {\n            self.mj_online.string = ret['0'] + \"人在线\";\n            self.zjh_online.string = ret['2'] + \"人在线\";\n            self.dn_online.string = ret['3'] + \"人在线\";\n            self.dzpk_online.string = ret['4'] + \"人在线\";\n        };\n        this._lastCheckTime = Date.now();\n        var data = {\n            account: cc.vv.userMgr.account,\n            sign: cc.vv.userMgr.sign\n        };\n        cc.vv.http.sendRequest(\"/get_user_online\", data, fn);\n    },\n    exchangeRoom: function exchangeRoom() {\n        if (cc.vv.userMgr.room_type == 2) {\n            var type = 'zjh';\n        } else if (cc.vv.userMgr.room_type == 3) {\n            var type = 'dn';\n        } else {\n            var type = 'dzpk';\n        }\n        var conf = {\n            room_type: cc.vv.userMgr.room_type, //2代表扎金花房间\n            scene: cc.vv.userMgr.scene,\n            genre: 1,\n            type: type\n        };\n        var data = {\n            account: cc.vv.userMgr.account,\n            sign: cc.vv.userMgr.sign,\n            conf: JSON.stringify(conf),\n            e_roomid: cc.vv.userMgr.e_roomid\n        };\n        cc.vv.wc.show(\"寻找房间\");\n        var onSearch = function onSearch(ret) {\n            if (ret.errcode !== 0) {\n                cc.vv.wc.hide();\n                if (ret.errcode == 2) {\n                    if (ret.errmsg == 1) {\n                        cc.vv.alert.show(\"提示\", \"钻石不够，无法匹配\");\n                    } else {\n                        cc.vv.alert.show(\"提示\", \"金币不够，无法匹配\");\n                    }\n                } else {\n                    cc.vv.alert.show(\"提示\", \"创建房间失败,错误码:\" + ret.errcode);\n                }\n            } else {\n                cc.vv.userMgr.room_type = conf.room_type;\n                cc.vv.userMgr.scene = conf.scene;\n                cc.vv.userMgr.e_roomid = ret.roomid;\n                cc.vv.gameNetMgr.connectGameServer(ret);\n            }\n        };\n        cc.vv.http.sendRequest(\"/exchange_room\", data, onSearch);\n    },\n    // called every frame, uncomment this function to activate update callback\n    update: function update(dt) {\n        if (Date.now() - this._lastCheckTime > 10000) {\n            this.getUserOnline();\n        };\n        if (Date.now() - this._lastRefreshTime > cc.vv.userMgr.refreshTime) {\n            this.getRefreshInfo();\n        };\n        var x = this.lblNotice.node.x;\n        x -= dt * 100;\n        if (x + this.lblNotice.node.width < -1000) {\n            x = 500;\n        }\n        this.lblNotice.node.x = x;\n        if (cc.vv && cc.vv.userMgr.roomData != null) {\n            cc.vv.userMgr.reconnection = 1;\n            cc.vv.userMgr.enterRoom(cc.vv.userMgr.roomData);\n            cc.vv.userMgr.roomData = null;\n        } else {\n            // 如果当前没有房间，且分享过来的房间号不是空的话，可以进入房间\n            if (cc.vv && cc.vv.userMgr.shareRoomId != null) {\n                cc.vv.userMgr.roomData = null;\n                var roomid = cc.vv.userMgr.shareRoomId;\n                cc.vv.userMgr.shareRoomId = null;\n                cc.vv.userMgr.enterRoom(roomid, function (ret) {\n                    if (ret.errcode != 0) {\n                        var content = \"房间[\" + roomid + \"]不存在，请重新输入!\";\n                        if (ret.errcode == 4) {\n                            content = \"房间[\" + roomid + \"]已满!\";\n                        }\n                        cc.vv.alert.show(\"提示\", content);\n                    }\n                }.bind(this));\n            }\n        }\n        if (cc.vv && cc.vv.userMgr.exchange == 1) {\n            cc.vv.userMgr.exchange = 0;\n            this.exchangeRoom();\n        }\n        this.userGems.string = cc.vv.utils.showJinbi(cc.vv.userMgr.gems);\n        this.userCoins.string = cc.vv.userMgr.coins;\n    },\n    onOpenstatement: function onOpenstatement() {\n        var onGet = function onGet(ret) {\n            if (ret.errcode !== 0) {\n                console.log(ret.errmsg);\n            } else {\n                this.statement.active = true;\n                this.statementContent.string = ret.msg;\n            }\n        };\n        var data = {\n            account: cc.vv.userMgr.account,\n            sign: cc.vv.userMgr.sign,\n            type: \"statement\"\n        };\n        cc.vv.http.sendRequest(\"/get_message\", data, onGet.bind(this));\n    },\n    onClosestatement: function onClosestatement() {\n        this.statement.active = false;\n    },\n    // onJBSBtnClick: function() {\n    //     cc.vv.gameNetMgr.connectMatchServer();\n    // },\n    onJBSBtnClick: function onJBSBtnClick() {\n        var self = this;\n        var send_data = {\n            account: cc.vv.userMgr.account,\n            sign: cc.vv.userMgr.sign,\n            userid: cc.vv.userMgr.userId\n        };\n        cc.vv.http.sendRequest(\"/get_jbs_data\", send_data, function (ret) {\n            self.jbs.showMatchList(ret);\n        });\n    }\n});\n\ncc._RF.pop();","deps":{"Global":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/24/24e30649-2e07-47de-bb35-4750afa8df14.js","Net":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/b1/b1cc9c91-775e-425e-a160-d2f4c6299524.js"}},"/Applications/CocosCreator.app/Contents/Resources/app.asar/node_modules/persistify/node_modules/base64-js/lib/b64.js":{"source":"var lookup = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\n;(function (exports) {\n\t'use strict';\n\n  var Arr = (typeof Uint8Array !== 'undefined')\n    ? Uint8Array\n    : Array\n\n\tvar PLUS   = '+'.charCodeAt(0)\n\tvar SLASH  = '/'.charCodeAt(0)\n\tvar NUMBER = '0'.charCodeAt(0)\n\tvar LOWER  = 'a'.charCodeAt(0)\n\tvar UPPER  = 'A'.charCodeAt(0)\n\tvar PLUS_URL_SAFE = '-'.charCodeAt(0)\n\tvar SLASH_URL_SAFE = '_'.charCodeAt(0)\n\n\tfunction decode (elt) {\n\t\tvar code = elt.charCodeAt(0)\n\t\tif (code === PLUS ||\n\t\t    code === PLUS_URL_SAFE)\n\t\t\treturn 62 // '+'\n\t\tif (code === SLASH ||\n\t\t    code === SLASH_URL_SAFE)\n\t\t\treturn 63 // '/'\n\t\tif (code < NUMBER)\n\t\t\treturn -1 //no match\n\t\tif (code < NUMBER + 10)\n\t\t\treturn code - NUMBER + 26 + 26\n\t\tif (code < UPPER + 26)\n\t\t\treturn code - UPPER\n\t\tif (code < LOWER + 26)\n\t\t\treturn code - LOWER + 26\n\t}\n\n\tfunction b64ToByteArray (b64) {\n\t\tvar i, j, l, tmp, placeHolders, arr\n\n\t\tif (b64.length % 4 > 0) {\n\t\t\tthrow new Error('Invalid string. Length must be a multiple of 4')\n\t\t}\n\n\t\t// the number of equal signs (place holders)\n\t\t// if there are two placeholders, than the two characters before it\n\t\t// represent one byte\n\t\t// if there is only one, then the three characters before it represent 2 bytes\n\t\t// this is just a cheap hack to not do indexOf twice\n\t\tvar len = b64.length\n\t\tplaceHolders = '=' === b64.charAt(len - 2) ? 2 : '=' === b64.charAt(len - 1) ? 1 : 0\n\n\t\t// base64 is 4/3 + up to two characters of the original data\n\t\tarr = new Arr(b64.length * 3 / 4 - placeHolders)\n\n\t\t// if there are placeholders, only get up to the last complete 4 chars\n\t\tl = placeHolders > 0 ? b64.length - 4 : b64.length\n\n\t\tvar L = 0\n\n\t\tfunction push (v) {\n\t\t\tarr[L++] = v\n\t\t}\n\n\t\tfor (i = 0, j = 0; i < l; i += 4, j += 3) {\n\t\t\ttmp = (decode(b64.charAt(i)) << 18) | (decode(b64.charAt(i + 1)) << 12) | (decode(b64.charAt(i + 2)) << 6) | decode(b64.charAt(i + 3))\n\t\t\tpush((tmp & 0xFF0000) >> 16)\n\t\t\tpush((tmp & 0xFF00) >> 8)\n\t\t\tpush(tmp & 0xFF)\n\t\t}\n\n\t\tif (placeHolders === 2) {\n\t\t\ttmp = (decode(b64.charAt(i)) << 2) | (decode(b64.charAt(i + 1)) >> 4)\n\t\t\tpush(tmp & 0xFF)\n\t\t} else if (placeHolders === 1) {\n\t\t\ttmp = (decode(b64.charAt(i)) << 10) | (decode(b64.charAt(i + 1)) << 4) | (decode(b64.charAt(i + 2)) >> 2)\n\t\t\tpush((tmp >> 8) & 0xFF)\n\t\t\tpush(tmp & 0xFF)\n\t\t}\n\n\t\treturn arr\n\t}\n\n\tfunction uint8ToBase64 (uint8) {\n\t\tvar i,\n\t\t\textraBytes = uint8.length % 3, // if we have 1 byte left, pad 2 bytes\n\t\t\toutput = \"\",\n\t\t\ttemp, length\n\n\t\tfunction encode (num) {\n\t\t\treturn lookup.charAt(num)\n\t\t}\n\n\t\tfunction tripletToBase64 (num) {\n\t\t\treturn encode(num >> 18 & 0x3F) + encode(num >> 12 & 0x3F) + encode(num >> 6 & 0x3F) + encode(num & 0x3F)\n\t\t}\n\n\t\t// go through the array every three bytes, we'll deal with trailing stuff later\n\t\tfor (i = 0, length = uint8.length - extraBytes; i < length; i += 3) {\n\t\t\ttemp = (uint8[i] << 16) + (uint8[i + 1] << 8) + (uint8[i + 2])\n\t\t\toutput += tripletToBase64(temp)\n\t\t}\n\n\t\t// pad the end with zeros, but make sure to not forget the extra bytes\n\t\tswitch (extraBytes) {\n\t\t\tcase 1:\n\t\t\t\ttemp = uint8[uint8.length - 1]\n\t\t\t\toutput += encode(temp >> 2)\n\t\t\t\toutput += encode((temp << 4) & 0x3F)\n\t\t\t\toutput += '=='\n\t\t\t\tbreak\n\t\t\tcase 2:\n\t\t\t\ttemp = (uint8[uint8.length - 2] << 8) + (uint8[uint8.length - 1])\n\t\t\t\toutput += encode(temp >> 10)\n\t\t\t\toutput += encode((temp >> 4) & 0x3F)\n\t\t\t\toutput += encode((temp << 2) & 0x3F)\n\t\t\t\toutput += '='\n\t\t\t\tbreak\n\t\t}\n\n\t\treturn output\n\t}\n\n\texports.toByteArray = b64ToByteArray\n\texports.fromByteArray = uint8ToBase64\n}(typeof exports === 'undefined' ? (this.base64js = {}) : exports))\n","deps":{}},"/Applications/CocosCreator.app/Contents/Resources/app.asar/node_modules/persistify/node_modules/buffer/node_modules/isarray/index.js":{"source":"var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","deps":{}},"/Applications/CocosCreator.app/Contents/Resources/app.asar/node_modules/ieee754/index.js":{"source":"exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = nBytes * 8 - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = nBytes * 8 - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = (value * c - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","deps":{}},"/Applications/CocosCreator.app/Contents/Resources/app.asar/node_modules/persistify/node_modules/buffer/index.js":{"source":"(function (global){\n/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\nBuffer.poolSize = 8192 // not used by this implementation\n\nvar rootParent = {}\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Safari 5-7 lacks support for changing the `Object.prototype.constructor` property\n *     on objects.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\nfunction typedArraySupport () {\n  function Bar () {}\n  try {\n    var arr = new Uint8Array(1)\n    arr.foo = function () { return 42 }\n    arr.constructor = Bar\n    return arr.foo() === 42 && // typed array instances can be augmented\n        arr.constructor === Bar && // constructor can be set\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\n/**\n * Class: Buffer\n * =============\n *\n * The Buffer constructor returns instances of `Uint8Array` that are augmented\n * with function properties for all the node `Buffer` API functions. We use\n * `Uint8Array` so that square bracket notation works as expected -- it returns\n * a single octet.\n *\n * By augmenting the instances, we can avoid modifying the `Uint8Array`\n * prototype.\n */\nfunction Buffer (arg) {\n  if (!(this instanceof Buffer)) {\n    // Avoid going through an ArgumentsAdaptorTrampoline in the common case.\n    if (arguments.length > 1) return new Buffer(arg, arguments[1])\n    return new Buffer(arg)\n  }\n\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    this.length = 0\n    this.parent = undefined\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    return fromNumber(this, arg)\n  }\n\n  // Slightly less common case.\n  if (typeof arg === 'string') {\n    return fromString(this, arg, arguments.length > 1 ? arguments[1] : 'utf8')\n  }\n\n  // Unusual.\n  return fromObject(this, arg)\n}\n\nfunction fromNumber (that, length) {\n  that = allocate(that, length < 0 ? 0 : checked(length) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < length; i++) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') encoding = 'utf8'\n\n  // Assumption: byteLength() return value is always < kMaxLength.\n  var length = byteLength(string, encoding) | 0\n  that = allocate(that, length)\n\n  that.write(string, encoding)\n  return that\n}\n\nfunction fromObject (that, object) {\n  if (Buffer.isBuffer(object)) return fromBuffer(that, object)\n\n  if (isArray(object)) return fromArray(that, object)\n\n  if (object == null) {\n    throw new TypeError('must start with number, buffer, array or string')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined') {\n    if (object.buffer instanceof ArrayBuffer) {\n      return fromTypedArray(that, object)\n    }\n    if (object instanceof ArrayBuffer) {\n      return fromArrayBuffer(that, object)\n    }\n  }\n\n  if (object.length) return fromArrayLike(that, object)\n\n  return fromJsonObject(that, object)\n}\n\nfunction fromBuffer (that, buffer) {\n  var length = checked(buffer.length) | 0\n  that = allocate(that, length)\n  buffer.copy(that, 0, 0, length)\n  return that\n}\n\nfunction fromArray (that, array) {\n  var length = checked(array.length) | 0\n  that = allocate(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\n// Duplicate of fromArray() to keep fromArray() monomorphic.\nfunction fromTypedArray (that, array) {\n  var length = checked(array.length) | 0\n  that = allocate(that, length)\n  // Truncating the elements is probably not what people expect from typed\n  // arrays with BYTES_PER_ELEMENT > 1 but it's compatible with the behavior\n  // of the old Buffer constructor.\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array) {\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    array.byteLength\n    that = Buffer._augment(new Uint8Array(array))\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromTypedArray(that, new Uint8Array(array))\n  }\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = checked(array.length) | 0\n  that = allocate(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\n// Deserialize { type: 'Buffer', data: [1,2,3,...] } into a Buffer object.\n// Returns a zero-length buffer for inputs that don't conform to the spec.\nfunction fromJsonObject (that, object) {\n  var array\n  var length = 0\n\n  if (object.type === 'Buffer' && isArray(object.data)) {\n    array = object.data\n    length = checked(array.length) | 0\n  }\n  that = allocate(that, length)\n\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n} else {\n  // pre-set for values that may exist in the future\n  Buffer.prototype.length = undefined\n  Buffer.prototype.parent = undefined\n}\n\nfunction allocate (that, length) {\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = Buffer._augment(new Uint8Array(length))\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that.length = length\n    that._isBuffer = true\n  }\n\n  var fromPool = length !== 0 && length <= Buffer.poolSize >>> 1\n  if (fromPool) that.parent = rootParent\n\n  return that\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (subject, encoding) {\n  if (!(this instanceof SlowBuffer)) return new SlowBuffer(subject, encoding)\n\n  var buf = new Buffer(subject, encoding)\n  delete buf.parent\n  return buf\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  var i = 0\n  var len = Math.min(x, y)\n  while (i < len) {\n    if (a[i] !== b[i]) break\n\n    ++i\n  }\n\n  if (i !== len) {\n    x = a[i]\n    y = b[i]\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'binary':\n    case 'base64':\n    case 'raw':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) throw new TypeError('list argument must be an Array of Buffers.')\n\n  if (list.length === 0) {\n    return new Buffer(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; i++) {\n      length += list[i].length\n    }\n  }\n\n  var buf = new Buffer(length)\n  var pos = 0\n  for (i = 0; i < list.length; i++) {\n    var item = list[i]\n    item.copy(buf, pos)\n    pos += item.length\n  }\n  return buf\n}\n\nfunction byteLength (string, encoding) {\n  if (typeof string !== 'string') string = '' + string\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'binary':\n      // Deprecated\n      case 'raw':\n      case 'raws':\n        return len\n      case 'utf8':\n      case 'utf-8':\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  start = start | 0\n  end = end === undefined || end === Infinity ? this.length : end | 0\n\n  if (!encoding) encoding = 'utf8'\n  if (start < 0) start = 0\n  if (end > this.length) end = this.length\n  if (end <= start) return ''\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'binary':\n        return binarySlice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return 0\n  return Buffer.compare(this, b)\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset) {\n  if (byteOffset > 0x7fffffff) byteOffset = 0x7fffffff\n  else if (byteOffset < -0x80000000) byteOffset = -0x80000000\n  byteOffset >>= 0\n\n  if (this.length === 0) return -1\n  if (byteOffset >= this.length) return -1\n\n  // Negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = Math.max(this.length + byteOffset, 0)\n\n  if (typeof val === 'string') {\n    if (val.length === 0) return -1 // special case: looking for empty string always fails\n    return String.prototype.indexOf.call(this, val, byteOffset)\n  }\n  if (Buffer.isBuffer(val)) {\n    return arrayIndexOf(this, val, byteOffset)\n  }\n  if (typeof val === 'number') {\n    if (Buffer.TYPED_ARRAY_SUPPORT && Uint8Array.prototype.indexOf === 'function') {\n      return Uint8Array.prototype.indexOf.call(this, val, byteOffset)\n    }\n    return arrayIndexOf(this, [ val ], byteOffset)\n  }\n\n  function arrayIndexOf (arr, val, byteOffset) {\n    var foundIndex = -1\n    for (var i = 0; byteOffset + i < arr.length; i++) {\n      if (arr[byteOffset + i] === val[foundIndex === -1 ? 0 : i - foundIndex]) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === val.length) return byteOffset + foundIndex\n      } else {\n        foundIndex = -1\n      }\n    }\n    return -1\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\n// `get` is deprecated\nBuffer.prototype.get = function get (offset) {\n  console.log('.get() is deprecated. Access using array indexes instead.')\n  return this.readUInt8(offset)\n}\n\n// `set` is deprecated\nBuffer.prototype.set = function set (v, offset) {\n  console.log('.set() is deprecated. Access using array indexes instead.')\n  return this.writeUInt8(v, offset)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new Error('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; i++) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) throw new Error('Invalid hex string')\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction binaryWrite (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    var swap = encoding\n    encoding = offset\n    offset = length | 0\n    length = swap\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'binary':\n        return binaryWrite(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; i++) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction binarySlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; i++) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; i++) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = \\x7e~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = Buffer._augment(this.subarray(start, end))\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; i++) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  if (newBuf.length) newBuf.parent = this.parent || this\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('buffer must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('value is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkInt(this, value, offset, byteLength, Math.pow(2, 8 * byteLength), 0)\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkInt(this, value, offset, byteLength, Math.pow(2, 8 * byteLength), 0)\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; i++) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; i++) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = value < 0 ? 1 : 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = value < 0 ? 1 : 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (value > max || value < min) throw new RangeError('value is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('index out of range')\n  if (offset < 0) throw new RangeError('index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; i--) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; i++) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    target._set(this.subarray(start, start + len), targetStart)\n  }\n\n  return len\n}\n\n// fill(value, start=0, end=buffer.length)\nBuffer.prototype.fill = function fill (value, start, end) {\n  if (!value) value = 0\n  if (!start) start = 0\n  if (!end) end = this.length\n\n  if (end < start) throw new RangeError('end < start')\n\n  // Fill 0 bytes; we're done\n  if (end === start) return\n  if (this.length === 0) return\n\n  if (start < 0 || start >= this.length) throw new RangeError('start out of bounds')\n  if (end < 0 || end > this.length) throw new RangeError('end out of bounds')\n\n  var i\n  if (typeof value === 'number') {\n    for (i = start; i < end; i++) {\n      this[i] = value\n    }\n  } else {\n    var bytes = utf8ToBytes(value.toString())\n    var len = bytes.length\n    for (i = start; i < end; i++) {\n      this[i] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n/**\n * Creates a new `ArrayBuffer` with the *copied* memory of the buffer instance.\n * Added in Node 0.12. Only available in browsers that support ArrayBuffer.\n */\nBuffer.prototype.toArrayBuffer = function toArrayBuffer () {\n  if (typeof Uint8Array !== 'undefined') {\n    if (Buffer.TYPED_ARRAY_SUPPORT) {\n      return (new Buffer(this)).buffer\n    } else {\n      var buf = new Uint8Array(this.length)\n      for (var i = 0, len = buf.length; i < len; i += 1) {\n        buf[i] = this[i]\n      }\n      return buf.buffer\n    }\n  } else {\n    throw new TypeError('Buffer.toArrayBuffer not supported in this browser')\n  }\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar BP = Buffer.prototype\n\n/**\n * Augment a Uint8Array *instance* (not the Uint8Array class!) with Buffer methods\n */\nBuffer._augment = function _augment (arr) {\n  arr.constructor = Buffer\n  arr._isBuffer = true\n\n  // save reference to original Uint8Array set method before overwriting\n  arr._set = arr.set\n\n  // deprecated\n  arr.get = BP.get\n  arr.set = BP.set\n\n  arr.write = BP.write\n  arr.toString = BP.toString\n  arr.toLocaleString = BP.toString\n  arr.toJSON = BP.toJSON\n  arr.equals = BP.equals\n  arr.compare = BP.compare\n  arr.indexOf = BP.indexOf\n  arr.copy = BP.copy\n  arr.slice = BP.slice\n  arr.readUIntLE = BP.readUIntLE\n  arr.readUIntBE = BP.readUIntBE\n  arr.readUInt8 = BP.readUInt8\n  arr.readUInt16LE = BP.readUInt16LE\n  arr.readUInt16BE = BP.readUInt16BE\n  arr.readUInt32LE = BP.readUInt32LE\n  arr.readUInt32BE = BP.readUInt32BE\n  arr.readIntLE = BP.readIntLE\n  arr.readIntBE = BP.readIntBE\n  arr.readInt8 = BP.readInt8\n  arr.readInt16LE = BP.readInt16LE\n  arr.readInt16BE = BP.readInt16BE\n  arr.readInt32LE = BP.readInt32LE\n  arr.readInt32BE = BP.readInt32BE\n  arr.readFloatLE = BP.readFloatLE\n  arr.readFloatBE = BP.readFloatBE\n  arr.readDoubleLE = BP.readDoubleLE\n  arr.readDoubleBE = BP.readDoubleBE\n  arr.writeUInt8 = BP.writeUInt8\n  arr.writeUIntLE = BP.writeUIntLE\n  arr.writeUIntBE = BP.writeUIntBE\n  arr.writeUInt16LE = BP.writeUInt16LE\n  arr.writeUInt16BE = BP.writeUInt16BE\n  arr.writeUInt32LE = BP.writeUInt32LE\n  arr.writeUInt32BE = BP.writeUInt32BE\n  arr.writeIntLE = BP.writeIntLE\n  arr.writeIntBE = BP.writeIntBE\n  arr.writeInt8 = BP.writeInt8\n  arr.writeInt16LE = BP.writeInt16LE\n  arr.writeInt16BE = BP.writeInt16BE\n  arr.writeInt32LE = BP.writeInt32LE\n  arr.writeInt32BE = BP.writeInt32BE\n  arr.writeFloatLE = BP.writeFloatLE\n  arr.writeFloatBE = BP.writeFloatBE\n  arr.writeDoubleLE = BP.writeDoubleLE\n  arr.writeDoubleBE = BP.writeDoubleBE\n  arr.fill = BP.fill\n  arr.inspect = BP.inspect\n  arr.toArrayBuffer = BP.toArrayBuffer\n\n  return arr\n}\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; i++) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; i++) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; i++) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; i++) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uL0FwcGxpY2F0aW9ucy9Db2Nvc0NyZWF0b3IuYXBwL0NvbnRlbnRzL1Jlc291cmNlcy9hcHAuYXNhci9ub2RlX21vZHVsZXMvcGVyc2lzdGlmeS9ub2RlX21vZHVsZXMvYnVmZmVyL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBUaGUgYnVmZmVyIG1vZHVsZSBmcm9tIG5vZGUuanMsIGZvciB0aGUgYnJvd3Nlci5cbiAqXG4gKiBAYXV0aG9yICAgRmVyb3NzIEFib3VraGFkaWplaCA8ZmVyb3NzQGZlcm9zcy5vcmc+IDxodHRwOi8vZmVyb3NzLm9yZz5cbiAqIEBsaWNlbnNlICBNSVRcbiAqL1xuLyogZXNsaW50LWRpc2FibGUgbm8tcHJvdG8gKi9cblxuJ3VzZSBzdHJpY3QnXG5cbnZhciBiYXNlNjQgPSByZXF1aXJlKCdiYXNlNjQtanMnKVxudmFyIGllZWU3NTQgPSByZXF1aXJlKCdpZWVlNzU0JylcbnZhciBpc0FycmF5ID0gcmVxdWlyZSgnaXNhcnJheScpXG5cbmV4cG9ydHMuQnVmZmVyID0gQnVmZmVyXG5leHBvcnRzLlNsb3dCdWZmZXIgPSBTbG93QnVmZmVyXG5leHBvcnRzLklOU1BFQ1RfTUFYX0JZVEVTID0gNTBcbkJ1ZmZlci5wb29sU2l6ZSA9IDgxOTIgLy8gbm90IHVzZWQgYnkgdGhpcyBpbXBsZW1lbnRhdGlvblxuXG52YXIgcm9vdFBhcmVudCA9IHt9XG5cbi8qKlxuICogSWYgYEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUYDpcbiAqICAgPT09IHRydWUgICAgVXNlIFVpbnQ4QXJyYXkgaW1wbGVtZW50YXRpb24gKGZhc3Rlc3QpXG4gKiAgID09PSBmYWxzZSAgIFVzZSBPYmplY3QgaW1wbGVtZW50YXRpb24gKG1vc3QgY29tcGF0aWJsZSwgZXZlbiBJRTYpXG4gKlxuICogQnJvd3NlcnMgdGhhdCBzdXBwb3J0IHR5cGVkIGFycmF5cyBhcmUgSUUgMTArLCBGaXJlZm94IDQrLCBDaHJvbWUgNyssIFNhZmFyaSA1LjErLFxuICogT3BlcmEgMTEuNissIGlPUyA0LjIrLlxuICpcbiAqIER1ZSB0byB2YXJpb3VzIGJyb3dzZXIgYnVncywgc29tZXRpbWVzIHRoZSBPYmplY3QgaW1wbGVtZW50YXRpb24gd2lsbCBiZSB1c2VkIGV2ZW5cbiAqIHdoZW4gdGhlIGJyb3dzZXIgc3VwcG9ydHMgdHlwZWQgYXJyYXlzLlxuICpcbiAqIE5vdGU6XG4gKlxuICogICAtIEZpcmVmb3ggNC0yOSBsYWNrcyBzdXBwb3J0IGZvciBhZGRpbmcgbmV3IHByb3BlcnRpZXMgdG8gYFVpbnQ4QXJyYXlgIGluc3RhbmNlcyxcbiAqICAgICBTZWU6IGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTY5NTQzOC5cbiAqXG4gKiAgIC0gU2FmYXJpIDUtNyBsYWNrcyBzdXBwb3J0IGZvciBjaGFuZ2luZyB0aGUgYE9iamVjdC5wcm90b3R5cGUuY29uc3RydWN0b3JgIHByb3BlcnR5XG4gKiAgICAgb24gb2JqZWN0cy5cbiAqXG4gKiAgIC0gQ2hyb21lIDktMTAgaXMgbWlzc2luZyB0aGUgYFR5cGVkQXJyYXkucHJvdG90eXBlLnN1YmFycmF5YCBmdW5jdGlvbi5cbiAqXG4gKiAgIC0gSUUxMCBoYXMgYSBicm9rZW4gYFR5cGVkQXJyYXkucHJvdG90eXBlLnN1YmFycmF5YCBmdW5jdGlvbiB3aGljaCByZXR1cm5zIGFycmF5cyBvZlxuICogICAgIGluY29ycmVjdCBsZW5ndGggaW4gc29tZSBzaXR1YXRpb25zLlxuXG4gKiBXZSBkZXRlY3QgdGhlc2UgYnVnZ3kgYnJvd3NlcnMgYW5kIHNldCBgQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlRgIHRvIGBmYWxzZWAgc28gdGhleVxuICogZ2V0IHRoZSBPYmplY3QgaW1wbGVtZW50YXRpb24sIHdoaWNoIGlzIHNsb3dlciBidXQgYmVoYXZlcyBjb3JyZWN0bHkuXG4gKi9cbkJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUID0gZ2xvYmFsLlRZUEVEX0FSUkFZX1NVUFBPUlQgIT09IHVuZGVmaW5lZFxuICA/IGdsb2JhbC5UWVBFRF9BUlJBWV9TVVBQT1JUXG4gIDogdHlwZWRBcnJheVN1cHBvcnQoKVxuXG5mdW5jdGlvbiB0eXBlZEFycmF5U3VwcG9ydCAoKSB7XG4gIGZ1bmN0aW9uIEJhciAoKSB7fVxuICB0cnkge1xuICAgIHZhciBhcnIgPSBuZXcgVWludDhBcnJheSgxKVxuICAgIGFyci5mb28gPSBmdW5jdGlvbiAoKSB7IHJldHVybiA0MiB9XG4gICAgYXJyLmNvbnN0cnVjdG9yID0gQmFyXG4gICAgcmV0dXJuIGFyci5mb28oKSA9PT0gNDIgJiYgLy8gdHlwZWQgYXJyYXkgaW5zdGFuY2VzIGNhbiBiZSBhdWdtZW50ZWRcbiAgICAgICAgYXJyLmNvbnN0cnVjdG9yID09PSBCYXIgJiYgLy8gY29uc3RydWN0b3IgY2FuIGJlIHNldFxuICAgICAgICB0eXBlb2YgYXJyLnN1YmFycmF5ID09PSAnZnVuY3Rpb24nICYmIC8vIGNocm9tZSA5LTEwIGxhY2sgYHN1YmFycmF5YFxuICAgICAgICBhcnIuc3ViYXJyYXkoMSwgMSkuYnl0ZUxlbmd0aCA9PT0gMCAvLyBpZTEwIGhhcyBicm9rZW4gYHN1YmFycmF5YFxuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbn1cblxuZnVuY3Rpb24ga01heExlbmd0aCAoKSB7XG4gIHJldHVybiBCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVFxuICAgID8gMHg3ZmZmZmZmZlxuICAgIDogMHgzZmZmZmZmZlxufVxuXG4vKipcbiAqIENsYXNzOiBCdWZmZXJcbiAqID09PT09PT09PT09PT1cbiAqXG4gKiBUaGUgQnVmZmVyIGNvbnN0cnVjdG9yIHJldHVybnMgaW5zdGFuY2VzIG9mIGBVaW50OEFycmF5YCB0aGF0IGFyZSBhdWdtZW50ZWRcbiAqIHdpdGggZnVuY3Rpb24gcHJvcGVydGllcyBmb3IgYWxsIHRoZSBub2RlIGBCdWZmZXJgIEFQSSBmdW5jdGlvbnMuIFdlIHVzZVxuICogYFVpbnQ4QXJyYXlgIHNvIHRoYXQgc3F1YXJlIGJyYWNrZXQgbm90YXRpb24gd29ya3MgYXMgZXhwZWN0ZWQgLS0gaXQgcmV0dXJuc1xuICogYSBzaW5nbGUgb2N0ZXQuXG4gKlxuICogQnkgYXVnbWVudGluZyB0aGUgaW5zdGFuY2VzLCB3ZSBjYW4gYXZvaWQgbW9kaWZ5aW5nIHRoZSBgVWludDhBcnJheWBcbiAqIHByb3RvdHlwZS5cbiAqL1xuZnVuY3Rpb24gQnVmZmVyIChhcmcpIHtcbiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEJ1ZmZlcikpIHtcbiAgICAvLyBBdm9pZCBnb2luZyB0aHJvdWdoIGFuIEFyZ3VtZW50c0FkYXB0b3JUcmFtcG9saW5lIGluIHRoZSBjb21tb24gY2FzZS5cbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHJldHVybiBuZXcgQnVmZmVyKGFyZywgYXJndW1lbnRzWzFdKVxuICAgIHJldHVybiBuZXcgQnVmZmVyKGFyZylcbiAgfVxuXG4gIGlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzLmxlbmd0aCA9IDBcbiAgICB0aGlzLnBhcmVudCA9IHVuZGVmaW5lZFxuICB9XG5cbiAgLy8gQ29tbW9uIGNhc2UuXG4gIGlmICh0eXBlb2YgYXJnID09PSAnbnVtYmVyJykge1xuICAgIHJldHVybiBmcm9tTnVtYmVyKHRoaXMsIGFyZylcbiAgfVxuXG4gIC8vIFNsaWdodGx5IGxlc3MgY29tbW9uIGNhc2UuXG4gIGlmICh0eXBlb2YgYXJnID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBmcm9tU3RyaW5nKHRoaXMsIGFyZywgYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiAndXRmOCcpXG4gIH1cblxuICAvLyBVbnVzdWFsLlxuICByZXR1cm4gZnJvbU9iamVjdCh0aGlzLCBhcmcpXG59XG5cbmZ1bmN0aW9uIGZyb21OdW1iZXIgKHRoYXQsIGxlbmd0aCkge1xuICB0aGF0ID0gYWxsb2NhdGUodGhhdCwgbGVuZ3RoIDwgMCA/IDAgOiBjaGVja2VkKGxlbmd0aCkgfCAwKVxuICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgdGhhdFtpXSA9IDBcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRoYXRcbn1cblxuZnVuY3Rpb24gZnJvbVN0cmluZyAodGhhdCwgc3RyaW5nLCBlbmNvZGluZykge1xuICBpZiAodHlwZW9mIGVuY29kaW5nICE9PSAnc3RyaW5nJyB8fCBlbmNvZGluZyA9PT0gJycpIGVuY29kaW5nID0gJ3V0ZjgnXG5cbiAgLy8gQXNzdW1wdGlvbjogYnl0ZUxlbmd0aCgpIHJldHVybiB2YWx1ZSBpcyBhbHdheXMgPCBrTWF4TGVuZ3RoLlxuICB2YXIgbGVuZ3RoID0gYnl0ZUxlbmd0aChzdHJpbmcsIGVuY29kaW5nKSB8IDBcbiAgdGhhdCA9IGFsbG9jYXRlKHRoYXQsIGxlbmd0aClcblxuICB0aGF0LndyaXRlKHN0cmluZywgZW5jb2RpbmcpXG4gIHJldHVybiB0aGF0XG59XG5cbmZ1bmN0aW9uIGZyb21PYmplY3QgKHRoYXQsIG9iamVjdCkge1xuICBpZiAoQnVmZmVyLmlzQnVmZmVyKG9iamVjdCkpIHJldHVybiBmcm9tQnVmZmVyKHRoYXQsIG9iamVjdClcblxuICBpZiAoaXNBcnJheShvYmplY3QpKSByZXR1cm4gZnJvbUFycmF5KHRoYXQsIG9iamVjdClcblxuICBpZiAob2JqZWN0ID09IG51bGwpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdtdXN0IHN0YXJ0IHdpdGggbnVtYmVyLCBidWZmZXIsIGFycmF5IG9yIHN0cmluZycpXG4gIH1cblxuICBpZiAodHlwZW9mIEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJykge1xuICAgIGlmIChvYmplY3QuYnVmZmVyIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICAgIHJldHVybiBmcm9tVHlwZWRBcnJheSh0aGF0LCBvYmplY3QpXG4gICAgfVxuICAgIGlmIChvYmplY3QgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xuICAgICAgcmV0dXJuIGZyb21BcnJheUJ1ZmZlcih0aGF0LCBvYmplY3QpXG4gICAgfVxuICB9XG5cbiAgaWYgKG9iamVjdC5sZW5ndGgpIHJldHVybiBmcm9tQXJyYXlMaWtlKHRoYXQsIG9iamVjdClcblxuICByZXR1cm4gZnJvbUpzb25PYmplY3QodGhhdCwgb2JqZWN0KVxufVxuXG5mdW5jdGlvbiBmcm9tQnVmZmVyICh0aGF0LCBidWZmZXIpIHtcbiAgdmFyIGxlbmd0aCA9IGNoZWNrZWQoYnVmZmVyLmxlbmd0aCkgfCAwXG4gIHRoYXQgPSBhbGxvY2F0ZSh0aGF0LCBsZW5ndGgpXG4gIGJ1ZmZlci5jb3B5KHRoYXQsIDAsIDAsIGxlbmd0aClcbiAgcmV0dXJuIHRoYXRcbn1cblxuZnVuY3Rpb24gZnJvbUFycmF5ICh0aGF0LCBhcnJheSkge1xuICB2YXIgbGVuZ3RoID0gY2hlY2tlZChhcnJheS5sZW5ndGgpIHwgMFxuICB0aGF0ID0gYWxsb2NhdGUodGhhdCwgbGVuZ3RoKVxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7XG4gICAgdGhhdFtpXSA9IGFycmF5W2ldICYgMjU1XG4gIH1cbiAgcmV0dXJuIHRoYXRcbn1cblxuLy8gRHVwbGljYXRlIG9mIGZyb21BcnJheSgpIHRvIGtlZXAgZnJvbUFycmF5KCkgbW9ub21vcnBoaWMuXG5mdW5jdGlvbiBmcm9tVHlwZWRBcnJheSAodGhhdCwgYXJyYXkpIHtcbiAgdmFyIGxlbmd0aCA9IGNoZWNrZWQoYXJyYXkubGVuZ3RoKSB8IDBcbiAgdGhhdCA9IGFsbG9jYXRlKHRoYXQsIGxlbmd0aClcbiAgLy8gVHJ1bmNhdGluZyB0aGUgZWxlbWVudHMgaXMgcHJvYmFibHkgbm90IHdoYXQgcGVvcGxlIGV4cGVjdCBmcm9tIHR5cGVkXG4gIC8vIGFycmF5cyB3aXRoIEJZVEVTX1BFUl9FTEVNRU5UID4gMSBidXQgaXQncyBjb21wYXRpYmxlIHdpdGggdGhlIGJlaGF2aW9yXG4gIC8vIG9mIHRoZSBvbGQgQnVmZmVyIGNvbnN0cnVjdG9yLlxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7XG4gICAgdGhhdFtpXSA9IGFycmF5W2ldICYgMjU1XG4gIH1cbiAgcmV0dXJuIHRoYXRcbn1cblxuZnVuY3Rpb24gZnJvbUFycmF5QnVmZmVyICh0aGF0LCBhcnJheSkge1xuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICAvLyBSZXR1cm4gYW4gYXVnbWVudGVkIGBVaW50OEFycmF5YCBpbnN0YW5jZSwgZm9yIGJlc3QgcGVyZm9ybWFuY2VcbiAgICBhcnJheS5ieXRlTGVuZ3RoXG4gICAgdGhhdCA9IEJ1ZmZlci5fYXVnbWVudChuZXcgVWludDhBcnJheShhcnJheSkpXG4gIH0gZWxzZSB7XG4gICAgLy8gRmFsbGJhY2s6IFJldHVybiBhbiBvYmplY3QgaW5zdGFuY2Ugb2YgdGhlIEJ1ZmZlciBjbGFzc1xuICAgIHRoYXQgPSBmcm9tVHlwZWRBcnJheSh0aGF0LCBuZXcgVWludDhBcnJheShhcnJheSkpXG4gIH1cbiAgcmV0dXJuIHRoYXRcbn1cblxuZnVuY3Rpb24gZnJvbUFycmF5TGlrZSAodGhhdCwgYXJyYXkpIHtcbiAgdmFyIGxlbmd0aCA9IGNoZWNrZWQoYXJyYXkubGVuZ3RoKSB8IDBcbiAgdGhhdCA9IGFsbG9jYXRlKHRoYXQsIGxlbmd0aClcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkge1xuICAgIHRoYXRbaV0gPSBhcnJheVtpXSAmIDI1NVxuICB9XG4gIHJldHVybiB0aGF0XG59XG5cbi8vIERlc2VyaWFsaXplIHsgdHlwZTogJ0J1ZmZlcicsIGRhdGE6IFsxLDIsMywuLi5dIH0gaW50byBhIEJ1ZmZlciBvYmplY3QuXG4vLyBSZXR1cm5zIGEgemVyby1sZW5ndGggYnVmZmVyIGZvciBpbnB1dHMgdGhhdCBkb24ndCBjb25mb3JtIHRvIHRoZSBzcGVjLlxuZnVuY3Rpb24gZnJvbUpzb25PYmplY3QgKHRoYXQsIG9iamVjdCkge1xuICB2YXIgYXJyYXlcbiAgdmFyIGxlbmd0aCA9IDBcblxuICBpZiAob2JqZWN0LnR5cGUgPT09ICdCdWZmZXInICYmIGlzQXJyYXkob2JqZWN0LmRhdGEpKSB7XG4gICAgYXJyYXkgPSBvYmplY3QuZGF0YVxuICAgIGxlbmd0aCA9IGNoZWNrZWQoYXJyYXkubGVuZ3RoKSB8IDBcbiAgfVxuICB0aGF0ID0gYWxsb2NhdGUodGhhdCwgbGVuZ3RoKVxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDEpIHtcbiAgICB0aGF0W2ldID0gYXJyYXlbaV0gJiAyNTVcbiAgfVxuICByZXR1cm4gdGhhdFxufVxuXG5pZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgQnVmZmVyLnByb3RvdHlwZS5fX3Byb3RvX18gPSBVaW50OEFycmF5LnByb3RvdHlwZVxuICBCdWZmZXIuX19wcm90b19fID0gVWludDhBcnJheVxufSBlbHNlIHtcbiAgLy8gcHJlLXNldCBmb3IgdmFsdWVzIHRoYXQgbWF5IGV4aXN0IGluIHRoZSBmdXR1cmVcbiAgQnVmZmVyLnByb3RvdHlwZS5sZW5ndGggPSB1bmRlZmluZWRcbiAgQnVmZmVyLnByb3RvdHlwZS5wYXJlbnQgPSB1bmRlZmluZWRcbn1cblxuZnVuY3Rpb24gYWxsb2NhdGUgKHRoYXQsIGxlbmd0aCkge1xuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICAvLyBSZXR1cm4gYW4gYXVnbWVudGVkIGBVaW50OEFycmF5YCBpbnN0YW5jZSwgZm9yIGJlc3QgcGVyZm9ybWFuY2VcbiAgICB0aGF0ID0gQnVmZmVyLl9hdWdtZW50KG5ldyBVaW50OEFycmF5KGxlbmd0aCkpXG4gICAgdGhhdC5fX3Byb3RvX18gPSBCdWZmZXIucHJvdG90eXBlXG4gIH0gZWxzZSB7XG4gICAgLy8gRmFsbGJhY2s6IFJldHVybiBhbiBvYmplY3QgaW5zdGFuY2Ugb2YgdGhlIEJ1ZmZlciBjbGFzc1xuICAgIHRoYXQubGVuZ3RoID0gbGVuZ3RoXG4gICAgdGhhdC5faXNCdWZmZXIgPSB0cnVlXG4gIH1cblxuICB2YXIgZnJvbVBvb2wgPSBsZW5ndGggIT09IDAgJiYgbGVuZ3RoIDw9IEJ1ZmZlci5wb29sU2l6ZSA+Pj4gMVxuICBpZiAoZnJvbVBvb2wpIHRoYXQucGFyZW50ID0gcm9vdFBhcmVudFxuXG4gIHJldHVybiB0aGF0XG59XG5cbmZ1bmN0aW9uIGNoZWNrZWQgKGxlbmd0aCkge1xuICAvLyBOb3RlOiBjYW5ub3QgdXNlIGBsZW5ndGggPCBrTWF4TGVuZ3RoYCBoZXJlIGJlY2F1c2UgdGhhdCBmYWlscyB3aGVuXG4gIC8vIGxlbmd0aCBpcyBOYU4gKHdoaWNoIGlzIG90aGVyd2lzZSBjb2VyY2VkIHRvIHplcm8uKVxuICBpZiAobGVuZ3RoID49IGtNYXhMZW5ndGgoKSkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdBdHRlbXB0IHRvIGFsbG9jYXRlIEJ1ZmZlciBsYXJnZXIgdGhhbiBtYXhpbXVtICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICdzaXplOiAweCcgKyBrTWF4TGVuZ3RoKCkudG9TdHJpbmcoMTYpICsgJyBieXRlcycpXG4gIH1cbiAgcmV0dXJuIGxlbmd0aCB8IDBcbn1cblxuZnVuY3Rpb24gU2xvd0J1ZmZlciAoc3ViamVjdCwgZW5jb2RpbmcpIHtcbiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFNsb3dCdWZmZXIpKSByZXR1cm4gbmV3IFNsb3dCdWZmZXIoc3ViamVjdCwgZW5jb2RpbmcpXG5cbiAgdmFyIGJ1ZiA9IG5ldyBCdWZmZXIoc3ViamVjdCwgZW5jb2RpbmcpXG4gIGRlbGV0ZSBidWYucGFyZW50XG4gIHJldHVybiBidWZcbn1cblxuQnVmZmVyLmlzQnVmZmVyID0gZnVuY3Rpb24gaXNCdWZmZXIgKGIpIHtcbiAgcmV0dXJuICEhKGIgIT0gbnVsbCAmJiBiLl9pc0J1ZmZlcilcbn1cblxuQnVmZmVyLmNvbXBhcmUgPSBmdW5jdGlvbiBjb21wYXJlIChhLCBiKSB7XG4gIGlmICghQnVmZmVyLmlzQnVmZmVyKGEpIHx8ICFCdWZmZXIuaXNCdWZmZXIoYikpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudHMgbXVzdCBiZSBCdWZmZXJzJylcbiAgfVxuXG4gIGlmIChhID09PSBiKSByZXR1cm4gMFxuXG4gIHZhciB4ID0gYS5sZW5ndGhcbiAgdmFyIHkgPSBiLmxlbmd0aFxuXG4gIHZhciBpID0gMFxuICB2YXIgbGVuID0gTWF0aC5taW4oeCwgeSlcbiAgd2hpbGUgKGkgPCBsZW4pIHtcbiAgICBpZiAoYVtpXSAhPT0gYltpXSkgYnJlYWtcblxuICAgICsraVxuICB9XG5cbiAgaWYgKGkgIT09IGxlbikge1xuICAgIHggPSBhW2ldXG4gICAgeSA9IGJbaV1cbiAgfVxuXG4gIGlmICh4IDwgeSkgcmV0dXJuIC0xXG4gIGlmICh5IDwgeCkgcmV0dXJuIDFcbiAgcmV0dXJuIDBcbn1cblxuQnVmZmVyLmlzRW5jb2RpbmcgPSBmdW5jdGlvbiBpc0VuY29kaW5nIChlbmNvZGluZykge1xuICBzd2l0Y2ggKFN0cmluZyhlbmNvZGluZykudG9Mb3dlckNhc2UoKSkge1xuICAgIGNhc2UgJ2hleCc6XG4gICAgY2FzZSAndXRmOCc6XG4gICAgY2FzZSAndXRmLTgnOlxuICAgIGNhc2UgJ2FzY2lpJzpcbiAgICBjYXNlICdiaW5hcnknOlxuICAgIGNhc2UgJ2Jhc2U2NCc6XG4gICAgY2FzZSAncmF3JzpcbiAgICBjYXNlICd1Y3MyJzpcbiAgICBjYXNlICd1Y3MtMic6XG4gICAgY2FzZSAndXRmMTZsZSc6XG4gICAgY2FzZSAndXRmLTE2bGUnOlxuICAgICAgcmV0dXJuIHRydWVcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIGZhbHNlXG4gIH1cbn1cblxuQnVmZmVyLmNvbmNhdCA9IGZ1bmN0aW9uIGNvbmNhdCAobGlzdCwgbGVuZ3RoKSB7XG4gIGlmICghaXNBcnJheShsaXN0KSkgdGhyb3cgbmV3IFR5cGVFcnJvcignbGlzdCBhcmd1bWVudCBtdXN0IGJlIGFuIEFycmF5IG9mIEJ1ZmZlcnMuJylcblxuICBpZiAobGlzdC5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gbmV3IEJ1ZmZlcigwKVxuICB9XG5cbiAgdmFyIGlcbiAgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgbGVuZ3RoID0gMFxuICAgIGZvciAoaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICBsZW5ndGggKz0gbGlzdFtpXS5sZW5ndGhcbiAgICB9XG4gIH1cblxuICB2YXIgYnVmID0gbmV3IEJ1ZmZlcihsZW5ndGgpXG4gIHZhciBwb3MgPSAwXG4gIGZvciAoaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGl0ZW0gPSBsaXN0W2ldXG4gICAgaXRlbS5jb3B5KGJ1ZiwgcG9zKVxuICAgIHBvcyArPSBpdGVtLmxlbmd0aFxuICB9XG4gIHJldHVybiBidWZcbn1cblxuZnVuY3Rpb24gYnl0ZUxlbmd0aCAoc3RyaW5nLCBlbmNvZGluZykge1xuICBpZiAodHlwZW9mIHN0cmluZyAhPT0gJ3N0cmluZycpIHN0cmluZyA9ICcnICsgc3RyaW5nXG5cbiAgdmFyIGxlbiA9IHN0cmluZy5sZW5ndGhcbiAgaWYgKGxlbiA9PT0gMCkgcmV0dXJuIDBcblxuICAvLyBVc2UgYSBmb3IgbG9vcCB0byBhdm9pZCByZWN1cnNpb25cbiAgdmFyIGxvd2VyZWRDYXNlID0gZmFsc2VcbiAgZm9yICg7Oykge1xuICAgIHN3aXRjaCAoZW5jb2RpbmcpIHtcbiAgICAgIGNhc2UgJ2FzY2lpJzpcbiAgICAgIGNhc2UgJ2JpbmFyeSc6XG4gICAgICAvLyBEZXByZWNhdGVkXG4gICAgICBjYXNlICdyYXcnOlxuICAgICAgY2FzZSAncmF3cyc6XG4gICAgICAgIHJldHVybiBsZW5cbiAgICAgIGNhc2UgJ3V0ZjgnOlxuICAgICAgY2FzZSAndXRmLTgnOlxuICAgICAgICByZXR1cm4gdXRmOFRvQnl0ZXMoc3RyaW5nKS5sZW5ndGhcbiAgICAgIGNhc2UgJ3VjczInOlxuICAgICAgY2FzZSAndWNzLTInOlxuICAgICAgY2FzZSAndXRmMTZsZSc6XG4gICAgICBjYXNlICd1dGYtMTZsZSc6XG4gICAgICAgIHJldHVybiBsZW4gKiAyXG4gICAgICBjYXNlICdoZXgnOlxuICAgICAgICByZXR1cm4gbGVuID4+PiAxXG4gICAgICBjYXNlICdiYXNlNjQnOlxuICAgICAgICByZXR1cm4gYmFzZTY0VG9CeXRlcyhzdHJpbmcpLmxlbmd0aFxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWYgKGxvd2VyZWRDYXNlKSByZXR1cm4gdXRmOFRvQnl0ZXMoc3RyaW5nKS5sZW5ndGggLy8gYXNzdW1lIHV0ZjhcbiAgICAgICAgZW5jb2RpbmcgPSAoJycgKyBlbmNvZGluZykudG9Mb3dlckNhc2UoKVxuICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWVcbiAgICB9XG4gIH1cbn1cbkJ1ZmZlci5ieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aFxuXG5mdW5jdGlvbiBzbG93VG9TdHJpbmcgKGVuY29kaW5nLCBzdGFydCwgZW5kKSB7XG4gIHZhciBsb3dlcmVkQ2FzZSA9IGZhbHNlXG5cbiAgc3RhcnQgPSBzdGFydCB8IDBcbiAgZW5kID0gZW5kID09PSB1bmRlZmluZWQgfHwgZW5kID09PSBJbmZpbml0eSA/IHRoaXMubGVuZ3RoIDogZW5kIHwgMFxuXG4gIGlmICghZW5jb2RpbmcpIGVuY29kaW5nID0gJ3V0ZjgnXG4gIGlmIChzdGFydCA8IDApIHN0YXJ0ID0gMFxuICBpZiAoZW5kID4gdGhpcy5sZW5ndGgpIGVuZCA9IHRoaXMubGVuZ3RoXG4gIGlmIChlbmQgPD0gc3RhcnQpIHJldHVybiAnJ1xuXG4gIHdoaWxlICh0cnVlKSB7XG4gICAgc3dpdGNoIChlbmNvZGluZykge1xuICAgICAgY2FzZSAnaGV4JzpcbiAgICAgICAgcmV0dXJuIGhleFNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGNhc2UgJ3V0ZjgnOlxuICAgICAgY2FzZSAndXRmLTgnOlxuICAgICAgICByZXR1cm4gdXRmOFNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGNhc2UgJ2FzY2lpJzpcbiAgICAgICAgcmV0dXJuIGFzY2lpU2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgY2FzZSAnYmluYXJ5JzpcbiAgICAgICAgcmV0dXJuIGJpbmFyeVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGNhc2UgJ2Jhc2U2NCc6XG4gICAgICAgIHJldHVybiBiYXNlNjRTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICd1Y3MyJzpcbiAgICAgIGNhc2UgJ3Vjcy0yJzpcbiAgICAgIGNhc2UgJ3V0ZjE2bGUnOlxuICAgICAgY2FzZSAndXRmLTE2bGUnOlxuICAgICAgICByZXR1cm4gdXRmMTZsZVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlmIChsb3dlcmVkQ2FzZSkgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuY29kaW5nKVxuICAgICAgICBlbmNvZGluZyA9IChlbmNvZGluZyArICcnKS50b0xvd2VyQ2FzZSgpXG4gICAgICAgIGxvd2VyZWRDYXNlID0gdHJ1ZVxuICAgIH1cbiAgfVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcgKCkge1xuICB2YXIgbGVuZ3RoID0gdGhpcy5sZW5ndGggfCAwXG4gIGlmIChsZW5ndGggPT09IDApIHJldHVybiAnJ1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHV0ZjhTbGljZSh0aGlzLCAwLCBsZW5ndGgpXG4gIHJldHVybiBzbG93VG9TdHJpbmcuYXBwbHkodGhpcywgYXJndW1lbnRzKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIGVxdWFscyAoYikge1xuICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihiKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlcicpXG4gIGlmICh0aGlzID09PSBiKSByZXR1cm4gdHJ1ZVxuICByZXR1cm4gQnVmZmVyLmNvbXBhcmUodGhpcywgYikgPT09IDBcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5pbnNwZWN0ID0gZnVuY3Rpb24gaW5zcGVjdCAoKSB7XG4gIHZhciBzdHIgPSAnJ1xuICB2YXIgbWF4ID0gZXhwb3J0cy5JTlNQRUNUX01BWF9CWVRFU1xuICBpZiAodGhpcy5sZW5ndGggPiAwKSB7XG4gICAgc3RyID0gdGhpcy50b1N0cmluZygnaGV4JywgMCwgbWF4KS5tYXRjaCgvLnsyfS9nKS5qb2luKCcgJylcbiAgICBpZiAodGhpcy5sZW5ndGggPiBtYXgpIHN0ciArPSAnIC4uLiAnXG4gIH1cbiAgcmV0dXJuICc8QnVmZmVyICcgKyBzdHIgKyAnPidcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5jb21wYXJlID0gZnVuY3Rpb24gY29tcGFyZSAoYikge1xuICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihiKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlcicpXG4gIGlmICh0aGlzID09PSBiKSByZXR1cm4gMFxuICByZXR1cm4gQnVmZmVyLmNvbXBhcmUodGhpcywgYilcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5pbmRleE9mID0gZnVuY3Rpb24gaW5kZXhPZiAodmFsLCBieXRlT2Zmc2V0KSB7XG4gIGlmIChieXRlT2Zmc2V0ID4gMHg3ZmZmZmZmZikgYnl0ZU9mZnNldCA9IDB4N2ZmZmZmZmZcbiAgZWxzZSBpZiAoYnl0ZU9mZnNldCA8IC0weDgwMDAwMDAwKSBieXRlT2Zmc2V0ID0gLTB4ODAwMDAwMDBcbiAgYnl0ZU9mZnNldCA+Pj0gMFxuXG4gIGlmICh0aGlzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIC0xXG4gIGlmIChieXRlT2Zmc2V0ID49IHRoaXMubGVuZ3RoKSByZXR1cm4gLTFcblxuICAvLyBOZWdhdGl2ZSBvZmZzZXRzIHN0YXJ0IGZyb20gdGhlIGVuZCBvZiB0aGUgYnVmZmVyXG4gIGlmIChieXRlT2Zmc2V0IDwgMCkgYnl0ZU9mZnNldCA9IE1hdGgubWF4KHRoaXMubGVuZ3RoICsgYnl0ZU9mZnNldCwgMClcblxuICBpZiAodHlwZW9mIHZhbCA9PT0gJ3N0cmluZycpIHtcbiAgICBpZiAodmFsLmxlbmd0aCA9PT0gMCkgcmV0dXJuIC0xIC8vIHNwZWNpYWwgY2FzZTogbG9va2luZyBmb3IgZW1wdHkgc3RyaW5nIGFsd2F5cyBmYWlsc1xuICAgIHJldHVybiBTdHJpbmcucHJvdG90eXBlLmluZGV4T2YuY2FsbCh0aGlzLCB2YWwsIGJ5dGVPZmZzZXQpXG4gIH1cbiAgaWYgKEJ1ZmZlci5pc0J1ZmZlcih2YWwpKSB7XG4gICAgcmV0dXJuIGFycmF5SW5kZXhPZih0aGlzLCB2YWwsIGJ5dGVPZmZzZXQpXG4gIH1cbiAgaWYgKHR5cGVvZiB2YWwgPT09ICdudW1iZXInKSB7XG4gICAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUICYmIFVpbnQ4QXJyYXkucHJvdG90eXBlLmluZGV4T2YgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJldHVybiBVaW50OEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwodGhpcywgdmFsLCBieXRlT2Zmc2V0KVxuICAgIH1cbiAgICByZXR1cm4gYXJyYXlJbmRleE9mKHRoaXMsIFsgdmFsIF0sIGJ5dGVPZmZzZXQpXG4gIH1cblxuICBmdW5jdGlvbiBhcnJheUluZGV4T2YgKGFyciwgdmFsLCBieXRlT2Zmc2V0KSB7XG4gICAgdmFyIGZvdW5kSW5kZXggPSAtMVxuICAgIGZvciAodmFyIGkgPSAwOyBieXRlT2Zmc2V0ICsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGFycltieXRlT2Zmc2V0ICsgaV0gPT09IHZhbFtmb3VuZEluZGV4ID09PSAtMSA/IDAgOiBpIC0gZm91bmRJbmRleF0pIHtcbiAgICAgICAgaWYgKGZvdW5kSW5kZXggPT09IC0xKSBmb3VuZEluZGV4ID0gaVxuICAgICAgICBpZiAoaSAtIGZvdW5kSW5kZXggKyAxID09PSB2YWwubGVuZ3RoKSByZXR1cm4gYnl0ZU9mZnNldCArIGZvdW5kSW5kZXhcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZvdW5kSW5kZXggPSAtMVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gLTFcbiAgfVxuXG4gIHRocm93IG5ldyBUeXBlRXJyb3IoJ3ZhbCBtdXN0IGJlIHN0cmluZywgbnVtYmVyIG9yIEJ1ZmZlcicpXG59XG5cbi8vIGBnZXRgIGlzIGRlcHJlY2F0ZWRcbkJ1ZmZlci5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gZ2V0IChvZmZzZXQpIHtcbiAgY29uc29sZS5sb2coJy5nZXQoKSBpcyBkZXByZWNhdGVkLiBBY2Nlc3MgdXNpbmcgYXJyYXkgaW5kZXhlcyBpbnN0ZWFkLicpXG4gIHJldHVybiB0aGlzLnJlYWRVSW50OChvZmZzZXQpXG59XG5cbi8vIGBzZXRgIGlzIGRlcHJlY2F0ZWRcbkJ1ZmZlci5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gc2V0ICh2LCBvZmZzZXQpIHtcbiAgY29uc29sZS5sb2coJy5zZXQoKSBpcyBkZXByZWNhdGVkLiBBY2Nlc3MgdXNpbmcgYXJyYXkgaW5kZXhlcyBpbnN0ZWFkLicpXG4gIHJldHVybiB0aGlzLndyaXRlVUludDgodiwgb2Zmc2V0KVxufVxuXG5mdW5jdGlvbiBoZXhXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIG9mZnNldCA9IE51bWJlcihvZmZzZXQpIHx8IDBcbiAgdmFyIHJlbWFpbmluZyA9IGJ1Zi5sZW5ndGggLSBvZmZzZXRcbiAgaWYgKCFsZW5ndGgpIHtcbiAgICBsZW5ndGggPSByZW1haW5pbmdcbiAgfSBlbHNlIHtcbiAgICBsZW5ndGggPSBOdW1iZXIobGVuZ3RoKVxuICAgIGlmIChsZW5ndGggPiByZW1haW5pbmcpIHtcbiAgICAgIGxlbmd0aCA9IHJlbWFpbmluZ1xuICAgIH1cbiAgfVxuXG4gIC8vIG11c3QgYmUgYW4gZXZlbiBudW1iZXIgb2YgZGlnaXRzXG4gIHZhciBzdHJMZW4gPSBzdHJpbmcubGVuZ3RoXG4gIGlmIChzdHJMZW4gJSAyICE9PSAwKSB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgaGV4IHN0cmluZycpXG5cbiAgaWYgKGxlbmd0aCA+IHN0ckxlbiAvIDIpIHtcbiAgICBsZW5ndGggPSBzdHJMZW4gLyAyXG4gIH1cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIHZhciBwYXJzZWQgPSBwYXJzZUludChzdHJpbmcuc3Vic3RyKGkgKiAyLCAyKSwgMTYpXG4gICAgaWYgKGlzTmFOKHBhcnNlZCkpIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBoZXggc3RyaW5nJylcbiAgICBidWZbb2Zmc2V0ICsgaV0gPSBwYXJzZWRcbiAgfVxuICByZXR1cm4gaVxufVxuXG5mdW5jdGlvbiB1dGY4V3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gYmxpdEJ1ZmZlcih1dGY4VG9CeXRlcyhzdHJpbmcsIGJ1Zi5sZW5ndGggLSBvZmZzZXQpLCBidWYsIG9mZnNldCwgbGVuZ3RoKVxufVxuXG5mdW5jdGlvbiBhc2NpaVdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGJsaXRCdWZmZXIoYXNjaWlUb0J5dGVzKHN0cmluZyksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXG59XG5cbmZ1bmN0aW9uIGJpbmFyeVdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGFzY2lpV3JpdGUoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxufVxuXG5mdW5jdGlvbiBiYXNlNjRXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBibGl0QnVmZmVyKGJhc2U2NFRvQnl0ZXMoc3RyaW5nKSwgYnVmLCBvZmZzZXQsIGxlbmd0aClcbn1cblxuZnVuY3Rpb24gdWNzMldyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGJsaXRCdWZmZXIodXRmMTZsZVRvQnl0ZXMoc3RyaW5nLCBidWYubGVuZ3RoIC0gb2Zmc2V0KSwgYnVmLCBvZmZzZXQsIGxlbmd0aClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZSA9IGZ1bmN0aW9uIHdyaXRlIChzdHJpbmcsIG9mZnNldCwgbGVuZ3RoLCBlbmNvZGluZykge1xuICAvLyBCdWZmZXIjd3JpdGUoc3RyaW5nKVxuICBpZiAob2Zmc2V0ID09PSB1bmRlZmluZWQpIHtcbiAgICBlbmNvZGluZyA9ICd1dGY4J1xuICAgIGxlbmd0aCA9IHRoaXMubGVuZ3RoXG4gICAgb2Zmc2V0ID0gMFxuICAvLyBCdWZmZXIjd3JpdGUoc3RyaW5nLCBlbmNvZGluZylcbiAgfSBlbHNlIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCAmJiB0eXBlb2Ygb2Zmc2V0ID09PSAnc3RyaW5nJykge1xuICAgIGVuY29kaW5nID0gb2Zmc2V0XG4gICAgbGVuZ3RoID0gdGhpcy5sZW5ndGhcbiAgICBvZmZzZXQgPSAwXG4gIC8vIEJ1ZmZlciN3cml0ZShzdHJpbmcsIG9mZnNldFssIGxlbmd0aF1bLCBlbmNvZGluZ10pXG4gIH0gZWxzZSBpZiAoaXNGaW5pdGUob2Zmc2V0KSkge1xuICAgIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgICBpZiAoaXNGaW5pdGUobGVuZ3RoKSkge1xuICAgICAgbGVuZ3RoID0gbGVuZ3RoIHwgMFxuICAgICAgaWYgKGVuY29kaW5nID09PSB1bmRlZmluZWQpIGVuY29kaW5nID0gJ3V0ZjgnXG4gICAgfSBlbHNlIHtcbiAgICAgIGVuY29kaW5nID0gbGVuZ3RoXG4gICAgICBsZW5ndGggPSB1bmRlZmluZWRcbiAgICB9XG4gIC8vIGxlZ2FjeSB3cml0ZShzdHJpbmcsIGVuY29kaW5nLCBvZmZzZXQsIGxlbmd0aCkgLSByZW1vdmUgaW4gdjAuMTNcbiAgfSBlbHNlIHtcbiAgICB2YXIgc3dhcCA9IGVuY29kaW5nXG4gICAgZW5jb2RpbmcgPSBvZmZzZXRcbiAgICBvZmZzZXQgPSBsZW5ndGggfCAwXG4gICAgbGVuZ3RoID0gc3dhcFxuICB9XG5cbiAgdmFyIHJlbWFpbmluZyA9IHRoaXMubGVuZ3RoIC0gb2Zmc2V0XG4gIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCB8fCBsZW5ndGggPiByZW1haW5pbmcpIGxlbmd0aCA9IHJlbWFpbmluZ1xuXG4gIGlmICgoc3RyaW5nLmxlbmd0aCA+IDAgJiYgKGxlbmd0aCA8IDAgfHwgb2Zmc2V0IDwgMCkpIHx8IG9mZnNldCA+IHRoaXMubGVuZ3RoKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ2F0dGVtcHQgdG8gd3JpdGUgb3V0c2lkZSBidWZmZXIgYm91bmRzJylcbiAgfVxuXG4gIGlmICghZW5jb2RpbmcpIGVuY29kaW5nID0gJ3V0ZjgnXG5cbiAgdmFyIGxvd2VyZWRDYXNlID0gZmFsc2VcbiAgZm9yICg7Oykge1xuICAgIHN3aXRjaCAoZW5jb2RpbmcpIHtcbiAgICAgIGNhc2UgJ2hleCc6XG4gICAgICAgIHJldHVybiBoZXhXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBjYXNlICd1dGY4JzpcbiAgICAgIGNhc2UgJ3V0Zi04JzpcbiAgICAgICAgcmV0dXJuIHV0ZjhXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBjYXNlICdhc2NpaSc6XG4gICAgICAgIHJldHVybiBhc2NpaVdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cbiAgICAgIGNhc2UgJ2JpbmFyeSc6XG4gICAgICAgIHJldHVybiBiaW5hcnlXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBjYXNlICdiYXNlNjQnOlxuICAgICAgICAvLyBXYXJuaW5nOiBtYXhMZW5ndGggbm90IHRha2VuIGludG8gYWNjb3VudCBpbiBiYXNlNjRXcml0ZVxuICAgICAgICByZXR1cm4gYmFzZTY0V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgY2FzZSAndWNzMic6XG4gICAgICBjYXNlICd1Y3MtMic6XG4gICAgICBjYXNlICd1dGYxNmxlJzpcbiAgICAgIGNhc2UgJ3V0Zi0xNmxlJzpcbiAgICAgICAgcmV0dXJuIHVjczJXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAobG93ZXJlZENhc2UpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZylcbiAgICAgICAgZW5jb2RpbmcgPSAoJycgKyBlbmNvZGluZykudG9Mb3dlckNhc2UoKVxuICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWVcbiAgICB9XG4gIH1cbn1cblxuQnVmZmVyLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04gKCkge1xuICByZXR1cm4ge1xuICAgIHR5cGU6ICdCdWZmZXInLFxuICAgIGRhdGE6IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMuX2FyciB8fCB0aGlzLCAwKVxuICB9XG59XG5cbmZ1bmN0aW9uIGJhc2U2NFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgaWYgKHN0YXJ0ID09PSAwICYmIGVuZCA9PT0gYnVmLmxlbmd0aCkge1xuICAgIHJldHVybiBiYXNlNjQuZnJvbUJ5dGVBcnJheShidWYpXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGJhc2U2NC5mcm9tQnl0ZUFycmF5KGJ1Zi5zbGljZShzdGFydCwgZW5kKSlcbiAgfVxufVxuXG5mdW5jdGlvbiB1dGY4U2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICBlbmQgPSBNYXRoLm1pbihidWYubGVuZ3RoLCBlbmQpXG4gIHZhciByZXMgPSBbXVxuXG4gIHZhciBpID0gc3RhcnRcbiAgd2hpbGUgKGkgPCBlbmQpIHtcbiAgICB2YXIgZmlyc3RCeXRlID0gYnVmW2ldXG4gICAgdmFyIGNvZGVQb2ludCA9IG51bGxcbiAgICB2YXIgYnl0ZXNQZXJTZXF1ZW5jZSA9IChmaXJzdEJ5dGUgPiAweEVGKSA/IDRcbiAgICAgIDogKGZpcnN0Qnl0ZSA+IDB4REYpID8gM1xuICAgICAgOiAoZmlyc3RCeXRlID4gMHhCRikgPyAyXG4gICAgICA6IDFcblxuICAgIGlmIChpICsgYnl0ZXNQZXJTZXF1ZW5jZSA8PSBlbmQpIHtcbiAgICAgIHZhciBzZWNvbmRCeXRlLCB0aGlyZEJ5dGUsIGZvdXJ0aEJ5dGUsIHRlbXBDb2RlUG9pbnRcblxuICAgICAgc3dpdGNoIChieXRlc1BlclNlcXVlbmNlKSB7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICBpZiAoZmlyc3RCeXRlIDwgMHg4MCkge1xuICAgICAgICAgICAgY29kZVBvaW50ID0gZmlyc3RCeXRlXG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICBzZWNvbmRCeXRlID0gYnVmW2kgKyAxXVxuICAgICAgICAgIGlmICgoc2Vjb25kQnl0ZSAmIDB4QzApID09PSAweDgwKSB7XG4gICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4MUYpIDw8IDB4NiB8IChzZWNvbmRCeXRlICYgMHgzRilcbiAgICAgICAgICAgIGlmICh0ZW1wQ29kZVBvaW50ID4gMHg3Rikge1xuICAgICAgICAgICAgICBjb2RlUG9pbnQgPSB0ZW1wQ29kZVBvaW50XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICBzZWNvbmRCeXRlID0gYnVmW2kgKyAxXVxuICAgICAgICAgIHRoaXJkQnl0ZSA9IGJ1ZltpICsgMl1cbiAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCAmJiAodGhpcmRCeXRlICYgMHhDMCkgPT09IDB4ODApIHtcbiAgICAgICAgICAgIHRlbXBDb2RlUG9pbnQgPSAoZmlyc3RCeXRlICYgMHhGKSA8PCAweEMgfCAoc2Vjb25kQnl0ZSAmIDB4M0YpIDw8IDB4NiB8ICh0aGlyZEJ5dGUgJiAweDNGKVxuICAgICAgICAgICAgaWYgKHRlbXBDb2RlUG9pbnQgPiAweDdGRiAmJiAodGVtcENvZGVQb2ludCA8IDB4RDgwMCB8fCB0ZW1wQ29kZVBvaW50ID4gMHhERkZGKSkge1xuICAgICAgICAgICAgICBjb2RlUG9pbnQgPSB0ZW1wQ29kZVBvaW50XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgNDpcbiAgICAgICAgICBzZWNvbmRCeXRlID0gYnVmW2kgKyAxXVxuICAgICAgICAgIHRoaXJkQnl0ZSA9IGJ1ZltpICsgMl1cbiAgICAgICAgICBmb3VydGhCeXRlID0gYnVmW2kgKyAzXVxuICAgICAgICAgIGlmICgoc2Vjb25kQnl0ZSAmIDB4QzApID09PSAweDgwICYmICh0aGlyZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCAmJiAoZm91cnRoQnl0ZSAmIDB4QzApID09PSAweDgwKSB7XG4gICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4RikgPDwgMHgxMiB8IChzZWNvbmRCeXRlICYgMHgzRikgPDwgMHhDIHwgKHRoaXJkQnl0ZSAmIDB4M0YpIDw8IDB4NiB8IChmb3VydGhCeXRlICYgMHgzRilcbiAgICAgICAgICAgIGlmICh0ZW1wQ29kZVBvaW50ID4gMHhGRkZGICYmIHRlbXBDb2RlUG9pbnQgPCAweDExMDAwMCkge1xuICAgICAgICAgICAgICBjb2RlUG9pbnQgPSB0ZW1wQ29kZVBvaW50XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjb2RlUG9pbnQgPT09IG51bGwpIHtcbiAgICAgIC8vIHdlIGRpZCBub3QgZ2VuZXJhdGUgYSB2YWxpZCBjb2RlUG9pbnQgc28gaW5zZXJ0IGFcbiAgICAgIC8vIHJlcGxhY2VtZW50IGNoYXIgKFUrRkZGRCkgYW5kIGFkdmFuY2Ugb25seSAxIGJ5dGVcbiAgICAgIGNvZGVQb2ludCA9IDB4RkZGRFxuICAgICAgYnl0ZXNQZXJTZXF1ZW5jZSA9IDFcbiAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA+IDB4RkZGRikge1xuICAgICAgLy8gZW5jb2RlIHRvIHV0ZjE2IChzdXJyb2dhdGUgcGFpciBkYW5jZSlcbiAgICAgIGNvZGVQb2ludCAtPSAweDEwMDAwXG4gICAgICByZXMucHVzaChjb2RlUG9pbnQgPj4+IDEwICYgMHgzRkYgfCAweEQ4MDApXG4gICAgICBjb2RlUG9pbnQgPSAweERDMDAgfCBjb2RlUG9pbnQgJiAweDNGRlxuICAgIH1cblxuICAgIHJlcy5wdXNoKGNvZGVQb2ludClcbiAgICBpICs9IGJ5dGVzUGVyU2VxdWVuY2VcbiAgfVxuXG4gIHJldHVybiBkZWNvZGVDb2RlUG9pbnRzQXJyYXkocmVzKVxufVxuXG4vLyBCYXNlZCBvbiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yMjc0NzI3Mi82ODA3NDIsIHRoZSBicm93c2VyIHdpdGhcbi8vIHRoZSBsb3dlc3QgbGltaXQgaXMgQ2hyb21lLCB3aXRoIDB4MTAwMDAgYXJncy5cbi8vIFdlIGdvIDEgbWFnbml0dWRlIGxlc3MsIGZvciBzYWZldHlcbnZhciBNQVhfQVJHVU1FTlRTX0xFTkdUSCA9IDB4MTAwMFxuXG5mdW5jdGlvbiBkZWNvZGVDb2RlUG9pbnRzQXJyYXkgKGNvZGVQb2ludHMpIHtcbiAgdmFyIGxlbiA9IGNvZGVQb2ludHMubGVuZ3RoXG4gIGlmIChsZW4gPD0gTUFYX0FSR1VNRU5UU19MRU5HVEgpIHtcbiAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsIGNvZGVQb2ludHMpIC8vIGF2b2lkIGV4dHJhIHNsaWNlKClcbiAgfVxuXG4gIC8vIERlY29kZSBpbiBjaHVua3MgdG8gYXZvaWQgXCJjYWxsIHN0YWNrIHNpemUgZXhjZWVkZWRcIi5cbiAgdmFyIHJlcyA9ICcnXG4gIHZhciBpID0gMFxuICB3aGlsZSAoaSA8IGxlbikge1xuICAgIHJlcyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFxuICAgICAgU3RyaW5nLFxuICAgICAgY29kZVBvaW50cy5zbGljZShpLCBpICs9IE1BWF9BUkdVTUVOVFNfTEVOR1RIKVxuICAgIClcbiAgfVxuICByZXR1cm4gcmVzXG59XG5cbmZ1bmN0aW9uIGFzY2lpU2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICB2YXIgcmV0ID0gJydcbiAgZW5kID0gTWF0aC5taW4oYnVmLmxlbmd0aCwgZW5kKVxuXG4gIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgaSsrKSB7XG4gICAgcmV0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnVmW2ldICYgMHg3RilcbiAgfVxuICByZXR1cm4gcmV0XG59XG5cbmZ1bmN0aW9uIGJpbmFyeVNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIHJldCA9ICcnXG4gIGVuZCA9IE1hdGgubWluKGJ1Zi5sZW5ndGgsIGVuZClcblxuICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7IGkrKykge1xuICAgIHJldCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ1ZltpXSlcbiAgfVxuICByZXR1cm4gcmV0XG59XG5cbmZ1bmN0aW9uIGhleFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIGxlbiA9IGJ1Zi5sZW5ndGhcblxuICBpZiAoIXN0YXJ0IHx8IHN0YXJ0IDwgMCkgc3RhcnQgPSAwXG4gIGlmICghZW5kIHx8IGVuZCA8IDAgfHwgZW5kID4gbGVuKSBlbmQgPSBsZW5cblxuICB2YXIgb3V0ID0gJydcbiAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyBpKyspIHtcbiAgICBvdXQgKz0gdG9IZXgoYnVmW2ldKVxuICB9XG4gIHJldHVybiBvdXRcbn1cblxuZnVuY3Rpb24gdXRmMTZsZVNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIGJ5dGVzID0gYnVmLnNsaWNlKHN0YXJ0LCBlbmQpXG4gIHZhciByZXMgPSAnJ1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGJ5dGVzLmxlbmd0aDsgaSArPSAyKSB7XG4gICAgcmVzICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnl0ZXNbaV0gKyBieXRlc1tpICsgMV0gKiAyNTYpXG4gIH1cbiAgcmV0dXJuIHJlc1xufVxuXG5CdWZmZXIucHJvdG90eXBlLnNsaWNlID0gZnVuY3Rpb24gc2xpY2UgKHN0YXJ0LCBlbmQpIHtcbiAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoXG4gIHN0YXJ0ID0gfn5zdGFydFxuICBlbmQgPSBlbmQgPT09IHVuZGVmaW5lZCA/IGxlbiA6IH5+ZW5kXG5cbiAgaWYgKHN0YXJ0IDwgMCkge1xuICAgIHN0YXJ0ICs9IGxlblxuICAgIGlmIChzdGFydCA8IDApIHN0YXJ0ID0gMFxuICB9IGVsc2UgaWYgKHN0YXJ0ID4gbGVuKSB7XG4gICAgc3RhcnQgPSBsZW5cbiAgfVxuXG4gIGlmIChlbmQgPCAwKSB7XG4gICAgZW5kICs9IGxlblxuICAgIGlmIChlbmQgPCAwKSBlbmQgPSAwXG4gIH0gZWxzZSBpZiAoZW5kID4gbGVuKSB7XG4gICAgZW5kID0gbGVuXG4gIH1cblxuICBpZiAoZW5kIDwgc3RhcnQpIGVuZCA9IHN0YXJ0XG5cbiAgdmFyIG5ld0J1ZlxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICBuZXdCdWYgPSBCdWZmZXIuX2F1Z21lbnQodGhpcy5zdWJhcnJheShzdGFydCwgZW5kKSlcbiAgfSBlbHNlIHtcbiAgICB2YXIgc2xpY2VMZW4gPSBlbmQgLSBzdGFydFxuICAgIG5ld0J1ZiA9IG5ldyBCdWZmZXIoc2xpY2VMZW4sIHVuZGVmaW5lZClcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNsaWNlTGVuOyBpKyspIHtcbiAgICAgIG5ld0J1ZltpXSA9IHRoaXNbaSArIHN0YXJ0XVxuICAgIH1cbiAgfVxuXG4gIGlmIChuZXdCdWYubGVuZ3RoKSBuZXdCdWYucGFyZW50ID0gdGhpcy5wYXJlbnQgfHwgdGhpc1xuXG4gIHJldHVybiBuZXdCdWZcbn1cblxuLypcbiAqIE5lZWQgdG8gbWFrZSBzdXJlIHRoYXQgYnVmZmVyIGlzbid0IHRyeWluZyB0byB3cml0ZSBvdXQgb2YgYm91bmRzLlxuICovXG5mdW5jdGlvbiBjaGVja09mZnNldCAob2Zmc2V0LCBleHQsIGxlbmd0aCkge1xuICBpZiAoKG9mZnNldCAlIDEpICE9PSAwIHx8IG9mZnNldCA8IDApIHRocm93IG5ldyBSYW5nZUVycm9yKCdvZmZzZXQgaXMgbm90IHVpbnQnKVxuICBpZiAob2Zmc2V0ICsgZXh0ID4gbGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignVHJ5aW5nIHRvIGFjY2VzcyBiZXlvbmQgYnVmZmVyIGxlbmd0aCcpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnRMRSA9IGZ1bmN0aW9uIHJlYWRVSW50TEUgKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aClcblxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXRdXG4gIHZhciBtdWwgPSAxXG4gIHZhciBpID0gMFxuICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHZhbCArPSB0aGlzW29mZnNldCArIGldICogbXVsXG4gIH1cblxuICByZXR1cm4gdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnRCRSA9IGZ1bmN0aW9uIHJlYWRVSW50QkUgKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG4gIH1cblxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXQgKyAtLWJ5dGVMZW5ndGhdXG4gIHZhciBtdWwgPSAxXG4gIHdoaWxlIChieXRlTGVuZ3RoID4gMCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHZhbCArPSB0aGlzW29mZnNldCArIC0tYnl0ZUxlbmd0aF0gKiBtdWxcbiAgfVxuXG4gIHJldHVybiB2YWxcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDggPSBmdW5jdGlvbiByZWFkVUludDggKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAxLCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIHRoaXNbb2Zmc2V0XVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MTZMRSA9IGZ1bmN0aW9uIHJlYWRVSW50MTZMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gdGhpc1tvZmZzZXRdIHwgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDE2QkUgPSBmdW5jdGlvbiByZWFkVUludDE2QkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuICh0aGlzW29mZnNldF0gPDwgOCkgfCB0aGlzW29mZnNldCArIDFdXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQzMkxFID0gZnVuY3Rpb24gcmVhZFVJbnQzMkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG5cbiAgcmV0dXJuICgodGhpc1tvZmZzZXRdKSB8XG4gICAgICAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KSB8XG4gICAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCAxNikpICtcbiAgICAgICh0aGlzW29mZnNldCArIDNdICogMHgxMDAwMDAwKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MzJCRSA9IGZ1bmN0aW9uIHJlYWRVSW50MzJCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXG4gIHJldHVybiAodGhpc1tvZmZzZXRdICogMHgxMDAwMDAwKSArXG4gICAgKCh0aGlzW29mZnNldCArIDFdIDw8IDE2KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgOCkgfFxuICAgIHRoaXNbb2Zmc2V0ICsgM10pXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludExFID0gZnVuY3Rpb24gcmVhZEludExFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG5cbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0XVxuICB2YXIgbXVsID0gMVxuICB2YXIgaSA9IDBcbiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyBpXSAqIG11bFxuICB9XG4gIG11bCAqPSAweDgwXG5cbiAgaWYgKHZhbCA+PSBtdWwpIHZhbCAtPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aClcblxuICByZXR1cm4gdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludEJFID0gZnVuY3Rpb24gcmVhZEludEJFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG5cbiAgdmFyIGkgPSBieXRlTGVuZ3RoXG4gIHZhciBtdWwgPSAxXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldCArIC0taV1cbiAgd2hpbGUgKGkgPiAwICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgLS1pXSAqIG11bFxuICB9XG4gIG11bCAqPSAweDgwXG5cbiAgaWYgKHZhbCA+PSBtdWwpIHZhbCAtPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aClcblxuICByZXR1cm4gdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDggPSBmdW5jdGlvbiByZWFkSW50OCAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDEsIHRoaXMubGVuZ3RoKVxuICBpZiAoISh0aGlzW29mZnNldF0gJiAweDgwKSkgcmV0dXJuICh0aGlzW29mZnNldF0pXG4gIHJldHVybiAoKDB4ZmYgLSB0aGlzW29mZnNldF0gKyAxKSAqIC0xKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQxNkxFID0gZnVuY3Rpb24gcmVhZEludDE2TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aClcbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0XSB8ICh0aGlzW29mZnNldCArIDFdIDw8IDgpXG4gIHJldHVybiAodmFsICYgMHg4MDAwKSA/IHZhbCB8IDB4RkZGRjAwMDAgOiB2YWxcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MTZCRSA9IGZ1bmN0aW9uIHJlYWRJbnQxNkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldCArIDFdIHwgKHRoaXNbb2Zmc2V0XSA8PCA4KVxuICByZXR1cm4gKHZhbCAmIDB4ODAwMCkgPyB2YWwgfCAweEZGRkYwMDAwIDogdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDMyTEUgPSBmdW5jdGlvbiByZWFkSW50MzJMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXG4gIHJldHVybiAodGhpc1tvZmZzZXRdKSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOCkgfFxuICAgICh0aGlzW29mZnNldCArIDJdIDw8IDE2KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgM10gPDwgMjQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDMyQkUgPSBmdW5jdGlvbiByZWFkSW50MzJCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXG4gIHJldHVybiAodGhpc1tvZmZzZXRdIDw8IDI0KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgMTYpIHxcbiAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCA4KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgM10pXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEZsb2F0TEUgPSBmdW5jdGlvbiByZWFkRmxvYXRMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgdHJ1ZSwgMjMsIDQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEZsb2F0QkUgPSBmdW5jdGlvbiByZWFkRmxvYXRCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgZmFsc2UsIDIzLCA0KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWREb3VibGVMRSA9IGZ1bmN0aW9uIHJlYWREb3VibGVMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDgsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgdHJ1ZSwgNTIsIDgpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZERvdWJsZUJFID0gZnVuY3Rpb24gcmVhZERvdWJsZUJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgOCwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiBpZWVlNzU0LnJlYWQodGhpcywgb2Zmc2V0LCBmYWxzZSwgNTIsIDgpXG59XG5cbmZ1bmN0aW9uIGNoZWNrSW50IChidWYsIHZhbHVlLCBvZmZzZXQsIGV4dCwgbWF4LCBtaW4pIHtcbiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYnVmKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignYnVmZmVyIG11c3QgYmUgYSBCdWZmZXIgaW5zdGFuY2UnKVxuICBpZiAodmFsdWUgPiBtYXggfHwgdmFsdWUgPCBtaW4pIHRocm93IG5ldyBSYW5nZUVycm9yKCd2YWx1ZSBpcyBvdXQgb2YgYm91bmRzJylcbiAgaWYgKG9mZnNldCArIGV4dCA+IGJ1Zi5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdpbmRleCBvdXQgb2YgcmFuZ2UnKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludExFID0gZnVuY3Rpb24gd3JpdGVVSW50TEUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKSwgMClcblxuICB2YXIgbXVsID0gMVxuICB2YXIgaSA9IDBcbiAgdGhpc1tvZmZzZXRdID0gdmFsdWUgJiAweEZGXG4gIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdGhpc1tvZmZzZXQgKyBpXSA9ICh2YWx1ZSAvIG11bCkgJiAweEZGXG4gIH1cblxuICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludEJFID0gZnVuY3Rpb24gd3JpdGVVSW50QkUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKSwgMClcblxuICB2YXIgaSA9IGJ5dGVMZW5ndGggLSAxXG4gIHZhciBtdWwgPSAxXG4gIHRoaXNbb2Zmc2V0ICsgaV0gPSB2YWx1ZSAmIDB4RkZcbiAgd2hpbGUgKC0taSA+PSAwICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdGhpc1tvZmZzZXQgKyBpXSA9ICh2YWx1ZSAvIG11bCkgJiAweEZGXG4gIH1cblxuICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludDggPSBmdW5jdGlvbiB3cml0ZVVJbnQ4ICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDEsIDB4ZmYsIDApXG4gIGlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHZhbHVlID0gTWF0aC5mbG9vcih2YWx1ZSlcbiAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgcmV0dXJuIG9mZnNldCArIDFcbn1cblxuZnVuY3Rpb24gb2JqZWN0V3JpdGVVSW50MTYgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuKSB7XG4gIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMHhmZmZmICsgdmFsdWUgKyAxXG4gIGZvciAodmFyIGkgPSAwLCBqID0gTWF0aC5taW4oYnVmLmxlbmd0aCAtIG9mZnNldCwgMik7IGkgPCBqOyBpKyspIHtcbiAgICBidWZbb2Zmc2V0ICsgaV0gPSAodmFsdWUgJiAoMHhmZiA8PCAoOCAqIChsaXR0bGVFbmRpYW4gPyBpIDogMSAtIGkpKSkpID4+PlxuICAgICAgKGxpdHRsZUVuZGlhbiA/IGkgOiAxIC0gaSkgKiA4XG4gIH1cbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQxNkxFID0gZnVuY3Rpb24gd3JpdGVVSW50MTZMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweGZmZmYsIDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOClcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQxNih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyAyXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MTZCRSA9IGZ1bmN0aW9uIHdyaXRlVUludDE2QkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHhmZmZmLCAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDgpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDJcbn1cblxuZnVuY3Rpb24gb2JqZWN0V3JpdGVVSW50MzIgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuKSB7XG4gIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMHhmZmZmZmZmZiArIHZhbHVlICsgMVxuICBmb3IgKHZhciBpID0gMCwgaiA9IE1hdGgubWluKGJ1Zi5sZW5ndGggLSBvZmZzZXQsIDQpOyBpIDwgajsgaSsrKSB7XG4gICAgYnVmW29mZnNldCArIGldID0gKHZhbHVlID4+PiAobGl0dGxlRW5kaWFuID8gaSA6IDMgLSBpKSAqIDgpICYgMHhmZlxuICB9XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MzJMRSA9IGZ1bmN0aW9uIHdyaXRlVUludDMyTEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHhmZmZmZmZmZiwgMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSA+Pj4gMjQpXG4gICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gMTYpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOClcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDRcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQzMkJFID0gZnVuY3Rpb24gd3JpdGVVSW50MzJCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweGZmZmZmZmZmLCAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDI0KVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDE2KVxuICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDgpXG4gICAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MzIodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDRcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludExFID0gZnVuY3Rpb24gd3JpdGVJbnRMRSAodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSB7XG4gICAgdmFyIGxpbWl0ID0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGggLSAxKVxuXG4gICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbGltaXQgLSAxLCAtbGltaXQpXG4gIH1cblxuICB2YXIgaSA9IDBcbiAgdmFyIG11bCA9IDFcbiAgdmFyIHN1YiA9IHZhbHVlIDwgMCA/IDEgOiAwXG4gIHRoaXNbb2Zmc2V0XSA9IHZhbHVlICYgMHhGRlxuICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAoKHZhbHVlIC8gbXVsKSA+PiAwKSAtIHN1YiAmIDB4RkZcbiAgfVxuXG4gIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnRCRSA9IGZ1bmN0aW9uIHdyaXRlSW50QkUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIHZhciBsaW1pdCA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoIC0gMSlcblxuICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIGxpbWl0IC0gMSwgLWxpbWl0KVxuICB9XG5cbiAgdmFyIGkgPSBieXRlTGVuZ3RoIC0gMVxuICB2YXIgbXVsID0gMVxuICB2YXIgc3ViID0gdmFsdWUgPCAwID8gMSA6IDBcbiAgdGhpc1tvZmZzZXQgKyBpXSA9IHZhbHVlICYgMHhGRlxuICB3aGlsZSAoLS1pID49IDAgJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB0aGlzW29mZnNldCArIGldID0gKCh2YWx1ZSAvIG11bCkgPj4gMCkgLSBzdWIgJiAweEZGXG4gIH1cblxuICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50OCA9IGZ1bmN0aW9uIHdyaXRlSW50OCAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAxLCAweDdmLCAtMHg4MClcbiAgaWYgKCFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkgdmFsdWUgPSBNYXRoLmZsb29yKHZhbHVlKVxuICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmYgKyB2YWx1ZSArIDFcbiAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgcmV0dXJuIG9mZnNldCArIDFcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDE2TEUgPSBmdW5jdGlvbiB3cml0ZUludDE2TEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHg3ZmZmLCAtMHg4MDAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgMlxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50MTZCRSA9IGZ1bmN0aW9uIHdyaXRlSW50MTZCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweDdmZmYsIC0weDgwMDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gOClcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlICYgMHhmZilcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQxNih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgMlxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50MzJMRSA9IGZ1bmN0aW9uIHdyaXRlSW50MzJMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweDdmZmZmZmZmLCAtMHg4MDAwMDAwMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDE2KVxuICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgPj4+IDI0KVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDRcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDMyQkUgPSBmdW5jdGlvbiB3cml0ZUludDMyQkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHg3ZmZmZmZmZiwgLTB4ODAwMDAwMDApXG4gIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMHhmZmZmZmZmZiArIHZhbHVlICsgMVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDI0KVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDE2KVxuICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDgpXG4gICAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MzIodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDRcbn1cblxuZnVuY3Rpb24gY2hlY2tJRUVFNzU0IChidWYsIHZhbHVlLCBvZmZzZXQsIGV4dCwgbWF4LCBtaW4pIHtcbiAgaWYgKHZhbHVlID4gbWF4IHx8IHZhbHVlIDwgbWluKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcigndmFsdWUgaXMgb3V0IG9mIGJvdW5kcycpXG4gIGlmIChvZmZzZXQgKyBleHQgPiBidWYubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignaW5kZXggb3V0IG9mIHJhbmdlJylcbiAgaWYgKG9mZnNldCA8IDApIHRocm93IG5ldyBSYW5nZUVycm9yKCdpbmRleCBvdXQgb2YgcmFuZ2UnKVxufVxuXG5mdW5jdGlvbiB3cml0ZUZsb2F0IChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIGNoZWNrSUVFRTc1NChidWYsIHZhbHVlLCBvZmZzZXQsIDQsIDMuNDAyODIzNDY2Mzg1Mjg4NmUrMzgsIC0zLjQwMjgyMzQ2NjM4NTI4ODZlKzM4KVxuICB9XG4gIGllZWU3NTQud3JpdGUoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIDIzLCA0KVxuICByZXR1cm4gb2Zmc2V0ICsgNFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlRmxvYXRMRSA9IGZ1bmN0aW9uIHdyaXRlRmxvYXRMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgcmV0dXJuIHdyaXRlRmxvYXQodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSwgbm9Bc3NlcnQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVGbG9hdEJFID0gZnVuY3Rpb24gd3JpdGVGbG9hdEJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICByZXR1cm4gd3JpdGVGbG9hdCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSwgbm9Bc3NlcnQpXG59XG5cbmZ1bmN0aW9uIHdyaXRlRG91YmxlIChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIGNoZWNrSUVFRTc1NChidWYsIHZhbHVlLCBvZmZzZXQsIDgsIDEuNzk3NjkzMTM0ODYyMzE1N0UrMzA4LCAtMS43OTc2OTMxMzQ4NjIzMTU3RSszMDgpXG4gIH1cbiAgaWVlZTc1NC53cml0ZShidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgNTIsIDgpXG4gIHJldHVybiBvZmZzZXQgKyA4XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVEb3VibGVMRSA9IGZ1bmN0aW9uIHdyaXRlRG91YmxlTEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHJldHVybiB3cml0ZURvdWJsZSh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlLCBub0Fzc2VydClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZURvdWJsZUJFID0gZnVuY3Rpb24gd3JpdGVEb3VibGVCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgcmV0dXJuIHdyaXRlRG91YmxlKHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlLCBub0Fzc2VydClcbn1cblxuLy8gY29weSh0YXJnZXRCdWZmZXIsIHRhcmdldFN0YXJ0PTAsIHNvdXJjZVN0YXJ0PTAsIHNvdXJjZUVuZD1idWZmZXIubGVuZ3RoKVxuQnVmZmVyLnByb3RvdHlwZS5jb3B5ID0gZnVuY3Rpb24gY29weSAodGFyZ2V0LCB0YXJnZXRTdGFydCwgc3RhcnQsIGVuZCkge1xuICBpZiAoIXN0YXJ0KSBzdGFydCA9IDBcbiAgaWYgKCFlbmQgJiYgZW5kICE9PSAwKSBlbmQgPSB0aGlzLmxlbmd0aFxuICBpZiAodGFyZ2V0U3RhcnQgPj0gdGFyZ2V0Lmxlbmd0aCkgdGFyZ2V0U3RhcnQgPSB0YXJnZXQubGVuZ3RoXG4gIGlmICghdGFyZ2V0U3RhcnQpIHRhcmdldFN0YXJ0ID0gMFxuICBpZiAoZW5kID4gMCAmJiBlbmQgPCBzdGFydCkgZW5kID0gc3RhcnRcblxuICAvLyBDb3B5IDAgYnl0ZXM7IHdlJ3JlIGRvbmVcbiAgaWYgKGVuZCA9PT0gc3RhcnQpIHJldHVybiAwXG4gIGlmICh0YXJnZXQubGVuZ3RoID09PSAwIHx8IHRoaXMubGVuZ3RoID09PSAwKSByZXR1cm4gMFxuXG4gIC8vIEZhdGFsIGVycm9yIGNvbmRpdGlvbnNcbiAgaWYgKHRhcmdldFN0YXJ0IDwgMCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCd0YXJnZXRTdGFydCBvdXQgb2YgYm91bmRzJylcbiAgfVxuICBpZiAoc3RhcnQgPCAwIHx8IHN0YXJ0ID49IHRoaXMubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignc291cmNlU3RhcnQgb3V0IG9mIGJvdW5kcycpXG4gIGlmIChlbmQgPCAwKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignc291cmNlRW5kIG91dCBvZiBib3VuZHMnKVxuXG4gIC8vIEFyZSB3ZSBvb2I/XG4gIGlmIChlbmQgPiB0aGlzLmxlbmd0aCkgZW5kID0gdGhpcy5sZW5ndGhcbiAgaWYgKHRhcmdldC5sZW5ndGggLSB0YXJnZXRTdGFydCA8IGVuZCAtIHN0YXJ0KSB7XG4gICAgZW5kID0gdGFyZ2V0Lmxlbmd0aCAtIHRhcmdldFN0YXJ0ICsgc3RhcnRcbiAgfVxuXG4gIHZhciBsZW4gPSBlbmQgLSBzdGFydFxuICB2YXIgaVxuXG4gIGlmICh0aGlzID09PSB0YXJnZXQgJiYgc3RhcnQgPCB0YXJnZXRTdGFydCAmJiB0YXJnZXRTdGFydCA8IGVuZCkge1xuICAgIC8vIGRlc2NlbmRpbmcgY29weSBmcm9tIGVuZFxuICAgIGZvciAoaSA9IGxlbiAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICB0YXJnZXRbaSArIHRhcmdldFN0YXJ0XSA9IHRoaXNbaSArIHN0YXJ0XVxuICAgIH1cbiAgfSBlbHNlIGlmIChsZW4gPCAxMDAwIHx8ICFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIC8vIGFzY2VuZGluZyBjb3B5IGZyb20gc3RhcnRcbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIHRhcmdldFtpICsgdGFyZ2V0U3RhcnRdID0gdGhpc1tpICsgc3RhcnRdXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHRhcmdldC5fc2V0KHRoaXMuc3ViYXJyYXkoc3RhcnQsIHN0YXJ0ICsgbGVuKSwgdGFyZ2V0U3RhcnQpXG4gIH1cblxuICByZXR1cm4gbGVuXG59XG5cbi8vIGZpbGwodmFsdWUsIHN0YXJ0PTAsIGVuZD1idWZmZXIubGVuZ3RoKVxuQnVmZmVyLnByb3RvdHlwZS5maWxsID0gZnVuY3Rpb24gZmlsbCAodmFsdWUsIHN0YXJ0LCBlbmQpIHtcbiAgaWYgKCF2YWx1ZSkgdmFsdWUgPSAwXG4gIGlmICghc3RhcnQpIHN0YXJ0ID0gMFxuICBpZiAoIWVuZCkgZW5kID0gdGhpcy5sZW5ndGhcblxuICBpZiAoZW5kIDwgc3RhcnQpIHRocm93IG5ldyBSYW5nZUVycm9yKCdlbmQgPCBzdGFydCcpXG5cbiAgLy8gRmlsbCAwIGJ5dGVzOyB3ZSdyZSBkb25lXG4gIGlmIChlbmQgPT09IHN0YXJ0KSByZXR1cm5cbiAgaWYgKHRoaXMubGVuZ3RoID09PSAwKSByZXR1cm5cblxuICBpZiAoc3RhcnQgPCAwIHx8IHN0YXJ0ID49IHRoaXMubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignc3RhcnQgb3V0IG9mIGJvdW5kcycpXG4gIGlmIChlbmQgPCAwIHx8IGVuZCA+IHRoaXMubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignZW5kIG91dCBvZiBib3VuZHMnKVxuXG4gIHZhciBpXG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSB7XG4gICAgZm9yIChpID0gc3RhcnQ7IGkgPCBlbmQ7IGkrKykge1xuICAgICAgdGhpc1tpXSA9IHZhbHVlXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHZhciBieXRlcyA9IHV0ZjhUb0J5dGVzKHZhbHVlLnRvU3RyaW5nKCkpXG4gICAgdmFyIGxlbiA9IGJ5dGVzLmxlbmd0aFxuICAgIGZvciAoaSA9IHN0YXJ0OyBpIDwgZW5kOyBpKyspIHtcbiAgICAgIHRoaXNbaV0gPSBieXRlc1tpICUgbGVuXVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0aGlzXG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBgQXJyYXlCdWZmZXJgIHdpdGggdGhlICpjb3BpZWQqIG1lbW9yeSBvZiB0aGUgYnVmZmVyIGluc3RhbmNlLlxuICogQWRkZWQgaW4gTm9kZSAwLjEyLiBPbmx5IGF2YWlsYWJsZSBpbiBicm93c2VycyB0aGF0IHN1cHBvcnQgQXJyYXlCdWZmZXIuXG4gKi9cbkJ1ZmZlci5wcm90b3R5cGUudG9BcnJheUJ1ZmZlciA9IGZ1bmN0aW9uIHRvQXJyYXlCdWZmZXIgKCkge1xuICBpZiAodHlwZW9mIFVpbnQ4QXJyYXkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgICByZXR1cm4gKG5ldyBCdWZmZXIodGhpcykpLmJ1ZmZlclxuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgYnVmID0gbmV3IFVpbnQ4QXJyYXkodGhpcy5sZW5ndGgpXG4gICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gYnVmLmxlbmd0aDsgaSA8IGxlbjsgaSArPSAxKSB7XG4gICAgICAgIGJ1ZltpXSA9IHRoaXNbaV1cbiAgICAgIH1cbiAgICAgIHJldHVybiBidWYuYnVmZmVyXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0J1ZmZlci50b0FycmF5QnVmZmVyIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBicm93c2VyJylcbiAgfVxufVxuXG4vLyBIRUxQRVIgRlVOQ1RJT05TXG4vLyA9PT09PT09PT09PT09PT09XG5cbnZhciBCUCA9IEJ1ZmZlci5wcm90b3R5cGVcblxuLyoqXG4gKiBBdWdtZW50IGEgVWludDhBcnJheSAqaW5zdGFuY2UqIChub3QgdGhlIFVpbnQ4QXJyYXkgY2xhc3MhKSB3aXRoIEJ1ZmZlciBtZXRob2RzXG4gKi9cbkJ1ZmZlci5fYXVnbWVudCA9IGZ1bmN0aW9uIF9hdWdtZW50IChhcnIpIHtcbiAgYXJyLmNvbnN0cnVjdG9yID0gQnVmZmVyXG4gIGFyci5faXNCdWZmZXIgPSB0cnVlXG5cbiAgLy8gc2F2ZSByZWZlcmVuY2UgdG8gb3JpZ2luYWwgVWludDhBcnJheSBzZXQgbWV0aG9kIGJlZm9yZSBvdmVyd3JpdGluZ1xuICBhcnIuX3NldCA9IGFyci5zZXRcblxuICAvLyBkZXByZWNhdGVkXG4gIGFyci5nZXQgPSBCUC5nZXRcbiAgYXJyLnNldCA9IEJQLnNldFxuXG4gIGFyci53cml0ZSA9IEJQLndyaXRlXG4gIGFyci50b1N0cmluZyA9IEJQLnRvU3RyaW5nXG4gIGFyci50b0xvY2FsZVN0cmluZyA9IEJQLnRvU3RyaW5nXG4gIGFyci50b0pTT04gPSBCUC50b0pTT05cbiAgYXJyLmVxdWFscyA9IEJQLmVxdWFsc1xuICBhcnIuY29tcGFyZSA9IEJQLmNvbXBhcmVcbiAgYXJyLmluZGV4T2YgPSBCUC5pbmRleE9mXG4gIGFyci5jb3B5ID0gQlAuY29weVxuICBhcnIuc2xpY2UgPSBCUC5zbGljZVxuICBhcnIucmVhZFVJbnRMRSA9IEJQLnJlYWRVSW50TEVcbiAgYXJyLnJlYWRVSW50QkUgPSBCUC5yZWFkVUludEJFXG4gIGFyci5yZWFkVUludDggPSBCUC5yZWFkVUludDhcbiAgYXJyLnJlYWRVSW50MTZMRSA9IEJQLnJlYWRVSW50MTZMRVxuICBhcnIucmVhZFVJbnQxNkJFID0gQlAucmVhZFVJbnQxNkJFXG4gIGFyci5yZWFkVUludDMyTEUgPSBCUC5yZWFkVUludDMyTEVcbiAgYXJyLnJlYWRVSW50MzJCRSA9IEJQLnJlYWRVSW50MzJCRVxuICBhcnIucmVhZEludExFID0gQlAucmVhZEludExFXG4gIGFyci5yZWFkSW50QkUgPSBCUC5yZWFkSW50QkVcbiAgYXJyLnJlYWRJbnQ4ID0gQlAucmVhZEludDhcbiAgYXJyLnJlYWRJbnQxNkxFID0gQlAucmVhZEludDE2TEVcbiAgYXJyLnJlYWRJbnQxNkJFID0gQlAucmVhZEludDE2QkVcbiAgYXJyLnJlYWRJbnQzMkxFID0gQlAucmVhZEludDMyTEVcbiAgYXJyLnJlYWRJbnQzMkJFID0gQlAucmVhZEludDMyQkVcbiAgYXJyLnJlYWRGbG9hdExFID0gQlAucmVhZEZsb2F0TEVcbiAgYXJyLnJlYWRGbG9hdEJFID0gQlAucmVhZEZsb2F0QkVcbiAgYXJyLnJlYWREb3VibGVMRSA9IEJQLnJlYWREb3VibGVMRVxuICBhcnIucmVhZERvdWJsZUJFID0gQlAucmVhZERvdWJsZUJFXG4gIGFyci53cml0ZVVJbnQ4ID0gQlAud3JpdGVVSW50OFxuICBhcnIud3JpdGVVSW50TEUgPSBCUC53cml0ZVVJbnRMRVxuICBhcnIud3JpdGVVSW50QkUgPSBCUC53cml0ZVVJbnRCRVxuICBhcnIud3JpdGVVSW50MTZMRSA9IEJQLndyaXRlVUludDE2TEVcbiAgYXJyLndyaXRlVUludDE2QkUgPSBCUC53cml0ZVVJbnQxNkJFXG4gIGFyci53cml0ZVVJbnQzMkxFID0gQlAud3JpdGVVSW50MzJMRVxuICBhcnIud3JpdGVVSW50MzJCRSA9IEJQLndyaXRlVUludDMyQkVcbiAgYXJyLndyaXRlSW50TEUgPSBCUC53cml0ZUludExFXG4gIGFyci53cml0ZUludEJFID0gQlAud3JpdGVJbnRCRVxuICBhcnIud3JpdGVJbnQ4ID0gQlAud3JpdGVJbnQ4XG4gIGFyci53cml0ZUludDE2TEUgPSBCUC53cml0ZUludDE2TEVcbiAgYXJyLndyaXRlSW50MTZCRSA9IEJQLndyaXRlSW50MTZCRVxuICBhcnIud3JpdGVJbnQzMkxFID0gQlAud3JpdGVJbnQzMkxFXG4gIGFyci53cml0ZUludDMyQkUgPSBCUC53cml0ZUludDMyQkVcbiAgYXJyLndyaXRlRmxvYXRMRSA9IEJQLndyaXRlRmxvYXRMRVxuICBhcnIud3JpdGVGbG9hdEJFID0gQlAud3JpdGVGbG9hdEJFXG4gIGFyci53cml0ZURvdWJsZUxFID0gQlAud3JpdGVEb3VibGVMRVxuICBhcnIud3JpdGVEb3VibGVCRSA9IEJQLndyaXRlRG91YmxlQkVcbiAgYXJyLmZpbGwgPSBCUC5maWxsXG4gIGFyci5pbnNwZWN0ID0gQlAuaW5zcGVjdFxuICBhcnIudG9BcnJheUJ1ZmZlciA9IEJQLnRvQXJyYXlCdWZmZXJcblxuICByZXR1cm4gYXJyXG59XG5cbnZhciBJTlZBTElEX0JBU0U2NF9SRSA9IC9bXitcXC8wLTlBLVphLXotX10vZ1xuXG5mdW5jdGlvbiBiYXNlNjRjbGVhbiAoc3RyKSB7XG4gIC8vIE5vZGUgc3RyaXBzIG91dCBpbnZhbGlkIGNoYXJhY3RlcnMgbGlrZSBcXG4gYW5kIFxcdCBmcm9tIHRoZSBzdHJpbmcsIGJhc2U2NC1qcyBkb2VzIG5vdFxuICBzdHIgPSBzdHJpbmd0cmltKHN0cikucmVwbGFjZShJTlZBTElEX0JBU0U2NF9SRSwgJycpXG4gIC8vIE5vZGUgY29udmVydHMgc3RyaW5ncyB3aXRoIGxlbmd0aCA8IDIgdG8gJydcbiAgaWYgKHN0ci5sZW5ndGggPCAyKSByZXR1cm4gJydcbiAgLy8gTm9kZSBhbGxvd3MgZm9yIG5vbi1wYWRkZWQgYmFzZTY0IHN0cmluZ3MgKG1pc3NpbmcgdHJhaWxpbmcgPT09KSwgYmFzZTY0LWpzIGRvZXMgbm90XG4gIHdoaWxlIChzdHIubGVuZ3RoICUgNCAhPT0gMCkge1xuICAgIHN0ciA9IHN0ciArICc9J1xuICB9XG4gIHJldHVybiBzdHJcbn1cblxuZnVuY3Rpb24gc3RyaW5ndHJpbSAoc3RyKSB7XG4gIGlmIChzdHIudHJpbSkgcmV0dXJuIHN0ci50cmltKClcbiAgcmV0dXJuIHN0ci5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCAnJylcbn1cblxuZnVuY3Rpb24gdG9IZXggKG4pIHtcbiAgaWYgKG4gPCAxNikgcmV0dXJuICcwJyArIG4udG9TdHJpbmcoMTYpXG4gIHJldHVybiBuLnRvU3RyaW5nKDE2KVxufVxuXG5mdW5jdGlvbiB1dGY4VG9CeXRlcyAoc3RyaW5nLCB1bml0cykge1xuICB1bml0cyA9IHVuaXRzIHx8IEluZmluaXR5XG4gIHZhciBjb2RlUG9pbnRcbiAgdmFyIGxlbmd0aCA9IHN0cmluZy5sZW5ndGhcbiAgdmFyIGxlYWRTdXJyb2dhdGUgPSBudWxsXG4gIHZhciBieXRlcyA9IFtdXG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIGNvZGVQb2ludCA9IHN0cmluZy5jaGFyQ29kZUF0KGkpXG5cbiAgICAvLyBpcyBzdXJyb2dhdGUgY29tcG9uZW50XG4gICAgaWYgKGNvZGVQb2ludCA+IDB4RDdGRiAmJiBjb2RlUG9pbnQgPCAweEUwMDApIHtcbiAgICAgIC8vIGxhc3QgY2hhciB3YXMgYSBsZWFkXG4gICAgICBpZiAoIWxlYWRTdXJyb2dhdGUpIHtcbiAgICAgICAgLy8gbm8gbGVhZCB5ZXRcbiAgICAgICAgaWYgKGNvZGVQb2ludCA+IDB4REJGRikge1xuICAgICAgICAgIC8vIHVuZXhwZWN0ZWQgdHJhaWxcbiAgICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRClcbiAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9IGVsc2UgaWYgKGkgKyAxID09PSBsZW5ndGgpIHtcbiAgICAgICAgICAvLyB1bnBhaXJlZCBsZWFkXG4gICAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG4gICAgICAgICAgY29udGludWVcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHZhbGlkIGxlYWRcbiAgICAgICAgbGVhZFN1cnJvZ2F0ZSA9IGNvZGVQb2ludFxuXG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG5cbiAgICAgIC8vIDIgbGVhZHMgaW4gYSByb3dcbiAgICAgIGlmIChjb2RlUG9pbnQgPCAweERDMDApIHtcbiAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG4gICAgICAgIGxlYWRTdXJyb2dhdGUgPSBjb2RlUG9pbnRcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cblxuICAgICAgLy8gdmFsaWQgc3Vycm9nYXRlIHBhaXJcbiAgICAgIGNvZGVQb2ludCA9IChsZWFkU3Vycm9nYXRlIC0gMHhEODAwIDw8IDEwIHwgY29kZVBvaW50IC0gMHhEQzAwKSArIDB4MTAwMDBcbiAgICB9IGVsc2UgaWYgKGxlYWRTdXJyb2dhdGUpIHtcbiAgICAgIC8vIHZhbGlkIGJtcCBjaGFyLCBidXQgbGFzdCBjaGFyIHdhcyBhIGxlYWRcbiAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKVxuICAgIH1cblxuICAgIGxlYWRTdXJyb2dhdGUgPSBudWxsXG5cbiAgICAvLyBlbmNvZGUgdXRmOFxuICAgIGlmIChjb2RlUG9pbnQgPCAweDgwKSB7XG4gICAgICBpZiAoKHVuaXRzIC09IDEpIDwgMCkgYnJlYWtcbiAgICAgIGJ5dGVzLnB1c2goY29kZVBvaW50KVxuICAgIH0gZWxzZSBpZiAoY29kZVBvaW50IDwgMHg4MDApIHtcbiAgICAgIGlmICgodW5pdHMgLT0gMikgPCAwKSBicmVha1xuICAgICAgYnl0ZXMucHVzaChcbiAgICAgICAgY29kZVBvaW50ID4+IDB4NiB8IDB4QzAsXG4gICAgICAgIGNvZGVQb2ludCAmIDB4M0YgfCAweDgwXG4gICAgICApXG4gICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPCAweDEwMDAwKSB7XG4gICAgICBpZiAoKHVuaXRzIC09IDMpIDwgMCkgYnJlYWtcbiAgICAgIGJ5dGVzLnB1c2goXG4gICAgICAgIGNvZGVQb2ludCA+PiAweEMgfCAweEUwLFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHg2ICYgMHgzRiB8IDB4ODAsXG4gICAgICAgIGNvZGVQb2ludCAmIDB4M0YgfCAweDgwXG4gICAgICApXG4gICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPCAweDExMDAwMCkge1xuICAgICAgaWYgKCh1bml0cyAtPSA0KSA8IDApIGJyZWFrXG4gICAgICBieXRlcy5wdXNoKFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHgxMiB8IDB4RjAsXG4gICAgICAgIGNvZGVQb2ludCA+PiAweEMgJiAweDNGIHwgMHg4MCxcbiAgICAgICAgY29kZVBvaW50ID4+IDB4NiAmIDB4M0YgfCAweDgwLFxuICAgICAgICBjb2RlUG9pbnQgJiAweDNGIHwgMHg4MFxuICAgICAgKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgY29kZSBwb2ludCcpXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGJ5dGVzXG59XG5cbmZ1bmN0aW9uIGFzY2lpVG9CeXRlcyAoc3RyKSB7XG4gIHZhciBieXRlQXJyYXkgPSBbXVxuICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xuICAgIC8vIE5vZGUncyBjb2RlIHNlZW1zIHRvIGJlIGRvaW5nIHRoaXMgYW5kIG5vdCAmIDB4N0YuLlxuICAgIGJ5dGVBcnJheS5wdXNoKHN0ci5jaGFyQ29kZUF0KGkpICYgMHhGRilcbiAgfVxuICByZXR1cm4gYnl0ZUFycmF5XG59XG5cbmZ1bmN0aW9uIHV0ZjE2bGVUb0J5dGVzIChzdHIsIHVuaXRzKSB7XG4gIHZhciBjLCBoaSwgbG9cbiAgdmFyIGJ5dGVBcnJheSA9IFtdXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKCh1bml0cyAtPSAyKSA8IDApIGJyZWFrXG5cbiAgICBjID0gc3RyLmNoYXJDb2RlQXQoaSlcbiAgICBoaSA9IGMgPj4gOFxuICAgIGxvID0gYyAlIDI1NlxuICAgIGJ5dGVBcnJheS5wdXNoKGxvKVxuICAgIGJ5dGVBcnJheS5wdXNoKGhpKVxuICB9XG5cbiAgcmV0dXJuIGJ5dGVBcnJheVxufVxuXG5mdW5jdGlvbiBiYXNlNjRUb0J5dGVzIChzdHIpIHtcbiAgcmV0dXJuIGJhc2U2NC50b0J5dGVBcnJheShiYXNlNjRjbGVhbihzdHIpKVxufVxuXG5mdW5jdGlvbiBibGl0QnVmZmVyIChzcmMsIGRzdCwgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIGlmICgoaSArIG9mZnNldCA+PSBkc3QubGVuZ3RoKSB8fCAoaSA+PSBzcmMubGVuZ3RoKSkgYnJlYWtcbiAgICBkc3RbaSArIG9mZnNldF0gPSBzcmNbaV1cbiAgfVxuICByZXR1cm4gaVxufVxuIl19","deps":{"base64-js":"/Applications/CocosCreator.app/Contents/Resources/app.asar/node_modules/persistify/node_modules/base64-js/lib/b64.js","isarray":"/Applications/CocosCreator.app/Contents/Resources/app.asar/node_modules/persistify/node_modules/buffer/node_modules/isarray/index.js","ieee754":"/Applications/CocosCreator.app/Contents/Resources/app.asar/node_modules/ieee754/index.js"}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/4d/4d7bc8b4-2d4c-4c4f-a309-2972438fcf70.js":{"source":"(function (Buffer){\n\"use strict\";\ncc._RF.push(module, '4d7bci0LUxMT6MJKXJDj89w', 'History');\n// scripts/components/History.js\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        HistoryItemPrefab: {\n            default: null,\n            type: cc.Prefab\n        },\n        // foo: {\n        //    default: null,\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n        _history: null,\n        _viewlist: null,\n        _content: null,\n        _viewitemTemp: null,\n        _historyData: null,\n        _curRoomInfo: null,\n        _emptyTip: null\n    },\n    // use this for initialization\n    onLoad: function onLoad() {\n        this._history = this.node.getChildByName(\"history\");\n        this._history.active = false;\n        this._emptyTip = this._history.getChildByName(\"emptyTip\");\n        this._emptyTip.active = true;\n        this._viewlist = this._history.getChildByName(\"viewlist\");\n        this._content = cc.find(\"view/content\", this._viewlist);\n        this._viewitemTemp = this._content.children[0];\n        this._content.removeChild(this._viewitemTemp);\n        var node = cc.find(\"Canvas/selectMJ/btn_zhanji\");\n        node.active = false;\n        var searchURL = window.location.search;\n        if (searchURL && searchURL.indexOf(\"account\") != -1) {\n            searchURL = searchURL.substring(1, searchURL.length);\n            var targetAccount = searchURL.split(\"&\")[0].split(\"=\")[1];\n            if (targetAccount.indexOf(\"qiao\") > -1) {\n                node.active = true;\n            }\n        }\n        this.addClickEvent(node, this.node, \"History\", \"onBtnHistoryClicked\");\n        var node = cc.find(\"Canvas/history/btn_back\");\n        this.addClickEvent(node, this.node, \"History\", \"onBtnBackClicked\");\n    },\n    addClickEvent: function addClickEvent(node, target, component, handler) {\n        var eventHandler = new cc.Component.EventHandler();\n        eventHandler.target = target;\n        eventHandler.component = component;\n        eventHandler.handler = handler;\n        var clickEvents = node.getComponent(cc.Button).clickEvents;\n        clickEvents.push(eventHandler);\n    },\n    onBtnBackClicked: function onBtnBackClicked() {\n        if (this._curRoomInfo == null) {\n            this._historyData = null;\n            this._history.active = false;\n        } else {\n            this.initRoomHistoryList(this._historyData);\n        }\n    },\n    onBtnHistoryClicked: function onBtnHistoryClicked() {\n        console.log('点击战绩按钮');\n        this._history.active = true;\n        var self = this;\n        cc.vv.userMgr.getHistoryList(function (data) {\n            data.sort(function (a, b) {\n                return a.time < b.time;\n            });\n            self._historyData = data;\n            for (var i = 0; i < data.length; ++i) {\n                for (var j = 0; j < 4; ++j) {\n                    var s = data[i].seats[j];\n                    s.name = new Buffer(s.name, 'base64').toString();\n                }\n            }\n            self.initRoomHistoryList(data);\n        });\n    },\n    dateFormat: function dateFormat(time) {\n        var date = new Date(time);\n        var datetime = \"{0}-{1}-{2} {3}:{4}:{5}\";\n        var year = date.getFullYear();\n        var month = date.getMonth() + 1;\n        month = month >= 10 ? month : \"0\" + month;\n        var day = date.getDate();\n        day = day >= 10 ? day : \"0\" + day;\n        var h = date.getHours();\n        h = h >= 10 ? h : \"0\" + h;\n        var m = date.getMinutes();\n        m = m >= 10 ? m : \"0\" + m;\n        var s = date.getSeconds();\n        s = s >= 10 ? s : \"0\" + s;\n        datetime = datetime.format(year, month, day, h, m, s);\n        return datetime;\n    },\n    initRoomHistoryList: function initRoomHistoryList(data) {\n        for (var i = 0; i < data.length; ++i) {\n            var node = this.getViewItem(i);\n            node.idx = i;\n            var titleId = \"\" + (i + 1);\n            node.getChildByName(\"title\").getComponent(cc.Label).string = titleId;\n            node.getChildByName(\"roomNo\").getComponent(cc.Label).string = \"房间ID:\" + data[i].id;\n            var datetime = this.dateFormat(data[i].time * 1000);\n            node.getChildByName(\"time\").getComponent(cc.Label).string = datetime;\n            var btnOp = node.getChildByName(\"btnOp\");\n            btnOp.idx = i;\n            btnOp.getChildByName(\"Label\").getComponent(cc.Label).string = \"详情\";\n            for (var j = 0; j < 4; ++j) {\n                var s = data[i].seats[j];\n                var info = s.name + \":\" + s.score;\n                //console.log(info);\n                node.getChildByName(\"info\" + j).getComponent(cc.Label).string = info;\n            }\n        }\n        this._emptyTip.active = data.length == 0;\n        this.shrinkContent(data.length);\n        this._curRoomInfo = null;\n    },\n    initGameHistoryList: function initGameHistoryList(roomInfo, data) {\n        data.sort(function (a, b) {\n            return a.create_time < b.create_time;\n        });\n        for (var i = 0; i < data.length; ++i) {\n            var node = this.getViewItem(i);\n            var idx = data.length - i - 1;\n            node.idx = idx;\n            var titleId = \"\" + (idx + 1);\n            node.getChildByName(\"title\").getComponent(cc.Label).string = titleId;\n            node.getChildByName(\"roomNo\").getComponent(cc.Label).string = \"房间ID:\" + roomInfo.id;\n            var datetime = this.dateFormat(data[i].create_time * 1000);\n            node.getChildByName(\"time\").getComponent(cc.Label).string = datetime;\n            var btnOp = node.getChildByName(\"btnOp\");\n            btnOp.idx = idx;\n            btnOp.getChildByName(\"Label\").getComponent(cc.Label).string = \"回放\";\n            var result = JSON.parse(data[i].result);\n            for (var j = 0; j < 4; ++j) {\n                var s = roomInfo.seats[j];\n                var info = s.name + \":\" + result[j];\n                //console.log(info);\n                node.getChildByName(\"info\" + j).getComponent(cc.Label).string = info;\n            }\n        }\n        this.shrinkContent(data.length);\n        this._curRoomInfo = roomInfo;\n    },\n    getViewItem: function getViewItem(index) {\n        var content = this._content;\n        if (content.childrenCount > index) {\n            return content.children[index];\n        }\n        var node = cc.instantiate(this._viewitemTemp);\n        content.addChild(node);\n        return node;\n    },\n    shrinkContent: function shrinkContent(num) {\n        while (this._content.childrenCount > num) {\n            var lastOne = this._content.children[this._content.childrenCount - 1];\n            this._content.removeChild(lastOne, true);\n        }\n    },\n    getGameListOfRoom: function getGameListOfRoom(idx) {\n        var self = this;\n        var roomInfo = this._historyData[idx];\n        cc.vv.userMgr.getGamesOfRoom(roomInfo.uuid, function (data) {\n            if (data != null && data.length > 0) {\n                self.initGameHistoryList(roomInfo, data);\n            }\n        });\n    },\n    getDetailOfGame: function getDetailOfGame(idx) {\n        var self = this;\n        var roomUUID = this._curRoomInfo.uuid;\n        cc.vv.userMgr.getDetailOfGame(roomUUID, idx, function (data) {\n            data.base_info = JSON.parse(data.base_info);\n            data.action_records = JSON.parse(data.action_records);\n            cc.vv.gameNetMgr.prepareReplay(self._curRoomInfo, data);\n            cc.vv.replayMgr.init(data);\n            cc.director.loadScene(\"mjgame\");\n        });\n    },\n    onViewItemClicked: function onViewItemClicked(event) {\n        var idx = event.target.idx;\n        console.log(idx);\n        if (this._curRoomInfo == null) {\n            this.getGameListOfRoom(idx);\n        } else {\n            this.getDetailOfGame(idx);\n        }\n    },\n    onBtnOpClicked: function onBtnOpClicked(event) {\n        var idx = event.target.parent.idx;\n        console.log(idx);\n        if (this._curRoomInfo == null) {\n            this.getGameListOfRoom(idx);\n        } else {\n            this.getDetailOfGame(idx);\n        }\n    }\n});\n\ncc._RF.pop();\n}).call(this,require(\"buffer\").Buffer)\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYnJhcnkvaW1wb3J0cy80ZC80ZDdiYzhiNC0yZDRjLTRjNGYtYTMwOS0yOTcyNDM4ZmNmNzAuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbmNjLl9SRi5wdXNoKG1vZHVsZSwgJzRkN2JjaTBMVXhNVDZNSktYSkRqODl3JywgJ0hpc3RvcnknKTtcbi8vIHNjcmlwdHMvY29tcG9uZW50cy9IaXN0b3J5LmpzXG5cblwidXNlIHN0cmljdFwiO1xuXG5jYy5DbGFzcyh7XG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxuICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgSGlzdG9yeUl0ZW1QcmVmYWI6IHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgICAgICAgICB0eXBlOiBjYy5QcmVmYWJcbiAgICAgICAgfSxcbiAgICAgICAgLy8gZm9vOiB7XG4gICAgICAgIC8vICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgICAgIC8vICAgIHVybDogY2MuVGV4dHVyZTJELCAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHlwZW9mIGRlZmF1bHRcbiAgICAgICAgLy8gICAgc2VyaWFsaXphYmxlOiB0cnVlLCAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXG4gICAgICAgIC8vICAgIHZpc2libGU6IHRydWUsICAgICAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHJ1ZVxuICAgICAgICAvLyAgICBkaXNwbGF5TmFtZTogJ0ZvbycsIC8vIG9wdGlvbmFsXG4gICAgICAgIC8vICAgIHJlYWRvbmx5OiBmYWxzZSwgICAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgZmFsc2VcbiAgICAgICAgLy8gfSxcbiAgICAgICAgLy8gLi4uXG4gICAgICAgIF9oaXN0b3J5OiBudWxsLFxuICAgICAgICBfdmlld2xpc3Q6IG51bGwsXG4gICAgICAgIF9jb250ZW50OiBudWxsLFxuICAgICAgICBfdmlld2l0ZW1UZW1wOiBudWxsLFxuICAgICAgICBfaGlzdG9yeURhdGE6IG51bGwsXG4gICAgICAgIF9jdXJSb29tSW5mbzogbnVsbCxcbiAgICAgICAgX2VtcHR5VGlwOiBudWxsXG4gICAgfSxcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cbiAgICBvbkxvYWQ6IGZ1bmN0aW9uIG9uTG9hZCgpIHtcbiAgICAgICAgdGhpcy5faGlzdG9yeSA9IHRoaXMubm9kZS5nZXRDaGlsZEJ5TmFtZShcImhpc3RvcnlcIik7XG4gICAgICAgIHRoaXMuX2hpc3RvcnkuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX2VtcHR5VGlwID0gdGhpcy5faGlzdG9yeS5nZXRDaGlsZEJ5TmFtZShcImVtcHR5VGlwXCIpO1xuICAgICAgICB0aGlzLl9lbXB0eVRpcC5hY3RpdmUgPSB0cnVlO1xuICAgICAgICB0aGlzLl92aWV3bGlzdCA9IHRoaXMuX2hpc3RvcnkuZ2V0Q2hpbGRCeU5hbWUoXCJ2aWV3bGlzdFwiKTtcbiAgICAgICAgdGhpcy5fY29udGVudCA9IGNjLmZpbmQoXCJ2aWV3L2NvbnRlbnRcIiwgdGhpcy5fdmlld2xpc3QpO1xuICAgICAgICB0aGlzLl92aWV3aXRlbVRlbXAgPSB0aGlzLl9jb250ZW50LmNoaWxkcmVuWzBdO1xuICAgICAgICB0aGlzLl9jb250ZW50LnJlbW92ZUNoaWxkKHRoaXMuX3ZpZXdpdGVtVGVtcCk7XG4gICAgICAgIHZhciBub2RlID0gY2MuZmluZChcIkNhbnZhcy9zZWxlY3RNSi9idG5femhhbmppXCIpO1xuICAgICAgICBub2RlLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICB2YXIgc2VhcmNoVVJMID0gd2luZG93LmxvY2F0aW9uLnNlYXJjaDtcbiAgICAgICAgaWYgKHNlYXJjaFVSTCAmJiBzZWFyY2hVUkwuaW5kZXhPZihcImFjY291bnRcIikgIT0gLTEpIHtcbiAgICAgICAgICAgIHNlYXJjaFVSTCA9IHNlYXJjaFVSTC5zdWJzdHJpbmcoMSwgc2VhcmNoVVJMLmxlbmd0aCk7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0QWNjb3VudCA9IHNlYXJjaFVSTC5zcGxpdChcIiZcIilbMF0uc3BsaXQoXCI9XCIpWzFdO1xuICAgICAgICAgICAgaWYgKHRhcmdldEFjY291bnQuaW5kZXhPZihcInFpYW9cIikgPiAtMSkge1xuICAgICAgICAgICAgICAgIG5vZGUuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFkZENsaWNrRXZlbnQobm9kZSwgdGhpcy5ub2RlLCBcIkhpc3RvcnlcIiwgXCJvbkJ0bkhpc3RvcnlDbGlja2VkXCIpO1xuICAgICAgICB2YXIgbm9kZSA9IGNjLmZpbmQoXCJDYW52YXMvaGlzdG9yeS9idG5fYmFja1wiKTtcbiAgICAgICAgdGhpcy5hZGRDbGlja0V2ZW50KG5vZGUsIHRoaXMubm9kZSwgXCJIaXN0b3J5XCIsIFwib25CdG5CYWNrQ2xpY2tlZFwiKTtcbiAgICB9LFxuICAgIGFkZENsaWNrRXZlbnQ6IGZ1bmN0aW9uIGFkZENsaWNrRXZlbnQobm9kZSwgdGFyZ2V0LCBjb21wb25lbnQsIGhhbmRsZXIpIHtcbiAgICAgICAgdmFyIGV2ZW50SGFuZGxlciA9IG5ldyBjYy5Db21wb25lbnQuRXZlbnRIYW5kbGVyKCk7XG4gICAgICAgIGV2ZW50SGFuZGxlci50YXJnZXQgPSB0YXJnZXQ7XG4gICAgICAgIGV2ZW50SGFuZGxlci5jb21wb25lbnQgPSBjb21wb25lbnQ7XG4gICAgICAgIGV2ZW50SGFuZGxlci5oYW5kbGVyID0gaGFuZGxlcjtcbiAgICAgICAgdmFyIGNsaWNrRXZlbnRzID0gbm9kZS5nZXRDb21wb25lbnQoY2MuQnV0dG9uKS5jbGlja0V2ZW50cztcbiAgICAgICAgY2xpY2tFdmVudHMucHVzaChldmVudEhhbmRsZXIpO1xuICAgIH0sXG4gICAgb25CdG5CYWNrQ2xpY2tlZDogZnVuY3Rpb24gb25CdG5CYWNrQ2xpY2tlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2N1clJvb21JbmZvID09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuX2hpc3RvcnlEYXRhID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuX2hpc3RvcnkuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmluaXRSb29tSGlzdG9yeUxpc3QodGhpcy5faGlzdG9yeURhdGEpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBvbkJ0bkhpc3RvcnlDbGlja2VkOiBmdW5jdGlvbiBvbkJ0bkhpc3RvcnlDbGlja2VkKCkge1xuICAgICAgICBjb25zb2xlLmxvZygn54K55Ye75oiY57up5oyJ6ZKuJyk7XG4gICAgICAgIHRoaXMuX2hpc3RvcnkuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICBjYy52di51c2VyTWdyLmdldEhpc3RvcnlMaXN0KGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICBkYXRhLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYS50aW1lIDwgYi50aW1lO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzZWxmLl9oaXN0b3J5RGF0YSA9IGRhdGE7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IDQ7ICsraikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IGRhdGFbaV0uc2VhdHNbal07XG4gICAgICAgICAgICAgICAgICAgIHMubmFtZSA9IG5ldyBCdWZmZXIocy5uYW1lLCAnYmFzZTY0JykudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZWxmLmluaXRSb29tSGlzdG9yeUxpc3QoZGF0YSk7XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgZGF0ZUZvcm1hdDogZnVuY3Rpb24gZGF0ZUZvcm1hdCh0aW1lKSB7XG4gICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUodGltZSk7XG4gICAgICAgIHZhciBkYXRldGltZSA9IFwiezB9LXsxfS17Mn0gezN9Ons0fTp7NX1cIjtcbiAgICAgICAgdmFyIHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XG4gICAgICAgIHZhciBtb250aCA9IGRhdGUuZ2V0TW9udGgoKSArIDE7XG4gICAgICAgIG1vbnRoID0gbW9udGggPj0gMTAgPyBtb250aCA6IFwiMFwiICsgbW9udGg7XG4gICAgICAgIHZhciBkYXkgPSBkYXRlLmdldERhdGUoKTtcbiAgICAgICAgZGF5ID0gZGF5ID49IDEwID8gZGF5IDogXCIwXCIgKyBkYXk7XG4gICAgICAgIHZhciBoID0gZGF0ZS5nZXRIb3VycygpO1xuICAgICAgICBoID0gaCA+PSAxMCA/IGggOiBcIjBcIiArIGg7XG4gICAgICAgIHZhciBtID0gZGF0ZS5nZXRNaW51dGVzKCk7XG4gICAgICAgIG0gPSBtID49IDEwID8gbSA6IFwiMFwiICsgbTtcbiAgICAgICAgdmFyIHMgPSBkYXRlLmdldFNlY29uZHMoKTtcbiAgICAgICAgcyA9IHMgPj0gMTAgPyBzIDogXCIwXCIgKyBzO1xuICAgICAgICBkYXRldGltZSA9IGRhdGV0aW1lLmZvcm1hdCh5ZWFyLCBtb250aCwgZGF5LCBoLCBtLCBzKTtcbiAgICAgICAgcmV0dXJuIGRhdGV0aW1lO1xuICAgIH0sXG4gICAgaW5pdFJvb21IaXN0b3J5TGlzdDogZnVuY3Rpb24gaW5pdFJvb21IaXN0b3J5TGlzdChkYXRhKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgdmFyIG5vZGUgPSB0aGlzLmdldFZpZXdJdGVtKGkpO1xuICAgICAgICAgICAgbm9kZS5pZHggPSBpO1xuICAgICAgICAgICAgdmFyIHRpdGxlSWQgPSBcIlwiICsgKGkgKyAxKTtcbiAgICAgICAgICAgIG5vZGUuZ2V0Q2hpbGRCeU5hbWUoXCJ0aXRsZVwiKS5nZXRDb21wb25lbnQoY2MuTGFiZWwpLnN0cmluZyA9IHRpdGxlSWQ7XG4gICAgICAgICAgICBub2RlLmdldENoaWxkQnlOYW1lKFwicm9vbU5vXCIpLmdldENvbXBvbmVudChjYy5MYWJlbCkuc3RyaW5nID0gXCLmiL/pl7RJRDpcIiArIGRhdGFbaV0uaWQ7XG4gICAgICAgICAgICB2YXIgZGF0ZXRpbWUgPSB0aGlzLmRhdGVGb3JtYXQoZGF0YVtpXS50aW1lICogMTAwMCk7XG4gICAgICAgICAgICBub2RlLmdldENoaWxkQnlOYW1lKFwidGltZVwiKS5nZXRDb21wb25lbnQoY2MuTGFiZWwpLnN0cmluZyA9IGRhdGV0aW1lO1xuICAgICAgICAgICAgdmFyIGJ0bk9wID0gbm9kZS5nZXRDaGlsZEJ5TmFtZShcImJ0bk9wXCIpO1xuICAgICAgICAgICAgYnRuT3AuaWR4ID0gaTtcbiAgICAgICAgICAgIGJ0bk9wLmdldENoaWxkQnlOYW1lKFwiTGFiZWxcIikuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5zdHJpbmcgPSBcIuivpuaDhVwiO1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCA0OyArK2opIHtcbiAgICAgICAgICAgICAgICB2YXIgcyA9IGRhdGFbaV0uc2VhdHNbal07XG4gICAgICAgICAgICAgICAgdmFyIGluZm8gPSBzLm5hbWUgKyBcIjpcIiArIHMuc2NvcmU7XG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhpbmZvKTtcbiAgICAgICAgICAgICAgICBub2RlLmdldENoaWxkQnlOYW1lKFwiaW5mb1wiICsgaikuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5zdHJpbmcgPSBpbmZvO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2VtcHR5VGlwLmFjdGl2ZSA9IGRhdGEubGVuZ3RoID09IDA7XG4gICAgICAgIHRoaXMuc2hyaW5rQ29udGVudChkYXRhLmxlbmd0aCk7XG4gICAgICAgIHRoaXMuX2N1clJvb21JbmZvID0gbnVsbDtcbiAgICB9LFxuICAgIGluaXRHYW1lSGlzdG9yeUxpc3Q6IGZ1bmN0aW9uIGluaXRHYW1lSGlzdG9yeUxpc3Qocm9vbUluZm8sIGRhdGEpIHtcbiAgICAgICAgZGF0YS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICByZXR1cm4gYS5jcmVhdGVfdGltZSA8IGIuY3JlYXRlX3RpbWU7XG4gICAgICAgIH0pO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBub2RlID0gdGhpcy5nZXRWaWV3SXRlbShpKTtcbiAgICAgICAgICAgIHZhciBpZHggPSBkYXRhLmxlbmd0aCAtIGkgLSAxO1xuICAgICAgICAgICAgbm9kZS5pZHggPSBpZHg7XG4gICAgICAgICAgICB2YXIgdGl0bGVJZCA9IFwiXCIgKyAoaWR4ICsgMSk7XG4gICAgICAgICAgICBub2RlLmdldENoaWxkQnlOYW1lKFwidGl0bGVcIikuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5zdHJpbmcgPSB0aXRsZUlkO1xuICAgICAgICAgICAgbm9kZS5nZXRDaGlsZEJ5TmFtZShcInJvb21Ob1wiKS5nZXRDb21wb25lbnQoY2MuTGFiZWwpLnN0cmluZyA9IFwi5oi/6Ze0SUQ6XCIgKyByb29tSW5mby5pZDtcbiAgICAgICAgICAgIHZhciBkYXRldGltZSA9IHRoaXMuZGF0ZUZvcm1hdChkYXRhW2ldLmNyZWF0ZV90aW1lICogMTAwMCk7XG4gICAgICAgICAgICBub2RlLmdldENoaWxkQnlOYW1lKFwidGltZVwiKS5nZXRDb21wb25lbnQoY2MuTGFiZWwpLnN0cmluZyA9IGRhdGV0aW1lO1xuICAgICAgICAgICAgdmFyIGJ0bk9wID0gbm9kZS5nZXRDaGlsZEJ5TmFtZShcImJ0bk9wXCIpO1xuICAgICAgICAgICAgYnRuT3AuaWR4ID0gaWR4O1xuICAgICAgICAgICAgYnRuT3AuZ2V0Q2hpbGRCeU5hbWUoXCJMYWJlbFwiKS5nZXRDb21wb25lbnQoY2MuTGFiZWwpLnN0cmluZyA9IFwi5Zue5pS+XCI7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gSlNPTi5wYXJzZShkYXRhW2ldLnJlc3VsdCk7XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IDQ7ICsraikge1xuICAgICAgICAgICAgICAgIHZhciBzID0gcm9vbUluZm8uc2VhdHNbal07XG4gICAgICAgICAgICAgICAgdmFyIGluZm8gPSBzLm5hbWUgKyBcIjpcIiArIHJlc3VsdFtqXTtcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGluZm8pO1xuICAgICAgICAgICAgICAgIG5vZGUuZ2V0Q2hpbGRCeU5hbWUoXCJpbmZvXCIgKyBqKS5nZXRDb21wb25lbnQoY2MuTGFiZWwpLnN0cmluZyA9IGluZm87XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zaHJpbmtDb250ZW50KGRhdGEubGVuZ3RoKTtcbiAgICAgICAgdGhpcy5fY3VyUm9vbUluZm8gPSByb29tSW5mbztcbiAgICB9LFxuICAgIGdldFZpZXdJdGVtOiBmdW5jdGlvbiBnZXRWaWV3SXRlbShpbmRleCkge1xuICAgICAgICB2YXIgY29udGVudCA9IHRoaXMuX2NvbnRlbnQ7XG4gICAgICAgIGlmIChjb250ZW50LmNoaWxkcmVuQ291bnQgPiBpbmRleCkge1xuICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnQuY2hpbGRyZW5baW5kZXhdO1xuICAgICAgICB9XG4gICAgICAgIHZhciBub2RlID0gY2MuaW5zdGFudGlhdGUodGhpcy5fdmlld2l0ZW1UZW1wKTtcbiAgICAgICAgY29udGVudC5hZGRDaGlsZChub2RlKTtcbiAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgfSxcbiAgICBzaHJpbmtDb250ZW50OiBmdW5jdGlvbiBzaHJpbmtDb250ZW50KG51bSkge1xuICAgICAgICB3aGlsZSAodGhpcy5fY29udGVudC5jaGlsZHJlbkNvdW50ID4gbnVtKSB7XG4gICAgICAgICAgICB2YXIgbGFzdE9uZSA9IHRoaXMuX2NvbnRlbnQuY2hpbGRyZW5bdGhpcy5fY29udGVudC5jaGlsZHJlbkNvdW50IC0gMV07XG4gICAgICAgICAgICB0aGlzLl9jb250ZW50LnJlbW92ZUNoaWxkKGxhc3RPbmUsIHRydWUpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBnZXRHYW1lTGlzdE9mUm9vbTogZnVuY3Rpb24gZ2V0R2FtZUxpc3RPZlJvb20oaWR4KSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgdmFyIHJvb21JbmZvID0gdGhpcy5faGlzdG9yeURhdGFbaWR4XTtcbiAgICAgICAgY2MudnYudXNlck1nci5nZXRHYW1lc09mUm9vbShyb29tSW5mby51dWlkLCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgaWYgKGRhdGEgIT0gbnVsbCAmJiBkYXRhLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBzZWxmLmluaXRHYW1lSGlzdG9yeUxpc3Qocm9vbUluZm8sIGRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9LFxuICAgIGdldERldGFpbE9mR2FtZTogZnVuY3Rpb24gZ2V0RGV0YWlsT2ZHYW1lKGlkeCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHZhciByb29tVVVJRCA9IHRoaXMuX2N1clJvb21JbmZvLnV1aWQ7XG4gICAgICAgIGNjLnZ2LnVzZXJNZ3IuZ2V0RGV0YWlsT2ZHYW1lKHJvb21VVUlELCBpZHgsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICBkYXRhLmJhc2VfaW5mbyA9IEpTT04ucGFyc2UoZGF0YS5iYXNlX2luZm8pO1xuICAgICAgICAgICAgZGF0YS5hY3Rpb25fcmVjb3JkcyA9IEpTT04ucGFyc2UoZGF0YS5hY3Rpb25fcmVjb3Jkcyk7XG4gICAgICAgICAgICBjYy52di5nYW1lTmV0TWdyLnByZXBhcmVSZXBsYXkoc2VsZi5fY3VyUm9vbUluZm8sIGRhdGEpO1xuICAgICAgICAgICAgY2MudnYucmVwbGF5TWdyLmluaXQoZGF0YSk7XG4gICAgICAgICAgICBjYy5kaXJlY3Rvci5sb2FkU2NlbmUoXCJtamdhbWVcIik7XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgb25WaWV3SXRlbUNsaWNrZWQ6IGZ1bmN0aW9uIG9uVmlld0l0ZW1DbGlja2VkKGV2ZW50KSB7XG4gICAgICAgIHZhciBpZHggPSBldmVudC50YXJnZXQuaWR4O1xuICAgICAgICBjb25zb2xlLmxvZyhpZHgpO1xuICAgICAgICBpZiAodGhpcy5fY3VyUm9vbUluZm8gPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5nZXRHYW1lTGlzdE9mUm9vbShpZHgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5nZXREZXRhaWxPZkdhbWUoaWR4KTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgb25CdG5PcENsaWNrZWQ6IGZ1bmN0aW9uIG9uQnRuT3BDbGlja2VkKGV2ZW50KSB7XG4gICAgICAgIHZhciBpZHggPSBldmVudC50YXJnZXQucGFyZW50LmlkeDtcbiAgICAgICAgY29uc29sZS5sb2coaWR4KTtcbiAgICAgICAgaWYgKHRoaXMuX2N1clJvb21JbmZvID09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuZ2V0R2FtZUxpc3RPZlJvb20oaWR4KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZ2V0RGV0YWlsT2ZHYW1lKGlkeCk7XG4gICAgICAgIH1cbiAgICB9XG59KTtcblxuY2MuX1JGLnBvcCgpOyJdfQ==","deps":{"buffer":"/Applications/CocosCreator.app/Contents/Resources/app.asar/node_modules/persistify/node_modules/buffer/index.js"}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/8d/8d571cb6-53ef-4088-a9ed-3be4d27f415b.js":{"source":"\"use strict\";\ncc._RF.push(module, '8d571y2U+9AiKntO+TSf0Fb', 'RadioButton');\n// scripts/components/RadioButton.js\n\n\"use strict\";\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        target: cc.Node,\n        sprite: cc.SpriteFrame,\n        checkedSprite: cc.SpriteFrame,\n        checked: false,\n        groupId: -1\n    },\n    // use this for initialization\n    onLoad: function onLoad() {\n        if (cc.vv == null) {\n            return;\n        }\n        if (cc.vv.radiogroupmgr == null) {\n            var RadioGroupMgr = require(\"RadioGroupMgr\");\n            cc.vv.radiogroupmgr = new RadioGroupMgr();\n            cc.vv.radiogroupmgr.init();\n        }\n        console.log(_typeof(cc.vv.radiogroupmgr.add));\n        cc.vv.radiogroupmgr.add(this);\n        this.refresh();\n    },\n    refresh: function refresh() {\n        var targetSprite = this.target.getComponent(cc.Sprite);\n        if (this.checked) {\n            targetSprite.spriteFrame = this.checkedSprite;\n        } else {\n            targetSprite.spriteFrame = this.sprite;\n        }\n    },\n    check: function check(value) {\n        this.checked = value;\n        this.refresh();\n    },\n    onClicked: function onClicked() {\n        cc.vv.radiogroupmgr.check(this);\n    },\n    onDestroy: function onDestroy() {\n        if (cc.vv && cc.vv.radiogroupmgr) {\n            cc.vv.radiogroupmgr.del(this);\n        }\n    }\n});\n\ncc._RF.pop();","deps":{"RadioGroupMgr":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/82/824eaa5e-4583-4a63-8449-ce0d99e18036.js"}},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/95/95456e7d-4c04-4a64-b328-1c6a97a18d8d.js":{"source":"\"use strict\";\ncc._RF.push(module, '9545659TARKZLMoHGqXoY2N', 'GameNetMgr');\n// scripts/GameNetMgr.js\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        dataEventHandler: null,\n        cqEventHandler: null,\n        roomId: null,\n        maxNumOfGames: 0,\n        numOfGames: 0,\n        numOfMJ: 0,\n        seatIndex: -1,\n        seats: null,\n        turn: -1,\n        button: -1,\n        chupai: -1,\n        gamestate: \"\",\n        isOver: false,\n        dissoveData: null,\n        room_type: -1,\n        cq_data: null\n    },\n    reset: function reset() {\n        this.turn = -1;\n        this.chupai = -1;\n        this.button = -1;\n        this.gamestate = \"\";\n        this.curaction = null;\n        for (var i = 0; i < this.seats.length; ++i) {\n            this.seats[i].holds = [];\n            this.seats[i].folds = [];\n            this.seats[i].pengs = [];\n            this.seats[i].caiShen = [];\n            this.seats[i].chis = [];\n            this.seats[i].angangs = [];\n            this.seats[i].diangangs = [];\n            this.seats[i].wangangs = [];\n            this.seats[i].ready = false;\n            this.seats[i].hued = false;\n            this.seats[i].tinged = false;\n        }\n    },\n    clear: function clear() {\n        this.dataEventHandler = null;\n        this.cqEventHandler = null;\n        if (this.isOver == null) {\n            this.seats = null;\n            this.roomId = null;\n            this.room_type = -1;\n            this.maxNumOfGames = 0;\n            this.numOfGames = 0;\n        }\n    },\n    dispatchEvent: function dispatchEvent(event, data) {\n        if (event == 'test') console.log(this.dataEventHandler);\n        if (this.dataEventHandler) {\n            this.dataEventHandler.emit(event, data);\n        }\n    },\n    cqDispatchEvent: function cqDispatchEvent(event, data) {\n        if (this.cqEventHandler) {\n            // console.log('cqDispatchEvent',data);\n            this.cqEventHandler.emit(event, data);\n        }\n    },\n\n    getSeatIndexByID: function getSeatIndexByID(userId) {\n        if (this.seats) {\n            for (var i = 0; i < this.seats.length; ++i) {\n                var s = this.seats[i];\n                if (s.userid == userId) {\n                    return i;\n                }\n            }\n        }\n\n        return -1;\n    },\n    isOwner: function isOwner() {\n        return this.seatIndex == 0;\n    },\n    getSeatByID: function getSeatByID(userId) {\n        var seatIndex = this.getSeatIndexByID(userId);\n        var seat = this.seats[seatIndex];\n        return seat;\n    },\n    getSelfData: function getSelfData() {\n        return this.seats[this.seatIndex];\n    },\n    getLocalIndex: function getLocalIndex(index) {\n        var ret = (index - this.seatIndex + 4) % 4;\n        return ret;\n    },\n    getLocalIndexZJH: function getLocalIndexZJH(index) {\n        var ret = (index - this.seatIndex + 5) % 5;\n        return ret;\n    },\n    getLocalIndexByUserIdZJH: function getLocalIndexByUserIdZJH(userId) {\n        var seatIndex = this.getSeatIndexByID(userId);\n        var ret = this.getLocalIndexZJH(seatIndex);\n        return ret;\n    },\n    prepareReplay: function prepareReplay(roomInfo, detailOfGame) {\n        this.roomId = roomInfo.id;\n        this.seats = roomInfo.seats;\n        this.turn = detailOfGame.base_info.button;\n        this.room_type = 0;\n        var baseInfo = detailOfGame.base_info;\n        for (var i = 0; i < this.seats.length; ++i) {\n            var s = this.seats[i];\n            s.seatindex = i;\n            s.score = null;\n            s.holds = baseInfo.game_seats[i];\n            s.pengs = [];\n            s.caiShen = [];\n            s.chis = [];\n            s.extraPais = [];\n            s.angangs = [];\n            s.diangangs = [];\n            s.wangangs = [];\n            s.folds = [];\n            console.log(s);\n            if (cc.vv.userMgr.userId == s.userid) {\n                this.seatIndex = i;\n            }\n        }\n        this.conf = {\n            type: baseInfo.type\n        };\n        if (this.conf.type == null) {\n            this.conf.type == \"ykx\";\n        }\n    },\n    getWanfa: function getWanfa() {\n        var conf = this.conf;\n        if (conf) {\n            var strArr = [];\n            if (conf.maxGames) {\n                strArr.push(conf.maxGames + \"局\");\n            }\n            if (conf.baseScore) {\n                strArr.push(\" 底分:\" + conf.baseScore);\n            }\n            if (conf.yipaoduoxiang == true) {\n                strArr.push(\" 一炮多响\");\n            }\n            return strArr.join(\" \");\n        }\n        return \"\";\n    },\n    requireByGame: function requireByGame() {\n        // var gameHandler = require('');\n        // gameHandler.initEvents();\n    },\n    initHandlers: function initHandlers(type) {\n        cc.vv.net.handlers = {};\n        var self = this;\n        var t;\n        if (type == 2) {\n            t = require('ZjhNetMgr');\n        } else if (type == 1) {\n            t = require('CqNetMgr');\n        } else if (type == 0) {\n            t = require('MjNetMgr');\n        } else if (type == 3) {\n            t = require('DnNetMgr');\n        } else if (type == 4) {\n            t = require('DzpkNetMgr');\n        } else if (type == 100) {\n            t = require('JbsNetMgr');\n        }\n        cc.vv.NetMgr = new t();\n        cc.vv.NetMgr.initHandlers(self);\n    },\n    doGuo: function doGuo(seatIndex, pai) {\n        var seatData = this.seats[seatIndex];\n        var folds = seatData.folds;\n        if (folds) {\n            folds.push(pai);\n        }\n        this.dispatchEvent('guo_notify', seatData);\n    },\n    doMopai: function doMopai(seatIndex, pai) {\n        var seatData = this.seats[seatIndex];\n        if (seatData.holds) {\n            seatData.holds.push(pai);\n            this.dispatchEvent('game_mopai', {\n                seatIndex: seatIndex,\n                pai: pai\n            });\n        }\n    },\n    doChupai: function doChupai(seatIndex, pai) {\n        this.chupai = pai;\n        var seatData = this.seats[seatIndex];\n        if (seatData.holds) {\n            var idx = seatData.holds.indexOf(pai);\n            seatData.holds.splice(idx, 1);\n        }\n        this.dispatchEvent('game_chupai_notify', {\n            seatData: seatData,\n            pai: pai\n        });\n    },\n    doPeng: function doPeng(seatIndex, pai, extraPengPai) {\n        console.log(\"doPeng\", extraPengPai);\n        var seatData = this.seats[seatIndex];\n        //移除手牌\n        if (seatData.holds) {\n            for (var i = 0; i < 2; ++i) {\n                var idx = seatData.holds.indexOf(pai);\n                seatData.holds.splice(idx, 1);\n            }\n        }\n        //更新碰牌数据\n        var pengs = seatData.pengs;\n        pengs.push(pai);\n        if (extraPengPai != null && extraPengPai.length > 0) {\n            seatData.extraPais = extraPengPai;\n        }\n        // console.log('------------------------------------');\n        // console.log(\"玩家的手中多余的牌是\", seatData.extraPais);\n        // console.log('------------------------------------');\n        this.dispatchEvent('peng_notify', seatData);\n    },\n    doChi: function doChi(seatIndex, pai, chiArray, extraPai) {\n        var seatData = this.seats[seatIndex];\n        //移除手牌\n        // console.log(\"吃牌回掉函数\");\n        if (seatData.holds) {\n            for (var i = 0; i < 2; ++i) {\n                var idx = seatData.holds.indexOf(chiArray[i]);\n                if (idx != -1) {\n                    seatData.holds.splice(idx, 1);\n                }\n            }\n            var chis = seatData.chis;\n            chiArray.push(pai);\n            chiArray.sort(function (a, b) {\n                return a - b;\n            });\n            chis.push(chiArray);\n        }\n        if (extraPai != null && extraPai.length > 0) {\n            seatData.extraPais = extraPai;\n        }\n        this.dispatchEvent('chi_notify', seatData);\n    },\n    getGangType: function getGangType(seatData, pai) {\n        if (seatData.pengs.indexOf(pai) != -1) {\n            return \"wangang\";\n        } else {\n            var cnt = 0;\n            for (var i = 0; i < seatData.holds.length; ++i) {\n                if (seatData.holds[i] == pai) {\n                    cnt++;\n                }\n            }\n            if (cnt == 3) {\n                return \"diangang\";\n            } else {\n                return \"angang\";\n            }\n        }\n    },\n    doGang: function doGang(seatIndex, pai, gangtype) {\n        var seatData = this.seats[seatIndex];\n        if (!gangtype) {\n            gangtype = this.getGangType(seatData, pai);\n        }\n        if (gangtype == \"wangang\") {\n            if (seatData.pengs.indexOf(pai) != -1) {\n                var idx = seatData.pengs.indexOf(pai);\n                if (idx != -1) {\n                    seatData.pengs.splice(idx, 1);\n                }\n            }\n            seatData.wangangs.push(pai);\n        }\n        if (seatData.holds) {\n            for (var i = 0; i <= 4; ++i) {\n                var idx = seatData.holds.indexOf(pai);\n                if (idx == -1) {\n                    //如果没有找到，表示移完了，直接跳出循环\n                    break;\n                }\n                seatData.holds.splice(idx, 1);\n            }\n        }\n        if (gangtype == \"angang\") {\n            if (!seatData.angangs) {\n                seatData.angangs = [];\n            }\n            seatData.angangs.push(pai);\n        } else if (gangtype == \"diangang\") {\n            if (!seatData.diangangs) {\n                seatData.diangangs = [];\n            }\n            seatData.diangangs.push(pai);\n        }\n        this.dispatchEvent('gang_notify', {\n            seatData: seatData,\n            gangtype: gangtype\n        });\n    },\n    // 财神\n    doCaiShen: function doCaiShen(seatIndex, pai) {\n        console.log(\"财神!docaishen\", seatIndex, pai);\n        var seatData = this.seats[seatIndex];\n        // 移除手牌\n        if (seatData.holds) {\n            var idx = seatData.holds.indexOf(pai);\n            seatData.holds.splice(idx, 1);\n        }\n        var caiShen = seatData.caiShen;\n        caiShen.push(pai);\n        this.dispatchEvent('game_caishen_notify', seatData);\n    },\n    doHu: function doHu(data) {\n        this.dispatchEvent('hupai', data);\n    },\n    doTurnChange: function doTurnChange(si) {\n        var data = {\n            last: this.turn,\n            turn: si\n        };\n        this.turn = si;\n        this.dispatchEvent('game_chupai', data);\n    },\n    connectGameServer: function connectGameServer(data) {\n        this.initHandlers(cc.vv.userMgr.room_type);\n        this.dissoveData = null;\n        cc.vv.net.ip = data.ip + \":\" + data.port;\n        console.log(cc.vv.net.ip);\n        var self = this;\n        var onConnectOK = function onConnectOK() {\n            console.log(\"onConnectOK\");\n            var sd = {\n                token: data.token,\n                roomid: data.roomid,\n                time: data.time,\n                sign: data.sign\n            };\n            console.log(\"login============\");\n            cc.vv.net.send(\"login\", sd);\n        };\n        var onConnectFailed = function onConnectFailed() {\n            console.log(\"failed.\");\n            cc.vv.wc.hide();\n        };\n        cc.vv.wc.show(\"正在进入房间\");\n        cc.vv.net.connect(onConnectOK, onConnectFailed);\n    },\n    connectMatchServer: function connectMatchServer(connect_data, match_data) {\n        this.initHandlers(100); //锦标赛的type设为100\n        cc.vv.match_net.ip = connect_data.ip + \":\" + connect_data.port;\n        var self = this;\n        var onConnectOK = function onConnectOK() {\n            if (match_data) {\n                match_data.userid = cc.vv.userMgr.userId;\n            }\n            cc.vv.match_net.send(\"login\", match_data);\n            cc.vv.wc.hide();\n        };\n        var onConnectFailed = function onConnectFailed() {\n            cc.vv.wc.hide();\n            cc.vv.alert.show(\"注意\", \"进入比赛队列失败！\");\n        };\n\n        cc.vv.wc.show(\"正在进入比赛队列\");\n        cc.vv.match_net.connect(onConnectOK, onConnectFailed);\n    }\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n    // },\n});\n\ncc._RF.pop();","deps":{"ZjhNetMgr":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/71/716cdd90-2387-4ec7-961e-b0b3ade1b595.js","CqNetMgr":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/86/86cf7d46-ff85-40df-9fa5-9d81e648ce9a.js","MjNetMgr":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/f0/f084afba-afda-4592-9cb3-45bf9c60d3c7.js","DnNetMgr":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/b8/b88c0bfd-a676-4f80-a907-95f204053625.js","DzpkNetMgr":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/bf/bf725218-eca4-4a5f-b97d-7caffbe15229.js","JbsNetMgr":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/d4/d45224f5-f454-430d-92c4-608c2e08be13.js"}}},"packageCache":{"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/3rdparty/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/package.json":false,"/Users/zhuhao/work/svn/h5_mj/package.json":false,"/Users/zhuhao/work/svn/package.json":false,"/Users/zhuhao/work/package.json":false,"/Users/zhuhao/package.json":false,"/Users/package.json":false,"/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/3rdparty/socket-io.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/AnysdkMgr.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/AudioMgr.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/Collapse.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/CqNetMgr.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/DnNetMgr.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/DzpkNetMgr.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/GameNetMgr.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/Global.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/HTTP.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/JbsNetMgr.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/MahjongMgr.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/MatchNet.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/MjNetMgr.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/Net.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/ReplayMgr.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/UserMgr.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/Utils.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/VoiceMgr.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/ZjhNetMgr.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/components/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/components/Alert.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/components/Announcement.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/components/Charge.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/components/ChargeType.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/components/Chat.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/components/CheckBox.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/components/CreateRoom.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/components/DnChat.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/components/DzpkChat.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/components/Folds.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/components/GameOver.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/components/GameResult.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/components/Hall.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/components/History.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/components/ImageLoader.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/components/Jbs.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/components/JoinGameInput.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/components/Login.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/components/MJGame.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/components/MJRoom.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/components/Morra.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/components/MorraGame.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/components/NewHall.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/components/NoticeTip.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/components/OnBack.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/components/PengGangs.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/components/PopupMgr.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/components/RadioButton.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/components/RadioGroupMgr.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/components/ReConnect.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/components/ReplayCtrl.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/components/Seat.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/components/SelectDn.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/components/SelectDzpk.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/components/SelectMj.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/components/SelectZjh.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/components/Set.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/components/Settings.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/components/Share.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/components/TimePointer.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/components/UserSign.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/components/Voice.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/components/WaitingConnection.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/components/ZjhChat.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/dn/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/dn/dnAll.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/dn/dnSeat.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/dzpk/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/dzpk/dzpkAll.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/dzpk/dzpkSeat.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/zjh/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/zjh/all.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/assets/scripts/zjh/zjhSeat.js":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/55/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/f5/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/a0/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/86/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/b8/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/bf/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/95/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/24/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/90/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/d4/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/8a/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/f0/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/b1/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/0e/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/1a/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/74/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/b7/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/1f/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/71/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/39/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/c1/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/09/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/51/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/13/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/58/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/dc/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/ee/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/4f/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/e9/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/0b/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/fa/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/2b/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/6e/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/4d/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/ed/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/85/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/10/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/57/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/7f/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/92/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/21/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/cc/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/84/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/df/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/6f/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/27/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/bc/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/8d/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/82/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/06/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/0c/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/bd/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/4c/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/8f/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/5b/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/03/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/f6/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/5d/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/e7/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/08/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/c3/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/f9/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/02/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/package.json":false,"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/a0/a0204b46-d683-47cd-b0a9-9311af7495bc.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/a0"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/86/86cf7d46-ff85-40df-9fa5-9d81e648ce9a.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/86"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/b8/b88c0bfd-a676-4f80-a907-95f204053625.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/b8"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/bf/bf725218-eca4-4a5f-b97d-7caffbe15229.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/bf"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/95/95456e7d-4c04-4a64-b328-1c6a97a18d8d.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/95"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/24/24e30649-2e07-47de-bb35-4750afa8df14.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/24"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/90/90ae6d49-e76e-4940-8b79-b5a17735c7b6.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/90"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/d4/d45224f5-f454-430d-92c4-608c2e08be13.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/d4"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/8a/8afb3aa2-c53d-45f8-b39b-fda8c7f12570.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/8a"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/f0/f084afba-afda-4592-9cb3-45bf9c60d3c7.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/f0"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/b1/b1cc9c91-775e-425e-a160-d2f4c6299524.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/b1"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/0e/0eceae97-f881-482b-95c5-7497b7f215da.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/0e"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/1a/1a6a1a7c-e8d1-4be8-a644-6429dbbbbb6d.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/1a"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/74/74d78241-a877-4329-8ea1-72463662e2fe.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/74"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/b7/b717fcf0-c348-4dcc-8aaf-35b6f5b7dc31.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/b7"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/1f/1f06645b-2c0c-4a18-966d-90314eda4abf.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/1f"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/71/716cdd90-2387-4ec7-961e-b0b3ade1b595.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/71"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/39/39329d2f-3dcd-4821-87e1-f05ae6c5c359.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/39"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/55/55caea5c-a6f1-4ae6-bd00-c797fc8ecb38.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/55"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/c1/c1255dec-c42c-46fe-89f4-073eeb917d1f.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/c1"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/09/0957530d-fc2c-47f7-b1f1-a5295bba8f39.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/09"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/51/51026f7a-a298-4b99-924e-f1774056c619.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/51"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/13/13f267bf-e5e5-4559-b639-df5d769ee1c5.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/13"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/58/58f27af1-bacb-4db1-8951-5f77ebc8df17.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/58"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/dc/dc9e585c-7a01-4116-96e1-d02c14170f15.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/dc"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/ee/eec071ec-2f8a-419f-9fcf-893dd26017b0.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/ee"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/4f/4f606a29-80bd-4de0-ae80-b1a4e0c8aeec.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/4f"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/4f/4f140786-88b8-453c-a8cb-a6490e9051a8.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/4f"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/e9/e962c8be-2efc-47f8-8c48-68a2906752f2.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/e9"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/0b/0bf637a2-6441-4c59-b5b4-de8f217aa6b9.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/0b"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/fa/facfd963-9f1e-45fa-b143-02ae506e6a9a.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/fa"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/2b/2b08df29-9b45-410c-b625-64875f2ee3d2.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/2b"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/6e/6edb38e3-c7e1-417a-94b5-9a4d71283176.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/6e"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/4d/4d7bc8b4-2d4c-4c4f-a309-2972438fcf70.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/4d"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/ed/ed057060-a7c1-4794-96c6-23e96300dedd.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/ed"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/85/857c5af9-1e0a-4e42-9bb3-3ba21350abb7.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/85"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/10/10e328c3-b2da-4b84-8187-5ab404ab6bcd.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/10"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/10/10a1cf23-cfde-49bb-8367-a6439651f8a7.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/10"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/57/572a741f-87af-4df5-92d7-90db6100d7e2.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/57"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/7f/7f5531b4-6e84-47e8-aad3-13bc0009a5f1.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/7f"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/7f/7fa8f72f-aea1-4e8f-a961-87ac47cddddc.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/7f"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/92/921df409-65d7-49fb-9185-517ab198c993.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/92"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/21/21e6af9a-8c63-434c-9c03-1db57703bda6.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/21"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/21/21606fef-cbb4-4393-86a2-8b157a969635.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/21"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/cc/cce5aed3-b1ab-4721-a35a-a0caae6cb36f.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/cc"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/84/84dfb0fb-4179-4050-97ce-280f948dfe2c.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/84"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/df/df61be3e-1731-43bd-ba4e-e60f1435520c.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/df"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/6f/6fd6e021-897a-492e-8cee-2a5b1125d658.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/6f"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/6f/6fd98d93-ca2e-4d39-8256-b7f7c663c2e3.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/6f"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/27/279d9a4d-1464-41de-b0ff-9e0af52c85d0.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/27"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/bc/bc0d254b-80bd-40be-8d7a-ead1cbb23089.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/bc"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/8d/8d571cb6-53ef-4088-a9ed-3be4d27f415b.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/8d"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/82/82087d25-b4c6-4d0d-896f-cebfaa083109.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/82"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/82/824eaa5e-4583-4a63-8449-ce0d99e18036.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/82"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/06/0693985b-e287-4861-abe0-25fe9d3a457d.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/06"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/0c/0ceece6b-9a45-4dc1-b298-88c0dff09a56.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/0c"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/0c/0ca879af-aea6-4cb2-a3bb-3cddfc86da54.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/0c"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/bd/bd8f24f3-2507-47f8-b338-718400ccf0b7.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/bd"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/4c/4c04fc9d-f3d2-4065-8eea-1a3bee6e2f9f.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/4c"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/8f/8fc5ba4a-51d4-4474-8e5a-5643ded39dca.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/8f"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/5b/5b5867ab-3cad-47e5-b15f-acc296b3e63a.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/5b"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/03/03612852-edc8-468e-9250-2a78b85abaab.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/03"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/f6/f6db9cf4-0b17-44ce-9455-814e7af5d0ee.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/f6"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/5d/5d3d732d-253c-40a7-95d6-00c0002be44b.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/5d"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/e7/e73ac6a8-3196-4c0a-8799-066bc006d168.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/e7"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/08/08e46e30-6334-412e-a3f3-7ce74430e66c.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/08"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/c3/c3d5f890-02b1-4a63-b1f6-f6c18fe3b147.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/c3"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/f9/f97f0083-47bd-427a-af50-6f3a3f812da8.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/f9"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/02/020ad28b-0319-4142-9621-5fa0df5cd0cc.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/02"},"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/f5/f58ce6ba-96ba-4364-948d-b3604606ac4d.js":{"__dirname":"/Users/zhuhao/work/svn/h5_mj/btmj/client/library/imports/f5"},"/Applications/CocosCreator.app/Contents/Resources/app.asar/node_modules/persistify/node_modules/buffer/package.json":{"_args":[["buffer@^3.4.3","/Users/nantas/fireball-x/fb13/release-debug/dependencies/node_modules/persistify/node_modules/browserify"]],"_cnpm_publish_time":1451025492168,"_from":"buffer@>=3.4.3 <4.0.0","_hasShrinkwrap":false,"_id":"buffer@3.6.0","_inCache":true,"_installable":true,"_location":"/persistify/buffer","_nodeVersion":"4.2.3","_npmUser":{"email":"feross@feross.org","name":"feross"},"_npmVersion":"2.14.7","_phantomChildren":{},"_requested":{"name":"buffer","raw":"buffer@^3.4.3","rawSpec":"^3.4.3","scope":null,"spec":">=3.4.3 <4.0.0","type":"range"},"_requiredBy":["/persistify/browserify"],"_resolved":"https://registry.npm.taobao.org/buffer/download/buffer-3.6.0.tgz","_shasum":"a72c936f77b96bf52f5f7e7b467180628551defb","_shrinkwrap":null,"_spec":"buffer@^3.4.3","_where":"/Users/nantas/fireball-x/fb13/release-debug/dependencies/node_modules/persistify/node_modules/browserify","author":{"email":"feross@feross.org","name":"Feross Aboukhadijeh","url":"http://feross.org"},"bugs":{"url":"https://github.com/feross/buffer/issues"},"contributors":[{"email":"toots@rastageeks.org","name":"Romain Beauxis"},{"email":"mail@substack.net","name":"James Halliday"}],"dependencies":{"base64-js":"0.0.8","ieee754":"^1.1.4","isarray":"^1.0.0"},"description":"Node.js Buffer API, for the browser","devDependencies":{"benchmark":"^1.0.0","browserify":"^12.0.1","concat-stream":"^1.4.7","hyperquest":"^1.0.1","is-nan":"^1.0.1","split":"^1.0.0","standard":"^5.0.0","tape":"^4.0.0","through2":"^2.0.0","zuul":"^3.0.0"},"directories":{},"dist":{"shasum":"a72c936f77b96bf52f5f7e7b467180628551defb","tarball":"https://registry.npmjs.org/buffer/-/buffer-3.6.0.tgz"},"gitHead":"73e77e481f6ebc7a97be87468ddf9e8daf72a93c","homepage":"https://github.com/feross/buffer","jspm":{"map":{"./index.js":{"node":"@node/buffer"}}},"keywords":["buffer","browserify","compatible","browser","arraybuffer","uint8array","dataview"],"license":"MIT","main":"index.js","maintainers":[{"email":"feross@feross.org","name":"feross"}],"name":"buffer","optionalDependencies":{},"readme":"ERROR: No README data found!","repository":{"type":"git","url":"git://github.com/feross/buffer.git"},"scripts":{"perf":"browserify --debug perf/bracket-notation.js > perf/bundle.js && open perf/index.html","perf-node":"node perf/bracket-notation.js && node perf/concat.js && node perf/copy-big.js && node perf/copy.js && node perf/new-big.js && node perf/new.js && node perf/readDoubleBE.js && node perf/readFloatBE.js && node perf/readUInt32LE.js && node perf/slice.js && node perf/writeFloatBE.js","size":"browserify -r ./ | uglifyjs -c -m | gzip | wc -c","test":"standard && node ./bin/test.js","test-browser":"zuul -- test/*.js test/node/*.js","test-browser-local":"zuul --local -- test/*.js test/node/*.js","test-node":"tape test/*.js test/node/*.js test/node-es6/*.js && OBJECT_IMPL=true tape test/*.js test/node/*.js"},"standard":{"ignore":["test/node/*.js","test/node-es6/*.js","test/_polyfill.js","perf/*.js"]},"version":"3.6.0","__dirname":"/Applications/CocosCreator.app/Contents/Resources/app.asar/node_modules/persistify/node_modules/buffer"},"/Applications/CocosCreator.app/Contents/Resources/app.asar/node_modules/persistify/node_modules/buffer/index.js":"~persistifyArgs~packageCache~/Applications/CocosCreator.app/Contents/Resources/app.asar/node_modules/persistify/node_modules/buffer/package.json"}}}
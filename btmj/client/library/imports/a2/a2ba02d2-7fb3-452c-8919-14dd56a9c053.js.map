{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [
    "cc",
    "Class",
    "extends",
    "Component",
    "properties",
    "_calBack",
    "console",
    "log",
    "calculate",
    "sd",
    "laizi",
    "k",
    "callback",
    "game",
    "daPai",
    "_debug",
    "checkCanTingPai",
    "seatData",
    "allowTingFlag",
    "huHolds",
    "h_holds",
    "holds",
    "i",
    "length",
    "pp",
    "getMJ_BID",
    "push",
    "count",
    "countMap",
    "tM",
    "hupaiDict",
    "canChiDic",
    "ctx",
    "checkConfig",
    "b_ctx",
    "getMJ_SID",
    "isQingYiSe",
    "reType",
    "begin",
    "end",
    "isWantQingYiSe",
    "checkTinPaiRange",
    "getMJType",
    "phs",
    "p2",
    "p5",
    "p8",
    "isWant258",
    "s_p",
    "key",
    "d",
    "tingData",
    "startX",
    "startY",
    "y_deepCopy",
    "hasConfirms",
    "hupaiCurrent",
    "slice",
    "currentPai",
    "canHu",
    "hasChi",
    "chis",
    "laizi_used",
    "tempHo",
    "tempHo_str",
    "sort",
    "sortNumber",
    "join",
    "indexOf",
    "check_qingYiSe_single",
    "ppFlag",
    "is_PP_hu",
    "check_258_Single",
    "tempHolds",
    "is_258_holds",
    "pk",
    "pop",
    "a",
    "b",
    "variance",
    "numbers",
    "mean",
    "sum",
    "Math",
    "pow",
    "_piJiangs",
    "_is258Valid",
    "m_p",
    "getMJ_Value",
    "parseInt",
    "valid",
    "dict_huifuMjValue",
    "dict",
    "huifuMjValue",
    "value",
    "id",
    "holdsLog",
    "h",
    "hu",
    "th",
    "pai",
    "check_qing_onlyLaizi",
    "pointedJiangDict",
    "onePointed",
    "hasPointedJiang",
    "m",
    "r",
    "n",
    "old_a",
    "daPaiCount",
    "pointedPai",
    "twoLai2Jiang",
    "LiPai",
    "isNaN",
    "removeByValue",
    "oneLai2Jiang",
    "oneLaiToJiang",
    "isSameType",
    "type",
    "arr",
    "t",
    "isFengYiSe",
    "config",
    "forEach",
    "val",
    "angangs",
    "wangangs",
    "diangangs",
    "pengs",
    "chiedPais",
    "self",
    "r_flag",
    "some",
    "validFlag",
    "r_flag_anGang",
    "r_flag_diangang",
    "r_flag_wangangs",
    "r_flag_pengs",
    "isValid",
    "bCount",
    "countDict",
    "eleCountInArr",
    "okArr",
    "paisArr",
    "tp",
    "zaArr",
    "_delSubArr",
    "s_zaArr",
    "isPengPenghu_1",
    "isPengPenghu_2",
    "isPengPenghu_3",
    "tmp",
    "isHard",
    "canHuCtxConfig",
    "CountOfBaiDa",
    "is_258_valid",
    "splice",
    "arrContains",
    "endX",
    "obj",
    "elementAtArray",
    "valueInArrNum",
    "num",
    "map",
    "ai",
    "_PartToLeft",
    "ta",
    "v1",
    "shift",
    "_PartToRight",
    "ha",
    "laizi_s",
    "laizi_usedNum",
    "usedLaiNum",
    "ctx_last1",
    "ctx_last2",
    "tkD",
    "jiang_s",
    "L2JCount",
    "concat",
    "ele",
    "j_p",
    "j_value",
    "j_type",
    "LeftCount",
    "MidCount",
    "RightCount",
    "userId",
    "JSON",
    "stringify",
    "zaPaiNum",
    "endM",
    "startM",
    "j",
    "bHuFlag",
    "v0",
    "usedLaiSConfig",
    "canChiFlag",
    "judge3Type",
    "LiZaPai",
    "tong",
    "tongResult",
    "tiao",
    "tiaoResult",
    "wan",
    "wanResult",
    "others",
    "othersResult",
    "result",
    "maxValue",
    "zaPai",
    "LiShunZi",
    "zaPai2",
    "result2",
    "tempS",
    "_betterZaPai",
    "zaPai3",
    "result3",
    "rArr",
    "LiShunZiSide",
    "p",
    "OKCount",
    "x",
    "t1",
    "t2",
    "sa",
    "ya",
    "lFlag",
    "t3",
    "foundFlag",
    "t3Flag",
    "fenGeValue",
    "vi",
    "index",
    "fenCount",
    "fenIndex",
    "leftArr",
    "rightArr",
    "zaPaiLeft",
    "resultLeft",
    "countLeft",
    "maxValueLeft",
    "zaPaiRight",
    "resultRight",
    "countRight",
    "maxValueRight",
    "zaPaiTotal",
    "resultAll",
    "differentElements_InArr",
    "Object",
    "keys",
    "z1",
    "z2",
    "l",
    "dl",
    "f1",
    "f2",
    "canChiArr",
    "canChi",
    "vle",
    "totalArr",
    "subArr",
    "options",
    "name",
    "src",
    "copy",
    "copyIsArray",
    "clone",
    "target",
    "arguments",
    "deep",
    "y_isFunction",
    "y_isPlainObject",
    "Array",
    "isArray",
    "undefined",
    "prototype",
    "toString",
    "call"
  ],
  "mappings": "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",
  "file": "unknown",
  "sourcesContent": [
    "cc.Class({\r\n    extends: cc.Component,\r\n    properties: {},\r\n    _calBack: function() {\r\n        console.log(\"_calBack\");\r\n    },\r\n    calculate: function(sd, laizi, k, callback) {\r\n        var game = {\r\n            daPai: laizi\r\n        };\r\n        this._debug = false;\r\n        this.checkCanTingPai(game, sd, k, callback);\r\n    },\r\n    checkCanTingPai: function(game, seatData, k, callback) {\r\n        callback = callback || this._calBack;\r\n        if (!seatData.allowTingFlag) {\r\n            callback(null);\r\n            return;\r\n        }\r\n        var huHolds = [];\r\n        var h_holds = seatData.holds;\r\n        for (var i = 0; i < h_holds.length; i++) {\r\n            var pp = h_holds[i];\r\n            pp = this.getMJ_BID(pp);\r\n            huHolds.push(pp);\r\n            if (pp >= 100) {\r\n                var count = seatData.countMap[pp];\r\n                if (!count) {\r\n                    count = 1;\r\n                } else {\r\n                    count++;\r\n                }\r\n                seatData.countMap[pp] = count;\r\n            }\r\n        }\r\n        seatData.huHolds = huHolds;\r\n        var tM = [];\r\n        seatData.hupaiDict = {};\r\n        seatData.canChiDic = {};\r\n        seatData.ctx = {};\r\n        var checkConfig = {\r\n            tM: tM\r\n        };\r\n        var b_ctx = {\r\n            daPai: this.getMJ_SID(game.daPai)\r\n        };\r\n        if (this.isQingYiSe(seatData, b_ctx)) {\r\n            //清一色,风一色都走这里\r\n            //除癞子之外剩下的都是同一种颜色。\r\n            //此副牌可能是:\r\n            //          大胡:需要下一张摸到的是癞子。或者同一种类型的牌。\r\n            //          屁胡:需要非同类型的2,5,8\r\n            var reType = b_ctx.reType;\r\n            var begin = reType * 9;\r\n            var end = (reType + 1) * 9;\r\n            end = end > 34 ? 34 : end;\r\n            checkConfig.reType = reType;\r\n            checkConfig.isWantQingYiSe = true;\r\n            this.checkTinPaiRange(begin, end, game, seatData, checkConfig);\r\n            if (this.getMJType(b_ctx.daPai) !== reType) {\r\n                this.checkTinPaiRange(b_ctx.daPai, b_ctx.daPai + 1, game, seatData, checkConfig);\r\n            }\r\n            checkConfig.isWantQingYiSe = false;\r\n            //计算屁胡\r\n            var phs = [];\r\n            for (var i = 0; i < 3; i++) {\r\n                if (i != reType) {\r\n                    var p2 = i * 9 + 1;\r\n                    var p5 = i * 9 + 4;\r\n                    var p8 = i * 9 + 7;\r\n                    phs.push(p2);\r\n                    phs.push(p5);\r\n                    phs.push(p8);\r\n                }\r\n            }\r\n            checkConfig.isWant258 = true;\r\n            for (var i = 0; i < phs.length; i++) {\r\n                var s_p = phs[i];\r\n                this.checkTinPaiRange(s_p, s_p + 1, game, seatData, checkConfig);\r\n            }\r\n        } else {\r\n            checkConfig.isWant258 = true;\r\n            this.checkTinPaiRange(0, 34, game, seatData, checkConfig);\r\n        }\r\n        for (var key in seatData.countMap) {\r\n            if (key >= 100) {\r\n                seatData.countMap[key] = 0;\r\n            }\r\n        }\r\n        if (k != null) {\r\n            var d = {\r\n                tingData: seatData.ctx.tingData,\r\n                k: k\r\n            }\r\n            callback(d);\r\n        } else {\r\n            callback(seatData.ctx.tingData);\r\n        }\r\n    },\r\n    checkTinPaiRange: function(startX, startY, game, seatData, checkConfig) {\r\n        for (var i = startX; i < startY; i++) {\r\n            var k = this.getMJ_BID(i);\r\n            if (seatData.ctx && seatData.ctx.tingData) {\r\n                if (seatData.ctx.tingData[this.getMJ_SID(k)]) {\r\n                    continue;\r\n                }\r\n            }\r\n            var count = seatData.countMap[k];\r\n            if (!count) {\r\n                count = 1;\r\n            } else {\r\n                count++;\r\n            }\r\n            if (count > 4) {\r\n                continue;\r\n            }\r\n            seatData.countMap[k] = count;\r\n            seatData.huHolds.push(k);\r\n            var tingData = {};\r\n            if (seatData.ctx && seatData.ctx.tingData) {\r\n                tingData = this.y_deepCopy(true, {}, seatData.ctx.tingData);\r\n            }\r\n            var hasConfirms = [];\r\n            if (seatData.ctx && seatData.ctx.hasConfirms) {\r\n                hasConfirms = seatData.ctx.hasConfirms;\r\n            }\r\n            var ctx = seatData.ctx = {\r\n                key: this.getMJ_SID(k),\r\n                daPai: this.getMJ_SID(game.daPai),\r\n                tingData: tingData,\r\n                hupaiCurrent: [],\r\n                huHolds: seatData.huHolds.slice(0),\r\n                currentPai: i,\r\n                canHu: false,\r\n                canChiDic: {},\r\n                hasConfirms: hasConfirms,\r\n                hasChi: (seatData.chis.length > 0),\r\n                laizi_used: -1, //只有屁胡时这个值才有效\r\n            };\r\n            if (checkConfig.isWantQingYiSe) {\r\n                var tempHo = ctx.huHolds.slice(0);\r\n                var tempHo_str = tempHo.sort(this.sortNumber).join(\"\");\r\n                if (ctx.hasConfirms.indexOf(tempHo_str) == -1) {\r\n                    this.check_qingYiSe_single(game, seatData, ctx)\r\n                    if (ctx.canHu) {\r\n                        if (checkConfig.reType == 3) {\r\n                            ctx.tingData[ctx.key][\"isFengYiSe\"] = true;\r\n                        } else {\r\n                            ctx.tingData[ctx.key][\"isQingYiSe\"] = true;\r\n                        }\r\n                    }\r\n                    ctx.hasConfirms.push(tempHo_str);\r\n                }\r\n            }\r\n            if (checkConfig.isWant258) {\r\n                var tempHo = ctx.huHolds.slice(0);\r\n                var tempHo_str = tempHo.sort(this.sortNumber).join(\"\");\r\n                if (ctx.hasConfirms.indexOf(tempHo_str) == -1) {\r\n                    //先判断可能是碰碰胡吗\r\n                    var ppFlag = this.is_PP_hu(game, seatData, ctx);\r\n                    if (ppFlag) {\r\n                        ctx.tingData[ctx.key][\"isPengpengHu\"] = true;\r\n                    } else {\r\n                        this.check_258_Single(game, seatData, ctx);\r\n                        if (ctx.canHu) {\r\n                            var tempHolds = ctx.tingData[ctx.key][\"hu\"];\r\n                            if (this.is_258_holds(seatData, {\r\n                                    daPai: this.getMJ_SID(game.daPai)\r\n                                }, ctx)) {\r\n                                ctx.tingData[ctx.key][\"isJiangYiSe\"] = true;\r\n                            }\r\n                        }\r\n                    }\r\n                    ctx.hasConfirms.push(tempHo_str);\r\n                }\r\n            }\r\n            count--;\r\n            seatData.countMap[k] = count;\r\n            if (ctx.canHu) {\r\n                var pk = this.getMJ_SID(k);\r\n                // tM.push(pk);\r\n            }\r\n            seatData.ctx.hupaiCurrent = [];\r\n            seatData.huHolds.pop();\r\n            // console.log(\"countMap:--->>>\"+JSON.stringify(seatData.countMap));\r\n        }\r\n    },\r\n    sortNumber: function(a, b) {\r\n        return a - b;\r\n    },\r\n    //“样本方差”,numbers.length>1\r\n    variance: function(numbers) {\r\n        var mean = 0;\r\n        var sum = 0;\r\n        for (var i = 0; i < numbers.length; i++) {\r\n            sum += numbers[i];\r\n        }\r\n        mean = sum / numbers.length;\r\n        sum = 0;\r\n        for (var i = 0; i < numbers.length; i++) {\r\n            sum += Math.pow(numbers[i] - mean, 2);\r\n        }\r\n        return sum / (numbers.length - 1);\r\n    },\r\n    _piJiangs: function() {\r\n        //下标从0开始\r\n        return [1, 4, 7];\r\n    },\r\n    _is258Valid: function(m_p) {\r\n        if (m_p == null) {\r\n            return false;\r\n        }\r\n        m_p = this.getMJ_Value(parseInt(m_p));\r\n        var valid = m_p === this._piJiangs()[0] || m_p === this._piJiangs()[1] || m_p === this._piJiangs()[2];\r\n        return valid;\r\n    },\r\n    dict_huifuMjValue: function(game, dict) {\r\n        for (var key in dict) {\r\n            var holds = dict[key];\r\n            dict[key] = this.huifuMjValue(game, holds);\r\n        }\r\n    },\r\n    //目的:把[9-17] [18-27] 转换成[100-108] [200-208]\r\n    getMJ_BID: function(value) {\r\n        if (value >= 9 && value <= 17) {\r\n            //转换成 [100 108];\r\n            value = value - 9 + 100;\r\n        }\r\n        if (value >= 18 && value <= 26) {\r\n            //转换成 [200 208]\r\n            value = value - 18 + 200;\r\n        }\r\n        if (value >= 27 && value <= 34) {\r\n            value = 20 * (value - 27) + 300;\r\n        }\r\n        return value;\r\n    },\r\n    getMJ_SID: function(value) {\r\n        if (value >= 100 && value <= 108) {\r\n            value = value - 100 + 9;\r\n        }\r\n        if (value >= 200 && value <= 208) {\r\n            value = value - 200 + 18;\r\n        }\r\n        if (value >= 300 && value <= 500) {\r\n            value = (value - 300) / 20 + 27;\r\n        }\r\n        return value;\r\n    },\r\n    getMJ_Value: function(id) {\r\n        var value = id = this.getMJ_SID(id);\r\n        value = this.getMJType(id) < 3 ? value % 9 : value;\r\n        return value;\r\n    },\r\n    getMJType: function(value) {\r\n        var id = this.getMJ_SID(value);\r\n        if (id >= 0 && id < 9) {\r\n            //筒\r\n            return 0;\r\n        } else if (id >= 9 && id < 18) {\r\n            //条\r\n            return 1;\r\n        } else if (id >= 18 && id < 27) {\r\n            //万\r\n            return 2;\r\n        } else {\r\n            //风\r\n            return 3;\r\n        }\r\n    },\r\n    holdsLog: function(seatData) {\r\n        var h = [\"1筒\", \"2筒\", \"3筒\", \"4筒\", \"5筒\", \"6筒\", \"7筒\", \"8筒\", \"9筒\", \"1条\", \"2条\", \"3条\", \"4条\", \"5条\", \"6条\", \"7条\", \"8条\", \"9条\", \"1万\", \"2万\", \"3万\", \"4万\", \"5万\", \"6万\", \"7万\", \"8万\", \"9万\", \"东风\", \"南风\", \"西风\", \"北风\", \"红中\", \"发财\", \"白板\"];\r\n        var hu = [];\r\n        var th = seatData.holds.slice(0).sort(this.sortNumber);\r\n        for (var i = 0; i < th.length; i++) {\r\n            var value = th[i];\r\n            var pai = h[value];\r\n            hu.push(pai);\r\n        }\r\n        return hu;\r\n    },\r\n    huifuMjValue: function(game, holds) {\r\n        game.daPai = this.getMJ_SID(game.daPai);\r\n        var hu = [];\r\n        for (var i = 0; i < holds.length; i++) {\r\n            var value = this.getMJ_SID(holds[i]);\r\n            hu.push(value);\r\n        }\r\n        return hu;\r\n    },\r\n    check_qing_onlyLaizi: function(game, seatData, ctx) {\r\n        ctx = ctx || {};\r\n        //3)两个癞子做将\r\n        ctx.pointedJiangDict = {};\r\n        ctx.onePointed = {};\r\n        ctx.canHu = false;\r\n        ctx.hasPointedJiang = false;\r\n        game.daPai = this.getMJ_BID(game.daPai);\r\n        ctx.daPai = game.daPai;\r\n        var m = 0;\r\n        var r = ctx.huHolds.slice(0);\r\n        var n = r.length;\r\n        var a = [];\r\n        for (var i = 0; i < n; i++) {\r\n            if (r[i] != game.daPai) {\r\n                //如果不是百搭\r\n                a[m++] = r[i];\r\n            }\r\n        }\r\n        var old_a = a.sort(this.sortNumber);\r\n        var daPaiCount = ctx.daPaiCount = n - m;\r\n        for (var pai in seatData.countMap) {\r\n            if ((pai >= 100 || (pai <= 8 && pai >= 0)) && (pai != this.getMJ_BID(game.daPai))) {\r\n                if (seatData.countMap[pai] >= 1) {\r\n                    ctx.onePointed[pai] = 1;\r\n                }\r\n            }\r\n        }\r\n        if (daPaiCount >= 2) {\r\n            a = old_a.slice(0);\r\n            ctx.hupaiCurrent = [];\r\n            ctx.hasPointedJiang = true;\r\n            ctx.pointedPai = game.daPai;\r\n            ctx.twoLai2Jiang = true;\r\n            this.LiPai(a.sort(), 0, a.length, 0, daPaiCount - 2, seatData, game, ctx);\r\n            ctx.twoLai2Jiang = false;\r\n            if (ctx.canHu) {\r\n                return;\r\n            }\r\n        }\r\n        //2) 一张癞子配将\r\n        for (var key in ctx.onePointed) {\r\n            if (!isNaN(key)) {\r\n                a = old_a.slice(0);\r\n                ctx.hupaiCurrent = [];\r\n                ctx.hasPointedJiang = true;\r\n                ctx.pointedPai = key;\r\n                this.removeByValue(a, key);\r\n                ctx.oneLai2Jiang = true;\r\n                this.LiPai(a.sort(), 0, a.length, 0, daPaiCount - 1, seatData, game, ctx);\r\n                ctx.oneLaiToJiang = false;\r\n                if (ctx.canHu) {\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n    },\r\n    check_qingYiSe_single: function(game, seatData, ctx) {\r\n        ctx = ctx || {};\r\n        //任意牌可以做将\r\n        //癞子可以被当做任意牌\r\n        //目的: 给了一张牌。判断这张牌能不能胡\r\n        //1)个数>=2,\r\n        //2)个数==1, //拿一个癞子配合作为将\r\n        //3)两个癞子做将\r\n        ctx.pointedJiangDict = {};\r\n        ctx.onePointed = {};\r\n        ctx.canHu = false;\r\n        ctx.hasPointedJiang = false;\r\n        game.daPai = this.getMJ_BID(game.daPai);\r\n        ctx.daPai = game.daPai;\r\n        var m = 0;\r\n        var r = ctx.huHolds.slice(0);\r\n        var n = r.length;\r\n        var a = [];\r\n        for (var i = 0; i < n; i++) {\r\n            if (r[i] != game.daPai) {\r\n                //如果不是百搭\r\n                a[m++] = r[i];\r\n            }\r\n        }\r\n        var old_a = a.sort(this.sortNumber);\r\n        var daPaiCount = ctx.daPaiCount = n - m;\r\n        //取当前牌中所有>=2的牌做一次将头\r\n        for (var pai in seatData.countMap) {\r\n            if ((pai >= 100 || (pai <= 8 && pai >= 0)) && (pai != this.getMJ_BID(game.daPai))) {\r\n                if (seatData.countMap[pai] >= 2) {\r\n                    ctx.pointedJiangDict[pai] = 1;\r\n                } else if (seatData.countMap[pai] >= 1) {\r\n                    ctx.onePointed[pai] = 1;\r\n                }\r\n            }\r\n        }\r\n        //理牌完成后,在进行一次指定将牌\r\n        //1) 不需癞子配将\r\n        for (var key in ctx.pointedJiangDict) {\r\n            if (!isNaN(key)) {\r\n                a = old_a.slice(0);\r\n                ctx.hupaiCurrent = [];\r\n                ctx.hasPointedJiang = true;\r\n                ctx.pointedPai = key;\r\n                this.removeByValue(a, key);\r\n                this.removeByValue(a, key);\r\n                this.LiPai(a.sort(), 0, a.length, 0, daPaiCount, seatData, game, ctx);\r\n                if (ctx.canHu) {\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n        if (daPaiCount < 1) {\r\n            return;\r\n        }\r\n        //2) 一张癞子配将\r\n        for (var key in ctx.onePointed) {\r\n            if (!isNaN(key)) {\r\n                a = old_a.slice(0);\r\n                ctx.hupaiCurrent = [];\r\n                ctx.hasPointedJiang = true;\r\n                ctx.pointedPai = key;\r\n                this.removeByValue(a, key);\r\n                ctx.oneLai2Jiang = true;\r\n                this.LiPai(a.sort(), 0, a.length, 0, daPaiCount - 1, seatData, game, ctx);\r\n                ctx.oneLaiToJiang = false;\r\n                if (ctx.canHu) {\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n        //3)4) 两张癞子做将\r\n        if (daPaiCount >= 2) {\r\n            a = old_a.slice(0);\r\n            ctx.hupaiCurrent = [];\r\n            ctx.hasPointedJiang = true;\r\n            ctx.pointedPai = game.daPai;\r\n            ctx.twoLai2Jiang = true;\r\n            this.LiPai(a.sort(), 0, a.length, 0, daPaiCount - 2, seatData, game, ctx);\r\n            ctx.twoLai2Jiang = false;\r\n            if (ctx.canHu) {\r\n                return;\r\n            }\r\n        }\r\n    },\r\n    isSameType: function(type, arr) {\r\n        if (typeof arr == 'undefined') {\r\n            return false;\r\n        }\r\n        for (var i = 0; i < arr.length; ++i) {\r\n            var t = this.getMJType(arr[i]);\r\n            if (type != -1 && type != t) {\r\n                return false;\r\n            }\r\n            type = t;\r\n        }\r\n        return true;\r\n    },\r\n    isFengYiSe: function(sd, config) {\r\n        config = config || {};\r\n        config.type = 3;\r\n        return this.isQingYiSe(sd, config);\r\n    },\r\n    // 清一色 --X分\r\n    isQingYiSe: function(sd, config) {\r\n        //清一色，也可以判断是否是风一色。风一色type值需要传3\r\n        var type = this.getMJType(sd.holds[0]);\r\n        var daPai = -1;\r\n        if (config) {\r\n            type = (config.type != null && config.type == 3) ? config.type : type;\r\n            daPai = config.daPai;\r\n        }\r\n        var huHolds = [];\r\n        sd.holds.forEach(function(val) {\r\n            if (val != config.daPai) {\r\n                huHolds.push(val);\r\n            }\r\n        });\r\n        //检查手上的牌\r\n        if (this.isSameType(type, huHolds) == false) {\r\n            return false;\r\n        }\r\n        //检查杠下的牌\r\n        if (this.isSameType(type, sd.angangs) == false) {\r\n            return false;\r\n        }\r\n        if (this.isSameType(type, sd.wangangs) == false) {\r\n            return false;\r\n        }\r\n        if (this.isSameType(type, sd.diangangs) == false) {\r\n            return false;\r\n        }\r\n        //检查碰牌\r\n        if (this.isSameType(type, sd.pengs) == false) {\r\n            return false;\r\n        }\r\n        //检查吃\r\n        if (this.isSameType(type, sd.chiedPais) == false) {\r\n            return false;\r\n        }\r\n        config.reType = type;\r\n        return true;\r\n    },\r\n    is_258_holds: function(sd, config) {\r\n        var arr = sd.holds;\r\n        var laizi = config.daPai;\r\n        if (arr == null) {\r\n            return false;\r\n        }\r\n        if (sd.chis.length > 0) {\r\n            return false;\r\n        }\r\n        var huHolds = [];\r\n        arr.forEach(function(val) {\r\n            if (val != laizi) {\r\n                huHolds.push(val);\r\n            }\r\n        });\r\n        var self = this;\r\n        //是否有牌不是2,5,8\r\n        var r_flag = huHolds.some(function(id) {\r\n            var value = id % 9 + 1;\r\n            var validFlag = (value === 2 || value === 5 || value === 8) && self.getMJType(id) < 3;\r\n            if (!validFlag) {\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n        var r_flag_anGang = sd.angangs.some(function(id) {\r\n            var value = id % 9 + 1;\r\n            var validFlag = (value === 2 || value === 5 || value === 8) && self.getMJType(id) < 3;\r\n            if (!validFlag) {\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n        var r_flag_diangang = sd.diangangs.some(function(id) {\r\n            var value = id % 9 + 1;\r\n            var validFlag = (value === 2 || value === 5 || value === 8) && self.getMJType(id) < 3;\r\n            if (!validFlag) {\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n        var r_flag_wangangs = sd.wangangs.some(function(id) {\r\n            var value = id % 9 + 1;\r\n            var validFlag = (value === 2 || value === 5 || value === 8) && self.getMJType(id) < 3;\r\n            if (!validFlag) {\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n        var r_flag_pengs = sd.pengs.some(function(id) {\r\n            var value = id % 9 + 1;\r\n            var validFlag = (value === 2 || value === 5 || value === 8) && self.getMJType(id) < 3;\r\n            if (!validFlag) {\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n        //最后返回的结果取反。(some取反)\r\n        var isValid = !r_flag && !r_flag_anGang && !r_flag_diangang && !r_flag_wangangs && !r_flag_pengs;\r\n        return isValid;\r\n    },\r\n    // is_258_holds: function(arr, config) {\r\n    //     if (arr == null) {\r\n    //         return false;\r\n    //     }\r\n    //     var huHolds = [];\r\n    //     arr.forEach(function(val) {\r\n    //         if (val != config.daPai) {\r\n    //             huHolds.push(val);\r\n    //         }\r\n    //     });\r\n    //     var self = this;\r\n    //     //是否有牌不是2,5,8\r\n    //     var r_flag = huHolds.some(function(id) {\r\n    //         var value = id % 9 + 1;\r\n    //         var validFlag = (value === 2 || value === 5 || value === 8) && self.getMJType(id) < 3;\r\n    //         if (!validFlag) {\r\n    //             return true;\r\n    //         }\r\n    //         return false;\r\n    //     });\r\n    //     //最后返回的结果取反。(some取反)\r\n    //     return !r_flag;\r\n    // },\r\n    is_PP_hu: function(game, seatData, ctx) {\r\n        var laizi = ctx.daPai;\r\n        var self = this;\r\n        var arr = ctx.huHolds;\r\n        if (arr == null) {\r\n            return false;\r\n        }\r\n        if (ctx.hasChi) {\r\n            return false;\r\n        }\r\n        var huHolds = [];\r\n        arr.forEach(function(val) {\r\n            if (self.getMJ_SID(val) != ctx.daPai) {\r\n                huHolds.push(val);\r\n            }\r\n        });\r\n        var bCount = arr.length - huHolds.length;\r\n        var countDict = this.eleCountInArr(huHolds);\r\n        var okArr = [];\r\n        var paisArr = [];\r\n        //把刻字当成成型的牌。不是刻子当成杂牌\r\n        for (var key in countDict) {\r\n            var tp = parseInt(key);\r\n            var value = countDict[key];\r\n            if (value >= 3) {\r\n                okArr.push(tp);\r\n                okArr.push(tp);\r\n                okArr.push(tp);\r\n            } else if (value == 2) {\r\n                paisArr.push(tp);\r\n                paisArr.push(tp);\r\n            }\r\n        }\r\n        var zaArr = this._delSubArr(huHolds, okArr);\r\n        var s_zaArr = this._delSubArr(zaArr, paisArr);\r\n        //第一种情况单牌的数目*2+paisArr.length/2 - 1 正好是百搭的个数\r\n        //将头是对子中的一个\r\n        //第二种情况将是 单+癞子\r\n        //第三种是癞子做将\r\n        var isPengPenghu_1 = false;\r\n        var isPengPenghu_2 = false;\r\n        var isPengPenghu_3 = false;\r\n        if (paisArr.length >= 2) {\r\n            var tmp = (s_zaArr.length * 2 + paisArr.length / 2 - 1);\r\n            isPengPenghu_1 = tmp == bCount;\r\n            if (tmp == 0 && bCount == 3) {\r\n                isPengPenghu_1 = true;\r\n            }\r\n            if (isPengPenghu_1) {\r\n                ctx.hupaiCurrent = [];\r\n                ctx.pointedPai = paisArr[0];\r\n                this.removeByValue(huHolds, paisArr[0]);\r\n                this.removeByValue(huHolds, paisArr[0]);\r\n                var isHard = false;\r\n                if (s_zaArr.length == 0 && paisArr.length == 2) {\r\n                    isHard = true;\r\n                }\r\n                this.canHuCtxConfig(ctx, huHolds, {\r\n                    isHard: isHard,\r\n                    CountOfBaiDa: bCount\r\n                });\r\n                return true;\r\n            }\r\n        }\r\n        if (bCount >= 1 && s_zaArr.length >= 1) {\r\n            tmp = ((s_zaArr.length - 1) * 2 + paisArr.length / 2);\r\n            isPengPenghu_2 = tmp == bCount - 1;\r\n            if (tmp == 0 && bCount - 1 == 3) {\r\n                isPengPenghu_2 = true;\r\n            }\r\n        }\r\n        if (isPengPenghu_2) {\r\n            ctx.hupaiCurrent = [];\r\n            ctx.hasPointedJiang = true;\r\n            ctx.pointedPai = s_zaArr[0];\r\n            this.removeByValue(huHolds, s_zaArr[0]);\r\n            ctx.oneLai2Jiang = true;\r\n            for (var i = 0; i < bCount - 1; i++) {\r\n                huHolds.push(laizi);\r\n            }\r\n            this.canHuCtxConfig(ctx, huHolds, {\r\n                isHard: false,\r\n                CountOfBaiDa: bCount\r\n            });\r\n            ctx.oneLai2Jiang = false;\r\n            return true;\r\n        }\r\n        if (bCount >= 2) {\r\n            var tmp = (s_zaArr.length * 2 + paisArr.length / 2);\r\n            isPengPenghu_3 = tmp == bCount - 2;\r\n        }\r\n        if (isPengPenghu_3) {\r\n            ctx.hupaiCurrent = [];\r\n            ctx.hasPointedJiang = true;\r\n            ctx.pointedPai = ctx.daPai;\r\n            ctx.twoLai2Jiang = true;\r\n            for (var i = 0; i < bCount - 2; i++) {\r\n                huHolds.push(laizi);\r\n            }\r\n            this.canHuCtxConfig(ctx, huHolds, {\r\n                isHard: true,\r\n                CountOfBaiDa: bCount\r\n            });\r\n            ctx.twoLai2Jiang = false;\r\n            return true;\r\n        }\r\n        return false;\r\n    },\r\n    check_258_Single: function(game, seatData, ctx) {\r\n        ctx = ctx || {};\r\n        //专门用来计算2,5,8为将的听牌\r\n        //屁胡,杠开,抢杠,海底捞月都必须以2,5,8为将,\r\n        //癞子可以被当做任意牌\r\n        //目的: 给了一张牌。判断这张牌能不能胡\r\n        //1)个数>=2,\r\n        //2)个数==1, //拿一个癞子配合作为将\r\n        //3)个数==0  //拿两个癞子作为将。屁胡只能用一个癞子作为将\r\n        //4)癞子就是2,5,8中的一种 //情况同1)个数必须是>=2\r\n        //\r\n        ctx.pointedJiangDict = {};\r\n        ctx.onePointed = {};\r\n        ctx.canHu = false;\r\n        ctx.hasPointedJiang = false;\r\n        game.daPai = this.getMJ_BID(game.daPai);\r\n        ctx.daPai = game.daPai;\r\n        var m = 0;\r\n        var r = ctx.huHolds.slice(0);\r\n        var n = r.length;\r\n        var a = [];\r\n        for (var i = 0; i < n; i++) {\r\n            if (r[i] != game.daPai) {\r\n                //如果不是百搭\r\n                a[m++] = r[i];\r\n            }\r\n        }\r\n        var old_a = a.sort(this.sortNumber);\r\n        var daPaiCount = ctx.daPaiCount = n - m;\r\n        //取当前牌中所有>=2的牌做一次将头\r\n        for (var pai in seatData.countMap) {\r\n            //牌的取值范围[0 8] or >=100\r\n            if ((pai >= 100 || (pai <= 8 && pai >= 0)) && (pai != this.getMJ_BID(game.daPai))) {\r\n                //当牌有3张以上时尝试将其作为一次将牌\r\n                var m_p = this.getMJ_SID(pai);\r\n                var is_258_valid = this._is258Valid(m_p);\r\n                if (is_258_valid) {\r\n                    if (seatData.countMap[pai] >= 2) {\r\n                        ctx.pointedJiangDict[pai] = 1;\r\n                    } else if (seatData.countMap[pai] >= 1) {\r\n                        ctx.onePointed[pai] = 1;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        //理牌完成后,在进行一次指定将牌\r\n        //1) 不需癞子配将\r\n        for (var key in ctx.pointedJiangDict) {\r\n            if (!isNaN(key)) {\r\n                a = old_a.slice(0);\r\n                ctx.hupaiCurrent = [];\r\n                ctx.hasPointedJiang = true;\r\n                ctx.pointedPai = key;\r\n                this.removeByValue(a, key);\r\n                this.removeByValue(a, key);\r\n                this.LiPai(a.sort(), 0, a.length, 0, daPaiCount, seatData, game, ctx);\r\n                if (ctx.canHu) {\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n        if (daPaiCount < 1) {\r\n            return;\r\n        }\r\n        //3)4) 两张癞子做将\r\n        //先配2张癞子做将，因为屁胡癞子使用的个数有限制\r\n        if (daPaiCount >= 2) {\r\n            a = old_a.slice(0);\r\n            ctx.hupaiCurrent = [];\r\n            ctx.hasPointedJiang = true;\r\n            ctx.pointedPai = game.daPai;\r\n            ctx.twoLai2Jiang = true;\r\n            this.LiPai(a.sort(), 0, a.length, 0, daPaiCount - 2, seatData, game, ctx);\r\n            ctx.twoLai2Jiang = false;\r\n            if (ctx.canHu) {\r\n                return;\r\n            }\r\n        }\r\n        //2) 一张癞子配将\r\n        for (var key in ctx.onePointed) {\r\n            if (!isNaN(key)) {\r\n                a = old_a.slice(0);\r\n                ctx.hupaiCurrent = [];\r\n                ctx.hasPointedJiang = true;\r\n                ctx.pointedPai = key;\r\n                this.removeByValue(a, key);\r\n                ctx.oneLai2Jiang = true;\r\n                this.LiPai(a.sort(), 0, a.length, 0, daPaiCount - 1, seatData, game, ctx);\r\n                ctx.oneLaiToJiang = false;\r\n                if (ctx.canHu) {\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n    },\r\n    removeByValue: function(arr, val) {\r\n        for (var i = 0; i < arr.length; i++) {\r\n            if (arr[i] == val) {\r\n                arr.splice(i, 1);\r\n                break;\r\n            }\r\n        }\r\n    },\r\n    //数组的某个区间是否包含obj\r\n    arrContains: function(arr, startX, endX, obj) {\r\n        for (var i = startX; i < endX; i++) {\r\n            if (arr[i] === obj) {\r\n                return i;\r\n            }\r\n        }\r\n        return -1;\r\n    },\r\n    elementAtArray: function(arr, obj) {\r\n        return this.arrContains(arr, 0, arr.length, obj);\r\n    },\r\n    //数组中某个元素的个数\r\n    valueInArrNum: function(arr, value) {\r\n        var num = 0;\r\n        var map = {};\r\n        for (var i = 0; i < arr.length; i++) {\r\n            var ai = arr[i];\r\n            if (!map[ai]) {\r\n                map[ai] = 1;\r\n            } else {\r\n                map[ai]++;\r\n            }\r\n        }\r\n        if (map[value]) {\r\n            num = map[value];\r\n        }\r\n        return num;\r\n    },\r\n    // 数组中间部分实现左移一位\r\n    // [1,2,3,4,5,] （2,3,4）=> [1,3,4,2,5] （3,4,2）\r\n    _PartToLeft: function(arr, startX, endX) {\r\n        var ta = arr.slice(startX, endX);\r\n        var v1 = ta.shift();\r\n        ta.push(v1);\r\n        for (var i = 0; i < ta.length; i++) {\r\n            arr[startX + i] = ta[i];\r\n        }\r\n    },\r\n    // 数组中间部分实现右移一位\r\n    // [1,2,3,4,5,] （2,3,4）=> [1,4,2,3,5] （4,2,3）\r\n    _PartToRight: function(arr, startX, endX) {\r\n        var ta = arr.slice(startX, endX);\r\n        var v1 = ta.pop();\r\n        // 拼接函数(索引位置, 要删除元素的数量, 元素)\r\n        ta.splice(0, 0, v1);\r\n        for (var i = 0; i < ta.length; i++) {\r\n            arr[startX + i] = ta[i];\r\n        }\r\n    },\r\n    canHuCtxConfig: function(ctx, ha, config) {\r\n        var isHard = config ? (config.isHard == null ? true : config.isHard) : true;\r\n        var laizi_s = config ? (config.CountOfBaiDa == null ? 0 : config.CountOfBaiDa) : 0;\r\n        var laizi_usedNum = config ? (config.usedLaiNum ? config.usedLaiNum : 0) : 0;\r\n        if (!isHard && laizi_usedNum == 0) {\r\n            laizi_usedNum = -1;\r\n        }\r\n        ctx.hupaiCurrent = ha;\r\n        ctx.canChiDic[ctx.currentPai] = ctx.hupaiCurrent;\r\n        ctx.canHu = true;\r\n        var ctx_last1 = ctx.pointedPai;\r\n        var ctx_last2 = ctx.pointedPai;\r\n        var tingData = ctx.tingData;\r\n        var tkD = tingData[ctx.key] = {};\r\n        var jiang_s = [];\r\n        var L2JCount = 0;\r\n        if (ctx.oneLai2Jiang) {\r\n            ctx_last1 = ctx.pointedPai;\r\n            ctx_last2 = ctx.daPai;\r\n            L2JCount = 1;\r\n            laizi_usedNum >= 0 ? laizi_usedNum++ : 1;\r\n        }\r\n        if (ctx.twoLai2Jiang) {\r\n            ctx_last1 = ctx.daPai;\r\n            ctx_last2 = ctx.daPai;\r\n            L2JCount = 2;\r\n        }\r\n        isHard = laizi_usedNum == 0 ? true : false;\r\n        jiang_s = [this.getMJ_SID(parseInt(ctx_last1)), this.getMJ_SID(parseInt(ctx_last2))];\r\n        ha = ha.concat(jiang_s.slice(0));\r\n        var self = this;\r\n        var hu = ha.map(function(ele) {\r\n            return self.getMJ_SID(parseInt(ele));\r\n        });\r\n        tkD[\"hu\"] = hu;\r\n        tkD[\"jiang_s\"] = jiang_s;\r\n        tkD[\"L2JCount\"] = L2JCount;\r\n        tkD[\"isHard\"] = isHard;\r\n        tkD[\"laizi_s\"] = laizi_s;\r\n        tkD['laizi_arr'] = [];\r\n        tkD['laizi_usedNum'] = laizi_usedNum;\r\n        var j_p = ctx.pointedPai;\r\n        var j_value = this.getMJ_SID(j_p);\r\n        var j_type = this.getMJType(j_p);\r\n        if (j_type === 3) {\r\n            tkD[\"is_258\"] = false;\r\n            tkD[\"is_feng\"] = true;\r\n        } else if (this._is258Valid(j_value)) {\r\n            //屁胡的时候。抢杠,杠开,海捞 必然是258做将\r\n            tkD[\"is_258\"] = true;\r\n            tkD[\"is_feng\"] = false;\r\n        } else {\r\n            //既不是2,5,8 做将也不是风做将,只能是碰碰胡或者清一色\r\n            tkD[\"is_258\"] = false;\r\n            tkD[\"is_feng\"] = false;\r\n        }\r\n    },\r\n    LiPai: function(a, LeftCount, MidCount, RightCount, CountOfBaiDa, seatData, game, ctx) {\r\n        if (this._debug) {\r\n            console.log(\"**********************************************************\");\r\n            console.log(\"userId:\" + seatData.userId);\r\n            console.log(\"a:\" + JSON.stringify(a));\r\n            console.log(\"MidCount:\" + MidCount);\r\n            console.log(\"LeftCount:\" + LeftCount);\r\n            console.log(\"CountOfBaiDa:\" + CountOfBaiDa);\r\n            console.log(\"huHolds:\" + JSON.stringify(seatData.huHolds.slice(0).sort(this.sortNumber)));\r\n            console.log(\"daPai:\" + game.daPai);\r\n            console.log(\"**********************************************************\");\r\n        }\r\n        if (MidCount < 3) { // 试探区已不足 3 张，理牌过程结束，进入“理杂牌”阶段\r\n            var zaPaiNum = MidCount + RightCount; // 不足 2 张的中段，实际上也是杂牌\r\n            if (CountOfBaiDa == 0) // 如果没有百搭\r\n            {\r\n                if (ctx.hasPointedJiang) {\r\n                    if (zaPaiNum > 0) {\r\n                        //如果已经点过将,且没有搭牌\r\n                        //不能胡牌\r\n                        ctx.hupaiCurrent = [];\r\n                        ctx.canHu = false;\r\n                        return;\r\n                    } else if (zaPaiNum == 0) {\r\n                        //杂牌数目为0，可以胡牌\r\n                        var ha = [];\r\n                        for (var i = 0; i < LeftCount; i++) {\r\n                            ha[i] = a[i];\r\n                        }\r\n                        this.canHuCtxConfig(ctx, ha, {\r\n                            CountOfBaiDa: CountOfBaiDa\r\n                        });\r\n                        return;\r\n                    }\r\n                }\r\n                return;\r\n            } else // 如果有百搭, 让一张百搭配2张杂牌\r\n            {\r\n                if (ctx.hasPointedJiang) {\r\n                    //如果已经点过将，\r\n                    //且杂牌的数目为0\r\n                    if (zaPaiNum == 0) {\r\n                        var ha = [];\r\n                        //杂牌数量为0,百搭的数量必定是三张否则不能成\r\n                        if (CountOfBaiDa == 3) {\r\n                            for (var i = 0; i < LeftCount; i++) {\r\n                                ha[i] = a[i];\r\n                            }\r\n                            ha.push(game.daPai);\r\n                            ha.push(game.daPai);\r\n                            ha.push(game.daPai);\r\n                            this.canHuCtxConfig(ctx, ha, {\r\n                                CountOfBaiDa: CountOfBaiDa\r\n                            });\r\n                        }\r\n                        ctx.hupaiCurrent = ha;\r\n                        return;\r\n                    }\r\n                    //杂牌的数目为1\r\n                    if (zaPaiNum == 1) {\r\n                        var ha = [];\r\n                        //杂牌数量为1,百搭的数量必定是2张否则不能成\r\n                        if (CountOfBaiDa == 2) {\r\n                            for (var i = 0; i < LeftCount; i++) {\r\n                                ha[i] = a[i];\r\n                            }\r\n                            ha.push(a[a.length - 1]);\r\n                            ha.push(game.daPai);\r\n                            ha.push(game.daPai);\r\n                            this.canHuCtxConfig(ctx, ha, {\r\n                                CountOfBaiDa: CountOfBaiDa,\r\n                                usedLaiNum: 2\r\n                            });\r\n                        }\r\n                        seatData.hupaiCurrent = ha;\r\n                        return;\r\n                    }\r\n                    //杂牌的数目是2倍搭牌的数量\r\n                    if (zaPaiNum - 2 * CountOfBaiDa == 0) {\r\n                        var b = [];\r\n                        var endM = a.length;\r\n                        var startM = LeftCount;\r\n                        for (var i = startM, j = 0; i < endM; i++) {\r\n                            b[j++] = a[i];\r\n                        }\r\n                        b.sort(this.sortNumber);\r\n                        var th = [];\r\n                        var bHuFlag = true;\r\n                        for (var i = 0; i < b.length; i = i + 2) {\r\n                            var v0 = b[i];\r\n                            var v1 = b[i + 1];\r\n                            if (v1 - v0 <= 1) {\r\n                                th.push(v1);\r\n                                th.push(v0);\r\n                                th.push(ctx.daPai);\r\n                            } else if (v1 - v0 == 2) {\r\n                                th.push(v1);\r\n                                th.push(ctx.daPai);\r\n                                th.push(v0);\r\n                            } else {\r\n                                bHuFlag = false;\r\n                                break;\r\n                            }\r\n                        }\r\n                        if (bHuFlag) {\r\n                            var ha = [];\r\n                            for (var i = 0; i < LeftCount; i++) {\r\n                                ha[i] = a[i];\r\n                            }\r\n                            for (var i = 0; i < th.length; i++) {\r\n                                ha.push(th[i]);\r\n                            }\r\n                            var usedLaiSConfig = {\r\n                                count: 0\r\n                            };\r\n                            var canChiFlag = this.judge3Type(game, seatData, b.slice(0), usedLaiSConfig);\r\n                            this.canHuCtxConfig(ctx, ha, {\r\n                                isHard: canChiFlag,\r\n                                CountOfBaiDa: CountOfBaiDa,\r\n                                usedLaiNum: usedLaiSConfig.count\r\n                            });\r\n                            return;\r\n                        }\r\n                        //若 count = CountOfBaiDa -zaPaiNum/2 \r\n                        //如果count == 3也有可能吃别人的牌此时必定满足 zaPaiNum==2，CountOfBaiDa == 4\r\n                        //且zaPaiNum[1]-zaPaiNum[0]<=2\r\n                        if (zaPaiNum == 2 && CountOfBaiDa == 4) {\r\n                            var b = [];\r\n                            var endM = a.length;\r\n                            var startM = LeftCount;\r\n                            for (var i = startM, j = 0; i < endM; i++) {\r\n                                b[j++] = a[i];\r\n                            }\r\n                            b.sort(this.sortNumber);\r\n                            var ha = [];\r\n                            for (var i = 0; i < a.length; i++) {\r\n                                ha.push(a[i]);\r\n                            }\r\n                            for (var i = 0; i < CountOfBaiDa; i++) {\r\n                                ha.push(game.daPai);\r\n                            }\r\n                            var usedLaiSConfig = {\r\n                                count: 0\r\n                            };\r\n                            var canChiFlag = this.judge3Type(game, seatData, b.slice(0), usedLaiSConfig);\r\n                            this.canHuCtxConfig(ctx, ha, {\r\n                                isHard: canChiFlag,\r\n                                CountOfBaiDa: CountOfBaiDa,\r\n                                usedLaiNum: usedLaiSConfig.count\r\n                            });\r\n                            return;\r\n                        }\r\n                    }\r\n                }\r\n                if (zaPaiNum - 2 * CountOfBaiDa <= 2) // 配完之后，剩下的牌数若不超过 2，则有希望胡牌,需要进一步探测\r\n                {\r\n                    //申请数组 b[];\r\n                    //  把 a[LeftCount],a[LeftCount+1],...,a[m-1] 放入 b[0],b[1],...,b[MidCount+RightCount-1] 中；\r\n                    var b = [];\r\n                    var endM = a.length;\r\n                    var startM = LeftCount;\r\n                    for (var i = startM, j = 0; i < endM; i++) {\r\n                        b[j++] = a[i];\r\n                    }\r\n                    if (this._debug) {\r\n                        console.log(\"进入理杂牌阶段--->\", JSON.stringify(b));\r\n                    }\r\n                    // 把b[]排序；\r\n                    b.sort(this.sortNumber);\r\n                    this.LiZaPai(a, LeftCount, b, 0, MidCount + RightCount, 0, CountOfBaiDa, seatData, game, ctx); // 总杂牌区也被划分成 3 段：左段 中段 右段，见下文\r\n                    // 释放b[]; js中不用考虑。\r\n                }\r\n            }\r\n            return;\r\n        } else {\r\n            //分组出筒条万\r\n            var tong = [];\r\n            var tongResult = [];\r\n            var tiao = [];\r\n            var tiaoResult = [];\r\n            var wan = [];\r\n            var wanResult = [];\r\n            var others = [];\r\n            var othersResult = [];\r\n            for (var key in a) {\r\n                var pai = a[key];\r\n                var type = this.getMJType(pai);\r\n                if (type == 0) {\r\n                    tong.push(pai);\r\n                } else if (type == 1) {\r\n                    tiao.push(pai);\r\n                } else if (type == 2) {\r\n                    wan.push(pai);\r\n                } else {\r\n                    others.push(pai);\r\n                }\r\n            }\r\n            var zaArr = [];\r\n            for (var i = 0; i < 4; i++) {\r\n                var arr = [];\r\n                var result = [];\r\n                switch (i) {\r\n                    case 0:\r\n                        arr = tong;\r\n                        result = tongResult;\r\n                        break;\r\n                    case 1:\r\n                        arr = tiao;\r\n                        result = tiaoResult;\r\n                        break;\r\n                    case 2:\r\n                        arr = wan;\r\n                        result = wanResult;\r\n                        break;\r\n                    case 3:\r\n                        arr = others;\r\n                        result = othersResult;\r\n                        break;\r\n                    default:\r\n                        arr = [];\r\n                        result = [];\r\n                        break;\r\n                }\r\n                if (arr.length < 1) {\r\n                    continue;\r\n                }\r\n                var maxValue = arr.length;\r\n                var count = 0;\r\n                var zaPai = arr.slice(0);\r\n                this.LiShunZi(zaPai, result, maxValue, count, false);\r\n                //console.log(\"##zaPai:\" + JSON.stringify(zaPai));\r\n                //console.log(\"##result:\" + JSON.stringify(result));\r\n                //理顺之后若杂牌数组长度<=1,则认为是最优理顺 \r\n                //百搭个数为0的时候也不进行最优匹配( 这个方案不成立，没有百搭是也需要匹配最优顺，但是若尝\r\n                //                                   试将对子放入seatData.pointedJiangDict\r\n                //                                   中，那么此处加上这个条件就会成立)\r\n                //理顺之后若杂牌数组长度<=1,则认为是最优理顺 \r\n                if (zaPai.length > 1) {\r\n                    var zaPai2 = arr.slice(0);\r\n                    var result2 = [];\r\n                    count = 0;\r\n                    this.LiShunZi(zaPai2, result2, maxValue, count, true);\r\n                    if (zaPai2.length > 1) {\r\n                        var tempS = this._betterZaPai(zaPai, zaPai2, result, result2);\r\n                        zaPai = tempS[0];\r\n                        result = tempS[1];\r\n                        // //匹配两头顺，中间缺的理顺方式\r\n                        if (arr.length > 6 && zaPai.length > 1) {\r\n                            var zaPai3 = arr.slice(0);\r\n                            var result3 = [];\r\n                            var rArr = this.LiShunZiSide(zaPai3, result3);\r\n                            zaPai3 = rArr[0];\r\n                            result3 = rArr[1];\r\n                            //当匹配后的结果满足 杂牌区数目>1 \r\n                            if (zaPai3.length > 1) {\r\n                                var tempS = this._betterZaPai(zaPai, zaPai3, result, result3);\r\n                                zaPai = tempS[0];\r\n                                result = tempS[1];\r\n                            } else {\r\n                                zaPai = zaPai3;\r\n                                result = result3;\r\n                            }\r\n                        }\r\n                    } else {\r\n                        zaPai = zaPai2;\r\n                        result = result2;\r\n                    }\r\n                    //console.log(\"**zaPai2:\" + JSON.stringify(zaPai2));\r\n                    //console.log(\"**result2:\" + JSON.stringify(result2));\r\n                }\r\n                if (this._debug) {\r\n                    console.log(\"最优理顺zaPai:\" + JSON.stringify(zaPai));\r\n                    console.log(\"最优理顺result:\" + JSON.stringify(result));\r\n                }\r\n                zaArr = zaArr.concat(zaPai);\r\n            }\r\n            //经过上面理牌计算后,理好的牌都在各自的result数组中，杂牌都在\r\n            //tong[],tiao[],wan[],others[]数组中,\r\n            tongResult.sort(this.sortNumber);\r\n            tiaoResult.sort(this.sortNumber);\r\n            wanResult.sort(this.sortNumber);\r\n            var okArr = tongResult.concat(tiaoResult, wanResult, othersResult);\r\n            var p = okArr.concat(zaArr);\r\n            this.LiPai(p, okArr.length, 0, zaArr.length, CountOfBaiDa, seatData, game, ctx)\r\n        }\r\n    },\r\n    // “理杂牌”算法，与普通理牌算法类似，不过，它的目标是理出对子或搭子。它也把待理区划分成 3 段：\r\n    // 左段：成对/搭区\r\n    // 中段：待测区\r\n    // 右段：杂牌区\r\n    LiZaPai: function(a, OKCount, b, LeftCount, MidCount, RightCount, CountOfBaiDa, seatData, game, ctx) // OKCount 是刻子/顺子的张数，在 a 的最左侧\r\n    {\r\n        if (this._debug) {\r\n            console.log(\"############################################\");\r\n            console.log(\"a:\" + JSON.stringify(a));\r\n            console.log(\"b:\" + JSON.stringify(b));\r\n            console.log(\"OKCount:\" + OKCount);\r\n            console.log(\"LeftCount:\" + LeftCount);\r\n            console.log(\"MidCount:\" + MidCount);\r\n            console.log(\"RightCount:\" + RightCount);\r\n            console.log(\"CountOfBaiDa:\" + CountOfBaiDa);\r\n            console.log(\"############################################\");\r\n        }\r\n        if (MidCount < 2) // 待测区不足 2 张，\r\n        {\r\n            var zaPaiNum = MidCount + RightCount; // 此时，试探区成了杂牌区\r\n            if (zaPaiNum == 0) // 全是对子/搭子\r\n            {\r\n                //若指定了麻将头。\r\n                if (ctx.hasPointedJiang) {\r\n                    //那么若 count = CountOfBaiDa - LeftCount / 2;  \r\n                    //则必须满足count == 0 || count == 3才能胡牌否则不能胡\r\n                    var count = CountOfBaiDa - LeftCount / 2;\r\n                    if (count == 0 || count == 3) {\r\n                        var ha = [];\r\n                        for (var i = 0; i < a.length; i++) {\r\n                            ha.push(a[i]);\r\n                        }\r\n                        for (var i = 0; i < CountOfBaiDa; i++) {\r\n                            ha.push(game.daPai);\r\n                        }\r\n                        var usedLaiNum = LeftCount / 2;\r\n                        this.canHuCtxConfig(ctx, ha, {\r\n                            isHard: false,\r\n                            CountOfBaiDa: CountOfBaiDa,\r\n                            usedLaiNum: usedLaiNum\r\n                        });\r\n                        return;\r\n                    } else {\r\n                        //不能胡牌\r\n                        ctx.canHu = false;\r\n                        return;\r\n                    }\r\n                }\r\n            } else if (zaPaiNum == 1) {\r\n                //若指定了麻将头。\r\n                if (ctx.hasPointedJiang) {\r\n                    //必定有2张搭子和zaPai做刻字\r\n                    var count = CountOfBaiDa - 2 - LeftCount / 2;\r\n                    if (count == 0) {\r\n                        var ha = [];\r\n                        for (var i = 0; i < a.length; i++) {\r\n                            ha.push(a[i]);\r\n                        }\r\n                        for (var i = 0; i < CountOfBaiDa; i++) {\r\n                            ha.push(game.daPai);\r\n                        }\r\n                        this.canHuCtxConfig(ctx, ha, {\r\n                            isHard: false,\r\n                            CountOfBaiDa: CountOfBaiDa,\r\n                            usedLaiNum: CountOfBaiDa\r\n                        });\r\n                        return;\r\n                    }\r\n                }\r\n            } else {\r\n                ctx.canHu = false;\r\n                return;\r\n            }\r\n        } else {\r\n            // int * p=&b[LeftCount];   // 让 p 指向试探区；\r\n            var p = b;\r\n            var x = p[LeftCount + 0]; // 取出首张\r\n            if (x == p[LeftCount + 1]) // 找到一个对子\r\n            {\r\n                this.LiZaPai(a, OKCount, b, LeftCount + 2, MidCount - 2, RightCount, CountOfBaiDa, seatData, game, ctx); // 递归地求解\r\n                return;\r\n            }\r\n            // 在 p[1],p[2],...p[MidCount-1] 中寻找 x+1;\r\n            var t1 = this.arrContains(p, LeftCount + 0, LeftCount + MidCount, x + 1);\r\n            var t2 = this.arrContains(p, LeftCount + 0, LeftCount + MidCount, x + 2);\r\n            if (t1 != -1) {\r\n                // 把 x,x+1 放入 p[0],p[1];\r\n                // 把剩下的牌放入 p[2],p[3],...,p[MidCount-1];\r\n                var sa = [];\r\n                sa.push(x);\r\n                sa.push(x + 1);\r\n                for (var i = LeftCount + 1, k = 2; i < LeftCount + MidCount; i++) {\r\n                    if (i != t1) {\r\n                        sa[k++] = p[i];\r\n                    }\r\n                }\r\n                for (var i = 0; i < sa.length; i++) {\r\n                    p[i + LeftCount] = sa[i];\r\n                }\r\n                this.LiZaPai(a, OKCount, b, LeftCount + 2, MidCount - 2, RightCount, CountOfBaiDa, seatData, game, ctx); // 递归地求解\r\n                // 把 p[0],p[1],...,p[MidCount-1] 排序；\r\n                var ya = p.slice(LeftCount, MidCount);\r\n                ya.sort(this.sortNumber);\r\n                for (var i = 0; i < ya.length; i++) {\r\n                    p[i + LeftCount] = ya[i];\r\n                }\r\n                return;\r\n            }\r\n            // 在 p[1],p[2],...p[MidCount-1] 中寻找 x+2;\r\n            if (t2 != -1) {\r\n                // 把 x,x+2 放入 p[0],p[1];\r\n                // 把剩下的牌放入 p[2],p[3],...,p[MidCount-1];\r\n                var sa = [];\r\n                sa.push(x);\r\n                sa.push(x + 2);\r\n                for (var i = LeftCount + 1, k = 2; i < LeftCount + MidCount; i++) {\r\n                    if (i != t2) {\r\n                        sa[k++] = p[i];\r\n                    }\r\n                }\r\n                for (var i = 0; i < sa.length; i++) {\r\n                    p[i + LeftCount] = sa[i];\r\n                }\r\n                this.LiZaPai(a, OKCount, b, LeftCount + 2, MidCount - 2, RightCount, CountOfBaiDa, seatData, game, ctx); // 递归地求解\r\n                // 把 p[0],p[1],...,p[MidCount-1] 排序；\r\n                var ya = p.slice(LeftCount, MidCount);\r\n                ya.sort(this.sortNumber);\r\n                for (var i = 0; i < ya.length; i++) {\r\n                    p[i + LeftCount] = ya[i];\r\n                }\r\n                return;\r\n            }\r\n            // 让 p[0],p[1]....,p[MidCount-1] 循环左移；   // x 称到杂牌区；\r\n            this._PartToLeft(p, LeftCount, p.length);\r\n            this.LiZaPai(a, OKCount, b, LeftCount, MidCount - 1, RightCount + 1, CountOfBaiDa, seatData, game, ctx); // 递归地求解\r\n            return;\r\n        }\r\n    },\r\n    //把同类型的牌丢进来（不考虑其中的牌为将头） 匹配顺子、刻子\r\n    //arr：传入数据数组,计算完成后成为返回的杂牌数组\r\n    //result: 计算完成后顺子or刻子的数组\r\n    //maxValue: 元数据数组的长度和count 配合使用形成递归的终止条件\r\n    //lFlag:找到长顺后是否匹配id号较大的顺子；true是匹配，false是匹配id号较小的顺子\r\n    LiShunZi: function(arr, result, maxValue, count, lFlag) {\r\n        // 试探区至少 3 张，可以试着从中取出刻子和顺子\r\n        if (!result) {\r\n            result = [];\r\n        }\r\n        if (this._debug) {\r\n            console.log(\"arr:\" + JSON.stringify(arr));\r\n            console.log(\"result:\" + JSON.stringify(result));\r\n        }\r\n        if (arr.length <= 2) {\r\n            return;\r\n        }\r\n        if (count >= maxValue) {\r\n            return;\r\n        }\r\n        var p = arr;\r\n        var x = p[0];\r\n        if (p[1] == x && p[2] == x) { // 发现一个刻子\r\n            result.push(x);\r\n            result.push(x);\r\n            result.push(x);\r\n            this.removeByValue(p, x);\r\n            this.removeByValue(p, x);\r\n            this.removeByValue(p, x);\r\n            this.LiShunZi(p, result, maxValue, count, lFlag);\r\n            return;\r\n        }\r\n        var t1 = this.arrContains(p, 0, p.length, x + 1);\r\n        var t2 = this.arrContains(p, 0, p.length, x + 2);\r\n        var t3 = this.arrContains(p, 0, p.length, x + 3);\r\n        var foundFlag = (t1 != -1) && (t2 != -1);\r\n        if (foundFlag) {\r\n            var t3Flag = (t3 > -1) && lFlag;\r\n            if (!t3Flag) {\r\n                result.push(x);\r\n                result.push(x + 1);\r\n                result.push(x + 2);\r\n                this.removeByValue(p, x);\r\n                this.removeByValue(p, x + 1);\r\n                this.removeByValue(p, x + 2);\r\n                this.LiShunZi(p, result, maxValue, count, lFlag);\r\n                return;\r\n            }\r\n        }\r\n        this._PartToLeft(p, 0, p.length);\r\n        count++;\r\n        this.LiShunZi(p, result, maxValue, count, lFlag);\r\n        return;\r\n    },\r\n    //作用：以中间的某个点为中间点将数组分割成两个部分\r\n    //左边的部分从最小id号开始匹配\r\n    //右边的部分从最大id号开始匹配\r\n    //返回的结果放在arr和result中,arr表示杂牌区，result表示成牌区\r\n    //注意:arr的长度必须>=7调用这个方法才有意义,更具体的是同色牌中必须至少有7中不同的id号才有意义\r\n    LiShunZiSide: function(arr, result) {\r\n        if (!result) {\r\n            result = [];\r\n        }\r\n        var a = arr.slice(0);\r\n        //从小到大排列\r\n        a.sort(this.sortNumber);\r\n        var k = 0;\r\n        var v0 = a[0];\r\n        var fenGeValue = -1;\r\n        for (var i = 0; i < 9; i++) {\r\n            var vi = v0 + i;\r\n            var index = this.arrContains(a, 0, a.length, vi);\r\n            if (index < 0) {\r\n                fenGeValue = vi - 1;\r\n                break;\r\n            }\r\n        }\r\n        if (fenGeValue == -1 || fenGeValue == a[0] || fenGeValue == a[a.length - 1]) {\r\n            //找不到分割点，\r\n            //或者分割点是第一个或最后一个元素\r\n            //直接return\r\n            return [arr, result];\r\n        }\r\n        //找到了分割点\r\n        //注意:分割点在左边数组中，其值可能有多个\r\n        var fenCount = this.valueInArrNum(a, fenGeValue);\r\n        var fenIndex = this.arrContains(a, 0, a.length, fenGeValue);\r\n        var leftArr = a.slice(0, fenIndex + fenCount);\r\n        var rightArr = a.slice(fenIndex + fenCount, a.length);\r\n        //此时已经将数组分割成两个部分\r\n        //调用LiShunZi分别对两个数组排序\r\n        var zaPaiLeft = leftArr.slice(0);\r\n        var resultLeft = [];\r\n        var countLeft = 0;\r\n        var maxValueLeft = leftArr.length;\r\n        this.LiShunZi(zaPaiLeft, resultLeft, maxValueLeft, countLeft, false);\r\n        var zaPaiRight = rightArr.slice(0);\r\n        var resultRight = [];\r\n        var countRight = 0;\r\n        var maxValueRight = rightArr.length;\r\n        this.LiShunZi(zaPaiRight, resultRight, maxValueRight, countRight, true);\r\n        if (this._debug) {\r\n            console.log(\"ly:partLeft:zaPai \" + JSON.stringify(zaPaiLeft));\r\n            console.log(\"ly:partLeft:result \" + JSON.stringify(resultLeft));\r\n            console.log(\"ly:partRight:zaPai \" + JSON.stringify(zaPaiRight));\r\n            console.log(\"ly:partRight:result \" + JSON.stringify(resultRight));\r\n        }\r\n        var zaPaiTotal = zaPaiLeft.concat(zaPaiRight);\r\n        var resultAll = resultLeft.concat(resultRight);\r\n        arr = zaPaiTotal;\r\n        result = resultAll;\r\n        return [arr, result];\r\n    },\r\n    eleCountInArr: function(arr) {\r\n        var dict = {};\r\n        arr.forEach(function(ele) {\r\n            if (dict[ele] == null) {\r\n                dict[ele] = 0;\r\n            }\r\n            dict[ele]++;\r\n        });\r\n        return dict;\r\n    },\r\n    differentElements_InArr: function(arr) {\r\n        var dict = this.eleCountInArr(arr);\r\n        return Object.keys(dict).length;\r\n    },\r\n    _betterZaPai: function(z1, z2, result, result2) {\r\n        var l = z1.length - z2.length;\r\n        var dl = this.differentElements_InArr(z1) - this.differentElements_InArr(z2);\r\n        //优先判断数组长度\r\n        //数组短的为最优理顺  \r\n        if (l > 0) {\r\n            z1 = z2;\r\n            result = result2;\r\n        } else if (l == 0) {\r\n            //实验\r\n            //1)先比较两组中,不同元素的长度。对子多的优先级高。\r\n            if (dl > 0) {\r\n                //说明z2的对子较多\r\n                z1 = z2;\r\n                result = result2;\r\n            } else if (dl == 0) {\r\n                //说明对子一样多,取方差小的值\r\n                //若两个数组长度相同则计算两个数组的方差值\r\n                //方差值小的为最优理顺\r\n                var f1 = this.variance(z1);\r\n                var f2 = this.variance(z2);\r\n                // console.log(\"f1:\" + f1);\r\n                // console.log(\"f2:\" + f2);\r\n                if (f1 > f2) {\r\n                    z1 = z2;\r\n                    result = result2;\r\n                }\r\n            }\r\n        }\r\n        return [z1, result];\r\n    },\r\n    //判断杂牌数组中形成的刻和顺子是否和搭牌同类型且ABC \r\n    //b是除去将头的杂牌数组\r\n    judge3Type: function(game, seatData, b, config) {\r\n        config = config || {};\r\n        config.count = 0;\r\n        b.sort(this.sortNumber);\r\n        //b 必定是2的整数倍 \r\n        //注:此时的b 加上搭之后必定是可胡的。否则不需判断\r\n        if (b.length < 1) {\r\n            return true;\r\n        }\r\n        var canChiArr = [];\r\n        var daPai = game.daPai;\r\n        for (var i = 0; i < b.length; i = i + 2) {\r\n            var v0 = b[i];\r\n            var v1 = b[i + 1];\r\n            var canChi = -1;\r\n            if (v1 - v0 == 1) {\r\n                //差值<=1说明是同种类型。\r\n                if (v0 >= daPai && (v0 - daPai) <= 1) {\r\n                    canChi = 1;\r\n                }\r\n                if (daPai >= v1 && (daPai - v1) <= 1) {\r\n                    canChi = 1;\r\n                }\r\n                canChiArr.push(canChi);\r\n            } else if (v1 - v0 == 2) {\r\n                //此处说明v1 v0 是同种类型\r\n                //因此只需满足 v1 - daPai === 1 即可\r\n                if (v1 - daPai === 1) {\r\n                    canChi = 1;\r\n                }\r\n                canChiArr.push(canChi);\r\n            } else if (v1 - v0 == 0) {\r\n                if (v1 == daPai) {\r\n                    canChi = 1;\r\n                }\r\n                canChiArr.push(canChi);\r\n            } else {\r\n                canChi = -1;\r\n                canChiArr.push(canChi);\r\n                // break;\r\n            }\r\n        }\r\n        canChiArr.forEach(function(vle) {\r\n            if (vle == -1) {\r\n                config.count++;\r\n            }\r\n        });\r\n        if (!(canChiArr.indexOf(-1) > -1)) {\r\n            return true;\r\n        }\r\n        // if (!(this.arrContains(canChiArr, 0, canChiArr.length, -1) > -1)) {\r\n        //     return true;\r\n        // }\r\n        return false;\r\n    },\r\n    //删除子数组\r\n    //返回一个新的数组\r\n    _delSubArr: function(totalArr, subArr) {\r\n        var t = totalArr.slice(0);\r\n        for (var i = 0; i < subArr.length; i++) {\r\n            var value = subArr[i];\r\n            var index = t.indexOf(value);\r\n            if (index > -1) {\r\n                //如果value值存在，删除对应的value\r\n                t.splice(index, 1);\r\n            }\r\n        }\r\n        return t;\r\n    },\r\n    y_deepCopy: function() {\r\n        //jQuery中的extend\r\n        var options, name, src, copy, copyIsArray, clone,\r\n            target = arguments[0] || {},\r\n            i = 1,\r\n            length = arguments.length,\r\n            deep = false;\r\n        // Handle a deep copy situation\r\n        if (typeof target === \"boolean\") {\r\n            deep = target;\r\n            target = arguments[1] || {};\r\n            // skip the boolean and the target\r\n            i = 2;\r\n        }\r\n        // Handle case when target is a string or something (possible in deep copy)\r\n        if (typeof target !== \"object\" && !this.y_isFunction(target)) {\r\n            target = {};\r\n        }\r\n        if (length === i) {\r\n            target = this;\r\n            --i;\r\n        }\r\n        for (; i < length; i++) {\r\n            // Only deal with non-null/undefined values\r\n            if ((options = arguments[i]) != null) {\r\n                // Extend the base object\r\n                for (name in options) {\r\n                    src = target[name];\r\n                    copy = options[name];\r\n                    // Prevent never-ending loop\r\n                    if (target === copy) {\r\n                        continue;\r\n                    }\r\n                    // Recurse if we're merging plain objects or arrays\r\n                    if (deep && copy && (this.y_isPlainObject(copy) || (copyIsArray = Array.isArray(copy)))) {\r\n                        if (copyIsArray) {\r\n                            copyIsArray = false;\r\n                            clone = src && Array.isArray(src) ? src : [];\r\n                        } else {\r\n                            clone = src && this.y_isPlainObject(src) ? src : {};\r\n                        }\r\n                        // Never move original objects, clone them\r\n                        target[name] = this.y_deepCopy(deep, clone, copy);\r\n                        // Don't bring in undefined values\r\n                    } else if (copy !== undefined) {\r\n                        target[name] = copy;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        // Return the modified object\r\n        return target;\r\n    },\r\n    y_isFunction: function(obj) {\r\n        return typeof obj == \"function\";\r\n    },\r\n    y_isPlainObject: function(obj) {\r\n        return Object.prototype.toString.call(obj) == \"[object Object]\";\r\n    }\r\n});"
  ]
}
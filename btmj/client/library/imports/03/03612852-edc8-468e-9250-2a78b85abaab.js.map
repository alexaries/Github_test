{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [
    "cc",
    "Class",
    "extends",
    "Component",
    "properties",
    "_DayListV",
    "_sign",
    "_btn_sign",
    "_btn_signed",
    "_isShowView",
    "_time",
    "onLoad",
    "find",
    "getChildByName",
    "Array",
    "i",
    "path",
    "push",
    "vv",
    "userMgr",
    "is_sign",
    "initSignData",
    "self",
    "getComponent",
    "Label",
    "string",
    "sign_days",
    "active",
    "getSignList",
    "data",
    "console",
    "log",
    "length",
    "d",
    "view",
    "name",
    "amount",
    "signed",
    "btn_sign",
    "onSignBtnClicked",
    "setUserSign",
    "type",
    "gems",
    "alert",
    "show",
    "onCloseBtnClicked"
  ],
  "mappings": "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",
  "file": "unknown",
  "sourcesContent": [
    "cc.Class({\r\n    extends: cc.Component,\r\n    properties: {\r\n        _DayListV: null,\r\n        _sign: null,\r\n        _btn_sign: null,\r\n        _btn_signed: null,\r\n        _isShowView: false,\r\n        _time: null,\r\n    },\r\n    // use this for initialization\r\n    onLoad: function() {\r\n        this._sign = cc.find(\"Canvas/sign\");\r\n        this._btn_sign = this._sign.getChildByName(\"btn_sign\");\r\n        this._btn_signed = this._sign.getChildByName(\"btn_signed\");\r\n        this._time = this._sign.getChildByName(\"time\");\r\n        this._DayListV = new Array();\r\n        for (var i = 0; i < 7; i++) {\r\n            var path = \"day\" + (i + 1);\r\n            this._DayListV.push(this._sign.getChildByName(path));\r\n        }\r\n        this._isShowView = (cc.vv.userMgr.is_sign == 0);\r\n        this.initSignData();\r\n    },\r\n    initSignData: function() {\r\n         var self = this;\r\n        if (this._isShowView) {\r\n            //签到按钮不可点击\r\n            this._time.getComponent(cc.Label).string = \"已登录\" + cc.vv.userMgr.sign_days + \"天\";\r\n            this._btn_sign.active = (cc.vv.userMgr.sign_days < 6 && cc.vv.userMgr.is_sign == 0);\r\n            this._btn_signed.active = (cc.vv.userMgr.sign_days < 6 && cc.vv.userMgr.is_sign == 1);\r\n            // this._btn_sign.getComponent(cc.Button).interactable = (cc.vv.userMgr.is_sign == 0);\r\n            cc.vv.userMgr.getSignList(function(data) {\r\n                console.log(\"------initSignData------->>\", data);\r\n                if (data) {\r\n                    for (var i = 0; i < data.length; i++) {\r\n                        var d = data[i];\r\n                        var view = self._DayListV[i];\r\n                        if (view) {\r\n                            var name = view.getChildByName(\"name\").getComponent(cc.Label);\r\n                            name.string = d.name + \"×\" + d.amount;\r\n                            var signed = view.getChildByName(\"signed\");\r\n                            if (signed) {\r\n                                if (cc.vv.userMgr.sign_days > i) {\r\n                                    signed.active = true;\r\n                                    if(i == data.length - 1 && cc.vv.userMgr.sign_days > 6 && cc.vv.userMgr.is_sign == 0){\r\n                                        signed.active = false;\r\n                                    }\r\n                                }\r\n                            }\r\n                            var btn_sign = view.getChildByName(\"btn_sign\");\r\n                            if (btn_sign) {\r\n                                btn_sign.active = (cc.vv.userMgr.sign_days >= 6 && cc.vv.userMgr.is_sign == 0);\r\n                                // btn_sign.getComponent(cc.Button).interactable = (cc.vv.userMgr.is_sign == 0);\r\n                            }\r\n                        }\r\n                    }\r\n                    self._sign.active = self._isShowView;\r\n                }\r\n            });\r\n        }else{\r\n            self._sign.active = self._isShowView;\r\n        }\r\n    },\r\n    //签到\r\n    onSignBtnClicked: function() {\r\n        if (cc.vv.userMgr.is_sign == 0) {\r\n            var self = this;\r\n            cc.vv.userMgr.setUserSign(function(data) {\r\n                if (data) {\r\n                    cc.vv.userMgr.is_sign = 1;\r\n                    cc.vv.userMgr.sign_days++;\r\n                    if (data.type == 1) {\r\n                        cc.vv.userMgr.gems += data.amount;\r\n                    }\r\n                    self.initSignData();\r\n                }\r\n            });\r\n        } else {\r\n            cc.vv.alert.show(\"提示\", \"今日已签到!\");\r\n        }\r\n    },\r\n    onCloseBtnClicked: function() {\r\n        this._sign.active = false;\r\n        this._isShowView = false;\r\n    },\r\n});"
  ]
}
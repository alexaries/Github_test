{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [
    "cc",
    "Class",
    "extends",
    "Component",
    "properties",
    "_isCapturing",
    "onLoad",
    "init",
    "ANDROID_API",
    "IOS_API",
    "login",
    "sys",
    "os",
    "OS_ANDROID",
    "jsb",
    "reflection",
    "callStaticMethod",
    "OS_IOS",
    "console",
    "log",
    "share",
    "title",
    "desc",
    "vv",
    "SI",
    "appweb",
    "shareResult",
    "size",
    "director",
    "getWinSize",
    "currentDate",
    "Date",
    "fileName",
    "fullPath",
    "fileUtils",
    "getWritablePath",
    "isFileExist",
    "removeFile",
    "texture",
    "RenderTexture",
    "Math",
    "floor",
    "width",
    "height",
    "setPosition",
    "p",
    "begin",
    "getRunningScene",
    "visit",
    "end",
    "saveToFile",
    "IMAGE_FORMAT_JPG",
    "self",
    "tryTimes",
    "fn",
    "scale",
    "setTimeout",
    "onLoginResp",
    "code",
    "uid",
    "roomid",
    "ret",
    "errcode",
    "account",
    "sign",
    "shareRoomId",
    "localStorage",
    "setItem",
    "userMgr",
    "onAuth",
    "http",
    "sendRequest"
  ],
  "mappings": "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",
  "file": "unknown",
  "sourcesContent": [
    "cc.Class({\r\n    extends: cc.Component,\r\n    properties: {\r\n        // foo: {\r\n        //    default: null,      // The default value will be used only when the component attaching\r\n        //                           to a node for the first time\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n        _isCapturing: false,\r\n    },\r\n    // use this for initialization\r\n    onLoad: function() {},\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n    // },\r\n    init: function() {\r\n        this.ANDROID_API = \"com/vivigames/scmj/WXAPI\";\r\n        this.IOS_API = \"AppController\";\r\n    },\r\n    login: function() {\r\n        if (cc.sys.os == cc.sys.OS_ANDROID) {\r\n            jsb.reflection.callStaticMethod(this.ANDROID_API, \"Login\", \"()V\");\r\n        } else if (cc.sys.os == cc.sys.OS_IOS) {\r\n            jsb.reflection.callStaticMethod(this.IOS_API, \"login\");\r\n        } else {\r\n            console.log(\"platform:\" + cc.sys.os + \" dosn't implement share.\");\r\n        }\r\n    },\r\n    share: function(title, desc) {\r\n        if (cc.sys.os == cc.sys.OS_ANDROID) {\r\n            jsb.reflection.callStaticMethod(this.ANDROID_API, \"Share\", \"(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V\", cc.vv.SI.appweb, title, desc);\r\n        } else if (cc.sys.os == cc.sys.OS_IOS) {\r\n            jsb.reflection.callStaticMethod(this.IOS_API, \"share:shareTitle:shareDesc:\", cc.vv.SI.appweb, title, desc);\r\n        } else {\r\n            console.log(\"platform:\" + cc.sys.os + \" dosn't implement share.\");\r\n        }\r\n    },\r\n    shareResult: function() {\r\n        if (this._isCapturing) {\r\n            return;\r\n        }\r\n        this._isCapturing = true;\r\n        var size = cc.director.getWinSize();\r\n        var currentDate = new Date();\r\n        var fileName = \"result_share.jpg\";\r\n        var fullPath = jsb.fileUtils.getWritablePath() + fileName;\r\n        if (jsb.fileUtils.isFileExist(fullPath)) {\r\n            jsb.fileUtils.removeFile(fullPath);\r\n        }\r\n        var texture = new cc.RenderTexture(Math.floor(size.width), Math.floor(size.height));\r\n        texture.setPosition(cc.p(size.width / 2, size.height / 2));\r\n        texture.begin();\r\n        cc.director.getRunningScene().visit();\r\n        texture.end();\r\n        texture.saveToFile(fileName, cc.IMAGE_FORMAT_JPG);\r\n        var self = this;\r\n        var tryTimes = 0;\r\n        var fn = function() {\r\n            if (jsb.fileUtils.isFileExist(fullPath)) {\r\n                var height = 100;\r\n                var scale = height / size.height;\r\n                var width = Math.floor(size.width * scale);\r\n                if (cc.sys.os == cc.sys.OS_ANDROID) {\r\n                    jsb.reflection.callStaticMethod(self.ANDROID_API, \"ShareIMG\", \"(Ljava/lang/String;II)V\", fullPath, width, height);\r\n                } else if (cc.sys.os == cc.sys.OS_IOS) {\r\n                    jsb.reflection.callStaticMethod(self.IOS_API, \"shareIMG:width:height:\", fullPath, width, height);\r\n                } else {\r\n                    console.log(\"platform:\" + cc.sys.os + \" dosn't implement share.\");\r\n                }\r\n                self._isCapturing = false;\r\n            } else {\r\n                tryTimes++;\r\n                if (tryTimes > 10) {\r\n                    console.log(\"time out...\");\r\n                    return;\r\n                }\r\n                setTimeout(fn, 50);\r\n            }\r\n        }\r\n        setTimeout(fn, 50);\r\n    },\r\n    onLoginResp: function(code, uid, roomid) {\r\n        var fn = function(ret) {\r\n            if (ret.errcode == 0) {\r\n                console.log(\"返回的微信账号信息是:\" + ret.account, ret.sign, ret.shareRoomId);\r\n                cc.sys.localStorage.setItem(\"wx_account\", ret.account);\r\n                cc.sys.localStorage.setItem(\"wx_sign\", ret.sign);\r\n            }\r\n            cc.vv.userMgr.onAuth(ret);\r\n        }\r\n        console.log(\"向微信发送验证请求\");\r\n        cc.vv.http.sendRequest(\"/wechat_auth\", {\r\n            code: code,\r\n            uid: uid,\r\n            os: cc.sys.os,\r\n            roomid: roomid\r\n        }, fn);\r\n    },\r\n});"
  ]
}
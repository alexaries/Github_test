{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [
    "cc",
    "Class",
    "extends",
    "Component",
    "properties",
    "lblRoomNo",
    "default",
    "type",
    "Label",
    "_seats",
    "_timeLabel",
    "_voiceMsgQueue",
    "_lastPlayingSeat",
    "_playingSeat",
    "_lastPlayTime",
    "_shareContent",
    "paigroup",
    "SpriteAtlas",
    "back",
    "Node",
    "fanhui",
    "bg",
    "backAlert",
    "backAlert_no",
    "fan",
    "jinbi",
    "countdown",
    "onLoad",
    "vv",
    "i",
    "push",
    "find",
    "getComponent",
    "_tips",
    "_difen",
    "_qiangZhuTips",
    "_xiaBeiTips",
    "_lastResult",
    "addComponent",
    "utils",
    "addClickEvent",
    "node",
    "initView",
    "initSeats",
    "initEventHandlers",
    "net",
    "send",
    "audioMgr",
    "playBGM",
    "qiangZhuLevel",
    "jinbi_node_arr",
    "active",
    "seats",
    "gameNetMgr",
    "length",
    "initSingleSeat",
    "seat",
    "index",
    "getLocalIndexZJH",
    "seatindex",
    "isOffline",
    "online",
    "setInfo",
    "name",
    "score",
    "setReady",
    "ready",
    "setOffline",
    "setID",
    "userid",
    "voiceMsg",
    "onBtnSettingsClicked",
    "popupMgr",
    "showSettings",
    "onBtnWeichatClicked",
    "share",
    "show",
    "onBtnDissolveClicked",
    "alert",
    "onBtnClicked",
    "event",
    "target",
    "onBtnExit",
    "onBtnExchange",
    "userMgr",
    "exchange",
    "playVoice",
    "console",
    "log",
    "data",
    "shift",
    "idx",
    "getSeatIndexByID",
    "sender",
    "localIndex",
    "msgInfo",
    "JSON",
    "parse",
    "content",
    "msgfile",
    "Date",
    "now",
    "time",
    "sys",
    "isNative",
    "serverid",
    "window",
    "downloadVoice",
    "voiceMgr",
    "writeVoice",
    "msg",
    "play",
    "dataEventHandler",
    "self",
    "on",
    "detail",
    "seatHide",
    "gameInfo",
    "showDiFen",
    "baseFen",
    "seatDatas",
    "seatData",
    "refreshSeats",
    "holds",
    "maxQiangZhuangBeiShu",
    "showSelfPai",
    "showQiangZhu",
    "showOtherSeat",
    "showQiangZhuTips",
    "localIdx",
    "chat",
    "info",
    "zjhchat",
    "getQuickChatInfo",
    "playSFX",
    "sound",
    "emoji",
    "userId",
    "beishu",
    "beiShu",
    "seatIndex",
    "showQiangZhuText",
    "string",
    "countDown",
    "hideQiangZhuTips",
    "hideQiangZhu",
    "hideQiangZhuText",
    "localSeat",
    "showZhuang",
    "showXiaZhuTips",
    "showXiaBei",
    "hideXiaZhuTips",
    "hideXiaBei",
    "showBeiShuText",
    "showYouShi",
    "showCount",
    "snEnd",
    "moneyFlows",
    "players",
    "zhuang_userId",
    "player",
    "isZhuang",
    "status",
    "user_arr_toZhuang",
    "user_arr_fromZhuang",
    "j",
    "moneyFlow",
    "to",
    "from",
    "showLastPai",
    "showLastResult",
    "setTimeout",
    "hideLastResult",
    "hideLastPai",
    "showMoneyFlowsAnim",
    "showMoneyChange",
    "getGemsAndCoins",
    "_userId",
    "_score",
    "refresh",
    "gems",
    "coins",
    "callback",
    "player_index",
    "fun",
    "clearInterval",
    "interval",
    "getSeatByUserId",
    "spriteFrames",
    "getpaiRes",
    "setInterval",
    "hideBeiShuText",
    "money",
    "changeMoney",
    "buildMoneyFlowsAnimData",
    "execMoneyFlowsAnim",
    "user_arr",
    "from_userId",
    "fromSeat",
    "from_node",
    "start_x",
    "x",
    "start_y",
    "y",
    "to_userId",
    "toSeat",
    "to_node",
    "end_x",
    "end_y",
    "dis_x",
    "dis_y",
    "jin_num",
    "per_x",
    "Math",
    "floor",
    "per_y",
    "new_node_arr",
    "new_x",
    "new_y",
    "new_node",
    "instantiate",
    "addChild",
    "clearFlowAnim",
    "interVal",
    "showJinbiIndex",
    "flowEndAnim",
    "duration",
    "node_arr",
    "endNode",
    "action",
    "moveTo",
    "p",
    "runAction",
    "removeChild",
    "showBeiPai",
    "level",
    "num",
    "huase_big",
    "huase_small",
    "toString",
    "hold",
    "result",
    "getSpriteFrame",
    "difen",
    "_lastpai",
    "getChildByName",
    "update",
    "dt",
    "voice",
    "localId",
    "pauseAll",
    "minutes",
    "_lastMinute",
    "date",
    "h",
    "getHours",
    "m",
    "getMinutes",
    "onPlayerOver",
    "stopPlayVoice",
    "resumeAll",
    "onDestroy",
    "stop",
    "onQiangZhuangClick",
    "e",
    "opacity",
    "nodeName",
    "replace",
    "onXiaZhuClick",
    "str",
    "onYouShiClick",
    "niu_arr",
    "getNiuArr",
    "onSanPaiClick",
    "onPaiClick",
    "_count",
    "isClicked",
    "unsetCount",
    "setCount"
  ],
  "mappings": "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",
  "file": "unknown",
  "sourcesContent": [
    "cc.Class({\r\n    extends: cc.Component,\r\n    properties: {\r\n        lblRoomNo: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        _seats: [],\r\n        _timeLabel: null,\r\n        _voiceMsgQueue: [],\r\n        _lastPlayingSeat: null,\r\n        _playingSeat: null,\r\n        _lastPlayTime: null,\r\n        _shareContent: null,\r\n        paigroup: {\r\n            default: null,\r\n            type: cc.SpriteAtlas\r\n        },\r\n        back: cc.Node,\r\n        fanhui: cc.Node,\r\n        bg: cc.Node,\r\n        backAlert: cc.Node,\r\n        backAlert_no: cc.Node,\r\n        fan: cc.Node,\r\n        jinbi: cc.Node,\r\n        countdown: cc.Label,\r\n    },\r\n    onLoad: function() {\r\n        if (cc.vv == null) {\r\n            return;\r\n        }\r\n        for (var i = 0; i < 5; i++) {\r\n            this._seats.push(cc.find(\"Canvas/seat\" + i).getComponent(\"dnSeat\"));\r\n        }\r\n        this._timeLabel = cc.find(\"Canvas/time\").getComponent(cc.Label);\r\n        this._tips = cc.find(\"Canvas/tips\").getComponent(cc.Label);\r\n        this._difen = cc.find(\"Canvas/difen\").getComponent(cc.Label);\r\n        this._qiangZhuTips = cc.find(\"Canvas/text1\").getComponent(cc.Label);\r\n        this._xiaBeiTips = cc.find(\"Canvas/text3\").getComponent(cc.Label);\r\n        this._lastResult = cc.find(\"Canvas/lastResult\");\r\n        this.addComponent(\"ReConnect\");\r\n        cc.vv.utils.addClickEvent(this.back, this.node, \"dnAll\", \"onBtnClicked\");\r\n        cc.vv.utils.addClickEvent(this.fanhui, this.node, \"dnAll\", \"onBtnClicked\");\r\n        cc.vv.utils.addClickEvent(this.fan, this.node, \"dnAll\", \"onBtnClicked\");\r\n        cc.vv.utils.addClickEvent(this.bg, this.node, \"dnAll\", \"onBtnClicked\");\r\n        cc.vv.utils.addClickEvent(this.backAlert_no, this.node, \"dnAll\", \"onBtnClicked\");\r\n        this.initView();\r\n        this.initSeats();\r\n        this.initEventHandlers();\r\n        cc.vv.net.send(\"ready\");\r\n        cc.vv.audioMgr.playBGM(\"back.mp3\");\r\n        this.qiangZhuLevel = [0, 1, 2, 3, 4]; //抢注的档次\r\n        this.jinbi_node_arr = [];\r\n    },\r\n    initView: function() {\r\n        this._tips.node.active = true;\r\n        this._lastResult.active = false;\r\n    },\r\n    initSeats: function() {\r\n        var seats = cc.vv.gameNetMgr.seats;\r\n        for (var i = 0; i < seats.length; ++i) {\r\n            this.initSingleSeat(seats[i]);\r\n        }\r\n    },\r\n    initSingleSeat: function(seat) {\r\n        var index = cc.vv.gameNetMgr.getLocalIndexZJH(seat.seatindex);\r\n        var isOffline = !seat.online;\r\n        // var isZhuang = seat.seatindex == cc.vv.gameNetMgr.button;\r\n        this._seats[index].setInfo(seat.name, seat.score);\r\n        this._seats[index].setReady(seat.ready);\r\n        this._seats[index].setOffline(isOffline);\r\n        this._seats[index].setID(seat.userid);\r\n        this._seats[index].voiceMsg(false);\r\n    },\r\n    onBtnSettingsClicked: function() {\r\n        cc.vv.popupMgr.showSettings();\r\n    },\r\n    // 点击分享按钮，使用微信分享\r\n    onBtnWeichatClicked: function() {\r\n        cc.vv.share.show();\r\n    },\r\n    onBtnDissolveClicked: function() {\r\n        cc.vv.alert.show(\"解散房间\", \"解散房间不扣金币，是否确定解散？\", function() {\r\n            cc.vv.net.send(\"dispress\");\r\n        }, true);\r\n    },\r\n    onBtnClicked: function(event) {\r\n        if (event.target.name == \"back\") {\r\n            this.fanhui.active = true;\r\n        }\r\n        if (event.target.name == \"bg\") {\r\n            this.fanhui.active = false;\r\n        }\r\n        if (event.target.name == \"fan\") {\r\n            this.fanhui.active = false;\r\n            this.backAlert.active = true;\r\n        }\r\n        if (event.target.name == \"no\") {\r\n            this.fanhui.active = false;\r\n            this.backAlert.active = false;\r\n        }\r\n    },\r\n    onBtnExit: function() {\r\n        this.backAlert.active = false;\r\n        cc.vv.net.send(\"exit\");\r\n    },\r\n    onBtnExchange: function() {\r\n        this.backAlert.active = false;\r\n        this.fanhui.active = false;\r\n        cc.vv.userMgr.exchange = 1;\r\n        cc.vv.net.send(\"exit\");\r\n    },\r\n    playVoice: function() {\r\n        if (this._playingSeat == null && this._voiceMsgQueue.length) {\r\n            console.log(\"playVoice\");\r\n            var data = this._voiceMsgQueue.shift();\r\n            var idx = cc.vv.gameNetMgr.getSeatIndexByID(data.sender);\r\n            var localIndex = cc.vv.gameNetMgr.getLocalIndexZJH(idx);\r\n            this._playingSeat = localIndex;\r\n            this._seats[localIndex].voiceMsg(true);\r\n            var msgInfo = JSON.parse(data.content);\r\n            var msgfile = \"voicemsg.amr\";\r\n            this._lastPlayTime = Date.now() + msgInfo.time;\r\n            if (!cc.sys.isNative) {\r\n                var serverid = msgInfo['msg'];\r\n                window.downloadVoice(serverid);\r\n                return;\r\n            }\r\n            cc.vv.voiceMgr.writeVoice(msgfile, msgInfo.msg);\r\n            cc.vv.voiceMgr.play(msgfile);\r\n        }\r\n    },\r\n    initEventHandlers: function() {\r\n        cc.vv.gameNetMgr.dataEventHandler = this.node;\r\n        var self = this;\r\n        this.node.on('new_user', function(data) {\r\n            //新人加入房间\r\n            self.initSingleSeat(data.detail);\r\n        });\r\n        this.node.on('user_state_changed', function(data) {\r\n            var seat = data.detail;\r\n            var index = cc.vv.gameNetMgr.getLocalIndexZJH(seat.seatindex);\r\n            self._seats[index].seatHide();\r\n        });\r\n        this.node.on('game_init', function(data) {\r\n            var gameInfo = data.detail;\r\n            if (!gameInfo) return;\r\n            self.showDiFen(gameInfo.baseFen);\r\n            self._tips.node.active = false;\r\n            var seatDatas = {};\r\n            if (gameInfo['players']) {\r\n                for (var i in gameInfo['players']) {\r\n                    var seatData = gameInfo['players'][i];\r\n                    seatDatas[seatData['userid']] = seatData;\r\n                }\r\n            }\r\n\r\n            self.refreshSeats(seatDatas);\r\n        });\r\n        this.node.on('not_exit', function(data) {\r\n            cc.vv.userMgr.exchange = 0;\r\n            cc.vv.alert.show('提示', '游戏进行中，无法退出房间');\r\n        });\r\n        this.node.on('game_begin', function(data) {\r\n            self.countdown.node.active = false;\r\n            var data = data.detail;\r\n            //游戏开始\r\n            console.log('游戏开始', data);\r\n            var holds = data.holds;\r\n            var maxQiangZhuangBeiShu = data.maxQiangZhuangBeiShu;\r\n            console.log('holds===>', holds);\r\n            self.showSelfPai(holds); //展示自己手上的四张手牌\r\n            self.showQiangZhu(maxQiangZhuangBeiShu); //展示抢庄倍数\r\n            self.showOtherSeat();\r\n            self.showQiangZhuTips();\r\n        });\r\n        this.node.on('voice_msg', function(data) {\r\n            var data = data.detail;\r\n            self._voiceMsgQueue.push(data);\r\n            self.playVoice();\r\n        });\r\n        this.node.on('chat_push', function(data) {\r\n            var data = data.detail;\r\n            var idx = cc.vv.gameNetMgr.getSeatIndexByID(data.sender);\r\n            var localIdx = cc.vv.gameNetMgr.getLocalIndexZJH(idx);\r\n            self._seats[localIdx].chat(data.content);\r\n        });\r\n        this.node.on('quick_chat_push', function(data) {\r\n            var data = data.detail;\r\n            var idx = cc.vv.gameNetMgr.getSeatIndexByID(data.sender);\r\n            var localIdx = cc.vv.gameNetMgr.getLocalIndexZJH(idx);\r\n            var index = data.content;\r\n            var info = cc.vv.zjhchat.getQuickChatInfo(index);\r\n            self._seats[localIdx].chat(info.content);\r\n            cc.vv.audioMgr.playSFX(info.sound);\r\n        });\r\n        this.node.on('emoji_push', function(data) {\r\n            var data = data.detail;\r\n            var idx = cc.vv.gameNetMgr.getSeatIndexByID(data.sender);\r\n            var localIdx = cc.vv.gameNetMgr.getLocalIndexZJH(idx);\r\n            self._seats[localIdx].emoji(data.content);\r\n        });\r\n        this.node.on('show_qiang', function(data) {\r\n            //有人抢庄\r\n            var data = data.detail;\r\n            var userId = data.userid;\r\n            var beishu = data.beiShu;\r\n            var seatIndex = cc.vv.gameNetMgr.getSeatIndexByID(userId);\r\n            var localIndex = cc.vv.gameNetMgr.getLocalIndexZJH(seatIndex);\r\n            var seat = self._seats[localIndex];\r\n            seat.showQiangZhuText(beishu);\r\n        });\r\n        this.node.on('count_down', function(data) {\r\n            if (self._tips.node.active) {\r\n                self._tips.node.active = false;\r\n            }\r\n            var data = data.detail;\r\n            self.countdown.string = data.countDown;\r\n            self.countdown.node.active = true;\r\n            if (data.countDown <= 0) {\r\n                self.countdown.node.active = false;\r\n            }\r\n        });\r\n        this.node.on('game_zhuangSelected', function(data) {\r\n            //抢庄结束\r\n            self.hideQiangZhuTips();\r\n            self._seats[0].hideQiangZhu();\r\n            //定庄\r\n            var userId = data.detail;\r\n            for (var i in self._seats) {\r\n                var seat = self._seats[i];\r\n                seat.hideQiangZhuText();\r\n            }\r\n            var seatIndex = cc.vv.gameNetMgr.getSeatIndexByID(userId);\r\n            var localIndex = cc.vv.gameNetMgr.getLocalIndexZJH(seatIndex);\r\n            var localSeat = self._seats[localIndex];\r\n            localSeat.showZhuang();\r\n            //定完庄后，激活服务器\r\n            cc.vv.net.send('zhuangEndFromClient');\r\n        });\r\n        this.node.on('game_myXzBegin', function(data) {\r\n            //下注\r\n            self.showXiaZhuTips(); //显示下注提示\r\n            var data = data.detail;\r\n            var seat = self._seats[0];\r\n            seat.showXiaBei(data);\r\n        });\r\n        this.node.on('game_myXzEnd', function(data) {\r\n            //下注结束\r\n            self.hideXiaZhuTips();\r\n            self._seats[0].hideXiaBei();\r\n        });\r\n        this.node.on('show_beiShuText', function(data) {\r\n            //显示下的倍数\r\n            var data = data.detail;\r\n            var userId = data.userid;\r\n            var beiShu = data.beiShu;\r\n            self.showBeiShuText(userId, beiShu);\r\n        });\r\n        this.node.on('game_myHoldsUpdate', function(data) {\r\n            //发最后一张手牌\r\n            var holds = data.detail;\r\n            self.showSelfPai(holds); //展示手牌\r\n            self.showYouShi();\r\n            self.showCount();\r\n        });\r\n        this.node.on('game_b_OneSnEnd', function(data) {\r\n            //算牛结束\r\n            var userId = data.detail;\r\n            var seatIndex = cc.vv.gameNetMgr.getSeatIndexByID(userId);\r\n            var localIndex = cc.vv.gameNetMgr.getLocalIndexZJH(seatIndex);\r\n            var localSeat = self._seats[localIndex];\r\n            localSeat.snEnd();\r\n        });\r\n        this.node.on('match_exit_error', function(data) {\r\n            //锦标赛不能退出游戏\r\n            cc.vv.alert.show(\"提示\", \"锦标赛中不能退出游戏\");\r\n        });\r\n        this.node.on('game_showAllUser', function(data) {\r\n            //游戏结束\r\n            var data = data.detail;\r\n            var moneyFlows = data.moneyFlows;\r\n            var players = data.players;\r\n            var zhuang_userId = null;\r\n            var type = null;\r\n            for (var i in players) {\r\n                var player = players[i];\r\n                if (player.isZhuang) {\r\n                    zhuang_userId = player.userid;\r\n                }\r\n                if (cc.vv.userMgr.userId == player.userid) {\r\n                    //判断自己的输赢\r\n                    if (player.status == 'win') {\r\n                        type = 1;\r\n                    } else {\r\n                        type = 2;\r\n                    }\r\n                }\r\n            }\r\n            var user_arr_toZhuang = []; //流向庄\r\n            var user_arr_fromZhuang = []; //从庄来\r\n            for (var j in moneyFlows) {\r\n                var moneyFlow = moneyFlows[j];\r\n                if (moneyFlow.to == zhuang_userId) {\r\n                    user_arr_toZhuang.push(moneyFlow);\r\n                }\r\n                if (moneyFlow.from == zhuang_userId) {\r\n                    user_arr_fromZhuang.push(moneyFlow);\r\n                }\r\n            }\r\n            self.showLastPai(players, function() {\r\n                self.showLastResult(type); //显示本人输赢\r\n                setTimeout(function() {\r\n                    self.hideLastResult();\r\n                    self.hideLastPai();\r\n                    if (self._tips) {\r\n                        self._tips.node.active = true;\r\n                    }\r\n                    self.showMoneyFlowsAnim(user_arr_toZhuang, user_arr_fromZhuang, function() {\r\n                        self.showMoneyChange(players);\r\n                        setTimeout(function() {\r\n                            //showMoneyChange执行时间为2秒\r\n                            cc.vv.net.send('ready');\r\n                        }, 2000);\r\n                    });\r\n                }, 1500); //显示输赢的时间\r\n            });\r\n        });\r\n        this.node.on('exit_room', function(data) {\r\n            //刷新用户钱币数量\r\n            self.getGemsAndCoins();\r\n        });\r\n    },\r\n    refreshSeats: function(seatDatas) {\r\n        for (var i in this._seats) {\r\n            var seat = this._seats[i];\r\n            var seatData = seatDatas[seat._userId];\r\n            if (seatData) {\r\n                seat._score = seatData['money'];\r\n            }\r\n            seat.refresh();\r\n        }\r\n    },\r\n    //设置金币钻石数量\r\n    getGemsAndCoins: function() {\r\n        var self = this;\r\n        cc.vv.userMgr.getGemsAndCoins(function(data) {\r\n            cc.vv.userMgr.gems = data.gems;\r\n            cc.vv.userMgr.coins = data.coins;\r\n        });\r\n    },\r\n    showLastPai: function(players, callback) {\r\n        var self = this;\r\n        //显示每个人的牌\r\n        // var players_num = players.length;\r\n        var player_index = 0;\r\n        var fun = function() {\r\n            if (player_index > players.length - 1) {\r\n                clearInterval(interval);\r\n                if (callback) {\r\n                    callback();\r\n                }\r\n                return;\r\n            }\r\n            var player = players[player_index];\r\n            var userId = player.userid;\r\n            var holds = player.holds;\r\n            var seat = self.getSeatByUserId(userId);\r\n            var spriteFrames = [];\r\n            for (var i in holds) {\r\n                spriteFrames.push(self.getpaiRes(holds[i]));\r\n            }\r\n            seat.showLastPai(spriteFrames, player.score);\r\n            player_index++;\r\n        };\r\n        var interval = setInterval(fun, 1000); //1秒显示一个\r\n        fun();\r\n    },\r\n    hideLastPai: function() {\r\n        for (var i in this._seats) {\r\n            var seat = this._seats[i];\r\n            seat.hideLastPai();\r\n            seat.hideBeiShuText();\r\n        }\r\n    },\r\n    showMoneyChange: function(players) {\r\n        var self = this;\r\n        for (var i in players) {\r\n            var player = players[i];\r\n            var userId = player.userid;\r\n            var seat = self.getSeatByUserId(userId);\r\n            var money = player.money;\r\n            if (seat) {\r\n                seat.changeMoney(money);\r\n            }\r\n        }\r\n    },\r\n    getSeatByUserId: function(userId) {\r\n        var self = this;\r\n        var seatIndex = cc.vv.gameNetMgr.getSeatIndexByID(userId);\r\n        var localIndex = cc.vv.gameNetMgr.getLocalIndexZJH(seatIndex);\r\n        if (!self._seats) return null;\r\n        var localSeat = self._seats[localIndex];\r\n        return localSeat;\r\n    },\r\n    showMoneyFlowsAnim: function(user_arr_toZhuang, user_arr_fromZhuang, callback) {\r\n        var self = this;\r\n        //资金流动画\r\n        //流向庄的金币动画\r\n        self.buildMoneyFlowsAnimData(user_arr_toZhuang);\r\n        self.execMoneyFlowsAnim(function() {\r\n            //从庄流出的金币动画\r\n            self.buildMoneyFlowsAnimData(user_arr_fromZhuang);\r\n            self.execMoneyFlowsAnim(function() {\r\n                if (callback) {\r\n                    callback();\r\n                }\r\n            });\r\n        });\r\n    },\r\n    buildMoneyFlowsAnimData: function(user_arr) {\r\n        var self = this;\r\n        //构造金币流数据\r\n        for (var i in user_arr) {\r\n            //起点\r\n            var from_userId = user_arr[i].from;\r\n            var fromSeat = self.getSeatByUserId(from_userId);\r\n            var from_node = fromSeat.node;\r\n            var start_x = from_node.x;\r\n            var start_y = from_node.y;\r\n            //终点\r\n            var to_userId = user_arr[i].to;\r\n            var toSeat = self.getSeatByUserId(to_userId);\r\n            var to_node = toSeat.node;\r\n            var end_x = to_node.x;\r\n            var end_y = to_node.y;\r\n            var dis_x = end_x - start_x;\r\n            var dis_y = end_y - start_y;\r\n            var jin_num = 15;\r\n            var per_x = Math.floor(dis_x / jin_num);\r\n            var per_y = Math.floor(dis_y / jin_num);\r\n            var new_node_arr = [];\r\n            // if (type == 1) {\r\n            for (var j = 0; j <= jin_num; j++) {\r\n                var new_x = start_x + j * per_x;\r\n                var new_y = start_y + j * per_y;\r\n                var new_node = cc.instantiate(self.jinbi);\r\n                new_node.active = false;\r\n                new_node.x = new_x;\r\n                new_node.y = new_y;\r\n                cc.find(\"Canvas\").addChild(new_node);\r\n                new_node_arr.push(new_node);\r\n            }\r\n            self.jinbi_node_arr.push(new_node_arr);\r\n        }\r\n    },\r\n    execMoneyFlowsAnim: function(callback) {\r\n        //执行金币流动画\r\n        var self = this;\r\n        if (!self.jinbi_node_arr) return;\r\n        if (self.jinbi_node_arr.length == 0) {\r\n            self.clearFlowAnim();\r\n            if (callback) {\r\n                callback();\r\n            }\r\n            return;\r\n        }\r\n        var interVal = setInterval(function() {\r\n            if (!self.showJinbiIndex) {\r\n                self.showJinbiIndex = 0;\r\n            }\r\n            for (var i in self.jinbi_node_arr) {\r\n                var new_node_arr = self.jinbi_node_arr[i];\r\n                new_node_arr[self.showJinbiIndex].active = true;\r\n            }\r\n            if (self.showJinbiIndex >= 10) {\r\n                self.showJinbiIndex = 0;\r\n                self.flowEndAnim(callback);\r\n                clearInterval(interVal);\r\n            } else {\r\n                self.showJinbiIndex++;\r\n            }\r\n        }, 100);\r\n    },\r\n    flowEndAnim: function(callback) {\r\n        var self = this;\r\n        var duration = 0.4;\r\n        for (var i in self.jinbi_node_arr) {\r\n            var node_arr = self.jinbi_node_arr[i];\r\n            var endNode = node_arr[node_arr.length - 1];\r\n            for (var j in node_arr) {\r\n                var node = node_arr[j];\r\n                var action = cc.moveTo(duration, cc.p(endNode.x, endNode.y));\r\n                node.runAction(action);\r\n            }\r\n        }\r\n        setTimeout(function() {\r\n            //清理金币\r\n            self.clearFlowAnim();\r\n            if (callback) {\r\n                callback();\r\n            }\r\n        }, duration * 1000);\r\n    },\r\n    clearFlowAnim: function() {\r\n        var self = this;\r\n        for (var i in self.jinbi_node_arr) {\r\n            var node_arr = self.jinbi_node_arr[i];\r\n            for (var j in node_arr) {\r\n                var node = node_arr[j];\r\n                cc.find(\"Canvas\").removeChild(node);\r\n            }\r\n        }\r\n        self.jinbi_node_arr = [];\r\n    },\r\n    showBeiShuText: function(userId, beiShu) {\r\n        var self = this;\r\n        var seatIndex = cc.vv.gameNetMgr.getSeatIndexByID(userId);\r\n        var localIndex = cc.vv.gameNetMgr.getLocalIndexZJH(seatIndex);\r\n        var seat = self._seats[localIndex];\r\n        seat.showBeiShuText(beiShu);\r\n    },\r\n    showCount: function() {\r\n        this._seats[0].showCount();\r\n    },\r\n    showYouShi: function() {\r\n        this._seats[0].showYouShi();\r\n    },\r\n    showQiangZhuTips: function() {\r\n        //显示抢主tips\r\n        this._qiangZhuTips.node.active = true;\r\n    },\r\n    hideQiangZhuTips: function() {\r\n        this._qiangZhuTips.node.active = false;\r\n    },\r\n    showXiaZhuTips: function() {\r\n        this._xiaBeiTips.node.active = true;\r\n    },\r\n    hideXiaZhuTips: function() {\r\n        this._xiaBeiTips.node.active = false;\r\n    },\r\n    showOtherSeat: function() {\r\n        var self = this;\r\n        for (var i = 1; i < 5; i++) {\r\n            var seat = self._seats[i];\r\n            seat.showBeiPai(4); //显示牌的背面\r\n        }\r\n    },\r\n    showQiangZhu: function(maxQiangZhuangBeiShu) {\r\n        var self = this;\r\n        var level = 0;\r\n        for (var i in self.qiangZhuLevel) {\r\n            if (self.qiangZhuLevel[i] <= maxQiangZhuangBeiShu) {\r\n                level = i;\r\n            }\r\n        }\r\n        var seat = self._seats[0];\r\n        seat.showQiangZhu(level);\r\n    },\r\n    showSelfPai: function(holds) {\r\n        var self = this;\r\n        var seat = self._seats[0];\r\n        var spriteFrames = [];\r\n        for (var i in holds) {\r\n            spriteFrames.push(self.getpaiRes(holds[i]));\r\n        }\r\n        seat.showSelfPai(spriteFrames);\r\n    },\r\n    getpaiRes: function(data) {\r\n        var self = this;\r\n        data = data + 1;\r\n        var type, num, huase_big, huase_small;\r\n        num = (data % 100).toString();\r\n        if (data > 0 && data < 14) {\r\n            type = '04'; //黑桃\r\n            num = num + '-1'; //黑牌\r\n        } else if (data > 100 && data < 114) {\r\n            type = '03'; //红桃\r\n            num = num + '-2'; //红牌\r\n        } else if (data > 200 && data < 214) {\r\n            type = '02'; //梅花\r\n            num = num + '-1'; //黑牌\r\n        } else if (data > 300 && data < 314) {\r\n            type = '01'; //方块\r\n            num = num + '-2'; //红牌\r\n        }\r\n        huase_big = \"huase_big\" + type;\r\n        huase_small = \"huase_small\" + type;\r\n        var hold = data - 1;\r\n        var result = {\r\n            num: self.paigroup.getSpriteFrame(num),\r\n            huase_big: self.paigroup.getSpriteFrame(huase_big),\r\n            huase_small: self.paigroup.getSpriteFrame(huase_small),\r\n            hold: hold\r\n        };\r\n        return result;\r\n    },\r\n    showDiFen: function(difen) {\r\n        var self = this;\r\n        self._difen.node.active = true;\r\n        self._difen.string = \"底分：\" + difen;\r\n    },\r\n    showLastResult: function(type) {\r\n        var seatIndex = cc.vv.gameNetMgr.getSeatIndexByID(cc.vv.userMgr.userId);\r\n        var localIndex = cc.vv.gameNetMgr.getLocalIndexZJH(seatIndex);\r\n        if (!this._seats) return;\r\n        var seat = this._seats[localIndex];\r\n        if (this._lastResult && seat._lastpai.active) {\r\n            this._lastResult.active = true;\r\n        }\r\n        if (type == 1) {\r\n            this._lastResult.getChildByName('win').active = true;\r\n            this._lastResult.getChildByName('lose').active = false;\r\n        } else if (type == 2) {\r\n            this._lastResult.getChildByName('win').active = false;\r\n            this._lastResult.getChildByName('lose').active = true;\r\n        }\r\n    },\r\n    hideLastResult: function() {\r\n        if (this._lastResult) {\r\n            this._lastResult.active = false;\r\n        }\r\n    },\r\n    // called every frame, uncomment this function to activate update callback\r\n    update: function(dt) {\r\n        if (window.voice && window.voice.localId != null) {\r\n            var localId = window.voice.localId;\r\n            window.voice.localId = null;\r\n            cc.vv.audioMgr.pauseAll();\r\n            window.playVoice(localId);\r\n        }\r\n        var minutes = Math.floor(Date.now() / 1000 / 60);\r\n        if (this._lastMinute != minutes) {\r\n            this._lastMinute = minutes;\r\n            var date = new Date();\r\n            var h = date.getHours();\r\n            h = h < 10 ? \"0\" + h : h;\r\n            var m = date.getMinutes();\r\n            m = m < 10 ? \"0\" + m : m;\r\n            this._timeLabel.string = \"\" + h + \":\" + m;\r\n        }\r\n        if (this._lastPlayTime != null) {\r\n            if (Date.now() > this._lastPlayTime + 200) {\r\n                this.onPlayerOver();\r\n                this._lastPlayTime = null;\r\n            }\r\n        } else {\r\n            this.playVoice();\r\n        }\r\n    },\r\n    onPlayerOver: function() {\r\n        if (!cc.sys.isNative) {\r\n            window.stopPlayVoice();\r\n        };\r\n        cc.vv.audioMgr.resumeAll();\r\n        console.log(\"onPlayCallback:\" + this._playingSeat);\r\n        var localIndex = this._playingSeat;\r\n        this._playingSeat = null;\r\n        this._seats[localIndex].voiceMsg(false);\r\n    },\r\n    onDestroy: function() {\r\n        cc.vv.voiceMgr.stop();\r\n        //        cc.vv.voiceMgr.onPlayCallback = null;\r\n    },\r\n    onQiangZhuangClick: function(e) {\r\n        var self = this;\r\n        var node = e.target;\r\n        var opacity = node.opacity;\r\n        if (opacity == 255) {\r\n            var beishu = 0;\r\n            var nodeName = node.name;\r\n            beishu = nodeName.replace('qiang', '');\r\n            cc.vv.net.send(\"qiang_zhuang\", beishu);\r\n            self.hideQiangZhuTips();\r\n            self._seats[0].hideQiangZhu();\r\n        }\r\n    },\r\n    onXiaZhuClick: function(e) {\r\n        var self = this;\r\n        var node = e.target;\r\n        var opacity = node.opacity;\r\n        if (opacity == 255) {\r\n            var beishu = 0;\r\n            var str = node.getChildByName('num').getComponent(cc.Label).string;\r\n            beishu = str.replace('倍', '');\r\n            cc.vv.net.send(\"xia_zhu\", beishu);\r\n            self.hideXiaZhuTips();\r\n            self._seats[0].hideXiaBei();\r\n        }\r\n    },\r\n    onYouShiClick: function(e) {\r\n        console.log('有十', e.target);\r\n        var niu_arr = this._seats[0].getNiuArr();\r\n        console.log('niu_arr', niu_arr);\r\n        cc.vv.net.send(\"you_shi\", niu_arr);\r\n    },\r\n    onSanPaiClick: function(e) {\r\n        console.log('散牌', e.target);\r\n        cc.vv.net.send(\"san_pai\");\r\n    },\r\n    onPaiClick: function(e) {\r\n        if (!this._seats[0]._count.active) return;\r\n        var node = e.target;\r\n        var nodeName = node.name;\r\n        var hold = node.hold;\r\n        var num = hold % 100;\r\n        console.log('hold', hold);\r\n        if (node.isClicked) {\r\n            node.isClicked = false;\r\n            node.y -= 20;\r\n            this._seats[0].unsetCount(nodeName);\r\n        } else {\r\n            node.isClicked = true;\r\n            node.y += 20;\r\n            this._seats[0].setCount(num, nodeName);\r\n        }\r\n    },\r\n});"
  ]
}
{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [
    "Net",
    "require",
    "Global",
    "cc",
    "Class",
    "extends",
    "Component",
    "properties",
    "lblName",
    "Label",
    "lblGems",
    "lblID",
    "lblNotice",
    "joinGameWin",
    "Node",
    "applyAgentWin",
    "createRoomWin",
    "settingsWin",
    "helpWin",
    "shareWin",
    "btnJoinGame",
    "btnReturnGame",
    "sprHeadImg",
    "Sprite",
    "effAnimation",
    "_lastCheckTime",
    "initNetHandlers",
    "self",
    "onShare",
    "vv",
    "anysdkMgr",
    "share",
    "onLoad",
    "sys",
    "isNative",
    "isMobile",
    "cvs",
    "node",
    "getComponent",
    "Canvas",
    "fitHeight",
    "fitWidth",
    "director",
    "loadScene",
    "preLoad",
    "initLabels",
    "effNode",
    "find",
    "pos",
    "v2",
    "playBtnEff",
    "gameNetMgr",
    "roomId",
    "active",
    "userMgr",
    "oldRoomId",
    "enterRoom",
    "imgLoader",
    "setUserID",
    "userId",
    "utils",
    "addClickEvent",
    "initButtonHandler",
    "addComponent",
    "notice",
    "version",
    "msg",
    "gemstip",
    "string",
    "refreshInfo",
    "refreshNotice",
    "refreshGemsTip",
    "audioMgr",
    "playBGM",
    "initEventHandlers",
    "onGet",
    "ret",
    "errcode",
    "console",
    "log",
    "errmsg",
    "gems",
    "showJinbi",
    "data",
    "account",
    "sign",
    "http",
    "sendRequest",
    "bind",
    "replace",
    "type",
    "btnPath",
    "btn",
    "loader",
    "loadResDir",
    "err",
    "assets",
    "userName",
    "onBtnClicked",
    "event",
    "target",
    "name",
    "show",
    "onApplyAgentClicked",
    "onApplyAgentBtnBack",
    "onJoinGameClicked",
    "onReturnGameClicked",
    "onBtnAddGemsClicked",
    "charge",
    "onCreateRoomClicked",
    "alert",
    "on",
    "detail",
    "str",
    "getRefreshInfo",
    "fn",
    "userid",
    "Date",
    "now",
    "flag",
    "btnEff",
    "Animation",
    "setPosition",
    "animState",
    "play",
    "speed",
    "wrapMode",
    "WrapMode",
    "Loop",
    "repeatCount",
    "Infinity",
    "gotoNewHall",
    "update",
    "dt",
    "x",
    "width",
    "roomData",
    "shareRoomId",
    "roomid",
    "content"
  ],
  "mappings": "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",
  "file": "unknown",
  "sourcesContent": [
    "var Net = require(\"Net\")\r\nvar Global = require(\"Global\")\r\ncc.Class({\r\n    extends: cc.Component,\r\n    properties: {\r\n        lblName: cc.Label,\r\n        lblGems: cc.Label,\r\n        lblID: cc.Label,\r\n        lblNotice: cc.Label,\r\n        joinGameWin: cc.Node,\r\n        applyAgentWin: cc.Node,\r\n        createRoomWin: cc.Node,\r\n        settingsWin: cc.Node,\r\n        helpWin: cc.Node,\r\n        shareWin: cc.Node,\r\n        btnJoinGame: cc.Node,\r\n        btnReturnGame: cc.Node,\r\n        sprHeadImg: cc.Sprite,\r\n        effAnimation: cc.Node,\r\n        _lastCheckTime: 0,\r\n    },\r\n    initNetHandlers: function() {\r\n        var self = this;\r\n    },\r\n    onShare: function() {\r\n        cc.vv.anysdkMgr.share(\"亚巨包头麻将\", \"亚巨包头麻将\");\r\n    },\r\n    // use this for initialization\r\n    onLoad: function() {\r\n        if (!cc.sys.isNative && cc.sys.isMobile) {\r\n            var cvs = this.node.getComponent(cc.Canvas);\r\n            cvs.fitHeight = true;\r\n            cvs.fitWidth = true;\r\n        }\r\n        if (!cc.vv) {\r\n            cc.director.loadScene(\"login\");\r\n            return;\r\n        }\r\n        this.preLoad();\r\n        this.initLabels();\r\n        this.effNode = cc.find(\"Canvas/eff\");\r\n        // 如果未创建房间，创建按钮显示特效\r\n        // 如果存在房间，返回房间显示特效            \r\n        var pos = cc.v2(310, 53);\r\n        this.playBtnEff(true, pos);\r\n        if (cc.vv.gameNetMgr.roomId) {\r\n            this.btnJoinGame.active = false;\r\n            this.btnReturnGame.active = true;\r\n            pos = cc.v2(310, 53);\r\n        } else {\r\n            this.btnJoinGame.active = true;\r\n            this.btnReturnGame.active = false;\r\n            pos = cc.v2(86, -108);\r\n        }\r\n        // 播放按钮特效\r\n        this.playBtnEff(true, pos);\r\n        var roomId = cc.vv.userMgr.oldRoomId\r\n        if (roomId != null) {\r\n            cc.vv.userMgr.oldRoomId = null;\r\n            cc.vv.userMgr.enterRoom(roomId);\r\n        }\r\n        var imgLoader = this.sprHeadImg.node.getComponent(\"ImageLoader\");\r\n        imgLoader.setUserID(cc.vv.userMgr.userId);\r\n        cc.vv.utils.addClickEvent(this.sprHeadImg.node, this.node, \"Hall\", \"onBtnClicked\");\r\n        this.initButtonHandler(\"Canvas/right_bottom/btn_shezhi\");\r\n        this.initButtonHandler(\"Canvas/right_bottom/btn_help\");\r\n        this.initButtonHandler(\"Canvas/right_bottom/btn_share_wx\");\r\n        this.helpWin.addComponent(\"OnBack\");\r\n        if (!cc.vv.userMgr.notice) {\r\n            cc.vv.userMgr.notice = {\r\n                version: null,\r\n                msg: \"数据请求中...\",\r\n            }\r\n        }\r\n        if (!cc.vv.userMgr.gemstip) {\r\n            cc.vv.userMgr.gemstip = {\r\n                version: null,\r\n                msg: \"数据请求中...\",\r\n            }\r\n        }\r\n        this.lblNotice.string = cc.vv.userMgr.notice.msg;\r\n        this.refreshInfo();\r\n        this.refreshNotice();\r\n        this.refreshGemsTip();\r\n        // cc.vv.audioMgr.playBGM(\"bgMain.mp3\");\r\n        cc.vv.audioMgr.playBGM(\"bgFight.mp3\");\r\n        this.initEventHandlers();\r\n    },\r\n    refreshInfo: function() {\r\n        var self = this;\r\n        var onGet = function(ret) {\r\n            if (ret.errcode !== 0) {\r\n                console.log(ret.errmsg);\r\n            } else {\r\n                if (ret.gems != null) {\r\n                    this.lblGems.string = cc.vv.utils.showJinbi(ret.gems);\r\n                }\r\n            }\r\n        };\r\n        var data = {\r\n            account: cc.vv.userMgr.account,\r\n            sign: cc.vv.userMgr.sign,\r\n        };\r\n        cc.vv.http.sendRequest(\"/get_user_status\", data, onGet.bind(this));\r\n    },\r\n    refreshGemsTip: function() {\r\n        var self = this;\r\n        var onGet = function(ret) {\r\n            if (ret.errcode !== 0) {\r\n                console.log(ret.errmsg);\r\n            } else {\r\n                cc.vv.userMgr.gemstip.version = ret.version;\r\n                cc.vv.userMgr.gemstip.msg = ret.msg.replace(\"<newline>\", \"\\n\");\r\n            }\r\n        };\r\n        var data = {\r\n            account: cc.vv.userMgr.account,\r\n            sign: cc.vv.userMgr.sign,\r\n            type: \"fkgm\",\r\n            version: cc.vv.userMgr.gemstip.version\r\n        };\r\n        cc.vv.http.sendRequest(\"/get_message\", data, onGet.bind(this));\r\n    },\r\n    refreshNotice: function() {\r\n        var self = this;\r\n        var onGet = function(ret) {\r\n            if (ret.errcode !== 0) {\r\n                console.log(ret.errmsg);\r\n            } else {\r\n                cc.vv.userMgr.notice.version = ret.version;\r\n                cc.vv.userMgr.notice.msg = ret.msg;\r\n                this.lblNotice.string = ret.msg;\r\n            }\r\n        };\r\n        var data = {\r\n            account: cc.vv.userMgr.account,\r\n            sign: cc.vv.userMgr.sign,\r\n            type: \"notice\",\r\n            version: cc.vv.userMgr.notice.version\r\n        };\r\n        cc.vv.http.sendRequest(\"/get_message\", data, onGet.bind(this));\r\n    },\r\n    initButtonHandler: function(btnPath) {\r\n        var btn = cc.find(btnPath);\r\n        cc.vv.utils.addClickEvent(btn, this.node, \"Hall\", \"onBtnClicked\");\r\n    },\r\n    preLoad: function() {\r\n        cc.loader.loadResDir(\"textures/images\", function(err, assets) {\r\n            cc.loader.loadResDir(\"textures/MJRoom\", function(err, assets) {\r\n                cc.loader.loadResDir(\"textures/MJ\", function(err, assets) {});\r\n            });\r\n        });\r\n    },\r\n    initLabels: function() {\r\n        this.lblName.string = cc.vv.userMgr.userName;\r\n        this.lblGems.string = cc.vv.utils.showJinbi(cc.vv.userMgr.gems);\r\n        this.lblID.string = \"ID:\" + cc.vv.userMgr.userId;\r\n    },\r\n    onBtnClicked: function(event) {\r\n        if (event.target.name == \"btn_shezhi\") {\r\n            this.settingsWin.active = true;\r\n        } else if (event.target.name == \"btn_help\") {\r\n            this.helpWin.active = true;\r\n        } else if (event.target.name == \"btn_share_wx\") {\r\n            cc.vv.share.show();\r\n        }\r\n    },\r\n    onApplyAgentClicked: function() {\r\n        this.applyAgentWin.active = true;\r\n    },\r\n    onApplyAgentBtnBack: function() {\r\n        this.applyAgentWin.active = false;\r\n    },\r\n    onJoinGameClicked: function() {\r\n        this.joinGameWin.active = true;\r\n    },\r\n    onReturnGameClicked: function() {\r\n        cc.director.loadScene(\"mjgame\");\r\n    },\r\n    onBtnAddGemsClicked: function() {\r\n        console.log(\"点击充值按钮\");\r\n        cc.vv.charge.show();\r\n    },\r\n    onCreateRoomClicked: function() {\r\n        if (cc.vv.gameNetMgr.roomId != null) {\r\n            cc.vv.alert.show(\"提示\", \"房间已经创建!\\n必须解散当前房间才能创建新的房间\");\r\n            return;\r\n        }\r\n        console.log(\"onCreateRoomClicked\");\r\n        this.createRoomWin.active = true;\r\n    },\r\n    initEventHandlers: function() {\r\n        this.node.on('update_gems', function(event) {\r\n            if (event.detail.gems != null) {\r\n                var str = event.detail.gems;\r\n                this.lblGems.string = cc.vv.utils.showJinbi(str);\r\n            }\r\n        }.bind(this));\r\n    },\r\n    // 获得更新消息\r\n    getRefreshInfo: function() {\r\n        var fn = function(ret) {\r\n            if (ret == null) {\r\n                console.log('消息是空的');\r\n                return;\r\n            }\r\n            if (ret.userid == cc.vv.userMgr.userId) {\r\n                if (ret.gems != null) {\r\n                    this.lblGems.string = cc.vv.utils.showJinbi(ret.gems);\r\n                }\r\n            }\r\n        };\r\n        this._lastCheckTime = Date.now();\r\n        cc.vv.http.sendRequest(\"/need_refresh\", {\r\n            userid: cc.vv.userMgr.userId\r\n        }, fn.bind(this));\r\n    },\r\n    // 播放按钮特效\r\n    playBtnEff: function(flag, pos) {\r\n        if (flag) {\r\n            this.btnEff = this.effAnimation.getComponent(cc.Animation);\r\n            // this.effAnimation.getComponent(cc.Node).getPosition();\r\n            this.effNode.setPosition(pos);\r\n            var animState = this.btnEff.play('anniu');\r\n            animState.speed = 0.3;\r\n            animState.wrapMode = cc.WrapMode.Loop;\r\n            animState.repeatCount = Infinity;\r\n        }\r\n    },\r\n    gotoNewHall:function(){\r\n        cc.director.loadScene(\"newhall\");\r\n    },\r\n    // called every frame, uncomment this function to activate update callback\r\n    update: function(dt) {\r\n        if (Date.now() - this._lastCheckTime > 30000) {\r\n            this.getRefreshInfo();\r\n        };\r\n        var x = this.lblNotice.node.x;\r\n        x -= dt * 100;\r\n        if (x + this.lblNotice.node.width < -1000) {\r\n            x = 500;\r\n        }\r\n        this.lblNotice.node.x = x;\r\n        // 如果当前自己有房间，不能直接进入分享过来的房间\r\n        if (cc.vv && cc.vv.userMgr.roomData != null) {\r\n            cc.vv.userMgr.enterRoom(cc.vv.userMgr.roomData);\r\n            cc.vv.userMgr.roomData = null;\r\n        } else {\r\n            // 如果当前没有房间，且分享过来的房间号不是空的话，可以进入房间\r\n            if (cc.vv && cc.vv.userMgr.shareRoomId != null) {\r\n                cc.vv.userMgr.roomData = null;\r\n                var roomid = cc.vv.userMgr.shareRoomId;\r\n                cc.vv.userMgr.shareRoomId = null;\r\n                cc.vv.userMgr.enterRoom(roomid, function(ret) {\r\n                    if (ret.errcode != 0) {\r\n                        var content = \"房间[\" + roomid + \"]不存在，请重新输入!\";\r\n                        if (ret.errcode == 4) {\r\n                            content = \"房间[\" + roomid + \"]已满!\";\r\n                        }\r\n                        cc.vv.alert.show(\"提示\", content);\r\n                    }\r\n                }.bind(this));\r\n            }\r\n        }\r\n    },\r\n});"
  ]
}
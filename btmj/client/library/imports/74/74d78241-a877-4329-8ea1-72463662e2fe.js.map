{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [
    "cc",
    "Class",
    "extends",
    "Component",
    "properties",
    "account",
    "userId",
    "userName",
    "lv",
    "exp",
    "coins",
    "gems",
    "sign",
    "ip",
    "sex",
    "roomData",
    "oldRoomId",
    "yaoqingUrl",
    "headimg",
    "shareRoomId",
    "yaoqing_key",
    "chargerate",
    "is_sign",
    "sign_days",
    "room_type",
    "collapse_prise",
    "is_first_charge",
    "scene",
    "e_roomid",
    "exchange",
    "reconnection",
    "refreshTime",
    "guestAuth",
    "param",
    "loadSceneName",
    "args",
    "sys",
    "localStorage",
    "getItem",
    "Date",
    "now",
    "setItem",
    "vv",
    "http",
    "sendRequest",
    "onAuth",
    "ret",
    "self",
    "userMgr",
    "errcode",
    "console",
    "log",
    "errmsg",
    "url",
    "SI",
    "hall",
    "login",
    "onLogin",
    "userid",
    "name",
    "roomid",
    "modules",
    "is_open_jbs",
    "shareUrl",
    "isNative",
    "roomvalid",
    "gameNetMgr",
    "roomId",
    "window",
    "wxFriend",
    "link",
    "desc",
    "shareMessage",
    "director",
    "loadScene",
    "data",
    "match_net",
    "port",
    "connect",
    "initHandlers",
    "send",
    "enterRoom",
    "callback",
    "onEnter",
    "setTimeout",
    "wc",
    "hide",
    "connectGameServer",
    "show",
    "getHistoryList",
    "onGet",
    "history",
    "getGemsAndCoins",
    "setUserSign",
    "getSignList",
    "getGamesOfRoom",
    "uuid",
    "getDetailOfGame",
    "index"
  ],
  "mappings": "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",
  "file": "unknown",
  "sourcesContent": [
    "cc.Class({\r\n    extends: cc.Component,\r\n    properties: {\r\n        account: null,\r\n        userId: null,\r\n        userName: null,\r\n        lv: 0,\r\n        exp: 0,\r\n        coins: 0,\r\n        gems: 0,\r\n        sign: 0,\r\n        ip: \"\",\r\n        sex: 0,\r\n        roomData: null,\r\n        oldRoomId: null,\r\n        yaoqingUrl: null,\r\n        headimg: null,\r\n        shareRoomId: null,\r\n        yaoqing_key: null,\r\n        chargerate: null,\r\n        is_sign: 0,\r\n        sign_days: 0,\r\n        room_type: -1,\r\n        collapse_prise: 0,\r\n        is_first_charge: 0,\r\n        scene: -1,\r\n        e_roomid: 0,\r\n        exchange: 0,\r\n        reconnection: 0,\r\n        refreshTime: 30000,\r\n    },\r\n    guestAuth: function(param) {\r\n        this.loadSceneName = param;\r\n        var account = cc.args[\"account\"];\r\n        if (account == null) {\r\n            account = cc.sys.localStorage.getItem(\"account\");\r\n        }\r\n        if (account == null) {\r\n            account = Date.now();\r\n            cc.sys.localStorage.setItem(\"account\", account);\r\n        }\r\n        cc.vv.http.sendRequest(\"/guest\", {\r\n            account: account\r\n        }, this.onAuth);\r\n    },\r\n    onAuth: function(ret) {\r\n        var self = cc.vv.userMgr;\r\n        if (ret.errcode !== 0) {\r\n            console.log(ret.errmsg);\r\n        } else {\r\n            self.account = ret.account;\r\n            self.sign = ret.sign;\r\n            self.shareRoomId = ret.shareRoomId;\r\n            cc.vv.http.url = \"http://\" + cc.vv.SI.hall;\r\n            self.login();\r\n        }\r\n    },\r\n    // 登录\r\n    login: function() {\r\n        var self = this;\r\n        var onLogin = function(ret) {\r\n            if (ret.errcode !== 0) {\r\n                console.log(ret.errmsg);\r\n            } else {\r\n                self.account = ret.account;\r\n                self.userId = ret.userid;\r\n                self.userName = ret.name;\r\n                self.lv = ret.lv;\r\n                self.exp = ret.exp;\r\n                self.coins = ret.coins;\r\n                self.gems = ret.gems;\r\n                self.roomData = ret.roomid;\r\n                self.room_type = ret.room_type;\r\n                self.sex = ret.sex;\r\n                self.ip = ret.ip;\r\n                self.headimg = ret.headimg;\r\n                self.yaoqingUrl = ret.yaoqingUrl;\r\n                self.yaoqing_key = ret.yaoqing_key;\r\n                self.is_sign = ret.is_sign;\r\n                self.sign_days = ret.sign_days;\r\n                self.collapse_prise = ret.collapse_prise;\r\n                self.is_first_charge = ret.is_first_charge;\r\n                self.modules = ret.modules; //显示模块\r\n                self.is_open_jbs = ret.is_open_jbs; //是否开放锦标赛\r\n                // TODO  充值兑换率\r\n                // self.chargerate = ret.chargerate;\r\n                var shareUrl = self.yaoqingUrl;\r\n                if (!cc.sys.isNative) {\r\n                    var roomvalid = self.shareRoomId || cc.vv.gameNetMgr.roomId || self.roomData;\r\n                    if (roomvalid) {\r\n                        shareUrl = shareUrl + roomvalid;\r\n                    } else {\r\n                        shareUrl = shareUrl + \"000000\";\r\n                    }\r\n                    if (window.wxFriend) {\r\n                        window.wxFriend.link = shareUrl;\r\n                        window.wxFriend.desc = self.userName + window.wxFriend.desc;\r\n                        window.shareMessage();\r\n                    }\r\n                }\r\n                if (self.loadSceneName) {\r\n                    cc.director.loadScene(self.loadSceneName);\r\n                } else {\r\n                    cc.director.loadScene(\"newhall\");\r\n                    cc.vv.http.sendRequest(\"/injinbiao\", {\r\n                        userId: self.userId\r\n                    }, function(data) {\r\n                        if (data.ip) {\r\n                            cc.vv.match_net.ip = data.ip + \":\" + data.port;\r\n                            console.log(\"?????\", cc.vv.match_net.ip);\r\n                            cc.vv.match_net.connect(function() {\r\n                                cc.vv.gameNetMgr.initHandlers(100);\r\n                                cc.vv.match_net.send(\"login\", {userid : self.userId});\r\n                            }, function() {});\r\n                        };\r\n                    });\r\n                }\r\n            }\r\n        };\r\n        // cc.vv.wc.show(\"正在登录游戏\");\r\n        cc.vv.http.sendRequest(\"/login\", {\r\n            account: this.account,\r\n            sign: this.sign\r\n        }, onLogin);\r\n    },\r\n    // 进入房间\r\n    enterRoom: function(roomId, callback) {\r\n        var self = this;\r\n        var onEnter = function(ret) {\r\n            console.log('进入房间onEnter====>',ret);\r\n            if (ret.errcode !== 0) {\r\n                if (ret.errcode == -1) {\r\n                    setTimeout(function() {\r\n                        self.enterRoom(roomId, callback);\r\n                    }, 5000);\r\n                } else {\r\n                    cc.vv.wc.hide();\r\n                    if (callback != null) {\r\n                        callback(ret);\r\n                    }\r\n                }\r\n            } else {\r\n                if (callback != null) {\r\n                    callback(ret);\r\n                }\r\n                self.room_type = ret.room_type;\r\n                self.scene = ret.scene;\r\n                self.e_roomid = ret.roomid;\r\n                cc.vv.gameNetMgr.connectGameServer(ret);\r\n            }\r\n        };\r\n        var data = {\r\n            account: cc.vv.userMgr.account,\r\n            sign: cc.vv.userMgr.sign,\r\n            roomid: roomId\r\n        };\r\n        cc.vv.wc.show(\"正在进入房间 \" + roomId);\r\n        cc.vv.http.sendRequest(\"/enter_private_room\", data, onEnter);\r\n    },\r\n    // 获取历史战斗记录\r\n    getHistoryList: function(callback) {\r\n        var self = this;\r\n        var onGet = function(ret) {\r\n            if (ret.errcode !== 0) {\r\n                console.log(ret.errmsg);\r\n            } else {\r\n                console.log(ret.history);\r\n                if (callback != null) {\r\n                    callback(ret.history);\r\n                }\r\n            }\r\n        };\r\n        var data = {\r\n            account: cc.vv.userMgr.account,\r\n            sign: cc.vv.userMgr.sign,\r\n        };\r\n        cc.vv.http.sendRequest(\"/get_history_list\", data, onGet);\r\n    },\r\n    // 获取金币和钻石数量\r\n    getGemsAndCoins: function(callback) {\r\n        var self = this;\r\n        var onGet = function(ret) {\r\n            if (ret.errcode !== 0) {\r\n                console.log(ret.errmsg);\r\n            } else {\r\n                console.log(ret);\r\n                if (callback != null) {\r\n                    callback(ret);\r\n                }\r\n            }\r\n        };\r\n        var data = {\r\n            account: cc.vv.userMgr.account,\r\n            sign: cc.vv.userMgr.sign,\r\n        };\r\n        cc.vv.http.sendRequest(\"/get_user_gems_and_coins\", data, onGet);\r\n    },\r\n    // 用户签到\r\n    setUserSign: function(callback) {\r\n        var self = this;\r\n        var onGet = function(ret) {\r\n            if (ret.errcode !== 0) {\r\n                console.log(ret.errmsg);\r\n            } else {\r\n                if (callback != null) {\r\n                    callback(ret.data);\r\n                }\r\n            }\r\n        };\r\n        var data = {\r\n            account: cc.vv.userMgr.account,\r\n            sign: cc.vv.userMgr.sign,\r\n        };\r\n        cc.vv.http.sendRequest(\"/set_user_sign\", data, onGet);\r\n    },\r\n    // 获取签到礼物列表\r\n    getSignList: function(callback) {\r\n        var self = this;\r\n        var onGet = function(ret) {\r\n            if (ret.errcode !== 0) {\r\n                console.log(ret.errmsg);\r\n            } else {\r\n                if (callback != null) {\r\n                    callback(ret.data);\r\n                }\r\n            }\r\n        };\r\n        var data = {\r\n            account: cc.vv.userMgr.account,\r\n            sign: cc.vv.userMgr.sign,\r\n        };\r\n        cc.vv.http.sendRequest(\"/get_sign_list\", data, onGet);\r\n    },\r\n    getGamesOfRoom: function(uuid, callback) {\r\n        var self = this;\r\n        var onGet = function(ret) {\r\n            if (ret.errcode !== 0) {\r\n                console.log(ret.errmsg);\r\n            } else {\r\n                console.log(ret.data);\r\n                callback(ret.data);\r\n            }\r\n        };\r\n        var data = {\r\n            account: cc.vv.userMgr.account,\r\n            sign: cc.vv.userMgr.sign,\r\n            uuid: uuid,\r\n        };\r\n        cc.vv.http.sendRequest(\"/get_games_of_room\", data, onGet);\r\n    },\r\n    getDetailOfGame: function(uuid, index, callback) {\r\n        var self = this;\r\n        var onGet = function(ret) {\r\n            if (ret.errcode !== 0) {\r\n                console.log(ret.errmsg);\r\n            } else {\r\n                console.log(ret.data);\r\n                callback(ret.data);\r\n            }\r\n        };\r\n        var data = {\r\n            account: cc.vv.userMgr.account,\r\n            sign: cc.vv.userMgr.sign,\r\n            uuid: uuid,\r\n            index: index,\r\n        };\r\n        cc.vv.http.sendRequest(\"/get_detail_of_game\", data, onGet);\r\n    }\r\n});"
  ]
}
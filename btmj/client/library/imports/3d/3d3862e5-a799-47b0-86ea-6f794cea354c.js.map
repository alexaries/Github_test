{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [
    "cc",
    "Class",
    "extends",
    "Component",
    "properties",
    "lblRoomNo",
    "default",
    "type",
    "Label",
    "_seats",
    "_seats2",
    "_timeLabel",
    "_voiceMsgQueue",
    "_lastPlayingSeat",
    "_playingSeat",
    "_lastPlayTime",
    "_shareContent",
    "onLoad",
    "vv",
    "initView",
    "initSeats",
    "initEventHandlers",
    "prepare",
    "node",
    "getChildByName",
    "seats",
    "i",
    "children",
    "length",
    "push",
    "getComponent",
    "refreshBtns",
    "find",
    "string",
    "gameNetMgr",
    "roomId",
    "gameChild",
    "sides",
    "sideNode",
    "seat",
    "btnWechat",
    "utils",
    "addClickEvent",
    "btnExit",
    "btnDispress",
    "btnWeichat",
    "btnBack",
    "isIdle",
    "numOfGames",
    "active",
    "isOwner",
    "self",
    "on",
    "data",
    "initSingleSeat",
    "detail",
    "playVoice",
    "idx",
    "getSeatIndexByID",
    "sender",
    "localIdx",
    "getLocalIndex",
    "chat",
    "content",
    "index",
    "info",
    "getQuickChatInfo",
    "audioMgr",
    "playSFX",
    "sound",
    "console",
    "log",
    "emoji",
    "seatindex",
    "isOffline",
    "online",
    "isZhuang",
    "button",
    "setInfo",
    "name",
    "score",
    "setReady",
    "ready",
    "setOffline",
    "setID",
    "userid",
    "voiceMsg",
    "fan",
    "setZhuang",
    "onBtnSettingsClicked",
    "popupMgr",
    "showSettings",
    "onBtnBackClicked",
    "alert",
    "show",
    "director",
    "loadScene",
    "onBtnChatClicked",
    "onBtnWeichatClicked",
    "share",
    "onBtnDissolveClicked",
    "net",
    "send",
    "onBtnExit",
    "shift",
    "localIndex",
    "msgInfo",
    "JSON",
    "parse",
    "msgfile",
    "msg",
    "Date",
    "now",
    "time",
    "sys",
    "isNative",
    "serverid",
    "window",
    "downloadVoice",
    "voiceMgr",
    "writeVoice",
    "play",
    "update",
    "dt",
    "voice",
    "localId",
    "pauseAll",
    "minutes",
    "Math",
    "floor",
    "_lastMinute",
    "date",
    "h",
    "getHours",
    "m",
    "getMinutes",
    "onPlayerOver",
    "stopPlayVoice",
    "resumeAll",
    "onDestroy",
    "stop"
  ],
  "mappings": "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",
  "file": "unknown",
  "sourcesContent": [
    "cc.Class({\r\n    extends: cc.Component,\r\n    properties: {\r\n        lblRoomNo: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        _seats: [],\r\n        _seats2: [],\r\n        _timeLabel: null,\r\n        _voiceMsgQueue: [],\r\n        _lastPlayingSeat: null,\r\n        _playingSeat: null,\r\n        _lastPlayTime: null,\r\n        _shareContent: null,\r\n    },\r\n    // use this for initialization\r\n    onLoad: function() {\r\n        if (cc.vv == null) {\r\n            return;\r\n        }\r\n        this.initView();\r\n        this.initSeats();\r\n        this.initEventHandlers();\r\n    },\r\n    initView: function() {\r\n        var prepare = this.node.getChildByName(\"prepare\");\r\n        var seats = prepare.getChildByName(\"seats\");\r\n        for (var i = 0; i < seats.children.length; ++i) {\r\n            this._seats.push(seats.children[i].getComponent(\"whSeat\"));\r\n        }\r\n        this.refreshBtns();\r\n        this.lblRoomNo = cc.find(\"Canvas/infobar/Z_room_txt/New Label\").getComponent(cc.Label);\r\n        this._timeLabel = cc.find(\"Canvas/infobar/time\").getComponent(cc.Label);\r\n        this.lblRoomNo.string = cc.vv.gameNetMgr.roomId;\r\n        var gameChild = this.node.getChildByName(\"game\");\r\n        var sides = [\"myself\", \"right\", \"up\", \"left\"];\r\n        for (var i = 0; i < sides.length; ++i) {\r\n            var sideNode = gameChild.getChildByName(sides[i]);\r\n            var seat = sideNode.getChildByName(\"seat\");\r\n            this._seats2.push(seat.getComponent(\"whSeat\"));\r\n        }\r\n        var btnWechat = cc.find(\"Canvas/prepare/btnWeichat\");\r\n        if (btnWechat) {\r\n            cc.vv.utils.addClickEvent(btnWechat, this.node, \"whRoom\", \"onBtnWeichatClicked\");\r\n        }\r\n    },\r\n    refreshBtns: function() {\r\n        var prepare = this.node.getChildByName(\"prepare\");\r\n        var btnExit = prepare.getChildByName(\"btnExit\");\r\n        var btnDispress = prepare.getChildByName(\"btnDissolve\");\r\n        var btnWeichat = prepare.getChildByName(\"btnWeichat\");\r\n        var btnBack = prepare.getChildByName(\"btnBack\");\r\n        var isIdle = cc.vv.gameNetMgr.numOfGames == 0;\r\n        btnExit.active = !cc.vv.gameNetMgr.isOwner() && isIdle;\r\n        btnDispress.active = cc.vv.gameNetMgr.isOwner() && isIdle;\r\n        btnWeichat.active = isIdle;\r\n        btnBack.active = isIdle;\r\n    },\r\n    initEventHandlers: function() {\r\n        var self = this;\r\n        this.node.on('new_user', function(data) {\r\n            self.initSingleSeat(data.detail);\r\n        });\r\n        this.node.on('user_state_changed', function(data) {\r\n            self.initSingleSeat(data.detail);\r\n        });\r\n        this.node.on('game_begin', function(data) {\r\n            self.refreshBtns();\r\n            self.initSeats();\r\n        });\r\n        this.node.on('game_num', function(data) {\r\n            self.refreshBtns();\r\n        });\r\n        this.node.on('voice_msg', function(data) {\r\n            var data = data.detail;\r\n            self._voiceMsgQueue.push(data);\r\n            self.playVoice();\r\n        });\r\n        this.node.on('chat_push', function(data) {\r\n            var data = data.detail;\r\n            var idx = cc.vv.gameNetMgr.getSeatIndexByID(data.sender);\r\n            var localIdx = cc.vv.gameNetMgr.getLocalIndex(idx);\r\n            self._seats[localIdx].chat(data.content);\r\n            self._seats2[localIdx].chat(data.content);\r\n        });\r\n        this.node.on('quick_chat_push', function(data) {\r\n            var data = data.detail;\r\n            var idx = cc.vv.gameNetMgr.getSeatIndexByID(data.sender);\r\n            var localIdx = cc.vv.gameNetMgr.getLocalIndex(idx);\r\n            var index = data.content;\r\n            var info = cc.vv.chat.getQuickChatInfo(index);\r\n            self._seats[localIdx].chat(info.content);\r\n            self._seats2[localIdx].chat(info.content);\r\n            cc.vv.audioMgr.playSFX(info.sound);\r\n        });\r\n        this.node.on('emoji_push', function(data) {\r\n            var data = data.detail;\r\n            var idx = cc.vv.gameNetMgr.getSeatIndexByID(data.sender);\r\n            var localIdx = cc.vv.gameNetMgr.getLocalIndex(idx);\r\n            console.log(data);\r\n            self._seats[localIdx].emoji(data.content);\r\n            self._seats2[localIdx].emoji(data.content);\r\n        });\r\n    },\r\n    initSeats: function() {\r\n        var seats = cc.vv.gameNetMgr.seats;\r\n        for (var i = 0; i < seats.length; ++i) {\r\n            this.initSingleSeat(seats[i]);\r\n        }\r\n    },\r\n    initSingleSeat: function(seat) {\r\n        var index = cc.vv.gameNetMgr.getLocalIndex(seat.seatindex);\r\n        var isOffline = !seat.online;\r\n        var isZhuang = seat.seatindex == cc.vv.gameNetMgr.button;\r\n        console.log(\"isOffline:\" + isOffline);\r\n        this._seats[index].setInfo(seat.name, seat.score);\r\n        this._seats[index].setReady(seat.ready);\r\n        this._seats[index].setOffline(isOffline);\r\n        this._seats[index].setID(seat.userid);\r\n        this._seats[index].voiceMsg(false);\r\n        this._seats2[index].setInfo(seat.name, seat.score, seat.fan);\r\n        this._seats2[index].setZhuang(isZhuang);\r\n        this._seats2[index].setOffline(isOffline);\r\n        this._seats2[index].setID(seat.userid);\r\n        this._seats2[index].voiceMsg(false);\r\n    },\r\n    onBtnSettingsClicked: function() {\r\n        cc.vv.popupMgr.showSettings();\r\n    },\r\n    onBtnBackClicked: function() {\r\n        cc.vv.alert.show(\"返回大厅\", \"返回大厅房间仍会保留，快去邀请大伙来玩吧！\", function() {\r\n            cc.director.loadScene(\"newhall\");\r\n        }, true);\r\n    },\r\n    onBtnChatClicked: function() {},\r\n    // 点击分享按钮，使用微信分享\r\n    onBtnWeichatClicked: function() {\r\n        cc.vv.share.show();\r\n    },\r\n    onBtnDissolveClicked: function() {\r\n        cc.vv.alert.show(\"解散房间\", \"解散房间不扣金币，是否确定解散？\", function() {\r\n            cc.vv.net.send(\"dispress\");\r\n        }, true);\r\n    },\r\n    onBtnExit: function() {\r\n        cc.vv.net.send(\"exit\");\r\n    },\r\n    playVoice: function() {\r\n        if (this._playingSeat == null && this._voiceMsgQueue.length) {\r\n            console.log(\"playVoice\");\r\n            var data = this._voiceMsgQueue.shift();\r\n            var idx = cc.vv.gameNetMgr.getSeatIndexByID(data.sender);\r\n            var localIndex = cc.vv.gameNetMgr.getLocalIndex(idx);\r\n            this._playingSeat = localIndex;\r\n            this._seats[localIndex].voiceMsg(true);\r\n            this._seats2[localIndex].voiceMsg(true);\r\n            var msgInfo = JSON.parse(data.content);\r\n            var msgfile = \"voicemsg.amr\";\r\n            console.log(msgInfo.msg.length);\r\n            this._lastPlayTime = Date.now() + msgInfo.time;\r\n            if (!cc.sys.isNative) {\r\n                var serverid = msgInfo['msg'];\r\n                window.downloadVoice(serverid);\r\n                return;\r\n            }\r\n            cc.vv.voiceMgr.writeVoice(msgfile, msgInfo.msg);\r\n            cc.vv.voiceMgr.play(msgfile);\r\n        }\r\n    },\r\n    // called every frame, uncomment this function to activate update callback\r\n    update: function(dt) {\r\n        if (window.voice && window.voice.localId != null) {\r\n            var localId = window.voice.localId;\r\n            window.voice.localId = null;\r\n            cc.vv.audioMgr.pauseAll();\r\n            window.playVoice(localId);\r\n        }\r\n        var minutes = Math.floor(Date.now() / 1000 / 60);\r\n        if (this._lastMinute != minutes) {\r\n            this._lastMinute = minutes;\r\n            var date = new Date();\r\n            var h = date.getHours();\r\n            h = h < 10 ? \"0\" + h : h;\r\n            var m = date.getMinutes();\r\n            m = m < 10 ? \"0\" + m : m;\r\n            this._timeLabel.string = \"\" + h + \":\" + m;\r\n        }\r\n        if (this._lastPlayTime != null) {\r\n            if (Date.now() > this._lastPlayTime + 200) {\r\n                this.onPlayerOver();\r\n                this._lastPlayTime = null;\r\n            }\r\n        } else {\r\n            this.playVoice();\r\n        }\r\n    },\r\n    onPlayerOver: function() {\r\n        if (!cc.sys.isNative) {\r\n            window.stopPlayVoice();\r\n        };\r\n        cc.vv.audioMgr.resumeAll();\r\n        console.log(\"onPlayCallback:\" + this._playingSeat);\r\n        var localIndex = this._playingSeat;\r\n        this._playingSeat = null;\r\n        this._seats[localIndex].voiceMsg(false);\r\n        this._seats2[localIndex].voiceMsg(false);\r\n    },\r\n    onDestroy: function() {\r\n        cc.vv.voiceMgr.stop();\r\n        //        cc.vv.voiceMgr.onPlayCallback = null;\r\n    }\r\n});"
  ]
}
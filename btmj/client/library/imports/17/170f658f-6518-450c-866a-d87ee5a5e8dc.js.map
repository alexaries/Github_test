{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [
    "cc",
    "Class",
    "extends",
    "Component",
    "properties",
    "gameRoot",
    "default",
    "type",
    "Node",
    "prepareRoot",
    "_myMJArr",
    "_options",
    "_selectedMJ",
    "_chupaiSprite",
    "_mjcount",
    "_gamecount",
    "_hupaiTips",
    "_hupaiLists",
    "_playEfxs",
    "_opts",
    "_chiArrays",
    "_chiOptionArray",
    "_chiOpts",
    "_optionsData",
    "_canChupai",
    "_laiId",
    "_kuang",
    "_tingsNode",
    "_tingsChild",
    "tipCountMap",
    "_fanLabel",
    "onLoad",
    "_tingPais",
    "sys",
    "isNative",
    "isMobile",
    "cvs",
    "node",
    "getComponent",
    "Canvas",
    "fitHeight",
    "fitWidth",
    "vv",
    "director",
    "loadScene",
    "addComponent",
    "initView",
    "initEventHandlers",
    "active",
    "initWanfaLabel",
    "onGameBeign",
    "sf",
    "require",
    "getChildByName",
    "gameChild",
    "Label",
    "string",
    "gameNetMgr",
    "numOfMJ",
    "numOfGames",
    "maxNumOfGames",
    "myselfChild",
    "myholds",
    "i",
    "children",
    "length",
    "sprite",
    "Sprite",
    "push",
    "onMjToUp",
    "spriteFrame",
    "realwidth",
    "getVisibleSize",
    "width",
    "scaleX",
    "scaleY",
    "sides",
    "side",
    "sideChild",
    "Animation",
    "opt",
    "data",
    "opts",
    "chiOpts",
    "hideOptions",
    "hideChupai",
    "hideChiOptions",
    "initTingedHolds",
    "conf",
    "getSelfData",
    "tinged",
    "mjId",
    "Button",
    "interactable",
    "seatIndex",
    "turn",
    "initExtraPaiHolds",
    "console",
    "log",
    "selfData",
    "extraPais",
    "j",
    "indexOf",
    "showTingedFlag",
    "seats",
    "seatData",
    "localIndex",
    "getLocalIndex",
    "hupai",
    "initLaiziPiList",
    "laiziPi",
    "singleGangs",
    "list",
    "mj_laiziPi_id",
    "setSpriteFrameByMJID",
    "initOtherLaiziPiList",
    "seatindex",
    "mahjongmgr",
    "getSide",
    "game",
    "sideRoot",
    "side_list",
    "pre",
    "getFoldPre",
    "resetPai",
    "isShow",
    "touch_target",
    "global",
    "x",
    "old_node_x",
    "y",
    "dataEventHandler",
    "self",
    "on",
    "initMahjongs",
    "detail",
    "sd",
    "laizi",
    "calculate",
    "response",
    "net",
    "send",
    "getSeatIndexByID",
    "userId",
    "index",
    "fan",
    "s",
    "initOtherMahjongs",
    "pai",
    "audioUrl",
    "getAudioURLByMJID",
    "audioMgr",
    "playSFX",
    "last",
    "initMopai",
    "replayMgr",
    "isReplay",
    "shootPos",
    "tip",
    "isTings",
    "showAction",
    "hued",
    "initHupai",
    "iszimo",
    "holds",
    "pop",
    "playEfx",
    "setTimeout",
    "showChupai",
    "alert",
    "show",
    "gangtype",
    "angangs",
    "sortHolds",
    "y_deepCopy",
    "splice",
    "k",
    "tingData",
    "arr",
    "Object",
    "keys",
    "showTingsIcon",
    "lackingNum",
    "pengs",
    "diangangs",
    "wangangs",
    "chis",
    "mjid",
    "chupai",
    "getSpriteFrameByMJID",
    "target_node",
    "old_x",
    "old_y",
    "pos",
    "find",
    "action",
    "moveTo",
    "p",
    "runAction",
    "toChiActionPage",
    "showChiAction",
    "addOption",
    "btnName",
    "childrenCount",
    "child",
    "name",
    "btn",
    "addChiOption",
    "id",
    "parentname",
    "info",
    "chiArrayInfo",
    "childName",
    "paiInfo",
    "showChiPaiArray",
    "painame",
    "hu",
    "gang",
    "peng",
    "chi",
    "gangpai",
    "gp",
    "wanfa",
    "getWanfaWH",
    "hupailist",
    "hupainode",
    "play",
    "nc",
    "holdsEmpty",
    "gamestate",
    "curaction",
    "recordShootPos",
    "EventType",
    "TOUCH_START",
    "touch",
    "old_node_y",
    "old_touch_x",
    "getLocation",
    "old_touch_y",
    "TOUCH_MOVE",
    "touchX_diff",
    "touchY_diff",
    "_canTouchEnd",
    "TOUCH_END",
    "height",
    "shoot",
    "TOUCH_CANCEL",
    "touchCancel",
    "delta",
    "onMJClicked",
    "event",
    "removeAllChildren",
    "target",
    "newNode",
    "instantiate",
    "addChild",
    "getMJIndex",
    "lastIndex",
    "getHoldsEmptySpriteFrame",
    "initEmptySprites",
    "getEmptySpriteFrame",
    "sideHolds",
    "num",
    "idx",
    "lasetIdx",
    "mopai",
    "l",
    "sortMJ",
    "sortWHMJ",
    "mahjongs",
    "laiIndex",
    "newHolds",
    "concat",
    "ret",
    "onOptionClicked",
    "chiArray",
    "onChiOptionClicked",
    "chiOptioned",
    "update",
    "dt",
    "onDestroy",
    "clear"
  ],
  "mappings": "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",
  "file": "unknown",
  "sourcesContent": [
    "cc.Class({\r\n    extends: cc.Component,\r\n    properties: {\r\n        gameRoot: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        prepareRoot: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        _myMJArr: [],\r\n        _options: null,\r\n        _selectedMJ: null,\r\n        _chupaiSprite: [],\r\n        _mjcount: null,\r\n        _gamecount: null,\r\n        _hupaiTips: [],\r\n        _hupaiLists: [],\r\n        _playEfxs: [],\r\n        _opts: [],\r\n        // 用于存放服务端发过来的可以吃的组合\r\n        _chiArrays: [],\r\n        // 用来存放玩家选中的吃的组合\r\n        _chiOptionArray: [],\r\n        _chiOpts: null,\r\n        _optionsData: null,\r\n        _canChupai: false,\r\n        _laiId: 0,\r\n        _kuang: [],\r\n        _tingsNode: null,\r\n        _tingsChild: null,\r\n        tipCountMap: [],\r\n        _fanLabel: [],\r\n    },\r\n    onLoad: function() {\r\n        this._tingPais = {};\r\n        if (!cc.sys.isNative && cc.sys.isMobile) {\r\n            var cvs = this.node.getComponent(cc.Canvas);\r\n            cvs.fitHeight = true;\r\n            cvs.fitWidth = true;\r\n        }\r\n        if (!cc.vv) {\r\n            cc.director.loadScene(\"login\");\r\n            return;\r\n        }\r\n        this.addComponent(\"NoticeTip\");\r\n        this.addComponent(\"whGameOver\");\r\n        this.addComponent(\"PengGangs\");\r\n        this.addComponent(\"TimePointer\");\r\n        this.addComponent(\"GameResult\");\r\n        this.addComponent(\"Chat\");\r\n        this.addComponent(\"Folds\");\r\n        this.addComponent(\"ReplayCtrl\");\r\n        this.addComponent(\"PopupMgr\");\r\n        this.addComponent(\"ReConnect\");\r\n        this.addComponent(\"Voice\");\r\n        this.initView();\r\n        this.initEventHandlers();\r\n        this.gameRoot.active = false;\r\n        this.prepareRoot.active = true;\r\n        this._chiArrays = [];\r\n        this._chiOptionArray = [];\r\n        this.initWanfaLabel();\r\n        this.onGameBeign();\r\n        var sf = require(\"wuHanMj_suanFa\");\r\n        this.sf = new sf();\r\n        this._tingsNode = this.node.getChildByName(\"game\").getChildByName(\"myself\").getChildByName(\"ting\");\r\n        this._tingsChild = this._tingsNode.getChildByName(\"rest\");\r\n    },\r\n    initView: function() {\r\n        //搜索需要的子节点\r\n        var gameChild = this.node.getChildByName(\"game\");\r\n        this._mjcount = gameChild.getChildByName('mjcount').getComponent(cc.Label);\r\n        this._mjcount.string = \"剩余\" + cc.vv.gameNetMgr.numOfMJ + \"张\";\r\n        this._gamecount = gameChild.getChildByName('gamecount').getComponent(cc.Label);\r\n        this._gamecount.string = \"\" + cc.vv.gameNetMgr.numOfGames + \"/\" + cc.vv.gameNetMgr.maxNumOfGames + \"局\";\r\n        var myselfChild = gameChild.getChildByName(\"myself\");\r\n        var myholds = myselfChild.getChildByName(\"holds\");\r\n        for (var i = 0; i < myholds.children.length; ++i) {\r\n            var sprite = myholds.children[i].getComponent(cc.Sprite);\r\n            this._myMJArr.push(sprite);\r\n            this.onMjToUp(sprite.node);\r\n            sprite.spriteFrame = null;\r\n        }\r\n        var realwidth = cc.director.getVisibleSize().width;\r\n        myholds.scaleX *= realwidth / 1280;\r\n        myholds.scaleY *= realwidth / 1280;\r\n        var sides = [\"myself\", \"right\", \"up\", \"left\"];\r\n        for (var i = 0; i < sides.length; ++i) {\r\n            var side = sides[i];\r\n            var sideChild = gameChild.getChildByName(side);\r\n            this._hupaiTips.push(sideChild.getChildByName(\"HuPai\"));\r\n            this._hupaiLists.push(sideChild.getChildByName(\"hupailist\"));\r\n            this._playEfxs.push(sideChild.getChildByName(\"play_efx\").getComponent(cc.Animation));\r\n            this._chupaiSprite.push(sideChild.getChildByName(\"ChuPai\").children[0].getComponent(cc.Sprite));\r\n            this._fanLabel.push(sideChild.getChildByName(\"seat\").getChildByName(\"fan\").getComponent(cc.Label));\r\n            var opt = sideChild.getChildByName(\"opt\");\r\n            opt.active = false;\r\n            var sprite = opt.getChildByName(\"pai\").getComponent(cc.Sprite);\r\n            var data = {\r\n                node: opt,\r\n                sprite: sprite\r\n            };\r\n            this._opts.push(data);\r\n        }\r\n        var opts = gameChild.getChildByName(\"ops\");\r\n        this._options = opts;\r\n        var chiOpts = gameChild.getChildByName(\"chiops\");\r\n        this._chiOpts = chiOpts;\r\n        this.hideOptions();\r\n        this.hideChupai();\r\n        this.hideChiOptions();\r\n        if (this._myMJArr.length == 14) {\r\n            this._canChupai = true;\r\n        }\r\n    },\r\n    hideChupai: function() {\r\n        for (var i = 0; i < this._chupaiSprite.length; ++i) {\r\n            this._chupaiSprite[i].node.active = false;\r\n        }\r\n    },\r\n    //如果玩家手上还有缺的牌没有打，则只能打缺牌\r\n    initTingedHolds: function() {\r\n        // 如果有财神,当然不能显示听牌哎\r\n        if (cc.vv.gameNetMgr.conf == null || !cc.vv.gameNetMgr.getSelfData().tinged) {\r\n            for (var i = 0; i < this._myMJArr.length; ++i) {\r\n                var sprite = this._myMJArr[i];\r\n                if (sprite.node.mjId != null) {\r\n                    sprite.node.getComponent(cc.Button).interactable = true;\r\n                }\r\n            }\r\n        } else {\r\n            if (cc.vv.gameNetMgr.seatIndex == cc.vv.gameNetMgr.turn) {\r\n                for (var i = 0; i < 14; ++i) {\r\n                    var sprite = this._myMJArr[i];\r\n                    if (sprite.node.active == true) {\r\n                        sprite.node.getComponent(cc.Button).interactable = i == 13;\r\n                    }\r\n                }\r\n            } else {\r\n                for (var i = 0; i < 14; ++i) {\r\n                    var sprite = this._myMJArr[i];\r\n                    if (sprite.node.active == true) {\r\n                        sprite.node.getComponent(cc.Button).interactable = true;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n    initExtraPaiHolds: function() {\r\n        console.log(\"运行到这里哦extraPaiHolds\");\r\n        var selfData = cc.vv.gameNetMgr.getSelfData();\r\n        if (selfData.extraPais.length <= 0) {\r\n            console.log(\"当前多余的牌不存在,不需要额外处理手牌\");\r\n            return;\r\n        }\r\n        if (cc.vv.gameNetMgr.conf == null || !selfData.tinged) {\r\n            for (var i = 0; i < this._myMJArr.length; ++i) {\r\n                var sprite = this._myMJArr[i];\r\n                if (sprite.node.mjId != null) {\r\n                    sprite.node.getComponent(cc.Button).interactable = true;\r\n                }\r\n            }\r\n        } else {\r\n            if (cc.vv.gameNetMgr.seatIndex == cc.vv.gameNetMgr.turn) {\r\n                console.log(\"判断是否是自己\");\r\n                for (var j = 0; j < 14; ++j) {\r\n                    var sprite = this._myMJArr[j];\r\n                    console.log(\" 当前的麻将的id是\", sprite.node.mjId);\r\n                    if ((sprite.node.active == true) && (sprite.node.mjId != null)) {\r\n                        if (selfData.extraPais.indexOf(sprite.node.mjId) > -1) {\r\n                            console.log(\"准备选择哪些可用\", sprite.node.mjId);\r\n                            sprite.node.getComponent(cc.Button).interactable = true;\r\n                        } else {\r\n                            console.log(\"准备选择哪些可以禁用的\", sprite.node.mjId);\r\n                            sprite.node.getComponent(cc.Button).interactable = false;\r\n                        }\r\n                    }\r\n                }\r\n                //ly鉴定。这样写是错误的。因为这样始终是最后一个可操作，与需求不符\r\n                // for (var i = 0; i < selfData.extraPais.length; i++) {\r\n                //     console.log(\"当前牌是\", selfData.extraPais[i]);\r\n                //     var paiId = selfData.extraPais[i];\r\n                //     for (var j = 0; j < 14; ++j) {\r\n                //         var sprite = this._myMJArr[j];\r\n                //         console.log(\" 当前的麻将的id是\", sprite.node.mjId);\r\n                //         if ((sprite.node.active == true) && (sprite.node.mjId != null)) {\r\n                //             if (sprite.node.mjId == paiId) {\r\n                //                 console.log(\"准备选择哪些可用\", sprite.node.mjId);\r\n                //                 sprite.node.getComponent(cc.Button).interactable = true;\r\n                //             } else {\r\n                //                 console.log(\"准备选择哪些可以禁用的\", sprite.node.mjId);\r\n                //                 sprite.node.getComponent(cc.Button).interactable = false;\r\n                //             }\r\n                //         }\r\n                //     }\r\n                // }\r\n            } else {\r\n                for (var i = 0; i < 14; ++i) {\r\n                    var sprite = this._myMJArr[i];\r\n                    if (sprite.node.active == true) {\r\n                        sprite.node.getComponent(cc.Button).interactable = true;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n    showTingedFlag: function() {\r\n        console.log(\"showTingedFlag\");\r\n        for (var i = 0; i < cc.vv.gameNetMgr.seats.length; ++i) {\r\n            var seatData = cc.vv.gameNetMgr.seats[i];\r\n            var localIndex = cc.vv.gameNetMgr.getLocalIndex(i);\r\n            var hupai = this._hupaiTips[localIndex];\r\n            hupai.active = seatData.tinged;\r\n            if (seatData.tinged) {\r\n                hupai.getChildByName(\"sprHu\").active = !seatData.tinged;\r\n                hupai.getChildByName(\"sprZimo\").active = !seatData.tinged;\r\n                hupai.getChildByName(\"sprTing\").active = seatData.tinged;\r\n            }\r\n        }\r\n    },\r\n    initLaiziPiList: function() {\r\n        // console.log('开始游戏,调用财神初始化信息');\r\n        var seats = cc.vv.gameNetMgr.seats;\r\n        var seatData = seats[cc.vv.gameNetMgr.seatIndex];\r\n        var laiziPi = seatData.singleGangs;\r\n        if (laiziPi == null) {\r\n            return;\r\n        }\r\n        var gameChild = this.node.getChildByName(\"game\");\r\n        var myselfChild = gameChild.getChildByName(\"myself\");\r\n        var list = myselfChild.getChildByName(\"hupailist\");\r\n        for (var i = 0; i < laiziPi.length; ++i) {\r\n            var mj_laiziPi_id = laiziPi[i];\r\n            var sprite = list.children[i].getComponent(cc.Sprite);\r\n            sprite.node.mjId = mj_laiziPi_id;\r\n            this.setSpriteFrameByMJID(\"M_\", sprite, mj_laiziPi_id);\r\n        }\r\n    },\r\n    initOtherLaiziPiList: function(seatData) {\r\n        // console.log('初始化其他人的财神');\r\n        var laiziPi = seatData.singleGangs;\r\n        if (laiziPi == null) {\r\n            return;\r\n        }\r\n        var localIndex = this.getLocalIndex(seatData.seatindex);\r\n        var side = cc.vv.mahjongmgr.getSide(localIndex);\r\n        var game = this.node.getChildByName(\"game\");\r\n        var sideRoot = game.getChildByName(side);\r\n        var side_list = sideRoot.getChildByName(\"hupailist\");\r\n        var pre = cc.vv.mahjongmgr.getFoldPre(localIndex);\r\n        for (var i = 0; i < laiziPi.length; ++i) {\r\n            var mj_laiziPi_id = laiziPi[i];\r\n            var sprite = side_list.children[i].getComponent(cc.Sprite);\r\n            sprite.node.mjId = mj_laiziPi_id;\r\n            this.setSpriteFrameByMJID(pre, sprite, mj_laiziPi_id);\r\n        }\r\n    },\r\n    resetPai: function(isShow) {\r\n        //还原被拖动的牌的位置\r\n        var touch_target = cc.vv.global.touch_target;\r\n        if (touch_target) {\r\n            touch_target.x = touch_target.old_node_x;\r\n            touch_target.y = 0;\r\n            if (isShow) {\r\n                touch_target.active = true;\r\n            }\r\n        }\r\n    },\r\n    initEventHandlers: function() {\r\n        cc.vv.gameNetMgr.dataEventHandler = this.node;\r\n        //初始化事件监听器\r\n        var self = this;\r\n        this.node.on('game_holds', function(data) {\r\n            self.initMahjongs();\r\n            var selfData = cc.vv.gameNetMgr.getSelfData();\r\n            console.log('------------------------------------');\r\n            console.log(\"selfData\", selfData.extraPais);\r\n            console.log('------------------------------------');\r\n            if (selfData != null && selfData.extraPais != null) {\r\n                if (selfData.extraPais.length > 0) {\r\n                    console.log(\"当前多余的牌存在,则需要额外处理手牌\");\r\n                    self.initExtraPaiHolds();\r\n                    selfData.extraPais = [];\r\n                } else {\r\n                    self.initTingedHolds();\r\n                }\r\n            }\r\n        });\r\n        this.node.on('game_begin', function(data) {\r\n            self.onGameBeign();\r\n        });\r\n        this.node.on('game_sync', function(data) {\r\n            self.onGameBeign();\r\n        });\r\n        this.node.on('game_refreshAllTings', function(data) {\r\n            data = data.detail;\r\n            var sd = data.sd;\r\n            var laizi = data.laizi;\r\n            self.sf.calculate(sd, laizi, null, function(response) {\r\n                console.log(\"ly:calculate=>\", response);\r\n                cc.vv.net.send('setAllTings', response);\r\n            });\r\n        });\r\n        this.node.on('game_fanChanged', function(data) {\r\n            var data = data.detail;\r\n            var seatIndex = cc.vv.gameNetMgr.getSeatIndexByID(data.userId);\r\n            var index = self.getLocalIndex(seatIndex);\r\n            self._fanLabel[index].string = data.fan + \"番\";\r\n        });\r\n        this.node.on(\"game_single_gang\", function(data) {\r\n            console.log(\"game_single_gang\", data);\r\n            var seatData = data.detail.seatData;\r\n            var seats = cc.vv.gameNetMgr.seats;\r\n            var s = seats[cc.vv.gameNetMgr.seatIndex];\r\n            s.singleGangs = seatData.singleGangs;\r\n            if (seatData.seatindex == cc.vv.gameNetMgr.seatIndex) {\r\n                self.initLaiziPiList();\r\n                self.initMahjongs();\r\n            } else {\r\n                self.initOtherMahjongs(seatData);\r\n                self.initOtherLaiziPiList(seatData);\r\n            }\r\n            //如果是自己，则刷新手牌\r\n            // if (seatData.seatindex == cc.vv.gameNetMgr.seatIndex) {\r\n            //     self._canChupai = false;\r\n            //     //还原被拖动的牌的位置\r\n            //     self.resetPai();\r\n            //     setTimeout(function() {\r\n            //         var touch_target = cc.vv.global.touch_target;\r\n            //         if (touch_target) {\r\n            //             touch_target.active = true;\r\n            //         }\r\n            //         self.initMahjongs();\r\n            //     }, 500);\r\n            // } else {\r\n            //     self.initOtherMahjongs(seatData);\r\n            // }\r\n            // self.showChupai();\r\n            // 花牌没有对应的声音\r\n            if (data.detail.pai < 34) {\r\n                var audioUrl = cc.vv.mahjongmgr.getAudioURLByMJID(data.detail.pai);\r\n                // console.log(\"audioUrl!!!\" + audioUrl);\r\n                cc.vv.audioMgr.playSFX(audioUrl);\r\n            }\r\n        });\r\n        this.node.on('game_chupai', function(data) {\r\n            data = data.detail;\r\n            self.hideChupai();\r\n            var selfData = cc.vv.gameNetMgr.getSelfData();\r\n            console.log('------------------------------------');\r\n            console.log(\"selfData\", selfData.extraPais);\r\n            console.log('------------------------------------');\r\n            if (selfData != null && selfData.extraPais != null) {\r\n                if (selfData.extraPais.length > 0) {\r\n                    console.log(\"当前多余的牌存在,则需要额外处理手牌\");\r\n                    self.initExtraPaiHolds();\r\n                    selfData.extraPais = [];\r\n                } else {\r\n                    self.initTingedHolds();\r\n                }\r\n            }\r\n            if (data.last != cc.vv.gameNetMgr.seatIndex) {\r\n                self.initMopai(data.last, null);\r\n            }\r\n            if (!cc.vv.replayMgr.isReplay() && data.turn != cc.vv.gameNetMgr.seatIndex) {\r\n                self.initMopai(data.turn, -1);\r\n            }\r\n            //默认不可以出牌\r\n            self._canChupai = false;\r\n            if (data.turn == cc.vv.gameNetMgr.seatIndex) {\r\n                //判断是否可以出牌,只有当玩家没有财神,且持有话语权才能出牌(因为'game_chupai' 是发给所有人的)。\r\n                self._canChupai = true;\r\n            }\r\n        });\r\n        this.node.on('game_mopai', function(data) {\r\n            self.hideChupai();\r\n            data = data.detail;\r\n            var pai = data.pai;\r\n            var localIndex = cc.vv.gameNetMgr.getLocalIndex(data.seatIndex);\r\n            if (localIndex == 0) {\r\n                var index = 13;\r\n                var sprite = self._myMJArr[index];\r\n                self.setSpriteFrameByMJID(\"M_\", sprite, pai, index);\r\n                sprite.node.active = true;\r\n                sprite.node.mjId = pai;\r\n                self._canChupai = true;\r\n            } else if (cc.vv.replayMgr.isReplay()) {\r\n                self.initMopai(data.seatIndex, pai);\r\n                self._canChupai = false;\r\n            }\r\n            cc.vv.global.touch_target = null;\r\n            cc.vv.global.shootPos = null;\r\n        });\r\n        this.node.on('game_refreshTips', function(data) {\r\n            self.tipCountMap = data.detail.tip;\r\n            self.isTings(data.detail.sd);\r\n        });\r\n        this.node.on('game_action', function(data) {\r\n            self._optionsData = data.detail;\r\n            self.showAction(data.detail);\r\n            // console.log(\"game_action-----是否可以吃牌\", data);\r\n            // if (data.detail && data.detail.chi) {\r\n            //     console.log(\"可以吃牌\");\r\n            //     self.showChiAction(data.detail);\r\n            // }\r\n            // if (data.detail) {\r\n            //     if (data.detail.peng || data.detail.gang || data.detail.hu) {\r\n            //         console.log(\"碰杠胡\");\r\n            //         self.showAction(data.detail);\r\n            //     }\r\n            // }\r\n        });\r\n        this.node.on('hupai', function(data) {\r\n            console.log(\"ly:有人胡牌了\");\r\n            self.hideChiOptions();\r\n            var data = data.detail;\r\n            //如果不是玩家自己，则将玩家的牌都放倒\r\n            var seatIndex = data.seatindex;\r\n            var localIndex = cc.vv.gameNetMgr.getLocalIndex(seatIndex);\r\n            var hupai = self._hupaiTips[localIndex];\r\n            hupai.active = true;\r\n            if (localIndex == 0) {\r\n                self.hideOptions();\r\n            }\r\n            var seatData = cc.vv.gameNetMgr.seats[seatIndex];\r\n            seatData.hued = true;\r\n            if (cc.vv.gameNetMgr.conf.type == \"ykx\") {\r\n                hupai.getChildByName(\"sprHu\").active = true;\r\n                hupai.getChildByName(\"sprZimo\").active = false;\r\n                hupai.getChildByName(\"sprTing\").active = false;\r\n                self.initHupai(localIndex, data.hupai);\r\n                if (data.iszimo) {\r\n                    if (seatData.seatindex == cc.vv.gameNetMgr.seatIndex) {\r\n                        seatData.holds.pop();\r\n                        self.initMahjongs();\r\n                    } else {\r\n                        self.initOtherMahjongs(seatData);\r\n                    }\r\n                }\r\n            } else {\r\n                hupai.getChildByName(\"sprHu\").active = !data.iszimo;\r\n                hupai.getChildByName(\"sprZimo\").active = data.iszimo;\r\n                if (!(data.iszimo && localIndex == 0)) {\r\n                    //if(cc.vv.replayMgr.isReplay() == false && localIndex != 0){\r\n                    //    self.initEmptySprites(seatIndex);                \r\n                    //}\r\n                    self.initMopai(seatIndex, data.hupai);\r\n                }\r\n            }\r\n            // if (cc.vv.replayMgr.isReplay() == true && cc.vv.gameNetMgr.conf.type != \"ykx\") {\r\n            //     var opt = self._opts[localIndex];\r\n            //     opt.node.active = true;\r\n            //     opt.sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\", data.hupai);\r\n            // }\r\n            if (data.iszimo) {\r\n                self.playEfx(localIndex, \"play_zimo\");\r\n            } else {\r\n                self.playEfx(localIndex, \"play_hu\");\r\n            }\r\n            cc.vv.audioMgr.playSFX(\"nv/hu.mp3\");\r\n        });\r\n        this.node.on('mj_count', function(data) {\r\n            self._mjcount.string = \"剩余\" + cc.vv.gameNetMgr.numOfMJ + \"张\";\r\n        });\r\n        this.node.on('game_num', function(data) {\r\n            self._gamecount.string = \"\" + cc.vv.gameNetMgr.numOfGames + \"/\" + cc.vv.gameNetMgr.maxNumOfGames + \"局\";\r\n        });\r\n        this.node.on('game_over', function(data) {\r\n            self.gameRoot.active = false;\r\n            self.prepareRoot.active = true;\r\n        });\r\n        this.node.on('game_chupai_notify', function(data) {\r\n            self.hideChupai();\r\n            var seatData = data.detail.seatData;\r\n            //如果是自己，则刷新手牌\r\n            if (seatData.seatindex == cc.vv.gameNetMgr.seatIndex) {\r\n                self._canChupai = false;\r\n                //还原被拖动的牌的位置\r\n                self.resetPai();\r\n                setTimeout(function() {\r\n                    var touch_target = cc.vv.global.touch_target;\r\n                    if (touch_target) {\r\n                        touch_target.active = true;\r\n                    }\r\n                    self.initMahjongs();\r\n                }, 500);\r\n            } else {\r\n                self.initOtherMahjongs(seatData);\r\n            }\r\n            self.showChupai();\r\n            // 花牌没有对应的声音\r\n            if (data.detail.pai < 34) {\r\n                var audioUrl = cc.vv.mahjongmgr.getAudioURLByMJID(data.detail.pai);\r\n                // console.log(\"audioUrl!!!\" + audioUrl);\r\n                cc.vv.audioMgr.playSFX(audioUrl);\r\n            }\r\n        });\r\n        this.node.on('match_exit_error', function(data) {\r\n            //锦标赛不能退出游戏\r\n            cc.vv.alert.show(\"提示\", \"锦标赛中不能退出游戏\");\r\n        });\r\n        this.node.on('guo_notify', function(data) {\r\n            self.hideChupai();\r\n            self.hideOptions();\r\n            self.hideChiOptions();\r\n            var seatData = data.detail;\r\n            //如果是自己，则刷新手牌\r\n            if (seatData.seatindex == cc.vv.gameNetMgr.seatIndex) {\r\n                self.initMahjongs();\r\n            }\r\n            cc.vv.audioMgr.playSFX(\"give.mp3\");\r\n        });\r\n        this.node.on('guo_result', function(data) {\r\n            self.hideOptions();\r\n        });\r\n        // 游戏\r\n        this.node.on('game_playing', function(data) {\r\n            self.initMahjongs();\r\n        });\r\n        this.node.on('peng_notify', function(data) {\r\n            self.hideChiOptions();\r\n            self.hideChupai();\r\n            var seatData = data.detail;\r\n            console.log(\"此时玩家的seatdate\", seatData);\r\n            if (seatData.seatindex == cc.vv.gameNetMgr.seatIndex) {\r\n                self.initMahjongs();\r\n            } else {\r\n                self.initOtherMahjongs(seatData);\r\n            }\r\n            var localIndex = self.getLocalIndex(seatData.seatindex);\r\n            self.playEfx(localIndex, \"play_peng\");\r\n            cc.vv.audioMgr.playSFX(\"nv/peng.mp3\");\r\n            self.hideOptions();\r\n            // seatData.tinged = true;\r\n            // self.showTingedFlag();\r\n        });\r\n        // 吃\r\n        this.node.on(\"chi_notify\", function(data) {\r\n            var seatData = data.detail;\r\n            var localIndex = self.getLocalIndex(seatData);\r\n            if (seatData.seatindex == cc.vv.gameNetMgr.seatIndex) {\r\n                self.initMahjongs();\r\n            } else {\r\n                self.initOtherMahjongs(seatData);\r\n            }\r\n            // TODO 吃牌特效有bug\r\n            // self.playEfx(localIndex, \"play_peng\");\r\n            cc.vv.audioMgr.playSFX(\"nv/chi.mp3\");\r\n            self.hideChiOptions();\r\n            self.hideOptions();\r\n            // seatData.tinged = true;\r\n            // self.showTingedFlag();\r\n        });\r\n        this.node.on('gang_notify', function(data) {\r\n            self.hideChiOptions();\r\n            self.hideChupai();\r\n            var data = data.detail;\r\n            var seatData = data.seatData;\r\n            var gangtype = data.gangtype;\r\n            if (seatData.seatindex == cc.vv.gameNetMgr.seatIndex) {\r\n                self.initMahjongs();\r\n            } else {\r\n                self.initOtherMahjongs(seatData);\r\n            }\r\n            var localIndex = self.getLocalIndex(seatData.seatindex);\r\n            self.playEfx(localIndex, \"play_gang\");\r\n            cc.vv.audioMgr.playSFX(\"nv/gang.mp3\");\r\n            console.log(\"---------seatData------------->>\", seatData.tinged, seatData);\r\n            if (seatData.angangs.length == 0) {\r\n                // seatData.tinged = true;\r\n            }\r\n            // self.showTingedFlag();\r\n        });\r\n        this.node.on(\"hangang_notify\", function(data) {\r\n            var data = data.detail;\r\n            var localIndex = self.getLocalIndex(data);\r\n            self.playEfx(localIndex, \"play_gang\");\r\n            cc.vv.audioMgr.playSFX(\"nv/gang.mp3\");\r\n            self.hideOptions();\r\n        });\r\n    },\r\n    isTings: function(seatData) {\r\n        var self = this;\r\n        var holds = this.sortHolds(seatData);\r\n        seatData.holds = holds;\r\n        this._tingPais = {};\r\n        for (var i = 0; i < seatData.holds.length; i++) {\r\n            var sd = {};\r\n            this.sf.y_deepCopy(true, sd, seatData);\r\n            sd.holds.splice(i, 1);\r\n            this.sf.calculate(sd, this._laiId, seatData.holds[i], function(response) {\r\n                if (response) {\r\n                    console.log(sd.holds, \"==============\", response);\r\n                    var k = response.k;\r\n                    if (response.tingData) {\r\n                        var arr = Object.keys(response.tingData);\r\n                        console.log(self._tingPais, \"----------\", arr);\r\n                        if (self._tingPais && arr.length > 0) {\r\n                            self._tingPais[k] = arr;\r\n                        }\r\n                        if (k == seatData.holds[seatData.holds.length - 1]) {\r\n                            self.showTingsIcon();\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    },\r\n    showTingsIcon: function() {\r\n        var seats = cc.vv.gameNetMgr.seats;\r\n        var seatData = seats[cc.vv.gameNetMgr.seatIndex];\r\n        var holds = this.sortHolds(seatData);\r\n        if (holds == null) {\r\n            return;\r\n        }\r\n        var lackingNum = (seatData.pengs.length + seatData.angangs.length + seatData.diangangs.length + seatData.wangangs.length + seatData.chis.length) * 3;\r\n        for (var i = 0; i < holds.length; ++i) {\r\n            var sprite = this._myMJArr[i + lackingNum];\r\n            var mjid = sprite.node.mjId;\r\n            if (sprite && sprite.node) {\r\n                if (this._tingPais && this._tingPais[mjid]) {\r\n                    console.log(mjid, i, \"tingPai:====\", sprite)\r\n                    sprite.node.getChildByName('raw').active = true;\r\n                } else {\r\n                    sprite.node.getChildByName('raw').active = false;\r\n                }\r\n            }\r\n        }\r\n    },\r\n    showChupai: function() {\r\n        var pai = cc.vv.gameNetMgr.chupai;\r\n        if (pai >= 0) {\r\n            var localIndex = this.getLocalIndex(cc.vv.gameNetMgr.turn);\r\n            var sprite = this._chupaiSprite[localIndex];\r\n            sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\", pai);\r\n            var target_node = sprite.node;\r\n            var old_x = target_node.x;\r\n            var old_y = target_node.y;\r\n            sprite.node.active = true;\r\n            var pos = cc.vv.global.shootPos;\r\n            switch (localIndex) {\r\n                case 0:\r\n                    if (pos) {\r\n                        target_node.x = pos.x * 1.1; //移到出牌位置\r\n                        target_node.y = pos.y * 1.1 - 158; //移到出牌位置\r\n                    }\r\n                    break;\r\n                case 1:\r\n                    target_node.x = cc.find(\"Canvas/game/right\").x;\r\n                    target_node.y = -150;\r\n                    break;\r\n                case 2:\r\n                    target_node.x = -50;\r\n                    target_node.y = 276;\r\n                    break;\r\n                case 3:\r\n                    target_node.x = cc.find(\"Canvas/game/left\").x;\r\n                    target_node.y = 150;\r\n                    break;\r\n            }\r\n            var action = cc.moveTo(0.05, cc.p(old_x, old_y));\r\n            //动画需要隐藏自己出的牌\r\n            if (cc.vv.gameNetMgr.seatIndex == cc.vv.gameNetMgr.turn && cc.vv.global.touch_target) {\r\n                cc.vv.global.touch_target.active = false;\r\n            }\r\n            target_node.runAction(action);\r\n        }\r\n    },\r\n    toChiActionPage: function() {\r\n        // console.log(\"to 吃 操作的页面\");\r\n        this.showChiAction(this._optionsData);\r\n    },\r\n    // 碰，杠，胡，过操作\r\n    addOption: function(btnName, pai) {\r\n        for (var i = 0; i < this._options.childrenCount; ++i) {\r\n            var child = this._options.children[i];\r\n            if (child.name == \"op\" && child.active == false) {\r\n                child.active = true;\r\n                var sprite = child.getChildByName(\"opTarget\").getComponent(cc.Sprite);\r\n                sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\", pai);\r\n                var btn = child.getChildByName(btnName);\r\n                btn.active = true;\r\n                btn.pai = pai;\r\n                return;\r\n            }\r\n        }\r\n    },\r\n    // 吃牌操作\r\n    addChiOption: function(btnName, data) {\r\n        console.log(\"吃牌操作addchioption\", data);\r\n        // 显示全部\r\n        for (var i = 0; i < this._chiOpts.childrenCount; ++i) {\r\n            var child = this._chiOpts.children[i];\r\n            child.active = true;\r\n            if (child.name == \"btnChi\") {\r\n                if (data.pai != null) {\r\n                    child.pai = data.pai;\r\n                }\r\n            }\r\n        }\r\n        for (var i = 0; i < this._chiOpts.childrenCount; ++i) {\r\n            var child = this._chiOpts.children[i];\r\n            for (var j = 0; j < 3; j++) {\r\n                var id = \"op\" + j;\r\n                if (child.name == id) {\r\n                    child.active = false;\r\n                }\r\n            }\r\n        }\r\n        for (var i = 0; i < this._chiOpts.childrenCount; ++i) {\r\n            var parentname = this._chiOpts.children[i];\r\n            var info = data.chiArrayInfo;\r\n            if (info.length <= 0) {\r\n                return;\r\n            }\r\n            // 目标牌\r\n            if (parentname.name == \"opTarget\") {\r\n                if (data.pai != null) {\r\n                    var sprite = parentname.getComponent(cc.Sprite);\r\n                    sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\", data.pai);\r\n                }\r\n            }\r\n            for (var k = 0; k < info.length; k++) {\r\n                var name = \"op\" + k;\r\n                if (parentname.name == name) {\r\n                    parentname.active = true;\r\n                    var childName = \"pai\" + k;\r\n                    var paiInfo = info[k];\r\n                    this._chiArrays.push(paiInfo);\r\n                    console.log('this._chiArraysthis._chiArraysthis._chiArraysthis._chiArrays', this._chiArrays);\r\n                    this.showChiPaiArray(parentname, paiInfo)\r\n                }\r\n            }\r\n        }\r\n    },\r\n    // 显示吃牌的组合\r\n    showChiPaiArray: function(parentname, data) {\r\n        console.log(\"显示吃牌的组合\", data, this._chiArrays);\r\n        if (data != null && data.length > 0) {\r\n            for (var index = 0; index < 2; index++) {\r\n                var pai = data[index];\r\n                var painame = \"pai\" + index;\r\n                var sprite = parentname.getChildByName(painame).getComponent(cc.Sprite);\r\n                sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\", pai);\r\n            }\r\n        }\r\n    },\r\n    // 隐藏碰杠胡牌操作\r\n    hideOptions: function(data) {\r\n        this._options.active = false;\r\n        this.hideChiOptions();\r\n        for (var i = 0; i < this._options.childrenCount; ++i) {\r\n            var child = this._options.children[i];\r\n            if (child.name == \"op\") {\r\n                child.active = false;\r\n                child.getChildByName(\"btnPeng\").active = false;\r\n                child.getChildByName(\"btnGang\").active = false;\r\n                child.getChildByName(\"btnHu\").active = false;\r\n                child.getChildByName(\"btnChi\").active = false;\r\n            }\r\n        }\r\n    },\r\n    // 隐藏吃牌的操作\r\n    hideChiOptions: function() {\r\n        console.log(\"隐藏hideChiOptions\", this._chiOpts.childrenCount);\r\n        this._chiOpts.active = false;\r\n        for (var i = 0; i < this._chiOpts.childrenCount; ++i) {\r\n            var child = this._chiOpts.children[i];\r\n            child.active = false;\r\n        }\r\n    },\r\n    showAction: function(data) {\r\n        if (this._options.active) {\r\n            this.hideOptions();\r\n        }\r\n        if (data && (data.hu || data.gang || data.peng || data.chi)) {\r\n            this._options.active = true;\r\n            if (data.hu) {\r\n                this.addOption(\"btnHu\", data.pai);\r\n            }\r\n            if (data.peng) {\r\n                this.addOption(\"btnPeng\", data.pai);\r\n            }\r\n            if (data.gang) {\r\n                for (var i = 0; i < data.gangpai.length; ++i) {\r\n                    var gp = data.gangpai[i];\r\n                    this.addOption(\"btnGang\", gp);\r\n                }\r\n            }\r\n            if (data.chi) {\r\n                this.addOption(\"btnChi\");\r\n            }\r\n        } else {\r\n            var selfData = cc.vv.gameNetMgr.getSelfData();\r\n            if (selfData.tinged) {\r\n                return;\r\n                //注1):2017 07 26 ly\r\n                //下面自动出牌不在需要，由服务器端去完成\r\n                //原因是： 下面语句执行后会产生一种牌不显示的bug。 \r\n                //      bug是必现。原因不明。\r\n                // //如果已经听牌，并且没有操作，则自动打牌\r\n                // var sprite = this._myMJArr[this._myMJArr.length - 1];\r\n                // var node = sprite.node;\r\n                // cc.vv.global.touch_target = node;\r\n                // node.active = false;\r\n                // this.shoot(node.mjId);\r\n                // node.y = 0;\r\n                // this.recordShootPos(node);\r\n            }\r\n        }\r\n    },\r\n    // 吃牌的操作\r\n    showChiAction: function(data) {\r\n        console.log(\"吃牌操作\", data);\r\n        // 如果碰牌的操作界面显示了,先隐藏,正常情况下这是不可能的\r\n        if (this._options.active) {\r\n            this.hideOptions();\r\n        }\r\n        if (this._chiOpts.active) {\r\n            this.hideChiOptions();\r\n        }\r\n        if (data && data.chi) {\r\n            this._chiOpts.active = true;\r\n            this._chiArrays = [];\r\n            this._chiOptionArray = [];\r\n            this.addChiOption('btnChi', data);\r\n        }\r\n    },\r\n    initWanfaLabel: function() {\r\n        var wanfa = cc.find(\"Canvas/infobar/wanfa\").getComponent(cc.Label);\r\n        wanfa.string = cc.vv.gameNetMgr.getWanfaWH();\r\n    },\r\n    initHupai: function(localIndex, pai) {\r\n        if (cc.vv.gameNetMgr.conf.type == \"ykx\") {\r\n            var hupailist = this._hupaiLists[localIndex];\r\n            for (var i = 0; i < hupailist.children.length; ++i) {\r\n                var hupainode = hupailist.children[i];\r\n                if (hupainode.active == false) {\r\n                    var pre = cc.vv.mahjongmgr.getFoldPre(localIndex);\r\n                    hupainode.getComponent(cc.Sprite).spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(pre, pai);\r\n                    hupainode.active = true;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    },\r\n    playEfx: function(index, name) {\r\n        this._playEfxs[index].node.active = true;\r\n        this._playEfxs[index].play(name);\r\n    },\r\n    onGameBeign: function() {\r\n        for (var i = 0; i < this._playEfxs.length; ++i) {\r\n            this._playEfxs[i].node.active = false;\r\n        }\r\n        for (var i = 0; i < this._hupaiLists.length; ++i) {\r\n            for (var j = 0; j < this._hupaiLists[i].childrenCount; ++j) {\r\n                this._hupaiLists[i].children[j].active = false;\r\n            }\r\n        }\r\n        for (var i = 0; i < cc.vv.gameNetMgr.seats.length; ++i) {\r\n            var seatData = cc.vv.gameNetMgr.seats[i];\r\n            var localIndex = cc.vv.gameNetMgr.getLocalIndex(i);\r\n            var hupai = this._hupaiTips[localIndex];\r\n            hupai.active = seatData.hued;\r\n            if (seatData.hued) {\r\n                // 如果胡牌了.肯定不显示听牌了\r\n                hupai.getChildByName(\"sprHu\").active = !seatData.iszimo;\r\n                hupai.getChildByName(\"sprZimo\").active = seatData.iszimo;\r\n                hupai.getChildByName(\"sprTing\").active = false;\r\n            }\r\n        }\r\n        this.hideChupai();\r\n        this.hideOptions();\r\n        var sides = [\"right\", \"up\", \"left\"];\r\n        var gameChild = this.node.getChildByName(\"game\");\r\n        for (var i = 0; i < sides.length; ++i) {\r\n            var sideChild = gameChild.getChildByName(sides[i]);\r\n            var holds = sideChild.getChildByName(\"holds\");\r\n            for (var j = 0; j < holds.childrenCount; ++j) {\r\n                var nc = holds.children[j];\r\n                nc.active = true;\r\n                nc.scaleX = 1.0;\r\n                nc.scaleY = 1.0;\r\n                var sprite = nc.getComponent(cc.Sprite);\r\n                sprite.spriteFrame = cc.vv.mahjongmgr.holdsEmpty[i + 1];\r\n            }\r\n        }\r\n        if (cc.vv.gameNetMgr.gamestate == \"\" && cc.vv.replayMgr.isReplay() == false) {\r\n            return;\r\n        }\r\n        this.gameRoot.active = true;\r\n        this.prepareRoot.active = false;\r\n        this.initMahjongs();\r\n        this.initLaiziPiList();\r\n        var seats = cc.vv.gameNetMgr.seats;\r\n        for (var i in seats) {\r\n            var seatData = seats[i];\r\n            var localIndex = cc.vv.gameNetMgr.getLocalIndex(i);\r\n            if (localIndex != 0) {\r\n                this.initOtherMahjongs(seatData);\r\n                this.initOtherLaiziPiList(seatData);\r\n                if (i == cc.vv.gameNetMgr.turn) {\r\n                    this.initMopai(i, -1);\r\n                } else {\r\n                    this.initMopai(i, null);\r\n                }\r\n            }\r\n        }\r\n        this.showChupai();\r\n        if (cc.vv.gameNetMgr.curaction != null) {\r\n            this._optionsData = cc.vv.gameNetMgr.curaction;\r\n            this.showAction(cc.vv.gameNetMgr.curaction);\r\n            cc.vv.gameNetMgr.curaction = null;\r\n        }\r\n        var selfData = cc.vv.gameNetMgr.getSelfData();\r\n        console.log('------------------------------------');\r\n        console.log(\"selfData\", selfData);\r\n        console.log('------------------------------------');\r\n        if (!selfData.extraPais) {\r\n            return;\r\n        }\r\n        if (selfData.extraPais.length > 0) {\r\n            console.log(\"当前多余的牌存在,则需要额外处理手牌\");\r\n            this.initExtraPaiHolds();\r\n            selfData.extraPais = [];\r\n        } else {\r\n            this.initTingedHolds();\r\n        }\r\n        this.showTingedFlag();\r\n    },\r\n    recordShootPos: function(node) { //记录出牌位置\r\n        if (node) {\r\n            var pos = {\r\n                x: node.x,\r\n                y: node.y\r\n            }\r\n            cc.vv.global.shootPos = pos;\r\n        }\r\n    },\r\n    onMjToUp: function(nc) {\r\n        var self = this;\r\n        nc.on(cc.Node.EventType.TOUCH_START, function(touch) {\r\n            if (!self._canChupai) {\r\n                return;\r\n            }\r\n            if (!nc.getComponent(cc.Button).interactable || cc.vv.gameNetMgr.turn != cc.vv.gameNetMgr.seatIndex) {\r\n                return;\r\n            }\r\n            this.old_node_x = nc.x;\r\n            this.old_node_y = nc.y;\r\n            this.old_touch_x = touch.getLocation().x;\r\n            this.old_touch_y = touch.getLocation().y\r\n            cc.vv.global.touch_target = nc;\r\n        });\r\n        nc.on(cc.Node.EventType.TOUCH_MOVE, function(touch) {\r\n            if (!self._canChupai) {\r\n                return;\r\n            }\r\n            if (!nc.getComponent(cc.Button).interactable || cc.vv.gameNetMgr.turn != cc.vv.gameNetMgr.seatIndex) {\r\n                return;\r\n            }\r\n            var touchX_diff = touch.getLocation().x - this.old_touch_x;\r\n            var touchY_diff = touch.getLocation().y - this.old_touch_y;\r\n            if (touchY_diff > 0) {\r\n                nc.x = this.old_node_x + touchX_diff;\r\n                nc.y = this.old_node_y + touchY_diff;\r\n            }\r\n            self._canTouchEnd = true;\r\n        });\r\n        nc.on(cc.Node.EventType.TOUCH_END, function(touch) {\r\n            if (!self._canChupai) {\r\n                return;\r\n            }\r\n            if (!nc.getComponent(cc.Button).interactable || cc.vv.gameNetMgr.turn != cc.vv.gameNetMgr.seatIndex || !self._canTouchEnd) {\r\n                return;\r\n            }\r\n            var touchY_diff = touch.getLocation().y - this.old_touch_y;\r\n            if (touchY_diff > nc.height / 2) {\r\n                self.recordShootPos(nc);\r\n                self.shoot(nc.mjId);\r\n                // nc.active = false;\r\n            }\r\n            //还原到原始位置\r\n            nc.x = this.old_node_x;\r\n            nc.y = this.old_node_y;\r\n            self._canTouchEnd = false;\r\n        });\r\n        nc.on(cc.Node.EventType.TOUCH_CANCEL, function(touch) {\r\n            if (!self._canChupai) {\r\n                return;\r\n            }\r\n            if (!nc.getComponent(cc.Button).interactable || cc.vv.gameNetMgr.turn != cc.vv.gameNetMgr.seatIndex) {\r\n                return;\r\n            }\r\n            var touchCancel = touch.getLocation();\r\n            var delta = touchCancel.y - this.old_touch_y;\r\n            if (delta > nc.height / 2) {\r\n                self.recordShootPos(nc);\r\n                self.shoot(nc.mjId);\r\n                nc.active = false;\r\n            }\r\n            //还原到原始位置\r\n            nc.x = this.old_node_x;\r\n            nc.y = this.old_node_y;\r\n        });\r\n    },\r\n    onMJClicked: function(event) {\r\n        var self = this;\r\n        if (!self._canChupai) {\r\n            return;\r\n        }\r\n        //如果不是自己的轮子，则忽略\r\n        if (cc.vv.gameNetMgr.turn != cc.vv.gameNetMgr.seatIndex) {\r\n            console.log(\"not your turn.\" + cc.vv.gameNetMgr.turn);\r\n            return;\r\n        }\r\n        var self = this;\r\n        this._tingsNode.active = false;\r\n        this._tingsNode.removeAllChildren();\r\n        for (var i = 0; i < this._myMJArr.length; ++i) {\r\n            if (event.target == this._myMJArr[i].node) {\r\n                //如果是再次点击，则出牌\r\n                if (event.target == this._selectedMJ) {\r\n                    // event.target.active = false;\r\n                    this.shoot(this._selectedMJ.mjId);\r\n                    this._selectedMJ.y = 0;\r\n                    this._selectedMJ = null;\r\n                    self.recordShootPos(event.target);\r\n                    return;\r\n                }\r\n                if (this._selectedMJ != null) {\r\n                    this._selectedMJ.y = 0;\r\n                }\r\n                event.target.y = 15;\r\n                this._selectedMJ = event.target;\r\n                if (event.target.getChildByName('raw').active) {\r\n                    this._tingsNode.active = true;\r\n                    var x = 0;\r\n                    console.log(this._tingPais, \"-------------\", this._tingPais[event.target.mjId])\r\n                    if (this._tingPais && this._tingPais[event.target.mjId]) {\r\n                        this._tingsNode.width = this._tingPais[event.target.mjId].length * 80;\r\n                        for (var i = 0; i < this._tingPais[event.target.mjId].length; i++) {\r\n                            var newNode = cc.instantiate(this._tingsChild);\r\n                            newNode.getChildByName(\"pai\").getComponent(cc.Sprite).spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\", this._tingPais[event.target.mjId][i]);\r\n                            if (this.tipCountMap[this._tingPais[event.target.mjId][i]]) {\r\n                                newNode.getChildByName(\"num\").getComponent(cc.Label).string = this.tipCountMap[this._tingPais[event.target.mjId][i]] + \"张\";\r\n                            } else {\r\n                                newNode.getChildByName(\"num\").getComponent(cc.Label).string = \"0张\";\r\n                            }\r\n                            if (i == 0) {\r\n                                newNode.x = 5 - this._tingsNode.width / 2 + newNode.getChildByName(\"pai\").width / 2;\r\n                                x = newNode.x;\r\n                            } else {\r\n                                newNode.x = x + i * (newNode.getChildByName(\"pai\").width + 3);\r\n                            }\r\n                            this._tingsNode.addChild(newNode);\r\n                        }\r\n                    }\r\n                }\r\n                return;\r\n            }\r\n        }\r\n    },\r\n    //出牌\r\n    shoot: function(mjId) {\r\n        if (mjId == null) {\r\n            return;\r\n        }\r\n        cc.vv.net.send('chupai', mjId);\r\n        for (var i = 0; i < this._myMJArr.length; ++i) {\r\n            if (this._myMJArr[i].node.getChildByName('raw')) this._myMJArr[i].node.getChildByName('raw').active = false;\r\n        }\r\n    },\r\n    getMJIndex: function(side, index) {\r\n        if (side == \"right\" || side == \"up\") {\r\n            return 13 - index;\r\n        }\r\n        return index;\r\n    },\r\n    initMopai: function(seatIndex, pai) {\r\n        var localIndex = cc.vv.gameNetMgr.getLocalIndex(seatIndex);\r\n        var side = cc.vv.mahjongmgr.getSide(localIndex);\r\n        var pre = cc.vv.mahjongmgr.getFoldPre(localIndex);\r\n        var gameChild = this.node.getChildByName(\"game\");\r\n        var sideChild = gameChild.getChildByName(side);\r\n        var holds = sideChild.getChildByName(\"holds\");\r\n        var lastIndex = this.getMJIndex(side, 13);\r\n        var nc = holds.children[lastIndex];\r\n        nc.scaleX = 1.0;\r\n        nc.scaleY = 1.0;\r\n        if (pai == null) {\r\n            nc.active = false;\r\n        } else if (pai >= 0) {\r\n            nc.active = true;\r\n            if (side == \"up\") {\r\n                nc.scaleX = 0.73;\r\n                nc.scaleY = 0.73;\r\n            }\r\n            var sprite = nc.getComponent(cc.Sprite);\r\n            sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(pre, pai);\r\n        } else if (pai != null) {\r\n            nc.active = true;\r\n            if (side == \"up\") {\r\n                nc.scaleX = 1.0;\r\n                nc.scaleY = 1.0;\r\n            }\r\n            var sprite = nc.getComponent(cc.Sprite);\r\n            sprite.spriteFrame = cc.vv.mahjongmgr.getHoldsEmptySpriteFrame(side);\r\n        }\r\n    },\r\n    initEmptySprites: function(seatIndex) {\r\n        var localIndex = cc.vv.gameNetMgr.getLocalIndex(seatIndex);\r\n        var side = cc.vv.mahjongmgr.getSide(localIndex);\r\n        var pre = cc.vv.mahjongmgr.getFoldPre(localIndex);\r\n        var gameChild = this.node.getChildByName(\"game\");\r\n        var sideChild = gameChild.getChildByName(side);\r\n        var holds = sideChild.getChildByName(\"holds\");\r\n        var spriteFrame = cc.vv.mahjongmgr.getEmptySpriteFrame(side);\r\n        for (var i = 0; i < holds.childrenCount; ++i) {\r\n            var nc = holds.children[i];\r\n            nc.scaleX = 1.0;\r\n            nc.scaleY = 1.0;\r\n            var sprite = nc.getComponent(cc.Sprite);\r\n            sprite.spriteFrame = spriteFrame;\r\n        }\r\n    },\r\n    initOtherMahjongs: function(seatData) {\r\n        console.log(\"seat:\" + seatData.seatindex, seatData);\r\n        if (!seatData) return;\r\n        var localIndex = this.getLocalIndex(seatData.seatindex);\r\n        if (localIndex == 0) {\r\n            return;\r\n        }\r\n        var side = cc.vv.mahjongmgr.getSide(localIndex);\r\n        var game = this.node.getChildByName(\"game\");\r\n        var sideRoot = game.getChildByName(side);\r\n        var sideHolds = sideRoot.getChildByName(\"holds\");\r\n        console.log('sideholds', sideHolds);\r\n        if (!seatData.pengs) {\r\n            seatData.pengs = [];\r\n        }\r\n        if (!seatData.angangs) {\r\n            seatData.angangs = [];\r\n        }\r\n        if (!seatData.diangangs) {\r\n            seatData.diangangs = [];\r\n        }\r\n        if (!seatData.wangangs) {\r\n            seatData.wangangs = [];\r\n        }\r\n        if (!seatData.chis) {\r\n            seatData.chis = [];\r\n        }\r\n        var num = seatData.pengs.length + seatData.angangs.length + seatData.diangangs.length + seatData.wangangs.length + seatData.chis.length;\r\n        num *= 3;\r\n        for (var i = 0; i < num; ++i) {\r\n            var idx = this.getMJIndex(side, i);\r\n            sideHolds.children[idx].active = false;\r\n        }\r\n        var pre = cc.vv.mahjongmgr.getFoldPre(localIndex);\r\n        var holds = this.sortHolds(seatData);\r\n        if (holds != null && holds.length > 0) {\r\n            for (var i = 0; i < holds.length; ++i) {\r\n                var idx = this.getMJIndex(side, i + num);\r\n                var sprite = sideHolds.children[idx].getComponent(cc.Sprite);\r\n                if (side == \"up\") {\r\n                    sprite.node.scaleX = 0.73;\r\n                    sprite.node.scaleY = 0.73;\r\n                }\r\n                sprite.node.active = true;\r\n                sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(pre, holds[i]);\r\n            }\r\n            if (holds.length + num == 13) {\r\n                var lasetIdx = this.getMJIndex(side, 13);\r\n                sideHolds.children[lasetIdx].active = false;\r\n            }\r\n        }\r\n    },\r\n    sortHolds: function(seatData) {\r\n        var holds = seatData.holds;\r\n        if (holds == null) {\r\n            return null;\r\n        }\r\n        //如果手上的牌的数目是2,5,8,11,14，表示最后一张牌是刚摸到的牌\r\n        var mopai = null;\r\n        var l = holds.length\r\n        if (l == 2 || l == 5 || l == 8 || l == 11 || l == 14) {\r\n            mopai = holds.pop();\r\n        }\r\n        cc.vv.mahjongmgr.sortMJ(holds);\r\n        holds = this.sortWHMJ(holds);\r\n        seatData.holds = holds;\r\n        //将摸牌添加到最后\r\n        if (mopai != null) {\r\n            holds.push(mopai);\r\n        }\r\n        return holds;\r\n    },\r\n    sortWHMJ: function(mahjongs) {\r\n        var laiIndex = mahjongs.indexOf(this._laiId);\r\n        var newHolds = [];\r\n        while (laiIndex > -1) {\r\n            mahjongs.splice(laiIndex, 1);\r\n            laiIndex = mahjongs.indexOf(this._laiId);\r\n            newHolds.push(this._laiId);\r\n        }\r\n        for (var i = 0; i < this._kuang.length; i++) {\r\n            var x = mahjongs.indexOf(this._kuang[i]);\r\n            while (x > -1) {\r\n                mahjongs.splice(x, 1);\r\n                x = mahjongs.indexOf(this._kuang[i]);\r\n                newHolds.push(this._kuang[i]);\r\n            }\r\n        };\r\n        return newHolds.concat(mahjongs);\r\n    },\r\n    initMahjongs: function() {\r\n        var seats = cc.vv.gameNetMgr.seats;\r\n        var seatData = seats[cc.vv.gameNetMgr.seatIndex];\r\n        this._laiId = seatData.laizi ? seatData.laizi : 0;\r\n        this._kuang = seatData._kuang ? seatData._kuang : [31];\r\n        var holds = this.sortHolds(seatData);\r\n        if (holds == null) {\r\n            return;\r\n        }\r\n        var s = this.node.getChildByName(\"game\").getChildByName('laizi').getComponent(cc.Sprite);\r\n        this.setSpriteFrameByMJID(\"M_\", s, this._laiId);\r\n        console.log(\"seatData.chis.length\", seatData.chis.length);\r\n        console.log(\"this._myMJArrthis._myMJArrthis._myMJArrthis._myMJArr\", this._myMJArr);\r\n        //初始化手牌\r\n        var lackingNum = (seatData.pengs.length + seatData.angangs.length + seatData.diangangs.length + seatData.wangangs.length + seatData.chis.length) * 3;\r\n        console.log(\"lackingNum\", lackingNum);\r\n        for (var i = 0; i < holds.length; ++i) {\r\n            var mjid = holds[i];\r\n            var sprite = this._myMJArr[i + lackingNum];\r\n            if (sprite && sprite.node) {\r\n                sprite.node.mjId = mjid;\r\n                sprite.node.y = 0;\r\n                sprite.node.active = true;\r\n                this.setSpriteFrameByMJID(\"M_\", sprite, mjid);\r\n            }\r\n        }\r\n        for (var i = 0; i < lackingNum; ++i) {\r\n            var sprite = this._myMJArr[i];\r\n            sprite.node.mjId = null;\r\n            sprite.spriteFrame = null;\r\n            sprite.node.active = false;\r\n        }\r\n        for (var i = lackingNum + holds.length; i < this._myMJArr.length; ++i) {\r\n            var sprite = this._myMJArr[i];\r\n            sprite.node.mjId = null;\r\n            sprite.spriteFrame = null;\r\n            sprite.node.active = false;\r\n        }\r\n    },\r\n    setSpriteFrameByMJID: function(pre, sprite, mjid) {\r\n        sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(pre, mjid);\r\n        if (sprite.node.getChildByName('kuang')) {\r\n            if (this._kuang.indexOf(mjid) > -1) {\r\n                sprite.node.getChildByName('kuang').active = true;\r\n            } else {\r\n                sprite.node.getChildByName('kuang').active = false;\r\n            }\r\n        }\r\n        if (sprite.node.getChildByName('lai')) {\r\n            if (mjid == this._laiId) {\r\n                sprite.node.getChildByName('lai').active = true;\r\n            } else {\r\n                sprite.node.getChildByName('lai').active = false;\r\n            }\r\n        }\r\n        sprite.node.active = true;\r\n    },\r\n    getLocalIndex: function(index) {\r\n        var ret = (index - cc.vv.gameNetMgr.seatIndex + 4) % 4;\r\n        console.log(\"old:\" + index + \",base:\" + cc.vv.gameNetMgr.seatIndex + \",new:\" + ret);\r\n        return ret;\r\n    },\r\n    onOptionClicked: function(event) {\r\n        console.log(\"吃碰杠牌操作\");\r\n        console.log(event.target.pai);\r\n        if (event.target.name == \"btnPeng\") {\r\n            cc.vv.net.send(\"peng\");\r\n        } else if (event.target.name == \"btnGang\") {\r\n            cc.vv.net.send(\"gang\", event.target.pai);\r\n        } else if (event.target.name == \"btnHu\") {\r\n            cc.vv.net.send(\"hu\");\r\n        } else if (event.target.name == \"btnGuo\") {\r\n            cc.vv.net.send(\"guo\");\r\n        } else if (event.target.name == \"btnChi\") {\r\n            console.log(\"吃牌操作按钮点击\");\r\n            cc.vv.net.send(\"chi\", event.target.pai);\r\n            console.log(\"向服务器发送吃牌操作--\", {\r\n                pai: event.target.pai,\r\n                chiArray: this._chiOptionArray\r\n            });\r\n        }\r\n    },\r\n    // 吃牌操作\r\n    onChiOptionClicked: function(event) {\r\n        console.log(\"吃牌操作事件绑定\");\r\n        // 用来存放玩家选中的吃的组合\r\n        console.log(event.target.pai);\r\n        if (event.target.name == \"op0\") {\r\n            if (this._chiArrays.length <= 0) {\r\n                this._chiOptionArray = [];\r\n            } else {\r\n                this._chiOptionArray = this._chiArrays[0];\r\n            }\r\n            console.log(\"玩家选中了第一组组合\", this._chiOptionArray);\r\n        } else if (event.target.name == \"op1\") {\r\n            if (this._chiArrays.length <= 0) {\r\n                this._chiOptionArray = [];\r\n            } else {\r\n                this._chiOptionArray = this._chiArrays[1];\r\n            }\r\n            console.log(\"选择了第二组组合\", this._chiOptionArray);\r\n        } else if (event.target.name == \"op2\") {\r\n            if (this._chiArrays.length <= 0) {\r\n                this._chiOptionArray = [];\r\n            } else {\r\n                this._chiOptionArray = this._chiArrays[2];\r\n            }\r\n            console.log(\"选择了第三组组合\", this._chiOptionArray);\r\n        } else if (event.target.name == \"btnGuo\") {\r\n            cc.vv.net.send(\"guo\");\r\n        } else if (event.target.name == \"btnChi\") {\r\n            console.log(\"吃牌操作按钮点击\");\r\n            if (this._chiOptionArray.length > 0) {\r\n                console.log(\"可以吃的组合选中了,发送数据到服务器\", this._chiOptionArray);\r\n                var data = {\r\n                    pai: event.target.pai,\r\n                    chiOptioned: this._chiOptionArray\r\n                }\r\n                console.log(\"吃牌的组合是\", data)\r\n                cc.vv.net.send(\"chi\", data);\r\n            } else {\r\n                cc.vv.alert.show(\"注意\", \"请选择一组吃牌的组合\");\r\n            }\r\n            console.log(\"向服务器发送吃牌操作--\", event.target.pai);\r\n        }\r\n    },\r\n    // called every frame, uncomment this function to activate update callback\r\n    update: function(dt) {},\r\n    onDestroy: function() {\r\n        console.log(\"onDestroy\");\r\n        if (cc.vv) {\r\n            cc.vv.gameNetMgr.clear();\r\n        }\r\n    }\r\n});"
  ]
}
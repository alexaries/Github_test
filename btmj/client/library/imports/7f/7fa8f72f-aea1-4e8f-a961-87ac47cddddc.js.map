{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [
    "cc",
    "Class",
    "extends",
    "Component",
    "properties",
    "gameRoot",
    "default",
    "type",
    "Node",
    "prepareRoot",
    "_myMJArr",
    "_options",
    "_selectedMJ",
    "_chupaiSprite",
    "_mjcount",
    "_gamecount",
    "_hupaiTips",
    "_hupaiLists",
    "_playEfxs",
    "_opts",
    "_chiArrays",
    "_chiOptionArray",
    "_chiOpts",
    "_optionsData",
    "_canChupai",
    "onLoad",
    "sys",
    "isNative",
    "isMobile",
    "cvs",
    "node",
    "getComponent",
    "Canvas",
    "fitHeight",
    "fitWidth",
    "vv",
    "director",
    "loadScene",
    "addComponent",
    "initView",
    "initEventHandlers",
    "active",
    "initWanfaLabel",
    "onGameBeign",
    "gameChild",
    "getChildByName",
    "Label",
    "string",
    "gameNetMgr",
    "numOfMJ",
    "numOfGames",
    "maxNumOfGames",
    "myselfChild",
    "myholds",
    "i",
    "children",
    "length",
    "sprite",
    "Sprite",
    "push",
    "onMjToUp",
    "spriteFrame",
    "realwidth",
    "getVisibleSize",
    "width",
    "scaleX",
    "scaleY",
    "sides",
    "side",
    "sideChild",
    "Animation",
    "opt",
    "data",
    "opts",
    "chiOpts",
    "hideOptions",
    "hideChupai",
    "hideChiOptions",
    "checkHasCaiShen",
    "hasCaiShen",
    "seatIndex",
    "turn",
    "mjId",
    "mahjongmgr",
    "getMahjongType",
    "console",
    "log",
    "checkCaiShen",
    "self",
    "fn",
    "shootCaiShen",
    "y",
    "recordShootPos",
    "Button",
    "interactable",
    "global",
    "touch_target",
    "fun",
    "setTimeout",
    "initTingedHolds",
    "conf",
    "getSelfData",
    "tinged",
    "initExtraPaiHolds",
    "selfData",
    "extraPais",
    "j",
    "indexOf",
    "showTingedFlag",
    "seats",
    "seatData",
    "localIndex",
    "getLocalIndex",
    "hupai",
    "resetPai",
    "isShow",
    "x",
    "old_node_x",
    "dataEventHandler",
    "on",
    "initMahjongs",
    "detail",
    "last",
    "initMopai",
    "replayMgr",
    "isReplay",
    "pai",
    "index",
    "setSpriteFrameByMJID",
    "shootPos",
    "showAction",
    "seatindex",
    "hued",
    "initHupai",
    "iszimo",
    "holds",
    "pop",
    "initOtherMahjongs",
    "playEfx",
    "audioMgr",
    "playSFX",
    "showChupai",
    "audioUrl",
    "getAudioURLByMJID",
    "initCaiShenList",
    "initOtherCaiShenList",
    "alert",
    "show",
    "gangtype",
    "angangs",
    "chupai",
    "getSpriteFrameByMJID",
    "target_node",
    "old_x",
    "old_y",
    "pos",
    "find",
    "action",
    "moveTo",
    "p",
    "runAction",
    "toChiActionPage",
    "showChiAction",
    "addOption",
    "btnName",
    "childrenCount",
    "child",
    "name",
    "btn",
    "addChiOption",
    "id",
    "parentname",
    "info",
    "chiArrayInfo",
    "k",
    "childName",
    "paiInfo",
    "showChiPaiArray",
    "painame",
    "hu",
    "gang",
    "peng",
    "chi",
    "gangpai",
    "gp",
    "wanfa",
    "getWanfa",
    "hupailist",
    "hupainode",
    "pre",
    "getFoldPre",
    "initCaiShen",
    "play",
    "nc",
    "holdsEmpty",
    "gamestate",
    "curaction",
    "EventType",
    "TOUCH_START",
    "touch",
    "old_node_y",
    "old_touch_x",
    "getLocation",
    "old_touch_y",
    "TOUCH_MOVE",
    "touchX_diff",
    "touchY_diff",
    "TOUCH_END",
    "height",
    "shoot",
    "TOUCH_CANCEL",
    "touchCancel",
    "delta",
    "onMJClicked",
    "event",
    "target",
    "net",
    "send",
    "getMJIndex",
    "getSide",
    "lastIndex",
    "getHoldsEmptySpriteFrame",
    "initEmptySprites",
    "getEmptySpriteFrame",
    "game",
    "sideRoot",
    "sideHolds",
    "num",
    "pengs",
    "diangangs",
    "wangangs",
    "chis",
    "idx",
    "sortHolds",
    "lasetIdx",
    "mopai",
    "l",
    "sortMJ",
    "lackingNum",
    "mjid",
    "ret",
    "onOptionClicked",
    "chiArray",
    "onChiOptionClicked",
    "chiOptioned",
    "caishen",
    "caiShen",
    "caishen_list",
    "mj_caishen_id",
    "side_caishen_list",
    "update",
    "dt",
    "onDestroy",
    "clear"
  ],
  "mappings": "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",
  "file": "unknown",
  "sourcesContent": [
    "cc.Class({\r\n    extends: cc.Component,\r\n    properties: {\r\n        gameRoot: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        prepareRoot: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        _myMJArr: [],\r\n        _options: null,\r\n        _selectedMJ: null,\r\n        _chupaiSprite: [],\r\n        _mjcount: null,\r\n        _gamecount: null,\r\n        _hupaiTips: [],\r\n        _hupaiLists: [],\r\n        _playEfxs: [],\r\n        _opts: [],\r\n        // 用于存放服务端发过来的可以吃的组合\r\n        _chiArrays: [],\r\n        // 用来存放玩家选中的吃的组合\r\n        _chiOptionArray: [],\r\n        _chiOpts: null,\r\n        _optionsData: null,\r\n        _canChupai: false\r\n    },\r\n    onLoad: function() {\r\n        if (!cc.sys.isNative && cc.sys.isMobile) {\r\n            var cvs = this.node.getComponent(cc.Canvas);\r\n            cvs.fitHeight = true;\r\n            cvs.fitWidth = true;\r\n        }\r\n        if (!cc.vv) {\r\n            cc.director.loadScene(\"login\");\r\n            return;\r\n        }\r\n        this.addComponent(\"NoticeTip\");\r\n        this.addComponent(\"GameOver\");\r\n        this.addComponent(\"PengGangs\");\r\n        this.addComponent(\"MJRoom\");\r\n        this.addComponent(\"TimePointer\");\r\n        this.addComponent(\"GameResult\");\r\n        this.addComponent(\"Chat\");\r\n        this.addComponent(\"Folds\");\r\n        this.addComponent(\"ReplayCtrl\");\r\n        this.addComponent(\"PopupMgr\");\r\n        this.addComponent(\"ReConnect\");\r\n        this.addComponent(\"Voice\");\r\n        this.initView();\r\n        this.initEventHandlers();\r\n        this.gameRoot.active = false;\r\n        this.prepareRoot.active = true;\r\n        this._chiArrays = [];\r\n        this._chiOptionArray = [];\r\n        this.initWanfaLabel();\r\n        this.onGameBeign();\r\n    },\r\n    initView: function() {\r\n        //搜索需要的子节点\r\n        var gameChild = this.node.getChildByName(\"game\");\r\n        this._mjcount = gameChild.getChildByName('mjcount').getComponent(cc.Label);\r\n        this._mjcount.string = \"剩余\" + cc.vv.gameNetMgr.numOfMJ + \"张\";\r\n        this._gamecount = gameChild.getChildByName('gamecount').getComponent(cc.Label);\r\n        this._gamecount.string = \"\" + cc.vv.gameNetMgr.numOfGames + \"/\" + cc.vv.gameNetMgr.maxNumOfGames + \"局\";\r\n        var myselfChild = gameChild.getChildByName(\"myself\");\r\n        var myholds = myselfChild.getChildByName(\"holds\");\r\n        for (var i = 0; i < myholds.children.length; ++i) {\r\n            var sprite = myholds.children[i].getComponent(cc.Sprite);\r\n            this._myMJArr.push(sprite);\r\n            this.onMjToUp(sprite.node);\r\n            sprite.spriteFrame = null;\r\n        }\r\n        var realwidth = cc.director.getVisibleSize().width;\r\n        myholds.scaleX *= realwidth / 1280;\r\n        myholds.scaleY *= realwidth / 1280;\r\n        var sides = [\"myself\", \"right\", \"up\", \"left\"];\r\n        for (var i = 0; i < sides.length; ++i) {\r\n            var side = sides[i];\r\n            var sideChild = gameChild.getChildByName(side);\r\n            this._hupaiTips.push(sideChild.getChildByName(\"HuPai\"));\r\n            this._hupaiLists.push(sideChild.getChildByName(\"hupailist\"));\r\n            this._playEfxs.push(sideChild.getChildByName(\"play_efx\").getComponent(cc.Animation));\r\n            this._chupaiSprite.push(sideChild.getChildByName(\"ChuPai\").children[0].getComponent(cc.Sprite));\r\n            var opt = sideChild.getChildByName(\"opt\");\r\n            opt.active = false;\r\n            var sprite = opt.getChildByName(\"pai\").getComponent(cc.Sprite);\r\n            var data = {\r\n                node: opt,\r\n                sprite: sprite\r\n            };\r\n            this._opts.push(data);\r\n        }\r\n        var opts = gameChild.getChildByName(\"ops\");\r\n        this._options = opts;\r\n        var chiOpts = gameChild.getChildByName(\"chiops\");\r\n        this._chiOpts = chiOpts;\r\n        this.hideOptions();\r\n        this.hideChupai();\r\n        this.hideChiOptions();\r\n        if (this._myMJArr.length == 14) {\r\n            this._canChupai = true;\r\n        }\r\n    },\r\n    hideChupai: function() {\r\n        for (var i = 0; i < this._chupaiSprite.length; ++i) {\r\n            this._chupaiSprite[i].node.active = false;\r\n        }\r\n    },\r\n    checkHasCaiShen: function() {\r\n        // console.log('判断是否有财神');\r\n        var hasCaiShen = false;\r\n        if (cc.vv.gameNetMgr.seatIndex == cc.vv.gameNetMgr.turn) {\r\n            for (var i = 0; i < this._myMJArr.length; ++i) {\r\n                var sprite = this._myMJArr[i];\r\n                if (sprite.node.mjId != null) {\r\n                    var type = cc.vv.mahjongmgr.getMahjongType(sprite.node.mjId);\r\n                    if (type == 4) {\r\n                        console.log(\"有财神\");\r\n                        hasCaiShen = true;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return hasCaiShen;\r\n    },\r\n    // 每摸一次牌,判断一下是否是财神\r\n    checkCaiShen: function() {\r\n        if (this.checkHasCaiShen()) {\r\n            var self = this;\r\n            //自动出花牌\r\n            var fn = function(node) {\r\n                var type = cc.vv.mahjongmgr.getMahjongType(node.mjId);\r\n                node.active = false;\r\n                self.shootCaiShen(node.mjId);\r\n                node.y = 0;\r\n                self.recordShootPos(node);\r\n            }\r\n            var node;\r\n            for (var i = 0; i < self._myMJArr.length; ++i) {\r\n                var sprite = self._myMJArr[i];\r\n                if (sprite.node.mjId != null) {\r\n                    var type = cc.vv.mahjongmgr.getMahjongType(sprite.node.mjId);\r\n                    if (type != 4) {\r\n                        sprite.node.getComponent(cc.Button).interactable = false;\r\n                    } else {\r\n                        cc.vv.global.touch_target = sprite.node;\r\n                        // cc.vv.gameNetMgr.turn = sprite.node;\r\n                        node = sprite.node;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            var fun = fn(node);\r\n            setTimeout(fun, 100);\r\n            //遍历检查看是否有未打缺的牌 如果有，则需要将不是定缺的牌设置为不可用\r\n            // console.log(\"检查是否有财神\");\r\n        } else {\r\n            // console.log(\"没有财神\");\r\n            if (cc.vv.gameNetMgr.seatIndex == cc.vv.gameNetMgr.turn) {\r\n                // console.log(\"没有财神:\", cc.vv.gameNetMgr.seatIndex, cc.vv.gameNetMgr.turn);\r\n                for (var i = 0; i < 14; ++i) {\r\n                    var sprite = this._myMJArr[i];\r\n                    if (sprite.node.active == true) {\r\n                        sprite.node.getComponent(cc.Button).interactable = true;\r\n                    }\r\n                }\r\n            } else {\r\n                // 没有轮到出牌顺序,不能点击麻将\r\n                for (var i = 0; i < 14; ++i) {\r\n                    var sprite = this._myMJArr[i];\r\n                    if (sprite.node.active == true) {\r\n                        // 出牌默认还是可以点击的\r\n                        sprite.node.getComponent(cc.Button).interactable = true;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n    //如果玩家手上还有缺的牌没有打，则只能打缺牌\r\n    initTingedHolds: function() {\r\n        // 如果有财神,当然不能显示听牌哎\r\n        if (this.checkHasCaiShen()) {\r\n            return;\r\n        }\r\n        if (cc.vv.gameNetMgr.conf == null || !cc.vv.gameNetMgr.getSelfData().tinged) {\r\n            for (var i = 0; i < this._myMJArr.length; ++i) {\r\n                var sprite = this._myMJArr[i];\r\n                if (sprite.node.mjId != null) {\r\n                    sprite.node.getComponent(cc.Button).interactable = true;\r\n                }\r\n            }\r\n        } else {\r\n            if (cc.vv.gameNetMgr.seatIndex == cc.vv.gameNetMgr.turn) {\r\n                for (var i = 0; i < 14; ++i) {\r\n                    var sprite = this._myMJArr[i];\r\n                    if (sprite.node.active == true) {\r\n                        sprite.node.getComponent(cc.Button).interactable = i == 13;\r\n                    }\r\n                }\r\n            } else {\r\n                for (var i = 0; i < 14; ++i) {\r\n                    var sprite = this._myMJArr[i];\r\n                    if (sprite.node.active == true) {\r\n                        sprite.node.getComponent(cc.Button).interactable = true;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n    initExtraPaiHolds: function() {\r\n        console.log(\"运行到这里哦extraPaiHolds\");\r\n        if (this.checkHasCaiShen()) {\r\n            return;\r\n        }\r\n        var selfData = cc.vv.gameNetMgr.getSelfData();\r\n        if (selfData.extraPais.length <= 0) {\r\n            console.log(\"当前多余的牌不存在,不需要额外处理手牌\");\r\n            return;\r\n        }\r\n        if (cc.vv.gameNetMgr.conf == null || !selfData.tinged) {\r\n            for (var i = 0; i < this._myMJArr.length; ++i) {\r\n                var sprite = this._myMJArr[i];\r\n                if (sprite.node.mjId != null) {\r\n                    sprite.node.getComponent(cc.Button).interactable = true;\r\n                }\r\n            }\r\n        } else {\r\n            if (cc.vv.gameNetMgr.seatIndex == cc.vv.gameNetMgr.turn) {\r\n                console.log(\"判断是否是自己\");\r\n                for (var j = 0; j < 14; ++j) {\r\n                    var sprite = this._myMJArr[j];\r\n                    console.log(\" 当前的麻将的id是\", sprite.node.mjId);\r\n                    if ((sprite.node.active == true) && (sprite.node.mjId != null)) {\r\n                        if (selfData.extraPais.indexOf(sprite.node.mjId) > -1) {\r\n                            console.log(\"准备选择哪些可用\", sprite.node.mjId);\r\n                            sprite.node.getComponent(cc.Button).interactable = true;\r\n                        } else {\r\n                            console.log(\"准备选择哪些可以禁用的\", sprite.node.mjId);\r\n                            sprite.node.getComponent(cc.Button).interactable = false;\r\n                        }\r\n                    }\r\n                }\r\n                //ly鉴定。这样写是错误的。因为这样始终是最后一个可操作，与需求不符\r\n                // for (var i = 0; i < selfData.extraPais.length; i++) {\r\n                //     console.log(\"当前牌是\", selfData.extraPais[i]);\r\n                //     var paiId = selfData.extraPais[i];\r\n                //     for (var j = 0; j < 14; ++j) {\r\n                //         var sprite = this._myMJArr[j];\r\n                //         console.log(\" 当前的麻将的id是\", sprite.node.mjId);\r\n                //         if ((sprite.node.active == true) && (sprite.node.mjId != null)) {\r\n                //             if (sprite.node.mjId == paiId) {\r\n                //                 console.log(\"准备选择哪些可用\", sprite.node.mjId);\r\n                //                 sprite.node.getComponent(cc.Button).interactable = true;\r\n                //             } else {\r\n                //                 console.log(\"准备选择哪些可以禁用的\", sprite.node.mjId);\r\n                //                 sprite.node.getComponent(cc.Button).interactable = false;\r\n                //             }\r\n                //         }\r\n                //     }\r\n                // }\r\n            } else {\r\n                for (var i = 0; i < 14; ++i) {\r\n                    var sprite = this._myMJArr[i];\r\n                    if (sprite.node.active == true) {\r\n                        sprite.node.getComponent(cc.Button).interactable = true;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n    showTingedFlag: function() {\r\n        console.log(\"showTingedFlag\");\r\n        for (var i = 0; i < cc.vv.gameNetMgr.seats.length; ++i) {\r\n            var seatData = cc.vv.gameNetMgr.seats[i];\r\n            var localIndex = cc.vv.gameNetMgr.getLocalIndex(i);\r\n            var hupai = this._hupaiTips[localIndex];\r\n            hupai.active = seatData.tinged;\r\n            if (seatData.tinged) {\r\n                hupai.getChildByName(\"sprHu\").active = !seatData.tinged;\r\n                hupai.getChildByName(\"sprZimo\").active = !seatData.tinged;\r\n                hupai.getChildByName(\"sprTing\").active = seatData.tinged;\r\n            }\r\n        }\r\n    },\r\n    resetPai: function(isShow) {\r\n        //还原被拖动的牌的位置\r\n        var touch_target = cc.vv.global.touch_target;\r\n        if (touch_target) {\r\n            touch_target.x = touch_target.old_node_x;\r\n            touch_target.y = 0;\r\n            if (isShow) {\r\n                touch_target.active = true;\r\n            }\r\n        }\r\n    },\r\n    initEventHandlers: function() {\r\n        cc.vv.gameNetMgr.dataEventHandler = this.node;\r\n        //初始化事件监听器\r\n        var self = this;\r\n        this.node.on('game_holds', function(data) {\r\n            self.initMahjongs();\r\n            self.checkCaiShen();\r\n            var selfData = cc.vv.gameNetMgr.getSelfData();\r\n            console.log('------------------------------------');\r\n            console.log(\"selfData\", selfData.extraPais);\r\n            console.log('------------------------------------');\r\n            if (selfData != null && selfData.extraPais != null) {\r\n                if (selfData.extraPais.length > 0) {\r\n                    console.log(\"当前多余的牌存在,则需要额外处理手牌\");\r\n                    self.initExtraPaiHolds();\r\n                    selfData.extraPais = [];\r\n                } else {\r\n                    self.initTingedHolds();\r\n                }\r\n            }\r\n        });\r\n        this.node.on('game_begin', function(data) {\r\n            self.onGameBeign();\r\n        });\r\n        this.node.on('game_sync', function(data) {\r\n            self.onGameBeign();\r\n        });\r\n        this.node.on('game_chupai', function(data) {\r\n            data = data.detail;\r\n            self.hideChupai();\r\n            self.checkCaiShen();\r\n            var selfData = cc.vv.gameNetMgr.getSelfData();\r\n            console.log('------------------------------------');\r\n            console.log(\"selfData\", selfData.extraPais);\r\n            console.log('------------------------------------');\r\n            if (selfData != null && selfData.extraPais != null) {\r\n                if (selfData.extraPais.length > 0) {\r\n                    console.log(\"当前多余的牌存在,则需要额外处理手牌\");\r\n                    self.initExtraPaiHolds();\r\n                    selfData.extraPais = [];\r\n                } else {\r\n                    self.initTingedHolds();\r\n                }\r\n            }\r\n            if (data.last != cc.vv.gameNetMgr.seatIndex) {\r\n                self.initMopai(data.last, null);\r\n            }\r\n            if (!cc.vv.replayMgr.isReplay() && data.turn != cc.vv.gameNetMgr.seatIndex) {\r\n                self.initMopai(data.turn, -1);\r\n            }\r\n            //默认不可以出牌\r\n            self._canChupai = false;\r\n            if (!self.checkHasCaiShen() && data.turn == cc.vv.gameNetMgr.seatIndex) {\r\n                //判断是否可以出牌,只有当玩家没有财神,且持有话语权才能出牌(因为'game_chupai' 是发给所有人的)。\r\n                self._canChupai = true;\r\n            }\r\n        });\r\n        this.node.on('game_mopai', function(data) {\r\n            self.hideChupai();\r\n            data = data.detail;\r\n            var pai = data.pai;\r\n            var localIndex = cc.vv.gameNetMgr.getLocalIndex(data.seatIndex);\r\n            if (localIndex == 0) {\r\n                var index = 13;\r\n                var sprite = self._myMJArr[index];\r\n                self.setSpriteFrameByMJID(\"M_\", sprite, pai, index);\r\n                sprite.node.active = true;\r\n                sprite.node.mjId = pai;\r\n                self._canChupai = true;\r\n            } else if (cc.vv.replayMgr.isReplay()) {\r\n                self.initMopai(data.seatIndex, pai);\r\n                self._canChupai = false;\r\n            }\r\n            cc.vv.global.touch_target = null;\r\n            cc.vv.global.shootPos = null;\r\n        });\r\n        this.node.on('game_action', function(data) {\r\n            self._optionsData = data.detail;\r\n            self.showAction(data.detail);\r\n            // console.log(\"game_action-----是否可以吃牌\", data);\r\n            // if (data.detail && data.detail.chi) {\r\n            //     console.log(\"可以吃牌\");\r\n            //     self.showChiAction(data.detail);\r\n            // }\r\n            // if (data.detail) {\r\n            //     if (data.detail.peng || data.detail.gang || data.detail.hu) {\r\n            //         console.log(\"碰杠胡\");\r\n            //         self.showAction(data.detail);\r\n            //     }\r\n            // }\r\n        });\r\n        this.node.on('hupai', function(data) {\r\n            console.log(\"ly:有人胡牌了\");\r\n            self.hideChiOptions();\r\n            var data = data.detail;\r\n            //如果不是玩家自己，则将玩家的牌都放倒\r\n            var seatIndex = data.seatindex;\r\n            var localIndex = cc.vv.gameNetMgr.getLocalIndex(seatIndex);\r\n            var hupai = self._hupaiTips[localIndex];\r\n            hupai.active = true;\r\n            if (localIndex == 0) {\r\n                self.hideOptions();\r\n            }\r\n            var seatData = cc.vv.gameNetMgr.seats[seatIndex];\r\n            seatData.hued = true;\r\n            if (cc.vv.gameNetMgr.conf.type == \"ykx\") {\r\n                hupai.getChildByName(\"sprHu\").active = true;\r\n                hupai.getChildByName(\"sprZimo\").active = false;\r\n                hupai.getChildByName(\"sprTing\").active = false;\r\n                self.initHupai(localIndex, data.hupai);\r\n                if (data.iszimo) {\r\n                    if (seatData.seatindex == cc.vv.gameNetMgr.seatIndex) {\r\n                        seatData.holds.pop();\r\n                        self.initMahjongs();\r\n                    } else {\r\n                        self.initOtherMahjongs(seatData);\r\n                    }\r\n                }\r\n            } else {\r\n                hupai.getChildByName(\"sprHu\").active = !data.iszimo;\r\n                hupai.getChildByName(\"sprZimo\").active = data.iszimo;\r\n                if (!(data.iszimo && localIndex == 0)) {\r\n                    //if(cc.vv.replayMgr.isReplay() == false && localIndex != 0){\r\n                    //    self.initEmptySprites(seatIndex);                \r\n                    //}\r\n                    self.initMopai(seatIndex, data.hupai);\r\n                }\r\n            }\r\n            // if (cc.vv.replayMgr.isReplay() == true && cc.vv.gameNetMgr.conf.type != \"ykx\") {\r\n            //     var opt = self._opts[localIndex];\r\n            //     opt.node.active = true;\r\n            //     opt.sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\", data.hupai);\r\n            // }\r\n            if (data.iszimo) {\r\n                self.playEfx(localIndex, \"play_zimo\");\r\n            } else {\r\n                self.playEfx(localIndex, \"play_hu\");\r\n            }\r\n            cc.vv.audioMgr.playSFX(\"nv/hu.mp3\");\r\n        });\r\n        this.node.on('mj_count', function(data) {\r\n            self._mjcount.string = \"剩余\" + cc.vv.gameNetMgr.numOfMJ + \"张\";\r\n        });\r\n        this.node.on('game_num', function(data) {\r\n            self._gamecount.string = \"\" + cc.vv.gameNetMgr.numOfGames + \"/\" + cc.vv.gameNetMgr.maxNumOfGames + \"局\";\r\n        });\r\n        this.node.on('game_over', function(data) {\r\n            self.gameRoot.active = false;\r\n            self.prepareRoot.active = true;\r\n        });\r\n        this.node.on('game_chupai_notify', function(data) {\r\n            self.hideChupai();\r\n            var seatData = data.detail.seatData;\r\n            //如果是自己，则刷新手牌\r\n            if (seatData.seatindex == cc.vv.gameNetMgr.seatIndex) {\r\n                self._canChupai = false;\r\n                //还原被拖动的牌的位置\r\n                self.resetPai();\r\n                setTimeout(function() {\r\n                    var touch_target = cc.vv.global.touch_target;\r\n                    if (touch_target) {\r\n                        touch_target.active = true;\r\n                    }\r\n                    self.initMahjongs();\r\n                }, 500);\r\n            } else {\r\n                self.initOtherMahjongs(seatData);\r\n            }\r\n            self.showChupai();\r\n            // 花牌没有对应的声音\r\n            if (data.detail.pai < 34) {\r\n                var audioUrl = cc.vv.mahjongmgr.getAudioURLByMJID(data.detail.pai);\r\n                // console.log(\"audioUrl!!!\" + audioUrl);\r\n                cc.vv.audioMgr.playSFX(audioUrl);\r\n            }\r\n        });\r\n        //财神处理\r\n        this.node.on('game_caishen_notify', function(data) {\r\n            // console.log(\"财神事件监听!!!!!!!!!!!!!\", data);\r\n            var seatData = data.detail;\r\n            // console.log('财神事件监听', seatData);\r\n            //如果是自己，则刷新手牌\r\n            // if (seatData.seatindex == cc.vv.gameNetMgr.seatIndex) {\r\n            //     setTimeout(function() {\r\n            //         var touch_target = cc.vv.global.touch_target;\r\n            //         if (touch_target) {\r\n            //             touch_target.active = true;\r\n            //         }\r\n            //         self.initCaiShenList();\r\n            //         self.initMahjongs();\r\n            //     }, 500);\r\n            // } else {\r\n            //      self.initOtherMahjongs(seatData);\r\n            //     self.initOtherCaiShenList(seatData);\r\n            // }\r\n            // self.showChupai();\r\n            if (seatData.seatindex == cc.vv.gameNetMgr.seatIndex) {\r\n                self.initCaiShenList();\r\n                self.initMahjongs();\r\n            } else {\r\n                self.initOtherMahjongs(seatData);\r\n                self.initOtherCaiShenList(seatData);\r\n            }\r\n        });\r\n        this.node.on('match_exit_error', function(data) {\r\n            //锦标赛不能退出游戏\r\n            cc.vv.alert.show(\"提示\", \"锦标赛中不能退出游戏\");\r\n        });\r\n        this.node.on('guo_notify', function(data) {\r\n            self.hideChupai();\r\n            self.hideOptions();\r\n            self.hideChiOptions();\r\n            var seatData = data.detail;\r\n            //如果是自己，则刷新手牌\r\n            if (seatData.seatindex == cc.vv.gameNetMgr.seatIndex) {\r\n                self.initMahjongs();\r\n            }\r\n            cc.vv.audioMgr.playSFX(\"give.mp3\");\r\n        });\r\n        this.node.on('guo_result', function(data) {\r\n            self.hideOptions();\r\n        });\r\n        // 游戏\r\n        this.node.on('game_playing', function(data) {\r\n            self.initMahjongs();\r\n        });\r\n        this.node.on('peng_notify', function(data) {\r\n            self.hideChiOptions();\r\n            self.hideChupai();\r\n            var seatData = data.detail;\r\n            console.log(\"此时玩家的seatdate\", seatData);\r\n            if (seatData.seatindex == cc.vv.gameNetMgr.seatIndex) {\r\n                self.initMahjongs();\r\n            } else {\r\n                self.initOtherMahjongs(seatData);\r\n            }\r\n            var localIndex = self.getLocalIndex(seatData.seatindex);\r\n            self.playEfx(localIndex, \"play_peng\");\r\n            cc.vv.audioMgr.playSFX(\"nv/peng.mp3\");\r\n            self.hideOptions();\r\n            seatData.tinged = true;\r\n            self.showTingedFlag();\r\n        });\r\n        // 吃\r\n        this.node.on(\"chi_notify\", function(data) {\r\n            var seatData = data.detail;\r\n            var localIndex = self.getLocalIndex(seatData);\r\n            if (seatData.seatindex == cc.vv.gameNetMgr.seatIndex) {\r\n                self.initMahjongs();\r\n            } else {\r\n                self.initOtherMahjongs(seatData);\r\n            }\r\n            // TODO 吃牌特效有bug\r\n            // self.playEfx(localIndex, \"play_peng\");\r\n            cc.vv.audioMgr.playSFX(\"nv/chi.mp3\");\r\n            self.hideChiOptions();\r\n            self.hideOptions();\r\n            seatData.tinged = true;\r\n            self.showTingedFlag();\r\n        });\r\n        this.node.on('gang_notify', function(data) {\r\n            self.hideChiOptions();\r\n            self.hideChupai();\r\n            var data = data.detail;\r\n            var seatData = data.seatData;\r\n            var gangtype = data.gangtype;\r\n            if (seatData.seatindex == cc.vv.gameNetMgr.seatIndex) {\r\n                self.initMahjongs();\r\n            } else {\r\n                self.initOtherMahjongs(seatData);\r\n            }\r\n            var localIndex = self.getLocalIndex(seatData.seatindex);\r\n            self.playEfx(localIndex, \"play_gang\");\r\n            cc.vv.audioMgr.playSFX(\"nv/gang.mp3\");\r\n            console.log(\"---------seatData------------->>\", seatData.tinged, seatData);\r\n            if (seatData.angangs.length == 0) {\r\n                seatData.tinged = true;\r\n            }\r\n            self.showTingedFlag();\r\n        });\r\n        this.node.on(\"hangang_notify\", function(data) {\r\n            var data = data.detail;\r\n            var localIndex = self.getLocalIndex(data);\r\n            self.playEfx(localIndex, \"play_gang\");\r\n            cc.vv.audioMgr.playSFX(\"nv/gang.mp3\");\r\n            self.hideOptions();\r\n        });\r\n    },\r\n    showChupai: function() {\r\n        var pai = cc.vv.gameNetMgr.chupai;\r\n        if (pai >= 0) {\r\n            var localIndex = this.getLocalIndex(cc.vv.gameNetMgr.turn);\r\n            var sprite = this._chupaiSprite[localIndex];\r\n            sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\", pai);\r\n            var target_node = sprite.node;\r\n            var old_x = target_node.x;\r\n            var old_y = target_node.y;\r\n            sprite.node.active = true;\r\n            var pos = cc.vv.global.shootPos;\r\n            switch (localIndex) {\r\n                case 0:\r\n                    if (pos) {\r\n                        target_node.x = pos.x * 1.1; //移到出牌位置\r\n                        target_node.y = pos.y * 1.1 - 158; //移到出牌位置\r\n                    }\r\n                    break;\r\n                case 1:\r\n                    target_node.x = cc.find(\"Canvas/game/right\").x;\r\n                    target_node.y = -150;\r\n                    break;\r\n                case 2:\r\n                    target_node.x = -50;\r\n                    target_node.y = 276;\r\n                    break;\r\n                case 3:\r\n                    target_node.x = cc.find(\"Canvas/game/left\").x;\r\n                    target_node.y = 150;\r\n                    break;\r\n            }\r\n            var action = cc.moveTo(0.05, cc.p(old_x, old_y));\r\n            //动画需要隐藏自己出的牌\r\n            if (cc.vv.gameNetMgr.seatIndex == cc.vv.gameNetMgr.turn && cc.vv.global.touch_target) {\r\n                cc.vv.global.touch_target.active = false;\r\n            }\r\n            target_node.runAction(action);\r\n        }\r\n    },\r\n    toChiActionPage: function() {\r\n        // console.log(\"to 吃 操作的页面\");\r\n        this.showChiAction(this._optionsData);\r\n    },\r\n    // 碰，杠，胡，过操作\r\n    addOption: function(btnName, pai) {\r\n        for (var i = 0; i < this._options.childrenCount; ++i) {\r\n            var child = this._options.children[i];\r\n            if (child.name == \"op\" && child.active == false) {\r\n                child.active = true;\r\n                var sprite = child.getChildByName(\"opTarget\").getComponent(cc.Sprite);\r\n                sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\", pai);\r\n                var btn = child.getChildByName(btnName);\r\n                btn.active = true;\r\n                btn.pai = pai;\r\n                return;\r\n            }\r\n        }\r\n    },\r\n    // 吃牌操作\r\n    addChiOption: function(btnName, data) {\r\n        console.log(\"吃牌操作addchioption\", data);\r\n        // 显示全部\r\n        for (var i = 0; i < this._chiOpts.childrenCount; ++i) {\r\n            var child = this._chiOpts.children[i];\r\n            child.active = true;\r\n            if (child.name == \"btnChi\") {\r\n                if (data.pai != null) {\r\n                    child.pai = data.pai;\r\n                }\r\n            }\r\n        }\r\n        for (var i = 0; i < this._chiOpts.childrenCount; ++i) {\r\n            var child = this._chiOpts.children[i];\r\n            for (var j = 0; j < 3; j++) {\r\n                var id = \"op\" + j;\r\n                if (child.name == id) {\r\n                    child.active = false;\r\n                }\r\n            }\r\n        }\r\n        for (var i = 0; i < this._chiOpts.childrenCount; ++i) {\r\n            var parentname = this._chiOpts.children[i];\r\n            var info = data.chiArrayInfo;\r\n            if (info.length <= 0) {\r\n                return;\r\n            }\r\n            // 目标牌\r\n            if (parentname.name == \"opTarget\") {\r\n                if (data.pai != null) {\r\n                    var sprite = parentname.getComponent(cc.Sprite);\r\n                    sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\", data.pai);\r\n                }\r\n            }\r\n            for (var k = 0; k < info.length; k++) {\r\n                var name = \"op\" + k;\r\n                if (parentname.name == name) {\r\n                    parentname.active = true;\r\n                    var childName = \"pai\" + k;\r\n                    var paiInfo = info[k];\r\n                    this._chiArrays.push(paiInfo);\r\n                    console.log('this._chiArraysthis._chiArraysthis._chiArraysthis._chiArrays', this._chiArrays);\r\n                    this.showChiPaiArray(parentname, paiInfo)\r\n                }\r\n            }\r\n        }\r\n    },\r\n    // 显示吃牌的组合\r\n    showChiPaiArray: function(parentname, data) {\r\n        console.log(\"显示吃牌的组合\", data, this._chiArrays);\r\n        if (data != null && data.length > 0) {\r\n            for (var index = 0; index < 2; index++) {\r\n                var pai = data[index];\r\n                var painame = \"pai\" + index;\r\n                var sprite = parentname.getChildByName(painame).getComponent(cc.Sprite);\r\n                sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\", pai);\r\n            }\r\n        }\r\n    },\r\n    // 隐藏碰杠胡牌操作\r\n    hideOptions: function(data) {\r\n        this._options.active = false;\r\n        this.hideChiOptions();\r\n        for (var i = 0; i < this._options.childrenCount; ++i) {\r\n            var child = this._options.children[i];\r\n            if (child.name == \"op\") {\r\n                child.active = false;\r\n                child.getChildByName(\"btnPeng\").active = false;\r\n                child.getChildByName(\"btnGang\").active = false;\r\n                child.getChildByName(\"btnHu\").active = false;\r\n                child.getChildByName(\"btnChi\").active = false;\r\n            }\r\n        }\r\n    },\r\n    // 隐藏吃牌的操作\r\n    hideChiOptions: function() {\r\n        console.log(\"隐藏hideChiOptions\", this._chiOpts.childrenCount);\r\n        this._chiOpts.active = false;\r\n        for (var i = 0; i < this._chiOpts.childrenCount; ++i) {\r\n            var child = this._chiOpts.children[i];\r\n            child.active = false;\r\n        }\r\n    },\r\n    showAction: function(data) {\r\n        if (this._options.active) {\r\n            this.hideOptions();\r\n        }\r\n        if (data && (data.hu || data.gang || data.peng || data.chi)) {\r\n            this._options.active = true;\r\n            if (data.hu) {\r\n                this.addOption(\"btnHu\", data.pai);\r\n            }\r\n            if (data.peng) {\r\n                this.addOption(\"btnPeng\", data.pai);\r\n            }\r\n            if (data.gang) {\r\n                for (var i = 0; i < data.gangpai.length; ++i) {\r\n                    var gp = data.gangpai[i];\r\n                    this.addOption(\"btnGang\", gp);\r\n                }\r\n            }\r\n            if (data.chi) {\r\n                this.addOption(\"btnChi\");\r\n            }\r\n        } else {\r\n            var selfData = cc.vv.gameNetMgr.getSelfData();\r\n            if (selfData.tinged) {\r\n                return;\r\n                //注1):2017 07 26 ly\r\n                //下面自动出牌不在需要，由服务器端去完成\r\n                //原因是： 下面语句执行后会产生一种牌不显示的bug。 \r\n                //      bug是必现。原因不明。\r\n                // //如果已经听牌，并且没有操作，则自动打牌\r\n                // var sprite = this._myMJArr[this._myMJArr.length - 1];\r\n                // var node = sprite.node;\r\n                // cc.vv.global.touch_target = node;\r\n                // node.active = false;\r\n                // this.shoot(node.mjId);\r\n                // node.y = 0;\r\n                // this.recordShootPos(node);\r\n            }\r\n        }\r\n    },\r\n    // 吃牌的操作\r\n    showChiAction: function(data) {\r\n        console.log(\"吃牌操作\", data);\r\n        // 如果碰牌的操作界面显示了,先隐藏,正常情况下这是不可能的\r\n        if (this._options.active) {\r\n            this.hideOptions();\r\n        }\r\n        if (this._chiOpts.active) {\r\n            this.hideChiOptions();\r\n        }\r\n        if (data && data.chi) {\r\n            this._chiOpts.active = true;\r\n            this._chiArrays = [];\r\n            this._chiOptionArray = [];\r\n            this.addChiOption('btnChi', data);\r\n        }\r\n    },\r\n    initWanfaLabel: function() {\r\n        var wanfa = cc.find(\"Canvas/infobar/wanfa\").getComponent(cc.Label);\r\n        wanfa.string = cc.vv.gameNetMgr.getWanfa();\r\n    },\r\n    initHupai: function(localIndex, pai) {\r\n        if (cc.vv.gameNetMgr.conf.type == \"ykx\") {\r\n            var hupailist = this._hupaiLists[localIndex];\r\n            for (var i = 0; i < hupailist.children.length; ++i) {\r\n                var hupainode = hupailist.children[i];\r\n                if (hupainode.active == false) {\r\n                    var pre = cc.vv.mahjongmgr.getFoldPre(localIndex);\r\n                    hupainode.getComponent(cc.Sprite).spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(pre, pai);\r\n                    hupainode.active = true;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    },\r\n    // 在胡牌堆里面处理财神显示\r\n    initCaiShen: function(localIndex, pai) {\r\n        var hupailist = this._hupaiLists[localIndex];\r\n        for (var i = 0; i < hupailist.children.length; ++i) {\r\n            var hupainode = hupailist.children[i];\r\n            if (hupainode.active == false) {\r\n                var pre = cc.vv.mahjongmgr.getFoldPre(localIndex);\r\n                hupainode.getComponent(cc.Sprite).spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(pre, pai);\r\n                hupainode.active = true;\r\n                break;\r\n            }\r\n        }\r\n    },\r\n    playEfx: function(index, name) {\r\n        this._playEfxs[index].node.active = true;\r\n        this._playEfxs[index].play(name);\r\n    },\r\n    onGameBeign: function() {\r\n        for (var i = 0; i < this._playEfxs.length; ++i) {\r\n            this._playEfxs[i].node.active = false;\r\n        }\r\n        for (var i = 0; i < this._hupaiLists.length; ++i) {\r\n            for (var j = 0; j < this._hupaiLists[i].childrenCount; ++j) {\r\n                this._hupaiLists[i].children[j].active = false;\r\n            }\r\n        }\r\n        for (var i = 0; i < cc.vv.gameNetMgr.seats.length; ++i) {\r\n            var seatData = cc.vv.gameNetMgr.seats[i];\r\n            var localIndex = cc.vv.gameNetMgr.getLocalIndex(i);\r\n            var hupai = this._hupaiTips[localIndex];\r\n            hupai.active = seatData.hued;\r\n            if (seatData.hued) {\r\n                // 如果胡牌了.肯定不显示听牌了\r\n                hupai.getChildByName(\"sprHu\").active = !seatData.iszimo;\r\n                hupai.getChildByName(\"sprZimo\").active = seatData.iszimo;\r\n                hupai.getChildByName(\"sprTing\").active = false;\r\n            }\r\n        }\r\n        this.hideChupai();\r\n        this.hideOptions();\r\n        var sides = [\"right\", \"up\", \"left\"];\r\n        var gameChild = this.node.getChildByName(\"game\");\r\n        for (var i = 0; i < sides.length; ++i) {\r\n            var sideChild = gameChild.getChildByName(sides[i]);\r\n            var holds = sideChild.getChildByName(\"holds\");\r\n            for (var j = 0; j < holds.childrenCount; ++j) {\r\n                var nc = holds.children[j];\r\n                nc.active = true;\r\n                nc.scaleX = 1.0;\r\n                nc.scaleY = 1.0;\r\n                var sprite = nc.getComponent(cc.Sprite);\r\n                sprite.spriteFrame = cc.vv.mahjongmgr.holdsEmpty[i + 1];\r\n            }\r\n        }\r\n        if (cc.vv.gameNetMgr.gamestate == \"\" && cc.vv.replayMgr.isReplay() == false) {\r\n            return;\r\n        }\r\n        this.gameRoot.active = true;\r\n        this.prepareRoot.active = false;\r\n        this.initMahjongs();\r\n        this.initCaiShenList();\r\n        var seats = cc.vv.gameNetMgr.seats;\r\n        for (var i in seats) {\r\n            var seatData = seats[i];\r\n            var localIndex = cc.vv.gameNetMgr.getLocalIndex(i);\r\n            if (localIndex != 0) {\r\n                this.initOtherMahjongs(seatData);\r\n                this.initOtherCaiShenList(seatData);\r\n                if (i == cc.vv.gameNetMgr.turn) {\r\n                    this.initMopai(i, -1);\r\n                } else {\r\n                    this.initMopai(i, null);\r\n                }\r\n            }\r\n        }\r\n        this.showChupai();\r\n        if (cc.vv.gameNetMgr.curaction != null) {\r\n            this._optionsData = cc.vv.gameNetMgr.curaction;\r\n            this.showAction(cc.vv.gameNetMgr.curaction);\r\n            cc.vv.gameNetMgr.curaction = null;\r\n        }\r\n        this.checkCaiShen();\r\n        var selfData = cc.vv.gameNetMgr.getSelfData();\r\n        console.log('------------------------------------');\r\n        console.log(\"selfData\", selfData);\r\n        console.log('------------------------------------');\r\n        if (!selfData.extraPais) {\r\n            return;\r\n        }\r\n        if (selfData.extraPais.length > 0) {\r\n            console.log(\"当前多余的牌存在,则需要额外处理手牌\");\r\n            this.initExtraPaiHolds();\r\n            selfData.extraPais = [];\r\n        } else {\r\n            this.initTingedHolds();\r\n        }\r\n        this.showTingedFlag();\r\n    },\r\n    recordShootPos: function(node) { //记录出牌位置\r\n        if (node) {\r\n            var pos = {\r\n                x: node.x,\r\n                y: node.y\r\n            }\r\n            cc.vv.global.shootPos = pos;\r\n        }\r\n    },\r\n    onMjToUp: function(nc) {\r\n        var self = this;\r\n        nc.on(cc.Node.EventType.TOUCH_START, function(touch) {\r\n            if (!self._canChupai) {\r\n                return;\r\n            }\r\n            if (!nc.getComponent(cc.Button).interactable || cc.vv.gameNetMgr.turn != cc.vv.gameNetMgr.seatIndex) {\r\n                return;\r\n            }\r\n            this.old_node_x = nc.x;\r\n            this.old_node_y = nc.y;\r\n            this.old_touch_x = touch.getLocation().x;\r\n            this.old_touch_y = touch.getLocation().y\r\n            cc.vv.global.touch_target = nc;\r\n        });\r\n        nc.on(cc.Node.EventType.TOUCH_MOVE, function(touch) {\r\n            if (!self._canChupai) {\r\n                return;\r\n            }\r\n            if (!nc.getComponent(cc.Button).interactable || cc.vv.gameNetMgr.turn != cc.vv.gameNetMgr.seatIndex) {\r\n                return;\r\n            }\r\n            var touchX_diff = touch.getLocation().x - this.old_touch_x;\r\n            var touchY_diff = touch.getLocation().y - this.old_touch_y;\r\n            if (touchY_diff > 0) {\r\n                nc.x = this.old_node_x + touchX_diff;\r\n                nc.y = this.old_node_y + touchY_diff;\r\n            }\r\n        });\r\n        nc.on(cc.Node.EventType.TOUCH_END, function(touch) {\r\n            if (!self._canChupai) {\r\n                return;\r\n            }\r\n            if (!nc.getComponent(cc.Button).interactable || cc.vv.gameNetMgr.turn != cc.vv.gameNetMgr.seatIndex) {\r\n                return;\r\n            }\r\n            var touchY_diff = touch.getLocation().y - this.old_touch_y;\r\n            if (touchY_diff > nc.height / 2) {\r\n                self.recordShootPos(nc);\r\n                var type = cc.vv.mahjongmgr.getMahjongType(nc.mjId);\r\n                if (type == 4) {\r\n                    self.shootCaiShen(nc.mjId);\r\n                } else {\r\n                    self.shoot(nc.mjId);\r\n                }\r\n                // nc.active = false;\r\n            }\r\n            //还原到原始位置\r\n            nc.x = this.old_node_x;\r\n            nc.y = this.old_node_y;\r\n        });\r\n        nc.on(cc.Node.EventType.TOUCH_CANCEL, function(touch) {\r\n            if (!self._canChupai) {\r\n                return;\r\n            }\r\n            if (!nc.getComponent(cc.Button).interactable || cc.vv.gameNetMgr.turn != cc.vv.gameNetMgr.seatIndex) {\r\n                return;\r\n            }\r\n            var touchCancel = touch.getLocation();\r\n            var delta = touchCancel.y - this.old_touch_y;\r\n            if (delta > nc.height / 2) {\r\n                self.recordShootPos(nc);\r\n                var type = cc.vv.mahjongmgr.getMahjongType(nc.mjId);\r\n                if (type == 4) {\r\n                    self.shootCaiShen(nc.mjId);\r\n                } else {\r\n                    self.shoot(nc.mjId);\r\n                }\r\n                nc.active = false;\r\n            }\r\n            //还原到原始位置\r\n            nc.x = this.old_node_x;\r\n            nc.y = this.old_node_y;\r\n        });\r\n    },\r\n    onMJClicked: function(event) {\r\n        var self = this;\r\n        if (!self._canChupai) {\r\n            return;\r\n        }\r\n        //如果不是自己的轮子，则忽略\r\n        if (cc.vv.gameNetMgr.turn != cc.vv.gameNetMgr.seatIndex) {\r\n            console.log(\"not your turn.\" + cc.vv.gameNetMgr.turn);\r\n            return;\r\n        }\r\n        var self = this;\r\n        for (var i = 0; i < this._myMJArr.length; ++i) {\r\n            if (event.target == this._myMJArr[i].node) {\r\n                //如果是再次点击，则出牌\r\n                if (event.target == this._selectedMJ) {\r\n                    // event.target.active = false;\r\n                    var type = cc.vv.mahjongmgr.getMahjongType(this._selectedMJ.mjId);\r\n                    if (type == 4) {\r\n                        this.shootCaiShen(this._selectedMJ.mjId);\r\n                    } else {\r\n                        this.shoot(this._selectedMJ.mjId);\r\n                    }\r\n                    this._selectedMJ.y = 0;\r\n                    this._selectedMJ = null;\r\n                    self.recordShootPos(event.target);\r\n                    return;\r\n                }\r\n                if (this._selectedMJ != null) {\r\n                    this._selectedMJ.y = 0;\r\n                }\r\n                event.target.y = 15;\r\n                this._selectedMJ = event.target;\r\n                return;\r\n            }\r\n        }\r\n    },\r\n    //出牌\r\n    shoot: function(mjId) {\r\n        if (mjId == null) {\r\n            return;\r\n        }\r\n        cc.vv.net.send('chupai', mjId);\r\n    },\r\n    //出牌\r\n    shootCaiShen: function(mjId) {\r\n        console.log(\"财神,换牌\");\r\n        if (mjId == null) {\r\n            return;\r\n        }\r\n        // 一定要是财神才能进行此操作\r\n        cc.vv.net.send('caishen', mjId);\r\n    },\r\n    getMJIndex: function(side, index) {\r\n        if (side == \"right\" || side == \"up\") {\r\n            return 13 - index;\r\n        }\r\n        return index;\r\n    },\r\n    initMopai: function(seatIndex, pai) {\r\n        var localIndex = cc.vv.gameNetMgr.getLocalIndex(seatIndex);\r\n        var side = cc.vv.mahjongmgr.getSide(localIndex);\r\n        var pre = cc.vv.mahjongmgr.getFoldPre(localIndex);\r\n        var gameChild = this.node.getChildByName(\"game\");\r\n        var sideChild = gameChild.getChildByName(side);\r\n        var holds = sideChild.getChildByName(\"holds\");\r\n        var lastIndex = this.getMJIndex(side, 13);\r\n        var nc = holds.children[lastIndex];\r\n        nc.scaleX = 1.0;\r\n        nc.scaleY = 1.0;\r\n        if (pai == null) {\r\n            nc.active = false;\r\n        } else if (pai >= 0) {\r\n            nc.active = true;\r\n            if (side == \"up\") {\r\n                nc.scaleX = 0.73;\r\n                nc.scaleY = 0.73;\r\n            }\r\n            var sprite = nc.getComponent(cc.Sprite);\r\n            sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(pre, pai);\r\n        } else if (pai != null) {\r\n            nc.active = true;\r\n            if (side == \"up\") {\r\n                nc.scaleX = 1.0;\r\n                nc.scaleY = 1.0;\r\n            }\r\n            var sprite = nc.getComponent(cc.Sprite);\r\n            sprite.spriteFrame = cc.vv.mahjongmgr.getHoldsEmptySpriteFrame(side);\r\n        }\r\n    },\r\n    initEmptySprites: function(seatIndex) {\r\n        var localIndex = cc.vv.gameNetMgr.getLocalIndex(seatIndex);\r\n        var side = cc.vv.mahjongmgr.getSide(localIndex);\r\n        var pre = cc.vv.mahjongmgr.getFoldPre(localIndex);\r\n        var gameChild = this.node.getChildByName(\"game\");\r\n        var sideChild = gameChild.getChildByName(side);\r\n        var holds = sideChild.getChildByName(\"holds\");\r\n        var spriteFrame = cc.vv.mahjongmgr.getEmptySpriteFrame(side);\r\n        for (var i = 0; i < holds.childrenCount; ++i) {\r\n            var nc = holds.children[i];\r\n            nc.scaleX = 1.0;\r\n            nc.scaleY = 1.0;\r\n            var sprite = nc.getComponent(cc.Sprite);\r\n            sprite.spriteFrame = spriteFrame;\r\n        }\r\n    },\r\n    initOtherMahjongs: function(seatData) {\r\n        console.log(\"seat:\" + seatData.seatindex, seatData);\r\n        var localIndex = this.getLocalIndex(seatData.seatindex);\r\n        if (localIndex == 0 || seatData) {\r\n            return;\r\n        }\r\n        var side = cc.vv.mahjongmgr.getSide(localIndex);\r\n        var game = this.node.getChildByName(\"game\");\r\n        var sideRoot = game.getChildByName(side);\r\n        var sideHolds = sideRoot.getChildByName(\"holds\");\r\n        console.log('sideholds', sideHolds);\r\n        var num = seatData.pengs.length + seatData.angangs.length + seatData.diangangs.length + seatData.wangangs.length + seatData.chis.length;\r\n        num *= 3;\r\n        for (var i = 0; i < num; ++i) {\r\n            var idx = this.getMJIndex(side, i);\r\n            sideHolds.children[idx].active = false;\r\n        }\r\n        var pre = cc.vv.mahjongmgr.getFoldPre(localIndex);\r\n        var holds = this.sortHolds(seatData);\r\n        if (holds != null && holds.length > 0) {\r\n            for (var i = 0; i < holds.length; ++i) {\r\n                var idx = this.getMJIndex(side, i + num);\r\n                var sprite = sideHolds.children[idx].getComponent(cc.Sprite);\r\n                if (side == \"up\") {\r\n                    sprite.node.scaleX = 0.73;\r\n                    sprite.node.scaleY = 0.73;\r\n                }\r\n                sprite.node.active = true;\r\n                sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(pre, holds[i]);\r\n            }\r\n            if (holds.length + num == 13) {\r\n                var lasetIdx = this.getMJIndex(side, 13);\r\n                sideHolds.children[lasetIdx].active = false;\r\n            }\r\n        }\r\n    },\r\n    sortHolds: function(seatData) {\r\n        var holds = seatData.holds;\r\n        if (holds == null) {\r\n            return null;\r\n        }\r\n        //如果手上的牌的数目是2,5,8,11,14，表示最后一张牌是刚摸到的牌\r\n        var mopai = null;\r\n        var l = holds.length\r\n        if (l == 2 || l == 5 || l == 8 || l == 11 || l == 14) {\r\n            mopai = holds.pop();\r\n        }\r\n        cc.vv.mahjongmgr.sortMJ(holds);\r\n        //将摸牌添加到最后\r\n        if (mopai != null) {\r\n            holds.push(mopai);\r\n        }\r\n        return holds;\r\n    },\r\n    initMahjongs: function() {\r\n        var seats = cc.vv.gameNetMgr.seats;\r\n        var seatData = seats[cc.vv.gameNetMgr.seatIndex];\r\n        var holds = this.sortHolds(seatData);\r\n        if (holds == null) {\r\n            return;\r\n        }\r\n        console.log(\"seatData.chis.length\", seatData.chis.length);\r\n        console.log(\"this._myMJArrthis._myMJArrthis._myMJArrthis._myMJArr\", this._myMJArr);\r\n        //初始化手牌\r\n        var lackingNum = (seatData.pengs.length + seatData.angangs.length + seatData.diangangs.length + seatData.wangangs.length + seatData.chis.length) * 3;\r\n        console.log(\"lackingNum\", lackingNum);\r\n        for (var i = 0; i < holds.length; ++i) {\r\n            var mjid = holds[i];\r\n            var sprite = this._myMJArr[i + lackingNum];\r\n            if (sprite && sprite.node) {\r\n                sprite.node.mjId = mjid;\r\n                sprite.node.y = 0;\r\n                sprite.node.active = true;\r\n                this.setSpriteFrameByMJID(\"M_\", sprite, mjid);\r\n            }\r\n        }\r\n        for (var i = 0; i < lackingNum; ++i) {\r\n            var sprite = this._myMJArr[i];\r\n            sprite.node.mjId = null;\r\n            sprite.spriteFrame = null;\r\n            sprite.node.active = false;\r\n        }\r\n        for (var i = lackingNum + holds.length; i < this._myMJArr.length; ++i) {\r\n            var sprite = this._myMJArr[i];\r\n            sprite.node.mjId = null;\r\n            sprite.spriteFrame = null;\r\n            sprite.node.active = false;\r\n        }\r\n    },\r\n    setSpriteFrameByMJID: function(pre, sprite, mjid) {\r\n        sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(pre, mjid);\r\n        sprite.node.active = true;\r\n    },\r\n    getLocalIndex: function(index) {\r\n        var ret = (index - cc.vv.gameNetMgr.seatIndex + 4) % 4;\r\n        console.log(\"old:\" + index + \",base:\" + cc.vv.gameNetMgr.seatIndex + \",new:\" + ret);\r\n        return ret;\r\n    },\r\n    onOptionClicked: function(event) {\r\n        console.log(\"吃碰杠牌操作\");\r\n        console.log(event.target.pai);\r\n        if (event.target.name == \"btnPeng\") {\r\n            cc.vv.net.send(\"peng\");\r\n        } else if (event.target.name == \"btnGang\") {\r\n            cc.vv.net.send(\"gang\", event.target.pai);\r\n        } else if (event.target.name == \"btnHu\") {\r\n            cc.vv.net.send(\"hu\");\r\n        } else if (event.target.name == \"btnGuo\") {\r\n            cc.vv.net.send(\"guo\");\r\n        } else if (event.target.name == \"btnChi\") {\r\n            console.log(\"吃牌操作按钮点击\");\r\n            cc.vv.net.send(\"chi\", event.target.pai);\r\n            console.log(\"向服务器发送吃牌操作--\", {\r\n                pai: event.target.pai,\r\n                chiArray: this._chiOptionArray\r\n            });\r\n        }\r\n    },\r\n    // 吃牌操作\r\n    onChiOptionClicked: function(event) {\r\n        console.log(\"吃牌操作事件绑定\");\r\n        // 用来存放玩家选中的吃的组合\r\n        console.log(event.target.pai);\r\n        if (event.target.name == \"op0\") {\r\n            if (this._chiArrays.length <= 0) {\r\n                this._chiOptionArray = [];\r\n            } else {\r\n                this._chiOptionArray = this._chiArrays[0];\r\n            }\r\n            console.log(\"玩家选中了第一组组合\", this._chiOptionArray);\r\n        } else if (event.target.name == \"op1\") {\r\n            if (this._chiArrays.length <= 0) {\r\n                this._chiOptionArray = [];\r\n            } else {\r\n                this._chiOptionArray = this._chiArrays[1];\r\n            }\r\n            console.log(\"选择了第二组组合\", this._chiOptionArray);\r\n        } else if (event.target.name == \"op2\") {\r\n            if (this._chiArrays.length <= 0) {\r\n                this._chiOptionArray = [];\r\n            } else {\r\n                this._chiOptionArray = this._chiArrays[2];\r\n            }\r\n            console.log(\"选择了第三组组合\", this._chiOptionArray);\r\n        } else if (event.target.name == \"btnGuo\") {\r\n            cc.vv.net.send(\"guo\");\r\n        } else if (event.target.name == \"btnChi\") {\r\n            console.log(\"吃牌操作按钮点击\");\r\n            if (this._chiOptionArray.length > 0) {\r\n                console.log(\"可以吃的组合选中了,发送数据到服务器\", this._chiOptionArray);\r\n                var data = {\r\n                    pai: event.target.pai,\r\n                    chiOptioned: this._chiOptionArray\r\n                }\r\n                console.log(\"吃牌的组合是\", data)\r\n                cc.vv.net.send(\"chi\", data);\r\n            } else {\r\n                cc.vv.alert.show(\"注意\", \"请选择一组吃牌的组合\");\r\n            }\r\n            console.log(\"向服务器发送吃牌操作--\", event.target.pai);\r\n        }\r\n    },\r\n    initCaiShenList: function() {\r\n        // console.log('开始游戏,调用财神初始化信息');\r\n        var seats = cc.vv.gameNetMgr.seats;\r\n        var seatData = seats[cc.vv.gameNetMgr.seatIndex];\r\n        var caishen = seatData.caiShen;\r\n        // console.log('caiShen initCaiShenList', caishen);\r\n        if (caishen == null) {\r\n            return;\r\n        }\r\n        var gameChild = this.node.getChildByName(\"game\");\r\n        var myselfChild = gameChild.getChildByName(\"myself\");\r\n        var caishen_list = myselfChild.getChildByName(\"hupailist\");\r\n        for (var i = 0; i < caishen.length; ++i) {\r\n            var mj_caishen_id = caishen[i];\r\n            var sprite = caishen_list.children[i].getComponent(cc.Sprite);\r\n            sprite.node.mjId = mj_caishen_id;\r\n            this.setSpriteFrameByMJID(\"M_\", sprite, mj_caishen_id);\r\n        }\r\n    },\r\n    initOtherCaiShenList: function(seatData) {\r\n        // console.log('初始化其他人的财神');\r\n        var caishen = seatData.caiShen;\r\n        // console.log('caiShen initOtherCaiShenList', caishen);\r\n        if (caishen == null) {\r\n            return;\r\n        }\r\n        var localIndex = this.getLocalIndex(seatData.seatindex);\r\n        var side = cc.vv.mahjongmgr.getSide(localIndex);\r\n        var game = this.node.getChildByName(\"game\");\r\n        var sideRoot = game.getChildByName(side);\r\n        var side_caishen_list = sideRoot.getChildByName(\"hupailist\");\r\n        var pre = cc.vv.mahjongmgr.getFoldPre(localIndex);\r\n        for (var i = 0; i < caishen.length; ++i) {\r\n            var mj_caishen_id = caishen[i];\r\n            var sprite = side_caishen_list.children[i].getComponent(cc.Sprite);\r\n            sprite.node.mjId = mj_caishen_id;\r\n            this.setSpriteFrameByMJID(pre, sprite, mj_caishen_id);\r\n        }\r\n    },\r\n    // called every frame, uncomment this function to activate update callback\r\n    update: function(dt) {},\r\n    onDestroy: function() {\r\n        console.log(\"onDestroy\");\r\n        if (cc.vv) {\r\n            cc.vv.gameNetMgr.clear();\r\n        }\r\n    }\r\n});"
  ]
}